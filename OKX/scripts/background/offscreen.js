"use strict";(()=>{var Ne=Object.create;var te=Object.defineProperty;var Ge=Object.getOwnPropertyDescriptor;var Xe=Object.getOwnPropertyNames;var $e=Object.getPrototypeOf,ze=Object.prototype.hasOwnProperty;var Je=(l,_,P)=>_ in l?te(l,_,{enumerable:!0,configurable:!0,writable:!0,value:P}):l[_]=P;var Ye=(l,_)=>()=>(l&&(_=l(l=0)),_);var re=(l,_)=>()=>(_||l((_={exports:{}}).exports,_),_.exports);var Qe=(l,_,P,S)=>{if(_&&typeof _=="object"||typeof _=="function")for(let b of Xe(_))!ze.call(l,b)&&b!==P&&te(l,b,{get:()=>_[b],enumerable:!(S=Ge(_,b))||S.enumerable});return l};var oe=(l,_,P)=>(P=l!=null?Ne($e(l)):{},Qe(_||!l||!l.__esModule?te(P,"default",{value:l,enumerable:!0}):P,l));var Q=(l,_,P)=>(Je(l,typeof _!="symbol"?_+"":_,P),P);function ce(){throw new Error("setTimeout has not been defined")}function se(){throw new Error("clearTimeout has not been defined")}function pe(l){if(F===setTimeout)return setTimeout(l,0);if((F===ce||!F)&&setTimeout)return F=setTimeout,setTimeout(l,0);try{return F(l,0)}catch{try{return F.call(null,l,0)}catch{return F.call(this,l,0)}}}function Ze(l){if(L===clearTimeout)return clearTimeout(l);if((L===se||!L)&&clearTimeout)return L=clearTimeout,clearTimeout(l);try{return L(l)}catch{try{return L.call(null,l)}catch{return L.call(this,l)}}}function qe(){!N||!H||(N=!1,H.length?j=H.concat(j):Z=-1,j.length&&_e())}function _e(){if(!N){var l=pe(qe);N=!0;for(var _=j.length;_;){for(H=j,j=[];++Z<_;)H&&H[Z].run();Z=-1,_=j.length}H=null,N=!1,Ze(l)}}function et(l){var _=new Array(arguments.length-1);if(arguments.length>1)for(var P=1;P<arguments.length;P++)_[P-1]=arguments[P];j.push(new ge(l,_)),j.length===1&&!N&&pe(_e)}function ge(l,_){this.fun=l,this.array=_}function U(){}function Tt(l){throw new Error("process.binding is not supported")}function Wt(){return"/"}function kt(l){throw new Error("process.chdir is not supported")}function Pt(){return 0}function bt(l){var _=xt.call(K)*.001,P=Math.floor(_),S=Math.floor(_%1*1e9);return l&&(P=P-l[0],S=S-l[1],S<0&&(P--,S+=1e9)),[P,S]}function At(){var l=new Date,_=l-wt;return _/1e3}var F,L,j,N,H,Z,tt,ot,nt,at,it,rt,lt,ct,st,pt,_t,gt,mt,ut,dt,Ct,K,xt,wt,E,le,D=Ye(()=>{F=ce,L=se;typeof globalThis.setTimeout=="function"&&(F=setTimeout);typeof globalThis.clearTimeout=="function"&&(L=clearTimeout);j=[],N=!1,Z=-1;ge.prototype.run=function(){this.fun.apply(null,this.array)};tt="browser",ot="browser",nt=!0,at={},it=[],rt="",lt={},ct={},st={};pt=U,_t=U,gt=U,mt=U,ut=U,dt=U,Ct=U;K=globalThis.performance||{},xt=K.now||K.mozNow||K.msNow||K.oNow||K.webkitNow||function(){return new Date().getTime()};wt=new Date;E={nextTick:et,title:tt,browser:nt,env:at,argv:it,version:rt,versions:lt,on:pt,addListener:_t,once:gt,off:mt,removeListener:ut,removeAllListeners:dt,emit:Ct,binding:Tt,cwd:Wt,chdir:kt,umask:Pt,hrtime:bt,platform:ot,release:ct,config:st,uptime:At},le={version:"3.59.17","env.PROJECT":"okxwallet-extension","env.NODE_ENV":"production","env.SOURCEMAP":"true","env.DEV_TARGET":"","env.APP_VERSION":"3.59.17","env.COMMIT_HASH":"78e5","env.PLATFORM_WEB":void 0,"env.REDUX_DEVTOOLS":"","env.MONITOR_PLATFORM":"extension","env.ASSETS_BUILD_TYPE":"publish"};Object.keys(le).forEach(l=>{let _=l.split("."),P=E;for(let S=0;S<_.length;S++){let b=_[S];S===_.length-1?P[b]=le[l]:P=P[b]||(P[b]={})}})});var ae=re((ne,me)=>{D();(function(l,_){if(typeof define=="function"&&define.amd)define("webextension-polyfill",["module"],_);else if(typeof ne<"u")_(me);else{var P={exports:{}};_(P),l.browser=P.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:ne,function(l){"use strict";if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){let _="The message port closed before a response was received.",P=S=>{let b={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(b).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class T extends WeakMap{constructor(r,m=void 0){super(m),this.createItem=r}get(r){return this.has(r)||this.set(r,this.createItem(r)),super.get(r)}}let c=t=>t&&typeof t=="object"&&typeof t.then=="function",C=(t,r)=>(...m)=>{S.runtime.lastError?t.reject(new Error(S.runtime.lastError.message)):r.singleCallbackArg||m.length<=1&&r.singleCallbackArg!==!1?t.resolve(m[0]):t.resolve(m)},W=t=>t==1?"argument":"arguments",s=(t,r)=>function(k,...f){if(f.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${W(r.minArgs)} for ${t}(), got ${f.length}`);if(f.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${W(r.maxArgs)} for ${t}(), got ${f.length}`);return new Promise((w,y)=>{if(r.fallbackToNoCallback)try{k[t](...f,C({resolve:w,reject:y},r))}catch(A){console.warn(`${t} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,A),k[t](...f),r.fallbackToNoCallback=!1,r.noCallback=!0,w()}else r.noCallback?(k[t](...f),w()):k[t](...f,C({resolve:w,reject:y},r))})},g=(t,r,m)=>new Proxy(r,{apply(k,f,w){return m.call(f,t,...w)}}),e=Function.call.bind(Object.prototype.hasOwnProperty),o=(t,r={},m={})=>{let k=Object.create(null),f={has(y,A){return A in t||A in k},get(y,A,R){if(A in k)return k[A];if(!(A in t))return;let h=t[A];if(typeof h=="function")if(typeof r[A]=="function")h=g(t,t[A],r[A]);else if(e(m,A)){let V=s(A,m[A]);h=g(t,t[A],V)}else h=h.bind(t);else if(typeof h=="object"&&h!==null&&(e(r,A)||e(m,A)))h=o(h,r[A],m[A]);else if(e(m,"*"))h=o(h,r[A],m["*"]);else return Object.defineProperty(k,A,{configurable:!0,enumerable:!0,get(){return t[A]},set(V){t[A]=V}}),h;return k[A]=h,h},set(y,A,R,h){return A in k?k[A]=R:t[A]=R,!0},defineProperty(y,A,R){return Reflect.defineProperty(k,A,R)},deleteProperty(y,A){return Reflect.deleteProperty(k,A)}},w=Object.create(t);return new Proxy(w,f)},i=t=>({addListener(r,m,...k){r.addListener(t.get(m),...k)},hasListener(r,m){return r.hasListener(t.get(m))},removeListener(r,m){r.removeListener(t.get(m))}}),p=new T(t=>typeof t!="function"?t:function(m){let k=o(m,{},{getContent:{minArgs:0,maxArgs:0}});t(k)}),x=new T(t=>typeof t!="function"?t:function(m,k,f){let w=!1,y,A=new Promise(I=>{y=function(v){w=!0,I(v)}}),R;try{R=t(m,k,y)}catch(I){R=Promise.reject(I)}let h=R!==!0&&c(R);if(R!==!0&&!h&&!w)return!1;let V=I=>{I.then(v=>{f(v)},v=>{let O;v&&(v instanceof Error||typeof v.message=="string")?O=v.message:O="An unexpected error occurred",f({__mozWebExtensionPolyfillReject__:!0,message:O})}).catch(v=>{console.error("Failed to send onMessage rejected reply",v)})};return V(h?R:A),!0}),u=({reject:t,resolve:r},m)=>{S.runtime.lastError?S.runtime.lastError.message===_?r():t(new Error(S.runtime.lastError.message)):m&&m.__mozWebExtensionPolyfillReject__?t(new Error(m.message)):r(m)},d=(t,r,m,...k)=>{if(k.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${W(r.minArgs)} for ${t}(), got ${k.length}`);if(k.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${W(r.maxArgs)} for ${t}(), got ${k.length}`);return new Promise((f,w)=>{let y=u.bind(null,{resolve:f,reject:w});k.push(y),m.sendMessage(...k)})},a={devtools:{network:{onRequestFinished:i(p)}},runtime:{onMessage:i(x),onMessageExternal:i(x),sendMessage:d.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:d.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},n={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return b.privacy={network:{"*":n},services:{"*":n},websites:{"*":n}},o(S,a,b)};l.exports=P(chrome)}else l.exports=globalThis.browser})});var xe=re((J,ie)=>{D();(function(_,P){typeof J=="object"&&typeof ie=="object"?ie.exports=P():typeof define=="function"&&define.amd?define([],P):typeof J=="object"?J._prohibitedMonitor=P():_._prohibitedMonitor=P()})(J,function(){return function(){"use strict";var l={"../monitor/src/amp/helper.js":function(b,T,c){c.r(T),c.d(T,{getAmpDefaultEndpoint:function(){return i},getAmplitudeAPIKey:function(){return e},getAmplitudeProject:function(){return g},logSignUpComplete:function(){return s},reportIdentifyEvent:function(){return o}});var C=c("../monitor/src/common/variables.js"),W=c("../monitor/src/common/constants.js");let s=p=>{let{signUpCompleted:x}=sessionStorage;x&&(p.logEvent("signup_completed",{},{language:C.default.getOkGlobal().locale}),sessionStorage.removeItem("signUpCompleted"))},g=p=>p||(C.default.isOKLink()?W.default.AMPLITUDE_PROJECT.oklink:C.default.isOKEx()||C.default.isInExtension()?W.default.AMPLITUDE_PROJECT.okx:W.default.AMPLITUDE_PROJECT.okcoin),e=p=>{let x=C.default.isProdEnv(),u=W.default.AMPLITUDE_KEY_MAP?.[p];return u?x?u?.prod:u?.dev:""},o=(p,x)=>{let u=new window.amplitude.Identify;u.set("channel_id",x),p.identify(u,{language:C.default.getOkGlobal().locale})},i=()=>{if(C.default.isInternalSystem()||C.default.isOKEx()||C.default.isOKLink())return"/amplitude/2/httpapi"}},"../monitor/src/amplitude.js":function(b,T,c){c.r(T);var C=c("../monitor/src/monitor.js"),W=c("../monitor/src/common/variables.js"),s=c("../monitor/src/common/event-bus.js"),g=c("../monitor/src/common/constants.js"),e=c("../monitor/src/lib/libs-amplitude.js"),o=c("../monitor/src/amp/helper.js");let i={},p,x={RESOLVE:"RESOLVE",REJECT:"REJECT"},u={events:new s.default,getAmplitudeSDKInstance(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return new Promise((a,n)=>{this.events.on(x.RESOLVE,t=>{a(t)}),this.events.on(x.REJECT,t=>{n(t)}),this.getInstance(d)})},async getInstance(d){let a=(0,o.getAmplitudeProject)(d);p&&clearTimeout(p),window.amplitude||await(0,e.default)();let n=await W.default.getTk(),t=await W.default.getDeviceId()||"";if(i[a])return i[a];let r=window.amplitude.createInstance(),m=(0,o.getAmplitudeAPIKey)(a),k=(0,o.getAmpDefaultEndpoint)(),f=C.default.apiEndpoint?C.default.apiEndpoint:k,w={userId:a===g.default.AMPLITUDE_PROJECT.web3?t:n,deviceId:t,instanceName:a,serverUrl:f,defaultTracking:!0,identityStorage:"localStorage",autocapture:{pageViews:!1,fileDownloads:!1,sessions:!1,formInteractions:!1},appVersion:W.default.getOkGlobal().assetsBuildVersion};return r.init(m,w),i[a]=r,sessionStorage.channelId&&(0,o.reportIdentifyEvent)(r,sessionStorage.channelId),sessionStorage.ampCacheEvents&&(JSON.parse(sessionStorage.ampCacheEvents).forEach(A=>{r.logEvent(...A,{language:W.default.getOkGlobal().locale})}),sessionStorage.ampCacheEvents=""),(0,o.logSignUpComplete)(r),this.events.emit(x.RESOLVE,r),r}};T.default=u},"../monitor/src/common/constants.js":function(b,T,c){c.r(T);var C=c("../monitor/src/common/variables.js");let W="";if(C.default.isInBrowser()){let{cdnBaseUrl:e="//static.coinall.ltd"}=C.default.getOkGlobal();W=e}let s={okx:"okx",oklink:"oklink",web3:"web3",okcoin:"okcoin",internal_system:"internal_system"},g={[s.okx]:{prod:"56bf9d43d57f079e506b4f26c70a698f",dev:"1baf4c48da921e60512f74d455f02da8"},[s.oklink]:{prod:"d77757dff7616a060069e378595de0f7",dev:"d77757dff7616a060069e378595de0f7"},[s.web3]:{prod:"669cbf122dec17ceb8e68a78c8240d24",dev:"2f69d358792107218343f78d2488e305"},[s.okcoin]:{prod:"21c676d501be3d648464d7ae0038cd53",dev:"69ec37219ff98b032d9e1a1d3bd81de7"},[s.internal_system]:{prod:"118100a32c295da61d6c1809bcfe470e",dev:"118100a32c295da61d6c1809bcfe470e"}};T.default={Actions:{CLICK:"clk",EXPOSE:"xps"},Configs:{ATTR_CLICK:"data-clk",ATTR_EXPOSE:"data-xps",ATTR_LISTEN:"data-lsn",EXPOSE_DURATION:500},REQUEST_LONG_WAIT_TIME:1e3,PERF_REPORT_DEFER_TIME:5e3,AMPLITUDE_PROJECT:s,AMPLITUDE_KEY_MAP:g,CDN_BASE_URL:W,MILLISECONDS_OF_30_DAYS:2592e6,YESTERDAY:-864e5,DEBUG_KEY:"a6ywbd8",WEB3CATEGORY:["onchain","web3_homepage","wallet","web3_trade","nft","web3_discover","web3_invest","okc","onchain_data"],REQUEST_HEADERS:{deviceId:"Devid"},API_PATH:{INTERNAL:"/et/priapi/boss",OKLINK:"/et/priapi/lnweb",OKX:"/et/priapi/xweb"},internalCategory:["opboss"]}},"../monitor/src/common/cookie.js":function(b,T,c){c.r(T);let C=s=>{try{let g=document.cookie.split(";"),e=null;for(let o=0;o<g.length;o++){let i=g[o];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(s)===0){e=i.substring(s.length+1,i.length);break}}return e}catch{return null}},W=function(s,g){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{expirationDays:365},o=g!==null?e.expirationDays:-1;if(o){let p=new Date;p.setTime(p.getTime()+o*24*60*60*1e3),o=p}let i=`${s}=${g}`;o&&(i+=`; expires=${o.toUTCString()}`),i+="; path=/",document.cookie=i};T.default={set:W,get:C}},"../monitor/src/common/event-bus.js":function(b,T,c){c.r(T);class C{constructor(){Q(this,"listeners",{})}on(s,g,e){let o=[],i=arguments.length;for(let p=0;p<i;p++)o.push(arguments[p]);o=o.length>3?o.splice(3,o.length-1):[],typeof this.listeners[s]<"u"?this.listeners[s].push({scope:e,callback:g,args:o}):this.listeners[s]=[{scope:e,callback:g,args:o}]}remove(s,g,e){if(typeof this.listeners[s]<"u"){let o=this.listeners[s].length,i=this.listeners[s].slice(0);for(let p=0;p<o;p++){let x=i[p];x.scope==e&&x.callback==g&&this.listeners[s].splice(p,1)}}}has(s,g,e){if(typeof this.listeners[s]<"u"){let o=this.listeners[s].length;if(g===void 0&&e===void 0)return o>0;for(let i=0;i<o;i++){let p=this.listeners[s][i];if((e?p.scope==e:!0)&&p.callback==g)return!0}}return!1}emit(s){if(typeof this.listeners[s]<"u"){let i=this.listeners[s].slice(),p=i.length;for(var g=arguments.length,e=new Array(g>1?g-1:0),o=1;o<g;o++)e[o-1]=arguments[o];for(let x=0;x<p;x++){let u=i[x];if(u&&u.callback){let d=e.concat(u.args);u.callback.apply(u.scope,d)}}}}}T.default=C},"../monitor/src/common/seo.js":function(b,T,c){c.r(T);var C=c("../monitor/src/common/utils.js");let W=[{keyword:"baidu.com",type:"BaiduSEO"},{keyword:"google",type:"GoogleSEO"},{keyword:"yandex",type:"yandexSEO"},{keyword:"ya.ru",type:"yandexSEO"},{keyword:"dzen.ru",type:"yandexSEO"},{keyword:"yahoo",type:"yahooSEO"},{keyword:"so.com",type:"360SEO"},{keyword:"bing.com",type:"bingSEO"},{keyword:"sogou.com",type:"sogouSEO"},{keyword:"m.sm.cn",type:"smSEO"},{keyword:"naver",type:"naverSEO"},{keyword:"duckduckgo",type:"duckduckgoSEO"},{keyword:"ecosia",type:"EcosiaSEO"},{keyword:"startpage",type:"startpageSEO"}];T.default={getSeoType(){let s=C.default.getUrlDomain(document.referrer);for(let g=0;g<W.length;g++){let{keyword:e,type:o}=W[g];if(s.indexOf(e)>-1)return o}return""}}},"../monitor/src/common/statex.js":function(b,T,c){c.r(T),c.d(T,{default:function(){return C}});function C(W){let s,g=new Set,e=(u,d)=>{let a=typeof u=="function"?u(s):u;if(a!==s){let n=s;s=d??typeof a!="object"?a:Object.assign({},s,a),g.forEach(t=>t(s,n))}},o=()=>s,x={setState:e,getState:o,subscribe:u=>(g.add(u),()=>g.delete(u)),destroy:()=>g.clear()};return s=W(e,o,x),x}},"../monitor/src/common/utils.js":function(b,T,c){c.r(T);let C=/([^{]+)({.+})?/,W=/^{|}$/g,s=/^['"]|['"]$/g,g=/\/\/([^/]+)\//;T.default={serializeParams(e){let o=[],i=Object.keys(e);for(let p=0,x=i.length;p<x;p++){let u=i[p];o.push(`${encodeURIComponent(u)}=${encodeURIComponent(e[u])}`)}return o.join("&")},getUrlDomain(e){let o=e.match(g);return o?o[1]:""},getUrlQuery(e){return this.getParsedUrl(window.location.href).searchParams.get(e)||""},getParsedUrl(e){return new URL(e)},getChannelIdByUserAgent(){let e=/channelId\/(\w+)/;return window.navigator.userAgent?.match?.(e)?.[1]},getChannelContext(e){let o={channelId:"",referralSrc:""};if(!e)return o;let i="",p="";if(e.searchParams.forEach((t,r)=>{let m=r.toLowerCase();m==="channelid"&&(i=t),m==="channelflag"&&(p=t)}),o.channelId=i||p,o.channelId)return o;let x="/join";if(e.pathname.endsWith(x)||!e.pathname.includes(x))return o;let u=e.pathname.split(`${x}/`)[1];if(!u)return o;let d=u.split("/")[0];if(d.startsWith("-"))return o;let a=d.split("-"),n=a[a.length-2]||"";return i=a[a.length-1],i&&(o.referralSrc=n,o.channelId=i),o},getOriginalUrl(e){return e.replace(/([?&])t=\d+(&)?/,(o,i,p)=>i&&p?i===p?"&":"?":"")},setCookie(e,o,i){let p=new Date;p.setTime(p.getTime()+i),document.cookie=`${e}=${encodeURIComponent(o)};expires=${p.toGMTString()};path=/`},getCookie(e){let o=new RegExp(`(^| )${e}=([^;]*)(;|$)`),i=document.cookie.match(o);return i?decodeURIComponent(i[2]):""},parseTarget(e){let o=e.match(C),i={key:"",data:{}};if(o){let p=o[1],x=o[2],u={};x&&x.replace(W,"").split(",").forEach(a=>{let n=a.split(":");n=n.map(m=>m.trim().replace(s,""));let[t,r]=n;u[t]=r}),i.key=p,i.data=u}return i},matchType(e,o){return Object.prototype.toString.call(e)===`[object ${o}]`},isArray(e){return this.matchType(e,"Array")},isObject(e){return this.matchType(e,"Object")},isInArray(e,o){if(Array.prototype.includes)return e.includes(o);for(let i=0,p=e.length;i<p;i++)if(e[i]===o)return!0;return!1},generateUUID(){let e=Date.now()+window.performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,o=>{let i=(e+this.cryptoRandom()*16)%16|0;return e=Math.floor(e/16),(o==="x"?i:i&3|8).toString(16)})},valueExists(e){return e!=null&&e!==""},passedNamingCheck(e){return!/[^a-z0-9_]/.test(e)},toFixed(e){return Number(e.toFixed(4))},toUnderLineFormat(e){return e.replace(/([A-Z])/g,(o,i,p)=>p===0?`${i.toLowerCase()}`:`_${i.toLowerCase()}`)},filterXSS(e){let o=/</g,i=/>/g,p=/'/g,x=/"/g;return e.replace(o,"&lt;").replace(i,"&gt;").replace(p,"&#39;").replace(x,"&#34;")},merge(e,o){let i={};return Object.keys({...e,...o}).forEach(p=>{(o[p]!=null||e[p]!=null)&&(i[p]=o[p]??e[p])}),i},cryptoRandom(){if(window?.crypto){let e=new Uint32Array(1);return window.crypto.getRandomValues(e),e[0]/Math.pow(2,32)}return Math.random()},base64Id(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",o="";for(let i=0;i<22;++i)o+=e.charAt(Math.floor(this.cryptoRandom()*64));return o},isTargetingCookiesRejected(){if(typeof window>"u"||typeof window.OnetrustActiveGroups>"u")return!1;try{return!window.OnetrustActiveGroups.includes("C0004")}catch{return!1}}}},"../monitor/src/common/variables.js":function(b,T,c){c.r(T);var C=c("../monitor/src/common/utils.js"),W=c("../monitor/src/store.js");let s="oklink",g="okex",e="OKX_GLOBAL",o="okex_inner",i=typeof window<"u",p=Boolean(typeof window>"u"||typeof E<"u"&&{NODE_ENV:"production",ASSETS_BUILD_TYPE:"feature",ASSETS_BUILD_VERSION:"monitor-extension-0.1.1-beta-1e9333fcb9-250423112426",BUILD_TARGET_ENV:"extension"}.SSR_ENV),x=i?/OKApp\/\(\S+\/\S+\)/i.test(navigator.userAgent):!1,u={_expires:{}};if(i){let{ok_monitor:a='{ "_expires": {} }'}=localStorage;u=JSON.parse(a)}let d={};T.default={setEnv(a){let{screen:n}=window,{_tk:t}=localStorage,{systemLanguage:r,language:m}=navigator,{referrer:k}=document;d.site=this.getSiteInfo(),d.lcl=this.getProductLanguage(),d.fpid=C.default.getCookie("fingerprint_id"),k&&(k.length>256&&(k=k.substr(0,256)),d.rf=k),t&&(d.tk=t),d.lan=(r||m).toLowerCase();let f="0x0";if(n){let{width:y,height:A}=n;f=`${y}x${A}`}d.scr=f;let w=C.default.getCookie("first_ref");w&&(d.frf=w.slice(0,256))},getEnv(){return{...d,site:this.getSiteInfo(),lcl:this.getProductLanguage()}},isInApp(){return x},getDeviceId(){let{deviceId:a}=W.default.getState();return a?Promise.resolve(a):window.utils.ont?.getDevId?.()},toLocalStorage(a){let{key:n,value:t,maxAge:r}=a;u[n]=t,u._expires[n]=Date.now()+r,localStorage.ok_monitor=JSON.stringify(u)},removeLocalStorage(a){delete u[a],delete u._expires[a],localStorage.ok_monitor=JSON.stringify(u)},getClientValue(a){let n=sessionStorage.getItem(a);return n||this.getValueFromLocalStorage(a)},getValueFromLocalStorage(a){return Date.now()<u._expires[a]&&u[a]||""},syncUpLocalStorageToSessionStorage(a){if(sessionStorage.getItem(a))return;let n=this.getValueFromLocalStorage(a);n&&sessionStorage.setItem(a,n)},shouldIgnoreAmpEvent(){if(!this.isInBrowser())return!0;let a=this.getOkGlobal(),n=a.broker&&a.broker.is,t=localStorage.simulatedTrading==="1",{okjp:r}=a.site&&a.site.is||{};return n||t||r===!0},getProductLanguage(){return C.default.getCookie("locale")||this.getOkGlobal().locale},__getOkGlobalSite(){return this.getOkGlobal().site||{}},getSiteInfo(){let a=this.__getOkGlobalSite().sign,n=this.__getOkGlobalSite().subSite;return a===g?!n||n===e?g:n.toLowerCase():a},isOKEx(){return this.__getOkGlobalSite().sign===g},isOKLink(){let a=this.__getOkGlobalSite();return a.sign===s||a.sign===g&&a.linkInOKX},isInternalSystem(){return this.__getOkGlobalSite().sign===o},isInSSR(){return p},isInBrowser(){return i},isInExtension(){return window.inOKXExtension||window.inUIOKXExtension},isMiniApp(){return window.inMiniApp},isInDesktop(){return window?.navigator?.userAgent?.toLocaleLowerCase()?.includes("electron/")},isDevTestEnv(){return this.isInExtension()?window.ASSETS_BUILD_TYPE!=="publish":["pre","prod"].indexOf(this.getOkGlobal().envSign)<0},isProdEnv(){return this.isInExtension()?window.ASSETS_BUILD_TYPE==="publish":this.getOkGlobal().envSign==="prod"},getOkGlobal(){return this.isInBrowser()?window._okGlobal||window.okGlobal||{}:{}},isEnableAMP(){return this.isProdEnv()||sessionStorage.getItem("monitor_amplitude_enable_for_test")==="true"},getTk(){return x&&window.jsbridge?window.jsbridge.getTK().then(a=>a||localStorage._tk||"").catch(()=>{}):Promise.resolve(localStorage._tk||"")}}},"../monitor/src/de-duplicate.js":function(b,T,c){c.r(T),c.d(T,{shouldReport:function(){return g}});let C={},W,s=e=>{W!==void 0&&clearTimeout(W),W=setTimeout(()=>{C={},W=void 0},e+500)},g=function(e){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,i=typeof e=="string"?e:e.action||e.anchor,p=+new Date,x=C[i]||0;return p-x<o?!1:(s(o),C[i]=p,!0)}},"../monitor/src/error.js":function(b,T,c){c.r(T);var C=c("../monitor/src/common/variables.js");let W=C.default.isInBrowser()?JSON.parse(localStorage.__error__||"[]"):[];T.default={getErrorInfo(s){let{message:g,filename:e,lineno:o,colno:i,error:p}=s,x="";p&&p.stack?(x=p.stack,x.indexOf("@")!==-1&&(x=`${g} 
\r ${x}`)):(p||g)&&(x=`ThrowError: ${JSON.stringify(p||g)} 
\r at ${e}: ${o}: ${i}`);let u=encodeURIComponent(window.location.href);return{msg:g,file:e,line:o,col:i,stack:x,url:u}},isReported(s){let{file:g,line:e,col:o}=s,i=`${g}__${e}__${o}`;return W.includes(i)},rememberError(s){let{file:g,line:e,col:o}=s,i=`${g}__${e}__${o}`;W.unshift(i),W.length>50&&W.pop(),setTimeout(()=>{localStorage.__error__=JSON.stringify(W)},0)}}},"../monitor/src/global/attrs.js":function(b,T,c){c.r(T);var C=c("../monitor/src/global/click.js"),W=c("../monitor/src/global/expose.js"),s=c("../monitor/src/common/constants.js");let{Configs:g}=s.default;T.default={listen(e){let o=i=>{e.logEvent({...i,category:"ok"})};this.preprocess(),C.default.listen(o,this),W.default.listen(o,this)},preprocess(){document.querySelectorAll(`[${g.ATTR_LISTEN}]`).forEach(o=>{let i=o.getAttribute(g.ATTR_LISTEN),p=i.indexOf(":");if(p>-1){let x=i.substring(0,p).trim(),u=i.substring(p+1).trim();x.split("+").forEach(a=>{o.setAttribute(`data-${a.trim()}`,u)}),o.removeAttribute(g.ATTR_LISTEN)}})}}},"../monitor/src/global/click.js":function(b,T,c){c.r(T);var C=c("../monitor/src/common/utils.js"),W=c("../monitor/src/common/constants.js");let{Actions:s,Configs:g}=W.default;T.default={listen(e,o){document.addEventListener("click",i=>{let{target:p}=i;p.getAttribute(g.ATTR_LISTEN)&&o.preprocess();let u=p.getAttribute(g.ATTR_CLICK);if(u){let d=C.default.parseTarget(u),{key:a,data:n}=d;a&&e({target:a,action:s.CLICK,params:n,extras:{area:n.area}})}})}}},"../monitor/src/global/expose.js":function(b,T,c){c.r(T);var C=c("../monitor/src/common/utils.js"),W=c("../monitor/src/common/constants.js");let s={},{Actions:g,Configs:e}=W.default;T.default={listen(o){this.trackFn=o;let i={threshold:[.5,1]},p=new window.IntersectionObserver(this.onSectionChange.bind(this),i);document.querySelectorAll(`[${e.ATTR_EXPOSE}]`).forEach(u=>{p.observe(u)}),this.observer=p},onSectionChange(o){o.forEach(i=>{let{target:p,isIntersecting:x}=i,u=p.getAttribute(e.ATTR_EXPOSE),d=C.default.parseTarget(u),{key:a,data:n}=d,t=Number(i.time.toFixed(2));if(x){let r=setTimeout(()=>{let m=s[a],k=p.getBoundingClientRect(),{innerHeight:f,innerWidth:w}=window,{top:y,bottom:A,left:R,right:h}=k;if((y>=0&&y<=f||A>=0&&A<=f)&&(R>=0&&R<=w||h>=0&&h<=w)){let{area:I,elementType:v,actionType:O}=n;delete n.area,delete n.elementType,delete n.actionType,this.trackFn({target:a,action:g.EXPOSE,params:{...n,time:t},extras:{area:I},actionType:O||"Show",elementType:v,anchor:v?a:""}),this.observer.unobserve(p),m.forEach($=>{window.clearTimeout($)}),delete s[a]}else m.shift()},e.EXPOSE_DURATION);s[a]||(s[a]=[]),s[a].push(r)}})}}},"../monitor/src/lib/libs-amplitude.js":function(b,T,c){c.r(T),c.d(T,{default:function(){return p}});var C=c("../monitor/src/common/variables.js"),W=c("../monitor/src/common/event-bus.js");let s=!1,g=new W.default,e="LOAD_SUCCESS",o="LOAD_FAILED";function i(){return new Promise((x,u)=>{let d=()=>{g.emit(e),x()},a=w=>{g.emit(o),u(w)};s=!0;let{envSign:n,cdnBaseUrl:t}=C.default.getOkGlobal(),r=document.createElement("script");r.type="text/javascript",r.crossOrigin="anonymous",r.async=!0;let m="";switch(n){case"dev":m="cdndev";break;case"pre":m="cdnpre";break;case"daily":m="cdn";break;case"prod":m="cdn";break;default:m="cdn";break}let k="amplitude-analytics-browser-2.11.8.js";r.integrity="sha384-EeMLYO4Izpc3SCjHbLn1iwBHBhefXKXLUjoBpuQ3D5nlnKYrZ9Edhq/V9+XEAA12",C.default.isInExtension(),r.src=`./scripts/lib/${k}`,r.onload=function(){if(s=!1,!window.amplitude)return a("[Amplitude] Error: could not load SDK");d()},r.onerror=function(w){s=!1,a(w)};let f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(r,f)})}async function p(){if(s)return new Promise((x,u)=>{g.on(e,d=>{x(d)}),g.on(o,d=>{u(d)})});await i()}},"../monitor/src/logger.js":function(b,T,c){c.r(T),c.d(T,{default:function(){return x}});var C=c("../monitor/src/common/utils.js"),W=c("../monitor/src/common/variables.js"),s=c("../monitor/src/common/cookie.js"),g=c("../monitor/src/common/constants.js"),e=c("../monitor/src/monitor.js");let o=null,i=!1;class p{constructor(d){W.default.setEnv(d),this._category=d.product}logPV(){if(i)return Promise.resolve();let d={_act:"_pv",_ct:"_pv",_action_type:"Show",_element_type:"Page",...this._getCommonData()};return i=!0,this.sendLogs(d)}logEvent(d){let a={},{category:n,action:t,target:r,params:m,extras:k,_m:f,anchor:w,elementType:y,actionType:A,tk:R}=d;if(Object.assign(a,{_ct:n,_act:t,_lb:encodeURIComponent(r||""),_anchor_en_name:encodeURIComponent(w||""),_element_type:encodeURIComponent(y||""),_action_type:encodeURIComponent(A||""),...this._getCommonData()}),a._tk=R||a._tk,C.default.isArray(m)){let h=0,V=0;m.forEach((I,v)=>{if(C.default.isObject(I)){let{value:O,random:$}=I,Y=encodeURIComponent(O);$?a[`_unlist${V++}`]=Y:a[`_reser${h++}`]=Y}else a[`_reser${v}`]=encodeURIComponent(I)})}else if(C.default.valueExists(m)){let h=m;C.default.isObject(m)&&(h=JSON.stringify(m));let V=encodeURIComponent(h);a._v=V,a._reser0=V}if(k){k.page=encodeURIComponent(window.location.href);let h={};Object.keys(k).forEach(V=>{h[`__${V}`]=k[V]}),Object.assign(a,h)}return f&&(a._m=f),this.sendLogs(a)}_getCommonData(){let d={...W.default.getEnv()};localStorage._tk&&(d.tk=localStorage._tk);let{src:a,sessionId:n=""}=sessionStorage,t=W.default.getClientValue("pageId"),r=W.default.getClientValue("channelId"),{deviceId:m=C.default.base64Id(),eventId:k=1,sequenceNumber:f=1}=JSON.parse(s.default.get("_monitor_extras")||"{}");s.default.set("_monitor_extras",JSON.stringify({deviceId:m,eventId:k+1,sequenceNumber:f+1}));let w=JSON.stringify({_amp_rejected:C.default.isTargetingCookiesRejected(),_device_id:m,_event_id:k,_sequence_number:f,_uuid:C.default.generateUUID()}),y={_cid:r,_pgid:t,_source:a,_session_id:encodeURIComponent(n.slice(0,256)),_page_url:encodeURIComponent(window.location.href.slice(0,256)),_extras:encodeURIComponent(w)};return Object.keys(d).forEach(A=>{y[`_${A}`]=encodeURIComponent(d[A])}),y}sendLogs(d){let a=[];if(Object.keys(d).forEach(n=>{let t=d[n];C.default.valueExists(t)?a.push(`${n}=${t}`):delete d[n]}),W.default.isDevTestEnv()){let{console:n}=window;return n.groupCollapsed(`dev monitor: ${d._ct} > ${d._act}`),n.log(decodeURIComponent(JSON.stringify(d,null,2))),n.groupEnd(),Promise.resolve()}return W.default.isInApp()&&window.jsbridge?window.jsbridge.getTK().then(n=>{if(n){let t=`_tk=${encodeURIComponent(n)}`,r=a.findIndex(m=>/^_tk/.test(m));r>-1?a[r]=t:a.push(t)}return this.addClientInfo(a.join("&"))}).catch(()=>this.addClientInfo(a.join("&"))):this.addClientInfo(a.join("&"))}addClientInfo(d){let a=`&_ts=${Date.now()}&_r=${Math.floor(C.default.cryptoRandom()*2147483648)}`,n=`${d}${a}`;return W.default.isInApp()&&window.jsbridge?window.jsbridge.getClientInfo().then(t=>{let r=t?`&_app_info=${encodeURIComponent(t)}`:"";return n=`${d}${r}${a}`,this.sendRequest(n)}).catch(t=>this.sendRequest(n)):this.sendRequest(n)}getApiPath(){return g.default.internalCategory.includes(this._category)?g.default.API_PATH.INTERNAL:W.default.isOKLink()?g.default.API_PATH.OKLINK:g.default.API_PATH.OKX}async sendRequest(d){let a=await W.default.getDeviceId(),n=`_mv=${g.default.DEBUG_KEY}&_uid=${encodeURIComponent(a)}&${d}`;return new Promise((t,r)=>{let m=W.default.isInExtension()&&!W.default.isMiniApp(),k=this.getApiPath();if(navigator.sendBeacon&&!m)navigator.sendBeacon(k,n),t();else{let f=m?e.default.dwApiEndpoint||`https://www.oklink.com${g.default.API_PATH.OKX}`:k,w=new XMLHttpRequest;w.open("POST",f),w.setRequestHeader(g.default.REQUEST_HEADERS.deviceId,a),w.onload=()=>w.status!==200?r(new Error(`Error ${w.status}:${w.statusText}`)):t(),w.onerror=()=>{r(new Error(`Error ${w.status}: ${w.statusText}`))},w.send(n),setTimeout(()=>{t()},150)}})}}function x(u){return o||(o=new p(u),o)}},"../monitor/src/monitor.js":function(b,T,c){c.r(T),c.d(T,{default:function(){return d}});var C=c("../monitor/src/common/utils.js"),W=c("../monitor/src/common/constants.js"),s=c("../monitor/src/common/variables.js"),g=c("../monitor/src/error.js"),e=c("../monitor/src/logger.js"),o=c("../monitor/src/global/attrs.js"),i=c("../monitor/src/amplitude.js"),p=c("../monitor/src/store.js"),x=c("../monitor/src/de-duplicate.js");let u=!1;class d{constructor(n){s.default.isInSSR()||(this.commonParams=n.commonParams||{},this._logger=(0,e.default)(n),this._category=n.product,n.withPV&&this.delayReportPV(),u||(this._initEventListener(),u=!0))}delayReportPV(){setTimeout(()=>{this.logPV()},1e3)}setApiEndpoint(n){d.apiEndpoint=n}setDWApiEndpoint(n){d.dwApiEndpoint=n}report(n){let{type:t,value:r}=n;if(s.default.isInSSR())return Promise.resolve();let m=r;return(C.default.isObject(m)||C.default.isArray(m))&&(m=JSON.stringify(m)),this._logger.logEvent({category:"performance",action:t,params:m})}logPV(){return this._logger.logPV()}logAmplitudeEvent(n,t,r){if(s.default.isInSSR()||s.default.shouldIgnoreAmpEvent())return Promise.resolve();let m="",k=!1;C.default.isObject(r)&&(m=r.ampProject,k=r.ignoreBackUp);let f={};for(let w in t)Object.prototype.hasOwnProperty.call(t,w)&&(f[w]=t[w]);if(f.monitor_after_navigation){delete f.monitor_after_navigation;let w=JSON.parse(sessionStorage.ampCacheEvents||"[]");return w.push([n,f]),sessionStorage.ampCacheEvents=JSON.stringify(w),Promise.resolve()}return i.default.getInstance(m).then(w=>{w.logEvent(n,{...f,site:s.default.getSiteInfo()},{language:s.default.getOkGlobal().locale}),k||this.act(n,t,{isSyncAMP:!1})})}resetAmplitudeUser(){return s.default.isInSSR()?Promise.resolve():i.default.getInstance().then(n=>(n.reset(),Promise.resolve()))}track(n,t,r,m){if(s.default.isInSSR())return Promise.resolve();let k={category:this._category,action:r,target:t,params:m,extras:{area:n}};if(C.default.isObject(n)){let{area:f,action:w,target:y,params:A}=n;Object.assign(k,{action:w,target:y,params:A,extras:{area:f}})}return this._logger.logEvent(k)}act(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isSyncAMP:!0};return s.default.isInSSR()||!(0,x.shouldReport)(n)?Promise.resolve():new Promise((m,k)=>{setTimeout(()=>{this._act(n,t,r).then(m,k)},0)})}async _act(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isSyncAMP:!0},{user_id:m,...k}=this.commonParams||{},f={web_mode_okx:C.default.isInArray(W.default.WEB3CATEGORY,this._category)?"wallet":"exchange"},y=Object.assign({},s.default.isOKEx()?f:{}),A=r?.tk||m,R={category:this._category,params:t,_m:"1"};C.default.isObject(t)&&(R.params=C.default.merge({...k,...y},t),y=C.default.merge(s.default.isOKLink()?{...k,...y}:y,t));let h;typeof n=="string"?(h=n,R.action=n):(h=n.action||n.anchor,R.action=h,R.anchor=n.anchor,R.actionType=n.actionType,R.elementType=n.elementType,R={...R,params:C.default.merge(R.params,n.params||{})},A=n.tk||A,y=C.default.merge(y,n.params)),R.tk=A;let{needDurationActions:V,needDurationActionParams:I,actionTriggerTimes:v,setActionTriggerTimes:O,setNeedDurationActionParams:$}=p.default.getState();if(s.default.isEnableAMP()&&r?.isSyncAMP){let Y=n?.ampProject;this.logAmplitudeEvent(h,y,{ampProject:Y,ignoreBackUp:!0})}return C.default.isInArray(V,h)?(v[h]=Date.now(),O(v),I[h]=R,$(I),Promise.resolve("The event will be reported when the page is closed")):this._logger.logEvent(R)}_initEventListener(){window.addEventListener("load",()=>{o.default.listen(this._logger)}),window.addEventListener("error",n=>{let t=g.default.getErrorInfo(n);g.default.isReported(t)||(this._logger.logEvent({category:"error",action:"report",extras:t}),g.default.rememberError(t))},!0),window.addEventListener("beforeunload",()=>{let{needDurationActions:n,needDurationActionParams:t,actionTriggerTimes:r,setNeedDurationActions:m,setNeedDurationActionParams:k,setActionTriggerTimes:f}=p.default.getState();n.length&&n.forEach(w=>{t[w].params.duration=Date.now()-r[w],this._logger.logEvent(t[w])}),m([]),k({}),f({})})}initABTest(n){let t="ab_experiment";n?.exper_flagKey&&n?.exper_variant&&(Object.assign(this.commonParams,n),this.act(t))}setCommonParams(n){this.commonParams={...this.commonParams,...n}}triggerReportDuration(n){let{needDurationActions:t,setNeedDurationActions:r}=p.default.getState();C.default.isInArray(t,n)||(t.push(n),r(t))}}},"../monitor/src/store.js":function(b,T,c){c.r(T);var C=c("../monitor/src/common/statex.js");let W=(0,C.default)(s=>({deviceId:"",needDurationActions:[],needDurationActionParams:{},actionTriggerTimes:{},setDeviceId:g=>s(()=>({deviceId:g})),setNeedDurationActions:g=>s(()=>({needDurationActions:g})),setNeedDurationActionParams:g=>s(()=>({needDurationActionParams:g})),setActionTriggerTimes:g=>s(()=>({actionTriggerTimes:g}))}));T.default=W},"../monitor/src/web.js":function(b,T,c){c.r(T);var C=c("../monitor/src/common/constants.js"),W=c("../monitor/src/common/seo.js"),s=c("../monitor/src/common/utils.js"),g=c("../monitor/src/monitor.js"),e=c("../monitor/src/common/variables.js"),o=c("../monitor/src/amplitude.js"),i=c("../monitor/src/store.js");let{MILLISECONDS_OF_30_DAYS:p}=C.default,x=(u,d)=>{if(e.default.isInSSR())return;let{pathname:a}=window.location;sessionStorage.channelId=u,e.default.toLocalStorage({key:"channelId",value:u,maxAge:p}),d?(sessionStorage.referralSrc=d,e.default.toLocalStorage({key:"referralSrc",value:d,maxAge:p})):(sessionStorage.removeItem("referralSrc"),e.default.removeLocalStorage("referralSrc")),sessionStorage.pageId=a,e.default.toLocalStorage({key:"pageId",value:a,maxAge:p})};T.default={monitor:{get amplitude(){return e.default.isInSSR()?{getAmplitudeSDKInstance(){return new Promise((d,a)=>{a("Currently not a browser environment!")})}}:o.default},newInstance(u){return e.default.isInSSR()?{setApiEndpoint(){},report(){return Promise.resolve()},logPV(){return Promise.resolve()},logAmplitudeEvent(){return Promise.resolve()},resetAmplitudeUser(){return Promise.resolve()},track(){return Promise.resolve()},act(){return Promise.resolve()},_initEventListener(){},initABTest(){return Promise.resolve()},setCommonParams(){},triggerReportDuration(){}}:new g.default(u)},saveChannelId(u){x(u)},getChannelId(){return sessionStorage.channelId},setDeviceId(u){let{setDeviceId:d}=i.default.getState();d(u)},getChannelContextFromUrl(u){return s.default.getChannelContext(s.default.getParsedUrl(u))}},parseUrl(){let u=s.default.getParsedUrl(window.location.href),d=u.searchParams.get("src");d&&sessionStorage.setItem("src",d),this.parseChannelId(u)},parseChannelId(u){let d=s.default.getChannelIdByUserAgent(),a=W.default.getSeoType(),n=s.default.getChannelContext(u),t=n.channelId,r=n.referralSrc;if(e.default.isInDesktop()&&d&&(t=d,r=""),!t&&a&&(t=a),t=s.default.filterXSS(t),t){x(t,r);return}e.default.syncUpLocalStorageToSessionStorage("channelId"),sessionStorage.getItem("channelId")&&(e.default.syncUpLocalStorageToSessionStorage("referralSrc"),e.default.syncUpLocalStorageToSessionStorage("pageId"))},init(){e.default.isInSSR()||(this.parseUrl(),!s.default.getCookie("first_ref")&&document.referrer&&s.default.setCookie("first_ref",document.referrer.slice(0,256),p),sessionStorage.getItem("sessionId")||sessionStorage.setItem("sessionId",window.location.href),window.utils=window.utils||{},window.utils.monitor=this.monitor)},saveChannelId(u){x(u)}}}},_={};function P(b){var T=_[b];if(T!==void 0)return T.exports;var c=_[b]={exports:{}};return l[b](c,c.exports,P),c.exports}(function(){P.d=function(b,T){for(var c in T)P.o(T,c)&&!P.o(b,c)&&Object.defineProperty(b,c,{enumerable:!0,get:T[c]})}})(),function(){P.o=function(b,T){return Object.prototype.hasOwnProperty.call(b,T)}}(),function(){P.r=function(b){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(b,"__esModule",{value:!0})}}();var S={};return function(){P.r(S);var b=P("../monitor/src/web.js");b.default.init(),S.default=b.default.monitor}(),S=S.default,S}()})});D();D();D();D();D();var G=oe(ae());D();var ue=oe(ae());function de(){let{lastError:l}=ue.default.runtime;if(!!l)return l.stack&&l.message?l:new Error(l.message)}async function Ce(l){if(!G.default.storage.local)return{};let{local:_}=G.default.storage;return new Promise(P=>{_.get(l||null).then(S=>{P(S??{})}).catch(()=>{P({})})})}async function Te(l){let{local:_}=G.default.storage;return new Promise((P,S)=>{_.set(l).then(()=>{let b=de();b?S(b):P()}).catch(b=>{S(b)})})}var M=class{constructor(){Q(this,"isSupported",Boolean(G.default.storage.local))}async get(_){return Ce(_)}async set(_){return Te(_)}};M.isSupported=Boolean(G.default.storage?.local);M.get=Ce;M.set=Te;D();var ft={httpdns:{aesDecryptSecret:"ihP0cS0oqy27HAay",domains:["https://www.okx-httpdns.com/v2/support/doh/plugin/wallet","https://www.okx-doh.com/v2/support/doh/plugin/wallet","https://web3.okx.com/v2/support/doh/plugin/wallet"],ips:["https://47.57.9.204/v2/support/doh/plugin/wallet","https://47.75.96.239/v2/support/doh/plugin/wallet"],staticFiles:["https://d1pplp9e0zqlzg.cloudfront.net/app/wallet-doh"]},app:{defaultAppDomains:{staticDomains:["https://static.coinall.ltd","https://static.okx.com"],apiDomains:["https://wallet.okex.org","https://wallet.okx.com","https://wallet.ouxyi.cash"],wssDomains:["wss://wsdexpri.coinall.ltd","wss://wsdexpri.okx.com"],countryCode:"unknow"},tryPaths:{wssDomain:"useFirst",staticDomain:{url:"/cdn/assets/files/224/95D565EF66E7DFF9.txt",method:"get"},apiDomain:{url:"/v1/deposit/plugin/heartbeat",method:"get"}}}},z=ft;D();D();var X={DEV:"dev",DAILY:"daily",PREPUB:"prepub",PUBLISH:"publish"};var We={EXTENSION:"extension",MINI_WALLET:"mini_wallet"};var ke=(()=>{let l="",_="https://beta.okex.org",P=async()=>{try{if(E.env.ASSETS_BUILD_TYPE===X.DEV||E.env.ASSETS_BUILD_TYPE===X.DAILY){let{envApiDomain:S}=await M.get("envApiDomain");S?_=S:M.set({envApiDomain:_})}else{let{apiDomain:S}=await M.get("apiDomain");l=S}}catch{}};return P(),{setUrlFromLocalAsync:async()=>{await P()},setUrl:S=>{l=S},getUrl:()=>(P(),E.env.ASSETS_BUILD_TYPE===X.DEV||E.env.ASSETS_BUILD_TYPE===X.DAILY?new URL(_).host:E.env.PLATFORM_WEB&&E.env.ASSETS_BUILD_TYPE===X.PREPUB?"beta.okex.org":new URL(l||z.app.defaultAppDomains.apiDomains[0]).host)}})();var Pe=ke;function q(){return Pe.getUrl()}var St=(()=>{let l="";return(async()=>{try{let{wssDomain:_}=await M.get("wssDomain");l=_}catch{}})(),{setUrlFromLocalAsync:async()=>{try{let{wssDomain:_}=await M.get("wssDomain");l=_}catch{}},setUrl:_=>{l=_},getUrl:()=>new URL(l||z.app.defaultAppDomains.wssDomains[0]).host}})(),ht=(()=>{let l="";return(async()=>{try{let{staticDomain:_}=await M.get("staticDomain");l=_}catch{}})(),{setUrlFromLocalAsync:async()=>{try{let{staticDomain:_}=await M.get("staticDomain");l=_}catch{}},setUrl:_=>{l=_},getUrl:()=>new URL(l||z.app.defaultAppDomains.staticDomains[0]).host}})();var ee=oe(xe());var B={act:()=>{}},be=async({deviceId:l}={})=>{let{devid:_}=l?{devid:l}:await M.get("devid");(0,ee.setDeviceId)(_),B=(0,ee.newInstance)({site:"okex",product:"wallet",commonParams:{version:E.env.APP_VERSION,platform_type:E.env.MONITOR_PLATFORM==We.EXTENSION?"extension":"mini_wallet"}}),B.setApiEndpoint(`https://${q()}/amplitude/2/httpapi`),B.setDWApiEndpoint(`https://${q()}/et/priapi/xweb`)},we=({source:l}={})=>{B.act({action:"DEXMarket_Wallet_Widget_View",anchor:"DEXMarket_Wallet_Widget_View",params:{source:l},actionType:"",elementType:"",ampProject:"web3"})};var Ae=()=>{B.act({action:"OKXWallet_PopupBar_AddressAnalysis_Click",anchor:"OKXWallet_PopupBar_AddressAnalysis_Click",params:{},actionType:"",elementType:"",ampProject:"web3"})};var fe=()=>{B.act({action:"OKXWallet_PopupBar_CloseButton_Click",anchor:"OKXWallet_PopupBar_CloseButton_Click",params:{},actionType:"",elementType:"",ampProject:"web3"})};var Se=()=>{B.act({action:"OKXWallet_PopupBar_AddressAnalysis_View",anchor:"OKXWallet_PopupBar_AddressAnalysis_View",params:{},actionType:"",elementType:"",ampProject:"web3"})};var he=()=>{B.act({action:"DEXMarket_Wallet_TweetMoreTokens_Click",anchor:"DEXMarket_Wallet_TweetMoreTokens_Click",params:{},actionType:"",elementType:"",ampProject:"web3"})};var ye=()=>{B.act({action:"OKXWallet_WalletExtention_PopupBar_View",anchor:"OKXWallet_WalletExtention_PopupBar_View",params:{},actionType:"",elementType:"",ampProject:"web3"})};var Re=()=>{B.act({action:"OKXWallet_WalletExtention_WidgetSetting_Click",anchor:"OKXWallet_WalletExtention_WidgetSetting_Click",params:{},actionType:"",elementType:"",ampProject:"web3"})};var De=()=>{B.act({action:"OKXWallet_PopupBar_TokenPrice_Click",anchor:"OKXWallet_PopupBar_TokenPrice_Click",params:{},actionType:"",elementType:"",ampProject:"web3"})};var Ee=()=>{B.act({action:"DEXMarket_Wallet_TweetTokenTags_Click",anchor:"DEXMarket_Wallet_TweetTokenTags_Click",params:{},actionType:"",elementType:"",ampProject:"web3"})};var Be=({source:l}={})=>{B.act({action:"DEXMarket_Wallet_TradeWidget_Click",anchor:"DEXMarket_Wallet_TradeWidget_Click",params:{source:l},actionType:"",elementType:"",ampProject:"web3"})};var ve=()=>{B.act({action:"OKXWallet_PopupBar_TokenPrice_View",anchor:"OKXWallet_PopupBar_TokenPrice_View",params:{},actionType:"",elementType:"",ampProject:"web3"})};var Ve=()=>{B.triggerReportDuration("Web3_Generalwallet_FullPage_View")};var Me=({trade_clicks:l,source:_}={})=>{B.act({action:"DEXMarket_Wallet_Widget_Click",anchor:"DEXMarket_Wallet_Widget_Click",params:{trade_clicks:l,source:_},actionType:"",elementType:"",ampProject:"web3"})};var Ie=({all_confirmation:l,wallet_type:_,page_type:P,network:S,approve:b,network_use:T,dapp_url:c,wallet_id:C,tx_hash:W}={})=>{B.act({action:"AllConfirmation_Full_Button_Click",anchor:"AllConfirmation_Full_Button_Click",params:{all_confirmation:l,wallet_type:_,page_type:P,network:S,approve:b,network_use:T,dapp_url:c,wallet_id:C,tx_hash:W},actionType:"",elementType:"",ampProject:"web3"})};var Oe=()=>{B.act({action:"DEXMarket_Wallet_SolscanWidget_Click",anchor:"DEXMarket_Wallet_SolscanWidget_Click",params:{},actionType:"",elementType:"",ampProject:"web3"})};var je=()=>{B.act({action:"DEXMarket_WalletExtension_SaveWalletWidget_Click",anchor:"DEXMarket_WalletExtension_SaveWalletWidget_Click",params:{},actionType:"",elementType:"",ampProject:"web3"})};var Fe=()=>{B.act({action:"DEXMarket_WalletExtension_SaveTokenWidget_Click",anchor:"DEXMarket_WalletExtension_SaveTokenWidget_Click",params:{},actionType:"",elementType:"",ampProject:"web3"})};var Le=()=>{B.act({action:"DEXMarket_WalletExtension_ViewSameTokens_Click",anchor:"DEXMarket_WalletExtension_ViewSameTokens_Click",params:{},actionType:"",elementType:"",ampProject:"web3"})};D();var He={MONITOR_TRACK:"monitorTrack"};var Ue={Web3GeneralwalletFullPageView_TRD:Ve,DEXMarketWalletWidgetView:we,DEXMarketWalletWidgetClick:Me,OKXWalletWalletExtentionPopupBarView:ye,OKXWalletPopupBarTokenPriceClick:De,OKXWalletPopupBarTokenPriceView:ve,OKXWalletPopupBarAddressAnalysisClick:Ae,OKXWalletPopupBarAddressAnalysisView:Se,OKXWalletPopupBarCloseButtonClick:fe,OKXWalletWalletExtentionWidgetSettingClick:Re,DEXMarketWalletSolscanWidgetClick:Oe,DEXMarketWalletTweetTokenTagsClick:Ee,DEXMarketWalletTweetMoreTokensClick:he,AllConfirmationFullButtonClick:Ie,DEXMarketWalletExtensionSaveWalletWidgetClick:je,DEXMarketWalletExtensionSaveTokenWidgetClick:Fe,DEXMarketWalletExtensionViewSameTokensClick:Le,DEXMarketWalletTradeWidgetClick:Be},Ke=!1,yt={[He.MONITOR_TRACK]:async({trackMethod:l,deviceId:_,trackParams:P=[]})=>{try{if(Ke||(await be({deviceId:_}),Ke=!0),!Ue[l])throw new Error("invalid monitor event name, please re-check your spell;");return Ue[l](...P),{success:!0}}catch{return{error:!0}}}};chrome.runtime.onMessage.addListener(async(l,_,P)=>{if(l.target!=="offscreen")return;let S=l.method,b=l.params??[],T=yt[S];if(T){let c=await T(...b);P(c);return}P({error:!0})});})();

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=offscreen.js.map
