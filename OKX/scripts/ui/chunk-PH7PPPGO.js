import{a as le}from"./chunk-PWLZXA4M.js";import{a as ge}from"./chunk-MDL52WR7.js";import{a as k}from"./chunk-OWWFH26C.js";import{j as ue}from"./chunk-MNZIO3NP.js";import{e as _}from"./chunk-I3CPAVOC.js";import{o as ce}from"./chunk-5QMHGZLF.js";import{Gb as pe,ec as _e,qa as ie,ra as me}from"./chunk-HPWCPLRR.js";import{aa as u}from"./chunk-N2BCRNDB.js";import{I as se,N as oe,O as re,Q as ae,ha as ne}from"./chunk-TM67VPZU.js";import{q as F}from"./chunk-PUSMMCUD.js";import{R as te,o as ee,z as G}from"./chunk-UWJLNJLY.js";import{L as H,P as Q,f as q,ra as R}from"./chunk-XDY6V34Y.js";import{b as I}from"./chunk-JWYCKY2V.js";import{f as y,o as i,q as m}from"./chunk-6KXF36WM.js";i();m();var p=y(I()),h=y(ce());R();te();ne();i();m();var L=y(I());i();m();te();R();ne();var M=e=>H(e)||Q(e,0),T=(e,t)=>String(Math.ceil(se(e,t))),d=(e,t)=>ae(e,1)?`${ee.ceilShort(e||0,0,!1,0,!1)} ${t}`:_(e||0,{symbol:t});function V({feeInfo:e,feeDisplay:t,customGasPriceStep:o,customGasAmount:a,customGasFee:n,canConfirm:c,onClick:r,onConfirm:g}){return(0,L.useMemo)(()=>({unitPrice:d(o,e.denom),totalPrice:L.default.createElement(ge,{text:t.custom,maxWidth:"160px",className:void 0,style:void 0}),estimatedTime:"",onClick:r,canConfirm:c,onConfirm:()=>{g({gasType:u.CUSTOM,gasPriceStep:o,gasAmount:a,gasFee:n})}}),[o,a])}i();m();var fe=y(I());function U({feeInfo:e,feeDisplay:t,onClick:o}){return(0,fe.useMemo)(()=>[{typeKey:u.SLOW,gasFee:e.gasFee.slow,unitPrice:d(e.gasPriceStep.slow,e.denom),totalPrice:t.slow,estimatedTime:"",onClick:()=>{o({gasType:u.SLOW,gasPriceStep:e.gasPriceStep.slow,gasAmount:e.gasAmount,gasFee:e.gasFee.slow})}},{typeKey:u.STANDARD,gasFee:e.gasFee.standard,unitPrice:d(e.gasPriceStep.standard,e.denom),totalPrice:t.standard,estimatedTime:"",onClick:()=>{o({gasType:u.STANDARD,gasPriceStep:e.gasPriceStep.standard,gasAmount:e.gasAmount,gasFee:e.gasFee.standard})}},{typeKey:u.FAST,gasFee:e.gasFee.fast,unitPrice:d(e.gasPriceStep.fast,e.denom),totalPrice:t.fast,estimatedTime:"",onClick:()=>{o({gasType:u.FAST,gasPriceStep:e.gasPriceStep.fast,gasAmount:e.gasAmount,gasFee:e.gasFee.fast})}}],[e])}i();m();var de=y(_e());function N({coinId:e,symbol:t,decimals:o,currencyId:a,fee:n}){let c=_(n,{symbol:t,decimals:o}),r=ue(e,n,{currencyId:a,useApproximate:!0,useMinPrecision:!0,formatted:!0});return`${c} ${r}`}function O({coinId:e,fee:t}){let{baseCoin:o}=k(Number(e),!0),a=(0,de.useSelector)(pe),{currencyId:n}=a,{symbol:c,decimals:r}=o,g=N({coinId:e,symbol:c,decimals:r,currencyId:n,fee:t.slow}),f=N({coinId:e,symbol:c,decimals:r,currencyId:n,fee:t.fast}),l=N({coinId:e,symbol:c,decimals:r,currencyId:n,fee:t.standard}),P=N({coinId:e,symbol:c,decimals:r,currencyId:n,fee:t.custom});return{slow:g,fast:f,standard:l,custom:P}}i();m();var ye=y(I()),Fe=y(ce());var ke={initLoading:!0,loading:!1,error:!1,denom:"",gasAmount:"0",gasPriceStep:{slow:"0",fast:"0",standard:"0"},gasFee:{slow:"0",fast:"0",standard:"0"}},$=0,Le=7e3;function z({coinId:e,address:t,value:o="0",inputData:a="",to:n=""}){let[c,r]=(0,ye.useState)(ke);async function g(){try{if(!e||!t||!a)return;r(A=>({...A,loading:!0,error:!1}));let[f,l]=await Promise.all([ie({coinId:e,from:t,value:o??"0",to:n??""}),me({coinId:e,from:t,value:o??"0",inputData:a})]),{min:P,normal:C,max:x,feeDemon:s}=f,v={denom:s,gasAmount:l,gasPriceStep:{slow:P,fast:x,standard:C},gasFee:{slow:T(P,l),fast:T(x,l),standard:T(C,l)},error:!1,initLoading:!1,loading:!1};r(v)}catch{r(l=>({...l,error:!0,initLoading:!1,loading:!1}))}}return(0,Fe.useDeepCompareEffect)(()=>(clearInterval($),g(),$=setInterval(g,Le),()=>{clearInterval($)}),[n,o,a]),c}i();m();var B={customGasPriceStep:"_customGasPriceStep_1drur_1",customGasPriceStepDenom:"_customGasPriceStepDenom_1drur_4"};function Ne({coinId:e,address:t,to:o,inputData:a,visible:n,gasType:c=u.STANDARD,gasPriceStep:r,gasAmount:g,onConfirm:f,onBack:l,onClose:P,onChange:C}){let{baseCoin:x}=k(Number(e),!0),s=z({coinId:e,address:t,to:o,inputData:a}),[v,A]=(0,p.useState)(c),[D,Pe]=(0,p.useState)(c),[K,Se]=(0,p.useState)(),Te=(M(r)?void 0:r)||s.gasPriceStep.standard,b=typeof K=="string"?K:Te,[W,Ce]=(0,p.useState)(),De=(M(g)?void 0:g)||s.gasAmount,w=typeof W=="string"?W:De,J=oe(b,s.gasPriceStep.slow)?G("wallet_extension_cosmos_alert_morethan",{num:d(s.gasPriceStep.slow,s.denom)}):"",X=re(w,0)?G("wallet_extension_cosmos_alert_limitmorethan"):"",Ge=!J&&!X,Y=T(b,w),Z=O({coinId:e,fee:{...s.gasFee,custom:Y}}),j=(0,h.useMemoizedFn)(({gasType:E,gasAmount:be,gasPriceStep:we,gasFee:Ie})=>{A(E),Pe(E),C({gasType:E,gasPriceStep:we,gasAmount:be,gasFee:Ie,denom:s.denom,loading:!1,error:!1,initLoading:!1}),f&&f()}),xe=U({feeInfo:s,feeDisplay:Z,onClick:j}),Ae=V({feeInfo:s,feeDisplay:Z,customGasPriceStep:b,customGasAmount:w,customGasFee:Y,canConfirm:Ge,onClick:()=>{A(u.CUSTOM)},onConfirm:j});return(0,h.useDeepCompareEffect)(()=>{D!==u.CUSTOM&&C({gasType:D,gasAmount:s.gasAmount,gasPriceStep:s.gasPriceStep[D],gasFee:s.gasFee[D],denom:s.denom,loading:s.loading,error:s.error,initLoading:s.initLoading})},[D,s,o,a]),p.default.createElement(le,{feeType:v,feeDataList:xe,onBack:l,onClose:P,onChange:q,visible:n,custom:{...Ae,components:()=>p.default.createElement(p.default.Fragment,null,p.default.createElement(F.Number,{className:B.customGasPriceStep,size:F.SIZE.sm,title:p.default.createElement(p.default.Fragment,null,G("wallet_extension_cosmos_title_gasfee")),value:b,onChange:Se,errorType:F.TIP_TYPE.always,error:J,enableMinus:!1,min:0,precision:x?.decimals??6,suffix:p.default.createElement("span",{className:B.customGasPriceStepDenom},s.denom)}),p.default.createElement(F.Number,{size:F.SIZE.sm,title:G("wallet_extension_cosmos_title_gasamount",{},{useBr:!1}),value:w,onChange:Ce,errorType:F.TIP_TYPE.always,error:X,enableMinus:!1,min:0,precision:0}))}})}export{Ne as a};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-PH7PPPGO.js.map
