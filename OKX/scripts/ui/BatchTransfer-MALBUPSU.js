import{a as ml}from"./chunk-OIBIIFJS.js";import{a as dl}from"./chunk-PESX4JIQ.js";import{a as re,j as fl}from"./chunk-SJXVXTEI.js";import{a as ul,b as ll,c as as,d as cl}from"./chunk-QPAOESCV.js";import{a as il}from"./chunk-FBDSUED7.js";import{a as al}from"./chunk-LIPTYF3E.js";import{c as sl}from"./chunk-BFW6HCQ3.js";import"./chunk-3CVTSTBR.js";import{a as zo,b as Xu}from"./chunk-IGYAABP7.js";import"./chunk-RYRQK4MH.js";import{b as Wo,c as os,d as el}from"./chunk-EHKSYXXT.js";import{a as Zu}from"./chunk-TOV4UWR3.js";import"./chunk-BDM6XPIF.js";import"./chunk-PSDESO5W.js";import"./chunk-ALLM2Z34.js";import"./chunk-QXPTHK7Q.js";import{A as gn,B as Gr,a as Yn,t as Ku,x as Et}from"./chunk-2LCPVMSO.js";import{d as Ju,i as Qu}from"./chunk-7C3BTQYU.js";import{b as Yu,k as qu,y as $u}from"./chunk-3XTUMVWB.js";import"./chunk-MGYCOFIC.js";import"./chunk-6THUPAMO.js";import"./chunk-FK5ARFJK.js";import"./chunk-6Y7SZIB7.js";import"./chunk-VVYJA72I.js";import"./chunk-OWWFH26C.js";import{d as er,e as Hu}from"./chunk-MNZIO3NP.js";import"./chunk-HEFTA5OH.js";import{a as Vu}from"./chunk-S7NLB5XS.js";import"./chunk-UUWJWUOY.js";import{a as rl,b as Dn,c as dr,d as Yr,e as nl,f as _t,g as Uo,h as ol}from"./chunk-CKYKLSMJ.js";import{a as tl}from"./chunk-ACTCEXOV.js";import"./chunk-YAQ2CLWQ.js";import"./chunk-7CC6X6YX.js";import"./chunk-JAGKSBYF.js";import"./chunk-CR2CPF4X.js";import"./chunk-HKZGONPS.js";import"./chunk-IIAVVYHZ.js";import{a as Gu}from"./chunk-TSTKPLAO.js";import"./chunk-52XLG23J.js";import"./chunk-EEFD5KZC.js";import"./chunk-73ZHJYCP.js";import"./chunk-3NSLXJYR.js";import"./chunk-ENPNPH37.js";import"./chunk-5QJIR6ZJ.js";import"./chunk-H6SNSZIS.js";import"./chunk-YWECPG37.js";import"./chunk-AXJECT36.js";import"./chunk-5BIOTNBS.js";import"./chunk-R5SMHBLJ.js";import"./chunk-IY4RYRL6.js";import"./chunk-4OAEJJK5.js";import"./chunk-34VLVCKN.js";import"./chunk-J4ZKBKEJ.js";import"./chunk-TFJRUJHH.js";import"./chunk-7NMUCCUG.js";import"./chunk-YF3DWJDS.js";import"./chunk-RH4ISAHA.js";import"./chunk-ECQND2NK.js";import"./chunk-W3L3YTJO.js";import"./chunk-M5NI6HPE.js";import{c as $e}from"./chunk-YQHUKBMA.js";import"./chunk-VM2NMLPX.js";import"./chunk-YP7CHBKG.js";import"./chunk-FNXLAYUB.js";import"./chunk-PQK3LXXN.js";import"./chunk-FTRHGHDS.js";import"./chunk-XT3EOPTE.js";import"./chunk-A6Z53EN6.js";import"./chunk-LL63GZNI.js";import"./chunk-M7CL2K7X.js";import"./chunk-W2CTJYFJ.js";import"./chunk-XUKVTAH5.js";import"./chunk-5OJTPISL.js";import"./chunk-7UPVX2FL.js";import"./chunk-BSFXZ46S.js";import"./chunk-ZMCTBWUY.js";import"./chunk-UMGTYP2Z.js";import"./chunk-5F6JALEN.js";import{A as wu,B as Fu,C as yu,D as Tu,E as Lo,F as _u,G as Tt,H as Su,I as bu,J as Nu,K as Ou,L as Iu,M as Pu,a as Qe,b as Ur,c as de,d as He,e as au,f as su,g as iu,h as uu,i as lu,j as cu,k as fu,l as du,m as mu,n as pu,o as hu,p as hn,q as ct,r as vu,s as gu,t as Du,u as Cu,v as Eu,w as Au,x as Bu,y as rs,z as xu}from"./chunk-6WZ77MYR.js";import{a as tu,b as ru,d as nu,e as ou}from"./chunk-M5H47IO2.js";import{b as bo}from"./chunk-V7MKKAGW.js";import"./chunk-SKMCCAGC.js";import"./chunk-FOF22X4F.js";import"./chunk-P4EMG7RN.js";import"./chunk-7B5UI77E.js";import{d as Ro}from"./chunk-R6X7EOIE.js";import"./chunk-MKEYCSLA.js";import"./chunk-4EFZXPDV.js";import"./chunk-4KODREVA.js";import"./chunk-6UWGBJGT.js";import{g as Uu}from"./chunk-G4AVWXHJ.js";import"./chunk-76CRIMII.js";import"./chunk-F7VSWGDW.js";import"./chunk-MKSCYWSV.js";import{e as Po}from"./chunk-XIYLMV6I.js";import{M as Xi,d as $i,h as Vi,pa as Ji,r as Ki,w as Zi}from"./chunk-KLLSVAFY.js";import"./chunk-MBHGLWZJ.js";import"./chunk-QZO7W5WD.js";import"./chunk-AKE54ZCC.js";import"./chunk-EHZWM44P.js";import{a as jo}from"./chunk-K6STDTUY.js";import"./chunk-A57OTXBP.js";import{a as No,b as Qi,g as Lu,q as Wu}from"./chunk-YJQGXXOQ.js";import{a as vn,d as zu}from"./chunk-HTLOGWI7.js";import"./chunk-6SEP5B7P.js";import"./chunk-FHKOH5E6.js";import"./chunk-NTQ2YVDA.js";import"./chunk-KKG4PJ6O.js";import"./chunk-7SRLIN7D.js";import"./chunk-AW5NL3JM.js";import"./chunk-RI2WZ5PA.js";import"./chunk-YIAOHVF5.js";import"./chunk-KBS3PMLQ.js";import"./chunk-7GKX3YKG.js";import"./chunk-7HFBMBFB.js";import"./chunk-TJCPJQIM.js";import"./chunk-ZTAZ2272.js";import{h as Ru,k as ju}from"./chunk-IRMYAC6R.js";import"./chunk-Q76QXAWY.js";import"./chunk-THSNJ5WU.js";import"./chunk-MRB2XFLQ.js";import"./chunk-65AJJVJY.js";import{d as ko}from"./chunk-PDC447BO.js";import"./chunk-JI6FOZGR.js";import"./chunk-JCM7SRK2.js";import"./chunk-PTD7UCOR.js";import"./chunk-Q4YTGP2G.js";import{b as Ge}from"./chunk-ETJEH7T4.js";import"./chunk-LLZAOPDB.js";import"./chunk-V3IFYKWM.js";import"./chunk-EWTTD4DL.js";import{a as Mu}from"./chunk-Y2TPPS4H.js";import"./chunk-ITY22AD4.js";import"./chunk-E2JYOUYE.js";import"./chunk-B3JSNQIV.js";import{Pa as Hr,Qa as Un,Ra as Hn,Sa as Gn}from"./chunk-YALUYHLV.js";import{e as Wn,q as we}from"./chunk-I3CPAVOC.js";import{a as cp}from"./chunk-ARWSGU73.js";import"./chunk-CZ2ZBAZV.js";import{g as up,m as lp,o as Ce}from"./chunk-5QMHGZLF.js";import{C as So,Ga as Gi,Gb as qi,T as Wi,Ta as yr,aa as Ui,cb as Yi,da as Hi,ec as Ct}from"./chunk-HPWCPLRR.js";import"./chunk-O6ZBO5JF.js";import{a as zi}from"./chunk-TSTPZ3JM.js";import"./chunk-D2LKUI4F.js";import{a as ns}from"./chunk-ON6S2DB7.js";import"./chunk-SZD6WTBQ.js";import"./chunk-ASR4HLU7.js";import"./chunk-ANIUN6US.js";import{b as Pi,c as wo,d as Va,e as Ka,f as op}from"./chunk-3DZ7WRLL.js";import{d as $a,f as np}from"./chunk-DEOJU4Z3.js";import"./chunk-PLIIQKFY.js";import"./chunk-YOPEZ2F5.js";import"./chunk-6BXYJZHH.js";import{b as et,c as Io,d as eu}from"./chunk-CCEMKRO6.js";import{b as ts}from"./chunk-2HSCH6R3.js";import"./chunk-CWNIM6RS.js";import"./chunk-NNAD25BL.js";import"./chunk-XV444F26.js";import{fa as es,ka as Qt,o as ji,q as Ja,v as Qa,x as _o}from"./chunk-N2BCRNDB.js";import"./chunk-RTFE54S3.js";import"./chunk-GCQ4H2BA.js";import{b as Oo}from"./chunk-JGEHAFTO.js";import"./chunk-UVFOW4HH.js";import{g as Mo}from"./chunk-LNOPECCQ.js";import{a as ku}from"./chunk-CB7FOZNP.js";import{c as y}from"./chunk-43VURGIT.js";import{Ab as ke,Ia as Jt,Ib as he,J as Ti,K as Bo,L as fn,Lb as Li,Na as jn,Qb as Za,R as _i,Sc as ap,Tb as fr,U as Ln,Uc as Mi,W as Si,Wb as Fo,Yb as pn,Zb as yo,_c as sp,a as di,aa as Ga,b as ep,bd as Ri,fc as To,ha as dn,jd as zn,ma as bi,qa as tp,qb as De,rc as ze,rd as Xa,sc as ki,vb as Ae,ya as Xt,za as Rn,zb as se}from"./chunk-TM67VPZU.js";import"./chunk-VW6OQNWT.js";import{A as yt,G as qa,M as Ii,P as xo,c as Ni,d as kn,h as Mn,o as Wr,q as Ne,r as Fr,w as Ya,x as mn,z as Oi}from"./chunk-PUSMMCUD.js";import{R as pe,S as rp,o as H,z as T}from"./chunk-UWJLNJLY.js";import"./chunk-VRY2ADKE.js";import"./chunk-VWEB6W6G.js";import"./chunk-5U7FO2PW.js";import"./chunk-B7EGZO4E.js";import"./chunk-PDUOSATP.js";import{$ as wi,A as Pn,F as gi,H as Di,L as Ci,Q as cn,R as Co,S as Ei,V as Ai,Z as Bi,_ as xi,ea as Fi,f as mi,ia as Eo,k as pi,la as yi,m as hi,ma as Ao,ra as st,w as vi}from"./chunk-XDY6V34Y.js";import"./chunk-YJFNO57I.js";import"./chunk-DZ6CTC22.js";import{$ as Gt,W as lt,c as qe,ea as te}from"./chunk-JT3LNHPY.js";import"./chunk-47UWF72W.js";import{b as ee}from"./chunk-JWYCKY2V.js";import"./chunk-G2266BV2.js";import"./chunk-L4PAIYPH.js";import"./chunk-UT7LJPKF.js";import"./chunk-AFZ6A2B3.js";import"./chunk-VVPY7ZA7.js";import"./chunk-KUW5VATV.js";import"./chunk-BNAVWOJ2.js";import"./chunk-IG2Q5ALZ.js";import"./chunk-WOMUNWBT.js";import"./chunk-QNGB57GN.js";import"./chunk-NM2PDVBD.js";import{a as ip}from"./chunk-7U3DN5ZD.js";import"./chunk-F6PXOVYL.js";import"./chunk-324EPGNQ.js";import"./chunk-5GFHI4AK.js";import"./chunk-QYVQBXDG.js";import"./chunk-7D4PUIEN.js";import"./chunk-IWVM7XL6.js";import"./chunk-7QO4TZYQ.js";import"./chunk-FF4LY6PE.js";import"./chunk-76KCDJDG.js";import"./chunk-YDUDQP2P.js";import"./chunk-PGPFV4JQ.js";import"./chunk-MIBHDVGP.js";import"./chunk-7VFUX7IX.js";import"./chunk-XLF4LAH2.js";import"./chunk-ONKZ57T6.js";import"./chunk-ZC7Q7LCH.js";import{c as fi,f as _,h as Ht,o as g,q as D}from"./chunk-6KXF36WM.js";var Dc=fi((DA,gc)=>{"use strict";g();D();gc.exports=Uv;var hc="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",vc="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",zv=new RegExp("^[^"+vc+"]*["+hc+"]"),Wv=new RegExp("^[^"+hc+"]*["+vc+"]");function Uv(t){return t=String(t||""),zv.test(t)?"rtl":Wv.test(t)?"ltr":"neutral"}});var Gc=fi(rr=>{"use strict";g();D();Object.defineProperty(rr,"__esModule",{value:!0});var eg=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),ws={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},tg={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:eg?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},zc={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(to=1;to<20;to++)zc["f"+to]=111+to;var to;function ca(t,e,r){e&&!("byKey"in e)&&(r=e,e=null),Array.isArray(t)||(t=[t]);var n=t.map(function(s){return Wc(s,e)}),o=function(i){return n.some(function(l){return Uc(l,i)})},a=r==null?o:o(r);return a}function rg(t,e){return ca(t,e)}function ng(t,e){return ca(t,{byKey:!0},e)}function Wc(t,e){var r=e&&e.byKey,n={};t=t.replace("++","+add");var o=t.split("+"),a=o.length;for(var s in ws)n[ws[s]]=!1;var i=!0,l=!1,c=void 0;try{for(var f=o[Symbol.iterator](),v;!(i=(v=f.next()).done);i=!0){var p=v.value,h=p.endsWith("?")&&p.length>1;h&&(p=p.slice(0,-1));var m=Fs(p),u=ws[m];(a===1||!u)&&(r?n.key=m:n.which=Hc(p)),u&&(n[u]=h?null:!0)}}catch(C){l=!0,c=C}finally{try{!i&&f.return&&f.return()}finally{if(l)throw c}}return n}function Uc(t,e){for(var r in t){var n=t[r],o=void 0;if(n!=null&&(r==="key"&&e.key!=null?o=e.key.toLowerCase():r==="which"?o=n===91&&e.which===93?91:e.which:o=e[r],!(o==null&&n===!1)&&o!==n))return!1}return!0}function Hc(t){t=Fs(t);var e=zc[t]||t.toUpperCase().charCodeAt(0);return e}function Fs(t){return t=t.toLowerCase(),t=tg[t]||t,t}rr.default=ca;rr.isHotkey=ca;rr.isCodeHotkey=rg;rr.isKeyHotkey=ng;rr.parseHotkey=Wc;rr.compareHotkey=Uc;rr.toKeyCode=Hc;rr.toKeyName=Fs});g();D();var Rr=_(ee()),Ua=_(Ct()),un=_(ns()),Ym=_(Ce());g();D();g();D();var qn=_(Ct()),pl=_(ee()),hl=_(Ce()),It=(t,e)=>r=>{let n=(0,qn.useSelector)(t),o=(0,qn.useDispatch)(),a=i=>{e&&o(e(i))},s=(0,hl.useMemoizedFn)(a);return(0,pl.useEffect)(()=>{if(r===void 0)return;let i=typeof r=="function"?r():r;s(i)},[r,s]),[n,a]},vl=t=>()=>{let e=(0,qn.useDispatch)();return(...n)=>{t&&e(t(...n))}};var Ye=It(uu,Bu),le=It(lu,Au),Ho=It(cu,Lo),Go=It(fu,_u),it=It(su,Eu),Yo=It(Du,yu),o0=It(Cu,Tu),Fe=It(du,xu),gl=vl(bu),ft=It(pu,wu),dt=It(hu,Fu),Cn=It(iu,Su);g();D();var $n=_(ee()),Dl=_(Ct());ze();var ut=()=>{let{isRpcMode:t}=(0,Dl.useSelector)(ko);return t},fp=[Ae,De,ke,se,he],dp=()=>{let t=jo(),e=Gu(),r=(0,$n.useMemo)(()=>t.filter(({appBaseChain:n,localType:o})=>n===Li?.ETHEREUM?!0:fp.includes(o)),[t]);return(0,$n.useMemo)(()=>r.map(({image:n,chainName:o,localType:a,...s})=>{let i=e.find(l=>l.localType===a);return{...i||s,chainName:o,icon:n,chainId:[Ae,De,ke,se,he].includes(a)?ts(s?.chainId):i?.realChainIdHex||ts(s?.chainId)}}),[e,r])},mp=()=>{let{rpcNetworks:t}=Po();return(0,$n.useMemo)(()=>rl(t),[t])},Cl=()=>{let t=ut(),e=mp(),r=dp();return(0,$n.useMemo)(()=>t?e:r,[t,e,r])};g();D();var Fl=_(ee()),Kn=_(Ct()),Tr=_(Ce());pe();g();D();var ss=_(Ce());pe();Xa();ze();Rn();jn();var pp="8000",qo=()=>{let t=Et();return(0,ss.useMemoizedFn)(async({coinId:e,address:r,inputData:n})=>{let o=await t({coinId:e,address:r,fromAddr:r,scenario:ji.SCENARIO_SEND_COIN}),a=o,{gasUnitPrice:s}=o;if(n){let{data:{gasLimit:l}}=await Jt(Xt.getAptosGasLimit,{inputData:n});a=l}else a=pp;let i=H.mul(s,a);return{...o,networkFee:i,maxGasAmount:a,gasUnitPrice:s}})},El=()=>{let t=gn({localType:Ae});return(0,ss.useMemoizedFn)(async({to:e,from:r,amount:n,baseCoinId:o,metaAddress:a,sequenceNumber:s,maxGasAmount:i,gasUnitPrice:l,protocolType:c,chainId:f,expirationTimestampSecs:v,tyArg:p})=>{let m={base:{sequenceNumber:s,chainId:f,maxGasAmount:i,gasUnitPrice:l,expirationTimestampSecs:v}},u={amount:n,recipientAddress:e};return o===0&&(m.type=_o.TRANSFER,m.data=u),o!==0&&c===zn.APTOS_FUNGIBLE_TOKEN&&(m.type=_o.FUNGIBLE_ASSET_TRANSFER,m.data={...u,fungibleAssetMetadataAddress:a}),o!==0&&c===zn.APTOS_TOKEN&&(m.type=_o.TOKEN_TRANSFER,m.data={...u,tyArg:p}),await t({params:m,fromAddr:r})})};g();D();var Vn=_(Ce());pe();Xa();ze();var Al=()=>(0,Vn.useMemoizedFn)(async({to:t,toes:e,from:r,value:n,values:o,budget:a,gasPrice:s,inputCoins:i,tokenInputCoins:l,baseCoinId:c})=>{let f=e?.length?e:[t],v=o?.length?o:[n],p=i.map((u={})=>{let{digest:C,version:A,objectId:E}=u;return{digest:C,version:A,objectId:E}}),h=new qu;if(h.setGasPrice(s),h.setGasPayment(p||[]),h.setSender(r),a&&h.setGasBudget(a),c===0){let u=h.splitCoins(h.gas,v);f.forEach((C,A)=>{h.transferObjects([u[A]],h.pure.address(C))})}else if(l?.length>1){let u=l.slice(1).map(E=>h.object(E.objectId)),C=h.object(l[0].objectId);h.mergeCoins(C,u);let A=h.splitCoins(C,[n]);h.transferObjects([A],h.pure.address(t))}else{let u=h.splitCoins(h.object(l[0].objectId),[n]);h.transferObjects([u],h.pure.address(t))}let m=Yu(await h.build({client:il}));return{tx:h,txBytes:m}}),$o=()=>{let t=Et(),e=Al();return(0,Vn.useMemoizedFn)(async({to:r,from:n,value:o,values:a,toes:s,coinId:i,baseCoinId:l})=>{let c=a?.length?a?.reduce((h,m)=>H.add(h,m),0):o,f=await t({coinId:i,address:n,value:c,toAddr:s?.[0]||r});return(await e({...f,to:r,toes:s,from:n,value:o,coinId:i,values:a,baseCoinId:l}))?.tx?.blockData?.gasConfig?.budget||"0"})},Bl=()=>{let t=Al(),e=Et(),r=gn({localType:ke});return(0,Vn.useMemoizedFn)(async({to:n,toes:o,values:a,from:s,coinId:i,value:l,baseCoinId:c})=>{let f=a?.length?a?.reduce((C,A)=>H.add(C,A),0):l,v=await e({value:f,coinId:i,address:s,toAddr:o?.[0]||n}),{tx:p,txBytes:h}=await t({...v,value:l,coinId:i,to:n,toes:o,from:s,values:a,baseCoinId:c}),u=await r({params:{type:"raw",data:h},fromAddr:s});return{tx:p,txBytes:h,signedTx:u}})},xl=t=>{let e=ju(),r=Ru(),n=Gr({coinId:t,txSource:Ri.NORMAL});return(0,Vn.useMemoizedFn)(async({tx:o,to:a,from:s,txBytes:i,coinAmount:l,signedTx:c,walletId:f})=>{let{signature:v,hash:p}=c||{},h=e(f)||r;return await n({tx_bytes:i,signatures:[v],request_type:"WaitForEffectsCert"},{txHash:p,coinAmount:l,accountId:f,fromAdr:s,toAdr:a,walletType:h?.serverWalletType,serviceCharge:o?.blockData?.gasConfig?.budget||"0"})})};np();ze();dn();g();D();var wl=_(ee());var qr=t=>{let[e]=Ye(),r=t||e?.rpcUrl;return(0,wl.useCallback)(async()=>r?await Qi(r):{},[r])};var Vo=t=>{let[e]=Ye(),r=t||e?.rpcUrl;return tu(r)};var hp=(t,e)=>{let[r]=le(),{ready:n=!0,onSuccess:o}=e||{},a=ru(t);(0,Tr.useRequest)(async()=>{let s=await a(r?.chainId);return{isSupportEip1559:s?.[0]?.isSupportEip1559||!1,gasPriceLevels:s}},{onSuccess:o,pollingInterval:7e3,ready:!!r?.chainId&&!!n})},yl=()=>{let[t]=le(),[e]=Ye(),r=(0,Kn.useDispatch)(),[n]=Yo(),[o,a]=(0,Fl.useState)([]),[,s]=Cn(),i=vn(t?.localType),l=i&&et(i,t?.localType),c=(0,Kn.useSelector)(hn);return hp(e?.rpcUrl,{ready:!!e?.rpcUrl&&!t?.coinId,onSuccess:({isSupportEip1559:f,gasPriceLevels:v})=>{let p=ou({chainGasLevels:v,chainGasRate:c});s(f),r(rs(p)),a(p)}}),Zu({coinId:t?.coinId,chainId:t?.chainId,address:l},{ready:!!t?.coinId&&![Ae,De,ke,se,he].includes(t?.localType)&&n===Ur.CONFIRM,onSuccess:f=>{let{gasPrice:v,needExtFee:p}=f;r(Ou(p)),s(v?.supportEip1559||!1),a(os(v)),r(rs(os(v)))}}),o};var Ko=()=>{let t=er(fr,{withPrice:!0}),e=Et(),r=Ku();return(0,Tr.useMemoizedFn)(async({from:n,to:o,coinId:a,chainId:s})=>{let i=await e({coinId:a,toAddr:o,address:n,fromAddr:n})||{},l=await r({from:n,chainId:s,coinId:a,bizLine:6,simulateTransactionParamList:[{sigVerify:!1,replaceRecentBlockhash:!0}],checkTypes:[es.TX_ANALYZE]}),{simulateTransactionResultList:c}=l?.[es.TX_ANALYZE]||{},{unitGasLimit:f}=c[0]||{},{fee:v,feelimit:p,computeUnitPrice:h,rent:m,solRent:u}=i;if(v){let{priorityFee:C,priorityGasPrice:A,priorityGasLimit:E}=Yi(p,h,f),w=H.add(v,C),F=H.div(w,10**t?.decimals);return{rent:m,solRent:u,networkFee:F,networkFeeInt:w,computeUnitLimit:E,computeUnitPrice:A,networkFeeMarket:H.mul(F,t?.currencyPrice)}}return{estimateFailed:!0}})},Tl=()=>{let t=er(yo,{withPrice:!0}),e=$o();return(0,Tr.useMemoizedFn)(async({coinId:r,from:n,to:o,value:a,baseCoinId:s})=>{let i=await e({to:o,from:n,value:a,coinId:r,baseCoinId:s}),l=H.div(i,10**t?.decimals);return{networkFee:l,networkFeeInt:i,networkFeeMarket:H.mul(l,t?.currencyPrice)}})},Zo=t=>{let e=er(t||pn,{withPrice:!0});return(0,Tr.useMemoizedFn)(async({to:r,chainId:n,contractAddress:o})=>{let a={address:r,type:"Transfer",contractAddress:o,chainId:n||e?.chainId},i=(await al(a))?.data?.fee||"0",l=H.div(i,10**(e?.decimals||0));return{networkFee:l,networkFeeInt:i,networkFeeMarket:H.mul(l,e?.currencyPrice)}})},_l=()=>{let t=er(Fo,{withPrice:!0}),e=qo();return(0,Tr.useMemoizedFn)(async({coinId:r,address:n,inputData:o})=>{let{networkFee:a}=await e({coinId:r,address:n,inputData:o}),s=H.div(a,10**t?.decimals);return{networkFee:s,networkFeeInt:a,networkFeeMarket:H.mul(s,t?.currencyPrice)}})},Xo=()=>{let e=Uo(!1,he).map(i=>i.options).flat(),r=(0,Kn.useDispatch)(),n=cl(),o=er(To,{withPrice:!0}),[a]=le(),s=Et();return(0,Tr.useMemoizedFn)(async({baseCoinId:i,coinId:l,chainId:c,from:f,to:v,tokenAddress:p,decimals:h,amount:m,sendMode:u=yr.CARRY_ALL_REMAINING_BALANCE,memo:C})=>{let E=e?.find(W=>W.address===f)?.walletId||await $a().getWalletIdByAddress(f,he),w=await $a().getWalletIdentityByWalletId(E),F=$u(w,f),S=await s({coinId:l,address:f,fromAddr:f,toAddr:v,value:"0"}),M=await n(S,a?.baseCoinId);if(r(Iu(M)),M.getCustomPayloadInfoRpcError)return{networkFee:0,networkFeeInt:0,networkFeeMarket:0,signInfo:M,gasLimitInfo:null,bodyParams:null};let P={to:v,seqno:M?.nonce,decimal:h,amount:m,memo:C,expireAt:ul(M?.ttl),walletVersion:F};i===0?P={...P,type:as.TRANSFER,sendMode:u}:(P={...P,type:as.JETTON_TRANSFER,fromJettonAccount:M?.fromJettonAccount,sendMode:yr.PAY_GAS_SEPARATELY+yr.IGNORE_ERRORS},M?.customPayload&&(P={...P,customPayload:M?.customPayload,stateInit:M?.stateInit}));let L=await ll({fromAddress:f,body:P,walletId:E}),{data:O}=await Wi({address:f,tokenAddress:p,chainId:c,coinId:l,value:"0",inputData:JSON.stringify(L)}),{invokeNotificationFee:U="0",gasLimit:G="0"}=O,k=i===0?G:Bo(G,U),Y=H.div(k,10**(o?.decimals||0));return{networkFee:Y,networkFeeInt:k,networkFeeMarket:H.mul(Y,o?.currencyPrice),signInfo:M,gasLimitInfo:O,bodyParams:P}})};ze();dn();g();D();var $t=_(ee());pe();g();D();var vp={MANY_TO_MANY:"MANY_TO_MANY",ONE_TO_MANY:"ONE_TO_MANY",MANY_TO_ONE:"MANY_TO_ONE"},J=vp;g();D();var mr=_(ee());var Jo=_(qe());g();D();g();D();var Zn=_(ee());g();D();var Sl=_(ns());function gp(){let t=(0,Sl.useHistory)(),[e,r]=Yo(),n=(h,m)=>(u=!0)=>{e!==m&&r(m),u?t.replace(h):t.push(h)},o=h=>t.location.pathname===h,a=n(Hr,Ur.SELECT_TYPE),s=n(Un,Ur.ADD_ADDRESS),i=n(Hn,Ur.CONFIRM),l=n(Gn,Ur.SEND),c=o(Hr),f=o(Un),v=o(Hn),p=o(Gn);return{isConfirmPage:v,isHomePage:c,isSendPage:p,isAddressPage:f,gotoAddressPage:s,gotoConfirmPage:i,gotoSendPage:l,gotoHomePage:a}}var At=gp;function Dp(){let[t]=Ye(),[e]=le(),[r]=Fe(),{gotoHomePage:n,gotoAddressPage:o,isConfirmPage:a,isSendPage:s,isAddressPage:i,isHomePage:l}=At(),c=(0,Zn.useCallback)(()=>{!t&&!e?.symbol&&!l&&n()},[t,e,l,n]),f=(0,Zn.useCallback)(()=>{r.length<=0&&!i&&o()},[r,i,o]);(0,Zn.useLayoutEffect)(()=>{i?c():(a||s)&&(c(),f())},[c,f,i,a,s])}var bl=Dp;function Cp(){return bl(),null}var Nl=Cp;g();D();var $r={root:"_root_189ao_1",container:"_container_189ao_6",okgLayout:"_okgLayout_189ao_10",headerBox:"_headerBox_189ao_32",header:"_header_189ao_32",footer:"_footer_189ao_125"};function Ep({children:t}){return mr.default.createElement(y.Box,{className:$r.footer},t)}function Ap({children:t,footer:e,useOkg:r=!0,headerProps:n={}}){let o=r?mr.default.Fragment:y.Box;return mr.default.createElement(y.FlexBox,{className:$r.root,direction:y.DIRECTION.vertical},mr.default.createElement(y.Container,{className:(0,Jo.default)($r.container,r&&$r.okgLayout)},mr.default.createElement(o,{className:(0,Jo.default)(!r&&$r.headerBox)},mr.default.createElement(dl,{...n,className:(0,Jo.default)($r.header,n.className)})),t),mr.default.createElement(Ep,null,e),mr.default.createElement(Nl,null))}var _r=Ap;g();D();var Er=_(ee()),Uf=_(qe());pe();g();D();var Oe=_(ee()),Hs=_(Ce()),Mf=_(ip());g();D();g();D();function Ol(t){return Object.prototype.toString.call(t)==="[object Object]"}function tt(t){var e,r;return Ol(t)===!1?!1:(e=t.constructor,e===void 0?!0:(r=e.prototype,!(Ol(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}op();var Bp={transform(t,e){var{current:r,affinity:n}=t;if(r!=null){var o=B.transform(r,e,{affinity:n});t.current=o,o==null&&t.unref()}}},xp={transform(t,e){var{current:r,affinity:n}=t;if(r!=null){var o=me.transform(r,e,{affinity:n});t.current=o,o==null&&t.unref()}}},wp={transform(t,e){var{current:r,affinity:n}=t;if(r!=null){var o=N.transform(r,e,{affinity:n});t.current=o,o==null&&t.unref()}}},ea=new WeakMap,ta=new WeakMap,Jn=new WeakMap,cc=new WeakMap,Il=new WeakMap,Pl=new WeakMap,Ll=new WeakMap,B={ancestors(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=e,n=B.levels(t,e);return r?n=n.slice(1):n=n.slice(0,-1),n},common(t,e){for(var r=[],n=0;n<t.length&&n<e.length;n++){var o=t[n],a=e[n];if(o!==a)break;r.push(o)}return r},compare(t,e){for(var r=Math.min(t.length,e.length),n=0;n<r;n++){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1}return 0},endsAfter(t,e){var r=t.length-1,n=t.slice(0,r),o=e.slice(0,r),a=t[r],s=e[r];return B.equals(n,o)&&a>s},endsAt(t,e){var r=t.length,n=t.slice(0,r),o=e.slice(0,r);return B.equals(n,o)},endsBefore(t,e){var r=t.length-1,n=t.slice(0,r),o=e.slice(0,r),a=t[r],s=e[r];return B.equals(n,o)&&a<s},equals(t,e){return t.length===e.length&&t.every((r,n)=>r===e[n])},hasPrevious(t){return t[t.length-1]>0},isAfter(t,e){return B.compare(t,e)===1},isAncestor(t,e){return t.length<e.length&&B.compare(t,e)===0},isBefore(t,e){return B.compare(t,e)===-1},isChild(t,e){return t.length===e.length+1&&B.compare(t,e)===0},isCommon(t,e){return t.length<=e.length&&B.compare(t,e)===0},isDescendant(t,e){return t.length>e.length&&B.compare(t,e)===0},isParent(t,e){return t.length+1===e.length&&B.compare(t,e)===0},isPath(t){return Array.isArray(t)&&(t.length===0||typeof t[0]=="number")},isSibling(t,e){if(t.length!==e.length)return!1;var r=t.slice(0,-1),n=e.slice(0,-1),o=t[t.length-1],a=e[e.length-1];return o!==a&&B.equals(r,n)},levels(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=e,n=[],o=0;o<=t.length;o++)n.push(t.slice(0,o));return r&&n.reverse(),n},next(t){if(t.length===0)throw new Error("Cannot get the next path of a root path [".concat(t,"], because it has no next index."));var e=t[t.length-1];return t.slice(0,-1).concat(e+1)},operationCanTransformPath(t){switch(t.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(t){if(t.length===0)throw new Error("Cannot get the parent path of the root path [".concat(t,"]."));return t.slice(0,-1)},previous(t){if(t.length===0)throw new Error("Cannot get the previous path of a root path [".concat(t,"], because it has no previous index."));var e=t[t.length-1];if(e<=0)throw new Error("Cannot get the previous path of a first child path [".concat(t,"] because it would result in a negative index."));return t.slice(0,-1).concat(e-1)},relative(t,e){if(!B.isAncestor(e,t)&&!B.equals(t,e))throw new Error("Cannot get the relative path of [".concat(t,"] inside ancestor [").concat(e,"], because it is not above or equal to the path."));return t.slice(e.length)},transform(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return null;var n=[...t],{affinity:o="forward"}=r;if(t.length===0)return n;switch(e.type){case"insert_node":{var{path:a}=e;(B.equals(a,n)||B.endsBefore(a,n)||B.isAncestor(a,n))&&(n[a.length-1]+=1);break}case"remove_node":{var{path:s}=e;if(B.equals(s,n)||B.isAncestor(s,n))return null;B.endsBefore(s,n)&&(n[s.length-1]-=1);break}case"merge_node":{var{path:i,position:l}=e;B.equals(i,n)||B.endsBefore(i,n)?n[i.length-1]-=1:B.isAncestor(i,n)&&(n[i.length-1]-=1,n[i.length]+=l);break}case"split_node":{var{path:c,position:f}=e;if(B.equals(c,n)){if(o==="forward")n[n.length-1]+=1;else if(o!=="backward")return null}else B.endsBefore(c,n)?n[c.length-1]+=1:B.isAncestor(c,n)&&t[c.length]>=f&&(n[c.length-1]+=1,n[c.length]-=f);break}case"move_node":{var{path:v,newPath:p}=e;if(B.equals(v,p))return n;if(B.isAncestor(v,n)||B.equals(v,n)){var h=p.slice();return B.endsBefore(v,p)&&v.length<p.length&&(h[v.length-1]-=1),h.concat(n.slice(v.length))}else B.isSibling(v,p)&&(B.isAncestor(p,n)||B.equals(p,n))?B.endsBefore(v,n)?n[v.length-1]-=1:n[v.length-1]+=1:B.endsBefore(p,n)||B.equals(p,n)||B.isAncestor(p,n)?(B.endsBefore(v,n)&&(n[v.length-1]-=1),n[p.length-1]+=1):B.endsBefore(v,n)&&(B.equals(p,n)&&(n[p.length-1]+=1),n[v.length-1]-=1);break}}return n}};function ht(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Xn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kl(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Fp=(t,e,r)=>{switch(r.type){case"insert_node":{var{path:n,node:o}=r,a=V.parent(t,n),s=n[n.length-1];if(s>a.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(n,"] because the destination is past the end of the node."));if(a.children.splice(s,0,o),e)for(var[i,l]of N.points(e))e[l]=me.transform(i,r);break}case"insert_text":{var{path:c,offset:f,text:v}=r;if(v.length===0)break;var p=V.leaf(t,c),h=p.text.slice(0,f),m=p.text.slice(f);if(p.text=h+v+m,e)for(var[u,C]of N.points(e))e[C]=me.transform(u,r);break}case"merge_node":{var{path:A}=r,E=V.get(t,A),w=B.previous(A),F=V.get(t,w),S=V.parent(t,A),M=A[A.length-1];if(Q.isText(E)&&Q.isText(F))F.text+=E.text;else if(!Q.isText(E)&&!Q.isText(F))F.children.push(...E.children);else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(A,"] to nodes of different interfaces: ").concat(rt.stringify(E)," ").concat(rt.stringify(F)));if(S.children.splice(M,1),e)for(var[P,L]of N.points(e))e[L]=me.transform(P,r);break}case"move_node":{var{path:O,newPath:U}=r;if(B.isAncestor(O,U))throw new Error("Cannot move a path [".concat(O,"] to new path [").concat(U,"] because the destination is inside itself."));var G=V.get(t,O),k=V.parent(t,O),Y=O[O.length-1];k.children.splice(Y,1);var W=B.transform(O,r),$=V.get(t,B.parent(W)),ne=W[W.length-1];if($.children.splice(ne,0,G),e)for(var[fe,ge]of N.points(e))e[ge]=me.transform(fe,r);break}case"remove_node":{var{path:X}=r,ue=X[X.length-1],Se=V.parent(t,X);if(Se.children.splice(ue,1),e)for(var[Ee,Ze]of N.points(e)){var x=me.transform(Ee,r);if(e!=null&&x!=null)e[Ze]=x;else{var q=void 0,j=void 0;for(var[K,ce]of V.texts(t))if(B.compare(ce,X)===-1)q=[K,ce];else{j=[K,ce];break}var oe=!1;q&&j&&(B.equals(j[1],X)?oe=!B.hasPrevious(j[1]):oe=B.common(q[1],X).length<B.common(j[1],X).length),q&&!oe?(Ee.path=q[1],Ee.offset=q[0].text.length):j?(Ee.path=j[1],Ee.offset=0):e=null}}break}case"remove_text":{var{path:ve,offset:_e,text:be}=r;if(be.length===0)break;var Pe=V.leaf(t,ve),Be=Pe.text.slice(0,_e),Xe=Pe.text.slice(_e+be.length);if(Pe.text=Be+Xe,e)for(var[mt,Je]of N.points(e))e[Je]=me.transform(mt,r);break}case"set_node":{var{path:Nt,properties:zt,newProperties:pt}=r;if(Nt.length===0)throw new Error("Cannot set properties on the root node!");var Ot=V.get(t,Nt);for(var xe in pt){if(xe==="children"||xe==="text")throw new Error('Cannot set the "'.concat(xe,'" property of nodes!'));var cr=pt[xe];cr==null?delete Ot[xe]:Ot[xe]=cr}for(var ln in zt)pt.hasOwnProperty(ln)||delete Ot[ln];break}case"set_selection":{var{newProperties:at}=r;if(at==null)e=at;else{if(e==null){if(!N.isRange(at))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(rt.stringify(at)," when there is no current selection."));e=Xn({},at)}for(var Wt in at){var go=at[Wt];if(go==null){if(Wt==="anchor"||Wt==="focus")throw new Error('Cannot remove the "'.concat(Wt,'" selection property'));delete e[Wt]}else e[Wt]=go}}break}case"split_node":{var{path:Ut,position:jr,properties:Do}=r;if(Ut.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(Ut,"] because the root node cannot be split."));var zr=V.get(t,Ut),qm=V.parent(t,Ut),$m=Ut[Ut.length-1],Ha;if(Q.isText(zr)){var Vm=zr.text.slice(0,jr),Km=zr.text.slice(jr);zr.text=Vm,Ha=Xn(Xn({},Do),{},{text:Km})}else{var Zm=zr.children.slice(0,jr),Xm=zr.children.slice(jr);zr.children=Zm,Ha=Xn(Xn({},Do),{},{children:Xm})}if(qm.children.splice($m+1,0,Ha),e)for(var[Jm,Qm]of N.points(e))e[Qm]=me.transform(Jm,r);break}}return e},yp={transform(t,e){t.children=Va(t.children);var r=t.selection&&Va(t.selection);try{r=Fp(t,r,e)}finally{t.children=Ka(t.children),r?t.selection=Pi(r)?Ka(r):r:t.selection=null}}},Tp={insertNodes(t,e,r){t.insertNodes(e,r)},liftNodes(t,e){t.liftNodes(e)},mergeNodes(t,e){t.mergeNodes(e)},moveNodes(t,e){t.moveNodes(e)},removeNodes(t,e){t.removeNodes(e)},setNodes(t,e,r){t.setNodes(e,r)},splitNodes(t,e){t.splitNodes(e)},unsetNodes(t,e,r){t.unsetNodes(e,r)},unwrapNodes(t,e){t.unwrapNodes(e)},wrapNodes(t,e,r){t.wrapNodes(e,r)}},_p={collapse(t,e){t.collapse(e)},deselect(t){t.deselect()},move(t,e){t.move(e)},select(t,e){t.select(e)},setPoint(t,e,r){t.setPoint(e,r)},setSelection(t,e){t.setSelection(e)}},fc=(t,e)=>{for(var r in t){var n=t[r],o=e[r];if(tt(n)&&tt(o)){if(!fc(n,o))return!1}else if(Array.isArray(n)&&Array.isArray(o)){if(n.length!==o.length)return!1;for(var a=0;a<n.length;a++)if(n[a]!==o[a])return!1}else if(n!==o)return!1}for(var s in e)if(t[s]===void 0&&e[s]!==void 0)return!1;return!0};function Sp(t,e){if(t==null)return{};var r={},n=Object.keys(t),o,a;for(a=0;a<n.length;a++)o=n[a],!(e.indexOf(o)>=0)&&(r[o]=t[o]);return r}function vr(t,e){if(t==null)return{};var r=Sp(t,e),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)n=a[o],!(e.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,n)||(r[n]=t[n]))}return r}var bp=["anchor","focus"];function Ml(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Np(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ml(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ml(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var N={edges(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=e,{anchor:n,focus:o}=t;return N.isBackward(t)===r?[n,o]:[o,n]},end(t){var[,e]=N.edges(t);return e},equals(t,e){return me.equals(t.anchor,e.anchor)&&me.equals(t.focus,e.focus)},includes(t,e){if(N.isRange(e)){if(N.includes(t,e.anchor)||N.includes(t,e.focus))return!0;var[r,n]=N.edges(t),[o,a]=N.edges(e);return me.isBefore(r,o)&&me.isAfter(n,a)}var[s,i]=N.edges(t),l=!1,c=!1;return me.isPoint(e)?(l=me.compare(e,s)>=0,c=me.compare(e,i)<=0):(l=B.compare(e,s.path)>=0,c=B.compare(e,i.path)<=0),l&&c},intersection(t,e){var r=vr(t,bp),[n,o]=N.edges(t),[a,s]=N.edges(e),i=me.isBefore(n,a)?a:n,l=me.isBefore(o,s)?o:s;return me.isBefore(l,i)?null:Np({anchor:i,focus:l},r)},isBackward(t){var{anchor:e,focus:r}=t;return me.isAfter(e,r)},isCollapsed(t){var{anchor:e,focus:r}=t;return me.equals(e,r)},isExpanded(t){return!N.isCollapsed(t)},isForward(t){return!N.isBackward(t)},isRange(t){return tt(t)&&me.isPoint(t.anchor)&&me.isPoint(t.focus)},*points(t){yield[t.anchor,"anchor"],yield[t.focus,"focus"]},start(t){var[e]=N.edges(t);return e},transform(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return wo(t,n=>{if(n===null)return null;var{affinity:o="inward"}=r,a,s;if(o==="inward"){var i=N.isCollapsed(n);N.isForward(n)?(a="forward",s=i?a:"backward"):(a="backward",s=i?a:"forward")}else o==="outward"?N.isForward(n)?(a="backward",s="forward"):(a="forward",s="backward"):(a=o,s=o);var l=me.transform(n.anchor,e,{affinity:a}),c=me.transform(n.focus,e,{affinity:s});if(!l||!c)return null;n.anchor=l,n.focus=c})}},Rl=t=>tt(t)&&V.isNodeList(t.children)&&!d.isEditor(t),Z={isAncestor(t){return tt(t)&&V.isNodeList(t.children)},isElement:Rl,isElementList(t){return Array.isArray(t)&&t.every(e=>Z.isElement(e))},isElementProps(t){return t.children!==void 0},isElementType:function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return Rl(e)&&e[n]===r},matches(t,e){for(var r in e)if(r!=="children"&&t[r]!==e[r])return!1;return!0}},Op=["children"],Ip=["text"],jl=new WeakMap,V={ancestor(t,e){var r=V.get(t,e);if(Q.isText(r))throw new Error("Cannot get the ancestor node at path [".concat(e,"] because it refers to a text node instead: ").concat(rt.stringify(r)));return r},*ancestors(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(var n of B.ancestors(e,r)){var o=V.ancestor(t,n),a=[o,n];yield a}},child(t,e){if(Q.isText(t))throw new Error("Cannot get the child of a text node: ".concat(rt.stringify(t)));var r=t.children[e];if(r==null)throw new Error("Cannot get child at index `".concat(e,"` in node: ").concat(rt.stringify(t)));return r},*children(t,e){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{reverse:n=!1}=r,o=V.ancestor(t,e),{children:a}=o,s=n?a.length-1:0;n?s>=0:s<a.length;){var i=V.child(o,s),l=e.concat(s);yield[i,l],s=n?s-1:s+1}},common(t,e,r){var n=B.common(e,r),o=V.get(t,n);return[o,n]},descendant(t,e){var r=V.get(t,e);if(d.isEditor(r))throw new Error("Cannot get the descendant node at path [".concat(e,"] because it refers to the root editor node instead: ").concat(rt.stringify(r)));return r},*descendants(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[r,n]of V.nodes(t,e))n.length!==0&&(yield[r,n])},*elements(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[r,n]of V.nodes(t,e))Z.isElement(r)&&(yield[r,n])},extractProps(t){if(Z.isAncestor(t)){var e=vr(t,Op);return e}else{var e=vr(t,Ip);return e}},first(t,e){for(var r=e.slice(),n=V.get(t,r);n&&!(Q.isText(n)||n.children.length===0);)n=n.children[0],r.push(0);return[n,r]},fragment(t,e){if(Q.isText(t))throw new Error("Cannot get a fragment starting from a root text node: ".concat(rt.stringify(t)));var r=wo({children:t.children},n=>{var[o,a]=N.edges(e),s=V.nodes(n,{reverse:!0,pass:p=>{var[,h]=p;return!N.includes(e,h)}});for(var[,i]of s){if(!N.includes(e,i)){var l=V.parent(n,i),c=i[i.length-1];l.children.splice(c,1)}if(B.equals(i,a.path)){var f=V.leaf(n,i);f.text=f.text.slice(0,a.offset)}if(B.equals(i,o.path)){var v=V.leaf(n,i);v.text=v.text.slice(o.offset)}}d.isEditor(n)&&(n.selection=null)});return r.children},get(t,e){for(var r=t,n=0;n<e.length;n++){var o=e[n];if(Q.isText(r)||!r.children[o])throw new Error("Cannot find a descendant at path [".concat(e,"] in node: ").concat(rt.stringify(t)));r=r.children[o]}return r},has(t,e){for(var r=t,n=0;n<e.length;n++){var o=e[n];if(Q.isText(r)||!r.children[o])return!1;r=r.children[o]}return!0},isNode(t){return Q.isText(t)||Z.isElement(t)||d.isEditor(t)},isNodeList(t){if(!Array.isArray(t))return!1;var e=jl.get(t);if(e!==void 0)return e;var r=t.every(n=>V.isNode(n));return jl.set(t,r),r},last(t,e){for(var r=e.slice(),n=V.get(t,r);n&&!(Q.isText(n)||n.children.length===0);){var o=n.children.length-1;n=n.children[o],r.push(o)}return[n,r]},leaf(t,e){var r=V.get(t,e);if(!Q.isText(r))throw new Error("Cannot get the leaf node at path [".concat(e,"] because it refers to a non-leaf node: ").concat(rt.stringify(r)));return r},*levels(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(var n of B.levels(e,r)){var o=V.get(t,n);yield[o,n]}},matches(t,e){return Z.isElement(t)&&Z.isElementProps(e)&&Z.matches(t,e)||Q.isText(t)&&Q.isTextProps(e)&&Q.matches(t,e)},*nodes(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{pass:r,reverse:n=!1}=e,{from:o=[],to:a}=e,s=new Set,i=[],l=t;!(a&&(n?B.isBefore(i,a):B.isAfter(i,a)));){if(s.has(l)||(yield[l,i]),!s.has(l)&&!Q.isText(l)&&l.children.length!==0&&(r==null||r([l,i])===!1)){s.add(l);var c=n?l.children.length-1:0;B.isAncestor(i,o)&&(c=o[i.length]),i=i.concat(c),l=V.get(t,i);continue}if(i.length===0)break;if(!n){var f=B.next(i);if(V.has(t,f)){i=f,l=V.get(t,i);continue}}if(n&&i[i.length-1]!==0){var v=B.previous(i);i=v,l=V.get(t,i);continue}i=B.parent(i),l=V.get(t,i),s.add(l)}},parent(t,e){var r=B.parent(e),n=V.get(t,r);if(Q.isText(n))throw new Error("Cannot get the parent of path [".concat(e,"] because it does not exist in the root."));return n},string(t){return Q.isText(t)?t.text:t.children.map(V.string).join("")},*texts(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[r,n]of V.nodes(t,e))Q.isText(r)&&(yield[r,n])}};function zl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Me(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zl(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var hr={isNodeOperation(t){return hr.isOperation(t)&&t.type.endsWith("_node")},isOperation(t){if(!tt(t))return!1;switch(t.type){case"insert_node":return B.isPath(t.path)&&V.isNode(t.node);case"insert_text":return typeof t.offset=="number"&&typeof t.text=="string"&&B.isPath(t.path);case"merge_node":return typeof t.position=="number"&&B.isPath(t.path)&&tt(t.properties);case"move_node":return B.isPath(t.path)&&B.isPath(t.newPath);case"remove_node":return B.isPath(t.path)&&V.isNode(t.node);case"remove_text":return typeof t.offset=="number"&&typeof t.text=="string"&&B.isPath(t.path);case"set_node":return B.isPath(t.path)&&tt(t.properties)&&tt(t.newProperties);case"set_selection":return t.properties===null&&N.isRange(t.newProperties)||t.newProperties===null&&N.isRange(t.properties)||tt(t.properties)&&tt(t.newProperties);case"split_node":return B.isPath(t.path)&&typeof t.position=="number"&&tt(t.properties);default:return!1}},isOperationList(t){return Array.isArray(t)&&t.every(e=>hr.isOperation(e))},isSelectionOperation(t){return hr.isOperation(t)&&t.type.endsWith("_selection")},isTextOperation(t){return hr.isOperation(t)&&t.type.endsWith("_text")},inverse(t){switch(t.type){case"insert_node":return Me(Me({},t),{},{type:"remove_node"});case"insert_text":return Me(Me({},t),{},{type:"remove_text"});case"merge_node":return Me(Me({},t),{},{type:"split_node",path:B.previous(t.path)});case"move_node":{var{newPath:e,path:r}=t;if(B.equals(e,r))return t;if(B.isSibling(r,e))return Me(Me({},t),{},{path:e,newPath:r});var n=B.transform(r,t),o=B.transform(B.next(r),t);return Me(Me({},t),{},{path:n,newPath:o})}case"remove_node":return Me(Me({},t),{},{type:"insert_node"});case"remove_text":return Me(Me({},t),{},{type:"insert_text"});case"set_node":{var{properties:a,newProperties:s}=t;return Me(Me({},t),{},{properties:s,newProperties:a})}case"set_selection":{var{properties:i,newProperties:l}=t;return i==null?Me(Me({},t),{},{properties:l,newProperties:null}):l==null?Me(Me({},t),{},{properties:null,newProperties:i}):Me(Me({},t),{},{properties:l,newProperties:i})}case"split_node":return Me(Me({},t),{},{type:"merge_node",path:B.next(t.path)})}}},Wl=new WeakMap,Pp=t=>{var e=Wl.get(t);if(e!==void 0)return e;if(!tt(t))return!1;var r=typeof t.addMark=="function"&&typeof t.apply=="function"&&typeof t.deleteFragment=="function"&&typeof t.insertBreak=="function"&&typeof t.insertSoftBreak=="function"&&typeof t.insertFragment=="function"&&typeof t.insertNode=="function"&&typeof t.insertText=="function"&&typeof t.isElementReadOnly=="function"&&typeof t.isInline=="function"&&typeof t.isSelectable=="function"&&typeof t.isVoid=="function"&&typeof t.normalizeNode=="function"&&typeof t.onChange=="function"&&typeof t.removeMark=="function"&&typeof t.getDirtyPaths=="function"&&(t.marks===null||tt(t.marks))&&(t.selection===null||N.isRange(t.selection))&&V.isNodeList(t.children)&&hr.isOperationList(t.operations);return Wl.set(t,r),r},d={above(t,e){return t.above(e)},addMark(t,e,r){t.addMark(e,r)},after(t,e,r){return t.after(e,r)},before(t,e,r){return t.before(e,r)},deleteBackward(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:r="character"}=e;t.deleteBackward(r)},deleteForward(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:r="character"}=e;t.deleteForward(r)},deleteFragment(t,e){t.deleteFragment(e)},edges(t,e){return t.edges(e)},elementReadOnly(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.elementReadOnly(e)},end(t,e){return t.end(e)},first(t,e){return t.first(e)},fragment(t,e){return t.fragment(e)},hasBlocks(t,e){return t.hasBlocks(e)},hasInlines(t,e){return t.hasInlines(e)},hasPath(t,e){return t.hasPath(e)},hasTexts(t,e){return t.hasTexts(e)},insertBreak(t){t.insertBreak()},insertFragment(t,e,r){t.insertFragment(e,r)},insertNode(t,e){t.insertNode(e)},insertSoftBreak(t){t.insertSoftBreak()},insertText(t,e){t.insertText(e)},isBlock(t,e){return t.isBlock(e)},isEdge(t,e,r){return t.isEdge(e,r)},isEditor(t){return Pp(t)},isElementReadOnly(t,e){return t.isElementReadOnly(e)},isEmpty(t,e){return t.isEmpty(e)},isEnd(t,e,r){return t.isEnd(e,r)},isInline(t,e){return t.isInline(e)},isNormalizing(t){return t.isNormalizing()},isSelectable(t,e){return t.isSelectable(e)},isStart(t,e,r){return t.isStart(e,r)},isVoid(t,e){return t.isVoid(e)},last(t,e){return t.last(e)},leaf(t,e,r){return t.leaf(e,r)},levels(t,e){return t.levels(e)},marks(t){return t.getMarks()},next(t,e){return t.next(e)},node(t,e,r){return t.node(e,r)},nodes(t,e){return t.nodes(e)},normalize(t,e){t.normalize(e)},parent(t,e,r){return t.parent(e,r)},path(t,e,r){return t.path(e,r)},pathRef(t,e,r){return t.pathRef(e,r)},pathRefs(t){return t.pathRefs()},point(t,e,r){return t.point(e,r)},pointRef(t,e,r){return t.pointRef(e,r)},pointRefs(t){return t.pointRefs()},positions(t,e){return t.positions(e)},previous(t,e){return t.previous(e)},range(t,e,r){return t.range(e,r)},rangeRef(t,e,r){return t.rangeRef(e,r)},rangeRefs(t){return t.rangeRefs()},removeMark(t,e){t.removeMark(e)},setNormalizing(t,e){t.setNormalizing(e)},start(t,e){return t.start(e)},string(t,e,r){return t.string(e,r)},unhangRange(t,e,r){return t.unhangRange(e,r)},void(t,e){return t.void(e)},withoutNormalizing(t,e){t.withoutNormalizing(e)}};var Lp={isSpan(t){return Array.isArray(t)&&t.length===2&&t.every(B.isPath)}};function Ul(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Hl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ul(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ul(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var me={compare(t,e){var r=B.compare(t.path,e.path);return r===0?t.offset<e.offset?-1:t.offset>e.offset?1:0:r},isAfter(t,e){return me.compare(t,e)===1},isBefore(t,e){return me.compare(t,e)===-1},equals(t,e){return t.offset===e.offset&&B.equals(t.path,e.path)},isPoint(t){return tt(t)&&typeof t.offset=="number"&&B.isPath(t.path)},transform(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return wo(t,n=>{if(n===null)return null;var{affinity:o="forward"}=r,{path:a,offset:s}=n;switch(e.type){case"insert_node":case"move_node":{n.path=B.transform(a,e,r);break}case"insert_text":{B.equals(e.path,a)&&(e.offset<s||e.offset===s&&o==="forward")&&(n.offset+=e.text.length);break}case"merge_node":{B.equals(e.path,a)&&(n.offset+=e.position),n.path=B.transform(a,e,r);break}case"remove_text":{B.equals(e.path,a)&&e.offset<=s&&(n.offset-=Math.min(s-e.offset,e.text.length));break}case"remove_node":{if(B.equals(e.path,a)||B.isAncestor(e.path,a))return null;n.path=B.transform(a,e,r);break}case"split_node":{if(B.equals(e.path,a)){if(e.position===s&&o==null)return null;(e.position<s||e.position===s&&o==="forward")&&(n.offset-=e.position,n.path=B.transform(a,e,Hl(Hl({},r),{},{affinity:"forward"})))}else n.path=B.transform(a,e,r);break}}})}},Gl=void 0,rt={setScrubber(t){Gl=t},stringify(t){return JSON.stringify(t,Gl)}},kp=["text"],Mp=["anchor","focus"];function Yl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function pr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Yl(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Q={equals(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:n=!1}=r;function o(a){var s=vr(a,kp);return s}return fc(n?o(t):t,n?o(e):e)},isText(t){return tt(t)&&typeof t.text=="string"},isTextList(t){return Array.isArray(t)&&t.every(e=>Q.isText(e))},isTextProps(t){return t.text!==void 0},matches(t,e){for(var r in e)if(r!=="text"&&(!t.hasOwnProperty(r)||t[r]!==e[r]))return!1;return!0},decorations(t,e){var r=[pr({},t)];for(var n of e){var o=vr(n,Mp),[a,s]=N.edges(n),i=[],l=0,c=a.offset,f=s.offset;for(var v of r){var{length:p}=v.text,h=l;if(l+=p,c<=h&&l<=f){Object.assign(v,o),i.push(v);continue}if(c!==f&&(c===l||f===h)||c>l||f<h||f===h&&h!==0){i.push(v);continue}var m=v,u=void 0,C=void 0;if(f<l){var A=f-h;C=pr(pr({},m),{},{text:m.text.slice(A)}),m=pr(pr({},m),{},{text:m.text.slice(0,A)})}if(c>h){var E=c-h;u=pr(pr({},m),{},{text:m.text.slice(0,E)}),m=pr(pr({},m),{},{text:m.text.slice(E)})}Object.assign(m,o),u&&i.push(u),i.push(m),C&&i.push(C)}r=i}return r}},is=t=>t.selection?t.selection:t.children.length>0?d.end(t,[]):[0],An=(t,e)=>{var[r]=d.node(t,e);return n=>n===r},us=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=!r,o=r?Hp(e):e,a=ie.None,s=ie.None,i=0,l=null,c=null;for(var f of o){var v=f.codePointAt(0);if(!v)break;var p=th(f,v);if([a,s]=n?[s,p]:[p,a],En(a,ie.ZWJ)&&En(s,ie.ExtPict)&&(n?l=ql(e.substring(0,i)):l=ql(e.substring(0,e.length-i)),!l)||En(a,ie.RI)&&En(s,ie.RI)&&(c!==null?c=!c:n?c=!0:c=sh(e.substring(0,e.length-i)),!c)||a!==ie.None&&s!==ie.None&&nh(a,s))break;i+=f.length}return i||1},Rp=/\s/,jp=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,zp=/['\u2018\u2019]/,Wp=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=0,o=!1;e.length>0;){var a=us(e,r),[s,i]=ls(e,a,r);if(Up(s,i,r))o=!0,n+=a;else if(!o)n+=a;else break;e=i}return n},ls=(t,e,r)=>{if(r){var n=t.length-e;return[t.slice(n,t.length),t.slice(0,n)]}return[t.slice(0,e),t.slice(e)]},Up=function t(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(Rp.test(e))return!1;if(zp.test(e)){var o=us(r,n),[a,s]=ls(r,o,n);if(t(a,s,n))return!0}return!jp.test(e)},Hp=function*(e){for(var r=e.length-1,n=0;n<e.length;n++){var o=e.charAt(r-n);if(Yp(o.charCodeAt(0))){var a=e.charAt(r-n-1);if(Gp(a.charCodeAt(0))){yield a+o,n++;continue}}yield o}},Gp=t=>t>=55296&&t<=56319,Yp=t=>t>=56320&&t<=57343,ie;(function(t){t[t.None=0]="None",t[t.Extend=1]="Extend",t[t.ZWJ=2]="ZWJ",t[t.RI=4]="RI",t[t.Prepend=8]="Prepend",t[t.SpacingMark=16]="SpacingMark",t[t.L=32]="L",t[t.V=64]="V",t[t.T=128]="T",t[t.LV=256]="LV",t[t.LVT=512]="LVT",t[t.ExtPict=1024]="ExtPict",t[t.Any=2048]="Any"})(ie||(ie={}));var qp=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,$p=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,Vp=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,Kp=/^[\u1100-\u115F\uA960-\uA97C]$/,Zp=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,Xp=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,Jp=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,Qp=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,eh=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,th=(t,e)=>{var r=ie.Any;return t.search(qp)!==-1&&(r|=ie.Extend),e===8205&&(r|=ie.ZWJ),e>=127462&&e<=127487&&(r|=ie.RI),t.search($p)!==-1&&(r|=ie.Prepend),t.search(Vp)!==-1&&(r|=ie.SpacingMark),t.search(Kp)!==-1&&(r|=ie.L),t.search(Zp)!==-1&&(r|=ie.V),t.search(Xp)!==-1&&(r|=ie.T),t.search(Jp)!==-1&&(r|=ie.LV),t.search(Qp)!==-1&&(r|=ie.LVT),t.search(eh)!==-1&&(r|=ie.ExtPict),r};function En(t,e){return(t&e)!==0}var rh=[[ie.L,ie.L|ie.V|ie.LV|ie.LVT],[ie.LV|ie.V,ie.V|ie.T],[ie.LVT|ie.T,ie.T],[ie.Any,ie.Extend|ie.ZWJ],[ie.Any,ie.SpacingMark],[ie.Prepend,ie.Any],[ie.ZWJ,ie.ExtPict],[ie.RI,ie.RI]];function nh(t,e){return rh.findIndex(r=>En(t,r[0])&&En(e,r[1]))===-1}var oh=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,ql=t=>t.search(oh)!==-1,ah=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,sh=t=>{var e=t.match(ah);if(e===null)return!1;var r=e[0].length/2;return r%2===1},ih={delete(t,e){t.delete(e)},insertFragment(t,e,r){t.insertFragment(e,r)},insertText(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};d.withoutNormalizing(t,()=>{var{voids:n=!1}=r,{at:o=is(t)}=r;if(B.isPath(o)&&(o=d.range(t,o)),N.isRange(o))if(N.isCollapsed(o))o=o.anchor;else{var a=N.end(o);if(!n&&d.void(t,{at:a}))return;var s=N.start(o),i=d.pointRef(t,s),l=d.pointRef(t,a);z.delete(t,{at:o,voids:n});var c=i.unref(),f=l.unref();o=c||f,z.setSelection(t,{anchor:o,focus:o})}if(!(!n&&d.void(t,{at:o})||d.elementReadOnly(t,{at:o}))){var{path:v,offset:p}=o;e.length>0&&t.apply({type:"insert_text",path:v,offset:p,text:e})}})}};function $l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Qo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$l(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$l(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var z=Qo(Qo(Qo(Qo({},yp),Tp),_p),ih),uh=(t,e)=>{for(var r of d.pathRefs(t))Bp.transform(r,e);for(var n of d.pointRefs(t))xp.transform(n,e);for(var o of d.rangeRefs(t))wp.transform(o,e);var a=ea.get(t)||[],s=ta.get(t)||new Set,i,l,c=m=>{if(m){var u=m.join(",");l.has(u)||(l.add(u),i.push(m))}};if(B.operationCanTransformPath(e)){i=[],l=new Set;for(var f of a){var v=B.transform(f,e);c(v)}}else i=a,l=s;var p=t.getDirtyPaths(e);for(var h of p)c(h);ea.set(t,i),ta.set(t,l),z.transform(t,e),t.operations.push(e),d.normalize(t,{operation:e}),e.type==="set_selection"&&(t.marks=null),Jn.get(t)||(Jn.set(t,!0),Promise.resolve().then(()=>{Jn.set(t,!1),t.onChange({operation:e}),t.operations=[]}))},lh=(t,e)=>{switch(e.type){case"insert_text":case"remove_text":case"set_node":{var{path:r}=e;return B.levels(r)}case"insert_node":{var{node:n,path:o}=e,a=B.levels(o),s=Q.isText(n)?[]:Array.from(V.nodes(n),U=>{var[,G]=U;return o.concat(G)});return[...a,...s]}case"merge_node":{var{path:i}=e,l=B.ancestors(i),c=B.previous(i);return[...l,c]}case"move_node":{var{path:f,newPath:v}=e;if(B.equals(f,v))return[];var p=[],h=[];for(var m of B.ancestors(f)){var u=B.transform(m,e);p.push(u)}for(var C of B.ancestors(v)){var A=B.transform(C,e);h.push(A)}var E=h[h.length-1],w=v[v.length-1],F=E.concat(w);return[...p,...h,F]}case"remove_node":{var{path:S}=e,M=B.ancestors(S);return[...M]}case"split_node":{var{path:P}=e,L=B.levels(P),O=B.next(P);return[...L,O]}default:return[]}},ch=t=>{var{selection:e}=t;return e?V.fragment(t,e):[]},fh=(t,e)=>{var[r,n]=e;if(!Q.isText(r)){if(Z.isElement(r)&&r.children.length===0){var o={text:""};z.insertNodes(t,o,{at:n.concat(0),voids:!0});return}for(var a=d.isEditor(r)?!1:Z.isElement(r)&&(t.isInline(r)||r.children.length===0||Q.isText(r.children[0])||t.isInline(r.children[0])),s=0,i=0;i<r.children.length;i++,s++){var l=V.get(t,n);if(!Q.isText(l)){var c=l.children[s],f=l.children[s-1],v=i===r.children.length-1,p=Q.isText(c)||Z.isElement(c)&&t.isInline(c);if(p!==a)z.removeNodes(t,{at:n.concat(s),voids:!0}),s--;else if(Z.isElement(c)){if(t.isInline(c)){if(f==null||!Q.isText(f)){var h={text:""};z.insertNodes(t,h,{at:n.concat(s),voids:!0}),s++}else if(v){var m={text:""};z.insertNodes(t,m,{at:n.concat(s+1),voids:!0}),s++}}}else f!=null&&Q.isText(f)&&(Q.equals(c,f,{loose:!0})?(z.mergeNodes(t,{at:n.concat(s),voids:!0}),s--):f.text===""?(z.removeNodes(t,{at:n.concat(s-1),voids:!0}),s--):c.text===""&&(z.removeNodes(t,{at:n.concat(s),voids:!0}),s--))}}}},dh=(t,e)=>{var{iteration:r,initialDirtyPathsLength:n}=e,o=n*42;if(r>o)throw new Error("Could not completely normalize the editor after ".concat(o," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},mh=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:n=!1,mode:o="lowest",at:a=e.selection,match:s}=r;if(!!a){var i=d.path(e,a),l=o==="lowest";for(var[c,f]of d.levels(e,{at:i,voids:n,match:s,reverse:l}))if(!Q.isText(c)){if(N.isRange(a)){if(B.isAncestor(f,a.anchor.path)&&B.isAncestor(f,a.focus.path))return[c,f]}else if(!B.equals(i,f))return[c,f]}}};function Vl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Kl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Vl(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var ph=(t,e,r)=>{var{selection:n}=t;if(n){var o=(v,p)=>{if(!Q.isText(v))return!1;var[h,m]=d.parent(t,p);return!t.isVoid(h)||t.markableVoid(h)},a=N.isExpanded(n),s=!1;if(!a){var[i,l]=d.node(t,n);if(i&&o(i,l)){var[c]=d.parent(t,l);s=c&&t.markableVoid(c)}}if(a||s)z.setNodes(t,{[e]:r},{match:o,split:!0,voids:!0});else{var f=Kl(Kl({},d.marks(t)||{}),{},{[e]:r});t.marks=f,Jn.get(t)||t.onChange()}}};function Zl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Xl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Zl(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var hh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=d.point(e,r,{edge:"end"}),a=d.end(e,[]),s={anchor:o,focus:a},{distance:i=1}=n,l=0,c;for(var f of d.positions(e,Xl(Xl({},n),{},{at:s}))){if(l>i)break;l!==0&&(c=f),l++}return c};function Jl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Ql(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Jl(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var vh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=d.start(e,[]),a=d.point(e,r,{edge:"start"}),s={anchor:o,focus:a},{distance:i=1}=n,l=0,c;for(var f of d.positions(e,Ql(Ql({},n),{},{at:s,reverse:!0}))){if(l>i)break;l!==0&&(c=f),l++}return c},gh=(t,e)=>{var{selection:r}=t;r&&N.isCollapsed(r)&&z.delete(t,{unit:e,reverse:!0})},Dh=(t,e)=>{var{selection:r}=t;r&&N.isCollapsed(r)&&z.delete(t,{unit:e})},Ch=function(e){var{direction:r="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:n}=e;n&&N.isExpanded(n)&&z.delete(e,{reverse:r==="backward"})},Eh=(t,e)=>[d.start(t,e),d.end(t,e)];function ec(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function tc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ec(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ec(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Ah=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return d.above(e,tc(tc({},r),{},{match:n=>Z.isElement(n)&&d.isElementReadOnly(e,n)}))},Bh=(t,e)=>d.point(t,e,{edge:"end"}),xh=(t,e)=>{var r=d.path(t,e,{edge:"start"});return d.node(t,r)},wh=(t,e)=>{var r=d.range(t,e);return V.fragment(t,r)};function rc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function nc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rc(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Fh=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return d.above(e,nc(nc({},r),{},{match:n=>Z.isElement(n)&&d.isVoid(e,n)}))},yh=(t,e)=>e.children.some(r=>Z.isElement(r)&&d.isBlock(t,r)),Th=(t,e)=>e.children.some(r=>Q.isText(r)||d.isInline(t,r)),_h=(t,e)=>V.has(t,e),Sh=(t,e)=>e.children.every(r=>Q.isText(r)),bh=t=>{z.splitNodes(t,{always:!0})},Nh=(t,e,r)=>{z.insertNodes(t,e,r)},Oh=t=>{z.splitNodes(t,{always:!0})};function oc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Ih(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oc(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Ph=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:o,marks:a}=e;if(o){if(a){var s=Ih({text:r},a);z.insertNodes(e,s,{at:n.at,voids:n.voids})}else z.insertText(e,r,n);e.marks=null}},Lh=(t,e)=>!t.isInline(e),kh=(t,e,r)=>d.isStart(t,e,r)||d.isEnd(t,e,r),Mh=(t,e)=>{var{children:r}=e,[n]=r;return r.length===0||r.length===1&&Q.isText(n)&&n.text===""&&!t.isVoid(e)},Rh=(t,e,r)=>{var n=d.end(t,r);return me.equals(e,n)},jh=t=>{var e=cc.get(t);return e===void 0?!0:e},zh=(t,e,r)=>{if(e.offset!==0)return!1;var n=d.start(t,r);return me.equals(e,n)},Wh=(t,e)=>{var r=d.path(t,e,{edge:"end"});return d.node(t,r)},Uh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=d.path(e,r,n),a=V.leaf(e,o);return[a,o]};function*Hh(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:r=t.selection,reverse:n=!1,voids:o=!1}=e,{match:a}=e;if(a==null&&(a=()=>!0),!!r){var s=[],i=d.path(t,r);for(var[l,c]of V.levels(t,i))if(!!a(l,c)&&(s.push([l,c]),!o&&Z.isElement(l)&&d.isVoid(t,l)))break;n&&s.reverse(),yield*s}}var Gh=["text"],Yh=["text"],qh=function(e){var{marks:r,selection:n}=e;if(!n)return null;if(r)return r;if(N.isExpanded(n)){var[o]=d.nodes(e,{match:Q.isText});if(o){var[a]=o,s=vr(a,Gh);return s}else return{}}var{anchor:i}=n,{path:l}=i,[c]=d.leaf(e,l);if(i.offset===0){var f=d.previous(e,{at:l,match:Q.isText}),v=d.above(e,{match:A=>Z.isElement(A)&&d.isVoid(e,A)&&e.markableVoid(A)});if(!v){var p=d.above(e,{match:A=>Z.isElement(A)&&d.isBlock(e,A)});if(f&&p){var[h,m]=f,[,u]=p;B.isAncestor(u,m)&&(c=h)}}}var C=vr(c,Yh);return C},$h=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:n="lowest",voids:o=!1}=r,{match:a,at:s=e.selection}=r;if(!!s){var i=d.after(e,s,{voids:o});if(!!i){var[,l]=d.last(e,[]),c=[i.path,l];if(B.isPath(s)&&s.length===0)throw new Error("Cannot get the next node from the root node!");if(a==null)if(B.isPath(s)){var[f]=d.parent(e,s);a=p=>f.children.includes(p)}else a=()=>!0;var[v]=d.nodes(e,{at:c,match:a,mode:n,voids:o});return v}}},Vh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=d.path(e,r,n),a=V.get(e,o);return[a,o]};function*Kh(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:r=t.selection,mode:n="all",universal:o=!1,reverse:a=!1,voids:s=!1,ignoreNonSelectable:i=!1}=e,{match:l}=e;if(l||(l=()=>!0),!!r){var c,f;if(Lp.isSpan(r))c=r[0],f=r[1];else{var v=d.path(t,r,{edge:"start"}),p=d.path(t,r,{edge:"end"});c=a?p:v,f=a?v:p}var h=V.nodes(t,{reverse:a,from:c,to:f,pass:F=>{var[S]=F;return Z.isElement(S)?!!(!s&&(d.isVoid(t,S)||d.isElementReadOnly(t,S))||i&&!d.isSelectable(t,S)):!1}}),m=[],u;for(var[C,A]of h)if(!(i&&Z.isElement(C)&&!d.isSelectable(t,C))){var E=u&&B.compare(A,u[1])===0;if(!(n==="highest"&&E)){if(!l(C,A)){if(o&&!E&&Q.isText(C))return;continue}if(n==="lowest"&&E){u=[C,A];continue}var w=n==="lowest"?u:[C,A];w&&(o?m.push(w):yield w),u=[C,A]}}n==="lowest"&&u&&(o?m.push(u):yield u),o&&(yield*m)}}var Zh=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:n=!1,operation:o}=r,a=f=>ea.get(f)||[],s=f=>ta.get(f)||new Set,i=f=>{var v=a(f).pop(),p=v.join(",");return s(f).delete(p),v};if(!!d.isNormalizing(e)){if(n){var l=Array.from(V.nodes(e),f=>{var[,v]=f;return v}),c=new Set(l.map(f=>f.join(",")));ea.set(e,l),ta.set(e,c)}a(e).length!==0&&d.withoutNormalizing(e,()=>{for(var f of a(e))if(V.has(e,f)){var v=d.node(e,f),[p,h]=v;Z.isElement(p)&&p.children.length===0&&e.normalizeNode(v,{operation:o})}for(var m=a(e),u=m.length,C=0;m.length!==0;){if(!e.shouldNormalize({dirtyPaths:m,iteration:C,initialDirtyPathsLength:u,operation:o}))return;var A=i(e);if(V.has(e,A)){var E=d.node(e,A);e.normalizeNode(E,{operation:o})}C++,m=a(e)}})}},Xh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=d.path(e,r,n),a=B.parent(o),s=d.node(e,a);return s},Jh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=n,a={current:r,affinity:o,unref(){var{current:i}=a,l=d.pathRefs(e);return l.delete(a),a.current=null,i}},s=d.pathRefs(e);return s.add(a),a},Qh=t=>{var e=Il.get(t);return e||(e=new Set,Il.set(t,e)),e},ev=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:o,edge:a}=n;if(B.isPath(r)){if(a==="start"){var[,s]=V.first(e,r);r=s}else if(a==="end"){var[,i]=V.last(e,r);r=i}}return N.isRange(r)&&(a==="start"?r=N.start(r):a==="end"?r=N.end(r):r=B.common(r.anchor.path,r.focus.path)),me.isPoint(r)&&(r=r.path),o!=null&&(r=r.slice(0,o)),r},tv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=n,a={current:r,affinity:o,unref(){var{current:i}=a,l=d.pointRefs(e);return l.delete(a),a.current=null,i}},s=d.pointRefs(e);return s.add(a),a},rv=t=>{var e=Pl.get(t);return e||(e=new Set,Pl.set(t,e)),e},nv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:o="start"}=n;if(B.isPath(r)){var a;if(o==="end"){var[,s]=V.last(e,r);a=s}else{var[,i]=V.first(e,r);a=i}var l=V.get(e,a);if(!Q.isText(l))throw new Error("Cannot get the ".concat(o," point in the node at path [").concat(r,"] because it has no ").concat(o," text node."));return{path:a,offset:o==="end"?l.text.length:0}}if(N.isRange(r)){var[c,f]=N.edges(r);return o==="start"?c:f}return r};function*ov(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:r=t.selection,unit:n="offset",reverse:o=!1,voids:a=!1,ignoreNonSelectable:s=!1}=e;if(!r)return;var i=d.range(t,r),[l,c]=N.edges(i),f=o?c:l,v=!1,p="",h=0,m=0,u=0;for(var[C,A]of d.nodes(t,{at:r,reverse:o,voids:a,ignoreNonSelectable:s})){if(Z.isElement(C)){if(!a&&(t.isVoid(C)||t.isElementReadOnly(C))){yield d.start(t,A);continue}if(t.isInline(C))continue;if(d.hasInlines(t,C)){var E=B.isAncestor(A,c.path)?c:d.end(t,A),w=B.isAncestor(A,l.path)?l:d.start(t,A);p=d.string(t,{anchor:w,focus:E},{voids:a}),v=!0}}if(Q.isText(C)){var F=B.equals(A,f.path);for(F?(m=o?f.offset:C.text.length-f.offset,u=f.offset):(m=C.text.length,u=o?m:0),(F||v||n==="offset")&&(yield{path:A,offset:u},v=!1);;){if(h===0){if(p==="")break;h=S(p,n,o),p=ls(p,h,o)[1]}if(u=o?u-h:u+h,m=m-h,m<0){h=-m;break}h=0,yield{path:A,offset:u}}}}function S(M,P,L){return P==="character"?us(M,L):P==="word"?Wp(M,L):P==="line"||P==="block"?M.length:1}}var av=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:n="lowest",voids:o=!1}=r,{match:a,at:s=e.selection}=r;if(!!s){var i=d.before(e,s,{voids:o});if(!!i){var[,l]=d.first(e,[]),c=[i.path,l];if(B.isPath(s)&&s.length===0)throw new Error("Cannot get the previous node from the root node!");if(a==null)if(B.isPath(s)){var[f]=d.parent(e,s);a=p=>f.children.includes(p)}else a=()=>!0;var[v]=d.nodes(e,{reverse:!0,at:c,match:a,mode:n,voids:o});return v}}},sv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=n,a={current:r,affinity:o,unref(){var{current:i}=a,l=d.rangeRefs(e);return l.delete(a),a.current=null,i}},s=d.rangeRefs(e);return s.add(a),a},iv=t=>{var e=Ll.get(t);return e||(e=new Set,Ll.set(t,e)),e},uv=(t,e,r)=>{if(N.isRange(e)&&!r)return e;var n=d.start(t,e),o=d.end(t,r||e);return{anchor:n,focus:o}};function ac(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function lv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ac(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ac(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var cv=(t,e)=>{var{selection:r}=t;if(r){var n=(f,v)=>{if(!Q.isText(f))return!1;var[p,h]=d.parent(t,v);return!t.isVoid(p)||t.markableVoid(p)},o=N.isExpanded(r),a=!1;if(!o){var[s,i]=d.node(t,r);if(s&&n(s,i)){var[l]=d.parent(t,i);a=l&&t.markableVoid(l)}}if(o||a)z.unsetNodes(t,e,{match:n,split:!0,voids:!0});else{var c=lv({},d.marks(t)||{});delete c[e],t.marks=c,Jn.get(t)||t.onChange()}}},fv=(t,e)=>{cc.set(t,e)},dv=(t,e)=>d.point(t,e,{edge:"start"}),mv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:o=!1}=n,a=d.range(e,r),[s,i]=N.edges(a),l="";for(var[c,f]of d.nodes(e,{at:a,match:Q.isText,voids:o})){var v=c.text;B.equals(f,i.path)&&(v=v.slice(0,i.offset)),B.equals(f,s.path)&&(v=v.slice(s.offset)),l+=v}return l},pv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:o=!1}=n,[a,s]=N.edges(r);if(a.offset!==0||s.offset!==0||N.isCollapsed(r)||B.hasPrevious(s.path))return r;var i=d.above(e,{at:s,match:m=>Z.isElement(m)&&d.isBlock(e,m),voids:o}),l=i?i[1]:[],c=d.start(e,a),f={anchor:c,focus:s},v=!0;for(var[p,h]of d.nodes(e,{at:f,match:Q.isText,reverse:!0,voids:o})){if(v){v=!1;continue}if(p.text!==""||B.isBefore(h,l)){s={path:h,offset:p.text.length};break}}return{anchor:a,focus:s}},hv=(t,e)=>{var r=d.isNormalizing(t);d.setNormalizing(t,!1);try{e()}finally{d.setNormalizing(t,r)}d.normalize(t)},vv=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.withoutNormalizing(e,()=>{var n,o,{reverse:a=!1,unit:s="character",distance:i=1,voids:l=!1}=r,{at:c=e.selection,hanging:f=!1}=r;if(!!c){var v=!1;if(N.isRange(c)&&N.isCollapsed(c)&&(v=!0,c=c.anchor),me.isPoint(c)){var p=d.void(e,{at:c,mode:"highest"});if(!l&&p){var[,h]=p;c=h}else{var m={unit:s,distance:i},u=a?d.before(e,c,m)||d.start(e,[]):d.after(e,c,m)||d.end(e,[]);c={anchor:c,focus:u},f=!0}}if(B.isPath(c)){z.removeNodes(e,{at:c,voids:l});return}if(!N.isCollapsed(c)){if(!f){var[,C]=N.edges(c),A=d.end(e,[]);me.equals(C,A)||(c=d.unhangRange(e,c,{voids:l}))}var[E,w]=N.edges(c),F=d.above(e,{match:Be=>Z.isElement(Be)&&d.isBlock(e,Be),at:E,voids:l}),S=d.above(e,{match:Be=>Z.isElement(Be)&&d.isBlock(e,Be),at:w,voids:l}),M=F&&S&&!B.equals(F[1],S[1]),P=B.equals(E.path,w.path),L=l?null:(n=d.void(e,{at:E,mode:"highest"}))!==null&&n!==void 0?n:d.elementReadOnly(e,{at:E,mode:"highest"}),O=l?null:(o=d.void(e,{at:w,mode:"highest"}))!==null&&o!==void 0?o:d.elementReadOnly(e,{at:w,mode:"highest"});if(L){var U=d.before(e,E);U&&F&&B.isAncestor(F[1],U.path)&&(E=U)}if(O){var G=d.after(e,w);G&&S&&B.isAncestor(S[1],G.path)&&(w=G)}var k=[],Y;for(var W of d.nodes(e,{at:c,voids:l})){var[$,ne]=W;Y&&B.compare(ne,Y)===0||(!l&&Z.isElement($)&&(d.isVoid(e,$)||d.isElementReadOnly(e,$))||!B.isCommon(ne,E.path)&&!B.isCommon(ne,w.path))&&(k.push(W),Y=ne)}var fe=Array.from(k,Be=>{var[,Xe]=Be;return d.pathRef(e,Xe)}),ge=d.pointRef(e,E),X=d.pointRef(e,w),ue="";if(!P&&!L){var Se=ge.current,[Ee]=d.leaf(e,Se),{path:Ze}=Se,{offset:x}=E,q=Ee.text.slice(x);q.length>0&&(e.apply({type:"remove_text",path:Ze,offset:x,text:q}),ue=q)}if(fe.reverse().map(Be=>Be.unref()).filter(Be=>Be!==null).forEach(Be=>z.removeNodes(e,{at:Be,voids:l})),!O){var j=X.current,[K]=d.leaf(e,j),{path:ce}=j,oe=P?E.offset:0,ve=K.text.slice(oe,w.offset);ve.length>0&&(e.apply({type:"remove_text",path:ce,offset:oe,text:ve}),ue=ve)}!P&&M&&X.current&&ge.current&&z.mergeNodes(e,{at:X.current,hanging:!0,voids:l}),v&&a&&s==="character"&&ue.length>1&&ue.match(/[\u0E00-\u0E7F]+/)&&z.insertText(e,ue.slice(0,ue.length-i));var _e=ge.unref(),be=X.unref(),Pe=a?_e||be:be||_e;r.at==null&&Pe&&z.select(e,Pe)}}})},gv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};d.withoutNormalizing(e,()=>{var{hanging:o=!1,voids:a=!1}=n,{at:s=is(e)}=n;if(!!r.length){if(N.isRange(s))if(o||(s=d.unhangRange(e,s,{voids:a})),N.isCollapsed(s))s=s.anchor;else{var[,i]=N.edges(s);if(!a&&d.void(e,{at:i}))return;var l=d.pointRef(e,i);z.delete(e,{at:s}),s=l.unref()}else B.isPath(s)&&(s=d.start(e,s));if(!(!a&&d.void(e,{at:s}))){var c=d.above(e,{at:s,match:x=>Z.isElement(x)&&d.isInline(e,x),mode:"highest",voids:a});if(c){var[,f]=c;if(d.isEnd(e,s,f)){var v=d.after(e,f);s=v}else if(d.isStart(e,s,f)){var p=d.before(e,f);s=p}}var h=d.above(e,{match:x=>Z.isElement(x)&&d.isBlock(e,x),at:s,voids:a}),[,m]=h,u=d.isStart(e,s,m),C=d.isEnd(e,s,m),A=u&&C,E=!u||u&&C,w=!C,[,F]=V.first({children:r},[]),[,S]=V.last({children:r},[]),M=[],P=x=>{var[q,j]=x,K=j.length===0;return K?!1:A?!0:!(E&&B.isAncestor(j,F)&&Z.isElement(q)&&!e.isVoid(q)&&!e.isInline(q)||w&&B.isAncestor(j,S)&&Z.isElement(q)&&!e.isVoid(q)&&!e.isInline(q))};for(var L of V.nodes({children:r},{pass:P}))P(L)&&M.push(L);var O=[],U=[],G=[],k=!0,Y=!1;for(var[W]of M)Z.isElement(W)&&!e.isInline(W)?(k=!1,Y=!0,U.push(W)):k?O.push(W):G.push(W);var[$]=d.nodes(e,{at:s,match:x=>Q.isText(x)||d.isInline(e,x),mode:"highest",voids:a}),[,ne]=$,fe=d.isStart(e,s,ne),ge=d.isEnd(e,s,ne),X=d.pathRef(e,C&&!G.length?B.next(m):m),ue=d.pathRef(e,ge?B.next(ne):ne);z.splitNodes(e,{at:s,match:x=>Y?Z.isElement(x)&&d.isBlock(e,x):Q.isText(x)||d.isInline(e,x),mode:Y?"lowest":"highest",always:Y&&(!u||O.length>0)&&(!C||G.length>0),voids:a});var Se=d.pathRef(e,!fe||fe&&ge?B.next(ne):ne);if(z.insertNodes(e,O,{at:Se.current,match:x=>Q.isText(x)||d.isInline(e,x),mode:"highest",voids:a}),A&&!O.length&&U.length&&!G.length&&z.delete(e,{at:m,voids:a}),z.insertNodes(e,U,{at:X.current,match:x=>Z.isElement(x)&&d.isBlock(e,x),mode:"lowest",voids:a}),z.insertNodes(e,G,{at:ue.current,match:x=>Q.isText(x)||d.isInline(e,x),mode:"highest",voids:a}),!n.at){var Ee;if(G.length>0&&ue.current?Ee=B.previous(ue.current):U.length>0&&X.current?Ee=B.previous(X.current):Se.current&&(Ee=B.previous(Se.current)),Ee){var Ze=d.end(e,Ee);z.select(e,Ze)}}Se.unref(),X.unref(),ue.unref()}}})},Dv=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:n="anchor"}=r,{selection:o}=e;if(o){if(n==="anchor")z.select(e,o.anchor);else if(n==="focus")z.select(e,o.focus);else if(n==="start"){var[a]=N.edges(o);z.select(e,a)}else if(n==="end"){var[,s]=N.edges(o);z.select(e,s)}}else return},Cv=t=>{var{selection:e}=t;e&&t.apply({type:"set_selection",properties:e,newProperties:null})},Ev=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:n}=e,{distance:o=1,unit:a="character",reverse:s=!1}=r,{edge:i=null}=r;if(!!n){i==="start"&&(i=N.isBackward(n)?"focus":"anchor"),i==="end"&&(i=N.isBackward(n)?"anchor":"focus");var{anchor:l,focus:c}=n,f={distance:o,unit:a,ignoreNonSelectable:!0},v={};if(i==null||i==="anchor"){var p=s?d.before(e,l,f):d.after(e,l,f);p&&(v.anchor=p)}if(i==null||i==="focus"){var h=s?d.before(e,c,f):d.after(e,c,f);h&&(v.focus=h)}z.setSelection(e,v)}},Av=(t,e)=>{var{selection:r}=t;if(e=d.range(t,e),r){z.setSelection(t,e);return}if(!N.isRange(e))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(rt.stringify(e)));t.apply({type:"set_selection",properties:r,newProperties:e})};function sc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function ic(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sc(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Bv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:o}=e,{edge:a="both"}=n;if(!!o){a==="start"&&(a=N.isBackward(o)?"focus":"anchor"),a==="end"&&(a=N.isBackward(o)?"anchor":"focus");var{anchor:s,focus:i}=o,l=a==="anchor"?s:i;z.setSelection(e,{[a==="anchor"?"anchor":"focus"]:ic(ic({},l),r)})}},xv=(t,e)=>{var{selection:r}=t,n={},o={};if(!!r){for(var a in e)(a==="anchor"&&e.anchor!=null&&!me.equals(e.anchor,r.anchor)||a==="focus"&&e.focus!=null&&!me.equals(e.focus,r.focus)||a!=="anchor"&&a!=="focus"&&e[a]!==r[a])&&(n[a]=r[a],o[a]=e[a]);Object.keys(n).length>0&&t.apply({type:"set_selection",properties:n,newProperties:o})}},wv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};d.withoutNormalizing(e,()=>{var{hanging:o=!1,voids:a=!1,mode:s="lowest"}=n,{at:i,match:l,select:c}=n;if(V.isNode(r)&&(r=[r]),r.length!==0){var[f]=r;if(i||(i=is(e),c=!0),c==null&&(c=!1),N.isRange(i))if(o||(i=d.unhangRange(e,i,{voids:a})),N.isCollapsed(i))i=i.anchor;else{var[,v]=N.edges(i),p=d.pointRef(e,v);z.delete(e,{at:i}),i=p.unref()}if(me.isPoint(i)){l==null&&(Q.isText(f)?l=P=>Q.isText(P):e.isInline(f)?l=P=>Q.isText(P)||d.isInline(e,P):l=P=>Z.isElement(P)&&d.isBlock(e,P));var[h]=d.nodes(e,{at:i.path,match:l,mode:s,voids:a});if(h){var[,m]=h,u=d.pathRef(e,m),C=d.isEnd(e,i,m);z.splitNodes(e,{at:i,match:l,mode:s,voids:a});var A=u.unref();i=C?B.next(A):A}else return}var E=B.parent(i),w=i[i.length-1];if(!(!a&&d.void(e,{at:E}))){for(var F of r){var S=E.concat(w);w++,e.apply({type:"insert_node",path:S,node:F}),i=B.next(i)}if(i=B.previous(i),c){var M=d.end(e,i);M&&z.select(e,M)}}}})},Fv=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.withoutNormalizing(e,()=>{var{at:n=e.selection,mode:o="lowest",voids:a=!1}=r,{match:s}=r;if(s==null&&(s=B.isPath(n)?An(e,n):F=>Z.isElement(F)&&d.isBlock(e,F)),!!n){var i=d.nodes(e,{at:n,match:s,mode:o,voids:a}),l=Array.from(i,F=>{var[,S]=F;return d.pathRef(e,S)});for(var c of l){var f=c.unref();if(f.length<2)throw new Error("Cannot lift node at a path [".concat(f,"] because it has a depth of less than `2`."));var v=d.node(e,B.parent(f)),[p,h]=v,m=f[f.length-1],{length:u}=p.children;if(u===1){var C=B.next(h);z.moveNodes(e,{at:f,to:C,voids:a}),z.removeNodes(e,{at:h,voids:a})}else if(m===0)z.moveNodes(e,{at:f,to:h,voids:a});else if(m===u-1){var A=B.next(h);z.moveNodes(e,{at:f,to:A,voids:a})}else{var E=B.next(f),w=B.next(h);z.splitNodes(e,{at:E,voids:a}),z.moveNodes(e,{at:f,to:w,voids:a})}}}})},yv=["text"],Tv=["children"],dc=(t,e)=>{if(Z.isElement(e)){var r=e;return d.isVoid(t,e)?!0:r.children.length===1?dc(t,r.children[0]):!1}else return!d.isEditor(e)},_v=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.withoutNormalizing(e,()=>{var{match:n,at:o=e.selection}=r,{hanging:a=!1,voids:s=!1,mode:i="lowest"}=r;if(!!o){if(n==null)if(B.isPath(o)){var[l]=d.parent(e,o);n=U=>l.children.includes(U)}else n=U=>Z.isElement(U)&&d.isBlock(e,U);if(!a&&N.isRange(o)&&(o=d.unhangRange(e,o,{voids:s})),N.isRange(o))if(N.isCollapsed(o))o=o.anchor;else{var[,c]=N.edges(o),f=d.pointRef(e,c);z.delete(e,{at:o}),o=f.unref(),r.at==null&&z.select(e,o)}var[v]=d.nodes(e,{at:o,match:n,voids:s,mode:i}),p=d.previous(e,{at:o,match:n,voids:s,mode:i});if(!(!v||!p)){var[h,m]=v,[u,C]=p;if(!(m.length===0||C.length===0)){var A=B.next(C),E=B.common(m,C),w=B.isSibling(m,C),F=Array.from(d.levels(e,{at:m}),U=>{var[G]=U;return G}).slice(E.length).slice(0,-1),S=d.above(e,{at:m,mode:"highest",match:U=>F.includes(U)&&dc(e,U)}),M=S&&d.pathRef(e,S[1]),P,L;if(Q.isText(h)&&Q.isText(u)){var O=vr(h,yv);L=u.text.length,P=O}else if(Z.isElement(h)&&Z.isElement(u)){var O=vr(h,Tv);L=u.children.length,P=O}else throw new Error("Cannot merge the node at path [".concat(m,"] with the previous sibling because it is not the same kind: ").concat(rt.stringify(h)," ").concat(rt.stringify(u)));w||z.moveNodes(e,{at:m,to:A,voids:s}),M&&z.removeNodes(e,{at:M.current,voids:s}),Z.isElement(u)&&d.isEmpty(e,u)||Q.isText(u)&&u.text===""&&C[C.length-1]!==0?z.removeNodes(e,{at:C,voids:s}):e.apply({type:"merge_node",path:A,position:L,properties:P}),M&&M.unref()}}}})},Sv=(t,e)=>{d.withoutNormalizing(t,()=>{var{to:r,at:n=t.selection,mode:o="lowest",voids:a=!1}=e,{match:s}=e;if(!!n){s==null&&(s=B.isPath(n)?An(t,n):h=>Z.isElement(h)&&d.isBlock(t,h));var i=d.pathRef(t,r),l=d.nodes(t,{at:n,match:s,mode:o,voids:a}),c=Array.from(l,h=>{var[,m]=h;return d.pathRef(t,m)});for(var f of c){var v=f.unref(),p=i.current;v.length!==0&&t.apply({type:"move_node",path:v,newPath:p}),i.current&&B.isSibling(p,v)&&B.isAfter(p,v)&&(i.current=B.next(i.current))}i.unref()}})},bv=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.withoutNormalizing(e,()=>{var{hanging:n=!1,voids:o=!1,mode:a="lowest"}=r,{at:s=e.selection,match:i}=r;if(!!s){i==null&&(i=B.isPath(s)?An(e,s):h=>Z.isElement(h)&&d.isBlock(e,h)),!n&&N.isRange(s)&&(s=d.unhangRange(e,s,{voids:o}));var l=d.nodes(e,{at:s,match:i,mode:a,voids:o}),c=Array.from(l,h=>{var[,m]=h;return d.pathRef(e,m)});for(var f of c){var v=f.unref();if(v){var[p]=d.node(e,v);e.apply({type:"remove_node",path:v,node:p})}}}})},Nv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};d.withoutNormalizing(e,()=>{var{match:o,at:a=e.selection,compare:s,merge:i}=n,{hanging:l=!1,mode:c="lowest",split:f=!1,voids:v=!1}=n;if(!!a){if(o==null&&(o=B.isPath(a)?An(e,a):L=>Z.isElement(L)&&d.isBlock(e,L)),!l&&N.isRange(a)&&(a=d.unhangRange(e,a,{voids:v})),f&&N.isRange(a)){if(N.isCollapsed(a)&&d.leaf(e,a.anchor)[0].text.length>0)return;var p=d.rangeRef(e,a,{affinity:"inward"}),[h,m]=N.edges(a),u=c==="lowest"?"lowest":"highest",C=d.isEnd(e,m,m.path);z.splitNodes(e,{at:m,match:o,mode:u,voids:v,always:!C});var A=d.isStart(e,h,h.path);z.splitNodes(e,{at:h,match:o,mode:u,voids:v,always:!A}),a=p.unref(),n.at==null&&z.select(e,a)}s||(s=(L,O)=>L!==O);for(var[E,w]of d.nodes(e,{at:a,match:o,mode:c,voids:v})){var F={},S={};if(w.length!==0){var M=!1;for(var P in r)P==="children"||P==="text"||s(r[P],E[P])&&(M=!0,E.hasOwnProperty(P)&&(F[P]=E[P]),i?r[P]!=null&&(S[P]=i(E[P],r[P])):r[P]!=null&&(S[P]=r[P]));M&&e.apply({type:"set_node",path:w,properties:F,newProperties:S})}}}})},Ov=(t,e)=>{if(N.isCollapsed(e))return e.anchor;var[,r]=N.edges(e),n=d.pointRef(t,r);return z.delete(t,{at:e}),n.unref()},Iv=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.withoutNormalizing(e,()=>{var{mode:n="lowest",voids:o=!1}=r,{match:a,at:s=e.selection,height:i=0,always:l=!1}=r;if(a==null&&(a=X=>Z.isElement(X)&&d.isBlock(e,X)),N.isRange(s)&&(s=Ov(e,s)),B.isPath(s)){var c=s,f=d.point(e,c),[v]=d.parent(e,c);a=X=>X===v,i=f.path.length-c.length+1,s=f,l=!0}if(!!s){var p=d.pointRef(e,s,{affinity:"backward"}),h;try{var[m]=d.nodes(e,{at:s,match:a,mode:n,voids:o});if(!m)return;var u=d.void(e,{at:s,mode:"highest"}),C=0;if(!o&&u){var[A,E]=u;if(Z.isElement(A)&&e.isInline(A)){var w=d.after(e,E);if(!w){var F={text:""},S=B.next(E);z.insertNodes(e,F,{at:S,voids:o}),w=d.point(e,S)}s=w,l=!0}var M=s.path.length-E.length;i=M+1,l=!0}h=d.pointRef(e,s);var P=s.path.length-i,[,L]=m,O=s.path.slice(0,P),U=i===0?s.offset:s.path[P]+C;for(var[G,k]of d.levels(e,{at:O,reverse:!0,voids:o})){var Y=!1;if(k.length<L.length||k.length===0||!o&&Z.isElement(G)&&d.isVoid(e,G))break;var W=p.current,$=d.isEnd(e,W,k);if(l||!p||!d.isEdge(e,W,k)){Y=!0;var ne=V.extractProps(G);e.apply({type:"split_node",path:k,position:U,properties:ne})}U=k[k.length-1]+(Y||$?1:0)}if(r.at==null){var fe=h.current||d.end(e,[]);z.select(e,fe)}}finally{var ge;p.unref(),(ge=h)===null||ge===void 0||ge.unref()}}})},Pv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(r)||(r=[r]);var o={};for(var a of r)o[a]=null;z.setNodes(e,o,n)},Lv=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.withoutNormalizing(e,()=>{var{mode:n="lowest",split:o=!1,voids:a=!1}=r,{at:s=e.selection,match:i}=r;if(!!s){i==null&&(i=B.isPath(s)?An(e,s):h=>Z.isElement(h)&&d.isBlock(e,h)),B.isPath(s)&&(s=d.range(e,s));var l=N.isRange(s)?d.rangeRef(e,s):null,c=d.nodes(e,{at:s,match:i,mode:n,voids:a}),f=Array.from(c,h=>{var[,m]=h;return d.pathRef(e,m)}).reverse(),v=function(m){var u=m.unref(),[C]=d.node(e,u),A=d.range(e,u);o&&l&&(A=N.intersection(l.current,A)),z.liftNodes(e,{at:A,match:E=>Z.isAncestor(C)&&C.children.includes(E),voids:a})};for(var p of f)v(p);l&&l.unref()}})};function uc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function lc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uc(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var kv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};d.withoutNormalizing(e,()=>{var{mode:o="lowest",split:a=!1,voids:s=!1}=n,{match:i,at:l=e.selection}=n;if(!!l){if(i==null&&(B.isPath(l)?i=An(e,l):e.isInline(r)?i=A=>Z.isElement(A)&&d.isInline(e,A)||Q.isText(A):i=A=>Z.isElement(A)&&d.isBlock(e,A)),a&&N.isRange(l)){var[c,f]=N.edges(l),v=d.rangeRef(e,l,{affinity:"inward"});z.splitNodes(e,{at:f,match:i,voids:s}),z.splitNodes(e,{at:c,match:i,voids:s}),l=v.unref(),n.at==null&&z.select(e,l)}var p=Array.from(d.nodes(e,{at:l,match:e.isInline(r)?A=>Z.isElement(A)&&d.isBlock(e,A):A=>d.isEditor(A),mode:"lowest",voids:s}));for(var[,h]of p){var m=N.isRange(l)?N.intersection(l,d.range(e,h)):l;if(!!m){var u=Array.from(d.nodes(e,{at:m,match:i,mode:o,voids:s}));if(u.length>0){var C=function(){var[A]=u,E=u[u.length-1],[,w]=A,[,F]=E;if(w.length===0&&F.length===0)return"continue";var S=B.equals(w,F)?B.parent(w):B.common(w,F),M=d.range(e,w,F),P=d.node(e,S),[L]=P,O=S.length+1,U=B.next(F.slice(0,O)),G=lc(lc({},r),{},{children:[]});z.insertNodes(e,G,{at:U,voids:s}),z.moveNodes(e,{at:M,match:k=>Z.isAncestor(L)&&L.children.includes(k),to:U.concat(0),voids:s})}();if(C==="continue")continue}}}}})},mc=()=>{var t={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return uh(t,...n)},addMark:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ph(t,...n)},deleteBackward:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return gh(t,...n)},deleteForward:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Dh(t,...n)},deleteFragment:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ch(t,...n)},getFragment:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ch(t,...n)},insertBreak:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return bh(t,...n)},insertSoftBreak:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Oh(t,...n)},insertFragment:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return gv(t,...n)},insertNode:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Nh(t,...n)},insertText:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ph(t,...n)},normalizeNode:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return fh(t,...n)},removeMark:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return cv(t,...n)},getDirtyPaths:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return lh(t,...n)},shouldNormalize:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return dh(t,...n)},above:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return mh(t,...n)},after:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return hh(t,...n)},before:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return vh(t,...n)},collapse:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Dv(t,...n)},delete:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return vv(t,...n)},deselect:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Cv(t,...n)},edges:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Eh(t,...n)},elementReadOnly:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ah(t,...n)},end:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Bh(t,...n)},first:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return xh(t,...n)},fragment:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return wh(t,...n)},getMarks:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return qh(t,...n)},hasBlocks:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return yh(t,...n)},hasInlines:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Th(t,...n)},hasPath:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return _h(t,...n)},hasTexts:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Sh(t,...n)},insertNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return wv(t,...n)},isBlock:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Lh(t,...n)},isEdge:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return kh(t,...n)},isEmpty:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Mh(t,...n)},isEnd:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Rh(t,...n)},isNormalizing:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return jh(t,...n)},isStart:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return zh(t,...n)},last:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Wh(t,...n)},leaf:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Uh(t,...n)},levels:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Hh(t,...n)},liftNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Fv(t,...n)},mergeNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return _v(t,...n)},move:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ev(t,...n)},moveNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Sv(t,...n)},next:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return $h(t,...n)},node:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Vh(t,...n)},nodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Kh(t,...n)},normalize:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Zh(t,...n)},parent:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Xh(t,...n)},path:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ev(t,...n)},pathRef:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Jh(t,...n)},pathRefs:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Qh(t,...n)},point:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return nv(t,...n)},pointRef:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return tv(t,...n)},pointRefs:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return rv(t,...n)},positions:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ov(t,...n)},previous:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return av(t,...n)},range:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return uv(t,...n)},rangeRef:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return sv(t,...n)},rangeRefs:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return iv(t,...n)},removeNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return bv(t,...n)},select:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Av(t,...n)},setNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Nv(t,...n)},setNormalizing:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return fv(t,...n)},setPoint:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Bv(t,...n)},setSelection:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return xv(t,...n)},splitNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Iv(t,...n)},start:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return dv(t,...n)},string:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return mv(t,...n)},unhangRange:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return pv(t,...n)},unsetNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Pv(t,...n)},unwrapNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Lv(t,...n)},void:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Fh(t,...n)},withoutNormalizing:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return hv(t,...n)},wrapNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return kv(t,...n)}};return t};g();D();var Mv={isHistory(t){return tt(t)&&Array.isArray(t.redos)&&Array.isArray(t.undos)&&(t.redos.length===0||hr.isOperationList(t.redos[0].operations))&&(t.undos.length===0||hr.isOperationList(t.undos[0].operations))}};var cs=new WeakMap,fs=new WeakMap,Bn={isHistoryEditor(t){return Mv.isHistory(t.history)&&d.isEditor(t)},isMerging(t){return fs.get(t)},isSaving(t){return cs.get(t)},redo(t){t.redo()},undo(t){t.undo()},withoutMerging(t,e){var r=Bn.isMerging(t);fs.set(t,!1),e(),fs.set(t,r)},withoutSaving(t,e){var r=Bn.isSaving(t);cs.set(t,!1),e(),cs.set(t,r)}},pc=t=>{var e=t,{apply:r}=e;return e.history={undos:[],redos:[]},e.redo=()=>{var{history:n}=e,{redos:o}=n;if(o.length>0){var a=o[o.length-1];a.selectionBefore&&z.setSelection(e,a.selectionBefore),Bn.withoutSaving(e,()=>{d.withoutNormalizing(e,()=>{for(var s of a.operations)e.apply(s)})}),n.redos.pop(),e.writeHistory("undos",a)}},e.undo=()=>{var{history:n}=e,{undos:o}=n;if(o.length>0){var a=o[o.length-1];Bn.withoutSaving(e,()=>{d.withoutNormalizing(e,()=>{var s=a.operations.map(hr.inverse).reverse();for(var i of s)e.apply(i);a.selectionBefore&&z.setSelection(e,a.selectionBefore)})}),e.writeHistory("redos",a),n.undos.pop()}},e.apply=n=>{var{operations:o,history:a}=e,{undos:s}=a,i=s[s.length-1],l=i&&i.operations[i.operations.length-1],c=Bn.isSaving(e),f=Bn.isMerging(e);if(c==null&&(c=jv(n)),c){if(f==null&&(i==null?f=!1:o.length!==0?f=!0:f=Rv(n,l)),i&&f)i.operations.push(n);else{var v={operations:[n],selectionBefore:e.selection};e.writeHistory("undos",v)}for(;s.length>100;)s.shift();a.redos=[]}r(n)},e.writeHistory=(n,o)=>{e.history[n].push(o)},e},Rv=(t,e)=>!!(e&&t.type==="insert_text"&&e.type==="insert_text"&&t.offset===e.offset+e.text.length&&B.equals(t.path,e.path)||e&&t.type==="remove_text"&&e.type==="remove_text"&&t.offset+t.text.length===e.offset&&B.equals(t.path,e.path)),jv=(t,e)=>t.type!=="set_selection";g();D();var Ls=_(Dc()),of=_(up()),af=_(lp()),I=_(ee());g();D();g();D();function Cc(t){return typeof t=="object"&&t!=null&&t.nodeType===1}function Ec(t,e){return(!e||t!=="hidden")&&t!=="visible"&&t!=="clip"}function ds(t,e){if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){var r=getComputedStyle(t,null);return Ec(r.overflowY,e)||Ec(r.overflowX,e)||function(n){var o=function(a){if(!a.ownerDocument||!a.ownerDocument.defaultView)return null;try{return a.ownerDocument.defaultView.frameElement}catch{return null}}(n);return!!o&&(o.clientHeight<n.scrollHeight||o.clientWidth<n.scrollWidth)}(t)}return!1}function ra(t,e,r,n,o,a,s,i){return a<t&&s>e||a>t&&s<e?0:a<=t&&i<=r||s>=e&&i>=r?a-t-n:s>e&&i<r||a<t&&i>r?s-e+o:0}var ms=function(t,e){var r=window,n=e.scrollMode,o=e.block,a=e.inline,s=e.boundary,i=e.skipOverflowHiddenElements,l=typeof s=="function"?s:function(Be){return Be!==s};if(!Cc(t))throw new TypeError("Invalid target");for(var c,f,v=document.scrollingElement||document.documentElement,p=[],h=t;Cc(h)&&l(h);){if((h=(f=(c=h).parentElement)==null?c.getRootNode().host||null:f)===v){p.push(h);break}h!=null&&h===document.body&&ds(h)&&!ds(document.documentElement)||h!=null&&ds(h,i)&&p.push(h)}for(var m=r.visualViewport?r.visualViewport.width:innerWidth,u=r.visualViewport?r.visualViewport.height:innerHeight,C=window.scrollX||pageXOffset,A=window.scrollY||pageYOffset,E=t.getBoundingClientRect(),w=E.height,F=E.width,S=E.top,M=E.right,P=E.bottom,L=E.left,O=o==="start"||o==="nearest"?S:o==="end"?P:S+w/2,U=a==="center"?L+F/2:a==="end"?M:L,G=[],k=0;k<p.length;k++){var Y=p[k],W=Y.getBoundingClientRect(),$=W.height,ne=W.width,fe=W.top,ge=W.right,X=W.bottom,ue=W.left;if(n==="if-needed"&&S>=0&&L>=0&&P<=u&&M<=m&&S>=fe&&P<=X&&L>=ue&&M<=ge)return G;var Se=getComputedStyle(Y),Ee=parseInt(Se.borderLeftWidth,10),Ze=parseInt(Se.borderTopWidth,10),x=parseInt(Se.borderRightWidth,10),q=parseInt(Se.borderBottomWidth,10),j=0,K=0,ce="offsetWidth"in Y?Y.offsetWidth-Y.clientWidth-Ee-x:0,oe="offsetHeight"in Y?Y.offsetHeight-Y.clientHeight-Ze-q:0,ve="offsetWidth"in Y?Y.offsetWidth===0?0:ne/Y.offsetWidth:0,_e="offsetHeight"in Y?Y.offsetHeight===0?0:$/Y.offsetHeight:0;if(v===Y)j=o==="start"?O:o==="end"?O-u:o==="nearest"?ra(A,A+u,u,Ze,q,A+O,A+O+w,w):O-u/2,K=a==="start"?U:a==="center"?U-m/2:a==="end"?U-m:ra(C,C+m,m,Ee,x,C+U,C+U+F,F),j=Math.max(0,j+A),K=Math.max(0,K+C);else{j=o==="start"?O-fe-Ze:o==="end"?O-X+q+oe:o==="nearest"?ra(fe,X,$,Ze,q+oe,O,O+w,w):O-(fe+$/2)+oe/2,K=a==="start"?U-ue-Ee:a==="center"?U-(ue+ne/2)+ce/2:a==="end"?U-ge+x+ce:ra(ue,ge,ne,Ee,x+ce,U,U+F,F);var be=Y.scrollLeft,Pe=Y.scrollTop;O+=Pe-(j=Math.max(0,Math.min(Pe+j/_e,Y.scrollHeight-$/_e+oe))),U+=be-(K=Math.max(0,Math.min(be+K/ve,Y.scrollWidth-ne/ve+ce)))}G.push({el:Y,top:j,left:K})}return G};function Ac(t){return t===Object(t)&&Object.keys(t).length!==0}function Hv(t,e){e===void 0&&(e="auto");var r="scrollBehavior"in document.body.style;t.forEach(function(n){var o=n.el,a=n.top,s=n.left;o.scroll&&r?o.scroll({top:a,left:s,behavior:e}):(o.scrollTop=a,o.scrollLeft=s)})}function Gv(t){return t===!1?{block:"end",inline:"nearest"}:Ac(t)?t:{block:"start",inline:"nearest"}}function Yv(t,e){var r=t.isConnected||t.ownerDocument.documentElement.contains(t);if(Ac(e)&&typeof e.behavior=="function")return e.behavior(r?ms(t,e):[]);if(!!r){var n=Gv(e);return Hv(ms(t,n),n.behavior)}}var Bc=Yv;g();D();g();D();g();D();g();D();g();D();g();D();g();D();var Pt=[];var xc=function(){return Pt.some(function(t){return t.activeTargets.length>0})};g();D();var wc=function(){return Pt.some(function(t){return t.skippedTargets.length>0})};g();D();var Fc="ResizeObserver loop completed with undelivered notifications.",yc=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:Fc}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=Fc),window.dispatchEvent(t)};g();D();g();D();g();D();g();D();var Vr;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Vr||(Vr={}));g();D();g();D();var Yt=function(t){return Object.freeze(t)};var ps=function(){function t(e,r){this.inlineSize=e,this.blockSize=r,Yt(this)}return t}();g();D();var hs=function(){function t(e,r,n,o){return this.x=e,this.y=r,this.width=n,this.height=o,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Yt(this)}return t.prototype.toJSON=function(){var e=this,r=e.x,n=e.y,o=e.top,a=e.right,s=e.bottom,i=e.left,l=e.width,c=e.height;return{x:r,y:n,top:o,right:a,bottom:s,left:i,width:l,height:c}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}();g();D();var Qn=function(t){return t instanceof SVGElement&&"getBBox"in t},na=function(t){if(Qn(t)){var e=t.getBBox(),r=e.width,n=e.height;return!r&&!n}var o=t,a=o.offsetWidth,s=o.offsetHeight;return!(a||s||t.getClientRects().length)},vs=function(t){var e;if(t instanceof Element)return!0;var r=(e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(r&&t instanceof r.Element)},Tc=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1};g();D();var Kr=typeof window<"u"?window:{};var oa=new WeakMap,_c=/auto|scroll/,qv=/^tb|vertical/,$v=/msie|trident/i.test(Kr.navigator&&Kr.navigator.userAgent),tr=function(t){return parseFloat(t||"0")},xn=function(t,e,r){return t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=!1),new ps((r?e:t)||0,(r?t:e)||0)},Sc=Yt({devicePixelContentBoxSize:xn(),borderBoxSize:xn(),contentBoxSize:xn(),contentRect:new hs(0,0,0,0)}),gs=function(t,e){if(e===void 0&&(e=!1),oa.has(t)&&!e)return oa.get(t);if(na(t))return oa.set(t,Sc),Sc;var r=getComputedStyle(t),n=Qn(t)&&t.ownerSVGElement&&t.getBBox(),o=!$v&&r.boxSizing==="border-box",a=qv.test(r.writingMode||""),s=!n&&_c.test(r.overflowY||""),i=!n&&_c.test(r.overflowX||""),l=n?0:tr(r.paddingTop),c=n?0:tr(r.paddingRight),f=n?0:tr(r.paddingBottom),v=n?0:tr(r.paddingLeft),p=n?0:tr(r.borderTopWidth),h=n?0:tr(r.borderRightWidth),m=n?0:tr(r.borderBottomWidth),u=n?0:tr(r.borderLeftWidth),C=v+c,A=l+f,E=u+h,w=p+m,F=i?t.offsetHeight-w-t.clientHeight:0,S=s?t.offsetWidth-E-t.clientWidth:0,M=o?C+E:0,P=o?A+w:0,L=n?n.width:tr(r.width)-M-S,O=n?n.height:tr(r.height)-P-F,U=L+C+S+E,G=O+A+F+w,k=Yt({devicePixelContentBoxSize:xn(Math.round(L*devicePixelRatio),Math.round(O*devicePixelRatio),a),borderBoxSize:xn(U,G,a),contentBoxSize:xn(L,O,a),contentRect:new hs(v,l,L,O)});return oa.set(t,k),k},aa=function(t,e,r){var n=gs(t,r),o=n.borderBoxSize,a=n.contentBoxSize,s=n.devicePixelContentBoxSize;switch(e){case Vr.DEVICE_PIXEL_CONTENT_BOX:return s;case Vr.BORDER_BOX:return o;default:return a}};var Ds=function(){function t(e){var r=gs(e);this.target=e,this.contentRect=r.contentRect,this.borderBoxSize=Yt([r.borderBoxSize]),this.contentBoxSize=Yt([r.contentBoxSize]),this.devicePixelContentBoxSize=Yt([r.devicePixelContentBoxSize])}return t}();g();D();var sa=function(t){if(na(t))return 1/0;for(var e=0,r=t.parentNode;r;)e+=1,r=r.parentNode;return e};var bc=function(){var t=1/0,e=[];Pt.forEach(function(s){if(s.activeTargets.length!==0){var i=[];s.activeTargets.forEach(function(c){var f=new Ds(c.target),v=sa(c.target);i.push(f),c.lastReportedSize=aa(c.target,c.observedBox),v<t&&(t=v)}),e.push(function(){s.callback.call(s.observer,i,s.observer)}),s.activeTargets.splice(0,s.activeTargets.length)}});for(var r=0,n=e;r<n.length;r++){var o=n[r];o()}return t};g();D();var Cs=function(t){Pt.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(o){o.isActive()&&(sa(o.target)>t?r.activeTargets.push(o):r.skippedTargets.push(o))})})};var Nc=function(){var t=0;for(Cs(t);xc();)t=bc(),Cs(t);return wc()&&yc(),t>0};g();D();g();D();var Es,Oc=[],Vv=function(){return Oc.splice(0).forEach(function(t){return t()})},Ic=function(t){if(!Es){var e=0,r=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return Vv()}).observe(r,n),Es=function(){r.textContent="".concat(e?e--:e++)}}Oc.push(t),Es()};var Pc=function(t){Ic(function(){requestAnimationFrame(t)})};var ia=0,Kv=function(){return!!ia},Zv=250,Xv={attributes:!0,characterData:!0,childList:!0,subtree:!0},Lc=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],kc=function(t){return t===void 0&&(t=0),Date.now()+t},As=!1,Jv=function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var r=this;if(e===void 0&&(e=Zv),!As){As=!0;var n=kc(e);Pc(function(){var o=!1;try{o=Nc()}finally{if(As=!1,e=n-kc(),!Kv())return;o?r.run(1e3):e>0?r.run(e):r.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,r=function(){return e.observer&&e.observer.observe(document.body,Xv)};document.body?r():Kr.addEventListener("DOMContentLoaded",r)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Lc.forEach(function(r){return Kr.addEventListener(r,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Lc.forEach(function(r){return Kr.removeEventListener(r,e.listener,!0)}),this.stopped=!0)},t}(),ua=new Jv,Bs=function(t){!ia&&t>0&&ua.start(),ia+=t,!ia&&ua.stop()};g();D();var Qv=function(t){return!Qn(t)&&!Tc(t)&&getComputedStyle(t).display==="inline"},Mc=function(){function t(e,r){this.target=e,this.observedBox=r||Vr.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=aa(this.target,this.observedBox,!0);return Qv(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}();g();D();var Rc=function(){function t(e,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=r}return t}();var la=new WeakMap,jc=function(t,e){for(var r=0;r<t.length;r+=1)if(t[r].target===e)return r;return-1},eo=function(){function t(){}return t.connect=function(e,r){var n=new Rc(e,r);la.set(e,n)},t.observe=function(e,r,n){var o=la.get(e),a=o.observationTargets.length===0;jc(o.observationTargets,r)<0&&(a&&Pt.push(o),o.observationTargets.push(new Mc(r,n&&n.box)),Bs(1),ua.schedule())},t.unobserve=function(e,r){var n=la.get(e),o=jc(n.observationTargets,r),a=n.observationTargets.length===1;o>=0&&(a&&Pt.splice(Pt.indexOf(n),1),n.observationTargets.splice(o,1),Bs(-1))},t.disconnect=function(e){var r=this,n=la.get(e);n.observationTargets.slice().forEach(function(o){return r.unobserve(e,o.target)}),n.activeTargets.splice(0,n.activeTargets.length)},t}();var xs=function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");eo.connect(this,e)}return t.prototype.observe=function(e,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!vs(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");eo.observe(this,e,r)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!vs(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");eo.unobserve(this,e)},t.prototype.disconnect=function(){eo.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();var ma=_(Gc()),sf=_(rp());function Da(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function og(t,e){if(t==null)return{};var r={},n=Object.keys(t),o,a;for(a=0;a<n.length;a++)o=n[a],!(e.indexOf(o)>=0)&&(r[o]=t[o]);return r}function Fn(t,e){if(t==null)return{};var r=og(t,e),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)n=a[o],!(e.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,n)||(r[n]=t[n]))}return r}var ks=(0,I.createContext)(null),Ir=()=>{var t=(0,I.useContext)(ks);if(!t)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return t},ag=parseInt(I.default.version.split(".")[0],10)>=17,sg=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Yc=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),St=typeof navigator<"u"&&/Android/.test(navigator.userAgent),va=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),ro=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),ig=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),uf=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),ug=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),lg=St&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),cg=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),fg=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),dg=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent),pa=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Sr=(!ug||!lg)&&!ig&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function",Ms=new WeakMap,Rs=new WeakMap,lf=new WeakMap,ha=new WeakMap,Ts=new WeakMap,oo=new WeakMap,Jr=new WeakMap,_s=new WeakMap,Ca=new WeakMap,Ss=new WeakMap,Zr=new WeakMap,Xr=new WeakMap,no=new WeakMap,bs=new WeakMap,js=new WeakMap,qt=new WeakMap,gr=new WeakMap,Bt=new WeakMap,br=new WeakMap,Nr=new WeakMap,cf=new WeakMap,yn=Symbol("placeholder"),ff=Symbol("mark-placeholder"),mg=globalThis.Text,zs=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView||null,pg=t=>Or(t)&&t.nodeType===8,Lt=t=>Or(t)&&t.nodeType===1,Or=t=>{var e=zs(t);return!!e&&t instanceof e.Node},Ns=t=>{var e=t&&t.anchorNode&&zs(t.anchorNode);return!!e&&t instanceof e.Selection},df=t=>Or(t)&&t.nodeType===3,hg=t=>t.clipboardData&&t.clipboardData.getData("text/plain")!==""&&t.clipboardData.types.length===1,vg=t=>{var[e,r]=t;if(Lt(e)&&e.childNodes.length){var n=r===e.childNodes.length,o=n?r-1:r;for([e,o]=mf(e,o,n?"backward":"forward"),n=o<r;Lt(e)&&e.childNodes.length;){var a=n?e.childNodes.length-1:0;e=Dg(e,a,n?"backward":"forward")}r=n&&e.textContent!=null?e.textContent.length:0}return[e,r]},gg=t=>{for(var e=t&&t.parentNode;e;){if(e.toString()==="[object ShadowRoot]")return!0;e=e.parentNode}return!1},mf=(t,e,r)=>{for(var{childNodes:n}=t,o=n[e],a=e,s=!1,i=!1;(pg(o)||Lt(o)&&o.childNodes.length===0||Lt(o)&&o.getAttribute("contenteditable")==="false")&&!(s&&i);){if(a>=n.length){s=!0,a=e-1,r="backward";continue}if(a<0){i=!0,a=e+1,r="forward";continue}o=n[a],e=a,a+=r==="forward"?1:-1}return[o,e]},Dg=(t,e,r)=>{var[n]=mf(t,e,r);return n},pf=t=>{var e="";if(df(t)&&t.nodeValue)return t.nodeValue;if(Lt(t)){for(var r of Array.from(t.childNodes))e+=pf(r);var n=getComputedStyle(t).getPropertyValue("display");(n==="block"||n==="list"||t.tagName==="BR")&&(e+=`
`)}return e},Cg=/data-slate-fragment="(.+?)"/m,Eg=t=>{var e=t.getData("text/html"),[,r]=e.match(Cg)||[];return r},Ws=(t,e,r)=>{var{target:n}=e;if(Lt(n)&&n.matches('[contentEditable="false"]'))return!1;var{document:o}=R.getWindow(t);if(o.contains(n))return R.hasDOMNode(t,n,{editable:!0});var a=r.find(s=>{var{addedNodes:i,removedNodes:l}=s;for(var c of i)if(c===n||c.contains(n))return!0;for(var f of l)if(f===n||f.contains(n))return!0});return!a||a===e?!1:Ws(t,a,r)},Ag=0,Os=class{constructor(){this.id="".concat(Ag++)}},R={androidPendingDiffs:t=>Bt.get(t),androidScheduleFlush:t=>{var e;(e=js.get(t))===null||e===void 0||e()},blur:t=>{var e=R.toDOMNode(t,t),r=R.findDocumentOrShadowRoot(t);Zr.set(t,!1),r.activeElement===e&&e.blur()},deselect:t=>{var{selection:e}=t,r=R.findDocumentOrShadowRoot(t),n=r.getSelection();n&&n.rangeCount>0&&n.removeAllRanges(),e&&z.deselect(t)},findDocumentOrShadowRoot:t=>{var e=R.toDOMNode(t,t),r=e.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&r.getSelection!=null?r:e.ownerDocument},findEventRange:(t,e)=>{"nativeEvent"in e&&(e=e.nativeEvent);var{clientX:r,clientY:n,target:o}=e;if(r==null||n==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var a=R.toSlateNode(t,e.target),s=R.findPath(t,a);if(Z.isElement(a)&&d.isVoid(t,a)){var i=o.getBoundingClientRect(),l=t.isInline(a)?r-i.left<i.left+i.width-r:n-i.top<i.top+i.height-n,c=d.point(t,s,{edge:l?"start":"end"}),f=l?d.before(t,c):d.after(t,c);if(f){var v=d.range(t,f);return v}}var p,{document:h}=R.getWindow(t);if(h.caretRangeFromPoint)p=h.caretRangeFromPoint(r,n);else{var m=h.caretPositionFromPoint(r,n);m&&(p=h.createRange(),p.setStart(m.offsetNode,m.offset),p.setEnd(m.offsetNode,m.offset))}if(!p)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var u=R.toSlateRange(t,p,{exactMatch:!1,suppressThrow:!1});return u},findKey:(t,e)=>{var r=_s.get(e);return r||(r=new Os,_s.set(e,r)),r},findPath:(t,e)=>{for(var r=[],n=e;;){var o=Rs.get(n);if(o==null){if(d.isEditor(n))return r;break}var a=Ms.get(n);if(a==null)break;r.unshift(a),n=o}throw new Error("Unable to find the path for Slate node: ".concat(rt.stringify(e)))},focus:t=>{var e=R.toDOMNode(t,t),r=R.findDocumentOrShadowRoot(t);Zr.set(t,!0),r.activeElement!==e&&e.focus({preventScroll:!0})},getWindow:t=>{var e=lf.get(t);if(!e)throw new Error("Unable to find a host window element for this editor");return e},hasDOMNode:function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:o=!1}=n,a=R.toDOMNode(e,e),s;try{s=Lt(r)?r:r.parentElement}catch(i){if(!i.message.includes('Permission denied to access property "nodeType"'))throw i}return s?s.closest("[data-slate-editor]")===a&&(!o||s.isContentEditable?!0:typeof s.isContentEditable=="boolean"&&s.closest('[contenteditable="false"]')===a||!!s.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(t,e)=>Or(e)&&R.hasDOMNode(t,e,{editable:!0}),hasRange:(t,e)=>{var{anchor:r,focus:n}=e;return d.hasPath(t,r.path)&&d.hasPath(t,n.path)},hasSelectableTarget:(t,e)=>R.hasEditableTarget(t,e)||R.isTargetInsideNonReadonlyVoid(t,e),hasTarget:(t,e)=>Or(e)&&R.hasDOMNode(t,e),insertData:(t,e)=>{t.insertData(e)},insertFragmentData:(t,e)=>t.insertFragmentData(e),insertTextData:(t,e)=>t.insertTextData(e),isComposing:t=>!!Xr.get(t),isFocused:t=>!!Zr.get(t),isReadOnly:t=>!!Ss.get(t),isTargetInsideNonReadonlyVoid:(t,e)=>{if(Ss.get(t))return!1;var r=R.hasTarget(t,e)&&R.toSlateNode(t,e);return Z.isElement(r)&&d.isVoid(t,r)},setFragmentData:(t,e,r)=>t.setFragmentData(e,r),toDOMNode:(t,e)=>{var r=Ca.get(t),n=d.isEditor(e)?ha.get(t):r?.get(R.findKey(t,e));if(!n)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(rt.stringify(e)));return n},toDOMPoint:(t,e)=>{var[r]=d.node(t,e.path),n=R.toDOMNode(t,r),o;d.void(t,{at:e})&&(e={path:e.path,offset:0});for(var a="[data-slate-string], [data-slate-zero-width]",s=Array.from(n.querySelectorAll(a)),i=0,l=0;l<s.length;l++){var c=s[l],f=c.childNodes[0];if(!(f==null||f.textContent==null)){var{length:v}=f.textContent,p=c.getAttribute("data-slate-length"),h=p==null?v:parseInt(p,10),m=i+h,u=s[l+1];if(e.offset===m&&u!==null&&u!==void 0&&u.hasAttribute("data-slate-mark-placeholder")){var C,A=u.childNodes[0];o=[A instanceof mg?A:u,(C=u.textContent)!==null&&C!==void 0&&C.startsWith("\uFEFF")?1:0];break}if(e.offset<=m){var E=Math.min(v,Math.max(0,e.offset-i));o=[f,E];break}i=m}}if(!o)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(rt.stringify(e)));return o},toDOMRange:(t,e)=>{var{anchor:r,focus:n}=e,o=N.isBackward(e),a=R.toDOMPoint(t,r),s=N.isCollapsed(e)?a:R.toDOMPoint(t,n),i=R.getWindow(t),l=i.document.createRange(),[c,f]=o?s:a,[v,p]=o?a:s,h=Lt(c)?c:c.parentElement,m=!!h.getAttribute("data-slate-zero-width"),u=Lt(v)?v:v.parentElement,C=!!u.getAttribute("data-slate-zero-width");return l.setStart(c,m?1:f),l.setEnd(v,C?1:p),l},toSlateNode:(t,e)=>{var r=Lt(e)?e:e.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r?oo.get(r):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return n},toSlatePoint:(t,e,r)=>{var{exactMatch:n,suppressThrow:o}=r,[a,s]=n?e:vg(e),i=a.parentNode,l=null,c=0;if(i){var f,v,p=R.toDOMNode(t,t),h=i.closest('[data-slate-void="true"]'),m=h&&p.contains(h)?h:null,u=i.closest("[data-slate-leaf]"),C=null;if(u){if(l=u.closest('[data-slate-node="text"]'),l){var A=R.getWindow(t),E=A.document.createRange();E.setStart(l,0),E.setEnd(a,s);var w=E.cloneContents(),F=[...Array.prototype.slice.call(w.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(w.querySelectorAll("[contenteditable=false]"))];F.forEach(W=>{if(St&&!n&&W.hasAttribute("data-slate-zero-width")&&W.textContent.length>0&&W.textContext!=="\uFEFF"){W.textContent.startsWith("\uFEFF")&&(W.textContent=W.textContent.slice(1));return}W.parentNode.removeChild(W)}),c=w.textContent.length,C=l}}else if(m){for(var S=m.querySelectorAll("[data-slate-leaf]"),M=0;M<S.length;M++){var P=S[M];if(R.hasDOMNode(t,P)){u=P;break}}u?(l=u.closest('[data-slate-node="text"]'),C=u,c=C.textContent.length,C.querySelectorAll("[data-slate-zero-width]").forEach(W=>{c-=W.textContent.length})):c=1}C&&c===C.textContent.length&&St&&C.getAttribute("data-slate-zero-width")==="z"&&(f=C.textContent)!==null&&f!==void 0&&f.startsWith("\uFEFF")&&(i.hasAttribute("data-slate-zero-width")||va&&(v=C.textContent)!==null&&v!==void 0&&v.endsWith(`

`))&&c--}if(St&&!l&&!n){var L=i.hasAttribute("data-slate-node")?i:i.closest("[data-slate-node]");if(L&&R.hasDOMNode(t,L,{editable:!0})){var O=R.toSlateNode(t,L),{path:U,offset:G}=d.start(t,R.findPath(t,O));return L.querySelector("[data-slate-leaf]")||(G=s),{path:U,offset:G}}}if(!l){if(o)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(e))}var k=R.toSlateNode(t,l),Y=R.findPath(t,k);return{path:Y,offset:c}},toSlateRange:(t,e,r)=>{var{exactMatch:n,suppressThrow:o}=r,a=Ns(e)?e.anchorNode:e.startContainer,s,i,l,c,f;if(a&&(Ns(e)?(s=e.anchorNode,i=e.anchorOffset,l=e.focusNode,c=e.focusOffset,uf&&gg(s)?f=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:f=e.isCollapsed):(s=e.startContainer,i=e.startOffset,l=e.endContainer,c=e.endOffset,f=e.collapsed)),s==null||l==null||i==null||c==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(e));if("getAttribute"in l&&l.getAttribute("contenteditable")==="false"){var v;l=s,c=((v=s.textContent)===null||v===void 0?void 0:v.length)||0}var p=R.toSlatePoint(t,[s,i],{exactMatch:n,suppressThrow:o});if(!p)return null;var h=f?p:R.toSlatePoint(t,[l,c],{exactMatch:n,suppressThrow:o});if(!h)return null;if(va&&!f&&s!==l){var m=d.isEnd(t,p,p.path),u=d.isStart(t,h,h.path);if(m){var C=d.after(t,p);p=C||p}if(u){var A=d.before(t,h);h=A||h}}var E={anchor:p,focus:h};return N.isExpanded(E)&&N.isForward(E)&&Lt(l)&&d.void(t,{at:E.focus,mode:"highest"})&&(E=d.unhangRange(t,E,{voids:!0})),E}};function Bg(t,e){var{path:r,diff:n}=e;if(!d.hasPath(t,r))return!1;var o=V.get(t,r);if(!Q.isText(o))return!1;if(n.start!==o.text.length||n.text.length===0)return o.text.slice(n.start,n.start+n.text.length)===n.text;var a=B.next(r);if(!d.hasPath(t,a))return!1;var s=V.get(t,a);return Q.isText(s)&&s.text.startsWith(n.text)}function hf(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return r.reduce((o,a)=>o.slice(0,a.start)+a.text+o.slice(a.end),t)}function xg(t,e){for(var r=Math.min(t.length,e.length),n=0;n<r;n++)if(t.charAt(n)!==e.charAt(n))return n;return r}function wg(t,e,r){for(var n=Math.min(t.length,e.length,r),o=0;o<n;o++)if(t.charAt(t.length-o-1)!==e.charAt(e.length-o-1))return o;return n}function vf(t,e){var{start:r,end:n,text:o}=e,a=t.slice(r,n),s=xg(a,o),i=Math.min(a.length-s,o.length-s),l=wg(a,o,i),c={start:r+s,end:n-l,text:o.slice(s,o.length-l)};return c.start===c.end&&c.text.length===0?null:c}function Fg(t,e,r){var n=Math.min(e.start,r.start),o=Math.max(0,Math.min(e.start+e.text.length,r.end)-r.start),a=hf(t,e,r),s=Math.max(r.start+r.text.length,e.start+e.text.length+(e.start+e.text.length>r.start?r.text.length:0)-o),i=a.slice(n,s),l=Math.max(e.end,r.end-e.text.length+(e.end-e.start));return vf(t,{start:n,end:l,text:i})}function yg(t){var{path:e,diff:r}=t;return{anchor:{path:e,offset:r.start},focus:{path:e,offset:r.end}}}function Is(t,e){var{path:r,offset:n}=e;if(!d.hasPath(t,r))return null;var o=V.get(t,r);if(!Q.isText(o))return null;var a=d.above(t,{match:i=>Z.isElement(i)&&d.isBlock(t,i),at:r});if(!a)return null;for(;n>o.text.length;){var s=d.next(t,{at:r,match:Q.isText});if(!s||!B.isDescendant(s[1],a[1]))return null;n-=o.text.length,o=s[0],r=s[1]}return{path:r,offset:n}}function qc(t,e){var r=Is(t,e.anchor);if(!r)return null;if(N.isCollapsed(e))return{anchor:r,focus:r};var n=Is(t,e.focus);return n?{anchor:r,focus:n}:null}function Ps(t,e,r){var n=Bt.get(t),o=n?.find(f=>{var{path:v}=f;return B.equals(v,e.path)});if(!o||e.offset<=o.diff.start)return me.transform(e,r,{affinity:"backward"});var{diff:a}=o;if(e.offset<=a.start+a.text.length){var s={path:e.path,offset:a.start},i=me.transform(s,r,{affinity:"backward"});return i?{path:i.path,offset:i.offset+e.offset-a.start}:null}var l={path:e.path,offset:e.offset-a.text.length+a.end-a.start},c=me.transform(l,r,{affinity:"backward"});return c?r.type==="split_node"&&B.equals(r.path,e.path)&&l.offset<r.position&&a.start<r.position?c:{path:c.path,offset:c.offset+a.text.length-a.end+a.start}:null}function $c(t,e,r){var n=Ps(t,e.anchor,r);if(!n)return null;if(N.isCollapsed(e))return{anchor:n,focus:n};var o=Ps(t,e.focus,r);return o?{anchor:n,focus:o}:null}function Tg(t,e){var{path:r,diff:n,id:o}=t;switch(e.type){case"insert_text":return!B.equals(e.path,r)||e.offset>=n.end?t:e.offset<=n.start?{diff:{start:e.text.length+n.start,end:e.text.length+n.end,text:n.text},id:o,path:r}:{diff:{start:n.start,end:n.end+e.text.length,text:n.text},id:o,path:r};case"remove_text":return!B.equals(e.path,r)||e.offset>=n.end?t:e.offset+e.text.length<=n.start?{diff:{start:n.start-e.text.length,end:n.end-e.text.length,text:n.text},id:o,path:r}:{diff:{start:n.start,end:n.end-e.text.length,text:n.text},id:o,path:r};case"split_node":return!B.equals(e.path,r)||e.position>=n.end?{diff:n,id:o,path:B.transform(r,e,{affinity:"backward"})}:e.position>n.start?{diff:{start:n.start,end:Math.min(e.position,n.end),text:n.text},id:o,path:r}:{diff:{start:n.start-e.position,end:n.end-e.position,text:n.text},id:o,path:B.transform(r,e,{affinity:"forward"})};case"merge_node":return B.equals(e.path,r)?{diff:{start:n.start+e.position,end:n.end+e.position,text:n.text},id:o,path:B.transform(r,e)}:{diff:n,id:o,path:B.transform(r,e)}}var a=B.transform(r,e);return a?{diff:n,path:a,id:o}:null}function Vc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function fa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Vc(Object(r),!0).forEach(function(n){Da(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var _g=25,Sg=200,bg=function(){},Ng=t=>t?.constructor.name==="DataTransfer";function Og(t){var{editor:e,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:n}=t,o=!1,a=null,s=null,i=null,l=0,c=!1,f=()=>{var k=Nr.get(e);if(Nr.delete(e),k){var{selection:Y}=e,W=qc(e,k);W&&(!Y||!N.equals(W,Y))&&z.select(e,W)}},v=()=>{var k=br.get(e);if(br.delete(e),!!k){if(k.at){var Y=me.isPoint(k.at)?Is(e,k.at):qc(e,k.at);if(!Y)return;var W=d.range(e,Y);(!e.selection||!N.equals(e.selection,W))&&z.select(e,Y)}k.run()}},p=()=>{if(s&&(clearTimeout(s),s=null),i&&(clearTimeout(i),i=null),!F()&&!w()){f();return}o||(o=!0,setTimeout(()=>o=!1)),w()&&(o="action");var k=e.selection&&d.rangeRef(e,e.selection,{affinity:"forward"});gr.set(e,e.marks),bg("flush",br.get(e),Bt.get(e));for(var Y=F(),W;W=($=Bt.get(e))===null||$===void 0?void 0:$[0];){var $,ne,fe=qt.get(e);fe!==void 0&&(qt.delete(e),e.marks=fe),fe&&c===!1&&(c=null);var ge=yg(W);(!e.selection||!N.equals(e.selection,ge))&&z.select(e,ge),W.diff.text?d.insertText(e,W.diff.text):d.deleteFragment(e),Bt.set(e,(ne=Bt.get(e))===null||ne===void 0?void 0:ne.filter(Se=>{var{id:Ee}=Se;return Ee!==W.id})),Bg(e,W)||(Y=!1,br.delete(e),gr.delete(e),o="action",Nr.delete(e),r.cancel(),n.cancel(),k?.unref())}var X=k?.unref();if(X&&!Nr.get(e)&&(!e.selection||!N.equals(X,e.selection))&&z.select(e,X),w()){v();return}Y&&r(),r.flush(),n.flush(),f();var ue=gr.get(e);gr.delete(e),ue!==void 0&&(e.marks=ue,e.onChange())},h=k=>{a&&clearTimeout(a),a=setTimeout(()=>{Xr.set(e,!1),p()},_g)},m=k=>{Xr.set(e,!0),a&&(clearTimeout(a),a=null)},u=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,W=Ts.get(e);if(!!W){if(F()||Y){W.style.display="none";return}W.style.removeProperty("display")}},C=(k,Y)=>{var W,$=(W=Bt.get(e))!==null&&W!==void 0?W:[];Bt.set(e,$);var ne=V.leaf(e,k),fe=$.findIndex(ue=>B.equals(ue.path,k));if(fe<0){var ge=vf(ne.text,Y);ge&&$.push({path:k,diff:Y,id:l++}),u();return}var X=Fg(ne.text,$[fe].diff,Y);if(!X){$.splice(fe,1),u();return}$[fe]=fa(fa({},$[fe]),{},{diff:X})},A=function(Y){var{at:W}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};c=!1,Nr.delete(e),r.cancel(),n.cancel(),w()&&p(),br.set(e,{at:W,run:Y}),i=setTimeout(p)},E=k=>{var Y;s&&(clearTimeout(s),s=null);var{inputType:W}=k,$=null,ne=k.dataTransfer||k.data||void 0;c!==!1&&W!=="insertText"&&W!=="insertCompositionText"&&(c=!1);var[fe]=k.getTargetRanges();fe&&($=R.toSlateRange(e,fe,{exactMatch:!1,suppressThrow:!0}));var ge=R.getWindow(e),X=ge.getSelection();if(!$&&X&&(fe=X,$=R.toSlateRange(e,X,{exactMatch:!1,suppressThrow:!0})),$=(Y=$)!==null&&Y!==void 0?Y:e.selection,!!$){var ue=!0;if(W.startsWith("delete")){if(N.isExpanded($)){var[Se,Ee]=N.edges($),Ze=V.leaf(e,Se.path);if(Ze.text.length===Se.offset&&Ee.offset===0){var x=d.next(e,{at:Se.path,match:Q.isText});x&&B.equals(x[1],Ee.path)&&($={anchor:Ee,focus:Ee})}}var q=W.endsWith("Backward")?"backward":"forward",[j,K]=N.edges($),[ce,oe]=d.leaf(e,j.path),ve={text:"",start:j.offset,end:K.offset},_e=Bt.get(e),be=_e?.find(Ut=>B.equals(Ut.path,oe)),Pe=be?[be.diff,ve]:[ve],Be=hf(ce.text,...Pe);if(Be.length===0&&(ue=!1),N.isExpanded($)){if(ue&&B.equals($.anchor.path,$.focus.path)){var Xe={path:$.anchor.path,offset:j.offset},mt=d.range(e,Xe,Xe);return P(mt),C($.anchor.path,{text:"",end:K.offset,start:j.offset})}return A(()=>d.deleteFragment(e,{direction:q}),{at:$})}}switch(W){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return A(()=>d.deleteFragment(e),{at:$});case"deleteContent":case"deleteContentForward":{var{anchor:Je}=$;if(ue&&N.isCollapsed($)){var Nt=V.leaf(e,Je.path);if(Je.offset<Nt.text.length)return C(Je.path,{text:"",start:Je.offset,end:Je.offset+1})}return A(()=>d.deleteForward(e),{at:$})}case"deleteContentBackward":{var zt,{anchor:pt}=$,Ot=Ns(fe)?fe.isCollapsed:!!((zt=fe)!==null&&zt!==void 0&&zt.collapsed);return ue&&Ot&&N.isCollapsed($)&&pt.offset>0?C(pt.path,{text:"",start:pt.offset-1,end:pt.offset}):A(()=>d.deleteBackward(e),{at:$})}case"deleteEntireSoftLine":return A(()=>{d.deleteBackward(e,{unit:"line"}),d.deleteForward(e,{unit:"line"})},{at:$});case"deleteHardLineBackward":return A(()=>d.deleteBackward(e,{unit:"block"}),{at:$});case"deleteSoftLineBackward":return A(()=>d.deleteBackward(e,{unit:"line"}),{at:$});case"deleteHardLineForward":return A(()=>d.deleteForward(e,{unit:"block"}),{at:$});case"deleteSoftLineForward":return A(()=>d.deleteForward(e,{unit:"line"}),{at:$});case"deleteWordBackward":return A(()=>d.deleteBackward(e,{unit:"word"}),{at:$});case"deleteWordForward":return A(()=>d.deleteForward(e,{unit:"word"}),{at:$});case"insertLineBreak":return A(()=>d.insertSoftBreak(e),{at:$});case"insertParagraph":return A(()=>d.insertBreak(e),{at:$});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(Ng(ne))return A(()=>R.insertData(e,ne),{at:$});var xe=ne??"";if(qt.get(e)&&(xe=xe.replace("\uFEFF","")),W==="insertText"&&/.*\n.*\n$/.test(xe)&&(xe=xe.slice(0,-1)),xe.includes(`
`))return A(()=>{var Ut=xe.split(`
`);Ut.forEach((jr,Do)=>{jr&&d.insertText(e,jr),Do!==Ut.length-1&&d.insertSoftBreak(e)})},{at:$});if(B.equals($.anchor.path,$.focus.path)){var[cr,ln]=N.edges($),at={start:cr.offset,end:ln.offset,text:xe};if(xe&&c&&W==="insertCompositionText"){var Wt=c.start+c.text.search(/\S|$/),go=at.start+at.text.search(/\S|$/);go===Wt+1&&at.end===c.start+c.text.length?(at.start-=1,c=null,U()):c=!1}else W==="insertText"?c===null?c=at:c&&N.isCollapsed($)&&c.end+c.text.length===cr.offset?c=fa(fa({},c),{},{text:c.text+xe}):c=!1:c=!1;if(ue){C(cr.path,at);return}}return A(()=>d.insertText(e,xe),{at:$})}}}},w=()=>!!br.get(e),F=()=>{var k;return!!((k=Bt.get(e))!==null&&k!==void 0&&k.length)},S=()=>w()||F(),M=()=>o,P=k=>{Nr.set(e,k),s&&(clearTimeout(s),s=null);var{selection:Y}=e;if(!!k){var W=!Y||!B.equals(Y.anchor.path,k.anchor.path),$=!Y||!B.equals(Y.anchor.path.slice(0,-1),k.anchor.path.slice(0,-1));(W&&c||$)&&(c=!1),(W||F())&&(s=setTimeout(p,Sg))}},L=()=>{(w()||!F())&&p()},O=k=>{F()||(u(!0),setTimeout(u))},U=()=>{w()||(i=setTimeout(p))},G=k=>{if(!(F()||w())&&k.some(W=>Ws(e,W,k))){var Y;(Y=cf.get(e))===null||Y===void 0||Y()}};return{flush:p,scheduleFlush:U,hasPendingDiffs:F,hasPendingAction:w,hasPendingChanges:S,isFlushing:M,handleUserSelect:P,handleCompositionEnd:h,handleCompositionStart:m,handleDOMBeforeInput:E,handleKeyDown:O,handleDomMutations:G,handleInput:L}}function Ig(){var t=(0,I.useRef)(!1);return(0,I.useEffect)(()=>(t.current=!0,()=>{t.current=!1}),[]),t.current}var ao=pa?I.useLayoutEffect:I.useEffect;function Pg(t,e,r){var[n]=(0,I.useState)(()=>new MutationObserver(e));ao(()=>{n.takeRecords()}),(0,I.useEffect)(()=>{if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(t.current,r),()=>n.disconnect()},[n,t,r])}var Lg=["node"];function Kc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function kg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Kc(Object(r),!0).forEach(function(n){Da(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Mg={subtree:!0,childList:!0,characterData:!0},Rg=St?t=>{var{node:e}=t,r=Fn(t,Lg);if(!St)return null;var n=Ir(),o=Ig(),[a]=(0,I.useState)(()=>Og(kg({editor:n},r)));return Pg(e,a.handleDomMutations,Mg),js.set(n,a.scheduleFlush),o&&a.flush(),a}:()=>null,jg=["anchor","focus"],zg=["anchor","focus"],Wg=(t,e)=>Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(r=>e.hasOwnProperty(r)&&t[r]===e[r]),gf=(t,e)=>{var r=Fn(t,jg),n=Fn(e,zg);return t[yn]===e[yn]&&Wg(r,n)},Ug=(t,e)=>{if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var n=t[r],o=e[r];if(!N.equals(n,o)||!gf(n,o))return!1}return!0},Hg=(t,e)=>{if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var n=t[r],o=e[r];if(n.anchor.offset!==o.anchor.offset||n.focus.offset!==o.focus.offset||!gf(n,o))return!1}return!0},Gg=t=>{var{isLast:e,leaf:r,parent:n,text:o}=t,a=Ir(),s=R.findPath(a,o),i=B.parent(s),l=r[ff]===!0;return a.isVoid(n)?I.default.createElement(ys,{length:V.string(n).length}):r.text===""&&n.children[n.children.length-1]===o&&!a.isInline(n)&&d.string(a,i)===""?I.default.createElement(ys,{isLineBreak:!0,isMarkPlaceholder:l}):r.text===""?I.default.createElement(ys,{isMarkPlaceholder:l}):e&&r.text.slice(-1)===`
`?I.default.createElement(Zc,{isTrailing:!0,text:r.text}):I.default.createElement(Zc,{text:r.text})},Zc=t=>{var{text:e,isTrailing:r=!1}=t,n=(0,I.useRef)(null),o=()=>"".concat(e??"").concat(r?`
`:""),[a]=(0,I.useState)(o);return ao(()=>{var s=o();n.current&&n.current.textContent!==s&&(n.current.textContent=s)}),I.default.createElement(Yg,{ref:n},a)},Yg=(0,I.memo)((0,I.forwardRef)((t,e)=>I.default.createElement("span",{"data-slate-string":!0,ref:e},t.children))),ys=t=>{var{length:e=0,isLineBreak:r=!1,isMarkPlaceholder:n=!1}=t,o={"data-slate-zero-width":r?"n":"z","data-slate-length":e};return n&&(o["data-slate-mark-placeholder"]=!0),I.default.createElement("span",Object.assign({},o),!St||!r?"\uFEFF":null,r?I.default.createElement("br",null):null)};function qg(t,e){t.current&&(t.current.disconnect(),e&&(t.current=null))}function Xc(t){t.current&&(clearTimeout(t.current),t.current=null)}var $g=t=>{var{leaf:e,isLast:r,text:n,parent:o,renderPlaceholder:a,renderLeaf:s=E=>I.default.createElement(Kg,Object.assign({},E))}=t,i=Ir(),l=(0,I.useRef)(null),c=(0,I.useRef)(null),[f,v]=(0,I.useState)(!1),p=(0,I.useRef)(null),h=(0,I.useCallback)(E=>{if(qg(l,E==null),E==null){var w;Ts.delete(i),(w=e.onPlaceholderResize)===null||w===void 0||w.call(e,null)}else{if(Ts.set(i,E),!l.current){var F=window.ResizeObserver||xs;l.current=new F(()=>{var S;(S=e.onPlaceholderResize)===null||S===void 0||S.call(e,E)})}l.current.observe(E),c.current=E}},[c,e,i]),m=I.default.createElement(Gg,{isLast:r,leaf:e,parent:o,text:n}),u=e[yn];if((0,I.useEffect)(()=>(u?p.current||(p.current=setTimeout(()=>{v(!0),p.current=null},300)):(Xc(p),v(!1)),()=>Xc(p)),[u,v]),u&&f){var C={children:e.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:ro?"inherit":void 0},contentEditable:!1,ref:h}};m=I.default.createElement(I.default.Fragment,null,a(C),m)}var A={"data-slate-leaf":!0};return s({attributes:A,children:m,leaf:e,text:n})},Vg=I.default.memo($g,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&Q.equals(e.leaf,t.leaf)&&e.leaf[yn]===t.leaf[yn]),Kg=t=>{var{attributes:e,children:r}=t;return I.default.createElement("span",Object.assign({},e),r)},Zg=t=>{for(var{decorations:e,isLast:r,parent:n,renderPlaceholder:o,renderLeaf:a,text:s}=t,i=Ir(),l=(0,I.useRef)(null),c=Q.decorations(s,e),f=R.findKey(i,s),v=[],p=0;p<c.length;p++){var h=c[p];v.push(I.default.createElement(Vg,{isLast:r&&p===c.length-1,key:"".concat(f.id,"-").concat(p),renderPlaceholder:o,leaf:h,text:s,parent:n,renderLeaf:a}))}var m=(0,I.useCallback)(u=>{var C=Ca.get(i);u?(C?.set(f,u),Jr.set(s,u),oo.set(u,s)):(C?.delete(f),Jr.delete(s),l.current&&oo.delete(l.current)),l.current=u},[l,i,f,s]);return I.default.createElement("span",{"data-slate-node":"text",ref:m},v)},Df=I.default.memo(Zg,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&Hg(e.decorations,t.decorations)),Xg=t=>{var{decorations:e,element:r,renderElement:n=E=>I.default.createElement(Qg,Object.assign({},E)),renderPlaceholder:o,renderLeaf:a,selection:s}=t,i=Ir(),l=rD(),c=i.isInline(r),f=R.findKey(i,r),v=(0,I.useCallback)(E=>{var w=Ca.get(i);E?(w?.set(f,E),Jr.set(r,E),oo.set(E,r)):(w?.delete(f),Jr.delete(r))},[i,f,r]),p=Ef({decorations:e,node:r,renderElement:n,renderPlaceholder:o,renderLeaf:a,selection:s}),h={"data-slate-node":"element",ref:v};if(c&&(h["data-slate-inline"]=!0),!c&&d.hasInlines(i,r)){var m=V.string(r),u=(0,Ls.default)(m);u==="rtl"&&(h.dir=u)}if(d.isVoid(i,r)){h["data-slate-void"]=!0,!l&&c&&(h.contentEditable=!1);var C=c?"span":"div",[[A]]=V.texts(r);p=I.default.createElement(C,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},I.default.createElement(Df,{renderPlaceholder:o,decorations:[],isLast:!1,parent:r,text:A})),Ms.set(A,0),Rs.set(A,r)}return n({attributes:h,children:p,element:r})},Jg=I.default.memo(Xg,(t,e)=>t.element===e.element&&t.renderElement===e.renderElement&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&Ug(t.decorations,e.decorations)&&(t.selection===e.selection||!!t.selection&&!!e.selection&&N.equals(t.selection,e.selection))),Qg=t=>{var{attributes:e,children:r,element:n}=t,o=Ir(),a=o.isInline(n)?"span":"div";return I.default.createElement(a,Object.assign({},e,{style:{position:"relative"}}),r)},Cf=(0,I.createContext)(()=>[]),eD=()=>(0,I.useContext)(Cf),tD=(0,I.createContext)(!1);var Ef=t=>{for(var{decorations:e,node:r,renderElement:n,renderPlaceholder:o,renderLeaf:a,selection:s}=t,i=eD(),l=Ir(),c=R.findPath(l,r),f=[],v=Z.isElement(r)&&!l.isInline(r)&&d.hasInlines(l,r),p=0;p<r.children.length;p++){var h=c.concat(p),m=r.children[p],u=R.findKey(l,m),C=d.range(l,h),A=s&&N.intersection(C,s),E=i([m,h]);for(var w of e){var F=N.intersection(w,C);F&&E.push(F)}Z.isElement(m)?f.push(I.default.createElement(tD.Provider,{key:"provider-".concat(u.id),value:!!A},I.default.createElement(Jg,{decorations:E,element:m,key:u.id,renderElement:n,renderPlaceholder:o,renderLeaf:a,selection:A}))):f.push(I.default.createElement(Df,{decorations:E,key:u.id,isLast:v&&p===r.children.length-1,parent:r,renderPlaceholder:o,renderLeaf:a,text:m})),Ms.set(m,p),Rs.set(m,r)}return f},Af=(0,I.createContext)(!1),rD=()=>(0,I.useContext)(Af),Bf=(0,I.createContext)(null),nD=()=>{var t=(0,I.useContext)(Bf);if(!t)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:e}=t;return e};function oD(){var t=Ir(),e=(0,I.useRef)(!1),r=(0,I.useRef)(0),n=(0,I.useCallback)(()=>{if(!e.current){e.current=!0;var o=R.getWindow(t);o.cancelAnimationFrame(r.current),r.current=o.requestAnimationFrame(()=>{e.current=!1})}},[t]);return(0,I.useEffect)(()=>()=>cancelAnimationFrame(r.current),[]),{receivedUserInput:e,onUserInput:n}}var aD=3,sD={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},iD={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},uD={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Re=t=>{var e=sD[t],r=iD[t],n=uD[t],o=e&&(0,ma.isKeyHotkey)(e),a=r&&(0,ma.isKeyHotkey)(r),s=n&&(0,ma.isKeyHotkey)(n);return i=>!!(o&&o(i)||Yc&&a&&a(i)||!Yc&&s&&s(i))},We={isBold:Re("bold"),isCompose:Re("compose"),isMoveBackward:Re("moveBackward"),isMoveForward:Re("moveForward"),isDeleteBackward:Re("deleteBackward"),isDeleteForward:Re("deleteForward"),isDeleteLineBackward:Re("deleteLineBackward"),isDeleteLineForward:Re("deleteLineForward"),isDeleteWordBackward:Re("deleteWordBackward"),isDeleteWordForward:Re("deleteWordForward"),isExtendBackward:Re("extendBackward"),isExtendForward:Re("extendForward"),isExtendLineBackward:Re("extendLineBackward"),isExtendLineForward:Re("extendLineForward"),isItalic:Re("italic"),isMoveLineBackward:Re("moveLineBackward"),isMoveLineForward:Re("moveLineForward"),isMoveWordBackward:Re("moveWordBackward"),isMoveWordForward:Re("moveWordForward"),isRedo:Re("redo"),isSoftBreak:Re("insertSoftBreak"),isSplitBlock:Re("splitBlock"),isTransposeCharacter:Re("transposeCharacter"),isUndo:Re("undo")},lD=(t,e)=>{var r=[],n=()=>{r=[]},o=s=>{if(!!e.current){var i=s.filter(l=>Ws(t,l,s));r.push(...i)}};function a(){r.length>0&&(r.reverse().forEach(s=>{s.type!=="characterData"&&(s.removedNodes.forEach(i=>{s.target.insertBefore(i,s.nextSibling)}),s.addedNodes.forEach(i=>{s.target.removeChild(i)}))}),n())}return{registerMutations:o,restoreDOM:a,clear:n}},cD={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0},ga=class extends I.Component{constructor(){super(...arguments),this.context=null,this.manager=null,this.mutationObserver=null}observe(){var e,{node:r}=this.props;if(!r.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(e=this.mutationObserver)===null||e===void 0||e.observe(r.current,cD)}componentDidMount(){var{receivedUserInput:e}=this.props,r=this.context;this.manager=lD(r,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,r,n,o=(e=this.mutationObserver)===null||e===void 0?void 0:e.takeRecords();if(o!=null&&o.length){var a;(a=this.manager)===null||a===void 0||a.registerMutations(o)}return(r=this.mutationObserver)===null||r===void 0||r.disconnect(),(n=this.manager)===null||n===void 0||n.restoreDOM(),null}componentDidUpdate(){var e;(e=this.manager)===null||e===void 0||e.clear(),this.observe()}componentWillUnmount(){var e;(e=this.mutationObserver)===null||e===void 0||e.disconnect()}render(){return this.props.children}};ga.contextType=ks;var fD=St?ga:t=>{var{children:e}=t;return I.default.createElement(I.default.Fragment,null,e)},dD=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],mD=["text"];function Jc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function wn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Jc(Object(r),!0).forEach(function(n){Da(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var pD=t=>I.default.createElement(I.default.Fragment,null,Ef(t)),xf=t=>{var e=(0,I.useCallback)(x=>I.default.createElement(hD,Object.assign({},x)),[]),{autoFocus:r,decorate:n=vD,onDOMBeforeInput:o,placeholder:a,readOnly:s=!1,renderElement:i,renderLeaf:l,renderPlaceholder:c=e,scrollSelectionIntoView:f=gD,style:v={},as:p="div",disableDefaultStyles:h=!1}=t,m=Fn(t,dD),u=nD(),[C,A]=(0,I.useState)(!1),E=(0,I.useRef)(null),w=(0,I.useRef)([]),[F,S]=(0,I.useState)(),{onUserInput:M,receivedUserInput:P}=oD(),[,L]=(0,I.useReducer)(x=>x+1,0);cf.set(u,L),Ss.set(u,s);var O=(0,I.useMemo)(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);(0,I.useEffect)(()=>{E.current&&r&&E.current.focus()},[r]);var U=(0,I.useRef)(),G=(0,I.useMemo)(()=>(0,af.default)(()=>{var x=U.current;if((St||!R.isComposing(u))&&(!O.isUpdatingSelection||x!=null&&x.isFlushing())&&!O.isDraggingInternally){var q=R.findDocumentOrShadowRoot(u),{activeElement:j}=q,K=R.toDOMNode(u,u),ce=q.getSelection();if(j===K?(O.latestElement=j,Zr.set(u,!0)):Zr.delete(u),!ce)return z.deselect(u);var{anchorNode:oe,focusNode:ve}=ce,_e=R.hasEditableTarget(u,oe)||R.isTargetInsideNonReadonlyVoid(u,oe),be=R.hasEditableTarget(u,ve)||R.isTargetInsideNonReadonlyVoid(u,ve);if(_e&&be){var Pe=R.toSlateRange(u,ce,{exactMatch:!1,suppressThrow:!0});Pe&&(!R.isComposing(u)&&!(x!=null&&x.hasPendingChanges())&&!(x!=null&&x.isFlushing())?z.select(u,Pe):x?.handleUserSelect(Pe))}s&&(!_e||!be)&&z.deselect(u)}},100),[u,s,O]),k=(0,I.useMemo)(()=>(0,of.default)(G,0),[G]);U.current=Rg({node:E,onDOMSelectionChange:G,scheduleOnDOMSelectionChange:k}),ao(()=>{var x,q,j;E.current&&(j=zs(E.current))?(lf.set(u,j),ha.set(u,E.current),Jr.set(u,E.current),oo.set(E.current,u)):Jr.delete(u);var{selection:K}=u,ce=R.findDocumentOrShadowRoot(u),oe=ce.getSelection();if(!(!oe||!R.isFocused(u)||(x=U.current)!==null&&x!==void 0&&x.hasPendingAction())){var ve=Xe=>{var mt=oe.type!=="None";if(!(!K&&!mt)){var Je=ha.get(u),Nt=!1;if(Je.contains(oe.anchorNode)&&Je.contains(oe.focusNode)&&(Nt=!0),mt&&Nt&&K&&!Xe){var zt=R.toSlateRange(u,oe,{exactMatch:!0,suppressThrow:!0});if(zt&&N.equals(zt,K)){var pt;if(!O.hasMarkPlaceholder)return;var{anchorNode:Ot}=oe;if(Ot!=null&&(pt=Ot.parentElement)!==null&&pt!==void 0&&pt.hasAttribute("data-slate-mark-placeholder"))return}}if(K&&!R.hasRange(u,K)){u.selection=R.toSlateRange(u,oe,{exactMatch:!1,suppressThrow:!0});return}O.isUpdatingSelection=!0;var xe=K&&R.toDOMRange(u,K);return xe?(N.isBackward(K)?oe.setBaseAndExtent(xe.endContainer,xe.endOffset,xe.startContainer,xe.startOffset):oe.setBaseAndExtent(xe.startContainer,xe.startOffset,xe.endContainer,xe.endOffset),f(u,xe)):oe.removeAllRanges(),xe}},_e=ve(),be=((q=U.current)===null||q===void 0?void 0:q.isFlushing())==="action";if(!St||!be){setTimeout(()=>{if(_e&&va){var Xe=R.toDOMNode(u,u);Xe.focus()}O.isUpdatingSelection=!1});return}var Pe=null,Be=requestAnimationFrame(()=>{if(be){var Xe=mt=>{try{var Je=R.toDOMNode(u,u);Je.focus(),ve(mt)}catch{}};Xe(),Pe=setTimeout(()=>{Xe(!0),O.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(Be),Pe&&clearTimeout(Pe)}}});var Y=(0,I.useCallback)(x=>{if(M(),!s&&R.hasEditableTarget(u,x.target)&&!DD(x,o)){var q;if(U.current)return U.current.handleDOMBeforeInput(x);k.flush(),G.flush();var{selection:j}=u,{inputType:K}=x,ce=x.dataTransfer||x.data||void 0,oe=K==="insertCompositionText"||K==="deleteCompositionText";if(oe&&R.isComposing(u))return;var ve=!1;if(K==="insertText"&&j&&N.isCollapsed(j)&&x.data&&x.data.length===1&&/[a-z ]/i.test(x.data)&&j.anchor.offset!==0){var _e,be;ve=!0,u.marks&&(ve=!1);var{anchor:Pe}=j,[Be,Xe]=R.toDOMPoint(u,Pe),mt=(_e=Be.parentElement)===null||_e===void 0?void 0:_e.closest("a"),Je=R.getWindow(u);if(ve&&mt&&R.hasDOMNode(u,mt)){var Nt,zt=Je?.document.createTreeWalker(mt,NodeFilter.SHOW_TEXT).lastChild();zt===Be&&((Nt=zt.textContent)===null||Nt===void 0?void 0:Nt.length)===Xe&&(ve=!1)}if(ve&&Be.parentElement&&(Je==null||(be=Je.getComputedStyle(Be.parentElement))===null||be===void 0?void 0:be.whiteSpace)==="pre"){var pt=d.above(u,{at:Pe.path,match:Wt=>Z.isElement(Wt)&&d.isBlock(u,Wt)});pt&&V.string(pt[0]).includes("	")&&(ve=!1)}}if(!K.startsWith("delete")||K.startsWith("deleteBy")){var[Ot]=x.getTargetRanges();if(Ot){var xe=R.toSlateRange(u,Ot,{exactMatch:!1,suppressThrow:!1});if(!j||!N.equals(j,xe)){ve=!1;var cr=!oe&&u.selection&&d.rangeRef(u,u.selection);z.select(u,xe),cr&&no.set(u,cr)}}}if(oe)return;if(ve||x.preventDefault(),j&&N.isExpanded(j)&&K.startsWith("delete")){var ln=K.endsWith("Backward")?"backward":"forward";d.deleteFragment(u,{direction:ln});return}switch(K){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{d.deleteFragment(u);break}case"deleteContent":case"deleteContentForward":{d.deleteForward(u);break}case"deleteContentBackward":{d.deleteBackward(u);break}case"deleteEntireSoftLine":{d.deleteBackward(u,{unit:"line"}),d.deleteForward(u,{unit:"line"});break}case"deleteHardLineBackward":{d.deleteBackward(u,{unit:"block"});break}case"deleteSoftLineBackward":{d.deleteBackward(u,{unit:"line"});break}case"deleteHardLineForward":{d.deleteForward(u,{unit:"block"});break}case"deleteSoftLineForward":{d.deleteForward(u,{unit:"line"});break}case"deleteWordBackward":{d.deleteBackward(u,{unit:"word"});break}case"deleteWordForward":{d.deleteForward(u,{unit:"word"});break}case"insertLineBreak":d.insertSoftBreak(u);break;case"insertParagraph":{d.insertBreak(u);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{K==="insertFromComposition"&&R.isComposing(u)&&(A(!1),Xr.set(u,!1)),ce?.constructor.name==="DataTransfer"?R.insertData(u,ce):typeof ce=="string"&&(ve?w.current.push(()=>d.insertText(u,ce)):d.insertText(u,ce));break}}var at=(q=no.get(u))===null||q===void 0?void 0:q.unref();no.delete(u),at&&(!u.selection||!N.equals(u.selection,at))&&z.select(u,at)}},[u,G,M,o,s,k]),W=(0,I.useCallback)(x=>{x==null?(G.cancel(),k.cancel(),ha.delete(u),Jr.delete(u),E.current&&Sr&&E.current.removeEventListener("beforeinput",Y)):Sr&&x.addEventListener("beforeinput",Y),E.current=x},[G,k,u,Y]);ao(()=>{var x=R.getWindow(u);return x.document.addEventListener("selectionchange",k),()=>{x.document.removeEventListener("selectionchange",k)}},[k]);var $=n([u,[]]),ne=a&&u.children.length===1&&Array.from(V.texts(u)).length===1&&V.string(u)===""&&!C,fe=(0,I.useCallback)(x=>{if(x&&ne){var q;S((q=x.getBoundingClientRect())===null||q===void 0?void 0:q.height)}else S(void 0)},[ne]);if(ne){var ge=d.start(u,[]);$.push({[yn]:!0,placeholder:a,onPlaceholderResize:fe,anchor:ge,focus:ge})}var{marks:X}=u;if(O.hasMarkPlaceholder=!1,u.selection&&N.isCollapsed(u.selection)&&X){var{anchor:ue}=u.selection,Se=V.leaf(u,ue.path),Ee=Fn(Se,mD);if(!Q.equals(Se,X,{loose:!0})){O.hasMarkPlaceholder=!0;var Ze=Object.fromEntries(Object.keys(Ee).map(x=>[x,null]));$.push(wn(wn(wn({[ff]:!0},Ze),X),{},{anchor:ue,focus:ue}))}}return(0,I.useEffect)(()=>{setTimeout(()=>{var{selection:x}=u;if(x){var{anchor:q}=x,j=V.leaf(u,q.path);if(X&&!Q.equals(j,X,{loose:!0})){qt.set(u,X);return}}qt.delete(u)})}),I.default.createElement(Af.Provider,{value:s},I.default.createElement(Cf.Provider,{value:n},I.default.createElement(fD,{node:E,receivedUserInput:P},I.default.createElement(p,Object.assign({role:s?void 0:"textbox","aria-multiline":s?void 0:!0},m,{spellCheck:Sr||!pa?m.spellCheck:!1,autoCorrect:Sr||!pa?m.autoCorrect:"false",autoCapitalize:Sr||!pa?m.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!s,zindex:-1,suppressContentEditableWarning:!0,ref:W,style:wn(wn({},h?{}:wn({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},F?{minHeight:F}:{})),v),onBeforeInput:(0,I.useCallback)(x=>{if(!Sr&&!s&&!vt(x,m.onBeforeInput)&&R.hasSelectableTarget(u,x.target)&&(x.preventDefault(),!R.isComposing(u))){var q=x.data;d.insertText(u,q)}},[m.onBeforeInput,u,s]),onInput:(0,I.useCallback)(x=>{if(!vt(x,m.onInput)){if(U.current){U.current.handleInput();return}for(var q of w.current)q();w.current=[]}},[m.onInput]),onBlur:(0,I.useCallback)(x=>{if(!(s||O.isUpdatingSelection||!R.hasSelectableTarget(u,x.target)||vt(x,m.onBlur))){var q=R.findDocumentOrShadowRoot(u);if(O.latestElement!==q.activeElement){var{relatedTarget:j}=x,K=R.toDOMNode(u,u);if(j!==K&&!(Lt(j)&&j.hasAttribute("data-slate-spacer"))){if(j!=null&&Or(j)&&R.hasDOMNode(u,j)){var ce=R.toSlateNode(u,j);if(Z.isElement(ce)&&!u.isVoid(ce))return}if(ro){var oe=q.getSelection();oe?.removeAllRanges()}Zr.delete(u)}}}},[s,O.isUpdatingSelection,O.latestElement,u,m.onBlur]),onClick:(0,I.useCallback)(x=>{if(R.hasTarget(u,x.target)&&!vt(x,m.onClick)&&Or(x.target)){var q=R.toSlateNode(u,x.target),j=R.findPath(u,q);if(!d.hasPath(u,j)||V.get(u,j)!==q)return;if(x.detail===aD&&j.length>=1){var K=j;if(!(Z.isElement(q)&&d.isBlock(u,q))){var ce,oe=d.above(u,{match:mt=>Z.isElement(mt)&&d.isBlock(u,mt),at:j});K=(ce=oe?.[1])!==null&&ce!==void 0?ce:j.slice(0,1)}var ve=d.range(u,K);z.select(u,ve);return}if(s)return;var _e=d.start(u,j),be=d.end(u,j),Pe=d.void(u,{at:_e}),Be=d.void(u,{at:be});if(Pe&&Be&&B.equals(Pe[1],Be[1])){var Xe=d.range(u,_e);z.select(u,Xe)}}},[u,m.onClick,s]),onCompositionEnd:(0,I.useCallback)(x=>{if(R.hasSelectableTarget(u,x.target)){var q;if(R.isComposing(u)&&(A(!1),Xr.set(u,!1)),(q=U.current)===null||q===void 0||q.handleCompositionEnd(x),vt(x,m.onCompositionEnd)||St)return;if(!ro&&!cg&&!sg&&!dg&&!fg&&x.data){var j=qt.get(u);qt.delete(u),j!==void 0&&(gr.set(u,u.marks),u.marks=j),d.insertText(u,x.data);var K=gr.get(u);gr.delete(u),K!==void 0&&(u.marks=K)}}},[m.onCompositionEnd,u]),onCompositionUpdate:(0,I.useCallback)(x=>{R.hasSelectableTarget(u,x.target)&&!vt(x,m.onCompositionUpdate)&&(R.isComposing(u)||(A(!0),Xr.set(u,!0)))},[m.onCompositionUpdate,u]),onCompositionStart:(0,I.useCallback)(x=>{if(R.hasSelectableTarget(u,x.target)){var q;if((q=U.current)===null||q===void 0||q.handleCompositionStart(x),vt(x,m.onCompositionStart)||St)return;A(!0);var{selection:j}=u;if(j){if(N.isExpanded(j)){d.deleteFragment(u);return}var K=d.above(u,{match:ve=>Z.isElement(ve)&&d.isInline(u,ve),mode:"highest"});if(K){var[,ce]=K;if(d.isEnd(u,j.anchor,ce)){var oe=d.after(u,ce);z.setSelection(u,{anchor:oe,focus:oe})}}}}},[m.onCompositionStart,u]),onCopy:(0,I.useCallback)(x=>{R.hasSelectableTarget(u,x.target)&&!vt(x,m.onCopy)&&!Qc(x)&&(x.preventDefault(),R.setFragmentData(u,x.clipboardData,"copy"))},[m.onCopy,u]),onCut:(0,I.useCallback)(x=>{if(!s&&R.hasSelectableTarget(u,x.target)&&!vt(x,m.onCut)&&!Qc(x)){x.preventDefault(),R.setFragmentData(u,x.clipboardData,"cut");var{selection:q}=u;if(q)if(N.isExpanded(q))d.deleteFragment(u);else{var j=V.parent(u,q.anchor.path);d.isVoid(u,j)&&z.delete(u)}}},[s,u,m.onCut]),onDragOver:(0,I.useCallback)(x=>{if(R.hasTarget(u,x.target)&&!vt(x,m.onDragOver)){var q=R.toSlateNode(u,x.target);Z.isElement(q)&&d.isVoid(u,q)&&x.preventDefault()}},[m.onDragOver,u]),onDragStart:(0,I.useCallback)(x=>{if(!s&&R.hasTarget(u,x.target)&&!vt(x,m.onDragStart)){var q=R.toSlateNode(u,x.target),j=R.findPath(u,q),K=Z.isElement(q)&&d.isVoid(u,q)||d.void(u,{at:j,voids:!0});if(K){var ce=d.range(u,j);z.select(u,ce)}O.isDraggingInternally=!0,R.setFragmentData(u,x.dataTransfer,"drag")}},[s,u,m.onDragStart,O]),onDrop:(0,I.useCallback)(x=>{if(!s&&R.hasTarget(u,x.target)&&!vt(x,m.onDrop)){x.preventDefault();var q=u.selection,j=R.findEventRange(u,x),K=x.dataTransfer;z.select(u,j),O.isDraggingInternally&&q&&!N.equals(q,j)&&!d.void(u,{at:j,voids:!0})&&z.delete(u,{at:q}),R.insertData(u,K),R.isFocused(u)||R.focus(u)}O.isDraggingInternally=!1},[s,u,m.onDrop,O]),onDragEnd:(0,I.useCallback)(x=>{!s&&O.isDraggingInternally&&m.onDragEnd&&R.hasTarget(u,x.target)&&m.onDragEnd(x),O.isDraggingInternally=!1},[s,O,m,u]),onFocus:(0,I.useCallback)(x=>{if(!s&&!O.isUpdatingSelection&&R.hasEditableTarget(u,x.target)&&!vt(x,m.onFocus)){var q=R.toDOMNode(u,u),j=R.findDocumentOrShadowRoot(u);if(O.latestElement=j.activeElement,va&&x.target!==q){q.focus();return}Zr.set(u,!0)}},[s,O,u,m.onFocus]),onKeyDown:(0,I.useCallback)(x=>{if(!s&&R.hasEditableTarget(u,x.target)){var q;(q=U.current)===null||q===void 0||q.handleKeyDown(x);var{nativeEvent:j}=x;if(R.isComposing(u)&&j.isComposing===!1&&(Xr.set(u,!1),A(!1)),vt(x,m.onKeyDown)||R.isComposing(u))return;var{selection:K}=u,ce=u.children[K!==null?K.focus.path[0]:0],oe=(0,Ls.default)(V.string(ce))==="rtl";if(We.isRedo(j)){x.preventDefault();var ve=u;typeof ve.redo=="function"&&ve.redo();return}if(We.isUndo(j)){x.preventDefault();var _e=u;typeof _e.undo=="function"&&_e.undo();return}if(We.isMoveLineBackward(j)){x.preventDefault(),z.move(u,{unit:"line",reverse:!0});return}if(We.isMoveLineForward(j)){x.preventDefault(),z.move(u,{unit:"line"});return}if(We.isExtendLineBackward(j)){x.preventDefault(),z.move(u,{unit:"line",edge:"focus",reverse:!0});return}if(We.isExtendLineForward(j)){x.preventDefault(),z.move(u,{unit:"line",edge:"focus"});return}if(We.isMoveBackward(j)){x.preventDefault(),K&&N.isCollapsed(K)?z.move(u,{reverse:!oe}):z.collapse(u,{edge:"start"});return}if(We.isMoveForward(j)){x.preventDefault(),K&&N.isCollapsed(K)?z.move(u,{reverse:oe}):z.collapse(u,{edge:"end"});return}if(We.isMoveWordBackward(j)){x.preventDefault(),K&&N.isExpanded(K)&&z.collapse(u,{edge:"focus"}),z.move(u,{unit:"word",reverse:!oe});return}if(We.isMoveWordForward(j)){x.preventDefault(),K&&N.isExpanded(K)&&z.collapse(u,{edge:"focus"}),z.move(u,{unit:"word",reverse:oe});return}if(Sr){if((uf||ro)&&K&&(We.isDeleteBackward(j)||We.isDeleteForward(j))&&N.isCollapsed(K)){var be=V.parent(u,K.anchor.path);if(Z.isElement(be)&&d.isVoid(u,be)&&(d.isInline(u,be)||d.isBlock(u,be))){x.preventDefault(),d.deleteBackward(u,{unit:"block"});return}}}else{if(We.isBold(j)||We.isItalic(j)||We.isTransposeCharacter(j)){x.preventDefault();return}if(We.isSoftBreak(j)){x.preventDefault(),d.insertSoftBreak(u);return}if(We.isSplitBlock(j)){x.preventDefault(),d.insertBreak(u);return}if(We.isDeleteBackward(j)){x.preventDefault(),K&&N.isExpanded(K)?d.deleteFragment(u,{direction:"backward"}):d.deleteBackward(u);return}if(We.isDeleteForward(j)){x.preventDefault(),K&&N.isExpanded(K)?d.deleteFragment(u,{direction:"forward"}):d.deleteForward(u);return}if(We.isDeleteLineBackward(j)){x.preventDefault(),K&&N.isExpanded(K)?d.deleteFragment(u,{direction:"backward"}):d.deleteBackward(u,{unit:"line"});return}if(We.isDeleteLineForward(j)){x.preventDefault(),K&&N.isExpanded(K)?d.deleteFragment(u,{direction:"forward"}):d.deleteForward(u,{unit:"line"});return}if(We.isDeleteWordBackward(j)){x.preventDefault(),K&&N.isExpanded(K)?d.deleteFragment(u,{direction:"backward"}):d.deleteBackward(u,{unit:"word"});return}if(We.isDeleteWordForward(j)){x.preventDefault(),K&&N.isExpanded(K)?d.deleteFragment(u,{direction:"forward"}):d.deleteForward(u,{unit:"word"});return}}}},[s,u,m.onKeyDown]),onPaste:(0,I.useCallback)(x=>{!s&&R.hasEditableTarget(u,x.target)&&!vt(x,m.onPaste)&&(!Sr||hg(x.nativeEvent)||ro)&&(x.preventDefault(),R.insertData(u,x.clipboardData))},[s,u,m.onPaste])}),I.default.createElement(pD,{decorations:$,node:u,renderElement:i,renderPlaceholder:c,renderLeaf:l,selection:u.selection})))))},hD=t=>{var{attributes:e,children:r}=t;return I.default.createElement("span",Object.assign({},e),r,St&&I.default.createElement("br",null))},vD=()=>[],gD=(t,e)=>{if(e.getBoundingClientRect&&(!t.selection||t.selection&&N.isCollapsed(t.selection))){var r=e.startContainer.parentElement;r.getBoundingClientRect=e.getBoundingClientRect.bind(e),Bc(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},vt=(t,e)=>{if(!e)return!1;var r=e(t);return r??(t.isDefaultPrevented()||t.isPropagationStopped())},Qc=t=>Or(t.target)&&(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement),DD=(t,e)=>{if(!e)return!1;var r=e(t);return r??t.defaultPrevented},CD=(0,I.createContext)(!1);var ED=(0,I.createContext)({});function AD(t){var e=(0,I.useRef)([]).current,r=(0,I.useRef)({editor:t}).current,n=(0,I.useCallback)(a=>{r.editor=a,e.forEach(s=>s(a))},[e,r]),o=(0,I.useMemo)(()=>({getSlate:()=>r.editor,addEventListener:a=>(e.push(a),()=>{e.splice(e.indexOf(a),1)})}),[e,r]);return{selectorContext:o,onChange:n}}var BD=["editor","children","onChange","value"],wf=t=>{var{editor:e,children:r,onChange:n,value:o}=t,a=Fn(t,BD),s=(0,I.useRef)(!1),[i,l]=I.default.useState(()=>{if(!V.isNodeList(o))throw new Error("[Slate] value is invalid! Expected a list of elements but got: ".concat(rt.stringify(o)));if(!d.isEditor(e))throw new Error("[Slate] editor is invalid! You passed: ".concat(rt.stringify(e)));return e.children=o,Object.assign(e,a),{v:0,editor:e}}),{selectorContext:c,onChange:f}=AD(e),v=(0,I.useCallback)(()=>{n&&n(e.children),l(m=>({v:m.v+1,editor:e})),f(e)},[e,f,n]);(0,I.useEffect)(()=>(bs.set(e,v),()=>{bs.set(e,()=>{}),s.current=!0}),[e,v]);var[p,h]=(0,I.useState)(R.isFocused(e));return(0,I.useEffect)(()=>{h(R.isFocused(e))},[e]),ao(()=>{var m=()=>h(R.isFocused(e));return ag?(document.addEventListener("focusin",m),document.addEventListener("focusout",m),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",m)}):(document.addEventListener("focus",m,!0),document.addEventListener("blur",m,!0),()=>{document.removeEventListener("focus",m,!0),document.removeEventListener("blur",m,!0)})},[]),I.default.createElement(ED.Provider,{value:c},I.default.createElement(Bf.Provider,{value:i},I.default.createElement(ks.Provider,{value:i.editor},I.default.createElement(CD.Provider,{value:p},r))))};var ef=(t,e)=>{var r=(e.top+e.bottom)/2;return t.top<=r&&t.bottom>=r},tf=(t,e,r)=>{var n=R.toDOMRange(t,e).getBoundingClientRect(),o=R.toDOMRange(t,r).getBoundingClientRect();return ef(n,o)&&ef(o,n)},xD=(t,e)=>{var r=d.range(t,N.end(e)),n=Array.from(d.positions(t,{at:e})),o=0,a=n.length,s=Math.floor(a/2);if(tf(t,d.range(t,n[o]),r))return d.range(t,n[o],r);if(n.length<2)return d.range(t,n[n.length-1],r);for(;s!==n.length&&s!==o;)tf(t,d.range(t,n[s]),r)?a=s:o=s,s=Math.floor((o+a)/2);return d.range(t,n[a],r)};function rf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function nf(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rf(Object(r),!0).forEach(function(n){Da(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rf(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Ff=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",n=e,{apply:o,onChange:a,deleteBackward:s,addMark:i,removeMark:l}=n;return Ca.set(n,new WeakMap),n.addMark=(c,f)=>{var v,p;(v=js.get(n))===null||v===void 0||v(),!qt.get(n)&&(p=Bt.get(n))!==null&&p!==void 0&&p.length&&qt.set(n,null),gr.delete(n),i(c,f)},n.removeMark=c=>{var f;!qt.get(n)&&(f=Bt.get(n))!==null&&f!==void 0&&f.length&&qt.set(n,null),gr.delete(n),l(c)},n.deleteBackward=c=>{if(c!=="line")return s(c);if(n.selection&&N.isCollapsed(n.selection)){var f=d.above(n,{match:m=>Z.isElement(m)&&d.isBlock(n,m),at:n.selection});if(f){var[,v]=f,p=d.range(n,v,n.selection.anchor),h=xD(n,p);N.isCollapsed(h)||z.delete(n,{at:h})}}},n.apply=c=>{var f=[],v=Bt.get(n);if(v!=null&&v.length){var p=v.map(M=>Tg(M,c)).filter(Boolean);Bt.set(n,p)}var h=Nr.get(n);h&&Nr.set(n,$c(n,h,c));var m=br.get(n);if(m!=null&&m.at){var u=me.isPoint(m?.at)?Ps(n,m.at,c):$c(n,m.at,c);br.set(n,u?nf(nf({},m),{},{at:u}):null)}switch(c.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{f.push(...da(n,c.path));break}case"set_selection":{var C;(C=no.get(n))===null||C===void 0||C.unref(),no.delete(n);break}case"insert_node":case"remove_node":{f.push(...da(n,B.parent(c.path)));break}case"merge_node":{var A=B.previous(c.path);f.push(...da(n,A));break}case"move_node":{var E=B.common(B.parent(c.path),B.parent(c.newPath));f.push(...da(n,E));break}}o(c);for(var[w,F]of f){var[S]=d.node(n,w);_s.set(S,F)}},n.setFragmentData=c=>{var{selection:f}=n;if(!!f){var[v,p]=N.edges(f),h=d.void(n,{at:v.path}),m=d.void(n,{at:p.path});if(!(N.isCollapsed(f)&&!h)){var u=R.toDOMRange(n,f),C=u.cloneContents(),A=C.childNodes[0];if(C.childNodes.forEach(U=>{U.textContent&&U.textContent.trim()!==""&&(A=U)}),m){var[E]=m,w=u.cloneRange(),F=R.toDOMNode(n,E);w.setEndAfter(F),C=w.cloneContents()}if(h&&(A=C.querySelector("[data-slate-spacer]")),Array.from(C.querySelectorAll("[data-slate-zero-width]")).forEach(U=>{var G=U.getAttribute("data-slate-zero-width")==="n";U.textContent=G?`
`:""}),df(A)){var S=A.ownerDocument.createElement("span");S.style.whiteSpace="pre",S.appendChild(A),C.appendChild(S),A=S}var M=n.getFragment(),P=JSON.stringify(M),L=window.btoa(encodeURIComponent(P));A.setAttribute("data-slate-fragment",L),c.setData("application/".concat(r),L);var O=C.ownerDocument.createElement("div");return O.appendChild(C),O.setAttribute("hidden","true"),C.ownerDocument.body.appendChild(O),c.setData("text/html",O.innerHTML),c.setData("text/plain",pf(O)),C.ownerDocument.body.removeChild(O),c}}},n.insertData=c=>{n.insertFragmentData(c)||n.insertTextData(c)},n.insertFragmentData=c=>{var f=c.getData("application/".concat(r))||Eg(c);if(f){var v=decodeURIComponent(window.atob(f)),p=JSON.parse(v);return n.insertFragment(p),!0}return!1},n.insertTextData=c=>{var f=c.getData("text/plain");if(f){var v=f.split(/\r\n|\r|\n/),p=!1;for(var h of v)p&&z.splitNodes(n,{always:!0}),n.insertText(h),p=!0;return!0}return!1},n.onChange=c=>{sf.default.unstable_batchedUpdates(()=>{var f=bs.get(n);f&&f(),a(c)})},n},da=(t,e)=>{var r=[];for(var[n,o]of d.levels(t,{at:e})){var a=R.findKey(t,n);r.push([o,a])}return r};g();D();var kt=_(ee());st();pe();g();D();var je={"retina-border-basic":"_retina-border-basic_1taj3_1",retinaBorderBasic:"_retina-border-basic_1taj3_1","batch-send-address":"_batch-send-address_1taj3_29",batchSendAddress:"_batch-send-address_1taj3_29","batch-send-address-dialog-core":"_batch-send-address-dialog-core_1taj3_58",batchSendAddressDialogCore:"_batch-send-address-dialog-core_1taj3_58","batch-send-address-input":"_batch-send-address-input_1taj3_63",batchSendAddressInput:"_batch-send-address-input_1taj3_63","batch-send-address-accordion":"_batch-send-address-accordion_1taj3_76",batchSendAddressAccordion:"_batch-send-address-accordion_1taj3_76","batch-send-address-accordion-header":"_batch-send-address-accordion-header_1taj3_79",batchSendAddressAccordionHeader:"_batch-send-address-accordion-header_1taj3_79","batch-send-address-accordion-content":"_batch-send-address-accordion-content_1taj3_83",batchSendAddressAccordionContent:"_batch-send-address-accordion-content_1taj3_83","batch-send-address-accordion-checkbox":"_batch-send-address-accordion-checkbox_1taj3_87",batchSendAddressAccordionCheckbox:"_batch-send-address-accordion-checkbox_1taj3_87","batch-send-address-select-address-actions":"_batch-send-address-select-address-actions_1taj3_92",batchSendAddressSelectAddressActions:"_batch-send-address-select-address-actions_1taj3_92",upload:"_upload_1taj3_132",uploadIcon:"_uploadIcon_1taj3_147",uploadText:"_uploadText_1taj3_150",addressPre:"_addressPre_1taj3_153",selectAddress:"_selectAddress_1taj3_157",selectedAddressInfo:"_selectedAddressInfo_1taj3_162",addBtn:"_addBtn_1taj3_170","circle-icon":"_circle-icon_1taj3_174",circleIcon:"_circle-icon_1taj3_174",accountTitle:"_accountTitle_1taj3_181",accountTag:"_accountTag_1taj3_185"};var wD=({type:t,title:e,children:r,dropError:n,actionTitle:o,addressErrors:a,onSelectWalletAddress:s})=>{let i=(0,kt.useMemo)(()=>{if(n)return n;if(!a?.length)return null;let l=Ao(a,"error");return l?.length>1?T("wallet_extension_sending_text_address_error"):l[0]?.errorText?l[0]?.errorText:T(l[0]?.error,l[0]?.args)},[n,a]);return kt.default.createElement(y.Space,{direction:y.DIRECTION.vertical,space:"12px"},kt.default.createElement(y.FlexBox,{justify:"space-between",align:y.ALIGN.center},kt.default.createElement(we.Text,{strong:700,size:we.SIZE.lg,style:{lineHeight:"24px"}},e,kt.default.createElement(Ge,{className:je.circleIcon,icon:"okds-question-mark-circle",size:Ge.SIZE.xs,tooltip:{maxWidth:"300px",placement:yt?.DIRECTION.topRight,title:kt.default.createElement("pre",{className:je.addressPre},T("wallet_extension_sending_tooltip_address_condition"))}})),kt.default.createElement(y.Space,{direction:y.DIRECTION.horizontal,space:"6px",align:y.ALIGN.center,style:{cursor:"pointer"},onClick:()=>{s(t)}},kt.default.createElement(Ge,{icon:"okx-wallet-plugin-tier-guide",size:Ge.SIZE.md}),kt.default.createElement(we.Text,{strong:!0,size:we.SIZE.sm,style:{lineHeight:"16px"}},o))),r,i&&kt.default.createElement(we.Text,{size:we.SIZE.xs,type:we.TYPE.danger},i))},Ea=wD;g();D();var Tn=_(ee()),Nf=_(qe());pe();g();D();var Aa=_(ee()),so=_(Ce());pe();g();D();var yf=_(tl()),FD=(t,e={})=>new Promise((r,n)=>{yf.default.parse(t,{complete:o=>{r(o)},error:o=>{n(o)},...e})}),yD=(t,e={})=>FD(t,e).then(r=>(r?.data??[]).flat().filter(Boolean)),Tf=yD;g();D();var _f=_(ee());function TD(t,{onDrop:e,onDragLeave:r,onDragEnter:n,onDragOver:o}){(0,_f.useEffect)(()=>(t&&(t.addEventListener("drop",e),t.addEventListener("dragleave",r),t.addEventListener("dragenter",n),t.addEventListener("dragover",o)),()=>{t&&(t.removeEventListener("drop",e),t.removeEventListener("dragleave",r),t.removeEventListener("dragenter",n),t.removeEventListener("dragover",o))}),[e,r,n,o,t])}var Us=TD;function _D(t){let e=t.scrollHeight;t.scrollTo(0,e)}var SD=1024,bD=1024*SD,Sf=1,ND=bD*Sf;function OD(t,{onChange:e,slateRef:r,onError:n}={}){let[o,a]=(0,Aa.useState)(!1),s=v=>{r?.current&&(r.current.style.pointerEvents=v?"none":"auto")},i=(0,so.useMemoizedFn)(v=>{v.preventDefault()});Us(document,{onDrop:i,onDragEnter:i,onDragLeave:i,onDragOver:i});let l=(0,so.useMemoizedFn)(v=>{s(!1),a(!1);let p=v.dataTransfer?.files?.[0];if(!!p){if(p.type!=="text/csv"){n?.(T("wallet_extension_reminder_text_wrong_format"));return}if(p.size>ND){n?.(T("wallet_extension_reminder_text_large_doc",{num:Sf}));return}Tf(p).then(h=>{e?.(h)}).catch(()=>{e?.([])})}});(0,Aa.useEffect)(()=>{o&&t.current&&_D(t.current)},[o,t]);let c=(0,so.useMemoizedFn)(()=>{s(!0),a(!0)}),f=(0,so.useMemoizedFn)(()=>{s(!1),a(!1)});return Us(t.current,{onDrop:l,onDragEnter:c,onDragLeave:f}),{show:o}}var bf=OD;function ID(t){let{onChange:e,dropRef:r,slateRef:n,onError:o}=t,a=(0,Tn.useRef)(null),{show:s}=bf(r,{onChange:e,slateRef:n,onError:o});return s?Tn.default.createElement(y.Box,{ref:a,className:je.upload},Tn.default.createElement(lt,{className:(0,Nf.default)("okds-plus-circle",je.uploadIcon)}),Tn.default.createElement(y.Box,{className:je.uploadText},T("wallet_extension_reminder_dropzone_input_address"))):void 0}var Of=ID;g();D();st();var PD=[{type:"numbered-list",children:[{type:"list-item",children:[{text:""}]}]}],If=(t=[])=>!t||!t?.length?PD:[{type:"numbered-list",children:t.map(e=>({type:"list-item",children:[{text:e}]}))}],Pf=t=>{let[{children:e}]=t;return e.map(({children:r})=>Eo(r?.[0]?.text))},Lf=(t=[],e=[])=>!e.some(r=>!t.includes(r)),kf=t=>{let{normalizeNode:e}=t;return t.normalizeNode=r=>{let[n,o]=r;if(Z.isElement(n)&&n.type==="numbered-list"){for(let[a,s]of V.children(t,o))if(Z.isElement(a)&&a.type==="numbered-list"){z.unwrapNodes(t,{at:s});return}}e(r)},t};var LD="Enter",kD=({attributes:t,children:e,element:r})=>{let{error:n}=r;switch(r.type){case"list-item":return Oe.default.createElement("li",{style:{color:n&&"red"},...t},e);case"numbered-list":return Oe.default.createElement("ol",{...t},e);default:return Oe.default.createElement("p",{...t},e)}},MD=({attributes:t,children:e,leaf:r})=>{let{error:n}=r;return Oe.default.createElement("span",{style:{color:n?"red":void 0},...t},e)},RD=(0,Oe.forwardRef)(({type:t,title:e,dropError:r,actionTitle:n,placeholder:o,value:a=[],onChange:s,addressErrors:i,onSelectWalletAddress:l,onDrop:c,onDropError:f},v)=>{let p=(0,Oe.useRef)(0),h=(0,Oe.useCallback)(F=>Oe.default.createElement(kD,{...F}),[]),m=(0,Oe.useCallback)(F=>Oe.default.createElement(MD,{...F}),[]),u=(0,Oe.useMemo)(()=>kf(pc(Ff(mc()))),[]),C=(0,Oe.useRef)(null),A=(0,Oe.useRef)(null);(0,Oe.useEffect)(()=>{u?.selection?.focus&&(p.current=u?.selection?.focus?.path?.[1])},[u.selection]),(0,Oe.useEffect)(()=>{a.forEach((F,S)=>{z.setNodes(u,{error:!1},{at:[0,S,0]})}),i?.forEach(({at:F})=>{(0,Mf.isNil)(F)||z.setNodes(u,{error:!0},{at:[0,F,0]})})},[i]);let E=(0,Hs.useMemoizedFn)(F=>{let{path:S}=u.selection?.focus??{path:null},M=i?.find(L=>L.at===S?.[1])?.address,P=F?.[0]?.children?.[S?.[1]]?.children?.[0]?.text;(M&&P!==M||!P)&&z.setNodes(u,{error:!1},{at:[0,S?.[1],0]}),s?.(F,t)},[i]),w=(0,Hs.useMemoizedFn)(async F=>{let{path:S,offset:M}=u.selection?.focus||{};if(!S||!M)return!1;let P=S?.[1];if(F.key===LD){a?.[P]?.length>M&&z.setNodes(u,{error:!1},{at:[0,P,0]}),await Vu(10);let L=S[1]+1;z.setNodes(u,{error:!1},{at:[0,L,0]})}return!0},[a,i]);return(0,Oe.useImperativeHandle)(v,()=>({insertNodes:(F=[])=>{let S=F.map(P=>({type:"list-item",children:[{text:P}]}));z.insertNodes(u,S);let M=p.current;a?.[M]||z.removeNodes(u,{at:[0,M]})}})),Oe.default.createElement(Ea,{type:t,title:e,dropError:r,actionTitle:n,addressErrors:i,onSelectWalletAddress:l},Oe.default.createElement(y.Box,{className:je["batch-send-address-input"],ref:C},Oe.default.createElement(y.Box,{ref:A},Oe.default.createElement(wf,{editor:u,value:If(a),onChange:E},Oe.default.createElement(xf,{autoFocus:!0,spellCheck:!0,renderLeaf:m,renderElement:h,placeholder:o,onKeyDown:w}))),Oe.default.createElement(Of,{dropRef:C,onChange:c,slateRef:A,onError:f})))}),Gs=RD;g();D();var ye=_(ee()),Rf=_(Ce());pe();sp();g();D();var Ve={SEND:"SEND",RECEIVE:"RECEIVE"};var jf=t=>Array.isArray(t)?t.map(({name:e,address:r,label:n,options:o})=>r&&!o?{value:r,style:{display:"flex",alignItems:"center"},label:ye.default.createElement(y.Space,{direction:y.DIRECTION.vertical,space:"2px"},ye.default.createElement(y.Box,{className:je.accountTitle},e&&ye.default.createElement(we.Text,{strong:!0,size:we.SIZE.xs},e),!!n&&ye.default.createElement(xo,{className:je.accountTag,category:xo.CATEGORY.fill,size:xo.SIZE.sm},T(Mi[n]))),r&&ye.default.createElement(we.Text,{size:we.SIZE.xs,type:we.TYPE.secondary},r))}:{value:e,label:ye.default.createElement(we.Text,{size:we.SIZE.md},e),options:jf(o)}):[],jD=t=>{let[e,r]=(0,ye.useState)([]),[n,o]=(0,ye.useState)(!1),a=(0,ye.useMemo)(()=>jf(t.options),[t.options]),s=(0,ye.useMemo)(()=>a?.map(h=>h.options?.map(({value:m})=>m))?.flat(),[a]),{mode:i,type:l}=t,c=(0,ye.useMemo)(()=>i===J.ONE_TO_MANY&&l===Ve.SEND||i===J.MANY_TO_ONE&&l===Ve.RECEIVE,[i,l]),f=(0,Rf.useMemoizedFn)((h,m,u)=>{if(c){r([m]);return}let C=[...e];h&&m?C=[...e,m]:!h&&m?C=C.filter(A=>A!==m):h&&u&&u.length?C=[...e,...u]:!h&&u&&u.length&&(C=C.filter(A=>!u.includes(A))),r([...new Set(C)])},[c,e]),v=(0,ye.useCallback)(()=>{t?.onChange(e,t?.type)},[e,t]),p=h=>{let m=h.target.checked;r(m?s:[])};return(0,ye.useEffect)(()=>{o(e.length===s.length)},[e,s]),ye.default.createElement(y.Box,{className:je.selectAddress},ye.default.createElement(y.Box,{className:je["batch-send-address-dialog-core"]},a.map(({label:h,options:m})=>Array.isArray(m)&&m?.length?ye.default.createElement(Ni,{defaultExpanded:!0,className:je["batch-send-address-accordion"],headerClassName:je["batch-send-address-accordion-header"],contentClassName:je["batch-send-address-accordion-content"],title:c?h:ye.default.createElement(Fr,{clickStopPropagation:!0,checked:Lf(e,m.map(({value:u})=>u)),onChange:({target:{checked:u}})=>{f(u,void 0,m.map(({value:C})=>C))}},h)},m.map(({value:u,label:C})=>c?ye.default.createElement(Oi,{checked:e?.includes(u),className:je["batch-send-address-accordion-checkbox"],onChange:({target:{checked:A}})=>{f(A,u)}},C):ye.default.createElement(Fr,{checked:e?.includes(u),className:je["batch-send-address-accordion-checkbox"],onChange:({target:{checked:A}})=>{f(A,u)}},C))):ye.default.createElement(ye.default.Fragment,null))),ye.default.createElement(y.Box,{className:je["batch-send-address-select-address-actions"]},!c&&ye.default.createElement(y.Box,{className:je.selectedAddressInfo},ye.default.createElement(Fr,{checked:n,onChange:p},T("wallet_extension_addressbook_text_select_all")),ye.default.createElement(we.Text,{type:we.TYPE.secondary,size:we.SIZE.sm},T("wallet_extension_addressbook_text_selected_address",{wallet_extension_addressbook_text_selected_address:e?.length??0}))),ye.default.createElement(y.Box,{className:je.addBtn},ye.default.createElement(te,{category:te.CATEGORY.fill,type:te.TYPE.highlight,size:te.SIZE.lg,onClick:v,disabled:e.length<=0,block:!0},T("wallet_extension_addressbook_btn_add")))))},zf=jD;g();D();var Ys=_(ee());st();var zD=({type:t,title:e,value:r,onChange:n,actionTitle:o,placeholder:a,addressErrors:s,onSelectWalletAddress:i})=>Ys.default.createElement(Ea,{type:t,title:e,actionTitle:o,addressErrors:s,onSelectWalletAddress:i},Ys.default.createElement(Ne,{size:Ne.SIZE.xl,value:r?.[0],placeholder:a,onChange:({target:{value:l}})=>{n?.([Eo(l)],t,!0)}})),qs=zD;g();D();var Cr=_(ee()),Dr=_(Ce());var Wf=({mode:t,walletAccounts:e,walletAccountsWithAddressBook:r,onChange:n})=>{let o=(0,Cr.useRef)(null),a=(0,Cr.useRef)(null),[s,i]=(0,Cr.useState)(null),[l,c]=(0,Cr.useState)(!1),[f,v]=(0,Cr.useState)([]),[p,h]=(0,Cr.useState)(""),[m,u]=(0,Cr.useState)(""),C=(0,Dr.useMemoizedFn)(()=>{c(!1)},[]),A=(0,Dr.useMemoizedFn)((L,O)=>{O===Ve.SEND&&t===J.ONE_TO_MANY||O===Ve.RECEIVE&&t===J.MANY_TO_ONE?n?.(L,O):(O===Ve.SEND?o:a)?.current?.insertNodes(L),C()},[]),E=(0,Dr.useMemoizedFn)(L=>{let O=L===Ve.SEND?e:r;c(!0),i(L),v(O)},[]),w=(0,Dr.useMemoizedFn)((L=[])=>{o.current.insertNodes(L),h("")}),F=(0,Dr.useMemoizedFn)((L=[])=>{a.current.insertNodes(L),u("")}),S=(0,Dr.useMemoizedFn)((L,O,U=!1)=>{n?.(U?L:Pf(L),O),h(""),u("")},[]),M=(0,Dr.useMemoizedFn)(L=>{u(L)}),P=(0,Dr.useMemoizedFn)(L=>{h(L)});return{visible:l,sendRef:o,receiveRef:a,addressType:s,addressOptions:f,onCloseDialog:C,onInsertAddresses:A,onSelectWalletAddress:E,onSendDrop:w,onReceiveDrop:F,onAddressInputChange:S,onReceiveDropError:M,onSendDropError:P,sendError:p,receiveError:m}};var WD=t=>{let{mode:e,className:r,style:n,toAddresses:o,fromAddresses:a,addressErrors:s}=t,{visible:i,sendRef:l,receiveRef:c,addressType:f,addressOptions:v,onCloseDialog:p,onInsertAddresses:h,onSelectWalletAddress:m,onSendDrop:u,onReceiveDrop:C,onAddressInputChange:A,onReceiveDropError:E,onSendDropError:w,sendError:F,receiveError:S}=Wf(t),{isSm:M}=$e();return Er.default.createElement(y.FlexBox,{style:n,direction:M?y.DIRECTION.vertical:y.DIRECTION.horizontal,className:(0,Uf.default)(je["batch-send-address"],r)},e===J.ONE_TO_MANY?Er.default.createElement(qs,{value:a,type:Ve.SEND,addressErrors:s?.from,placeholder:T("wallet_extension_address_input_input_address"),title:T("wallet_extension_sending_title_send_address"),actionTitle:T("wallet_extension_address_anchor_address_book"),onChange:A,onSelectWalletAddress:m}):Er.default.createElement(Gs,{ref:l,value:a,addressErrors:s?.from,type:Ve.SEND,placeholder:T("wallet_extension_address_input_input_address"),title:T("wallet_extension_sending_title_send_address"),actionTitle:T("wallet_extension_address_anchor_address_book"),onChange:A,onSelectWalletAddress:m,onDrop:u,onDropError:w,dropError:F}),e===J.MANY_TO_ONE?Er.default.createElement(qs,{value:o,type:Ve.RECEIVE,addressErrors:s?.to,placeholder:T("wallet_extension_address_input_input_address"),title:T("wallet_extension_receive_title_receive_address"),actionTitle:T("wallet_extension_address_anchor_address_book"),onChange:A,onSelectWalletAddress:m}):Er.default.createElement(Gs,{ref:c,value:o,type:Ve.RECEIVE,addressErrors:s?.to,placeholder:T("wallet_extension_address_input_input_address"),title:T("wallet_extension_receive_title_receive_address"),actionTitle:T("wallet_extension_address_anchor_address_book"),onChange:A,onSelectWalletAddress:m,onDrop:C,onDropError:E,dropError:S}),Er.default.createElement(Wr,{visible:i,noContentPadding:!0,windowStyle:{height:"685px",maxHeight:"685px"},title:T("wallet_extension_addressbook_title_address_book"),onClose:p},Er.default.createElement(zf,{mode:e,type:f,options:v,onChange:h})))},Hf=Er.default.memo(WD);g();D();var nr=_(ee());var $s=_(qe());g();D();var Qr={root:"_root_1uwjx_1",icon:"_icon_1uwjx_69",title:"_title_1uwjx_88",subtitle:"_subtitle_1uwjx_108",tip:"_tip_1uwjx_136",tipIcon:"_tipIcon_1uwjx_140"};function UD(t){let{icon:e,title:r,subtitle:n,tip:o,className:a,titleClassName:s,subtitleClassName:i}=t;return nr.default.createElement(y.Box,{className:(0,$s.default)(Qr.root,a)},e&&nr.default.createElement(y.Box,{className:Qr.icon},e),nr.default.createElement(y.Box,null,nr.default.createElement(y.Box,{className:(0,$s.default)(Qr.title,s)},r),nr.default.createElement(y.Box,{className:Qr.subtitle},nr.default.createElement(y.Box,{className:i},n),o&&nr.default.createElement(yt,{title:o,placement:yt.DIRECTION.bottom,maxWidth:240},nr.default.createElement(y.Box,{className:Qr.tip},nr.default.createElement(lt,{className:`okds-question-mark-circle ${Qr.tipIcon}`}))))))}var _n=UD;g();D();var en=_(ee()),Zs=_(Ce());st();pe();g();D();ze();Rn();jn();var Gf=_(Ce()),HD=()=>(0,Gf.useMemoizedFn)(async t=>{let{data:e}=await Jt(Xt.getSolRentBatch,{coinId:fr,addresses:t});return e}),Yf=HD;ze();Rn();jn();g();D();st();pe();ze();var Vs=(t=[],e)=>e===Ve.SEND?t.map(({from:r})=>r):t.map(({to:r})=>r),GD=t=>{let e=Za;return t===De?e=fr:t===ke?e=yo:t===se?e=pn:t===Ae?e=Fo:t===he&&(e=To),e},YD=({localType:t,addressRegisterStatusMap:e,fromAddressErrors:r,toAddressErrors:n,fromAddress:o,toAddress:a,i:s,tokenSymbol:i})=>{if(t===se&&o||t===Ae&&a){let l=!0;t===se?l=e[o]??!0:l=e[a]??!0,l===!1&&t===se&&r.push({address:o,error:"wallet_extension_sending_error_address_no_register",at:s}),l===!1&&t===Ae&&n.push({address:a,error:"wallet_extension_sending_error_token_no_register",at:s,args:{token:i}})}},qD=async({mode:t,baseCoinId:e,isRpcMode:r,fromAddresses:n,toAddresses:o,chainIndex:a})=>{let s=[],i=[],l=typeof a=="string"&&a.startsWith("0x")?Dn(a):a,c=[];if(t===J.ONE_TO_MANY?c=o.map(f=>({chainIndex:l,to:f,from:n[0]})):t===J.MANY_TO_ONE?c=n.map(f=>({chainIndex:l,from:f,to:o[0]})):c=n.map((f,v)=>({chainIndex:l,from:f,to:o[v]})),[Za,fr].includes(e))try{let{txTagList:f}=await Ui({txList:c,rpcChain:!!r});f.forEach((v,p)=>{v?.causeRiskItem?.includes("from_risk_reject")&&s.push({address:c[p].from,error:"wallet_extension_mid_subtitle_risky_transaction_account",at:p}),v?.causeRiskItem?.includes("black_tag")&&i.push({address:c[p].to,error:"wallet_extension_mid_subtitle_risky_transaction_account",at:p})})}catch(f){s.push({address:n[0],errorText:f?.msg||T("wallet_extension_transaction_error_general_check_network")})}return{fromAddressErrors:s,toAddressErrors:i}},qf=async({mode:t,localType:e,isRpcMode:r,chainIndex:n,tokenSymbol:o,toAddresses:a,fromAddresses:s,walletAccounts:i,addressRegisterStatusMap:l})=>{let c=[],f=[],v=cn([a?.length,s?.length]),p=s[0],h,m=GD(e);for(let C=0;C<v;C++){(t===J.MANY_TO_MANY||t===J.MANY_TO_ONE)&&(p=s[C]),h=a[C],p&&!i?.includes(p)?f.push({address:p,error:"wallet_extension_sending_text_address_wallet_extension",at:C}):t!==J.ONE_TO_MANY&&p&&s.slice(0,C).includes(p)&&f.push({address:p,error:"wallet_extension_sending_text_address_duplicated",at:C});let A=h&&et(h,e),E=await Ju(A,m);h&&!E&&c.push({address:h,error:"wallet_extension_sending_text_address_illegal",at:C}),YD({localType:e,addressRegisterStatusMap:l,fromAddressErrors:f,toAddressErrors:c,fromAddress:p,toAddress:h,i:C,tokenSymbol:o})}let u=await qD({mode:t,baseCoinId:m,isRpcMode:r,fromAddresses:s,toAddresses:a,chainIndex:n});return f=f.concat(u.fromAddressErrors),c=c.concat(u.toAddressErrors),{to:c,from:f}};g();D();var Ks=_(Ce());st();g();D();var $f=_(Ce()),Vf=_(zi());st();var $D=10;function VD(t,e,r,n,o,a,s){return t?.methods.balanceOf(e).call.request({from:e},async(i,l)=>{try{if(i||n.push({from:e,balance:l??0}),i){let c=await t.methods.balanceOf(e).call();n.splice(r,0,{from:e,balance:c??0})}n?.length===o&&a(n)}catch(c){s(c)}})}function KD(t,e,r,n,o,a,s){return t.eth.getBalance.request(e,"latest",async(i,l)=>{try{if(i||n.push({from:e,balance:l??0,baseCoinBalance:l??0}),i){let c=await t.eth.getBalance(e,"latest");n.splice(r,0,{from:e,balance:c??0,baseCoinBalance:c??0})}n?.length===o&&a(n)}catch(c){s(c)}})}var ZD=({web3:t,addressList:e,contractAddress:r})=>{let n=new t.BatchRequest;return new Promise((o,a)=>{let s=[],i=r&&new t.eth.Contract(Vf.default,r),l=e?.length;e?.forEach((c,f)=>{let v=r?VD(i,c,f,s,l,o,a):KD(t,c,f,s,l,o,a);n.add(v)}),n.execute()})},Kf=t=>{let e=qr(t);return(0,$f.useMemoizedFn)(async(r,n)=>{let o=await e(),a=yi(r),s=hi(a,$D),i=await Promise.all(s.map(c=>ZD({web3:o,addressList:c,contractAddress:n}))),l=pi(i);return r?.length!==l?.length?r.map(c=>l.find(({from:v})=>v===c)):l},[e])};ze();var XD=()=>{let[t]=le(),e=zu(void 0,t?.localType),r=Hu();return(0,Ks.useMemoizedFn)(async n=>{let o=_t(t),a=n?.length,s=[];for(let i=0;i<a;i++){let l=n[i],{walletId:c}=e.find(v=>v.address===l)||{},{coinAmountInt:f}=await r(t?.coinId,c)||{};if(o)s.push({from:l,balance:f,baseCoinBalance:f});else{let{coinAmountInt:v}=await r(t?.baseCoinId,c)||{};s.push({from:l,balance:f,baseCoinBalance:v})}}return s})},JD=()=>{let[t]=Ye(),[e]=le(),r=Kf(t?.rpcUrl);return(0,Ks.useMemoizedFn)(async n=>{let o=!e?.address,a=[],s=n.map(l=>l&&et(l,e?.localType)),i=await r(s,void 0);return o||(a=await r(s,et(e?.address,e?.localType))),Co(i,a)},[e])},QD=()=>{let[t]=le(),e=JD(),r=XD();return[Ae,De,ke,se,he].includes(t?.localType)?r:e},Zf=QD;var eC=(t,e)=>{let[r]=le(),[n,o]=(0,en.useState)(!1),{gotoConfirmPage:a}=At(),s=Uo(!0,e),[,i]=Go(),l=ut(),c=Zf(),f=Yf(),[v,p]=Fe(),[h,m]=(0,en.useState)(Vs(v,Ve.SEND)),[u,C]=(0,en.useState)(Vs(v,Ve.RECEIVE)),[A,E]=(0,en.useState)({}),w=(0,Zs.useMemoizedFn)((P,L)=>{L===Ve.SEND?m(P):C(P)},[]),F=(0,en.useMemo)(()=>{let P=[];if(t===J.MANY_TO_MANY){let L=Ei(h.length,u.length),O=u.slice(0,L);h.slice(0,L).forEach((G,k)=>{let Y=O[k];G&&Y&&P.push({to:Y,from:G})})}else if(t===J.MANY_TO_ONE){let L=u.find(O=>!!O);h.forEach(O=>{O&&L&&P.push({to:L,from:O})})}else if(t===J.ONE_TO_MANY){let L=h.find(O=>!!O);u.forEach(O=>{L&&O&&P.push({to:O,from:L})})}return P},[h,t,u]),S=!F?.length,M=(0,Zs.useMemoizedFn)(async()=>{try{o(!0);let P=[];r?.localType===se?P=h:r?.localType===Ae&&(P=u);let L={};if([Ae,se].includes(r?.localType))try{let{data:G}=await Jt(Xt.batchQueryAddressRegister,{chainId:r?.chainId,addresses:P,contractAddress:r?.localType===Ae?r?.address:void 0});L=G}catch{}let O=await qf({isRpcMode:l,localType:e,toAddresses:u,fromAddresses:h,walletAccounts:s,mode:t,chainIndex:r?.chainId,addressRegisterStatusMap:L,tokenSymbol:r?.symbol});if(O?.from?.length||O?.to?.length)return o(!1),E(O);let U=await c(Pn(F,"from"));if(r?.localType===De&&r?.baseCoinId!==0){let G=await f(Pn(F,"to"));i(G)}return U=U?.map((G,k)=>({...G,from:Io(G?.from,r?.localType),id:k})),p(Co([],F,U)),o(!1),a()}catch(P){let L={from:[],to:[]};return L?.from.push({address:h[0],errorText:P?.msg||P?.message||T("wallet_extension_transaction_error_general_check_network")}),o(!1),E(L)}},[u,h,s,F]);return{loading:n,addressErrors:A,sendAddresses:v,fromAddresses:h,toAddresses:u,nextDisabled:S,onNext:M,onAddressChange:w}},Xf=eC;g();D();var Xs={root:"_root_a3p43_2",footer:"_footer_a3p43_67"};var tC=()=>{let{isSm:t}=$e(),[e]=le(),[r]=it(),{loading:n,fromAddresses:o,toAddresses:a,addressErrors:s,nextDisabled:i,onNext:l,onAddressChange:c}=Xf(r,e?.localType),[f,v]=ol(e?.localType),{gotoHomePage:p}=At(),[h,m]=(0,$t.useMemo)(()=>r===J.MANY_TO_MANY?[T("wallet_extension_multitomulti_subtitle_many_transfer"),T("wallet_extension_reminder_tooltips_portfolio_trading")]:r===J.ONE_TO_MANY?[T("wallet_extension_onetomulti_subtitle_one_to_many"),T("wallet_extension_reminder_tooltips_multisender_onetomulti")]:[T("wallet_extension_multitoone_subtitle_many_to_one"),T("wallet_extension_reminder_tooltips_multisender_multitoone")],[r,T]);return $t.default.createElement(_r,{footer:$t.default.createElement(y.Box,{className:Xs.footer},$t.default.createElement(te,{block:t,category:te.CATEGORY.outline,type:te.TYPE.primary,size:t?te.SIZE.lg:te.SIZE.xl,onClick:()=>{p()}},T("wallet_extension_footer_btn_back")),$t.default.createElement(te,{block:t,loading:n,disabled:i,category:te.CATEGORY.fill,type:te.TYPE.highlight,size:t?te.SIZE.lg:te.SIZE.xl,onClick:l},T("wallet_extension_footer_btn_next")))},$t.default.createElement(_n,{tip:m,subtitle:h,title:T("wallet_extension_address_maintitle_add_address")}),$t.default.createElement(y.Box,{className:Xs.root},$t.default.createElement(Hf,{mode:r,toAddresses:a,fromAddresses:o,addressErrors:s,walletAccounts:f,walletAccountsWithAddressBook:v,onChange:c})))},Jf=$t.default.memo(tC);g();D();var nt=_(ee()),Ld=_(Ct()),fo=_(qe());st();pe();g();D();var Ar=_(ee());st();var Js=_(Ct());pe();g();D();var Ba=_(ee()),Qf=_(Ct()),or=_(Ce());st();ze();var rC=()=>{let t=(0,Qf.useSelector)(Lu);return(0,Ba.useCallback)(e=>{let r=t.filter(n=>n.chainId===e&&!n.isDeleted);return Ao(r,"address")},[t])},nC=(t,e)=>{let r=ut(),{data:n,reload:o,loadingMore:a,listRef:s}=sl({aggregation:!1,chainIds:[Dn(t)],symbolLike:e||void 0},{filter:!1,reloadDeps:[t,e],beforeRequest(){return r||!t?{list:[],pageNo:0,isNoMore:!0}:!1}});return{list:(0,or.useCreation)(()=>n?.list??[],[n?.list]),listRef:s,loadingMore:a,refreshDom:o}},ed=(t,e)=>{let{chainId:r,localType:n}=t||{},[o,a]=(0,Ba.useState)([]),s=ut(),i=(0,or.useDebounce)(e,{wait:300}),{list:l,listRef:c,refreshDom:f,loadingMore:v}=nC(r,i),p=rC(),h=Et(),m=vn(se);(0,or.useAsyncEffect)(async()=>{if(n===se){let{coinFeeList:C}=await h({coinId:pn,address:m,fromAddr:m,toAddr:m,value:"0"});a(C)}},[n]);let u=(0,or.useCreation)(()=>{if(n===se&&o?.length){let C=o.map(({coinId:E})=>E);return l.filter(({coinId:E})=>gi(C,E)).map(E=>{let{tokenId:w,originSymbol:F}=o.find(S=>S?.coinId===E?.coinId);return{...E,tokenId:w,originSymbol:F}})}return l},[n,l,o]);return(0,or.useCreation)(()=>s?{list:p(r)??[],listRef:null,refreshDom:null,loadingMore:!1}:{list:u,listRef:c,refreshDom:f,loadingMore:v},[r,u,l,c,v,s,p])},xa=()=>{let t=ut(),e=Uu();return(0,or.useMemoizedFn)(async({coinId:r})=>t?0:e?.[r]?.coinToUSDRate||"0",[t])};var wa=()=>{let[t]=le(),[e]=Ye(),[r,n]=(0,Ar.useState)(0),[o,a]=(0,Ar.useState)(0),s=(0,Js.useSelector)(qi),{usdToThisRate:i}=s,l=_t(t),c=xa(),f=async()=>{if(l){let E=await c({chainId:t?.chainId,coinId:t?.coinId,contractAddress:t?.address});n(E),a(E)}else{let[E,w]=await Promise.all([c({chainId:t?.chainId,coinId:t?.baseCoin?.coinId,contractAddress:t?.address}),c({chainId:t?.chainId,coinId:t?.coinId,contractAddress:t?.address})]);a(E),n(w)}};(0,Ar.useEffect)(()=>{f()},[]);let[v]=Fe(),p=(0,Js.useSelector)(ct),h=v?.length,m=l?t:t?.baseCoin,u=(0,Ar.useMemo)(()=>v[0]?.realNetworkFee?v.reduce((w,{realNetworkFee:F})=>H.add(w,F),0):H.mul(p?.networkFee??0,h),[t,p]),C=(0,Ar.useMemo)(()=>{let E=v.reduce((w,{txAmount:F})=>H.add(w,F),0);return H.div(E,10**(t?.decimals??18))},[v]);return(0,Ar.useMemo)(()=>{let E=H.mul(i,H.mul(o,u)),w=H.mul(i,H.mul(r,C));return[{title:"wallet_extension_info_title_internet",icon:e?.icon,value:e?.chainName,showIcon:!0},{title:"wallet_extension_info_title_crypto",icon:t?.image,value:t?.symbol,showIcon:!0},{title:"wallet_extension_info_title_address_amount",value:H.thousandFormat(h)},{title:"wallet_extension_info_title_transfer_amount",value:Wn(cn([C,0]),{symbol:t?.symbol??""}),market:w},{title:"wallet_extension_info_title_internet_fee",value:Wn(u,{symbol:m?.symbol??""}),market:E}]},[t,e,u,r,o,C,h])};g();D();var Mt=_(ee()),Qs=_(qe());pe();g();D();var Pr={root:"_root_17l7u_2",row:"_row_17l7u_65",nextRow:"_nextRow_17l7u_82",title:"_title_17l7u_92",subtitle:"_subtitle_17l7u_116",value:"_value_17l7u_142",icon:"_icon_17l7u_145"};function td(t){let{icon:e,title:r,value:n,showIcon:o=!1,market:a}=t;return Mt.default.createElement(y.Box,null,Mt.default.createElement(y.Box,{className:Pr.title},T(r)),Mt.default.createElement(y.Box,{className:(0,Qs.default)(Pr.subtitle)},o&&(e||n)&&Mt.default.createElement(Ge,{src:e,className:Pr.icon,text:n,size:Ge.SIZE.md}),Mt.default.createElement(y.Box,{className:Pr.value},n)),a!==void 0&&Mt.default.createElement(we.DisplayAmount,{wrap:!0,useApproximate:!0,amount:a,mode:we.LEGAL,type:we.TYPE.secondary,size:we.SIZE.sm,style:{display:"block",marginTop:"4px"}}))}function oC({className:t,statistics:e}){let{isSm:r}=$e(),n=Math.floor(e.length/2),o=r?n:e.length;return Mt.default.createElement(y.Box,{className:(0,Qs.default)(Pr.root,t)},Mt.default.createElement(y.Box,{className:Pr.row},e.slice(0,o).filter(Boolean).map((a,s)=>Mt.default.createElement(td,{...a,key:s}))),Mt.default.createElement(y.Box,{className:Pr.nextRow},e.slice(o).filter(Boolean).map((a,s)=>Mt.default.createElement(td,{...a,key:s}))))}var Fa=oC;g();D();var ei=_(ee());g();D();var Te={root:"_root_1iryo_2",table:"_table_1iryo_38",row:"_row_1iryo_47",order:"_order_1iryo_52",addressError:"_addressError_1iryo_78",fromError:"_fromError_1iryo_81",text:"_text_1iryo_84",oneLineText:"_oneLineText_1iryo_106",moreLineText:"_moreLineText_1iryo_109",remove:"_remove_1iryo_112",success:"_success_1iryo_117",error:"_error_1iryo_130",open:"_open_1iryo_143",receiveError:"_receiveError_1iryo_146",errorIcon:"_errorIcon_1iryo_149",hash:"_hash_1iryo_154",hashText:"_hashText_1iryo_166",loader:"_loader_1iryo_179"};function aC({dataSource:t,columns:e,scroll:r}){let n=()=>({style:{background:"var(--okd-color-background-surface-primary)"}});return ei.default.createElement(y.Box,{className:Te.root},ei.default.createElement(Ii,{columns:e,dataSource:t,className:Te.table,onHeaderCell:n,scroll:r}))}var ya=aC;g();D();var rd=_(Ct());st();dn();function sC(){let[t]=it(),[e]=le(),[r]=Ye(),[n]=ft(),[o]=dt(),[a]=Fe(),s=(0,rd.useSelector)(ct);return()=>{let i={[J.ONE_TO_MANY]:"one_to_many",[J.MANY_TO_MANY]:"many_to_many",[J.MANY_TO_ONE]:"many_to_one"},l={[de.ALL]:"max",[de.RANDOM]:"range",[de.CUSTOM]:"specific_amount"},c={[He.NONE]:"no_interval",[He.RANDOM]:"range"},f={[Qe.LOW]:"slow",[Qe.MEDIUM]:"average",[Qe.HIGH]:"fast",[Qe.CUSTOM]:"custom"},v,p;return t===J.ONE_TO_MANY?(v=1,p=a.length):t===J.MANY_TO_ONE?(v=a.length,p=1):(v=a.length,p=a.length),{transaction_type:i[t],token:e?.symbol,chain:r?.chainId?parseInt(r?.chainId,16):null,sending_address_count:v,receiving_address_count:p,sending_amount_type:l[n?.type],interval_setting:c[o?.type],gas_level:f[s?.level],transactions:a.map(({from:h,to:m,txAmount:u,txHash:C,txStatus:A})=>{let E;return A===re.SUCCEED?E="succeed":A===re.FAILED&&(E="fail"),Ai({from:h,to:m,sending_amount:Ti(u,10**e?.decimals),transaction_id:C,succeed_fail:E},Ci)})}}}var Ta=sC;ze();g();D();var Ie=_(ee()),ai=_(qe());pe();st();dn();g();D();g();D();g();D();var _a=_(ee());var ri=_(qe());g();D();var ti=_(ee());var nd=_(qe());var iC=({children:t,className:e,...r})=>ti.default.createElement(y.Box,{className:(0,nd.default)(Te.row,e),...r},ti.default.createElement(y.Box,null),t),ar=iC;function uC(t){let[e,r]=Fe(),{gotoAddressPage:n}=At(),{index:o}=t,a=()=>{let s=[...e.slice(0,o),...e.slice(o+1)];r(s),s.length<=0&&n()};return _a.default.createElement(ar,null,_a.default.createElement(y.Box,{className:(0,ri.default)(Te.text),onClick:a},_a.default.createElement(lt,{className:(0,ri.default)("okx-wallet-plugin-trash",Te.remove)})))}var od=uC;g();D();var sr=_(ee()),Sa=_(qe());pe();function lC(t){let{error:e,showShortAddress:r=!1,from:n,order:o,to:a,isFromAddress:s=!1,showTextOneLine:i=!1,showOrder:l=!1,showError:c=!1}=t,f=e===Qt.BALANCE_INSUFFICIENT,v=!!e,p=f?"okx-wallet-plugin-warning-circle-fill":"okx-wallet-plugin-gas",h=(0,sr.useMemo)(()=>e===Qt.BALANCE_INSUFFICIENT?T("wallet_extension_list_tooltips_scarce_balance"):e===Qt.FEE_BALANCE_INSUFFICIENT?T("wallet_extension_list_tooltips_scarce_fee"):e,[e]),m=s?n:a,u=r?sr.default.createElement(yt,{title:m},So(m)):m;return sr.default.createElement(ar,null,l&&sr.default.createElement(y.Box,{className:Te.order},o,"."),sr.default.createElement(y.Box,{className:(0,Sa.default)(Te.text,{[Te.oneLineText]:i,[Te.moreLineText]:!i,[Te.receiveError]:c&&v})},u),c&&v&&sr.default.createElement(y.Box,{className:(0,Sa.default)(Te.addressError)},sr.default.createElement(yt,{title:h},sr.default.createElement(lt,{className:(0,Sa.default)(p,Te.errorIcon)}))))}var ad=lC;g();D();var ni=_(ee());var sd=_(qe());pe();st();function cC(t){let{txAmount:e,showTextOneLine:r}=t;return ni.default.createElement(ar,null,ni.default.createElement(y.Box,{className:(0,sd.default)(Te.text,{[Te.oneLineText]:r,[Te.moreLineText]:!r})},H.thousandFormat(cn([e||0,0]))))}var id=cC;g();D();var Lr=_(ee()),ud=_(cp());pe();var oi=_(qe());function fC(t){let{txHash:e}=t,[r]=Ye(),n="",o=r.blockExplorerUrl||r.explorerUrl;o&&(n=fl(o,"tx",e));let a=()=>{e&&(n?globalThis.platform.openTab({url:n}):((0,ud.default)(e),qa.success({desc:Lr.default.createElement(we.Text,{inherit:!0,forceWrap:!0},e),placement:qa.DIRECTION.top,title:T("wallet_receive_toast_address_copied")})))};return Lr.default.createElement(ar,{className:Te.hash,onClick:a},e?Lr.default.createElement(Lr.default.Fragment,null,Lr.default.createElement(y.Box,{className:(0,oi.default)(Te.text,Te.hashText)},So(e)),Lr.default.createElement(y.Box,null,Lr.default.createElement(lt,{className:(0,oi.default)(Te.open,{"okx-wallet-plugin-open-link":n,"okx-wallet-plugin-copy":!n})}))):"-")}var ld=fC;g();D();var tn=_(ee()),cd=_(qe());pe();g();D();var io={inputRoot:"_inputRoot_rigrr_1",input:"_input_rigrr_1",errorIcon:"_errorIcon_rigrr_8",textRoot:"_textRoot_rigrr_12"};function dC({editable:t,memo:e,index:r}){let[n,o]=Fe();if(t){let a=s=>{let i=s.target.value,l=[...n];l[r]={...l[r],memo:i,tonMemoError:i.length>200},o(l)};return tn.default.createElement("div",{className:io.inputRoot},tn.default.createElement(Ne,{className:io.input,style:{width:"320px"},size:Ne.SIZE.xs,value:n[r]?.memo||"",onChange:a}),n[r]?.tonMemoError&&tn.default.createElement(yt,{title:T("wallet_extension_ton_tooltip_character_limit"),placement:yt.DIRECTION.bottomRight},tn.default.createElement(lt,{className:(0,cd.default)("okx-wallet-plugin-warning-circle-fill",io.errorIcon)})))}return tn.default.createElement("div",{className:io.textRoot},tn.default.createElement("div",{className:Te.text},e))}var fd=dC;g();D();var rn=_(ee()),ba=_(qe());g();D();var dd={"error-icon":"_error-icon_12rdj_1",errorIcon:"_error-icon_12rdj_1"};function mC(t){let{txStatus:e,errorMsg:r}=t;return rn.default.createElement(ar,null,(()=>{switch(e){case re.SUCCEED:return rn.default.createElement(lt,{className:(0,ba.default)("okds-success-circle",Te.success)});case re.FAILED:return rn.default.createElement(yt,{title:r},rn.default.createElement(lt,{className:(0,ba.default)("okx-wallet-plugin-warning-circle",Te.error,dd.errorIcon)}));case re.DROPPED:return rn.default.createElement(lt,{className:(0,ba.default)("okx-wallet-plugin-warning-circle",Te.error)});case re.PENDING:return rn.default.createElement(Gt,{size:Gt.SIZE.md,loaderClassName:Te.loader});default:return"-"}})())}var md=mC;var Ke={ADDRESS:"address",AMOUNT:"amount",ACTION:"action",HASH:"hash",STATUS:"status",MEMO:"memo"},Na={[Ke.ADDRESS]:ad,[Ke.AMOUNT]:id,[Ke.ACTION]:od,[Ke.HASH]:ld,[Ke.STATUS]:md,[Ke.MEMO]:fd};var Br={FROM:"from",TO:"to",TX_AMOUNT:"txAmount",ACTION:"action",MEMO:"memo"},pd=[{title:"wallet_extension_list_title_send_address",key:Br.FROM,type:Ke.ADDRESS},{title:"wallet_extension_list_title_receive_address",key:Br.TO,type:Ke.ADDRESS},{title:"wallet_extension_list_title_amount",key:Br.TX_AMOUNT,type:Ke.AMOUNT,width:100},{title:"wallet_extension_list_title_operation",key:Br.ACTION,type:Ke.ACTION,width:50}];var uo={[Qe.HIGH]:"wallet_extension_gas_select_fast",[Qe.MEDIUM]:"wallet_extension_gas_select_average",[Qe.LOW]:"wallet_extension_gas_select_slow",[Qe.CUSTOM]:"commonall_filter_dropdown_custom"},hd=[{value:de.CUSTOM,label:"wallet_extension_amount_select_designated_amount"},{value:de.ALL,label:"wallet_extension_amount_dropdown_all_balance"},{value:de.RANDOM,label:"wallet_extension_amount_dropdown_random_size"}];g();D();var xt={root:"_root_17dsg_1",title:"_title_17dsg_27",setting:"_setting_17dsg_46",item:"_item_17dsg_70",inactive:"_inactive_17dsg_106",active:"_active_17dsg_109",label:"_label_17dsg_112",fee:"_fee_17dsg_119",gweiText:"_gweiText_17dsg_143",customInput:"_customInput_17dsg_147",defaultTip:"_defaultTip_17dsg_153",defaultChecker:"_defaultChecker_17dsg_159"};function vd(){return Ie.default.createElement("div",{className:xt.gweiText},T("extension_wallet_transaction_input_gwei"))}var pC=()=>new Promise((t,e)=>{let r=Wr.tip({children:T("wallet_extension_mid_alert_checkbox_setting_uncheck"),confirmText:T("wallet_extension_btn_general_confirm"),cancelText:T("wallet_extension_btn_general_cancel"),btnFull:!1,async onConfirm(){t(),r.destroy()},onCancel(){e(),r.destroy()}})});function hC({custom:t,onClose:e,network:r,onConfirm:n,isSupportEip1559:o}){let{gasPrice:a,gasLimit:s,baseFeePerGas:i,maxFeePerGas:l,maxPriorityFeePerGas:c}=t,[f,v,p]=bo(r?.realChainIdHex||r?.chainId),h=zo(i),m=o?`${T("extension_wallet_transaction_text_maxbase_fee")} (${T("extension_wallet_transaction_text_current",{number:h})})`:T("wallet_extension_cosmos_title_gasfee"),u=zo(o?fn(l,c):a),[C,A]=(0,Ie.useState)(u),E=zo(c),[w,F]=(0,Ie.useState)(E),[S,M]=(0,Ie.useState)(!!f),P=U=>{let G=U.target.checked;M(G),G&&Ji()};(0,Ie.useEffect)(()=>{M(!!f)},[f]);let[L]=(0,Ie.useState)(s),O=(0,Ie.useMemo)(()=>{let U=!Number(C);return o&&(U=U||!Number(w)),U},[C,w,o]);return Ie.default.createElement(Wr.Confirmation,{maskClosable:!1,visible:!0,title:T("commonall_filter_dropdown_custom"),confirmText:T("commonall_text_btn_confirm"),cancelText:T("commonall_text_btn_cancel"),confirmDisabled:O,onConfirm:async()=>{let{price:U,usdToThisRate:G}=t,k=Ln(o?Bo(C,w):C),{networkFee:Y,networkFeeInt:W,networkFeeMarket:$}=dr({gasPrice:k,gasLimit:L,price:U,usdToThisRate:G}),ne={...t,isDefault:S,networkFee:Y,networkFeeInt:W,networkFeeMarket:$,gasPrice:k,maxFeePerGas:k,maxPriorityFeePerGas:Ln(w),gasLimit:L};!Di(f)&&!S?(await pC(),p()):v({isDefault:!0,isSupportEip1559:o,gasPrice:k,maxFeePerGas:k,maxPriorityFeePerGas:Ln(w),baseFeePerGas:fn(k,Ln(w))}),n(ne)},onCancel:e,onClose:e},Ie.default.createElement(y.Box,null,Ie.default.createElement(Ne.Number,{className:xt.customInput,size:Ne.SIZE.sm,title:m,placeholder:u,value:C,precision:9,enableMinus:!1,min:0,onChange:A,suffix:Ie.default.createElement(vd,null)}),o&&Ie.default.createElement(Ne.Number,{className:xt.customInput,size:Ne.SIZE.sm,placeholder:E,title:T("extension_wallet_transaction_text_priority_fee"),value:w,precision:9,enableMinus:!1,min:0,onChange:F,suffix:Ie.default.createElement(vd,null)})),Ie.default.createElement(y.Box,{className:xt.defaultTip},T("wallet_extension_mid_checkbox_setting_default")),Ie.default.createElement(Fr,{checked:S,onChange:P,className:xt.defaultChecker},T("wallet_extension_bot_alert_default_gas",{networkName:r.name})))}function vC({loading:t,value:e,network:r,className:n,options:o,onChange:a=()=>{},onCustomChange:s=()=>{}}){let[i]=Cn(),[l,c]=(0,Ie.useState)(!1);return Ie.default.createElement(y.Spin,{loading:t&&!o?.length,className:(0,ai.default)(xt.root,n)},Ie.default.createElement(y.Box,{className:xt.title},T("wallet_extension_gas_title_internet_fee")),Ie.default.createElement(y.Box,{className:xt.setting},o.map(f=>{let{level:v,unitPriceDisplay:p}=f,h=T(uo[v]);return Ie.default.createElement(y.Box,{className:(0,ai.default)(xt.item,e?.level===v?xt.active:xt.inactive),key:v,onClick:()=>{f.level===Qe.CUSTOM?c(!0):a?.(f)}},Ie.default.createElement(y.Box,{className:xt.label},h),Ie.default.createElement(y.Box,{className:xt.fee},Ie.default.createElement(we.Text,{type:we.TYPE.secondary,size:we.SIZE.xs,ellipsis:{tooltip:!0}},p),Ie.default.createElement(y.Box,null,T("extension_wallet_transaction_input_gwei"))))})),l&&Ie.default.createElement(hC,{network:r,isSupportEip1559:i,custom:o[o.length-1],onConfirm:f=>{s(f),c(!1)},onClose:()=>{c(!1)}}))}var gd=vC;g();D();var ir=_(ee()),Dd=_(qe());pe();g();D();var si=_(ee());function gC(){let[t,e]=(0,si.useState)(!1),[r,n]=(0,si.useState)(!1),o=(l,c)=>l&&c&&Number(l)>Number(c);return{hasMinError:t,hasMaxError:r,checkMaxError:(l,c)=>{e(!1),n(o(l,c))},checkMinError:(l,c)=>{n(!1),e(o(l,c))},clearError:()=>{n(!1),e(!1)}}}var Oa=gC;g();D();var kr={root:"_root_rc0rn_1",title:"_title_rc0rn_27",type:"_type_rc0rn_45",random:"_random_rc0rn_56",input:"_input_rc0rn_76",setting:"_setting_rc0rn_80"};function DC({value:t,className:e,onChange:r}){let{type:o,min:a,max:s}=t,{hasMinError:i,hasMaxError:l,checkMaxError:c,checkMinError:f,clearError:v}=Oa(),p=S=>{let M={...t,...S};r?.(M)},h=S=>{let M=S;p({min:M}),f(M,s)},m=S=>{p({max:S}),c(a,S)},u=T("wallet_extension_interval_title_send_interval"),C=[{value:He.NONE,label:T("wallet_extension_interval_select_no_interval")},{value:He.RANDOM,label:T("wallet_extension_interval_dropdown_random_interval")}],A=T("wallet_extension_interval_subtitle_lowest"),E=T("wallet_extension_interval_subtitle_highest"),w=S=>{let M=S.value;M!==o&&(p({type:M,min:"",max:""}),v())},F=o===He.NONE;return ir.default.createElement(y.Box,{className:(0,Dd.default)(kr.root,e)},ir.default.createElement(y.Box,{className:kr.type},ir.default.createElement(y.Box,{className:kr.title},u),ir.default.createElement(y.Box,null,ir.default.createElement(mn,{options:C,value:o,onChange:w,align:mn.DIRECTION.right}))),ir.default.createElement(y.Box,{className:kr.setting},ir.default.createElement(y.Box,{className:kr.random},ir.default.createElement(Ne.Number,{className:kr.input,title:A,value:a,onChange:h,size:Ne.SIZE.lg,placeholder:"0",min:0,max:600,disabled:F,error:i,errorType:Ne.TIP_TYPE.always}),ir.default.createElement(Ne.Number,{className:kr.input,title:E,value:s,onChange:m,size:Ne.SIZE.lg,placeholder:"0",disabled:F,min:0,max:600,error:l,errorType:Ne.TIP_TYPE.always}))))}var Cd=DC;g();D();var wt=_(ee()),Ed=_(qe()),Ad=_(Ce());pe();ze();g();D();var xr={root:"_root_iq84d_1",type:"_type_iq84d_32",title:"_title_iq84d_54",random:"_random_iq84d_77",input:"_input_iq84d_91",setting:"_setting_iq84d_95"};function CC({value:t,className:e,options:r,onChange:n}){let[o]=le(),[a]=Ho(),s=Number(o?.decimals??18),{hasMinError:i,hasMaxError:l,checkMaxError:c,checkMinError:f,clearError:v}=Oa(),p=E=>{n?.({min:E}),f(E,t.max)},h=E=>{n?.({max:E}),c(t.min,E)},m=E=>{n?.({amount:E})},u=(0,Ad.useMemoizedFn)(E=>{E?.value!==t.type&&(n?.({type:E?.value,amount:"",min:"",max:""}),v())},[t]),C=H.thousandFormat("0.00"),A=(0,wt.useMemo)(()=>o?.localType===De&&_t(o)&&H.div(a,10**o?.decimals)||0,[a,o]);return wt.default.createElement(y.Box,{className:(0,Ed.default)(xr.root,e)},wt.default.createElement(y.Box,{className:xr.type},wt.default.createElement(y.Box,{className:xr.title},T("wallet_extension_amount_title_transfer_amount")),wt.default.createElement(y.Box,null,wt.default.createElement(mn,{options:r,value:t?.type,onChange:u,align:mn.DIRECTION.right}))),wt.default.createElement(y.Box,{className:xr.setting},t?.type===de.RANDOM?wt.default.createElement(y.Box,{className:xr.random},wt.default.createElement(Ne.Number,{enableMinus:!1,className:xr.input,suffix:o?.symbol,title:T("wallet_extension_amount_input_lowest"),value:t?.min,onChange:p,size:Ne.SIZE.lg,precision:s,placeholder:C,min:A,error:i,errorType:Ne.TIP_TYPE.always}),wt.default.createElement(Ne.Number,{suffix:o?.symbol,className:xr.input,title:T("wallet_extension_amount_input_highest"),value:t?.max,onChange:h,precision:s,size:Ne.SIZE.lg,placeholder:C,min:A,error:l,errorType:Ne.TIP_TYPE.always})):wt.default.createElement(y.Box,{className:xr.custom},wt.default.createElement(Ne.Number,{enableMinus:!1,suffix:o?.symbol,title:T("wallet_extension_amount_subtitle_send_amount"),value:t?.amount,size:Ne.SIZE.lg,onChange:m,disabled:t?.type===de.ALL,precision:s,placeholder:t?.type===de.ALL?T("wallet_extension_amount_dropdown_all_balance"):C,min:A}))))}var Bd=CC;g();D();var ka=_(ee()),Td=_(Ct()),La=_(Ce());pe();g();D();var xd=_(ee()),Ia=(t,e={})=>(r,n)=>xd.default.createElement(t,{...n,...e});ze();dn();g();D();st();var EC=(t,e,r=0)=>+xi(t,e,!0).toFixed(r),Ft=EC;g();D();pe();dn();var Pa=({balance:t,isBaseCoin:e,baseCoinBalance:r,usedCoinBalance:n,usedFeeCoinBalance:o})=>{if(H.lt(r,o))return Qt.FEE_BALANCE_INSUFFICIENT;if(e){if(H.lt(t,H.add(n,o)))return Qt.BALANCE_INSUFFICIENT}else if(H.lt(t,n))return Qt.BALANCE_INSUFFICIENT;return null},wd=({balance:t,solRent:e,usedRent:r,txAmount:n,isBaseCoin:o,formattedSolRent:a,baseCoinBalance:s,usedCoinBalance:i,usedFeeCoinBalance:l})=>{let c,f=!0;if(H.lt(s,l))return Qt.FEE_BALANCE_INSUFFICIENT;if(o){if(H.lt(t,H.add(i,l))&&(f=!1),H.lt(n,e))return T("walletextension_toast_text_minimum_rent_fee",{number:a});c=H.sub(s,H.add(l,i))}return H.lt(s,H.add(l,r))?T("extension_wallet_transfer_alert_insufficient"):(o||(c=H.sub(s,H.add(l,r)),H.lt(t,i)&&(f=!1)),f?Number(c)!==1&&H.lt(c,e)&&H.gt(c,0)?T("walletextension_toast_text_reserve_rent_exempt",{number:a}):null:Qt.BALANCE_INSUFFICIENT)},Fd=async({coin:t,balance:e,txAmount:r,isBaseCoin:n,baseCoinBalance:o,usedCoinBalance:a,usedFeeCoinBalance:s})=>{let i=Pa({balance:e,txAmount:r,isBaseCoin:n,baseCoinBalance:o,usedCoinBalance:a,usedFeeCoinBalance:s});if(i)return i;let{ZksyncWallet:l}=await Oo(),c=r&&await l.getCloseAmounts(r);return c&&!H.eq(c,r)?T("wallet_extension_placeholder_zksync_max_num",{amount:H.showFloorTruncation(H.div(c,10**t?.decimals),t?.decimals,!1)}):null};function yd({balance:t,txAmount:e,isBaseCoin:r,baseCoinBalance:n,usedCoinBalance:o,usedFeeCoinBalance:a,tonSignInfo:s,baseCoinDecimals:i,index:l,mode:c,amountSetting:f}){if(s?.getCustomPayloadInfoRpcError)return T("wallet_extension_multisender_notice_failed_try_again");let v=Pa({balance:t,txAmount:e,isBaseCoin:r,baseCoinBalance:n,usedCoinBalance:o,usedFeeCoinBalance:a});if(v)return v;if(f.type!==de.CUSTOM&&_i(e,0))return T("wallet_extension_ton_error_cannot_be_zeror");if(!r&&s){let p=s?.minTonLimit,h=H.add(p||"0",a||"0");if(c===J.ONE_TO_MANY&&(h=H.add(h,H.mul(p,l))),H.gt(h,n)){let m=H.div(h,10**i);return T("wallet_extension_ton_errormessage_insufficient_balance_gas2",{amount:m})}}return null}var AC=9,_d=({token:t,networkFee:e,amountSetting:r})=>{let{isSm:n}=$e(),[o]=it(),[a]=Ho(),[s]=Go(),[i,l]=(0,ka.useState)([]),[c,f]=Fe(),v=(0,Td.useSelector)(gu),p=er(t?.baseCoinId===0?t.coinId:t?.baseCoinId),h=_t(t);(0,La.useAsyncEffect)(async()=>{if(!r)return;let{type:E,amount:w,min:F,max:S}=r;E===de.CUSTOM&&f(c?.map(M=>({...M,txAmount:H.mul(w,10**(t?.decimals??18))}))),E===de.RANDOM&&f(c?.map(M=>{let P=F&&S&&Number(F)<=Number(S)?Ft(F,S,6):0;return{...M,txAmount:H.mul(P,10**(t?.decimals??18))}}))},[r,c?.length,t?.decimals]);let m=async E=>{let{ZksyncWallet:w}=await Oo();return await Promise.all(E.map(async S=>({...S,txAmount:S?.txAmount&&await w.getCloseAmounts(S?.txAmount)})))};(0,La.useAsyncEffect)(async()=>{if(!r)return;let{type:E}=r;if(E===de.ALL&&o===J.ONE_TO_MANY){let[{balance:w}]=c,F=c?.length,S=h?fn(w,H.mul(e?.networkFeeInt,F)):w,M=Ga(H.div(S,c?.length),0),P=Ga(H.div(w,F),0);f(c.map((L,O)=>(O===F-1&&(P=H.sub(w,H.mul(P,F-1)),M=h?H.sub(P,e?.networkFeeInt):P),{...L,txAmount:M,usedBalance:P})))}if(E===de.ALL&&o!==J.ONE_TO_MANY){let w=c.map(F=>{let{balance:S}=F,M=h?fn(S,e?.networkFeeInt):S;return{...F,txAmount:M}});f(t?.localType===se?await m(w):w)}},[r.type,c?.length,t?.decimals,e?.networkFeeInt]),(0,La.useAsyncEffect)(async()=>{l(await(async()=>{let w=0,F=0,S=0,M=e?.networkFeeInt,P=Pa;return t?.localType===De?P=wd:t?.localType===se?P=Fd:t?.localType===he&&(P=O=>yd({...O,tonSignInfo:v,baseCoinDecimals:p?.decimals,mode:o,amountSetting:r})),await Promise.all(c.map(async(O,U)=>{let{to:G,txAmount:k,balance:Y,baseCoinBalance:W}=O,$=s[G]||"0";return o===J.ONE_TO_MANY?(S=H.add(S,$),w=H.add(w,k),F=H.add(F,M)):(S=$,w=k,F=M),{...O,txAmount:H.truncate(H.div(k,10**(t?.decimals??18)),6,!1),index:U,showShortAddress:n,showTextOneLine:!1,order:U+1,error:await P({index:U,balance:Y,needRent:$,usedRent:S,solRent:a,txAmount:k,isBaseCoin:h,formattedSolRent:Wn(a,{decimals:AC}),baseCoinBalance:W,usedCoinBalance:w,usedFeeCoinBalance:F})}}))})())},[n,a,s,o,h,c,t?.decimals,p?.decimals,e?.networkFeeInt,v,r]);let u=(0,ka.useMemo)(()=>({[Br.FROM]:{showOrder:!0,showError:!0,isFromAddress:!0,showShortAddress:t?.localType===he},[Br.TO]:{showShortAddress:t?.localType===he},[Br.MEMO]:{editable:!0}}),[t?.localType]),C=[...pd];t?.localType===he&&C.splice(2,0,{title:"wallet_extension_ton_header_comment",key:Br.MEMO,type:Ke.MEMO,width:380});let A=C.map(E=>{let{title:w,key:F,type:S,...M}=E;return{title:T(w),dataIndex:F,key:F,render:Ia(Na[S],{...u[F],address:F}),...M}});return{dataSource:i,columns:A}};g();D();var wr=_(ee()),Sn=_(Ct()),lo=_(Ce());pe();ze();var BC=21e3,Sd=({from:t,to:e,token:r,network:n,txAmount:o=0})=>{let a=(0,Sn.useDispatch)(),s=Mu(),[i]=bo(n?.realChainIdHex||n?.chainId),l=(0,Sn.useSelector)(vu),[c]=(0,wr.useState)(!1),[f,v]=(0,wr.useState)([]),[p,h]=(0,wr.useState)(0),[m,u]=(0,wr.useState)(BC),C=Xu(),A=Ko(),E=Tl(),w=_l(),F=Zo(r?.coinId),S=Xo(),M=(0,Sn.useSelector)(ct),P=Vo(n?.rpcUrl),L=xa(),O=(0,lo.useMemoizedFn)(W=>{a(Tt(W))},[]),U=(0,lo.useMemoizedFn)(W=>{a(Tt(W)),v($=>{let ne=[...$],fe=ne.pop();return ne.push({...fe,...W,unitPriceDisplay:C(W.gasPrice)}),ne})}),G=ut(),k=(0,Sn.useSelector)(hn);(0,lo.useDebounceEffect)(()=>{[Ae,De,ke,se,he].includes(r?.localType)||(async()=>{let W=await P({value:o,to:et(e,r?.localType),from:et(t,r?.localType)},et(r?.address,r.localType));G&&(W=H.ceilMul(W,k?.gasLimit,0)),u(W)})()},[o],{wait:500}),(0,wr.useEffect)(()=>{(async()=>{let W=await L({coinId:r?.coinId,chainId:r?.chainId,contractAddress:r?.address});h(W)})()},[]);let{rpcNetworks:Y}=Po();return(0,wr.useEffect)(()=>{if(!(!Y?.length&&G)&&![Ae,De,ke,se,he].includes(r?.localType)){let W,$=l.map(ue=>{let{level:Se,gasPrice:Ee}=ue,{networkFee:Ze,networkFeeInt:x,networkFeeMarket:q}=dr({gasPrice:Ee,gasLimit:m,price:p,usdToThisRate:s?.usdToThisRate}),j={...ue,gasLimit:m,tokenPrice:p,networkFee:Ze,networkFeeInt:x,networkFeeMarket:q,currencySymbol:s?.symbol,label:T(uo[Se]),usdToThisRate:s?.usdToThisRate,unitPriceDisplay:C(Ee)};return Se===Qe.MEDIUM&&(W=j),j}),ne={...W},fe=!1,ge=M?.level;i?(ne={...i,...dr({gasLimit:m,price:p,gasPrice:i.gasPrice,usdToThisRate:s?.usdToThisRate})},fe=!0):ge===Qe.CUSTOM&&(ne=[...f].pop()||W);let X={...ne,level:Qe.CUSTOM,unitPriceDisplay:C(ne.gasPrice),label:T(uo[Qe.CUSTOM])};if($.push(X),v($),ge){let ue=$.find(Se=>Se.level===ge);a(Tt(ue||W))}else a(fe?Tt(X):Tt(W))}},[m,l,Y,G]),(0,wr.useEffect)(()=>{let W=async()=>{let X=await A({to:e,from:t,coinId:r?.coinId,chainId:r?.chainId}),{solRent:ue}=X||{};a(Lo(ue)),a(Tt(X))},$=async()=>{let X=await E({to:e,from:t,value:o,coinId:r?.coinId,chainId:r?.chainId,baseCoinId:r?.baseCoinId});a(Tt(X))},ne=async()=>{let X=await F({to:e,chainId:r?.chainId,contractAddress:r?.address});a(Tt(X))},fe=async()=>{let X=await w({coinId:r?.coinId,address:t});a(Tt(X))},ge=async()=>{let X=await S({baseCoinId:r?.baseCoinId,coinId:r?.coinId,chainId:r?.chainId,from:t,to:e,tokenAddress:r?.address,decimals:r?.decimals,amount:o});a(Tt(X))};r?.localType===se?ne():r?.localType===De?W():r?.localType===ke?$():r?.localType===Ae?fe():r?.localType===he&&ge()},[]),[c,f,O,U]};g();D();pe();var bd=_(Ce());ze();var Nd=_(ee());var Od=t=>{let[e,r]=ft(),o=hd.filter(({value:s})=>!(t===se&&s===de.RANDOM)).map(({label:s,value:i})=>({value:i,label:T(s)})),a=(0,bd.useMemoizedFn)((s={})=>{r({...e,...s})},[e]);return(0,Nd.useLayoutEffect)(()=>{t===se&&e?.type===de.RANDOM&&r({type:de.CUSTOM})},[t]),[e,o,a]};g();D();var co=_(ee()),Id=_(Ce());var xC=({dataSource:t,amountSetting:e,intervalSetting:r})=>{let{gotoSendPage:n}=At(),o=(0,co.useMemo)(()=>{if(!e)return!0;if(e.type===de.CUSTOM)return!e.amount&&e.amount!==0;if(e.type===de.RANDOM){let{min:c,max:f}=e;return!c||!f||Number(c)>Number(f)||Number(f)===0}return!1},[e]),a=(0,co.useMemo)(()=>{if(!r)return!0;if(r.type===He.RANDOM){let{min:c,max:f}=r;return!c||!f||Number(c)>Number(f)}return!1},[r]),s=(0,co.useMemo)(()=>t?.some(({error:c,tonMemoError:f})=>!!c||!!f),[t]),i=(0,co.useMemo)(()=>o||a||s,[o,a,s]),l=(0,Id.useMemoizedFn)(()=>{Xi?.(),n()},[]);return[i,l]},Pd=xC;g();D();var Rt={root:"_root_1mpnv_1",statistics:"_statistics_1mpnv_24",setting:"_setting_1mpnv_45",amount:"_amount_1mpnv_64",no_gas:"_no_gas_1mpnv_167",noGas:"_no_gas_1mpnv_167",interval:"_interval_1mpnv_257",gas:"_gas_1mpnv_440",address:"_address_1mpnv_531",footer:"_footer_1mpnv_611",alert:"_alert_1mpnv_682"};var wC=()=>{let{gotoAddressPage:t}=At(),{isSm:e}=$e(),[r]=le(),[n]=Ye(),[o]=Fe(),a=(0,Ld.useSelector)(ct),s=Ta(),i=wi(Fi(o,"balance"))[0],l=![Ae,De,ke,se,he].includes(r?.localType),[c,f,v,p]=Sd({...i,network:n,token:r,isEvmTransaction:l}),[h,m,u]=Od(r?.localType),{dataSource:C,columns:A}=_d({token:r,network:n,amountSetting:h,networkFee:a}),[E={},w]=dt(),[F,S]=Pd({dataSource:C,amountSetting:h,intervalSetting:E}),M=wa();return nt.default.createElement(_r,{footer:nt.default.createElement(y.Box,{className:Rt.footer},nt.default.createElement(te,{block:e,category:te.CATEGORY.outline,type:te.TYPE.primary,size:e?te.SIZE.lg:te.SIZE.xl,onClick:()=>{t()}},T("wallet_extension_footer_btn_back")),nt.default.createElement(te,{block:e,category:te.CATEGORY.fill,type:te.TYPE.highlight,size:e?te.SIZE.lg:te.SIZE.xl,onClick:()=>{S(),Ki(s())},disabled:F||!a},T("wallet_extension_footer_btn_confirm"))),useOkg:!1},nt.default.createElement(y.Box,{className:(0,fo.default)(Rt.root)},nt.default.createElement(_n,{title:T("wallet_extension_amount_title_input_amount"),subtitle:T("wallet_extension_amount_subtitle_input_number")}),nt.default.createElement(Fa,{className:Rt.statistics,statistics:M}),nt.default.createElement(y.Box,{className:Rt.setting},nt.default.createElement(y.Box,{className:(0,fo.default)(Rt.amount,{[Rt.no_gas]:!l})},nt.default.createElement(Bd,{value:h,options:m,onChange:u})),nt.default.createElement(y.Box,{className:(0,fo.default)(Rt.interval,{[Rt.no_gas]:!l})},nt.default.createElement(Cd,{value:E,onChange:w})),l&&nt.default.createElement(y.Box,{className:Rt.gas},nt.default.createElement(gd,{loading:c,network:n,options:f,onChange:v,value:a,onCustomChange:p})))),nt.default.createElement(y.Box,{className:(0,fo.default)(Rt.address)},r?.localType===se&&h.type===de.ALL&&nt.default.createElement(kn,{closable:!1,className:Rt.alert,title:T("wallet_extension_toast_zksync_max_num")}),nt.default.createElement(ya,{dataSource:C,columns:A})))},kd=nt.default.memo(wC);g();D();var Dt=_(ee());pe();g();D();var bt=_(ee());pe();var mo=_(qe());ze();g();D();var gt={root:"_root_a40u5_2",select:"_select_a40u5_67",titleBox:"_titleBox_a40u5_88",title:"_title_a40u5_88",tip:"_tip_a40u5_115",card:"_card_a40u5_131",icon:"_icon_a40u5_188",checkBox:"_checkBox_a40u5_204",check:"_check_a40u5_204",disabled:"_disabled_a40u5_220",active:"_active_a40u5_224",disabledContent:"_disabledContent_a40u5_227",name:"_name_a40u5_230",subtitle:"_subtitle_a40u5_237"};function FC(t){let{icon:e,name:r,mode:n,disable:o,active:a,onSelected:s,subtitle:i}=t,l=()=>{s(n);let c={[J.ONE_TO_MANY]:"1tomany",[J.MANY_TO_MANY]:"manytomany",[J.MANY_TO_ONE]:"manyto1"};Vi({button_name:c[n]})};return bt.default.createElement(y.Box,{className:(0,mo.default)(gt.card,{[gt.active]:a,[gt.disabled]:o}),onClick:l},bt.default.createElement("img",{src:e,height:72,alt:"",className:(0,mo.default)(gt.icon,{[gt.disabledContent]:o})}),bt.default.createElement(y.Box,{className:(0,mo.default)(gt.name,{[gt.disabledContent]:o})},r),i&&bt.default.createElement(y.Box,{className:(0,mo.default)(gt.subtitle,{[gt.disabledContent]:o})},i),a&&bt.default.createElement(y.Box,{className:gt.checkBox},bt.default.createElement(Fr.Circle,{checked:!0})))}function yC(){let t=T("wallet_extension_type_title_transaction_method");return bt.default.createElement(y.FlexBox,{className:gt.titleBox,align:y.ALIGN.center},bt.default.createElement(y.Box,{className:gt.title},t))}function TC(t){let{mode:e,onSelected:r,selectedNetwork:n}=t,o=Mo({light:"/cdn/assets/imgs/235/15D8A8A385BD668B.png",dark:"/cdn/assets/imgs/245/A1F7D56C14F82C12.png"}),a=Mo({light:"/cdn/assets/imgs/235/3043DD8BFB521773.png",dark:"/cdn/assets/imgs/245/5BE287EAEC2D70D7.png"}),s=Mo({light:"/cdn/assets/imgs/235/A1F8C8D99B9BE99C.png",dark:"/cdn/assets/imgs/245/2815C6DD084226C7.png"}),i={[J.ONE_TO_MANY]:{mode:J.ONE_TO_MANY,icon:o,disable:n?.localType===se,name:T("wallet_extension_type_pic_one_to_many")},[J.MANY_TO_ONE]:{mode:J.MANY_TO_ONE,icon:a,name:T("wallet_extension_type_pic_many_to_one")},[J.MANY_TO_MANY]:{mode:J.MANY_TO_MANY,icon:s,name:T("wallet_extension_type_pic_many_to_many")}};return bt.default.createElement(y.Box,{className:gt.root},bt.default.createElement(yC,null),bt.default.createElement(y.Box,{className:gt.select},Object.values(i).map((l,c)=>bt.default.createElement(FC,{key:c,onSelected:r,active:l.mode===e,...l}))))}var Md=TC;g();D();var Le=_(ee()),Ma=_(Ce()),ui=_(qe()),Rd=_(zi());pe();ze();g();D();var ur={root:"_root_bnow7_1",title:"_title_bnow7_4",inputWrap:"_inputWrap_bnow7_22",option:"_option_bnow7_25",inputPopup:"_inputPopup_bnow7_37",show:"_show_bnow7_53",loadingWrap:"_loadingWrap_bnow7_56","select-up-active":"_select-up-active_bnow7_62",selectUpActive:"_select-up-active_bnow7_62","item-image":"_item-image_bnow7_66",itemImage:"_item-image_bnow7_66","arrow-down-icon":"_arrow-down-icon_bnow7_70",arrowDownIcon:"_arrow-down-icon_bnow7_70"};var _C="0x",SC=async(t,e)=>{try{return!Qu(e)||await t.eth.getCode(e)===_C}catch{return!0}},bC=async(t,e)=>{let r=new e.eth.Contract(Rd.default,t),[n,o,a]=await Promise.all([r.methods.symbol().call(),r.methods.decimals().call(),r.methods.name().call()]);return{name:a,symbol:n,decimals:o}},ii=!1;function NC(t,e){let{value:r,options:n,disabled:o,selectedNetwork:a,onSelect:s,onInputChange:i,onCustomContractChange:l,refreshInfiniteScrollRef:c,tokensLoadingMore:f}=t,v=(0,Le.useRef)(),[p,h]=(0,Le.useState)(!1),[m,u]=(0,Le.useState)(!1),[C,A]=(0,Le.useState)(!1),[E,w]=(0,Le.useState)(r?.address||""),F=G=>(ii=!0,A(!1),w(""),s(G?{...G,custom:!1}:null)),S=(0,Ma.useMemoizedFn)(async({target:G})=>{w(G?.value)},[a?.rpcUrl]);(0,Le.useEffect)(()=>{i?.(E)},[E,i]);let M=async()=>{let G=n.find(({address:k})=>!!E&&k===E);if(G)F(G);else if(!ii&&E&&![Ae,De,ke,se,he].includes(a?.localType)){let k=await No(a?.rpcUrl);if(await SC(k,E)===!1){let W=await bC(E,k);l?.({...W,address:E,custom:!0}),A(!1)}else A(!0),l?.(null)}ii=!1};(0,Le.useEffect)(()=>{w(""),A(!1)},[a?.chainId]);let P=ut();(0,Le.useEffect)(()=>{w(""),A(!1)},[P]);let L=E&&C,O=!!n?.length;(0,Le.useEffect)(()=>{!p||(O?O&&u(!0):u(!1))},[O]),(0,Le.useLayoutEffect)(()=>{m&&c?.()},[m,c]),(0,Ma.useClickAway)(()=>{p&&h(!1),m&&u(!1)},v);let U=T("wallet_extension_type_placeholder_select_crypto");return Le.default.createElement(y.Box,{className:ur.root},Le.default.createElement(y.Box,{className:ur.title},T("wallet_extension_type_title_select_coin")),Le.default.createElement("div",{className:ur.inputWrap},Le.default.createElement(Ne,{getBoxRef:G=>{v.current=G},style:{width:"100%"},error:L&&T("wallet_manage_crypto_custom_crypto_errortip_invalid_address"),placeholder:U,value:r&&r?.custom===!1?r?.symbol:E||r?.address,onChange:S,onBlur:()=>{M()},onFocus:()=>{h(!0),O&&u(!0)},size:Ne.SIZE.xl,disabled:o,cleanable:!0,readonly:r&&r?.custom===!1&&"readonly",suffix:Le.default.createElement(Ge,{className:(0,ui.default)({[ur["select-up-active"]]:m}),icon:"okds-arrow-chevron-down-md",size:Ge.SIZE.xs}),onClear:()=>F(null)}),!!m&&Le.default.createElement("div",{ref:e,className:(0,ui.default)(ur.inputPopup,{[ur.show]:m})},n.map(G=>{let{image:k,imageUrl:Y,symbol:W}=G;return Le.default.createElement("div",{className:ur.option,key:W,onClick:()=>{F(G)}},Le.default.createElement(Ge,{className:ur.itemImage,src:k||Y,text:W,size:Ge.SIZE.md}),W)}),!!f&&Le.default.createElement("div",{className:ur.loadingWrap},Le.default.createElement(Gt.Circle,{size:Gt.SIZE.md})))))}var jd=Le.default.forwardRef(NC);g();D();var nn=_(ee());pe();g();D();var bn={"retina-border-basic":"_retina-border-basic_1vvj9_1",retinaBorderBasic:"_retina-border-basic_1vvj9_1",root:"_root_1vvj9_30",title:"_title_1vvj9_95",item:"_item_1vvj9_118",question:"_question_1vvj9_194",answer:"_answer_1vvj9_211"};g();D();var Nn=_(ee());g();D();var OC=t=>`${ku()}${t}`,zd=OC;pe();var Wd=()=>{let t=zd("/cdn/assets/files/235/C7BA61E964654AF6.csv");return{questions:[{question:T("wallet_extension_faq_title_distinction"),answer:Nn.default.createElement("pre",null,T("wallet_extension_faq_text_one_to_many"))},{question:T("wallet_extension_sending_title_multisender_network"),answer:Nn.default.createElement("pre",null,T("wallet_extension_sending_subtitle_multisender_evm"))},{question:T("wallet_extension_faq_title_what_transfer"),answer:Nn.default.createElement("pre",null,T("wallet_extension_faq_text_transfer_definition"))},{question:T("wallet_extension_faq_title_how_transfer"),answer:Nn.default.createElement("pre",null,T("wallet_extension_faq_text_transfer_method",{btn:Nn.default.createElement(Mn,{type:Mn.TYPE.primary,href:t,weight:Mn.WEIGHT.muted,size:Mn.SIZE.sm},T("wallet_extension_multisender_btn_download"))}))}]}};function IC(){let t=T("wallet_extension_faq_maintitle_question"),{questions:e}=Wd();return nn.default.createElement(y.Box,{className:bn.root},nn.default.createElement(y.Box,{className:bn.title},t),nn.default.createElement(y.Box,null,e.map((r,n)=>nn.default.createElement(y.Box,{key:n,className:bn.item},nn.default.createElement(y.Box,{className:bn.question},r.question),nn.default.createElement(y.Box,{className:bn.answer},r.answer)))))}var Ud=IC;g();D();var Kt=_(ee()),Hd=_(Ct()),Gd=_(Ce());pe();g();D();var Vt={root:"_root_1jex4_2",footer:"_footer_1jex4_11",network:"_network_1jex4_80",networkTitle:"_networkTitle_1jex4_156",networkSelectBox:"_networkSelectBox_1jex4_175",networkSelect:"_networkSelect_1jex4_175",tokenSelect:"_tokenSelect_1jex4_221",icon:"_icon_1jex4_262",loader:"_loader_1jex4_265","network-icon":"_network-icon_1jex4_268",networkIcon:"_network-icon_1jex4_268"};var PC=()=>{let[t,e]=(0,Kt.useState)(!1),r=Cl(),[,n]=le(),{isRpcMode:o,currentNetworkUniqueId:a}=(0,Hd.useSelector)(ko),s=r.find(p=>o?p.uniqueId===a:p.netWorkId===a),[i,l]=Ye(s),c=(0,Kt.useMemo)(()=>r.map(p=>{let{chainId:h,icon:m,chainName:u,rpcUrl:C}=p;return{network:p,value:h,searchKeyword:u,label:Kt.default.createElement(y.FlexBox,{align:y.ALIGN.center,style:{height:"20px",width:"100%"}},Kt.default.createElement(y.FlexBox,{align:y.ALIGN.center,style:{flex:1}},i?.rpcUrl===C&&t?Kt.default.createElement(Gt,{className:Vt.loader,size:Gt.SIZE.md}):Kt.default.createElement(Ge,{className:Vt.networkIcon,src:m,text:u,size:Ge.SIZE.md}),u))}}),[r,i?.rpcUrl,t]),f=async p=>{try{e(!0),await(await No(p)).eth.getGasPrice()}catch{let m=Wr.warn({title:T("developer_mode_network_toast_connect_failed"),text:T("developer_mode_network_toast_changenetwork"),cancelText:T("wallet_extension_sending_btn_cancel"),confirmText:T("developer_mode_network_btn_retry"),confirmBtnProps:{type:te.TYPE.highlight,size:te.SIZE.lg},onCancel:()=>{m.destroy(),l(null)},onConfirm:()=>{m.destroy(),f(p)}})}finally{e(!1)}},v=(0,Gd.useMemoizedFn)(({network:p={},label:h,...m})=>{l({...p,...m}),p?.appBaseChain==="ethereum"?f(p.rpcUrl).then(()=>{n(null)}).catch(()=>{}):n(null),$i()},[]);return(0,Kt.useEffect)(()=>{n(null)},[o]),[t,i,c,v]},Yd=PC;g();D();var Ra=_(Ce());var qd=_(ee());var LC=t=>{let[e,r]=le(),[n,o]=(0,qd.useState)(""),a=ut(),s=jo(),{list:i,listRef:l,refreshDom:c,loadingMore:f}=ed(t,n),v=async C=>{if(!C){r(null);return}let A=!C?.address,E=await Gi({coinId:C.coinId}),w;A?w=E:w=s.find(({coinId:S})=>S===C.baseCoinId);let{chainId:F}=t||{};E===null||!A&&w===null||r({chainId:F,...C,...E,baseCoin:A?void 0:w})},p=C=>{let A=!C?.address,{chainId:E}=t||{},w=s.find(({chainId:F})=>F===Dn(E));r({chainId:E,...C,baseCoin:A?void 0:w})},h=(0,Ra.useMemoizedFn)(C=>{v(C)}),m=(0,Ra.useMemoizedFn)(C=>{o(C)}),u=(0,Ra.useMemoizedFn)(C=>{p(C)});return[e,i,l,c,f,{onBatchTokenChange:a?u:h,onBatchCustomTokenChange:u,onInputChange:m}]},$d=LC;var kC=()=>{let{isSm:t}=$e(),{gotoAddressPage:e}=At(),[r,n]=it(),[o,a,s,i]=Yd(),[l,c,f,v,p,{onBatchTokenChange:h,onBatchCustomTokenChange:m,onInputChange:u}]=$d(a);return Dt.default.createElement(_r,{footer:Dt.default.createElement(y.FlexBox,{justify:"flex-end",className:Vt.footer},Dt.default.createElement(te,{block:t,category:te.CATEGORY.fill,type:te.TYPE.highlight,size:t?te.SIZE.lg:te.SIZE.xl,disabled:!a?.chainId||!r||!l?.symbol,onClick:e},T("wallet_extension_footer_btn_next")))},Dt.default.createElement(y.Box,{className:Vt.root},Dt.default.createElement(_n,{title:T("wallet_extension_type_title_select_type"),subtitle:T("wallet_extension_type_subtitle_select")}),Dt.default.createElement(y.Box,{className:Vt.network},Dt.default.createElement(y.Box,{className:Vt.networkSelectBox},Dt.default.createElement(y.Box,{className:Vt.networkTitle},T("wallet_extension_type_title_select_internet")),Dt.default.createElement(Ya,{block:!0,placeholder:T("wallet_extension_type_placeholder_ethereum"),size:Ya.SIZE.xl,onChange:i,value:a?.chainId,options:s,className:Vt.networkSelect,disabled:o,searchFocus:!1,searchPlaceholder:T("wallet_extension_sending_input_search_network"),scrollStyle:{height:360}})),Dt.default.createElement(y.Box,{className:Vt.tokenSelect},Dt.default.createElement(jd,{ref:f,disabled:!a?.chainId,value:l,options:c,onSelect:h,onInputChange:u,onCustomContractChange:m,selectedNetwork:a,tokensLoadingMore:p,refreshInfiniteScrollRef:v}))),Dt.default.createElement(Md,{mode:r,selectedNetwork:a,onSelected:n}),Dt.default.createElement(Ud,null)))},Vd=Dt.default.memo(kC);g();D();var ot=_(ee()),Hm=_(qe());st();g();D();var Mr={FROM:"from",TO:"to",TX_AMOUNT:"txAmount",STATUS:"txStatus",HASH:"txHash",MEMO:"memo"},ja=[{title:"wallet_extension_list_title_send_address",key:Mr.FROM,type:Ke.ADDRESS},{title:"wallet_extension_list_title_receive_address",key:Mr.TO,type:Ke.ADDRESS},{title:"wallet_extension_list_title_amount",key:Mr.TX_AMOUNT,type:Ke.AMOUNT},{title:"wallet_extension_list_colheader_state",key:Mr.STATUS,type:Ke.STATUS},{title:"wallet_extension_list_colheader_hash",key:Mr.HASH,type:Ke.HASH,align:"center",width:"200px"}],za={title:"wallet_extension_ton_header_comment",key:Mr.MEMO,type:Ke.MEMO};var ae={NONE:"NONE",SENDING:"SENDING",PAUSE:"PAUSE",FINISHED:"FINISHED",FAILED:"FAILED",CANCELED:"CANCELED",DONE:"DONE",BACK_TO_HOME:"BACK_TO_HOME"},Kd={[ae.SENDING]:[{actionProps:{children:"wallet_extension_footer_btn_cancel",category:te.CATEGORY.outline,type:te.TYPE.primary},actionType:ae.CANCELED},{actionProps:{children:"wallet_extension_footer_btn_stop",category:te.CATEGORY.outline,type:te.TYPE.primary},actionType:ae.PAUSE}],[ae.PAUSE]:[{actionProps:{children:"wallet_extension_footer_btn_cancel",category:te.CATEGORY.outline,type:te.TYPE.primary},actionType:ae.CANCELED},{actionProps:{children:"wallet_extension_footer_btn_continue",category:te.CATEGORY.fill,type:te.TYPE.highlight},actionType:ae.SENDING}],[ae.CANCELED]:[{actionProps:{children:"wallet_extension_complete_btn_done",category:te.CATEGORY.fill,type:te.TYPE.highlight},actionType:ae.DONE}],[ae.FINISHED]:[{actionProps:{children:"wallet_transfer_success_btn_back_to_home",category:te.CATEGORY.outline,type:te.TYPE.primary},actionType:ae.BACK_TO_HOME},{actionProps:{children:"wallet_extension_complete_btn_done",category:te.CATEGORY.fill,type:te.TYPE.highlight},actionType:ae.DONE}],[ae.FAILED]:[{actionProps:{children:"wallet_extension_failure_btn_cancel",category:te.CATEGORY.outline,type:te.TYPE.primary},actionType:ae.DONE},{actionProps:{children:"wallet_extension_failure_btn_restart_transaction",category:te.CATEGORY.fill,type:te.TYPE.highlight},actionType:ae.FAILED}]},Zd={[ae.SENDING]:{title:"wallet_extension_sending_title_sending",style:{color:"var(--okd-color-content-primary)"}},[ae.PAUSE]:{title:"wallet_extension_suspension_title_transaction_stop",style:{color:"var(--okd-color-content-primary)"}},[ae.FAILED]:{title:"wallet_extension_failure_title_fail_transaction",style:{color:"var(--okd-color-semantic-negative)"}},[ae.FINISHED]:{title:"wallet_extension_complete_title_complete_transaction",style:{color:"var(--okd-color-semantic-positive)"}}};ze();Rn();jn();g();D();var on=_(ee());pe();g();D();var Ue={root:"_root_edfdl_1",header:"_header_edfdl_24",content:"_content_edfdl_24",alert:"_alert_edfdl_28",statistics:"_statistics_edfdl_57",address:"_address_edfdl_73",footer:"_footer_edfdl_100",loadingIcon:"_loadingIcon_edfdl_171",pauseLoadingIcon:"_pauseLoadingIcon_edfdl_186",finished:"_finished_edfdl_190",finishedIcon:"_finishedIcon_edfdl_193",failed:"_failed_edfdl_197",failedIcon:"_failedIcon_edfdl_200",sendError:"_sendError_edfdl_204",warning:"_warning_edfdl_207",export:"_export_edfdl_214",exportIcon:"_exportIcon_edfdl_239",finishedConfirm:"_finishedConfirm_edfdl_243","status-icon":"_status-icon_edfdl_285",statusIcon:"_status-icon_edfdl_285","status-icon-pause":"_status-icon-pause_edfdl_298",statusIconPause:"_status-icon-pause_edfdl_298","status-title":"_status-title_edfdl_301",statusTitle:"_status-title_edfdl_301","status-desc-text":"_status-desc-text_edfdl_310",statusDescText:"_status-desc-text_edfdl_310","status-desc-container":"_status-desc-container_edfdl_326",statusDescContainer:"_status-desc-container_edfdl_326","result-main":"_result-main_edfdl_335",resultMain:"_result-main_edfdl_335"};g();D();var po=_(ee());pe();var Xd=({onExport:t,isFinished:e,isSm:r})=>po.default.createElement(y.Box,{className:Ue.warning},e&&po.default.createElement(y.Box,{className:Ue.export,onClick:t},po.default.createElement(Ge,{size:Ge.SIZE.sm,icon:"okx-wallet-plugin-export"}),po.default.createElement(y.Box,null,T("wallet_extension_complete_btn_export_transaction"))),!e&&!r&&T("wallet_extension_sending_text_no_close_page"));var MC=({onExport:t,onSendStatusChange:e,sendStatus:r=ae.SENDING})=>{let{isSm:n}=$e(),o=Kd[r],a=r===ae.FINISHED,s=a?y.Box:on.default.Fragment;return on.default.createElement(y.FlexBox,{align:y.ALIGN.center,className:Ue.footer},on.default.createElement(Xd,{onExport:t,isFinished:a,isSm:n}),o.map(({actionProps:{children:i,...l},actionType:c})=>on.default.createElement(s,{className:n&&Ue.finishedConfirm},on.default.createElement(te,{block:n,...l,size:n?te.SIZE.lg:te.SIZE.xl,onClick:()=>{e?.(c)}},T(i)))))},Jd=on.default.memo(MC);g();D();var Zt=_(ee()),Qd=_(qe());pe();var RC=({sendStatus:t})=>{if([ae.SENDING,ae.PAUSE].includes(t))return Zt.default.createElement(Gt,{loaderClassName:(0,Qd.default)(Ue.loadingIcon,{[Ue.pauseLoadingIcon]:t===ae.PAUSE})});let e={className:Ue["status-icon"]};return t===ae.FAILED?e=Object.assign(e,{icon:"okds-fail-circle",style:{color:"var(--okd-color-semantic-negative)"}}):t===ae.FINISHED&&(e=Object.assign(e,{icon:"okds-success-circle",style:{color:"var(--okd-color-semantic-positive)"}})),Zt.default.createElement(Ge,{...e})},jC=({sendStatus:t,sendResult:e=[]})=>{let{isSm:r}=$e(),{title:n,style:o}=Zd[t],a=T(n),s=(0,Zt.useMemo)(()=>Zt.default.createElement(we.Text,{strong:700,style:o,className:Ue["status-title"]},a),[o,a]);return Zt.default.createElement(y.Space,{className:Ue["result-main"],space:r?"16px":"22px",align:y.ALIGN.center,direction:r?y.DIRECTION.vertical:y.DIRECTION.horizontal},Zt.default.createElement(RC,{sendStatus:t}),Zt.default.createElement(y.Space,{direction:y.DIRECTION.vertical,space:"8px"},s,Zt.default.createElement(y.Space,{space:r?"4px":"8px",direction:r?y.DIRECTION.vertical:y.DIRECTION.horizontal,className:Ue["status-desc-container"]},e.map(({title:i,args:l,style:c})=>Zt.default.createElement(we.Text,{key:i,style:c,className:Ue["status-desc-text"]},T(i,l))))))},em=jC;g();D();var ho=_(ee());pe();function zC({sendStatus:t}){let{isSm:e}=$e(),[r,n]=(0,ho.useState)(!0),o=au.FINISHED===t,a=T("wallet_extension_sending_text_no_close_page"),s=e&&r&&!o;return ho.default.createElement(y.Box,{className:Ue.alert},s?ho.default.createElement(kn,{desc:a,type:kn.TYPE.info,onClose:()=>{n(!1)}}):null)}var tm=zC;g();D();var rm=_(ee());pe();ze();var WC=()=>{let[t]=le(),[e=[]]=Fe(),r=e.map((s,i)=>({...s,showShortAddress:!0,showTextOneLine:!0,order:i+1,index:i,txAmount:H.truncate(H.div(s?.txAmount,10**(t?.decimals??18)),6,!1)})),n=(0,rm.useMemo)(()=>({[Mr.FROM]:{showOrder:!0,isFromAddress:!0}}),[]),o=[...ja];t?.localType===he&&o.splice(2,0,za);let a=o.map(s=>{let{title:i,key:l,type:c,...f}=s;return{title:T(i),dataIndex:l,key:l,render:Ia(Na[c],n[l]),...f}});return{dataSource:r,columns:a}},nm=WC;g();D();var li=_(ee());pe();var om=({sendStatus:t,sendAddress:e=[]})=>{let r=(0,li.useMemo)(()=>{let n=0,o=0,a=0,s=e?.length;return e.forEach(({txStatus:i})=>{i===re.FAILED&&n++,i===re.SUCCEED&&o++,i===re.PENDING&&a++}),{total:s,failed:n,success:o,notExecuted:s-n-a-o}},[e]);return(0,li.useMemo)(()=>{if(t===ae.FAILED)return[{title:"wallet_extension_failure_subtitle_fail_resend"}];let{total:n,failed:o,success:a,notExecuted:s}=r,i=[{title:"wallet_extension_multisender_text_success_transaction",args:{amount:H.thousandFormat(a)}}];return o>0&&i.push({title:"wallet_extension_multisender_text_failed_transaction",args:{amount:H.thousandFormat(o)},style:{color:"var(--okd-color-semantic-negative)"}}),t===ae.FINISHED?s>0&&i.push({title:"wallet_extension_multisender_text_not_executed_transaction",args:{amount:H.thousandFormat(s)}}):i.push({title:"wallet_extension_multisender_text_total_transaction",args:{amount:H.thousandFormat(n)}}),i},[t,r])};g();D();var sn=_(ee()),Lm=_(Ct()),km=_(ns()),Mm=_(Ce());ze();g();D();var Am=_(Ce());g();D();var On=_(ee()),In=_(Ct()),an=_(Ce());pe();g();D();var am=_(Ce());var sm=t=>{let e=er(t);return(0,am.useMemoizedFn)(async r=>{if(e?.baseCoinId===0||!r)return{tokenAccountAddress:"",createAssociatedAddress:!1};let{data:n}=await Hi({coinId:t,address:r});return{createAssociatedAddress:!n?.legal,tokenAccountAddress:n?.tokenAccountAddress}})};tp();Xa();ap();ze();g();D();var UC=async(t,e,r)=>{let n;try{await new Promise(o=>setTimeout(o,2e3)),n=await t.eth.getTransactionReceipt(e)}catch(o){if(!(typeof o=="object"&&"data"in o&&o.data==="transaction indexing is in progress"))throw o}for(;!n?.blockNumber&&r?.current&&!r.current.isCancelled;)try{await new Promise(o=>setTimeout(o,5e3)),n=await t.eth.getTransactionReceipt(e)}catch(o){if(!(typeof o=="object"&&"data"in o&&o.data==="transaction indexing is in progress"))throw o}return n},im=UC;g();D();st();ep();var um=({address:t,localType:e,contractAddress:r,symbol:n,errorMsg:o,txParams:a})=>{try{di.captureEvent({tags:{address:t},message:"BIZ_ERROR_batch_transfer_publish",contexts:{report:{info:JSON.stringify({address:t,localType:e,contractAddress:r,symbol:n,txParams:a,errorMsg:o})}},exception:{values:[{type:"BIZ_ERROR_batch_transfer_publish",value:t}]},level:"error"})}catch{mi()}};g();D();var lm=_(Ce());Rn();jn();var cm=_(ee()),HC=()=>{let t=(0,cm.useRef)();return(0,lm.useMemoizedFn)(e=>new Promise(r=>{let n=async()=>{let{data:o}=await Jt(Xt.batchGetTxStatus,{txHashList:[e]}),a=o[e];["SUCCESS","ERROR"].includes(a)&&(r(a),clearInterval(t.current))};t.current=setInterval(()=>{n()},2e3)}))},Wa=HC;g();D();var fm=_(Ce());var GC=t=>{let e=qr(t);return(0,fm.useMemoizedFn)(async r=>await(await e()).eth.getTransactionCount(r,"latest"),[e])},dm=GC;g();D();var mm=_(Ce());ze();var YC=()=>{let t=Et(),e=vn(De);return(0,mm.useMemoizedFn)(async()=>{let{recentBlockhash:r}=await t({isBatch:!0,coinId:fr,address:e});return r})},pm=YC;var qC=({selectedNetworkFee:t,injectGasPrice:e})=>{let r=e?.gasPrice||t?.gasPrice,n=e?.maxFeePerGas||t?.maxFeePerGas,o=e?.maxPriorityFeePerGas||t?.maxPriorityFeePerGas;return{gasPrice:r,maxFeePerGas:n,maxPriorityFeePerGas:o}},hm=t=>{let e=qr(t),[r]=it(),n=(0,On.useRef)(!1),o=(0,On.useRef)({}),[a]=le(),[s]=Ye(),i=dm(t),l=Vo(t),c=(0,On.useRef)({isCancelled:!1});(0,On.useEffect)(()=>()=>{c.current={isCancelled:!0}},[]);let f=el(),[v]=Cn(),p=(0,In.useSelector)(ct),h=Wu(),m=(0,In.useSelector)(mu);n.current=m,o.current=p;let u=ut(),C=(0,In.useSelector)(hn);return(0,an.useMemoizedFn)(async({to:A,from:E,value:w,usedBalance:F,balance:S,baseCoinBalance:M,transferAmountType:P,gasPrice:L})=>{let O=null,U=n.current||!1,G=null;try{let k=w,Y=await e(),{chainId:W}=s,$=_t(a),ne=E&&et(E,a?.localType),fe=A&&et(A,a?.localType),ge=await h(et(a?.address,a?.localType),ne,Y)||S,X=await l({to:fe,from:ne,value:w},et(a?.address,a?.localType));u&&(X=H.ceilMul(X,C?.gasLimit,0));let ue=await i(ne),Se=o.current,{gasPrice:Ee,maxFeePerGas:Ze,maxPriorityFeePerGas:x}=qC({selectedNetworkFee:Se,injectGasPrice:L}),{networkFeeInt:q}=dr({gasPrice:Ee,gasLimit:X}),j={to:A,from:E,value:w,nonce:ue,chainId:W,gasLimit:X,supportEip1559:v,contractAddress:et(a?.address,a?.localType),localType:a?.localType};if(v?j={maxFeePerGas:Ze,maxPriorityFeePerGas:x,type:Ja.FEE_MARKET,...j}:j={gasPrice:Ee,type:Ja.LEGACY,...j},G=Wo({to:A,from:E,value:w,nonce:ue,chainId:W,gasLimit:X,gasPrice:Ee,maxFeePerGas:Ze,supportEip1559:v,maxPriorityFeePerGas:x,contractAddress:et(a?.address,a?.localType),localType:a?.localType}),U){let _e=await f({...G,coinId:a?.coinId});q=H.add(q,_e)}$&&r!==J.ONE_TO_MANY&&P===de.ALL&&(k=H.sub(ge,q),G=Wo(Object.assign(j,{value:k}))),$&&r===J.ONE_TO_MANY&&P===de.ALL&&(k=H.sub(F,q),G=Wo(Object.assign(j,{value:k})));let K=Yr({isBaseCoin:$,balance:ge,baseCoinBalance:M,txAmount:j?.value,networkFee:q}),ce=await nl(ne);if(!K||!ce)return{to:A,from:E,txStatus:re?.FAILED};O=await Ro(G,Io(G?.from,a.localType),eu(a.localType));let oe=await Yn(ki,O);return await new Promise((_e,be)=>{Y.eth.currentProvider.send({method:"eth_sendRawTransaction",params:[O],jsonrpc:"2.0",id:bi()},(Pe,Be)=>{if(Pe||Be?.error){let Xe={message:Pe?.message||Be?.error?.message};be(Xe)}else _e(Be)})}),await im(Y,oe,c),{to:A,from:E,txHash:oe,txAmount:k,txStatus:re?.SUCCEED}}catch(k){return um({address:E,localType:s?.localType,contractAddress:et(a?.address,a?.localType),symbol:a?.symbol,errorMsg:k?.message,txParams:G}),{to:A,from:E,txStatus:re?.FAILED,errorMsg:k.message}}},[e])},vm=()=>{let[t]=le(),[e]=it(),r=Gr({localType:De,coinId:t?.coinId}),n=pm(),o=Ko(),a=sm(t?.coinId),s=(0,In.useSelector)(ct);return(0,an.useMemoizedFn)(async({to:i,from:l,amount:c,balance:f,usedBalance:v,baseCoinBalance:p,transferAmountType:h})=>{try{let m=c,u=_t(t),C=await n(),A=await o({coinId:t?.coinId,chainId:t?.chainId,to:i,from:l}),{createAssociatedAddress:E}=await a(i),w=A||s||{},{computeUnitLimit:F,computeUnitPrice:S,networkFeeInt:M}=w;h===de.ALL&&u&&e!==J.ONE_TO_MANY&&(m=H.sub(f,M)),h===de.ALL&&u&&e===J.ONE_TO_MANY&&(m=H.sub(v,M));let P={to:i,from:l,blockHash:C,payer:l,computeUnitLimit:F,computeUnitPrice:S,amount:m,type:u?Qa.TRANSFER:Qa.TOKEN_TRANSFER};if(t?.baseCoinId!==0&&Object.assign(P,{mint:t.address,createAssociatedAddress:E}),t?.protocolType===zn.SPL_TOKEN_2022&&Object.assign(P,{token2022:!0,decimal:t?.decimals}),!Yr({isBaseCoin:u,balance:f,baseCoinBalance:p,txAmount:m,networkFee:M}))return{to:i,from:l,txStatus:re?.FAILED};let O=await Ro(P,l,De),U=await Yn(De,O);return await r(O,{txHash:U,signedTx:O,toAdr:i,fromAdr:l,coinAmount:m,serviceCharge:M,walletId:void 0}),{to:i,from:l,txHash:U,txAmount:m,startTime:Date.now(),txStatus:re?.PENDING}}catch{return{to:i,from:l,txStatus:re?.FAILED}}})},gm=()=>{let[t]=le(),[e]=it(),r=Bl(t?.coinId),n=xl(t?.coinId),o=$o(),a=Wa();return(0,an.useMemoizedFn)(async({to:s,from:i,amount:l,balance:c,usedBalance:f,baseCoinBalance:v,transferAmountType:p})=>{try{let h=l,m=_t(t),u=await o({to:s,from:i,value:l,coinId:t?.coinId,baseCoinId:t?.baseCoinId});if(p===de.ALL&&m&&e!==J.ONE_TO_MANY&&(h=H.sub(c,u)),p===de.ALL&&m&&e===J.ONE_TO_MANY&&(h=H.sub(f,u)),!Yr({isBaseCoin:m,balance:c,baseCoinBalance:v,txAmount:h,networkFee:u}))return{to:s,from:i,txStatus:re?.FAILED};let{tx:A,txBytes:E,signedTx:w}=await r({to:s,from:i,value:l,coinId:t?.coinId,baseCoinId:t?.baseCoinId}),{hash:F}=w||{};return await n({tx:A,txBytes:E,to:s,from:i,coinAmount:l,signedTx:w}),e===J.ONE_TO_MANY&&await a(F)==="ERROR"?{to:s,from:i,txStatus:re?.FAILED}:{to:s,from:i,txHash:F,txAmount:h,startTime:Date.now(),txStatus:re?.PENDING}}catch{return{to:s,from:i,txStatus:re?.FAILED}}})},Dm=()=>{let[t]=le(),[e]=it(),r=Et(),n=Gr({localType:se,coinId:t?.coinId}),o=(0,In.useSelector)(ct),a=Zo(t?.coinId);return(0,an.useMemoizedFn)(async({to:s,from:i,amount:l,balance:c,baseCoinBalance:f,transferAmountType:v})=>{try{let p=l,h=_t(t),m=await r({value:"0",toAddr:s,address:i,fromAddr:i,coinId:t?.coinId}),{accountId:u,nonce:C}=m||{},E=await a({to:s,chainId:t?.chainId,contractAddress:t?.address})||o||{},{networkFeeInt:w}=E;v===de.ALL&&h&&e!==J.ONE_TO_MANY&&(p=H.sub(c,w));let F={to:s,from:i,type:"transfer",fees:w,amounts:p,decimals:t?.decimals,nonce:parseInt(C,10),accountId:parseInt(u,10),tokenSymbol:t?.originSymbol,tokenId:parseInt(t?.tokenId,10)};if(!Yr({isBaseCoin:h,balance:c,baseCoinBalance:f,txAmount:p,networkFee:w}))return{to:s,from:i,txStatus:re?.FAILED};let M=await Ro(F,i,se);if(M?.code)return{to:s,from:i,txStatus:re?.FAILED};let{signature:P,tx:L}=M,{txHash:O,...U}=L||{};return await n(JSON.stringify({signature:P,tx:U}),{txHash:O,signedTx:M,toAdr:L?.to,fromAdr:i,coinAmount:p,serviceCharge:L?.fee,walletId:void 0,extJson:JSON.stringify({serviceChargeCoinId:t?.coinId})}),{to:s,from:i,txHash:O,txAmount:p,startTime:Date.now(),txStatus:re?.PENDING}}catch{return{to:s,from:i,txStatus:re?.FAILED}}})},Cm=()=>{let[t]=le(),[e]=it(),r=El(),n=Gr({localType:Ae,coinId:t?.coinId}),o=qo(),a=Wa();return(0,an.useMemoizedFn)(async({to:s,from:i,amount:l,balance:c,usedBalance:f,baseCoinBalance:v,transferAmountType:p})=>{try{let h=l,m=t?.baseCoinId===0,{tyArg:u,chainId:C,networkFee:A,sequenceNumber:E,maxGasAmount:w,gasUnitPrice:F,expirationTimestampSecs:S}=await o({address:i,coinId:t?.coinId});if(p===de.ALL&&m&&e!==J.ONE_TO_MANY&&(h=H.sub(c,A)),p===de.ALL&&m&&e===J.ONE_TO_MANY&&(h=H.sub(f,A)),!Yr({isBaseCoin:m,balance:c,baseCoinBalance:v,txAmount:h,networkFee:A}))return{to:s,from:i,txStatus:re?.FAILED};let P=await r({to:s,from:i,tyArg:u,chainId:C,gasUnitPrice:F,maxGasAmount:w,sequenceNumber:E,amount:h,coinId:t?.coinId,expirationTimestampSecs:S,baseCoinId:t?.baseCoinId,metaAddress:t?.address,protocolType:t?.protocolType}),L=await Yn(Ae,P);return await n(P,{txHash:L,signedTx:P,toAdr:s,fromAdr:i,coinAmount:h,serviceCharge:A,walletId:void 0,extJson:JSON.stringify({nonce:E})}),e===J.ONE_TO_MANY?(await a(L),{to:s,from:i,txHash:L,txAmount:h,txStatus:re?.SUCCEED}):{to:s,from:i,txHash:L,txAmount:h,startTime:Date.now(),txStatus:re?.PENDING}}catch{return{to:s,from:i,txStatus:re?.FAILED}}})};function Em(){let[t]=le(),[e]=it(),r=Xo(),n=gn({localType:he}),o=Gr({coinId:t?.coinId,localType:he}),a=Wa();return(0,an.useMemoizedFn)(async({to:s,from:i,amount:l,balance:c,usedBalance:f,baseCoinBalance:v,transferAmountType:p,memo:h,isLast:m})=>{try{let u=t?.baseCoinId===0,C;(e===J.MANY_TO_MANY||e===J.MANY_TO_ONE||e===J.ONE_TO_MANY&&m)&&p===de.ALL?C=yr.CARRY_ALL_REMAINING_BALANCE:C=yr.PAY_GAS_SEPARATELY+yr.IGNORE_ERRORS;let{signInfo:A,gasLimitInfo:E,bodyParams:w,networkFeeInt:F}=await r({baseCoinId:t.baseCoinId,coinId:t.coinId,chainId:t.chainId,from:i,to:s,tokenAddress:t.address,decimals:t.decimals,amount:l,sendMode:C,memo:h}),S=l,M;p===de.ALL&&u&&e!==J.ONE_TO_MANY&&(S=H.sub(c,F)),p===de.ALL&&u&&e===J.ONE_TO_MANY&&(S=H.sub(f,F),m&&(M="0"));let{minTonLimit:P}=A||{},L=w;if(u?L={...L,amount:S}:(L={...L,messageAttachedTons:P,invokeNotificationFee:E?.invokeNotificationFee},A?.customPayload&&(L={...L,customPayload:A?.customPayload,stateInit:A?.stateInit})),!Yr({isBaseCoin:u,balance:c,baseCoinBalance:v,txAmount:S,networkFee:F}))return{to:s,from:i,txStatus:re?.FAILED};let G=(await n({params:L,fromAddr:i}))?.boc,k=await Yn(he,G);return await o(G,{coinAmount:M||S,fromAdr:i,toAdr:s,serviceCharge:F,txHash:k,extJson:JSON.stringify({nonce:L.seqno,isClaim:!!L.customPayload}),walletId:void 0,memo:L.memo}),e===J.ONE_TO_MANY?(await a(k),{to:s,from:i,txHash:k,txAmount:S,txStatus:re?.SUCCEED}):{to:s,from:i,txHash:k,txAmount:S,startTime:Date.now(),txStatus:re?.PENDING}}catch{return{to:s,from:i,txStatus:re?.FAILED}}})}g();D();g();D();var lr={uninitialized:0,initialized:1,waiting:2,paused:3,working:4,canceled:5,unknown:6},vo=class{constructor(e){Ht(this,"status",lr.uninitialized);Ht(this,"nextInfo",null);Ht(this,"cb",null);Ht(this,"args",[]);Ht(this,"next",(...e)=>{[lr.waiting,lr.canceled,lr.paused].includes(this.status)||!this.cb||(e.length>0&&(this.args=e),this.nextInfo=this.generator(this.execute,...this.args),this.status=lr.waiting,this.nextInfo.execute())});Ht(this,"execute",()=>{this.status=lr.working,this.cb?.(this.next)});Ht(this,"cancel",()=>{this.status=lr.canceled,this.nextInfo?.cancel?.(),this.cb=void 0});Ht(this,"pause",()=>{this.status=lr.paused,this.nextInfo?.pause?.()});Ht(this,"start",(e,...r)=>{this.cb=e,r.length>0&&(this.args=r),this.next()});Ht(this,"continue",()=>{this.status=lr.initialized,this.next()});this.generator=e,this.status=lr.initialized,this.nextInfo=null,this.cb=null}};function $C(t){let e=(r,n)=>{let o;return{execute:()=>{o=setTimeout(r,n??t??0)},cancel:()=>{clearTimeout(o)},pause:()=>{clearTimeout(o)}}};return new vo(e)}var jt=$C;var Bm=()=>{let[t]=dt(),[e]=ft(),[r,n]=Fe(),o=Cm();return(0,Am.useMemoizedFn)(async()=>{let a=0,{type:s,min:i,max:l}=t,c=r.map(v=>{let{to:p,from:h,txAmount:m,id:u}=v;return{to:p,from:h,interval:s===He.NONE?100:Ft(i,l,0)*1e3,request:async()=>o({...v,amount:m,transferAmountType:e.type}),id:u}}),f=jt();return f.start(async v=>{let p=c[a];if(p)try{n({to:p?.to,from:p?.from,txStatus:re.PENDING,id:p?.id});let{txStatus:h,txHash:m,from:u,startTime:C,txAmount:A}=await p.request();n({from:u,startTime:C,to:p?.to,txStatus:h,txAmount:A,txHash:m,id:p?.id})}catch(h){console.log(h)}finally{a++,v(p.interval)}}),f},[])};g();D();var xm=_(Ct()),wm=_(Ce());var Fm=()=>{let[t]=dt(),[e]=ft(),[r,n]=Fe(),o=hm(),a=(0,xm.useSelector)(ct),s=a?.level===Qe.CUSTOM;return(0,wm.useMemoizedFn)(async()=>{let i=0,{type:l,min:c,max:f}=t,v=r.map(h=>{let{to:m,from:u,txAmount:C,id:A}=h;return{to:m,from:u,interval:l===He.NONE?100:Ft(c,f,0)*1e3,request:async()=>o({...h,from:u,value:C,transferAmountType:e.type,gasPrice:s?a:{}}),id:A}}),p=jt();return p.start(async h=>{let m=v[i];if(m)try{n({to:m?.to,from:m?.from,txStatus:re.PENDING,id:m?.id});let{txStatus:u,txHash:C,from:A,txAmount:E,errorMsg:w}=await m.request();n({from:A,to:m?.to,txStatus:u,txHash:C,txAmount:E,id:m?.id,errorMsg:w})}finally{i++,h(m.interval)}}),p},[])};g();D();var ym=_(Ce());var Tm=()=>{let[t]=dt(),[e]=ft(),[r,n]=Fe(),o=vm();return(0,ym.useMemoizedFn)(async()=>{let a=0,{type:s,min:i,max:l}=t,c=r.map(v=>{let{to:p,from:h,txAmount:m,id:u}=v;return{to:p,from:h,interval:s===He.NONE?100:Ft(i,l,0)*1e3,request:async()=>o({...v,amount:m,transferAmountType:e.type}),id:u}}),f=jt();return f.start(async v=>{let p=c[a];if(p)try{n({to:p?.to,from:p?.from,txStatus:re.PENDING,id:p?.id});let{txStatus:h,txHash:m,from:u,startTime:C,txAmount:A}=await p.request();n({from:u,startTime:C,to:p?.to,txStatus:h,txAmount:A,txHash:m,id:p?.id})}catch(h){console.log(h)}finally{a++,v(p.interval)}}),f},[])};g();D();var _m=_(Ce());var Sm=()=>{let[t]=dt(),[e]=ft(),[r,n]=Fe(),o=gm();return(0,_m.useMemoizedFn)(async()=>{let a=0,{type:s,min:i,max:l}=t,c=r.map(v=>{let{to:p,from:h,txAmount:m,id:u}=v;return{to:p,from:h,interval:s===He.NONE?100:Ft(i,l,0)*1e3,request:async()=>o({...v,amount:m,transferAmountType:e.type}),id:u}}),f=jt();return f.start(async v=>{let p=c[a];if(p)try{n({to:p?.to,from:p?.from,txStatus:re.PENDING,id:p?.id});let{txStatus:h,txHash:m,from:u,startTime:C,txAmount:A}=await p.request();n({from:u,startTime:C,to:p?.to,txStatus:h,txAmount:A,txHash:m,id:p?.id})}catch(h){console.log(h)}finally{a++,v(p.interval)}}),f},[])};g();D();var bm=_(ee()),Nm=_(Ce());function Om(){let[t]=it(),[e]=dt(),[r]=ft(),[n,o]=Fe(),a=Em(),s=(0,bm.useRef)(-1);return(0,Nm.useMemoizedFn)(async()=>{let i=0,{type:l,min:c,max:f}=e,v=n.map((h,m)=>{let{to:u,from:C,txAmount:A,id:E}=h;return{to:u,from:C,interval:l===He.NONE?100:Ft(c,f,0)*1e3,request:async()=>a({...h,amount:A,transferAmountType:r.type,isLast:m===n.length-1}),id:E}}),p=jt();return p.start(async h=>{let m=v[i];if(m){if(t===J.ONE_TO_MANY&&s.current===i)return;s.current=i;try{o({to:m?.to,from:m?.from,txStatus:re.PENDING,id:m?.id});let{txStatus:u,txHash:C,from:A,startTime:E,txAmount:w}=await m.request();o({from:A,startTime:E,to:m?.to,txStatus:u,txAmount:w,txHash:C,id:m?.id})}catch(u){console.log(u)}finally{s.current=-1,i++,h(m.interval)}}}),p},[])}g();D();var Im=_(Ce());var Pm=()=>{let[t]=dt(),[e]=ft(),[r,n]=Fe(),o=Dm();return(0,Im.useMemoizedFn)(async()=>{let a=0,{type:s,min:i,max:l}=t,c=r.map(v=>{let{to:p,from:h,txAmount:m,id:u}=v;return{to:p,from:h,interval:s===He.NONE?100:Ft(i,l,0)*1e3,request:async()=>o({...v,amount:m,transferAmountType:e.type}),id:u}}),f=jt();return f.start(async v=>{let p=c[a];if(p)try{n({to:p?.to,from:p?.from,txStatus:re.PENDING,id:p?.id});let{txStatus:h,txHash:m,from:u,startTime:C,txAmount:A}=await p.request();n({from:u,startTime:C,to:p?.to,txStatus:h,txAmount:A,txHash:m,id:p?.id})}catch(h){console.log(h)}finally{a++,v(p.interval)}}),f},[])};var Rm=t=>{let[e]=le(),r=(0,km.useHistory)(),n=(0,Lm.useDispatch)(),o=ml(),a=(0,sn.useRef)(),[s,i]=(0,sn.useState)(ae.SENDING),l=gl(),c=Fm(s,e?.localType),f=Tm(s,e?.localType),v=Sm(),p=Pm(),h=Bm(),m=Om(),u=c;e?.localType===De?u=f:e?.localType===ke?u=v:e?.localType===se?u=p:e?.localType===Ae?u=h:e?.localType===he&&(u=m),(0,sn.useEffect)(()=>{let E=!t.some(({txStatus:F})=>F!==re.FAILED),w=!t.some(({txStatus:F})=>F===re.PENDING||!F);E?i(ae.FAILED):w&&i(ae.FINISHED)},[t]);let C=()=>{u().then(E=>{a.current=E}).catch(E=>{console.log(E)})};(0,sn.useEffect)(()=>{C()},[]);let A=(0,Mm.useMemoizedFn)(async E=>{E===ae.DONE?o():E===ae.PAUSE?(a.current?.pause(),i(ae.PAUSE)):E===ae.CANCELED?(a.current?.cancel(),i(ae.FINISHED)):E===ae.SENDING?(a.current?.continue(),i(ae.SENDING)):E===ae.FINISHED?i(ae.FINISHED):E===ae.FAILED?(a.current?.cancel(),l(),i(ae.SENDING),C()):E===ae.BACK_TO_HOME&&(r.replace(Hr),n(Nu()))},[]);return[s,A]};g();D();var ci=_(ee()),Wm=_(Ce());st();pe();g();D();var jm=_(tl()),VC=(t,e)=>{let r=window.URL||window.webkitURL||window,n=r.createObjectURL(t),o=document.createElement("a");o.href=n,o.download=e,o.click(),r.revokeObjectURL(n)},KC=(t=[],e="result.csv",r)=>{let n=jm.default.unparse(t,r),o="\uFEFF",a=new Blob([`${o}${n}`],{type:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"});VC(a,e)},zm=KC;ze();function ZC(t=[]){let[e]=le(),r=(0,ci.useMemo)(()=>{let s=[...ja];return e?.localType===he&&s.splice(2,0,za),s},[e?.localType]),n=(0,ci.useMemo)(()=>r.map(({key:s})=>s),[]),o=(0,Wm.useMemoizedFn)(s=>{let i=T("wallet_extension_multisender_colbody_success"),l=T("wallet_extension_multisender_colbody_fail");switch(s){case re.SUCCEED:return i;case re.FAILED:case re.DROPPED:return l;default:return"-"}});return()=>{let s=`${T("wallet_extension_multisender_colheader_history")}.csv`,i=t.map(f=>{let v={...f,txAmount:H.thousandFormat(f.txAmount??0),txStatus:o(f.txStatus),memo:f.memo||""};return Object.values(Bi(v,n))}),c={fields:r.map(f=>T(f.title)),data:i};zm(c,s)}}var Um=ZC;var XC={ERROR:re.FAILED,SUCCESS:re.SUCCEED},JC=()=>{let t=(0,ot.useRef)(),e=(0,ot.useRef)(),[r]=le(),[n=[],o]=Fe(),{dataSource:a,columns:s}=nm(),{isSm:i}=$e(),[l,c]=Rm(a),f=Um(a),v=om({sendStatus:l,sendAddress:a}),p=wa(),h=Ta(),m=(0,ot.useMemo)(()=>Pn(vi(n,({txStatus:C,txHash:A})=>A&&C===re.PENDING),"txHash"),[n]),u=async()=>{let{data:C}=await Jt(Xt.batchGetTxStatus,{txHashList:e.current});C&&Object.keys(C).forEach(A=>{let E=C[A];["SUCCESS","ERROR"].includes(E)&&o({txHash:A,txStatus:XC[E]})})};return(0,ot.useEffect)(()=>(t.current=setInterval(()=>{e.current?.length&&u()},2e3),()=>{clearInterval(t.current)}),[]),(0,ot.useEffect)(()=>{[Ae,De,ke,se,he].includes(r?.localType)&&(e.current=m)},[r?.localType,m]),(0,ot.useEffect)(()=>{(l===ae.FINISHED||l===ae.FAILED)&&Zi(h())},[l]),ot.default.createElement(_r,{footer:ot.default.createElement(Jd,{sendStatus:l,onSendStatusChange:c,onExport:f}),useOkg:!1,headerProps:{className:(0,Hm.default)(Ue.header,Ue.content)}},ot.default.createElement(y.Box,{className:Ue.root},ot.default.createElement(tm,{sendStatus:l}),ot.default.createElement(em,{sendStatus:l,sendResult:v}),ot.default.createElement(Fa,{className:Ue.statistics,statistics:p})),ot.default.createElement(y.Box,{className:Ue.address},ot.default.createElement(ya,{dataSource:a,columns:s,scroll:{x:i}})))},Gm=ot.default.memo(JC);var Sk=()=>{let[t]=le(),e=(0,Ua.useDispatch)(),r=yl(),n=(0,Ua.useSelector)(ct),o=ut(),a=nu(),s=t?.chainId;return(0,Ym.useAsyncEffect)(async()=>{if(o&&s){let i=await a(s);e(Pu(i))}},[s,o]),(0,Rr.useEffect)(()=>{if(![Ae,De,ke,se,he].includes(t?.localType)&&r?.length&&n?.level){let{gasLimit:i,tokenPrice:l,usdToThisRate:c}=n,f=r.find(({level:v})=>v===n?.level);if(f){let{gasPrice:v}=f,{networkFee:p,networkFeeInt:h,networkFeeMarket:m}=dr({gasPrice:v,gasLimit:i,price:l,usdToThisRate:c});e(Tt({...n,...f,networkFee:p,networkFeeInt:h,networkFeeMarket:m,unitPriceDisplay:Si(v)}))}}},[e,r,t?.localType]),Rr.default.createElement(un.Switch,null,Rr.default.createElement(un.Route,{path:Hr,component:Vd,exact:!0}),Rr.default.createElement(un.Route,{path:Un,component:Jf,exact:!0}),Rr.default.createElement(un.Route,{path:Hn,component:kd,exact:!0}),Rr.default.createElement(un.Route,{path:Gn,component:Gm,exact:!0}))};export{Sk as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=BatchTransfer-MALBUPSU.js.map
