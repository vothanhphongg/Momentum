import{a as He}from"./chunk-TBTQBUCG.js";import{a as We}from"./chunk-IT4NADLK.js";import"./chunk-LF7APX7V.js";import"./chunk-5DA5BVK3.js";import"./chunk-LIPTYF3E.js";import{a as Ge}from"./chunk-RYO62TNQ.js";import{c as Ze}from"./chunk-BFW6HCQ3.js";import{a as Je,b as K}from"./chunk-2BVAAJBI.js";import{a as Me}from"./chunk-JAJGR5PD.js";import{a as Ve}from"./chunk-CNXMURDK.js";import{a as Ke}from"./chunk-J2QAPBIL.js";import{a as ee}from"./chunk-BSH4EYRL.js";import{a as te,b as Fe}from"./chunk-ZE645RND.js";import{a as Ue}from"./chunk-UJHI4F6X.js";import"./chunk-7YEZFHTW.js";import"./chunk-FK5ARFJK.js";import"./chunk-OWWFH26C.js";import"./chunk-MNZIO3NP.js";import"./chunk-UUWJWUOY.js";import"./chunk-52XLG23J.js";import{a as oe}from"./chunk-3USSVI5T.js";import"./chunk-P4EMG7RN.js";import"./chunk-R6X7EOIE.js";import"./chunk-4EFZXPDV.js";import"./chunk-4KODREVA.js";import"./chunk-6UWGBJGT.js";import"./chunk-G4AVWXHJ.js";import"./chunk-76CRIMII.js";import"./chunk-F7VSWGDW.js";import"./chunk-MBHGLWZJ.js";import"./chunk-QZO7W5WD.js";import"./chunk-AKE54ZCC.js";import{h as $e,i as Pe}from"./chunk-A57OTXBP.js";import"./chunk-YJQGXXOQ.js";import"./chunk-HTLOGWI7.js";import"./chunk-6SEP5B7P.js";import"./chunk-FHKOH5E6.js";import"./chunk-NTQ2YVDA.js";import"./chunk-KKG4PJ6O.js";import"./chunk-7SRLIN7D.js";import"./chunk-AW5NL3JM.js";import"./chunk-RI2WZ5PA.js";import"./chunk-YIAOHVF5.js";import"./chunk-7HFBMBFB.js";import"./chunk-TJCPJQIM.js";import"./chunk-ZTAZ2272.js";import"./chunk-IRMYAC6R.js";import"./chunk-Q76QXAWY.js";import"./chunk-THSNJ5WU.js";import"./chunk-65AJJVJY.js";import"./chunk-PDC447BO.js";import{f as Be}from"./chunk-JCM7SRK2.js";import{a as X}from"./chunk-PTD7UCOR.js";import"./chunk-Q4YTGP2G.js";import"./chunk-ETJEH7T4.js";import{a as Oe,b as Z}from"./chunk-LLZAOPDB.js";import"./chunk-V3IFYKWM.js";import"./chunk-EWTTD4DL.js";import"./chunk-Y2TPPS4H.js";import"./chunk-ITY22AD4.js";import"./chunk-E2JYOUYE.js";import"./chunk-B3JSNQIV.js";import{ba as Q,f as F,ra as V,w as G}from"./chunk-YALUYHLV.js";import{d as Ee,e as De}from"./chunk-I3CPAVOC.js";import"./chunk-ARWSGU73.js";import"./chunk-CZ2ZBAZV.js";import{o as _t}from"./chunk-5QMHGZLF.js";import{C as Ne,Eb as be,Ga as Ae,Gb as xe,I as q,J as z,K as R,M as Ie,ec as ke}from"./chunk-HPWCPLRR.js";import"./chunk-TSTPZ3JM.js";import"./chunk-D2LKUI4F.js";import{a as ge}from"./chunk-ON6S2DB7.js";import"./chunk-SZD6WTBQ.js";import"./chunk-ASR4HLU7.js";import"./chunk-ANIUN6US.js";import"./chunk-3DZ7WRLL.js";import"./chunk-DEOJU4Z3.js";import"./chunk-PLIIQKFY.js";import{m as Le}from"./chunk-CWNIM6RS.js";import"./chunk-NNAD25BL.js";import{e as Y,k as fe}from"./chunk-XV444F26.js";import"./chunk-N2BCRNDB.js";import"./chunk-RTFE54S3.js";import"./chunk-GCQ4H2BA.js";import"./chunk-UVFOW4HH.js";import"./chunk-LNOPECCQ.js";import"./chunk-CB7FOZNP.js";import{c as we}from"./chunk-43VURGIT.js";import{P as _e,Rb as Ce,Uc as ve,Xc as Se,_c as dt,ha as ct,kc as Te,mb as W,rc as ue}from"./chunk-TM67VPZU.js";import"./chunk-VW6OQNWT.js";import{A as pe,E as j,o as J,y as H}from"./chunk-PUSMMCUD.js";import{R as U,z as a}from"./chunk-UWJLNJLY.js";import"./chunk-VRY2ADKE.js";import"./chunk-5U7FO2PW.js";import"./chunk-PDUOSATP.js";import"./chunk-XDY6V34Y.js";import"./chunk-YJFNO57I.js";import"./chunk-DZ6CTC22.js";import{W as ye,c as at,ea as he}from"./chunk-JT3LNHPY.js";import"./chunk-47UWF72W.js";import{b as $}from"./chunk-JWYCKY2V.js";import"./chunk-G2266BV2.js";import"./chunk-L4PAIYPH.js";import"./chunk-UT7LJPKF.js";import"./chunk-AFZ6A2B3.js";import"./chunk-VVPY7ZA7.js";import"./chunk-KUW5VATV.js";import"./chunk-BNAVWOJ2.js";import"./chunk-IG2Q5ALZ.js";import"./chunk-WOMUNWBT.js";import"./chunk-F6PXOVYL.js";import"./chunk-324EPGNQ.js";import"./chunk-5GFHI4AK.js";import"./chunk-QYVQBXDG.js";import"./chunk-7D4PUIEN.js";import"./chunk-IWVM7XL6.js";import"./chunk-7QO4TZYQ.js";import"./chunk-FF4LY6PE.js";import"./chunk-76KCDJDG.js";import"./chunk-YDUDQP2P.js";import"./chunk-PGPFV4JQ.js";import"./chunk-MIBHDVGP.js";import"./chunk-7VFUX7IX.js";import"./chunk-XLF4LAH2.js";import"./chunk-ONKZ57T6.js";import"./chunk-ZC7Q7LCH.js";import{f as E,o as r,q as s}from"./chunk-6KXF36WM.js";r();s();var st=E($());r();s();var C=E($()),Ye=E(ge());U();ct();r();s();function pt(){let t=He(),c=We(),i=Ue();return async o=>{let m=await t(o),d=await c({coinId:o.coinId}),y=await i({coinId:o.coinId});return!m||!d||!y?Promise.reject():Promise.resolve()}}var ie=pt;r();s();var h=E($());U();r();s();var je=E(ge());var ut=(t,c)=>{let i=(0,je.useHistory)(),{address:o}=Me();return m=>{let d={from:t[m.addressType]};o&&(d.address=o);let y=Z(d),N=Z({coinId:m.coinId,addressType:m.addressType}),u=c==="send"?`${F}/${m.coinId}${V}${y}`:`${G}${N}`;i.push(u)}},re=ut;r();s();var qe=E(ke());U();dt();var ft=(t,c)=>{let i=(0,qe.useSelector)(xe);return o=>{let m=Se?.[c]?.[o.addressType],d=Ne(t[m]),y=a(ve[m]),N=De(o.coinAmount),u=Ee(o.currencyAmount,{useApproximate:!1,symbol:i.symbol});return{addressDisplay:d,addressTypeDisplay:y,amountDisplay:N,currencyAmountDisplay:u}}},se=ft;r();s();var D={container:"_container_onsr7_1",body:"_body_onsr7_6",item:"_item_onsr7_9","item-left":"_item-left_onsr7_20",itemLeft:"_item-left_onsr7_20","item-right":"_item-right_onsr7_23",itemRight:"_item-right_onsr7_23","item-right-top":"_item-right-top_onsr7_26",itemRightTop:"_item-right-top_onsr7_26","item-right-bottom":"_item-right-bottom_onsr7_31",itemRightBottom:"_item-right-bottom_onsr7_31","item-icon":"_item-icon_onsr7_36",itemIcon:"_item-icon_onsr7_36","item-address":"_item-address_onsr7_40",itemAddress:"_item-address_onsr7_40","item-address-type":"_item-address-type_onsr7_47",itemAddressType:"_item-address-type_onsr7_47","item-currency-amount":"_item-currency-amount_onsr7_59",itemCurrencyAmount:"_item-currency-amount_onsr7_59","item-amount":"_item-amount_onsr7_70",itemAmount:"_item-amount_onsr7_70"};var gt=({visible:t,onClose:c,coin:i,type:o})=>{let m=Pe(i?.localType),d=ee(i),y=o==="send"?d.filter(T=>T.coinAmount>0):d,N=se(m,i?.localType),u=re(m,o);return h.default.createElement("div",null,h.default.createElement(J.Action,{isFull:!0,noTopRadius:!0,alignBottom:!0,hideCloseBtn:!0,animateDisable:!0,noContentPadding:!0,onClose:c,visible:t},h.default.createElement("div",{className:D.container},h.default.createElement(X,{className:"setting-nav",title:a("extension_defi_top_header_title_select_address_type"),onBack:c,closeable:!1}),h.default.createElement("div",{className:D.body},h.default.createElement("div",{className:D.list},y.map(T=>{let{addressDisplay:v,addressTypeDisplay:I,amountDisplay:A,currencyAmountDisplay:S}=N(T);return h.default.createElement("div",{className:D.item,onClick:()=>{u(T)}},h.default.createElement("div",{className:D.itemLeft},h.default.createElement(j,{width:32,height:32,alt:I,src:T.image,errorImg:Y,className:D.itemIcon})),h.default.createElement("div",{className:D.itemRight},h.default.createElement("div",{className:D.itemRightBottom},h.default.createElement("div",{className:D.itemAddressType},I),h.default.createElement("div",{className:D.itemAmount},A)),h.default.createElement("div",{className:D.itemRightTop},h.default.createElement("div",{className:D.itemAddress},v),h.default.createElement("div",{className:D.itemCurrencyAmount},S))))}))))))},ne=gt;r();s();var n=E($()),Re=E(at());U();ue();r();s();var g={container:"_container_dxmc1_1","setting-nav":"_setting-nav_dxmc1_6",settingNav:"_setting-nav_dxmc1_6",body:"_body_dxmc1_9",item:"_item_dxmc1_12","item-left":"_item-left_dxmc1_23",itemLeft:"_item-left_dxmc1_23","item-right":"_item-right_dxmc1_26",itemRight:"_item-right_dxmc1_26","item-right-top":"_item-right-top_dxmc1_29",itemRightTop:"_item-right-top_dxmc1_29","item-right-bottom":"_item-right-bottom_dxmc1_34",itemRightBottom:"_item-right-bottom_dxmc1_34","item-icon":"_item-icon_dxmc1_39",itemIcon:"_item-icon_dxmc1_39","item-address":"_item-address_dxmc1_43",itemAddress:"_item-address_dxmc1_43","item-address-type":"_item-address-type_dxmc1_50",itemAddressType:"_item-address-type_dxmc1_50","item-currency-amount":"_item-currency-amount_dxmc1_62",itemCurrencyAmount:"_item-currency-amount_dxmc1_62","item-amount":"_item-amount_dxmc1_73",itemAmount:"_item-amount_dxmc1_73",infoIcon:"_infoIcon_dxmc1_84",title:"_title_dxmc1_89",tip:"_tip_dxmc1_97",subTitle:"_subTitle_dxmc1_98"};var ze="SelectBTCAddress_has_opened_tip_on_dlg",yt=({visible:t,onClose:c,coin:i,type:o})=>{let m=localStorage.getItem(ze),d=$e(W),[y,N]=(0,n.useState)(!m),u=ee(i),T=o==="send"?u.filter(_=>_.coinAmount>0):u,v=se(d,W),I=re(d,o),A=()=>{N(!1),localStorage.setItem(ze,!0)},S=()=>o==="send"?a("extension_defi_top_tooltips_only_usage_utxo_value_icu",{chainName:i?.chainName}):a("extension_defi_top_tooltips_only_usage_utxo_icu",{chainName:i?.chainName}),L=n.default.createElement(n.default.Fragment,null,a("extension_defi_top_header_title_select_address_type"),n.default.createElement(pe,{width:310,placement:pe.DIRECTION.bottomRight,title:S()},n.default.createElement(ye,{"data-testid":"top-header-info-icon",className:(0,Re.default)("okds-information-circle",g.infoIcon)})));return n.default.createElement(n.default.Fragment,null,n.default.createElement(J.Action,{isFull:!0,title:L,onClose:c,visible:t,noContentPadding:!0},n.default.createElement("div",{className:g.container},n.default.createElement("div",{className:g.body},n.default.createElement("div",{className:g.list},T.map(_=>{let{addressDisplay:e,addressTypeDisplay:f,amountDisplay:l,currencyAmountDisplay:b}=v(_);return n.default.createElement("div",{"data-testid":"select-btc-address-item",className:g.item,onClick:()=>{I(_)}},n.default.createElement("div",{className:g.itemLeft},n.default.createElement(j,{width:32,height:32,alt:f,src:_.image,errorImg:Y,className:g.itemIcon})),n.default.createElement("div",{className:g.itemRight},n.default.createElement("div",{className:g.itemRightBottom},n.default.createElement("div",{className:g.itemAddressType},f),n.default.createElement("div",{className:g.itemAmount},l)),n.default.createElement("div",{className:g.itemRightTop},n.default.createElement("div",{className:g.itemAddress},e),n.default.createElement("div",{className:g.itemCurrencyAmount},b))))}))))),n.default.createElement(J.Confirmation,{visible:t&&y,confirmText:a("wallet_extension_btn_general_gotit"),onConfirm:A,onClose:A,confirmBtnProps:{size:he.SIZE.lg}},n.default.createElement("div",{className:g.container},n.default.createElement("div",{className:g.title},a("extension_defi_popup_title_btc_address_type_icu",{chainName:i?.chainName})),n.default.createElement("div",{className:g.tip},a("extension_defi_popup_desc_btc_address_type_icu",{chainName:i?.chainName})))))},me=yt;r();s();var M=E($());U();function ht({list:t,pageType:c,isVirtualList:i,onSearch:o,renderEmpty:m,getItemProps:d,loading:y,loadingMore:N,...u},T){let{currentNetworkUniqueId:v}=oe(),I=(0,M.useMemo)(()=>{let S=t.map(_=>({..._,symbolName:_.symbol}));return Le(S,v,c==="send")},[v,t]),A=S=>{let L,{baseCoinId:_,childrenCoin:e,tokenType:f,aggregation:l}=S;if(c==="send"){let B=(e||[]).filter(x=>x.currencyAmount>0);l&&B.length>1?L=a("wallet_manage_crypto_labels_crypto_multichain"):L=_===0?"":f}else L=l?a("wallet_manage_crypto_labels_crypto_multichain"):f;let b=d?d(S):{};return{name:S.name,tag:L,...b}};return M.default.createElement(Je,{headerProps:{closeable:!1,title:a("wallet_transfer_send_select_coin_maintitle_select_coin")},...u,searchPlaceholder:a("wallet_transfer_send_select_coin_placeholder_input_name"),list:I,onSearch:o,getItemProps:A,renderEmpty:m,isVirtualList:i,loadingMore:N,loading:y,ref:T})}var le=(0,M.forwardRef)(ht);r();s();var ce={empty:"_empty_68vmq_1",emptyResult:"_emptyResult_68vmq_5"};function Ct(){let t=(0,Ye.useHistory)(),c=K(),{address:i,coinIds:o}=Oe(t&&t.location.search.slice(1)),m=te(),d=(0,C.useMemo)(()=>(m||[]).filter(e=>{let f=l=>{if(o){let b=o.split(",").map(B=>Number(B));return b.includes(l.coinId)||b.includes(l.baseCoinId)}return!0};return _e(e.coinAmount,0)&&f(e)}),[m,o]),y=ie(),[N,u]=(0,C.useState)(!1),[T,v]=(0,C.useState)(!1),[I,A]=(0,C.useState)(null),S=e=>{let f=e.childrenCoin.filter(l=>l.coinId===e.coinId&&_e(l.coinAmount,0));if(f.length===1){let l=f[0].userAddress;if(l){let b=`?from=${l}`;i&&(b+=`&address=${i}`),t.push({pathname:`${F}/${e.coinId}${V}`,search:b})}}return null},L=async e=>{if(q(e)){S(e),A(e),u(!0);return}if(z(e)||R(e)){S(e),A(e),v(!0);return}await y(e);let f,l,B=(e.childrenCoin||[]).filter(x=>x.currencyAmount>0);B.length>1&&e.aggregation?(f=Q,l=`coinKey=${encodeURIComponent(e.key)}&aggregationSymbol=${e.symbol}&type=${c}`):B.length===1&&e.aggregation?f=`${F}/${B[0].coinId}${V}`:f=`${F}/${e.coinId}${V}`,i&&(l?l+=`&address=${i}`:l=`address=${i}`),t.push({pathname:f,search:l})};return d.length===0?C.default.createElement(we.Container,null,C.default.createElement(X,{closeable:!1,title:a("wallet_transfer_send_select_coin_maintitle_select_coin")}),C.default.createElement(H.State,{className:ce.empty,title:a("wallet_transfer_maintitle_not_any_token")})):C.default.createElement(C.default.Fragment,null,C.default.createElement(le,{list:d,renderEmpty:e=>C.default.createElement(H.State,{className:ce.emptyResult,title:a("wallet_extension_send_toast_unfoundcrypto",{crypto:C.default.createElement("span",{className:ce.emptyText},e)})}),onClick:L,pageType:"send",isVirtualList:!1}),C.default.createElement(me,{visible:N,onClose:()=>{u(!1)},coin:I,type:"send"}),C.default.createElement(ne,{visible:T,onClose:()=>{v(!1)},coin:I,type:"send"}))}var Qe=Ct;r();s();var w=E($()),ot=E(ke()),it=E(ge());U();r();s();var Xe=E($()),P=E(_t());ue();function et(){let[t,c]=(0,Xe.useState)(""),i=!!t,o=te(),m=Fe(),d=(0,P.useCreation)(()=>Array.from(new Set(Ge(i?m:o).map(_=>_.coinId))),[o,m,i]),y=Ve(),N=(0,P.useMemoizedFn)(_=>{c(_)}),u=(0,P.useDebounce)(t,{wait:500}),T=Ke(),{data:v,loading:I,loadingMore:A,listRef:S}=Ze({aggregation:!0,symbolLike:u,chainIds:T!==""?[Number(T)]:void 0,excludeCoinIds:d},{reloadDeps:[u],enable:!y});return{list:(0,P.useCreation)(()=>{let _=v?.list??[];return[...t?m.filter(l=>l.symbol?.toLowerCase().includes(t.toLowerCase())):o,..._].filter(({coinId:l,baseCoinId:b})=>!Te(l,b))},[o,m,v?.list]),listRef:S,search:t,onSearch:N,loading:I,loadingMore:A,isSearching:I&&!!t}}ue();r();s();var tt={empty:"_empty_1umri_1"};function Tt(){let t=(0,it.useHistory)(),{keyringIdentityType:c}=(0,ot.useSelector)(be),{currentNetworkUniqueId:i}=oe(),o=K(),m=ie(),{list:d,listRef:y,onSearch:N,loading:u,loadingMore:T,isSearching:v}=et(),[I,A]=(0,w.useState)(!1),[S,L]=(0,w.useState)(!1),[_,e]=(0,w.useState)(null),f=x=>{if(x?.childrenCoin?.length===1){let{addressType:O}=x.childrenCoin[0]||{},p=Z({coinId:x.coinId,addressType:O});t.push(`${G}${p}`)}},l=async x=>{let O=Ie(x),p;if(O){if(p=await Ae(x),i!==""&&p?.aggregation&&(p=p.childrenCoin?.find(lt=>lt.chainId===Number(i))??null),!p)return}else p=x;if(q(p)){e(p),A(!0);return}if(z(p)||R(p)){f(p),e(p),L(!0);return}await m(p);let ae,de,nt=p.aggregation,mt=p.childrenCoin??[];nt&&mt.length>0?(ae=Q,de=`coinKey=${encodeURIComponent(p.key)}&aggregationSymbol=${p.symbol}&type=${o}`):(ae=G,de=`coinId=${p.coinId}`),t.push({pathname:ae,search:de})},b=(0,w.useCallback)(x=>{let O={};return x.localType===W&&x.coinId===Ce&&Be(c)&&(O.tag=a("extension_wallet_footer_alert_asset_notsupported")),O},[c]);return w.default.createElement(w.default.Fragment,null,w.default.createElement(le,{list:v?[]:d,onClick:l,getItemProps:b,isVirtualList:!1,onSearch:N,ref:y,renderEmpty:()=>w.default.createElement(H.State,{className:tt.empty,title:a("commonall_emptystate_text_no_results")}),loadingMore:T||u&&!v,loading:v}),w.default.createElement(me,{visible:I,onClose:()=>{A(!1)},coin:_,type:"receive"}),w.default.createElement(ne,{visible:S,onClose:()=>{L(!1)},coin:_,type:"receive"}))}var rt=Tt;var vt={[fe.SEND]:Qe,[fe.RECEIVE]:rt};function St(){let t=K(),c=vt[t];return c?st.default.createElement(c,null):null}var Hi=St;export{Hi as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=select-coin-FSZ3XVQN.js.map
