import{a as he}from"./chunk-2A3PLDGY.js";import{a as M,b as Te,d as z}from"./chunk-YJKY4O7B.js";import{a as V}from"./chunk-NXKVTZI4.js";import{a as $}from"./chunk-A7OOQ3UI.js";import"./chunk-VIG2JFWH.js";import"./chunk-J2QAPBIL.js";import{a as te}from"./chunk-DHW2TR6Z.js";import"./chunk-BRMEQH2Q.js";import"./chunk-HQA3BGLM.js";import{a as Le}from"./chunk-Q57GWOMY.js";import{b as de}from"./chunk-52GK4CEU.js";import"./chunk-BVDJNUOM.js";import"./chunk-4EFZXPDV.js";import"./chunk-4KODREVA.js";import"./chunk-XIYLMV6I.js";import{z as we}from"./chunk-YJQGXXOQ.js";import"./chunk-HTLOGWI7.js";import"./chunk-6SEP5B7P.js";import"./chunk-FHKOH5E6.js";import"./chunk-NTQ2YVDA.js";import"./chunk-KKG4PJ6O.js";import"./chunk-YIAOHVF5.js";import"./chunk-ZTAZ2272.js";import{g as Ne,v as xe,w as Ee,x as De}from"./chunk-IRMYAC6R.js";import"./chunk-Q76QXAWY.js";import"./chunk-THSNJ5WU.js";import{d as H}from"./chunk-PDC447BO.js";import{f as fe}from"./chunk-JCM7SRK2.js";import"./chunk-U4JANCGD.js";import{a as Ae}from"./chunk-PTD7UCOR.js";import{b as h}from"./chunk-ETJEH7T4.js";import"./chunk-LLZAOPDB.js";import{a as ge}from"./chunk-V3IFYKWM.js";import{a as q}from"./chunk-EWTTD4DL.js";import{d as Y}from"./chunk-Y2TPPS4H.js";import"./chunk-ITY22AD4.js";import"./chunk-E2JYOUYE.js";import"./chunk-B3JSNQIV.js";import{fa as pe,ha as ce,ia as ue}from"./chunk-YALUYHLV.js";import{q as U}from"./chunk-I3CPAVOC.js";import"./chunk-ARWSGU73.js";import"./chunk-CZ2ZBAZV.js";import"./chunk-5QMHGZLF.js";import{ec as _e}from"./chunk-HPWCPLRR.js";import"./chunk-TSTPZ3JM.js";import{a as P}from"./chunk-D2LKUI4F.js";import{a as Fe}from"./chunk-ON6S2DB7.js";import"./chunk-SZD6WTBQ.js";import"./chunk-ASR4HLU7.js";import"./chunk-ANIUN6US.js";import"./chunk-3DZ7WRLL.js";import"./chunk-DEOJU4Z3.js";import"./chunk-PLIIQKFY.js";import"./chunk-2HSCH6R3.js";import"./chunk-CWNIM6RS.js";import"./chunk-NNAD25BL.js";import"./chunk-XV444F26.js";import"./chunk-N2BCRNDB.js";import"./chunk-RTFE54S3.js";import"./chunk-GCQ4H2BA.js";import"./chunk-UVFOW4HH.js";import"./chunk-LNOPECCQ.js";import"./chunk-CB7FOZNP.js";import{c as r}from"./chunk-43VURGIT.js";import{ad as A,rd as me}from"./chunk-TM67VPZU.js";import"./chunk-VW6OQNWT.js";import{H as F,u as K}from"./chunk-PUSMMCUD.js";import{R as oe,z as B}from"./chunk-UWJLNJLY.js";import"./chunk-VRY2ADKE.js";import"./chunk-5U7FO2PW.js";import"./chunk-PDUOSATP.js";import{I as ie,f as ne,o as se,ra as ee}from"./chunk-XDY6V34Y.js";import"./chunk-YJFNO57I.js";import"./chunk-DZ6CTC22.js";import{c as re,ea as v}from"./chunk-JT3LNHPY.js";import"./chunk-47UWF72W.js";import{b as k}from"./chunk-JWYCKY2V.js";import"./chunk-G2266BV2.js";import"./chunk-L4PAIYPH.js";import"./chunk-UT7LJPKF.js";import"./chunk-AFZ6A2B3.js";import"./chunk-VVPY7ZA7.js";import"./chunk-KUW5VATV.js";import"./chunk-BNAVWOJ2.js";import"./chunk-IG2Q5ALZ.js";import"./chunk-WOMUNWBT.js";import"./chunk-QYVQBXDG.js";import"./chunk-7D4PUIEN.js";import"./chunk-7QO4TZYQ.js";import"./chunk-FF4LY6PE.js";import"./chunk-76KCDJDG.js";import"./chunk-YDUDQP2P.js";import"./chunk-PGPFV4JQ.js";import"./chunk-MIBHDVGP.js";import"./chunk-7VFUX7IX.js";import"./chunk-XLF4LAH2.js";import"./chunk-ONKZ57T6.js";import"./chunk-ZC7Q7LCH.js";import{f as E,o as l,q as n}from"./chunk-6KXF36WM.js";l();n();var x=E(k()),be=E(Fe());ee();oe();l();n();var ae=E(k());oe();var Ge=({isLoading:o,onDone:s})=>ae.default.createElement(ge.FooterActions,{placeholder:!0},ae.default.createElement(v,{onClick:s,category:v.CATEGORY.fill,type:v.TYPE.primary,size:v.SIZE.lg,block:!0,disabled:o},B("wallet_manage_btn_edit_done"))),ye=Ge;l();n();var t=E(k()),Be=E(_e()),Q=E(re());me();l();n();var Z=E(k()),Ce=E(re());l();n();var S={handler:"_handler_18xte_1",disabled:"_disabled_18xte_4",keyring:"_keyring_18xte_7",wallet:"_wallet_18xte_11",icon:"_icon_18xte_16",noHandler:"_noHandler_18xte_23"};var Ke=({type:o,canDrag:s,listeners:m,disabled:D,getHandlerRef:f})=>s?Z.default.createElement(r.Box,{ref:f,...m,className:(0,Ce.default)(S.handler,S[o],{[S.disabled]:D})},Z.default.createElement(h.IconButton,{className:S.icon,icon:"okx-wallet-plugin-hamburger","data-testid":q.WALLET_MANAGEMENT_PAGE.DRAG_AREA_ICON})):Z.default.createElement(r.Box,{ref:f,...m,className:S.noHandler}),j=Ke;l();n();var i=E(k()),J=E(_e()),le=E(re());ee();me();l();n();var N={item:"_item_1v8of_1",dragging:"_dragging_1v8of_9",children:"_children_1v8of_13",wrapper:"_wrapper_1v8of_16",wallet:"_wallet_1v8of_20",canDrag:"_canDrag_1v8of_23",delete:"_delete_1v8of_26",avatar:"_avatar_1v8of_34",name:"_name_1v8of_38",draw:"_draw_1v8of_44",text:"_text_1v8of_47",drawIcon:"_drawIcon_1v8of_61",more:"_more_1v8of_64"};var He=({keyringIdentity:o,editIdentityName:s,onDragWalletStart:m,onDragWalletEnd:D,editKeyringIdentities:f})=>{let u=o?.walletIdentities||[],g=(0,J.useDispatch)(),{isRpcMode:p}=(0,J.useSelector)(H),c=$(),[d]=Y(),C=(0,i.useCallback)(()=>{m(o.keyringId)},[m,o]),L=(0,i.useCallback)(a=>{let w=se(f),W=w.find(({keyringId:b})=>b===o.keyringId);W.walletIdentities=a,D(w)},[f,o,D]),y=z(),I=u.length>1;return i.default.createElement(K.Sortable,{uniqueKey:"walletId",itemClassName:N.item,onDragStart:C,itemChildrenClassName:N.children,itemDraggingClassName:N.dragging,itemWrapperClassName:N.wrapper,onDragEnd:L,dataSource:u,withOverlay:!1,renderHandler:({getHandlerRef:a,listeners:w})=>i.default.createElement(j,{type:"wallet",canDrag:I,listeners:w,getHandlerRef:a})},u.map(a=>i.default.createElement(r.FlexBox,{align:r.ALIGN.center,className:(0,le.default)(N.wallet,{[N.canDrag]:I}),key:a.walletId},i.default.createElement(r.Box,{className:N.delete},i.default.createElement(h,{className:"okx-wallet-plugin-delete",onClick:()=>{if([A.MNEMONIC,A.HARDWARE].includes(o.keyringIdentityType)&&u.length>1){g(de({type:"REMOVE_ACCOUNT",accountId:a.walletId,keyringType:o.keyringIdentityType}));return}y({groupId:a.groupId,keyringType:o.keyringIdentityType,keyringId:o.keyringId})}})),i.default.createElement(te,{size:te.SIZE.sm,className:N.avatar,walletIdentity:a}),i.default.createElement(r.FlexBox,{align:r.ALIGN.center,direction:r.DIRECTION.vertical,className:N.name,onClick:()=>{s({type:M.WALLETACCOUNT,identity:a,initialName:a.walletName,otherNames:u.map(({walletName:w,walletId:W})=>a.keyringId===W?"":w).filter(Boolean)})}},i.default.createElement(r.FlexBox,{align:r.ALIGN.center,style:{width:"100%"}},i.default.createElement(U.Text,{ellipsis:!0,className:N.text},a.walletName),i.default.createElement(Le,{status7702:a?.status7702?.status}),i.default.createElement(r.Box,{className:N.draw},i.default.createElement(h,{className:(0,le.default)("okx-wallet-plugin-draw",N.drawIcon)}))),i.default.createElement(V,{isRpcMode:p,currentRpcNetwork:c,hiddenAssets:d,walletAsset:a?.walletAsset,unsopportCurrentNetwork:a?.unsupported})),i.default.createElement(P,{className:N.more,to:`${ue}?walletId=${a?.walletId}`},i.default.createElement(h.IconButton,{icon:"okx-wallet-plugin-more"})))))},Ie=He;l();n();var We=E(k()),ke=()=>{(0,We.useLayoutEffect)(()=>{let o=document.querySelector('[data-selected="true"]');setTimeout(()=>{o.scrollIntoView({behavior:"auto",block:"center"})},100)},[])};l();n();var _={item:"_item_1os1d_1",children:"_children_1os1d_8",dragging:"_dragging_1os1d_11",wrap:"_wrap_1os1d_15",disabled:"_disabled_1os1d_22",showBottomLine:"_showBottomLine_1os1d_25",keyring:"_keyring_1os1d_35",canDrag:"_canDrag_1os1d_38",delete:"_delete_1os1d_41",name:"_name_1os1d_49",canEdit:"_canEdit_1os1d_53",draw:"_draw_1os1d_56",text:"_text_1os1d_59",more:"_more_1os1d_74"};var Pe=({editIdentityName:o,editKeyringIdentities:s,setEditKeyringIdentities:m})=>{let D=Ne(),{isRpcMode:f}=(0,Be.useSelector)(H),u=$(),[g]=Y(),p=z(),c=(0,t.useCallback)(({keyringIdentityType:e})=>e===A.MNEMONIC||e===A.MPC||e===A.TON_MNEMONIC,[]),d=(0,t.useCallback)(({keyringIdentityType:e})=>e===A.MNEMONIC||fe(e)||e===A.MPC||e===A.TON_MNEMONIC,[]),[C,L]=(0,t.useState)(""),y=(0,t.useCallback)(({id:e})=>{L(e)},[]),I=(0,t.useCallback)(e=>{L(""),m(e)},[m]),[a,w]=(0,t.useState)(""),W=(0,t.useCallback)(e=>{w(e)},[]),b=(0,t.useCallback)(e=>{w(""),m(e)},[m]),G=s.length>1;return ke(),t.default.createElement(K.Sortable,{uniqueKey:"keyringId",itemClassName:_.item,itemChildrenClassName:_.children,itemDraggingClassName:_.dragging,onDragStart:y,onDragEnd:I,dataSource:s,withOverlay:!1,renderHandler:({getHandlerRef:e,listeners:R})=>t.default.createElement(j,{type:"keyring",canDrag:G,listeners:R,disabled:a,getHandlerRef:e})},s.map((e,R)=>t.default.createElement(r.Box,{className:(0,Q.default)(_.wrap,{[_.disabled]:a&&a!==e.keyringId,[_.showBottomLine]:R!==s.length-1}),"data-selected":e.walletIdentities.some(O=>O.walletId===D),key:e.keyringId},t.default.createElement(r.FlexBox,{align:r.ALIGN.center,className:(0,Q.default)(_.keyring,{[_.canDrag]:G})},c(e)?t.default.createElement(r.Box,{className:_.delete},t.default.createElement(h,{icon:"okx-wallet-plugin-delete",onClick:()=>{let O=e?.walletIdentities?.[0].groupId;!O||p({groupId:O,keyringType:e.keyringIdentityType,keyringId:e.keyringId})}})):null,t.default.createElement(r.FlexBox,{align:r.ALIGN.center,direction:r.DIRECTION.vertical,className:(0,Q.default)(_.name,{[_.canEdit]:d(e)}),onClick:()=>{d(e)&&o({type:M.WALLET,identity:e,initialName:e.keyringName,otherNames:s.map(({keyringName:O,keyringId:ve})=>e.keyringId===ve?"":O).filter(Boolean)})}},t.default.createElement(r.FlexBox,{align:r.ALIGN.center,style:{width:"100%"}},t.default.createElement(U.Text,{ellipsis:!0,className:_.text,"data-testid":q.WALLET_MANAGEMENT_PAGE.WALLET_ACCOUNT_NAME},e.keyringName),d(e)?t.default.createElement(r.Box,{className:_.draw},t.default.createElement(h,{icon:"okx-wallet-plugin-draw"})):null),t.default.createElement(V,{isRpcMode:f,currentRpcNetwork:u,hiddenAssets:g,walletAsset:e?.walletAsset})),[A.PRIVATE_KEY].includes(e.keyringIdentityType)?null:t.default.createElement(P,{className:_.more,to:`${ce}?keyringId=${e?.keyringId}`},t.default.createElement(h.IconButton,{icon:"okx-wallet-plugin-more"}))),C===e.keyringId?null:t.default.createElement(Ie,{keyringIdentity:e,editIdentityName:o,onDragWalletStart:W,onDragWalletEnd:b,editKeyringIdentities:s}))))},Me=Pe;l();n();var X=E(k());ee();oe();var Ue=o=>{let s=Te(),m=xe(),D=Ee(),f=(0,X.useMemo)(()=>({async[M.WALLET](u,g){let p=u?.keyringId;if(p)try{await m(p,g),o(c=>c.map(d=>d.keyringId===p?{...d,keyringName:g}:d)),F.success(B("wallet_edit_wallet_toast_renamed_success"))}catch(c){console.log(c)}},async[M.WALLETACCOUNT](u,g){let p=u?.walletId;if(p)try{await D(p,g),o(c=>c.map(d=>{let C=d?.walletIdentities??[];return{...d,walletIdentities:C.map(L=>L.walletId===p?{...L,walletName:g}:L)}})),F.success(B("wallet_edit_wallet_toast_renamed_success"))}catch(c){console.log(c)}}}),[D,m,o]);return(0,X.useCallback)(({identity:u,...g})=>{s(g).then(p=>{let{type:c}=g,d=f[c];d&&d(u,p)}).catch(ne)},[f,s])},Oe=Ue;l();n();var Se={root:"_root_nqk5m_1",headerDone:"_headerDone_nqk5m_1"};var qe=()=>{let[,o]=we(null),[s,m]=(0,x.useState)(o),D=Oe(m),[f,u]=(0,x.useState)(!1),g=y=>{m(y),u(!0)},p=(0,be.useHistory)(),c=De(),[d,C]=(0,x.useState)(!1),L=(0,x.useCallback)(async()=>{if(f){C(!0);try{let y={},I={};s.forEach(({keyringId:a,walletIdentities:w},W)=>{y[a]=W,w.forEach(({walletId:b},G)=>{I[b]=G})}),await c(y,I)}catch{F.error({title:B("extension_wallet_toast_sorting_failure")})}}p.push(`${pe}?from=seedVerify`)},[p,c,s,f]);return(0,x.useEffect)(()=>{!ie(o,s)&&!f&&m(o)},[o,s]),x.default.createElement(r.Container,{className:Se.root},x.default.createElement(Ae,{backable:{icon:"okds-close"},bordered:!1,closeable:!1}),x.default.createElement(Me,{editIdentityName:D,editKeyringIdentities:s,setEditKeyringIdentities:g}),x.default.createElement(ye,{isLoading:d,onDone:L}),x.default.createElement(he,null))},Yr=qe;export{Yr as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=WalletEdit-YLGQFTKL.js.map
