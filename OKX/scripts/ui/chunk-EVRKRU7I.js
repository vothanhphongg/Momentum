import{a as si}from"./chunk-KQDMYE3F.js";import{a as ii}from"./chunk-PWLZXA4M.js";import{a as ri}from"./chunk-BLGJS4OD.js";import{a as W}from"./chunk-IGYAABP7.js";import{a as ti}from"./chunk-TOV4UWR3.js";import{a as ai}from"./chunk-MDL52WR7.js";import{a as Jt,d as Xt}from"./chunk-TISF4HQJ.js";import{j as $e}from"./chunk-2LCPVMSO.js";import{l as Qt,x as ei}from"./chunk-3XTUMVWB.js";import{g as ut,j as lt}from"./chunk-MNZIO3NP.js";import{c as ft}from"./chunk-TSTKPLAO.js";import{a as jt,b as qt}from"./chunk-V7MKKAGW.js";import{a as mt}from"./chunk-DZLXEJHX.js";import{e as ct}from"./chunk-I3CPAVOC.js";import{o as Yt}from"./chunk-5QMHGZLF.js";import{F as Kt,X as Zt}from"./chunk-HPWCPLRR.js";import{b as Ge}from"./chunk-2HSCH6R3.js";import{aa as e,da as ot,fa as nt,ha as ue}from"./chunk-N2BCRNDB.js";import{$ as Ve,I as x,K as _,L as re,M as Q,N as q,O as He,P as M,Q as zt,R as me,T as Ue,U,W as Me,X as st,a as Bt,aa as Rt,b as Zi,ha as rt}from"./chunk-TM67VPZU.js";import{d as at,q as B}from"./chunk-PUSMMCUD.js";import{R as ji,o as j,z as g}from"./chunk-UWJLNJLY.js";import{H as Ut,L as Vt,f as Ht,ra as Yi}from"./chunk-XDY6V34Y.js";import{b as $t}from"./chunk-JWYCKY2V.js";import{f as Be,o as ie,q as se}from"./chunk-6KXF36WM.js";ie();se();var t=Be($t()),fi=Be(Yt());Yi();ji();rt();ie();se();var $=Be($t()),ni=Be(Yt());Zi();rt();var ci=()=>s=>Rt(s,0),mi=({gasPrice:i,gasLimit:s,extFee:r,baseCoin:a={},currencyId:o})=>{let l=_(x(i,s),r),c=st(l),p=ct(c,{symbol:a?.symbol}),n=lt(a?.coinId,l,{currencyId:o,useApproximate:!0});return{gasFeeDisplay:`${p}${n}`,gasFee:c}},ze=({gasPrice:i,gasLimit:s,maxPriorityFeePerGas:r,maxFeePerGas:a,supportEip1559:o,extFee:l,gasPriceInfo:c,gasLimitInfo:p,gasType:n,baseCoin:f={},currencyId:C})=>{let{minGasFee:T,minGasPrice:y}=Qt({gasLimit:s,gasPrice:i,maxPriorityFeePerGas:r,maxFeePerGas:a,supportEip1559:o,extFee:l,gasPriceInfo:c,gasLimitInfo:p,gasType:n}),G=st(T),P=ct(G,{symbol:f?.symbol}),u=lt(f?.coinId,T,{currencyId:C,useApproximate:!0});return{minGasPrice:y,minGasFee:G,minGasFeeDisplay:`${P}${u}`}},oi=(i={},s={wait:200,disabled:!1,fetchOnce:!1})=>{let{wait:r,disabled:a,fetchOnce:o,signInfo:l={}}=s,{coinId:c,supportEip1559:p,tx:n,needExtFee:f=!1}=i,[C,T]=(0,$.useState)(null),[y,G]=(0,$.useState)({data:"",loading:!1,error:""});(0,$.useEffect)(()=>{!f||a||G(u=>({...u,loading:!0,error:""}))},[n,f,a]);let P=()=>{try{if(!c){let u=l;Bt.captureEvent({message:`coinId is ${c}`,contexts:{report:{info:JSON.stringify({href:window&&window.location&&window.location.href,rawData:u})}},exception:{values:[{type:"EXTFEE_COINID_ERROR",value:`coinId is ${c}`}]},tags:{},level:"info"})}}catch{}};return(0,ni.useDebounceEffect)(()=>{if(!f||a){G(m=>({...m,loading:!1,error:""}));return}if(o===C&&o!==null){G(m=>({...m,loading:!1,error:""}));return}let u=M(n.gasPrice,"0")&&M(n.gasLimit,"0"),L=M(n.maxFeePerGas,"0")&&M(n.maxPriorityFeePerGas,"0")&&M(n.gasLimit,"0");if(!(p?L:u)){G(m=>({...m,loading:!1,error:""}));return}(async()=>{try{let m={...n,value:Ge(n.value),gasLimit:Ge(n.gasLimit)},w=p?{...m,maxFeePerGas:Ge(n.maxFeePerGas),maxPriorityFeePerGas:Ge(n.maxPriorityFeePerGas)}:{...m,gasPrice:Ge(n.gasPrice)},z=Kt(w),X=await ei(z);P();let N=await Zt({coinId:c},{inputData:X});G(k=>({...k,data:N,loading:!1,error:""}))}catch(m){G(w=>({...w,loading:!1,error:m.error_message||"Network error"}))}finally{o&&T(o)}})()},[c,n,o,f],{wait:r}),y},qi=({commonTx:i,gasPrice:s,priorityFee:r,supportEip1559:a})=>(0,$.useMemo)(()=>a?{...i,maxFeePerGas:s,maxPriorityFeePerGas:r}:{...i,gasPrice:s},[i,s,r,a]),ui=({coinId:i,from:s,to:r,value:a,inputData:o,gasLimit:l,supportEip1559:c,needExtFee:p,fastGasPrice:n,fastPriorityFee:f,customGasPrice:C,customMaxBaseFee:T,customMaxPriorityFee:y,customGasLimit:G,estimatedL1FeeOptions:P})=>{let u=(0,$.useMemo)(()=>({from:s,to:r,value:a,data:o}),[s,r,a,o]),L=(0,$.useMemo)(()=>({...u,gasLimit:l}),[u,l]),S=qi({commonTx:L,gasPrice:n,priorityFee:f,supportEip1559:c}),D=(0,$.useMemo)(()=>c?{...u,maxFeePerGas:U(_(T,y)),maxPriorityFeePerGas:U(y),gasLimit:G}:{...u,gasPrice:U(C),gasLimit:G},[u,c,C,T,y,G]),m=oi({coinId:i,tx:S,type:"fast",supportEip1559:c,needExtFee:p},P),w=oi({coinId:i,tx:D,type:"custom",supportEip1559:c,needExtFee:p},P);return(0,$.useMemo)(()=>{let z=m.loading||w.loading,X=m.error||w.error,N={[e.SLOW]:m.data,[e.STANDARD]:m.data,[e.FAST]:m.data,[e.CUSTOM]:w.data};return{loading:z,error:X,data:N}},[m,w])};ie();se();var J={customInput:"_customInput_y9e7y_1",maxBaseFeeWarning:"_maxBaseFeeWarning_y9e7y_4",customGWei:"_customGWei_y9e7y_10",customInputSubTitle:"_customInputSubTitle_y9e7y_17",customGasFeeWarning:"_customGasFeeWarning_y9e7y_21",customGasFeeWarningFold:"_customGasFeeWarningFold_y9e7y_24",gweiText:"_gweiText_y9e7y_27"};var le=i=>Vt(i)||He(i,0);function li({className:i}){return t.default.createElement(at,{className:i,desc:g("wallet_extension_transfer_text_higher_than_necessary"),type:at.TYPE.warn,closable:!1})}var Ji=({visible:i=!1,address:s="",inputData:r="",tokenAddress:a="",coinId:o="",value:l="0",initialGasData:c={initialGasType:e.STANDARD,initialCustomMaxBaseFee:"0",initialCustomMaxPriorityFee:void 0,initialCustomGasPrice:"0",initialCustomGasLimit:"0"},estimatedL1FeeOptions:p={},onBack:n=()=>{},onClose:f=()=>{},onGasChange:C=()=>{},onServerDataChange:T=()=>{},minimumGasLimit:y="0",isSignInfoLoading:G,signInfo:P,initialGasLimitInfo:u,isGasLimitLoading:L,currencyId:S,gasReturn:D,onGasTypeManualChange:m,isMev:w,mevInfo:z})=>{let X=(0,t.useRef)(!1),[,N]=ut(o,{withPrice:!0}),k=ft({coinId:N?.coinId}),[xe,De,ye]=qt(k?.realChainIdHex),ae=si(),fe=ci(),{initialGasType:de=e.STANDARD,initialCustomMaxBaseFee:Le,initialCustomMaxPriorityFee:oe,initialCustomGasPrice:Te,initialCustomGasLimit:Fe}=c||{},b=le(Le)?void 0:Me(Le),Se=le(oe)?void 0:Me(oe),Ie=le(Te)?void 0:Me(Te),Re=le(Fe)?void 0:Fe,[Ne,Ke]=(0,t.useState)(),[ge,Ze]=(0,t.useState)(),[Pt,Fi]=(0,t.useState)(),[pt,Gt]=(0,t.useState)(),[Ee,xt]=(0,t.useState)(de),[E,he]=(0,t.useState)(de),Pi=F=>{let{priorityRate:d}=z||{},O=it=>x(it,d),A=(it,Ri)=>{let Ki=Q([0,x(Ri,re(d,1))]);return _(it,Ki)},{supportEip1559:V,max:te,min:tt,normal:kt,fastPriorityFee:ve,proposePriorityFee:bt,safePriorityFee:vt}=F,ce={};return V&&d&&(ce.fastPriorityFee=O(ve),ce.safePriorityFee=O(vt),ce.proposePriorityFee=O(bt),ce.max=A(te,ve),ce.normal=A(kt,bt),ce.min=A(tt,vt)),{...F,...ce}},H=(0,t.useMemo)(()=>w?P?.gasPrice?Pi(P?.gasPrice):$e:P?.gasPrice||$e,[P?.gasPrice,w]),pi=P?.needExtFee,{min:Gi,normal:xi,max:yi,minGasPrice:di,supportEip1559:v,suggestBaseFee:Ti,safePriorityFee:_e,proposePriorityFee:Ce,fastPriorityFee:we}=H,R=fe(Gi),K=fe(xi),Z=fe(yi),h=(0,t.useMemo)(()=>{let F=zt(u?.minGasLimit,y)?u?.minGasLimit:y,d={...u,minGasLimit:F};return q(d?.gasLimit,d?.minGasLimit)&&(d.gasLimit=d?.minGasLimit),d},[u,y]),yt=`${h?.gasLimit||0}`,Y=Re||yt,Ye=`${h?.minGasLimit||yt}`,je=`${h?.maxGasLimit||1500*1e4}`,gi=W(R),dt=W(K),_i=W(Z),Tt=Me(di),qe=W(Ti),Ci=W(re(R,_e)),gt=W(re(K,Ce)),wi=W(re(Z,we)),Mi=W(_e),_t=W(Ce),Di=W(we),Ae=(0,t.useRef)(),We=(0,t.useRef)(),Oe=(0,t.useRef)(),Je=(0,t.useRef)(),Ct={[e.SLOW]:gi,[e.STANDARD]:dt,[e.FAST]:_i,[e.CUSTOM]:le(Ae.current)?dt:Ae.current},wt={[e.SLOW]:Ci,[e.STANDARD]:gt,[e.FAST]:wi,[e.CUSTOM]:le(We.current)?gt:We.current},Mt={[e.SLOW]:Mi,[e.STANDARD]:_t,[e.FAST]:Di,[e.CUSTOM]:le(Oe.current)?_t:Oe.current},Pe=typeof Pt=="string"?Pt:Ie||Ct[E],ne=typeof Ne=="string"?Ne:b||wt[E],pe=typeof ge=="string"?ge:Se||Mt[E],ee=typeof pt=="string"?pt:Y,I=ui({coinId:o,from:s,to:a,value:l,inputData:r,gasLimit:Y,supportEip1559:v,needExtFee:pi,slowGasPrice:R,safePriorityFee:_e,standardGasPrice:K,proposePriorityFee:Ce,fastGasPrice:Z,fastPriorityFee:we,customGasPrice:Pe,customMaxBaseFee:ne,customMaxPriorityFee:pe,customGasLimit:ee,estimatedL1FeeOptions:{wait:200,...p,signInfo:P}}),ke=G||L||I.loading,{minGasFeeDisplay:Li,minGasFee:Si,minGasPrice:Ii}=ze({gasPrice:R,gasLimit:Y,maxPriorityFeePerGas:_e,maxFeePerGas:R,supportEip1559:v,extFee:I?.data?.[e.SLOW],gasPriceInfo:H,gasLimitInfo:h,gasType:Ee,baseCoin:N,currencyId:S}),Ni=W(Ii),{minGasFeeDisplay:Ei,minGasFee:hi,minGasPrice:Ai}=ze({gasPrice:K,gasLimit:Y,maxPriorityFeePerGas:Ce,maxFeePerGas:K,supportEip1559:v,extFee:I?.data?.[e.STANDARD],gasPriceInfo:H,gasLimitInfo:h,gasType:Ee,baseCoin:N,currencyId:S}),Wi=W(Ai),{minGasFeeDisplay:Oi,minGasFee:ki,minGasPrice:bi}=ze({gasPrice:Z,gasLimit:Y,maxPriorityFeePerGas:we,maxFeePerGas:Z,supportEip1559:v,extFee:I?.data?.[e.FAST],gasPriceInfo:H,gasLimitInfo:h,gasType:Ee,baseCoin:N,currencyId:S}),vi=W(bi),Dt=He(ne,0)?g("extension_wallet_transaction_errortip_basefeelimit"):"",Lt=q(ne,qe)&&M(ne,0)?g("extension_wallet_transaction_errortip_notsuccess",{baseFee:qe}):"",St=He(pe,0)?g("extension_wallet_transaction_errortip_priorityfeelimit"):"",It=q(Pe,Tt)?g("wallet_extension_transaction_customize_error_gasprice_mustbe",{minGasPriceGWei:Tt}):"",Nt=q(ee,Ye)||M(ee,je)?g("wallet_extension_transaction_customize_error_gas_restriction",{minGasLimit:mt(Ye,0),maxGasLimit:mt(je)}):"",Et=!Nt&&(!v&&!It||v&&!Dt&&!St),ht=_(ne,pe),be=U(Ue((v?ht:Pe)||0)),Bi=W(be),{gasFeeDisplay:At}=mi({gasPrice:Ue(be),gasLimit:Ue(ee),extFee:I?.data?.[e.CUSTOM],baseCoin:N,currencyId:S}),Hi=_(x(R,Y),I?.data?.[e.SLOW]),Ui=_(x(K,Y),I?.data?.[e.STANDARD]),Wt=_(x(Z,Y),I?.data?.[e.FAST]),Ot=_(x(be,ee),I?.data?.[e.CUSTOM]),Xe=M(Ot,x(Wt,2)),Qe=[{typeKey:e.SLOW,gasFee:Si,unitPrice:`${j.ceilShort(Ni,2)} ${g("extension_wallet_transaction_input_gwei")}`,totalPrice:Li,estimatedTime:ae(H,R),onClick:()=>(m?.(),he(e.SLOW))},{typeKey:e.STANDARD,gasFee:hi,unitPrice:`${j.ceilShort(Wi,2)} ${g("extension_wallet_transaction_input_gwei")}`,totalPrice:Ei,estimatedTime:ae(H,K),onClick:()=>(m?.(),he(e.STANDARD))},{typeKey:e.FAST,gasFee:ki,unitPrice:`${j.ceilShort(vi,2)} ${g("extension_wallet_transaction_input_gwei")}`,totalPrice:Oi,estimatedTime:ae(H,Z),onClick:()=>(m?.(),he(e.FAST))}],Vi=(0,t.useMemo)(()=>D&&D?.status!==Xt.empty&&(!D?.tip?.error||D?.tip?.key===Jt.exceedGasLimit)?Qe?.map(F=>F?.typeKey!==e.CUSTOM&&j.lte(j.mul(F?.gasFee,N?.usdPrice),D?.activity?.gas)?{supportGasReturn:!0,...F}:F):Qe,[D,Qe,N?.usdPrice]),$i=ae(H,be,!Et),zi={unitPricePrefix:j.ceilShort(Bi,2),unitPriceSuffix:g("extension_wallet_transaction_input_gwei"),totalPrice:At?t.default.createElement(ai,{style:{color:Xe?"var(--okd-color-semantic-notice)":null},text:At,maxWidth:"120px"}):"",renderWarning:F=>!F&&Xe?t.default.createElement(li,{className:J.customGasFeeWarningFold}):null,estimatedTime:$i,onClick:()=>{xt(e.CUSTOM)},canConfirm:Et,onConfirm:F=>{he(e.CUSTOM),m?.();let d=U(Pe),O=U(ht),A=U(pe),V=ee,te=I?.data?.[e.CUSTOM];X.current=!0,C({gasType:e.CUSTOM,maxFeePerGas:O,maxPriorityFeePerGas:A,gasPrice:d,gasLimit:V,isGasLimitLoading:L,isNetworkFeeLoading:ke,networkFee:Ot,supportEip1559:v,gasLimitInfo:h,gasPriceInfo:H,extFee:te,customConfirmed:X.current}),Ae.current=Pe,We.current=ne,Oe.current=pe,Je.current=ee,F?De({gasPrice:d,isDefault:!0,maxFeePerGas:O,isSupportEip1559:v,maxPriorityFeePerGas:A,baseFeePerGas:j.sub(O,A)}):ye(k?.realChainIdHex)}};(0,t.useEffect)(()=>{xt(E)},[i]),(0,t.useEffect)(()=>{if(E===e.CUSTOM)return;let F,d,O,A,V,te=Y;E===e.SLOW?(O=R,F=R,d=_e,V=Hi,A=I?.data?.[e.SLOW]):E===e.STANDARD?(O=K,F=K,d=Ce,V=Ui,A=I?.data?.[e.STANDARD]):E===e.FAST&&(O=Z,F=Z,d=we,V=Wt,A=I?.data?.[e.FAST]),C({gasType:E,maxFeePerGas:F,maxPriorityFeePerGas:d,gasPrice:O,gasLimit:te,isGasLimitLoading:L,isNetworkFeeLoading:ke,networkFee:V,supportEip1559:v,gasLimitInfo:h,gasPriceInfo:H,extFee:A})},[E,R,K,Z,h,L,ke,C]),(0,t.useEffect)(()=>{if(E===e.CUSTOM&&!i){let F=Je.current;typeof F=="string"&&q(F,h?.minGasLimit)&&(F=h?.minGasLimit,Gt(h?.minGasLimit),Je.current=h?.minGasLimit);let d=U(Ae.current||Ie||Ct[E]),O=U(We.current||b||wt[E]),A=U(Oe.current||Se||Mt[E]),V=_(O,A),te=typeof F=="string"?F:Y,tt=I?.data?.[e.CUSTOM],ve=_(x((v?V:d)||0,te),I?.data?.[e.CUSTOM]);C({gasType:E,maxFeePerGas:V,maxPriorityFeePerGas:A,gasPrice:d,gasLimit:te,isGasLimitLoading:L,isNetworkFeeLoading:ke,networkFee:ve,supportEip1559:v,gasLimitInfo:h,gasPriceInfo:H,extFee:tt,useDefaultGas:!!xe,customConfirmed:X.current})}},[xe,h,H,I]),(0,t.useEffect)(()=>{typeof T=="function"&&T({signInfo:P})},[P]);let et=()=>t.default.createElement("span",{className:J.customGWei},g("extension_wallet_transaction_input_gwei"));return t.default.createElement(ii,{feeType:Ee,baseCoinId:N?.coinId,feeDataList:Vi,onBack:n,onClose:f,visible:i,supportDefaultGas:!0,custom:{useDefaultGas:!!xe,chainName:k?.chainName,...zi,components:()=>t.default.createElement(t.default.Fragment,null,v?t.default.createElement(t.default.Fragment,null,t.default.createElement(B.Number,{className:J.customInput,size:B.SIZE.sm,title:t.default.createElement("div",{className:"network-fee--refresh-animation"},g("extension_wallet_transaction_text_maxbase_fee"),t.default.createElement("span",{className:J.customInputSubTitle},g("extension_wallet_transaction_text_current",{number:j.ceilShort(qe,2)}))),value:ne,error:Dt,errorType:B.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:Ke,max:1e7,tips:Lt&&t.default.createElement("div",{className:J.maxBaseFeeWarning},Lt),suffix:et()}),t.default.createElement(B.Number,{className:J.customInput,size:B.SIZE.sm,title:g("extension_wallet_transaction_text_priority_fee"),value:pe,error:St,errorType:B.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:Ze,max:1e7,suffix:et()})):t.default.createElement(B.Number,{className:J.customInput,size:B.SIZE.sm,title:t.default.createElement(t.default.Fragment,null,g("wallet_transfer_gasfee_subtitle_gas_price"),t.default.createElement("span",{className:J.customInputSubTitle},g("extension_wallet_transaction_input_gwei"))),value:Pe,error:It,errorType:B.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:Fi,max:1e7,suffix:et()}),t.default.createElement(B.Number,{size:B.SIZE.sm,title:g("wallet_transfer_gasfee_subtitle_custom_gas_limit"),value:ee,error:Nt,errorType:B.TIP_TYPE.always,enableMinus:!1,onChange:Gt,max:je,min:Ye,precision:0}),Xe&&t.default.createElement(li,{className:J.customGasFeeWarning}))}})};function Xi(i){let{coinId:s="",address:r="",inputData:a="",tokenAddress:o="",value:l="0",gasLimitOptions:c={},gasLimitParams:p={},initialGasData:n={initialGasType:e.STANDARD,initialCustomMaxBaseFee:"0",initialCustomMaxPriorityFee:void 0,initialCustomGasPrice:"0",initialCustomGasLimit:"0"},onDappGasIllegal:f}=i,[C,T]=ut(s)||[{},{}],y=ft({coinId:T?.coinId}),G=jt(),[P,u]=(0,t.useState)(n),[L,S]=(0,t.useState)(!1),[D,m]=ti({coinId:s,address:r,chainId:C?.chainId}),[w,z,X]=ri({address:r,inputData:a,tokenAddress:o,coinId:s,value:l,...p},{wait:200,...c}),N=D||X;return(0,fi.useAsyncEffect)(async()=>{if(N)return;if(y?.realChainIdHex)try{let b=await G(y?.realChainIdHex);if(!Ut(b)){u({initialGasType:e.CUSTOM,initialCustomGasPrice:b?.gasPrice,initialCustomMaxPriorityFee:b?.maxPriorityFeePerGas,initialCustomMaxBaseFee:j.sub(b?.maxFeePerGas,b?.maxPriorityFeePerGas)}),S(!0);return}}catch(b){Ht(b)}let k={...n||{}},{initialGasType:xe,initialCustomMaxBaseFee:De,initialCustomMaxPriorityFee:ye,initialCustomGasPrice:ae,initialCustomGasLimit:fe}=k,{min:de,safePriorityFee:Le,supportEip1559:oe,max:Te}=m?.gasPrice||$e,{gasLimit:Fe}=w||{};if(xe===e.CUSTOM){let b=q(fe,Fe);b&&(k.initialCustomGasLimit=Fe);let Se=oe&&(q(ye,Le)||q(_(De,ye),de)),Ie=!oe&&q(ae,de),Re=M(fe,x(Fe,1.2)),Ne=!oe&&M(ae,x(Te,1.2)),Ke=oe&&M(_(De,ye),x(Te,1.2)),ge=b||Se||Ie,Ze=Re||Ne||Ke;ge&&(k.initialCustomMaxPriorityFee=null,k.initialCustomMaxBaseFee=null,k.initialCustomGasPrice=null,k.initialGasType=e.STANDARD,f?.(ot[e.SLOW])),!ge&&Ze&&f?.(ot[e.FAST]),u(k)}S(!0)},[N]),L?t.default.createElement(Ji,{...i,initialGasData:P,isSignInfoLoading:D,signInfo:m,initialGasLimitInfo:w,isGasLimitLoading:z,onGasTypeManualChange:()=>{f?.("")}}):null}var Vs=(0,t.memo)(Xi);ie();se();rt();var Ys=(i,s)=>{let r=i.find(a=>a?.checkType===s);return r?!r?.result:!1},js=(i,s,r,a)=>{let o=i.find(l=>l?.checkType===nt.OVERWRITTEN)||{};return o.toastType===ue.FAILED?s():o.toastType===ue.PENDING?r():o.toastType===ue.PENDING_7702?a():i},qs=(i=[])=>{let s={hasFailedTx:!1,hasPendingTx:!1,nonce:0,newNonce:0,originGasPrice:"0",originPriorityFee:"0"},r=i.find(a=>a?.checkType===nt.OVERWRITTEN)||{};return s.nonce=r.nonce,s.newNonce=r.newNonce,s.originGasPrice=x(r?.gasPrice,1.1),s.originPriorityFee=x(r?.originPriorityFee,1.1),r.toastType===ue.FAILED?s.hasFailedTx=!0:r.toastType===ue.PENDING?s.hasPendingTx=!0:r.toastType===ue.PENDING_7702&&(s.hasPending7702Tx=!0),s},Js=(i,s,r)=>{let{userGasInfo:a,serverGasInfo:o,originTxGasInfo:l}=s,{originGasPrice:c,originPriorityFee:p}=l,{supportEip1559:n}=a;if(n){let y=!1,{maxFeePerGas:G,maxPriorityFeePerGas:P}=a,{normal:u,proposePriorityFee:L}=o,S=c,D=p,m=Q([G,u,S]);me(m,G)||(y=!0);let w=Q([P,L,D]),z="0";return me(w,P)||(z=re(w,P),y=!0),y?r({maxFeePerGas:_(m,z),maxPriorityFeePerGas:w}):i}let{gasPrice:f}=a,{normal:C}=o,T=Q([f,C,c]);return me(T,f)?i:r({gasPrice:T})},Xs=({userGasInfo:i,serverGasInfo:s,originTxGasInfo:r})=>{let{originGasPrice:a,originPriorityFee:o}=r,{supportEip1559:l}=i;if(l){let f=!1,{maxFeePerGas:C,maxPriorityFeePerGas:T}=i,{normal:y,proposePriorityFee:G}=s,P=a,u=o,L=Q([C,y,P]);me(L,C)||(f=!0);let S=Q([T,G,u]),D="0";if(me(S,T)||(D=re(S,T),f=!0),f)return{maxFeePerGas:Ve(_(L,D),0),maxPriorityFeePerGas:Ve(S,0)}}let{gasPrice:c}=i,{normal:p}=s,n=Q([c,p,a]);return me(n,c)?{}:{gasPrice:Ve(n,0)}},Qs=(i,s,r)=>{let{userGasInfo:a,updateGasInfo:o,baseCoinAmountAvailable:l}=s,{supportEip1559:c,gasLimit:p}=a;if(c){let{maxFeePerGas:f}=o;return M(x(f,p),l)?r():i}let{gasPrice:n}=o;return M(x(n,p),l)?r():i},er=({userGasInfo:i,updateGasInfo:s,baseCoinAmountAvailable:r,L1FEE:a})=>{let{supportEip1559:o,gasLimit:l}=i;if(o){let{maxFeePerGas:p}=s;return!!M(_(x(p,l),a),r)}let{gasPrice:c}=s;return!!M(_(x(c,l),a),r)};export{Vs as a,Ys as b,js as c,qs as d,Js as e,Xs as f,Qs as g,er as h};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-EVRKRU7I.js.map
