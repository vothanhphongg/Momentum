import{a as A,b as Et}from"./chunk-IY4RYRL6.js";import{b as Ye}from"./chunk-34VLVCKN.js";import{a as fe,b as Xe,d as ze,i as ne}from"./chunk-YF3DWJDS.js";import{A as Ve,D as Je,G as et,J as tt,i as Ze,o as Ke,q as $e}from"./chunk-ECQND2NK.js";import{a as je,j as We}from"./chunk-M5NI6HPE.js";import{b as de}from"./chunk-VM2NMLPX.js";import{a as j,e as Ge,g as qe,n as G,u as Qe}from"./chunk-PQK3LXXN.js";import{$c as he,Jc as Fe,Kc as Ue,Oa as Pe,Z as De,Zc as m,r as v,ta as Me,ub as ve,vb as Be}from"./chunk-FTRHGHDS.js";import{a as He,c as C}from"./chunk-XT3EOPTE.js";import{b as Le,g as Ne,j as Ae,l as Oe}from"./chunk-A6Z53EN6.js";import{A as pe,H as re,b as Re,h as X,o as z,y as _e}from"./chunk-PUSMMCUD.js";import{G as oe,Q as Se,R as be}from"./chunk-UWJLNJLY.js";import{E as le,H as N,a as H,aa as W,j as p,ra as te}from"./chunk-XDY6V34Y.js";import{$ as ue,D as xe,W as ce,ea as E}from"./chunk-JT3LNHPY.js";import{b as I}from"./chunk-JWYCKY2V.js";import{f as g,h as c,o as i,q as a}from"./chunk-6KXF36WM.js";i();a();var se=g(I());i();a();var nt=g(I());i();a();var ot=g(I());function rt(){let o=(0,ot.useRef)(!0);return o.current?(o.current=!1,!0):o.current}var st=(o,e)=>{let t=rt();(0,nt.useEffect)(()=>t?()=>{}:o(),e)};function It(){let{accountStore:o,fromToStore:e}=C(),{computedAccountId:t,address:r,setFromChainId:s,computedMultiAddresses:n}=o,{from:l,to:u,setBalanceState:_,getSwapTokenBalance:d,computedIsToAddressEqualsCurrentToAddress:f}=e,{amount:T,chainId:k}=l;(0,se.useEffect)(()=>{Qe(k)&&s(k)},[k,s]),(0,se.useEffect)(()=>{d()},[t,d]),(0,se.useEffect)(()=>{_({amount:T,address:r,from:l,to:u})},[T,r,l,u,_,f]),st(()=>{d()},[n?.targetWalletAddress])}var Xt=It;i();a();var q=g(I()),ht=g(he());i();a();var it=g(I());var Ct=()=>{let{tokenInfoStore:o}=C(),{computedFormatLatestInfo:e}=o||{},{tokenSymbol:t,tokenContractAddress:r,chainId:s,chainName:n}=e||{},l=(_="")=>{de.set(fe,_)};return{marketTokenPageClick:(0,it.useCallback)((_={})=>{let d=de.get(fe),f=d!==Xe.DISCOVER_PAGE?d:"";return Je({page_from:f,channel_id:s,token_address:r,token_symbol:t,chain_name:n,chain_id:s,..._})},[t,r,s,n]),setReferrer:l}},at=Ct;i();a();var Y=g(I()),ke=g(he());var wt=({showIconBg:o=!1,iconName:e="",onClick:t,iconStyle:r,category:s=E.CATEGORY.fill,size:n=E.SIZE.lg,type:l=E.TYPE.gray,iconClassName:u=""})=>o?Y.default.createElement(E,{strictCircle:!0,category:s,type:l,size:n,style:{padding:"0px"},iconType:E.ICON_POSITION.tailing,onClick:t,icon:Y.default.createElement(ce,{className:(0,ke.default)(e,u),style:r})}):Y.default.createElement(Re,{onClick:t},Y.default.createElement(ce,{className:(0,ke.default)(e,u),style:r})),mt=wt;i();a();var Z=g(I());var St=()=>{let{fromToStore:o={},commonStore:e,accountStore:t}=C(),{computedIsMarket:r,computedIsWalletEnv:s}=e,{address:n}=t,{from:l={},to:u={}}=o,{tokenContractAddress:_,tokenName:d,chainName:f}=l,{tokenContractAddress:T,tokenName:k}=u,y=(0,Z.useMemo)(()=>({user_id:n,terminal_type:s?"Extension":"Web",from_token_address:_,from_token_name:d,to_token_address:r?"":T,to_token_name:r?"":k,chain_name:f}),[n,f,r,s,_,d,T,k]),b=(0,Z.useCallback)(()=>{(r?Ve:Ze)(y)},[y,r]),R=(0,Z.useCallback)(w=>{let P=r?et:Ke,L={...y,content:w};P(L)},[y,r]);return{monitorShareClickEvent:b,monitorCopyClickEvent:R}},ie=St;i();a();var S=g(I()),pt=g(Et()),Te=g(he());i();a();var ut=g(I());i();a();var O=g(I());be();var bt=o=>{let{fromToStore:e={},commonStore:t}=C(),{computedIsMarket:r}=t,[s,n]=(0,O.useState)(""),[l,u]=(0,O.useState)(!1),[_,d]=(0,O.useState)(null),{from:f={},to:T={}}=e,{chainId:k,tokenContractAddress:y}=f,{chainId:b,tokenContractAddress:R}=T,w=(0,O.useCallback)(async()=>{u(!0),d(null);let[P,L]=await oe(ne.get(Fe,{params:{source:r?1:0,fromTokenAddress:y,toTokenAddress:R,chainId:k}}));if(u(!1),P){d(P);return}n(L?.data?.url)},[r,y,R,k]);return(0,O.useEffect)(()=>{y&&R&&k&&b&&o&&w()},[y,R,k,b,o,w]),(0,O.useMemo)(()=>({shareLink:s,loading:l,error:_,refresh:w}),[s,l,_,w])},lt=bt;i();a();var D=g(I());be();var xt=o=>{let[e,t]=(0,D.useState)(""),[r,s]=(0,D.useState)(!1),[n,l]=(0,D.useState)(null),u=(0,D.useCallback)(async()=>{s(!0),l(null);let{url:_}=new Se,d=`${_?.pathname}${_?.hash}${_?.search}`,[f,T]=await oe(ne.get(Ue,{params:{originalUrl:d}}));if(s(!1),f){l(f);return}t(T?.data?.universalLink||"")},[]);return(0,D.useEffect)(()=>{o&&u()},[o]),(0,D.useMemo)(()=>({shareShortLink:e,shortLoading:r,shortError:n,shortRefresh:u}),[e,r,n,u])},ct=xt;var Rt=({isShareShortLink:o,visible:e})=>{let{shareLink:t,loading:r,error:s,refresh:n}=lt(!!e&&!o),{shareShortLink:l,shortLoading:u,shortError:_,shortRefresh:d}=ct(!!e&&o),{tokenInfoStore:f}=C();return(0,ut.useMemo)(()=>{let k=r||s,y={href:We(t),target:"__blank",icon:"okx-defi-dex-twitter",iconType:E.ICON_POSITION.leading},b=s,R=r,w=m("swaptrade_mid_dialog_header_share_as_blink"),P=m("swaptrade_mid_dialog_btn_share_on_x"),L=n,Q=()=>{},Ce=t;if(o){let{latestInfo:we}=f;k=u||_,y={},b=_,R=u,L=d,w=m("swaptrade_market_token_dialog_header_share_link"),P=m("commonall_enterfield_btn_copy_link"),Q=()=>{re.success(m("swaptrade_order_info_label_from_copy_success")),je(l),tt({chain_id:we?.chainId,token_name:we?.tokenName,button_name:"url_share"})},Ce=l}return{status:k,hrefConfig:y,infoError:b,infoLoading:R,infoRefresh:L,title:w,confirmText:P,displayLink:Ce,onConfirm:Q}},[r,u,s,_,t,l,n,d,o,f])},_t=Rt;i();a();var F={"share-button":"_share-button_hlj9x_1",shareButton:"_share-button_hlj9x_1",description:"_description_hlj9x_4",input:"_input_hlj9x_10","copy-button":"_copy-button_hlj9x_15",copyButton:"_copy-button_hlj9x_15",loading:"_loading_hlj9x_18",empty:"_empty_hlj9x_21","copy-container":"_copy-container_hlj9x_24",copyContainer:"_copy-container_hlj9x_24","copy-address":"_copy-address_hlj9x_32",copyAddress:"_copy-address_hlj9x_32"};var Lt=({shareLink:o="",shareBlinkEnable:e=!1,supportShortLink:t=!1})=>{let{monitorCopyClickEvent:r}=ie(),n=t&&!e?"":m("swaptrade_dialog_dialog_title_share_x");return S.default.createElement(S.default.Fragment,null,S.default.createElement("div",{className:F.copyContainer},S.default.createElement("div",{className:F.copyAddress},S.default.createElement("span",{className:"ellipsis"},o)),!t||e?S.default.createElement(pt.CopyToClipboard,{text:o,onCopy:()=>{r(o),re.success(m("swaptrade_order_info_label_from_copy_success"))}},S.default.createElement(E,{className:F.copyButton,category:E.CATEGORY.outline,type:E.TYPE.primary,size:E.SIZE.xxs},m("swaptrade_dialog_btn_desc_copy"))):null),n&&S.default.createElement("p",{className:(0,Te.default)(F.description)},n))},Nt=({visible:o,shareBlinkEnable:e,supportShortLink:t,...r})=>{let n=_t({isShareShortLink:t&&!e,visible:o}),l=()=>n.infoError?S.default.createElement(_e.State,{className:F.empty,type:_e.State.TYPE.noNetwork,title:m("swaptrade_general_emptystate_title_loading_fail"),description:m("swaptrade_general_emptystate_subtitle_network_error"),buttonText:m("swaptrade_recent_transaction_dialog_btn_reload"),onButtonClick:n.infoRefresh}):n.infoLoading?S.default.createElement(ue.Circle,{className:(0,Te.default)(F.loading,"flex justify-center"),size:ue.SIZE.xl}):S.default.createElement(Lt,{shareLink:n.displayLink,shareBlinkEnable:e,supportShortLink:t});return S.default.createElement(z.Confirmation,{title:n.title,hideCloseBtn:!1,onConfirm:n.onConfirm,confirmText:n.status?void 0:n.confirmText,visible:o,width:420,confirmBtnProps:n.status?void 0:{...n.hrefConfig,className:F.shareButton,size:xe.lg},...r},l())},dt=Nt;i();a();var ft={icon:"_icon_m9cj5_1"};var At=({iconStyle:o={fontSize:"24px"},iconType:e="okx-defi-nft-share2",iconClassName:t,tooltipProps:r,showIconBg:s=!1,shareBlinkEnable:n,supportShortLink:l})=>{let[u,_]=q.default.useState(!1),{monitorShareClickEvent:d}=ie(),{marketTokenPageClick:f}=at();return q.default.createElement(q.default.Fragment,null,q.default.createElement(pe,{placement:pe.DIRECTION.bottom,title:l&&!n?m("swaptrade_market_token_tooltips_share_link"):m("swaptrade_mid_dialog_header_share_as_blink"),...r},q.default.createElement(mt,{showIconBg:s,iconName:(0,ht.default)(e,ft.icon,t),iconStyle:o,onClick:()=>{_(!0),d(),f({share_click:ze.point})}})),q.default.createElement(dt,{visible:u,onClose:()=>_(!1),shareBlinkEnable:n,supportShortLink:l}))},_r=At;i();a();var kt=g(I());var Ot=()=>{let{fromToStore:o={},commonStore:e}=C(),{from:t={},to:r={},computedIsSolanaChain:s}=o,{currentTab:n,computedIsMarket:l}=e,u=n===Be.SWAP,_=l,{chainId:d,tokenContractAddress:f,isHoneypot:T}=t,{chainId:k,tokenContractAddress:y,isHoneypot:b}=r;return(0,kt.useMemo)(()=>!(!d||!f||!k||!y||T||b||d!==k||!s||!(u||_)),[d,f,k,y,T,b,s,u,_])},Tr=Ot;i();a();i();a();var yt=g(I());i();a();var ae=g(I());i();a();var Tt={"warn-state-container":"_warn-state-container_1n8v8_1",warnStateContainer:"_warn-state-container_1n8v8_1","error-state-container":"_error-state-container_1n8v8_2",errorStateContainer:"_error-state-container_1n8v8_2","error-state-title":"_error-state-title_1n8v8_15",errorStateTitle:"_error-state-title_1n8v8_15","error-state-content":"_error-state-content_1n8v8_21",errorStateContent:"_error-state-content_1n8v8_21","add-funds":"_add-funds_1n8v8_28",addFunds:"_add-funds_1n8v8_28",warning:"_warning_1n8v8_33",error:"_error_1n8v8_2","ledger-network-tips":"_ledger-network-tips_1n8v8_39",ledgerNetworkTips:"_ledger-network-tips_1n8v8_39",mb16:"_mb16_1n8v8_42","error-icon":"_error-icon_1n8v8_45",errorIcon:"_error-icon_1n8v8_45","warn-icon":"_warn-icon_1n8v8_46",warnIcon:"_warn-icon_1n8v8_46"};var Dt=({chainName:o})=>{let e=()=>{let t=z.tip({infoType:z.Tip.INFO_TYPE.default,children:m("swaptrade_top_modaldesc_ledger_supported_paychains"),confirmText:m("swaptrade_card_btn_value_difference_gotit"),onConfirm:()=>{t.destroy()},confirmBtnProps:{block:!0,size:E.SIZE.md}})};return ae.default.createElement(ae.default.Fragment,null,m("swaptrade_top_alert_desc_paychain_not_supported",{payChain:o}),ae.default.createElement(X,{className:Tt.ledgerNetworkTips,type:X.TYPE.primary,weight:X.WEIGHT.muted,size:X.SIZE.xs,onClick:e},m("swaptrade_top_alert_textbtn_view_supported_chains")))},gt=Dt;var Mt=o=>{let e=m("swaptrade_adjustslip_modal_title_wrongnetwork"),t=m("swaptrade_card_alert_switch_wallet_to_match",{chainName:o});return Pe()?(e=m("swaptrade_extension_mid_plzswitch_wallet"),t=m("swaptrade_extension_mid_plzswitch_wallettips",{chain:o})):Ye&&(e=m("swaptrade_top_alert_title_please_switch_network"),t=yt.default.createElement(gt,{chainName:o})),{title:e,content:t}},M={default:()=>({type:"",title:"",content:"",errorType:""}),quote:()=>({type:"error",title:m("swap_title_quote_server_error"),content:m("swaptrade_quote_server_error_content"),errorType:v.QUOTE_ERROR}),honeypot:o=>({type:"error",title:m("wallet_swap_alert_scamtoken",{tokenSymbol:o}),titleEquation:m("wallet_swap_alert_scamtoken",{tokenSymbol:A(o)}),content:m("wallet_swap_toast_scam_token_desc"),errorType:v.QUOTE_ERROR}),leverageToken:(o,e)=>{let t=o&&e?m("swaptrade_mid_alert_highrisk_both_token",{sellToken:o.tokenSymbol,receiveToken:e.tokenSymbol}):m("swaptrade_mid_alert_highrisk_token",{token:o?.tokenSymbol||e?.tokenSymbol}),r=o&&e?m("swaptrade_mid_alert_highrisk_both_token",{sellToken:A(o.tokenSymbol),receiveToken:A(e.tokenSymbol)}):m("swaptrade_mid_alert_highrisk_token",{token:A(o?.tokenSymbol)||A(e?.tokenSymbol)});return{type:"error",title:t,titleEquation:r,content:m("swaptrade_top_text_protect_capital"),errorType:v.QUOTE_ERROR}},wrongNetwork:o=>{let{title:e,content:t}=Mt(o);return{type:"warning",title:e,content:t,errorType:v.NETWORK_ERROR}},feeConfig:()=>({type:"error",title:m("swaptrade_card_reminder_title_parameter_error"),content:m("swaptrade_card_reminder_desc_feepercent",{feePercent:"feePercent",value1:"0",value2:G(Me,{needZero:!1})}),errorType:v.FEE_CONFIG_ERROR}),accountErrorTips:()=>({type:"warning",title:m("swaptrade_adjustslip_modal_title_wrongnetwork"),content:m("swaptrade_mid_alert_desc_vm_wallet"),errorType:v.FEE_CONFIG_ERROR}),limitRegionTips:()=>({type:"warning",title:m("swaptrade_mid_toast_title_service_suspended"),content:null,errorType:v.LIMIT_REGION_ERROR})},Wr={handleBalanceErrorState:({state:o})=>o.errorType===v.BALANCE_ERROR?M.default():"",handleQuoteErrorState:({quote:o,honeypotToken:e,hasLeverageToken:t,leverageTokenPair:r=[],shouldShowLimitRegionTip:s})=>{let{quoteError:n}=o;return s?M.limitRegionTips():n?M.quote():e?M.honeypot(e.tokenSymbol):t?M.leverageToken(r[0],r[1]):""},handleNetworkErrorState:o=>($e({type:De.SWITCH_WALLET}),M.wrongNetwork(o)),handleDefaultState:()=>M.default(),handleFeeConfigErrorState:()=>M.feeConfig(),handleFacetTokenAccountErrorState:()=>M.accountErrorTips(),handleLimitRegionErrorState:()=>M.limitRegionTips()};i();a();te();i();a();var K=(o,e)=>({networkFeeAmount:o,networkFeeTokenSymbol:e,formattedNetworkFeeAmount:o?`${qe(o)} ${e}`:"--"}),$=o=>{let{commonStore:e}=He(),{computedNowCurrencySymbol:t,currencyConversion:r}=e;return{networkFeeUsd:o,formattedNetworkFeeUsd:o?Ge(r(o).toString(),t):"--"}},ge=o=>{let{estimateGasFeeAmount:e,fromNativeTokenSymbol:t,estimateGasFeeAmountUsd:r,bridge:s,fromToken:n,toToken:l,crossChainFee:u,bridgeFeeUsd:_,toSwapFee:d,toNativeTokenSymbol:f,toSwapFeeUsd:T}=o||{},{estimateBridgeFeeAmountUsd:k,estimateBridgeFeeAmount:y,bridgeName:b,bridgeLogoUrl:R,estimateClaimFeeAmount:w,estimateClaimFeeAmountUsd:P}=s||{},L=K(u,s?.crossToToken?.tokenSymbol),Q=$(_);return{from:{chainName:n?.chainName,chainLogo:n?.chainLogoUrl,...K(e,t),...$(r)},bridge:{bridgeName:b,bridgeLogo:R,...K(y,t),...$(k),bridgeFeeAmount:L.networkFeeAmount,bridgeFeeTokenSymbol:L.networkFeeTokenSymbol,formattedBridgeFeeAmount:L.formattedNetworkFeeAmount,bridgeFeeUsd:Q.networkFeeUsd,formattedBridgeFeeUsd:Q.formattedNetworkFeeUsd},to:{chainName:l?.chainName,chainLogo:l?.chainLogoUrl,...K(d,f),...$(T)},claim:j.gt(w,0)?{chainName:m("swaptrade_bridge_reminder_token_claim_fee"),chainLogo:l?.chainLogoUrl,...K(w,f),...$(P)}:null}},Pt=()=>{let{quoteStore:o}=C(),{quote:e}=o;return ge(e?.bestRoute)},Jr=Pt;i();a();te();i();a();te();i();a();te();i();a();var V=class{constructor(e,t){c(this,"percent","");c(this,"exactPercent","");c(this,"dexRouterPercent","");Object.assign(this,t),this.dexRouterPercent=e}get computedPercent(){return this.percent?G(this.percent,{needZero:!1}):""}get computedExactPercent(){let e=j.BigNumber(this.percent).multipliedBy(this.dexRouterPercent).dividedBy(100);return e.isNaN()?"":G(e.toNumber(),{needZero:!1})}};var J=class{constructor(e,t,r){c(this,"fromToken",{});c(this,"toToken",{});c(this,"dexQuoteInfoList",[]);let{fromToken:s={},toToken:n={},dexQuoteInfoList:l}=t||{};this.fromToken=s,this.toToken=n,this.dialogHeaderText=r?A(this.toToken?.tokenSymbol):`${A(this.fromToken?.tokenSymbol)}/${A(this.toToken?.tokenSymbol)}`,H(l)&&(this.dexQuoteInfoList=l.map(u=>new V(e,u)))}};var ee=class{constructor(e,t){c(this,"percent","");c(this,"router","");c(this,"subRouterList",[]);c(this,"flag","");let{percent:r="",router:s="",flag:n="",subRouterList:l}=e||{};this.percent=r,this.router=s,this.flag=n,H(l)&&(this.subRouterList=l.map(u=>new J(r,u,t)))}get computedPercent(){return this.percent?G(this.percent,{needZero:!1}):""}};var U=class{constructor(e,t=!1){c(this,"data",[]);H(e)&&(this.data=e.map(r=>new ee(r,t)))}};var x={DEFAULT:0,LOADING:1,DISCONNECTION:2,NO_DATA:3,SHOW_DATA:4},B={DISMISS:"0",FROM:"1",BRIDGE:"2",TO:"3"},Ee={IN_CHAIN:"0",CROSS_CHAIN:"1"},me={NORMAL_PERCENT:0,EXACT_PERCENT:1},Ie=class{constructor({swapStore:e,fromToStore:t,swapDappStore:r}){c(this,"showEntryForPc",!1);c(this,"isShowShowAll",!0);c(this,"updateIsShowShowAll",(e=!1)=>{this.isShowShowAll=e});c(this,"status",x.LOADING);c(this,"percentType",me.NORMAL_PERCENT);c(this,"swapType",Ee.IN_CHAIN);c(this,"tokenInfo",{dexRouter:{token0:{},token1:{}},fromDexRouter:{token0:{},token1:{}},bridge:{token0:{},token1:{}},toDexRouter:{token0:{},token1:{}}});c(this,"dexRouterList",[]);c(this,"fromDexRouterList",[]);c(this,"toDexRouterToList",[]);c(this,"bridgeRouterList",[]);c(this,"getInfoByMenuType",e=>{if(this.swapType===Ee.IN_CHAIN)return{routerList:this.dexRouterList,tokenInfo:this.tokenInfo.dexRouter};switch(e){case B.FROM:return{routerList:this.fromDexRouterList,tokenInfo:this.tokenInfo.fromDexRouter};case B.BRIDGE:return{routerList:this.bridgeRouterList,tokenInfo:this.tokenInfo.bridge};case B.TO:return{routerList:this.toDexRouterToList,tokenInfo:this.tokenInfo.toDexRouter};default:return{routerList:[],tokenInfo:this.tokenInfo.dexRouter}}});c(this,"currentMenu",B.DISMISS);c(this,"menuList",[]);c(this,"showMenuList",!0);c(this,"isCrossBridgeOnly",!1);c(this,"showXRouteModal",ve.SWAP);c(this,"subRouterData",null);c(this,"subRouterModal",!1);c(this,"setSubRouterModal",e=>{this.subRouterModal=e});c(this,"dexQuoteInfoListData",[]);c(this,"setDexQuoteInfoListData",e=>{this.dexQuoteInfoListData=e});c(this,"oldRouterModal",!1);c(this,"allGasFee",{});this.fromToStore=t||{},this.quoteStore=e.quoteStore||{},this.swapDappStore=r||{},Oe(this,{},{autoBind:!0}),Ne(()=>({isFetchQuoting:this.quoteStore.quote?.isFetchQuoting,bestRoute:this.quoteStore.computedRouterForSmartRouterStore,quoteError:this.quoteStore.quote?.quoteError,quoteNull:this.quoteStore.quote?.quoteNull,fromToken:this.fromToStore.from,toToken:this.fromToStore.to,shouldPauseQuote:this.swapDappStore.computedSupportDappTradeByChain}),({isFetchQuoting:s,bestRoute:n,quoteError:l,quoteNull:u,shouldPauseQuote:_})=>{let d=n?Ae(n):{},f=d.commonDexInfo||{},T=_?{}:{...f,...d};this.setStatusByQuote({isFetchQuoting:s,quoteError:l,bestRoute:T,quoteNull:u,shouldPauseQuote:_}),this.updateData(T||{}),this.updateAllGasFee(T||{})},{equals:Le.shallow})}setShowEntryForPc(e){this.showEntryForPc=e}setStatus(e){let r=le(x).some(s=>s===e);this.status=r?e:x.DEFAULT}setStatusByQuote({isFetchQuoting:e,quoteError:t,bestRoute:r,quoteNull:s,shouldPauseQuote:n}){if(n){this.setStatus(x.NO_DATA);return}if(!t&&!r&&!s&&j.BigNumber(this.fromToStore?.computedTypedValue).gt(0)){this.setStatus(x.LOADING);return}if(e&&this.status!==x.SHOW_DATA&&this.status!==x.NO_DATA){this.setStatus(x.LOADING);return}if(t){this.setStatus(x.DISCONNECTION);return}if(s&&N(r?.dexRouterList)&&N(r?.fromDexRouterList)&&N(r?.bridge)&&N(r?.toDexRouterToList)){this.setStatus(x.NO_DATA);return}if(!N(r?.dexRouterList)||!N(r?.fromDexRouterList)||!N(r?.bridge)||!N(r?.toDexRouterToList)){this.setStatus(x.SHOW_DATA);return}this.setStatus(x.DEFAULT)}switchPercentType(){this.percentType=this.percentType===me.NORMAL_PERCENT?me.EXACT_PERCENT:me.NORMAL_PERCENT}setSwapType(e){this.swapType=e}updateTokenInfo(e){W(this.tokenInfo,"dexRouter",{token0:this.fromToStore.from||{},token1:this.fromToStore.to||{}}),W(this.tokenInfo,"fromDexRouter",{token0:{...p(e,"fromToken",{}),amountIn:p(e,"fromTokenAmount","")},token1:{...p(e,"fromSwapToTokenInfo",{}),amountOut:p(e,"bridge.bridgeAmountIn","")}}),W(this.tokenInfo,"bridge",{token0:this.isCrossBridgeOnly?{...p(e,"fromToken",{}),amountIn:p(e,"bridge.bridgeAmountIn","")}:{...p(e,"bridge.crossFromToken",{}),amountIn:p(e,"bridge.bridgeAmountIn","")},token1:this.isCrossBridgeOnly?{...p(e,"toToken",{}),amountOut:p(e,"bridge.bridgeAmountOut","")}:{...p(e,"bridge.crossToToken",{}),amountOut:p(e,"bridge.bridgeAmountOut","")}}),W(this.tokenInfo,"toDexRouter",{token0:{...p(e,"toSwapFromTokenInfo",{}),amountIn:p(e,"bridge.bridgeAmountOut","")},token1:{...p(e,"toToken",{}),amountOut:p(e,"receiveAmount","")}})}setDexRouterList(e){this.dexRouterList=new U(e).data}setFromDexRouterList(e){this.fromDexRouterList=new U(e).data}setToDexRouterToList(e){this.toDexRouterToList=new U(e).data}setBridgeRouterList(e,t){let r=(s={},n)=>({...s,tokenSymbol:n,fromBridge:!0});this.bridgeRouterList=new U([{percent:p(t,"percent")||"100",subRouterList:[{dexQuoteInfoList:[{dexName:p(t,"bridgeName"),percent:"100",okLinkUrl:p(t,"fromPoolAddress")}],fromToken:{},toToken:r(p(t,"crossFromToken"),p(t,"fromPoolName"))},{dexQuoteInfoList:[{dexName:p(t,"bridgeName"),percent:"100",okLinkUrl:p(t,"toPoolAddress")}],fromToken:{},toToken:r(p(t,"crossToToken"),p(t,"toPoolName"))}]}],!0).data}checkIsManyQuote(e){if(e.length>1)return!1;let t=e.length>0?p(e,[0,"subRouterList"],[]):[];return t.length>1?!1:p(t,[0,"dexQuoteInfoList","length"])>5}checkIsFewRouter(e){return e.length===1&&p(e,[0,"subRouterList","length"])<3}get computedIsFewRouter(){let{routerList:e}=this.computedCurrentRouter;return this.checkIsFewRouter(e)}get computedIsManyQuoteInfo(){let{routerList:e}=this.computedCurrentRouter;return this.checkIsManyQuote(e)}get computedCurrentRouter(){return this.getInfoByMenuType(this.currentMenu)}setCurrentMenu(e){let r=le(B).some(s=>s===e);this.currentMenu=r?e:B.DISMISS}setMenuListAndCurrentMenu(e,t,r){if(!Array.isArray(e)||N(e))this.showMenuList=!1,this.isCrossBridgeOnly=!1,this.setCurrentMenu(B.DISMISS);else{this.menuList=e.map(n=>({...n,bridge:{...r}}));let s=p(e,[0,"smartRoutingMenuType"]);(!this.showMenuList||this.currentMenu===B.DISMISS||!e.some(n=>p(n,"smartRoutingMenuType")===this.currentMenu))&&this.setCurrentMenu(s),this.isCrossBridgeOnly=e.length===1&&s===B.BRIDGE&&t===Ee.CROSS_CHAIN,this.showMenuList=!this.isCrossBridgeOnly}}updateData(e){let{swapType:t,smartRoutingMenuVoList:r,dexRouterList:s,fromDexRouterList:n,bridge:l,toDexRouterToList:u}=e;this.setSwapType(t),this.setMenuListAndCurrentMenu(r,t,l),this.setDexRouterList(s),this.setFromDexRouterList(n),this.setBridgeRouterList(e,l),this.setToDexRouterToList(u),this.updateTokenInfo(e)}setXRouteModal(e){this.showXRouteModal=e}setSubRouterData(e){this.subRouterData=e}setOldRouterModal(e){this.oldRouterModal=e}updateAllGasFee(e){this.allGasFee=ge(e)}};export{Xt as a,at as b,mt as c,_r as d,Tr as e,M as f,Wr as g,$ as h,ge as i,Jr as j,x as k,B as l,Ee as m,me as n,Ie as o};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-KLTZ3J5Y.js.map
