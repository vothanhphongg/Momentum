import{a as U,b as D,d as K}from"./chunk-EPWGNYZZ.js";import{b as c}from"./chunk-DZLXEJHX.js";import{d as j}from"./chunk-PDC447BO.js";import{La as v,Ma as w,Na as M,c as Q,i as S,vb as x}from"./chunk-HPWCPLRR.js";import{k as H,l as J}from"./chunk-3DZ7WRLL.js";import{Jc as b,Sc as X,hc as E,ic as _,rc as Z}from"./chunk-TM67VPZU.js";import{I as A,ra as z}from"./chunk-XDY6V34Y.js";import{f as q,o as s,q as n}from"./chunk-6KXF36WM.js";s();n();var P={hideNoValue:"hideNoValue",hideManualHidden:"hideManualHidden",hideUnverifiedCollection:"hideUnverifiedCollection"},d={[P.hideNoValue]:!0,[P.hideManualHidden]:!0,[P.hideUnverifiedCollection]:!1};s();n();z();s();n();var V="nft_list_filters";s();n();var I={SHOW:0,MANUAL:1,AUTO:2};function k(t){if(!t)return d;try{let e=localStorage.getItem(V);if(!e)return d;let r=JSON.parse(e);return r?r[t]??d:d}catch{return d}}var $=t=>({projectCertificated:t.hideUnverifiedCollection,hiddenStatus:[t.hideManualHidden?void 0:I.MANUAL,t.hideNoValue?void 0:I.AUTO].filter(Boolean).join(",")}),B=t=>{let e=k(t);return $(e)},mt=(t,e)=>{let r=k(t);return e?r[e]!==d[e]:!A(r,d)};s();n();J();var h=q(Q());s();n();X();Z();var R=(t,e)=>{let r=b({netWorkId:String(t.chain)})?.localType,{coinId:a,key:o}=e.get(r)??{},i="";return t.coverUrl?i=t.coverUrl:t.resourceType===1&&(i=t.resourceUrl),{...t,id:t.id,tokenId:t.tokenId,contractAddress:t.contractAddress,name:t.name,image:i,lastPrice:t.lastPrice,bestOfferPrice:t.bestOffer,salePrice:t.sale,floorPrice:t.floorPriceDetail,chain:t.chain,tokenStandard:K[t.tokenStandard]||U.UNKNOWN,isIdentification:t.certificateFlag===1,isNew:t.newNft===!0,collectionName:t.projectName,totalBalance:t.lookerNftCount,chainName:t.chainName,chainIcon:t.chainIcon,localType:r,accountAddress:t.ownerAddress,baseCoinId:a,baseCoinKey:o}},W=async({projects:t="",chainIds:e="",saleStatus:r="",pageNo:a=1,pageSize:o=10,projectCertificated:i=!0,hiddenStatus:p="",address:m=""}={})=>{let N;if(!m)N={list:[],total:0,pageNo:a,pageSize:o};else{let L;try{L=await v({address:m,project:t,chain:e,saleStatus:r,pageNo:a,pageSize:o,projectCertificated:i,hiddenStatus:p});let g=await S(),C=new Map(g.map(f=>[f.localType,f]));N={list:L?.data?.list?.map(f=>R(f,C)),total:L.data.total,pageNo:a,pageSize:o}}catch{N={list:[],total:0,pageNo:a,pageSize:o,error:!0}}}return N},Y=async({chainId:t,contractAddress:e,tokenId:r,looker:a})=>{if(!a)return{};let o;t=parseInt(t,10),t===E||t===_?o=await M({inscriptionIdProtocol:r,looker:a}):o=await w({chain:t,contractAddress:e,tokenId:r,looker:a});let i=await S(),p=new Map(i.map(m=>[m.localType,m]));return o?.data?R(o?.data,p):null};var T={list:[],total:0,pageNo:1,pageSize:D},tt={nftFilterChain:[],nftListCatch:[],computedNftCurrency:!1,testNftCurrency:100,nftFilterInfo:{collectionFilter:[],saleStatusFilter:[]},firstSet:!1,nftFilterStatus:!1,nftCollectionLoadingStatus:!1,activeId:1,nftListData:{},listLoading:!0,listLoadingError:!1,hasHiddenNft:!1},u=H({name:"Nft",initialState:tt,reducers:{setHasHiddenNft(t,{payload:e}){t.hasHiddenNft=e},setNftFilterChian(t,{payload:e}){t.nftFilterChain=e.list},setNftListCatch(t,{payload:{list:e}}){t.nftListCatch=e},setComputedNftCurrency(t,{payload:{computedNftCurrency:e}}){t.computedNftCurrency=e},setNftFilterInfo(t,{payload:e}){t.nftFilterInfo=e},setFirstSet(t,{payload:e}){t.firstSet=e},setActiveId(t,{payload:{id:e}}){t.activeId=e},setNftListData(t,{payload:{nftListData:e,walletId:r}}){t.nftListData[r]=e},setNftListLoading(t,{payload:e}){t.listLoading=e},setNftListLoadingError(t,{payload:e}){t.listLoadingError=e},setNftFilterStatus(t,{payload:{nftFilterStatus:e}}){t.nftFilterStatus=e},setNftCollectionLoadingStatus(t,{payload:{nftCollectionLoadingStatus:e}}){t.nftCollectionLoadingStatus=e},updateNftData(t,{payload:{newData:e={},walletId:r,id:a}}){t.nftListData?.[r]||(t.nftListData[r]={list:[],total:0});let o=t.nftListData[r],i=o.list.findIndex(p=>p.id===a);i!==-1?o.list[i]={id:a,...o.list[i]??{},...e}:(o.list.push({id:a,...e}),o.total+=1)},removeNftData:(t,{payload:{walletId:e,id:r}})=>{if(t.nftListData[e]){let a=t.nftListData[e],o=a.list.findIndex(i=>i.id===r);o!==-1&&(a.list.splice(o,1),a.total-=1)}}}}),bt=t=>t[u.name].hasHiddenNft;var O=(0,h.createSelector)(t=>t[u.name].nftListData,t=>x(t),(t,e)=>t[e]??T),vt=(0,h.createSelector)(t=>t[u.name].listLoading,O,(t,e)=>e===T?!0:t),wt=(0,h.createSelector)(t=>t[u.name].listLoadingError,O,(t,e)=>e===T?!1:t),Mt=t=>t[u.name].nftFilterInfo;var Ut=t=>t[u.name].activeId;var Kt=u.reducer,{actions:l}=u,G=t=>({...t,lastPrice:c(t.lastPrice),bestOfferPrice:c(t.bestOffer),salePrice:c(t.sale),floorPrice:c(t.floorPriceDetail)}),jt=l.setHasHiddenNft,Vt=l.updateNftData,kt=l.removeNftData,Bt=l.setNftFilterInfo,Rt=l.setNftListData;function Wt(t){return async(e,r)=>{let a=r(),o=x(a),{list:i}=O(a),p=B(o),{currentNetworkUniqueId:m=""}=j(a),N={projects:"",chainIds:m,pageNo:1,pageSize:D,saleStatus:"",...p},L=Object.assign(N,t);e(l.setNftListLoading(!0));let g=await W(Object.assign(N,t)),C=i.map(f=>G(f)),y=[];L.pageNo>1&&y.push(...C),g.error?e(l.setNftListLoadingError(!0)):(e(l.setNftListLoadingError(!1)),y.push(...g.list.map(f=>G(f)))),e(l.setNftListData({nftListData:{list:y,total:g.total,pageNo:L.pageNo,pageSize:L.pageSize},walletId:o})),e(l.setNftListLoading(!1))}}function Yt(t){return t.metamask.preferences.showNftAmount}async function Gt(t){let e=await Y(t);return e?(e.lastPrice&&(e.lastPrice=c(e?.lastPrice)),e.salePrice&&(e.salePrice=c(e?.salePrice)),e.bestOfferPrice&&(e.bestOfferPrice=c(e?.bestOfferPrice)),e.floorPriceDetail&&(e.floorPriceDetail=c(e?.floorPriceDetail)),e):{}}export{V as a,P as b,d as c,I as d,k as e,$ as f,mt as g,bt as h,O as i,vt as j,wt as k,Mt as l,Ut as m,Kt as n,l as o,jt as p,Vt as q,kt as r,Bt as s,Rt as t,Wt as u,Yt as v,Gt as w};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-ELJJJNTC.js.map
