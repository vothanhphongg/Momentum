import{a as L,g as c,h as u}from"./chunk-QKB6RADR.js";import"./chunk-DTLEDHZZ.js";import"./chunk-AKQ365VJ.js";import"./chunk-PTML5W4O.js";import"./chunk-YXB345S6.js";import{a as E}from"./chunk-QR4O7ZB4.js";import"./chunk-M35OA6FM.js";import"./chunk-FOMGS2C4.js";import"./chunk-JCM7SRK2.js";import"./chunk-D2LKUI4F.js";import"./chunk-ON6S2DB7.js";import{a as l,b as D}from"./chunk-YOPEZ2F5.js";import"./chunk-6BXYJZHH.js";import"./chunk-CCEMKRO6.js";import"./chunk-2HSCH6R3.js";import"./chunk-CWNIM6RS.js";import"./chunk-NNAD25BL.js";import"./chunk-XV444F26.js";import{q as S,sa as I}from"./chunk-N2BCRNDB.js";import"./chunk-JGEHAFTO.js";import"./chunk-UVFOW4HH.js";import"./chunk-CB7FOZNP.js";import"./chunk-43VURGIT.js";import{kb as s,ma as g,qa as A,rc as F}from"./chunk-TM67VPZU.js";import"./chunk-VW6OQNWT.js";import"./chunk-PUSMMCUD.js";import"./chunk-UWJLNJLY.js";import"./chunk-VRY2ADKE.js";import"./chunk-VWEB6W6G.js";import"./chunk-XDY6V34Y.js";import"./chunk-JT3LNHPY.js";import"./chunk-47UWF72W.js";import"./chunk-JWYCKY2V.js";import"./chunk-G2266BV2.js";import"./chunk-UT7LJPKF.js";import"./chunk-WOMUNWBT.js";import"./chunk-TP2YHJLZ.js";import"./chunk-QYVQBXDG.js";import"./chunk-7D4PUIEN.js";import"./chunk-7QO4TZYQ.js";import"./chunk-MIBHDVGP.js";import"./chunk-7VFUX7IX.js";import"./chunk-XLF4LAH2.js";import"./chunk-ONKZ57T6.js";import"./chunk-ZC7Q7LCH.js";import{f as y,h as T,o as M,p,q as w}from"./chunk-6KXF36WM.js";M();w();var o=y(L()),d=y(I());A();F();var f=class{constructor(){T(this,"signTransaction",async(t,e,n)=>{e=E(e);let r=await l(e),a=r.getMessageToSign(!1),i=p.Buffer.isBuffer(a)?a.toString("hex"):d.rlp.encode(a).toString("hex"),{type:h,chainId:P}=e,q={path:t.hdPathMap[s],chainId:P,requestId:g().toLowerCase(),signData:i,dataType:h===S.FEE_MARKET?o.KeystoneEthereumSDK.DataType.typedTransaction:o.KeystoneEthereumSDK.DataType.transaction,xfp:t.masterFingerprint},C=await u.openModal(c.showTxParams,{signRequest:q,baseChain:s}),m=p.Buffer.from(C,"hex"),R=m.slice(0,32),b=m.slice(32,64),N=m.slice(64),x=await D(r,{r:R,s:b,v:N});return n?x:{rawTxResult:x}});T(this,"signTypedData",async(t,e)=>{let n=t.hdPathMap[s];if(!["V4","V3"].includes(e.version))throw new Error("this version of typed data signing is no't supported");let a=p.Buffer.from(e.data,"utf-8"),i={path:n,requestId:g().toLowerCase(),signData:a,dataType:o.KeystoneEthereumSDK.DataType.typedData,xfp:t.masterFingerprint};return`0x${await u.openModal(c.showTxParams,{signRequest:i,baseChain:s})}`})}async signPersonalMessage(t,e){let n=t.hdPathMap[s],r=(0,d.stripHexPrefix)(e.data),a={path:n,requestId:g().toLowerCase(),signData:r,dataType:o.KeystoneEthereumSDK.DataType.personalMessage,xfp:t.masterFingerprint};return`0x${await u.openModal(c.showTxParams,{signRequest:a,baseChain:s})}`}},$=new f;export{$ as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=ethAdapter-S7KB5TNE.js.map
