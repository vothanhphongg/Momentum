import{b as f}from"./chunk-2HSCH6R3.js";import{c as n}from"./chunk-N2BCRNDB.js";import{Ea as l,Na as q,ma as d,qa as A,ya as y,za as b}from"./chunk-TM67VPZU.js";import{b as P}from"./chunk-JWYCKY2V.js";import{f as E,o as a,q as i}from"./chunk-6KXF36WM.js";a();i();var _={CAN:"1",CANT:"0"},h={EVM:"0"},L={init:"INIT",loading:"LOADING",success:"SUCCESS",failed:"FAILED"},U=(c,o)=>c?.uniqueId===o?.uniqueId;a();i();var u=E(P());A();b();a();i();async function M(c){try{return(await(await Promise.resolve(n.rpc_networks)).query(c)||[]).sort((w,m)=>w.order-m.order)}catch{return[]}}async function S(c){try{return await(await Promise.resolve(n.rpc_networks)).delete(c),!0}catch{return!1}}q();var I=c=>{let o={...c};return o?.chainId.startsWith("0x")||(o.chainId=`0x${f(o.chainId)}`),o};var X=()=>{let[c,o]=(0,u.useState)("loading"),[N,w]=(0,u.useState)({rpcNetworks:[],customNets:[],defaultNets:[]}),m=async e=>{let t=e,s=Number.parseInt(t.chainId,16);try{let{data:r}=await l(y.getRpcNetworkByChainId,{chainIds:[s]});if(Array.isArray(r)){let p=r.find(v=>v.chainId===s);t.faucetUrl=p?.faucets?.[0]||""}}catch{t.faucetUrl=""}return t},k=e=>{let t=e.filter(r=>r.isCustom),s=e.filter(r=>!r.isCustom).sort((r,p)=>r.order-p.order);return{rpcNetworks:[...s,...t],customNets:t,defaultNets:s}},C=async e=>{try{let t=await Promise.resolve(n.rpc_networks),s={...e,uniqueId:e.uniqueId||d(),type:h.EVM,isCustom:!0},r=await m(I(s));return await t.set(r),r}catch{return{}}},T=async e=>{try{let t=await Promise.resolve(n.rpc_networks),s=await m(I(e));return await t.get(e.uniqueId)&&await t.set(s),s}catch{return{}}},x=async e=>{try{let s=await(await Promise.resolve(n.rpc_networks)).query(e);w(k(s)),o("success")}catch{o("failed")}},g=async e=>{try{await S(e.uniqueId)}catch(t){console.log(t)}};return(0,u.useEffect)(()=>{let e;return(async()=>(await x({}),e=(await Promise.resolve(n.rpc_networks)).liveQuery().subscribe((s,r)=>{if(!r){let p=k(s);w(p),o("success")}})))(),()=>{e&&e?.unsubscribe()}},[]),{addRpcNetwork:C,updateRpcNetwork:T,deleteRpcNetwork:g,status:c,...N}};export{_ as a,L as b,U as c,M as d,X as e};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-XIYLMV6I.js.map
