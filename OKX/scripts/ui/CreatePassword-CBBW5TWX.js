import{b as ve}from"./chunk-N2SRRBHC.js";import{b as Ne,c as Le,d as We,e as Fe}from"./chunk-K7CEH6LH.js";import{d as Ue}from"./chunk-SRCBMK3B.js";import{a as B,b as Oe}from"./chunk-4EEXXMXA.js";import"./chunk-KN7FYSHN.js";import"./chunk-AQOCVER4.js";import"./chunk-S7NLB5XS.js";import{a as Be}from"./chunk-UUWJWUOY.js";import{b as ue,c as de,d as fe,e as we,f as ge,g as _e,l as Pe,m as Ee,n as he,o as be}from"./chunk-J4ZNYN2W.js";import"./chunk-UIZERJWY.js";import"./chunk-N4CUQAO7.js";import{a as Ae,b as Se}from"./chunk-X4AGSDQV.js";import{Aa as Y,l as se}from"./chunk-KLLSVAFY.js";import"./chunk-KBS3PMLQ.js";import"./chunk-7GKX3YKG.js";import"./chunk-IRMYAC6R.js";import"./chunk-Q76QXAWY.js";import"./chunk-THSNJ5WU.js";import"./chunk-JCM7SRK2.js";import{c as Me}from"./chunk-Y2TZQZGL.js";import"./chunk-4FBPDXIS.js";import{a as xe}from"./chunk-ZV5BZTW2.js";import"./chunk-3NWEQ7OH.js";import{c as Re,f as ke,g as z,h as G}from"./chunk-YDPPVPLV.js";import"./chunk-GCXGJXXN.js";import"./chunk-U4JANCGD.js";import"./chunk-SNHC6HKE.js";import"./chunk-UBFC7TLG.js";import{j as ae,k as ne,l as ie,m as me}from"./chunk-XKL64FTO.js";import"./chunk-PTD7UCOR.js";import"./chunk-Q4YTGP2G.js";import"./chunk-ETJEH7T4.js";import"./chunk-LLZAOPDB.js";import{a as ye}from"./chunk-V3IFYKWM.js";import"./chunk-EWTTD4DL.js";import"./chunk-Y2TPPS4H.js";import{h as Ce,i as Ie}from"./chunk-ITY22AD4.js";import"./chunk-E2JYOUYE.js";import"./chunk-B3JSNQIV.js";import{G as pe,Za as ce,a as x}from"./chunk-YALUYHLV.js";import"./chunk-I3CPAVOC.js";import"./chunk-ARWSGU73.js";import"./chunk-CZ2ZBAZV.js";import{o as le}from"./chunk-5QMHGZLF.js";import{ec as Te,yb as re}from"./chunk-HPWCPLRR.js";import"./chunk-O6ZBO5JF.js";import"./chunk-TSTPZ3JM.js";import"./chunk-D2LKUI4F.js";import{a as mo}from"./chunk-ON6S2DB7.js";import"./chunk-SZD6WTBQ.js";import"./chunk-ASR4HLU7.js";import"./chunk-ANIUN6US.js";import{m as te,r as io}from"./chunk-3DZ7WRLL.js";import{d as oe,f as no}from"./chunk-DEOJU4Z3.js";import"./chunk-PLIIQKFY.js";import"./chunk-XV444F26.js";import"./chunk-N2BCRNDB.js";import"./chunk-RTFE54S3.js";import"./chunk-GCQ4H2BA.js";import"./chunk-UVFOW4HH.js";import"./chunk-LNOPECCQ.js";import"./chunk-CB7FOZNP.js";import"./chunk-43VURGIT.js";import{B as Q,H as so,ia as J,ka as X,qa as ao,v as Z}from"./chunk-TM67VPZU.js";import"./chunk-VW6OQNWT.js";import{D as T,H as ee,q as k}from"./chunk-PUSMMCUD.js";import{R as j,z as d}from"./chunk-UWJLNJLY.js";import"./chunk-VRY2ADKE.js";import"./chunk-5U7FO2PW.js";import"./chunk-PDUOSATP.js";import{H as q,ra as ro}from"./chunk-XDY6V34Y.js";import"./chunk-YJFNO57I.js";import"./chunk-DZ6CTC22.js";import{ea as R}from"./chunk-JT3LNHPY.js";import"./chunk-47UWF72W.js";import{b as V}from"./chunk-JWYCKY2V.js";import"./chunk-G2266BV2.js";import"./chunk-L4PAIYPH.js";import"./chunk-UT7LJPKF.js";import"./chunk-AFZ6A2B3.js";import"./chunk-VVPY7ZA7.js";import"./chunk-KUW5VATV.js";import"./chunk-BNAVWOJ2.js";import"./chunk-IG2Q5ALZ.js";import"./chunk-WOMUNWBT.js";import"./chunk-7U3DN5ZD.js";import"./chunk-QYVQBXDG.js";import"./chunk-7D4PUIEN.js";import"./chunk-7QO4TZYQ.js";import"./chunk-FF4LY6PE.js";import"./chunk-76KCDJDG.js";import"./chunk-YDUDQP2P.js";import"./chunk-PGPFV4JQ.js";import"./chunk-MIBHDVGP.js";import"./chunk-7VFUX7IX.js";import"./chunk-XLF4LAH2.js";import"./chunk-ONKZ57T6.js";import"./chunk-ZC7Q7LCH.js";import{f as _,o as s,q as a}from"./chunk-6KXF36WM.js";s();a();var P=_(V()),U=_(Te()),N=_(le());ro();j();s();a();s();a();var lo=()=>()=>Promise.resolve(!1),De=lo;var He=De;no();s();a();var C=_(V()),O=_(Te()),Ke=_(mo());function qe(){let n=(0,O.useDispatch)(),t=(0,Ke.useHistory)(),i=(0,O.useSelector)(re),[m,r]=(0,C.useState)(!1);return(0,C.useEffect)(()=>{i&&!m&&t.push(x)},[i,m,t,n]),(0,C.useCallback)(()=>{r(!0)},[])}ao();s();a();var Ve=n=>{let{onboardingTabs:t}=n.metamask;if(!t||Object.keys(t).length!==1)return null;let i=Object.keys(t)[0],m=t[i];return{location:i,tabId:m}};so();io();s();a();var c=_(V());j();var Ye=({onSubmit:n,formClass:t,itemClass:i,formErrorClass:m,setFormValues:r,bulkButtonStyle:L={},disabled:W,loading:F,showConfirm:o=!0,showForgetPassword:E=!1,showPasswordIndicator:h=!0,forgetPwdFrom:v="",forgetPasswordPath:b})=>{let A=T.useForm();return c.default.createElement(T,{form:A,size:R.SIZE.lg,onSubmit:n,validateTrigger:["onChange"],className:t,errorClassName:m,onValuesChange:(w,g)=>{r(g)}},c.default.createElement(T.Item,{name:"password",style:{marginBottom:"0px"},className:i},c.default.createElement(k.Password,{autoFocus:!0,autoComplete:"off",inputClassName:B.passwordInput,size:k.SIZE.xl,placeholder:d("wallet_set_password_maintitle_enter_password")})),h&&c.default.createElement(T.Item,{noStyle:!0,shouldUpdate:(w,g)=>w.password!==g.password},({getFieldValue:w})=>{let g=w("password");return c.default.createElement(Se,{password:g})}),o&&c.default.createElement(T.Item,{name:"confirmPassword",style:{flex:1,margin:"16px 0px 0px"},dependencies:["password"],className:i,rules:[({getFieldValue:w})=>({validator:(g,S)=>{let D=w("password");return S&&D!==S?Promise.reject(d("wallet_set_password_errortip_password_not_match")):Promise.resolve()}})]},c.default.createElement(k.Password,{autoComplete:"off",inputClassName:B.passwordInput,size:k.SIZE.xl,placeholder:d("wallet_set_password_input_reenter")})),E&&c.default.createElement(Me,{className:B.forgot,from:v,replace:!0,path:b}),c.default.createElement(ye.FooterActions,{affixStyle:L,renderNative:!0,buttonGroup:[{loading:F,disabled:W,block:!0,type:R.TYPE.highlight,category:R.CATEGORY.fill,size:R.SIZE.lg,onClick:n,btnText:d("wallet_set_password_btn_confirm")}]}))};s();a();var ze=_(le());function po(n=""){let t=n==="create"?"create_wallet":"import_wallet";return(0,ze.useMount)(()=>{try{ke({source:t,platform:z(),tg_platform:G()})}catch{}}),{confirmMonitor:m=>{try{Re({platform:z(),tg_platform:G(),is_biometrics_enabled:m?"yes":"no",source:t})}catch{}}}}var Ge=po;var f={SEED:"seed",KEY:"key",HARDWARE:"hardware",CREATE:"create",MPC:"mpc",BULK:"bulk"},gt=({history:n})=>{let t=Be(),[i,{set:m}]=(0,N.useBoolean)(!1),[r,L]=(0,P.useState)({}),W=Fe(),F=He(),o=(0,U.useDispatch)(),{seedPhrase:E,privateKey:h,mpcInfo:v,unlockHardwareWallets:b,chooseNetworkList:A,isTonMnemonic:w}=(0,U.useSelector)(e=>({seedPhrase:ue(e),privateKey:de(e),mpcInfo:we(e),unlockHardwareWallets:fe(e),chooseNetworkList:ge(e),onboardingInitiator:Ve(e),isTonMnemonic:_e(e)})),g=J()===Q?"telegram":"extension",S=qe(),D=We(),H=t.get("from"),$e=H===f.HARDWARE,je=Le(),M=H===f.BULK,{setValue:Ze}=Ue(),{confirmMonitor:Qe}=Ge(H),I=async(e,l)=>{try{o(ve(!0)).then(async()=>{if(S(),await o(xe()),D(e))return;if(e===f.CREATE){je();return}let u=`${pe}/${e}`,{keyringName:K="",walletName:p=""}=l||{},to=`${K}-${p}`;if(e===f.HARDWARE&&X()===Z){globalThis.platform.openExtensionInPopup(`${u}?anim=1`);return}n.push({pathname:u,state:{walletName:to,anim:"1",next:x}})}).catch(()=>{})}catch{}},$=P.default.useMemo(()=>{let{password:e,confirmPassword:l}=r;return!(e?.length>=Ae&&e===l)},[i,h,E,b,r]),Je=(0,N.useMemoizedFn)(async()=>{if(Y(),E){let p=await o(ne(r.password,{mnemonic:E?.trim().toLowerCase().match(/\w+/gu)?.join(" ")||"",isTonMnemonic:w}));I(f.SEED,p),o(Pe())}if(h){let p=await o(ie(r.password,{privateKey:h,baseChains:A}));I(f.KEY,p),o(Ee())}if(M){Ze(r.password),n.push(ce);return}let{cipherText:e,privateKey:l,mpcId:u,userInfo:K}=v;if(e&&l&&u){let p=await o(me(r.password,{cipherText:e,privateKey:l},{mpcId:u,userInfo:K},!0));I(f.MPC,p),o(be())}if(!q(b)){await oe().setPassword(r.password,!0);let p=await o(Ne(b));I(f.HARDWARE,p),o(he())}if(!E&&!h&&!(e&&l&&u)&&q(b)){let p=await o(ae(r.password));I(f.CREATE,p)}},[$,r,E,h,A]),Xe=()=>W(r?.password),eo=async()=>{m(!0),Qe(),Y();let e=await F();try{e?await Xe():(await Je(),o(Ce(1)),o(Ie(void 0)),se({button_name:"password",platform:g}))}catch(l){l.message===te&&ee.error(d("wallet_home_toast_network_error"))}finally{m(!1)}};(0,P.useEffect)(()=>{if(M){let e=document.querySelector("#app");e&&(e.classList.remove("fullscreen"),e.classList.add("popup"))}return()=>{if(M){let e=document.querySelector("#app");e&&(e.classList.remove("popup"),e.classList.add("fullscreen"))}}},[]);let oo=M?{position:"absolute",bottom:0,left:0}:{};return P.default.createElement(Oe,{title:d("wallet_signup_maintitle_set_password"),desc:d($e?"wallet_extension_signup_subtitle_set_password_hardware":"wallet_extension_subtitle_password_unlock")},({formClass:e,formErrorClass:l,itemClass:u})=>P.default.createElement(Ye,{onSubmit:eo,formClass:e,itemClass:u,formErrorClass:l,setFormValues:L,bulkButtonStyle:oo,disabled:$,loading:i}))};export{gt as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=CreatePassword-CBBW5TWX.js.map
