import{a as ye,b as de,c as Rt,d as q}from"./chunk-VDODWXUE.js";import{a as Ls}from"./chunk-FOMGS2C4.js";import{c as m,o as a,p,q as c}from"./chunk-6KXF36WM.js";var Ce=m(A=>{"use strict";a();c();Object.defineProperty(A,"__esModule",{value:!0});A.accountClassHash=A.ProxyAccountClassHash=A.ETHBridge=A.ETH=A.UDC=A.TransactionHashPrefix=A.StarknetChainId=A.NetworkName=A.API_VERSION=A.MASK_251=A.MASK_250=A.ZERO=void 0;A.ZERO=0n;A.MASK_250=2n**250n-1n;A.MASK_251=2n**251n;A.API_VERSION=A.ZERO;var Bs;(function(e){e.SN_MAIN="SN_MAIN",e.SN_GOERLI="SN_GOERLI",e.SN_GOERLI2="SN_GOERLI2"})(Bs=A.NetworkName||(A.NetworkName={}));var Rs;(function(e){e.SN_MAIN="0x534e5f4d41494e",e.SN_GOERLI="0x534e5f474f45524c49",e.SN_GOERLI2="0x534e5f474f45524c4932",e.SN_SEPOLIA="0x534e5f5345504f4c4941"})(Rs=A.StarknetChainId||(A.StarknetChainId={}));var Ks;(function(e){e.DECLARE="0x6465636c617265",e.DEPLOY="0x6465706c6f79",e.DEPLOY_ACCOUNT="0x6465706c6f795f6163636f756e74",e.INVOKE="0x696e766f6b65",e.L1_HANDLER="0x6c315f68616e646c6572"})(Ks=A.TransactionHashPrefix||(A.TransactionHashPrefix={}));A.UDC={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"};A.ETH="0x049d36570d4e46f48e99674bd3fcc84644ddd6b96f7c741b1562b82f9e004dc7";A.ETHBridge="0x073314940630fd6dcda0d772d4c972c4e0a9946bef9dabf4ef84eda8ef542b82";A.ProxyAccountClassHash="0x3530cc4759d78042f1b543bf797f5f3d647cde0388c33734cf91b7f7b9314a9";A.accountClassHash="0x309c042d3729173c7f2f91a34f04d8c509c1b292d334679ef1aabf8da0899cc"});var Kt=m(or=>{"use strict";a();c();Object.defineProperty(or,"__esModule",{value:!0});or.SignerInterface=void 0;var Gr=class{};or.SignerInterface=Gr});var ie=m(ar=>{"use strict";a();c();Object.defineProperty(ar,"__esModule",{value:!0});ar.starkCurve=void 0;var $s=ye();ar.starkCurve=$s.signUtil.schnorr.stark});var oe=m(x=>{"use strict";a();c();Object.defineProperty(x,"__esModule",{value:!0});x.decodeShortString=x.encodeShortString=x.splitLongString=x.isLongText=x.isShortText=x.isText=x.isDecimalString=x.isShortString=x.isASCII=void 0;var $t=de(),Wr=q(),Ut=31;function Xr(e){return/^[\x00-\x7F]*$/.test(e)}x.isASCII=Xr;function cr(e){return e.length<=Ut}x.isShortString=cr;function Vt(e){return/^[0-9]*$/i.test(e)}x.isDecimalString=Vt;function Yr(e){return typeof e=="string"&&!(0,Wr.isHex)(e)&&!(0,Wr.isStringWholeNumber)(e)}x.isText=Yr;var Us=e=>Yr(e)&&cr(e);x.isShortText=Us;var Vs=e=>Yr(e)&&!cr(e);x.isLongText=Vs;function Fs(e){let r=RegExp(`[^]{1,${Ut}}`,"g");return e.match(r)||[]}x.splitLongString=Fs;function ks(e){if(!Xr(e))throw new Error(`${e} is not an ASCII string`);if(!cr(e))throw new Error(`${e} is too long`);return(0,$t.addHexPrefix)(e.replace(/./g,r=>r.charCodeAt(0).toString(16)))}x.encodeShortString=ks;function Ft(e){if(!Xr(e))throw new Error(`${e} is not an ASCII string`);if((0,Wr.isHex)(e))return(0,$t.removeHexPrefix)(e).replace(/.{2}/g,r=>String.fromCharCode(parseInt(r,16)));if(Vt(e))return Ft("0X".concat(BigInt(e).toString(16)));throw new Error(`${e} is not Hex or decimal`)}x.decodeShortString=Ft});var Jr=m(U=>{"use strict";a();c();Object.defineProperty(U,"__esModule",{value:!0});U.bnToUint256=U.isUint256=U.UINT_256_MAX=U.UINT_128_MAX=U.uint256ToBN=void 0;var kt=de(),ur=q();function Gs(e){return((0,ur.toBigInt)(e.high)<<128n)+(0,ur.toBigInt)(e.low)}U.uint256ToBN=Gs;U.UINT_128_MAX=(1n<<128n)-1n;U.UINT_256_MAX=(1n<<256n)-1n;function Gt(e){return(0,ur.toBigInt)(e)<=U.UINT_256_MAX}U.isUint256=Gt;function Ws(e){let r=(0,ur.toBigInt)(e);if(!Gt(r))throw new Error("Number is too large");return{low:(0,kt.addHexPrefix)((r&U.UINT_128_MAX).toString(16)),high:(0,kt.addHexPrefix)((r>>128n).toString(16))}}U.bnToUint256=Ws});var be=m(w=>{"use strict";a();c();Object.defineProperty(w,"__esModule",{value:!0});w.felt=w.tuple=w.uint256=w.isTypeStruct=w.isTypeNamedTuple=w.isTypeTuple=w.isTypeArray=w.isTypeFeltArray=w.isTypeFelt=w.isLen=void 0;var Zr=q(),zr=oe(),Wt=Jr(),Xs=e=>/_len$/.test(e);w.isLen=Xs;var Ys=e=>e==="felt";w.isTypeFelt=Ys;var Js=e=>e==="felt*";w.isTypeFeltArray=Js;var Zs=e=>/\*/.test(e);w.isTypeArray=Zs;var zs=e=>/^\(.*\)$/i.test(e);w.isTypeTuple=zs;var Qs=e=>/\(.*\)/i.test(e)&&e.includes(":");w.isTypeNamedTuple=Qs;var ei=(e,r)=>e in r;w.isTypeStruct=ei;var ri=e=>{let r=BigInt(e);if(!(0,Wt.isUint256)(r))throw new Error("Number is too large");return{low:(r&Wt.UINT_128_MAX).toString(10),high:(r>>128n).toString(10)}};w.uint256=ri;var ti=(...e)=>({...e});w.tuple=ti;function ni(e){if((0,Zr.isBigInt)(e)||typeof e=="number"&&Number.isInteger(e))return e.toString();if((0,zr.isText)(e)){if(!(0,zr.isShortString)(e))throw new Error(`${e} is a long string > 31 chars, felt can store short strings, split it to array of short strings`);let r=(0,zr.encodeShortString)(e);return BigInt(r).toString()}if(typeof e=="string"&&(0,Zr.isHex)(e))return BigInt(e).toString();if(typeof e=="string"&&(0,Zr.isStringWholeNumber)(e))return e;throw new Error(`${e} can't be computed by felt()`)}w.felt=ni});var Fe=m(L=>{"use strict";a();c();Object.defineProperty(L,"__esModule",{value:!0});L.extractSignificantDigits=L.toSafeNumberOrThrow=L.getUnsafeNumberReason=L.UnsafeNumberReason=L.isSafeNumber=L.isNumber=L.isInteger=void 0;function et(e){return si.test(e)}L.isInteger=et;var si=/^-?[0-9]+$/;function ii(e){return oi.test(e)}L.isNumber=ii;var oi=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function Xt(e,r){let t=parseFloat(e),n=String(t),s=Qr(e),i=Qr(n);return!!(s===i||r?.approx===!0&&!et(e)&&i.length>=14&&s.startsWith(i.substring(0,14)))}L.isSafeNumber=Xt;var Pe;(function(e){e.underflow="underflow",e.overflow="overflow",e.truncate_integer="truncate_integer",e.truncate_float="truncate_float"})(Pe=L.UnsafeNumberReason||(L.UnsafeNumberReason={}));function Yt(e){if(Xt(e,{approx:!1}))return;if(et(e))return Pe.truncate_integer;let r=parseFloat(e);return isFinite(r)?r===0?Pe.underflow:Pe.truncate_float:Pe.overflow}L.getUnsafeNumberReason=Yt;function ai(e,r){let t=parseFloat(e),n=Yt(e);if(r?.approx===!0?n&&n!==Pe.truncate_float:n){let s=n.replace(/_\w+$/,"");throw new Error(`Cannot safely convert to number: the value '${e}' would ${s} and become ${t}`)}return t}L.toSafeNumberOrThrow=ai;function Qr(e){return e.replace(ci,"").replace(li,"").replace(di,"").replace(ui,"")}L.extractSignificantDigits=Qr;var ci=/[eE][+-]?\d+$/,ui=/^-?(0*)?/,li=/\./,di=/0+$/});var dr=m(fe=>{"use strict";a();c();Object.defineProperty(fe,"__esModule",{value:!0});fe.toLosslessNumber=fe.isLosslessNumber=fe.LosslessNumber=void 0;var ke=Fe(),lr=class{constructor(r){if(this.isLosslessNumber=!0,!(0,ke.isNumber)(r))throw new Error('Invalid number (value: "'+r+'")');this.value=r}valueOf(){let r=(0,ke.getUnsafeNumberReason)(this.value);if(r===void 0||r===ke.UnsafeNumberReason.truncate_float)return parseFloat(this.value);if((0,ke.isInteger)(this.value))return BigInt(this.value);throw new Error(`Cannot safely convert to number: the value '${this.value}' would ${r} and become ${parseFloat(this.value)}`)}toString(){return this.value}};fe.LosslessNumber=lr;function fi(e){return e&&typeof e=="object"&&e.isLosslessNumber===!0||!1}fe.isLosslessNumber=fi;function gi(e){if((0,ke.extractSignificantDigits)(e+"").length>15)throw new Error(`Invalid number: contains more than 15 digits and is most likely truncated and unsafe by itself (value: ${e})`);if(isNaN(e))throw new Error("Invalid number: NaN");if(!isFinite(e))throw new Error("Invalid number: "+e);return new lr(String(e))}fe.toLosslessNumber=gi});var rt=m(Oe=>{"use strict";a();c();Object.defineProperty(Oe,"__esModule",{value:!0});Oe.parseNumberAndBigInt=Oe.parseLosslessNumber=void 0;var pi=dr(),hi=Fe();function mi(e){return new pi.LosslessNumber(e)}Oe.parseLosslessNumber=mi;function _i(e){return(0,hi.isInteger)(e)?BigInt(e):parseFloat(e)}Oe.parseNumberAndBigInt=_i});var Jt=m(fr=>{"use strict";a();c();Object.defineProperty(fr,"__esModule",{value:!0});fr.revive=void 0;var yi=dr();function bi(e,r){return tt({"":e},"",e,r)}fr.revive=bi;function tt(e,r,t,n){return Array.isArray(t)?n.call(e,r,Ei(t,n)):t&&typeof t=="object"&&!(0,yi.isLosslessNumber)(t)?n.call(e,r,Si(t,n)):n.call(e,r,t)}function Si(e,r){return Object.keys(e).forEach(t=>{let n=tt(e,t,e[t],r);n!==void 0?e[t]=n:delete e[t]}),e}function Ei(e,r){for(let t=0;t<e.length;t++)e[t]=tt(e,t+"",e[t],r);return e}});var tn=m(v=>{"use strict";a();c();Object.defineProperty(v,"__esModule",{value:!0});v.codeLowercaseF=v.codeUppercaseF=v.codeLowercaseE=v.codeUppercaseE=v.codeLowercaseA=v.codeUppercaseA=v.isDeepEqual=v.isValidStringCharacter=v.parse=void 0;var Ti=rt(),Ai=Jt();function vi(e,r,t=Ti.parseLosslessNumber){let n=0,s=u();return X(s),_e(),r?(0,Ai.revive)(s,r):s;function i(){if(e.charCodeAt(n)===Ni){n++,l();let b={},N=!0;for(;n<e.length&&e.charCodeAt(n)!==zt;){N?N=!1:(O(),l());let se=n,Ve=h();if(Ve===void 0)throw new SyntaxError(`Quoted object key expected ${J()}`);l(),D();let kr=u();kr===void 0&&Ds(),Object.prototype.hasOwnProperty.call(b,Ve)&&!hr(kr,b[Ve])&&Ns(Ve,se+1),b[Ve]=kr}return e.charCodeAt(n)!==zt&&xs(),n++,b}}function o(){if(e.charCodeAt(n)===xi){n++,l();let b=[],N=!0;for(;n<e.length&&e.charCodeAt(n)!==Qt;){N?N=!1:O();let se=u();Y(se),b.push(se)}return e.charCodeAt(n)!==Qt&&Hs(),n++,b}}function u(){l();let b=h()??_()??i()??o()??f("true",!0)??f("false",!1)??f("null",null);return l(),b}function f(b,N){if(e.slice(n,n+b.length)===b)return n+=b.length,N}function l(){for(;Ci(e.charCodeAt(n));)n++}function h(){if(e.charCodeAt(n)===nt){n++;let b="";for(;n<e.length&&e.charCodeAt(n)!==nt;){if(e.charCodeAt(n)===wi){let N=e[n+1],se=Oi[N];se!==void 0?(b+=se,n++):N==="u"?gr(e.charCodeAt(n+2))&&gr(e.charCodeAt(n+3))&&gr(e.charCodeAt(n+4))&&gr(e.charCodeAt(n+5))?(b+=String.fromCharCode(parseInt(e.slice(n+2,n+6),16)),n+=5):js(n):Ms(n)}else rn(e.charCodeAt(n))?b+=e[n]:Is(e[n]);n++}return ir(),n++,b}}function _(){let b=n;if(e.charCodeAt(n)===en&&(n++,ve(b)),e.charCodeAt(n)===st)n++;else if(Pi(e.charCodeAt(n)))for(n++;pr(e.charCodeAt(n));)n++;if(e.charCodeAt(n)===Bi)for(n++,ve(b);pr(e.charCodeAt(n));)n++;if(e.charCodeAt(n)===v.codeLowercaseE||e.charCodeAt(n)===v.codeUppercaseE)for(n++,(e.charCodeAt(n)===en||e.charCodeAt(n)===ji)&&n++,ve(b);pr(e.charCodeAt(n));)n++;if(n>b)return t(e.slice(b,n))}function O(){if(e.charCodeAt(n)!==Li)throw new SyntaxError(`Comma ',' expected after value ${J()}`);n++}function D(){if(e.charCodeAt(n)!==Ri)throw new SyntaxError(`Colon ':' expected after property name ${J()}`);n++}function X(b){if(b===void 0)throw new SyntaxError(`JSON value expected ${J()}`)}function Y(b){if(b===void 0)throw new SyntaxError(`Array item expected ${J()}`)}function _e(){if(n<e.length)throw new SyntaxError(`Expected end of input ${J()}`)}function ve(b){if(!pr(e.charCodeAt(n))){let N=e.slice(b,n);throw new SyntaxError(`Invalid number '${N}', expecting a digit ${J()}`)}}function ir(){if(e.charCodeAt(n)!==nt)throw new SyntaxError(`End of string '"' expected ${J()}`)}function mc(){throw new SyntaxError(`Quoted object key expected ${J()}`)}function Ns(b,N){throw new SyntaxError(`Duplicate key '${b}' encountered at position ${N}`)}function xs(){throw new SyntaxError(`Quoted object key or end of object '}' expected ${J()}`)}function Hs(){throw new SyntaxError(`Array item or end of array ']' expected ${J()}`)}function Is(b){throw new SyntaxError(`Invalid character '${b}' ${Ue()}`)}function Ms(b){let N=e.slice(b,b+2);throw new SyntaxError(`Invalid escape character '${N}' ${Ue()}`)}function Ds(){throw new SyntaxError(`Object value expected after ':' ${Ue()}`)}function js(b){let N=b+2;for(;/\w/.test(e[N]);)N++;let se=e.slice(b,N);throw new SyntaxError(`Invalid unicode character '${se}' ${Ue()}`)}function Ue(){return`at position ${n}`}function qs(){return n<e.length?`but got '${e[n]}'`:"but reached end of input"}function J(){return qs()+" "+Ue()}}v.parse=vi;function Ci(e){return e===Hi||e===Ii||e===Mi||e===Di}function gr(e){return e>=st&&e<=it||e>=v.codeUppercaseA&&e<=v.codeUppercaseF||e>=v.codeLowercaseA&&e<=v.codeLowercaseF}function pr(e){return e>=st&&e<=it}function Pi(e){return e>=qi&&e<=it}function rn(e){return e>=32&&e<=1114111}v.isValidStringCharacter=rn;function hr(e,r){return e===r?!0:Array.isArray(e)&&Array.isArray(r)?e.length===r.length&&e.every((t,n)=>hr(t,r[n])):Zt(e)&&Zt(r)?[...new Set([...Object.keys(e),...Object.keys(r)])].every(n=>hr(e[n],r[n])):!1}v.isDeepEqual=hr;function Zt(e){return typeof e=="object"&&e!==null}var Oi={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},wi=92,Ni=123,zt=125,xi=91,Qt=93,Hi=32,Ii=10,Mi=9,Di=13,nt=34,ji=43,en=45,st=48,qi=49,it=57,Li=44,Bi=46,Ri=58;v.codeUppercaseA=65;v.codeLowercaseA=97;v.codeUppercaseE=69;v.codeLowercaseE=101;v.codeUppercaseF=70;v.codeLowercaseF=102});var sn=m(mr=>{"use strict";a();c();Object.defineProperty(mr,"__esModule",{value:!0});mr.stringify=void 0;var Ki=Fe();function nn(e,r,t,n){let s=$i(t),i=typeof r=="function"?r.call({"":e},"",e):e;return o(i,"");function o(h,_){if(Array.isArray(n)){let O=n.find(D=>D.test(h));if(O){let D=O.stringify(h);if(typeof D!="string"||!(0,Ki.isNumber)(D))throw new Error(`Invalid JSON number: output of a number stringifier must be a string containing a JSON number (output: ${D})`);return D}}if(typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h===null||h instanceof Date||h instanceof Boolean||h instanceof Number||h instanceof String)return JSON.stringify(h);if(h&&h.isLosslessNumber||typeof h=="bigint")return h.toString();if(Array.isArray(h))return u(h,_);if(h&&typeof h=="object")return f(h,_)}function u(h,_){if(h.length===0)return"[]";let O=s?_+s:void 0,D=s?`[
`:"[";for(let X=0;X<h.length;X++){let Y=typeof r=="function"?r.call(h,String(X),h[X]):h[X];s&&(D+=O),typeof Y<"u"&&typeof Y!="function"?D+=o(Y,O):D+="null",X<h.length-1&&(D+=s?`,
`:",")}return D+=s?`
`+_+"]":"]",D}function f(h,_){if(typeof h.toJSON=="function")return nn(h.toJSON(),r,t,void 0);let O=Array.isArray(r)?r.map(String):Object.keys(h);if(O.length===0)return"{}";let D=s?_+s:void 0,X=!0,Y=s?`{
`:"{";return O.forEach(_e=>{let ve=typeof r=="function"?r.call(h,_e,h[_e]):h[_e];if(l(_e,ve)){X?X=!1:Y+=s?`,
`:",";let ir=JSON.stringify(_e);Y+=s?D+ir+": ":ir+":",Y+=o(ve,D)}}),Y+=s?`
`+_+"}":"}",Y}function l(h,_){return typeof _<"u"&&typeof _!="function"&&typeof _!="symbol"}}mr.stringify=nn;function $i(e){if(typeof e=="number")return" ".repeat(e);if(typeof e=="string"&&e!=="")return e}});var an=m(on=>{"use strict";a();c();Object.defineProperty(on,"__esModule",{value:!0})});var un=m(T=>{"use strict";a();c();var Ui=T&&T.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var s=Object.getOwnPropertyDescriptor(r,t);(!s||("get"in s?!r.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,s)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Vi=T&&T.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&Ui(r,e,t)};Object.defineProperty(T,"__esModule",{value:!0});T.getUnsafeNumberReason=T.toSafeNumberOrThrow=T.isSafeNumber=T.isNumber=T.isInteger=T.UnsafeNumberReason=T.parseNumberAndBigInt=T.parseLosslessNumber=T.toLosslessNumber=T.isLosslessNumber=T.LosslessNumber=T.stringify=T.parse=void 0;var Fi=tn();Object.defineProperty(T,"parse",{enumerable:!0,get:function(){return Fi.parse}});var ki=sn();Object.defineProperty(T,"stringify",{enumerable:!0,get:function(){return ki.stringify}});var ot=dr();Object.defineProperty(T,"LosslessNumber",{enumerable:!0,get:function(){return ot.LosslessNumber}});Object.defineProperty(T,"isLosslessNumber",{enumerable:!0,get:function(){return ot.isLosslessNumber}});Object.defineProperty(T,"toLosslessNumber",{enumerable:!0,get:function(){return ot.toLosslessNumber}});var cn=rt();Object.defineProperty(T,"parseLosslessNumber",{enumerable:!0,get:function(){return cn.parseLosslessNumber}});Object.defineProperty(T,"parseNumberAndBigInt",{enumerable:!0,get:function(){return cn.parseNumberAndBigInt}});var we=Fe();Object.defineProperty(T,"UnsafeNumberReason",{enumerable:!0,get:function(){return we.UnsafeNumberReason}});Object.defineProperty(T,"isInteger",{enumerable:!0,get:function(){return we.isInteger}});Object.defineProperty(T,"isNumber",{enumerable:!0,get:function(){return we.isNumber}});Object.defineProperty(T,"isSafeNumber",{enumerable:!0,get:function(){return we.isSafeNumber}});Object.defineProperty(T,"toSafeNumberOrThrow",{enumerable:!0,get:function(){return we.toSafeNumberOrThrow}});Object.defineProperty(T,"getUnsafeNumberReason",{enumerable:!0,get:function(){return we.getUnsafeNumberReason}});Vi(an(),T)});var _r=m(B=>{"use strict";a();c();var Gi=B&&B.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var s=Object.getOwnPropertyDescriptor(r,t);(!s||("get"in s?!r.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,s)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Wi=B&&B.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Xi=B&&B.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Gi(r,e,t);return Wi(r,e),r};Object.defineProperty(B,"__esModule",{value:!0});B.stringifyAlwaysAsBig=B.stringify=B.parseAlwaysAsBig=B.parse=void 0;var Ge=Xi(un()),Yi=e=>{if(!Ge.isInteger(e))return parseFloat(e);let r=parseInt(e,10);return Number.isSafeInteger(r)?r:BigInt(e)},Ji=e=>Ge.parse(String(e),void 0,Yi);B.parse=Ji;var Zi=e=>Ge.parse(String(e),void 0,Ge.parseNumberAndBigInt);B.parseAlwaysAsBig=Zi;var zi=(...e)=>Ge.stringify(...e);B.stringify=zi;B.stringifyAlwaysAsBig=B.stringify});var te=m(y=>{"use strict";a();c();Object.defineProperty(y,"__esModule",{value:!0});y.computeContractClassHash=y.computeSierraContractClassHash=y.computeCompiledClassHash=y.computeLegacyContractClassHash=y.formatSpaces=y.calculateContractAddressFromHash=y.calculateTransactionHash=y.calculateDeployAccountTransactionHash=y.calculateDeclareTransactionHash=y.calculateDeployTransactionHash=y.calculateTransactionHashCommon=y.computeHashOnElements=y.getSelector=y.getSelectorFromName=y.starknetKeccak=y.keccakBn=y.feeTransactionVersion=y.transactionVersion_2=y.transactionVersion=void 0;var Qi=ye(),ce=Qi.signUtil.schnorr.stark,Ne=Ce(),eo=be(),ut=ie(),ae=de(),z=q(),yr=oe(),br=_r();y.transactionVersion=1n;y.transactionVersion_2=2n;y.feeTransactionVersion=2n**128n+y.transactionVersion;function ro(e){let r=(0,ae.removeHexPrefix)((0,z.toHex)(BigInt(e))),t=r.length%2===0?r:`0${r}`;return(0,ae.addHexPrefix)(ce.keccak((0,z.hexToBytes)((0,ae.addHexPrefix)(t))).toString(16))}y.keccakBn=ro;function to(e){return(0,ae.addHexPrefix)(ce.keccak((0,ae.utf8ToArray)(e)).toString(16))}function ln(e){return BigInt(to(e))&Ne.MASK_250}y.starknetKeccak=ln;function lt(e){return(0,z.toHex)(ln(e))}y.getSelectorFromName=lt;function no(e){return(0,z.isHex)(e)?e:(0,z.isStringWholeNumber)(e)?(0,z.toHexString)(e):lt(e)}y.getSelector=no;function Z(e){return[...e,e.length].reduce((r,t)=>ut.starkCurve.pedersen((0,z.toBigInt)(r),(0,z.toBigInt)(t)),0).toString()}y.computeHashOnElements=Z;function We(e,r,t,n,s,i,o,u=[]){let f=Z(s),l=[e,r,t,n,f,i,o,...u];return Z(l)}y.calculateTransactionHashCommon=We;function so(e,r,t,n){return We(Ne.TransactionHashPrefix.DEPLOY,t,e,lt("constructor"),r,0,n)}y.calculateDeployTransactionHash=so;function io(e,r,t,n,s,i,o){return We(Ne.TransactionHashPrefix.DECLARE,t,r,0,[e],n,s,[i,...o?[o]:[]])}y.calculateDeclareTransactionHash=io;function oo(e,r,t,n,s,i,o,u){let f=[r,n,...t];return We(Ne.TransactionHashPrefix.DEPLOY_ACCOUNT,s,e,0,f,i,o,[u])}y.calculateDeployAccountTransactionHash=oo;function ao(e,r,t,n,s,i){return We(Ne.TransactionHashPrefix.INVOKE,r,e,0,t,n,s,[i])}y.calculateTransactionHash=ao;function co(e,r,t,n){let s=Z(t),i=(0,eo.felt)("0x535441524b4e45545f434f4e54524143545f41444452455353");return Z([i,n,e,r,s])}y.calculateContractAddressFromHash=co;function uo(e,r){return e==="attributes"||e==="accessible_scopes"?Array.isArray(r)&&r.length===0?void 0:r:e==="debug_info"?null:r===null?void 0:r}function dt(e){let r=!1,t="";for(let n of e)n==='"'&&t.endsWith("\\")===!1&&(r=!r),r?t+=n:t+=n===":"?": ":n===","?", ":n;return t}y.formatSpaces=dt;function dn(e){let{abi:r,program:t}=e,n={abi:r,program:t},s=dt((0,br.stringify)(n,uo));return(0,ae.addHexPrefix)(ut.starkCurve.keccak((0,ae.utf8ToArray)(s)).toString(16))}y.default=dn;function fn(e){let r=typeof e=="string"?(0,br.parse)(e):e,t=(0,z.toHex)(Ne.API_VERSION),n=Z(r.entry_points_by_type.EXTERNAL.flatMap(l=>[l.selector,l.offset])),s=Z(r.entry_points_by_type.L1_HANDLER.flatMap(l=>[l.selector,l.offset])),i=Z(r.entry_points_by_type.CONSTRUCTOR.flatMap(l=>[l.selector,l.offset])),o=Z(r.program.builtins.map(l=>(0,yr.encodeShortString)(l))),u=dn(r),f=Z(r.program.data);return Z([t,n,s,i,o,u,f])}y.computeLegacyContractClassHash=fn;function lo(e){return ce.poseidonHashMany(e.flatMap(r=>BigInt((0,yr.encodeShortString)(r))))}function at(e){let r=e.flatMap(t=>[BigInt(t.selector),BigInt(t.offset),lo(t.builtins)]);return ce.poseidonHashMany(r)}function fo(e){let r="COMPILED_CLASS_V1",t=BigInt((0,yr.encodeShortString)(r)),n=at(e.entry_points_by_type.EXTERNAL),s=at(e.entry_points_by_type.L1_HANDLER),i=at(e.entry_points_by_type.CONSTRUCTOR),o=ce.poseidonHashMany(e.bytecode.map(u=>BigInt(u)));return(0,z.toHex)(ce.poseidonHashMany([t,n,s,i,o]))}y.computeCompiledClassHash=fo;function ct(e){let r=e.flatMap(t=>[BigInt(t.selector),BigInt(t.function_idx)]);return ce.poseidonHashMany(r)}function go(e){let r=dt((0,br.stringify)(e.abi,void 0));return BigInt((0,ae.addHexPrefix)(ut.starkCurve.keccak((0,ae.utf8ToArray)(r)).toString(16)))}function gn(e){let r="CONTRACT_CLASS_V0.1.0",t=BigInt((0,yr.encodeShortString)(r)),n=ct(e.entry_points_by_type.EXTERNAL),s=ct(e.entry_points_by_type.L1_HANDLER),i=ct(e.entry_points_by_type.CONSTRUCTOR),o=go(e),u=ce.poseidonHashMany(e.sierra_program.map(f=>BigInt(f)));return(0,z.toHex)(ce.poseidonHashMany([t,n,s,i,o,u]))}y.computeSierraContractClassHash=gn;function po(e){let r=typeof e=="string"?(0,br.parse)(e):e;return"sierra_program"in r?gn(r):fn(r)}y.computeContractClassHash=po});var pn=m(gt=>{"use strict";a();c();Object.defineProperty(gt,"__esModule",{value:!0});var ho=q(),mo=oe(),ft={isBN:(e,r,t)=>{if(!(0,ho.isBigInt)(e[t]))throw new Error(`Data and formatter mismatch on ${t}:${r[t]}, expected response data ${t}:${e[t]} to be BN instead it is ${typeof e[t]}`)},unknown:(e,r,t)=>{throw new Error(`Unhandled formatter type on ${t}:${r[t]} for data ${t}:${e[t]}`)}};function Sr(e,r,t){return Object.entries(e).reduce((n,[s,i])=>{let o=t??r[s];if(!(s in r)&&!t)return n[s]=i,n;if(o==="string"){if(Array.isArray(e[s])){let u=Sr(e[s],e[s].map(f=>o));return n[s]=Object.values(u).join(""),n}return ft.isBN(e,r,s),n[s]=(0,mo.decodeShortString)(i),n}if(o==="number")return ft.isBN(e,r,s),n[s]=Number(i),n;if(typeof o=="function")return n[s]=o(i),n;if(Array.isArray(o)){let u=Sr(e[s],o,o[0]);return n[s]=Object.values(u),n}return typeof o=="object"?(n[s]=Sr(e[s],o),n):(ft.unknown(e,r,s),n)},{})}gt.default=Sr});var ht=m(pt=>{"use strict";a();c();Object.defineProperty(pt,"__esModule",{value:!0});var _o=be();function yo(e){let r=e.substring(0,e.indexOf(":")),t=e.substring(r.length+1);return{name:r,type:t}}function bo(e){if(!e.includes("("))return{subTuple:[],result:e};let r=[],t="",n=0;for(;n<e.length;){if(e[n]==="("){let s=1,i=n;for(n++;s;)e[n]===")"&&s--,e[n]==="("&&s++,n++;r.push(e.substring(i,n)),t+=" ",n--}else t+=e[n];n++}return{subTuple:r,result:t}}function So(e){let r=e.replace(/\s/g,"").slice(1,-1),{subTuple:t,result:n}=bo(r),s=n.split(",").map(i=>t.length?i.replace(" ",t.shift()):i);return(0,_o.isTypeNamedTuple)(e)&&(s=s.reduce((i,o)=>i.concat(yo(o)),[])),s}pt.default=So});var mn=m(xe=>{"use strict";a();c();var Eo=xe&&xe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xe,"__esModule",{value:!0});xe.parseCalldataField=void 0;var hn=oe(),ue=be(),To=Eo(ht());function Ao(e,r){let t=(0,To.default)(r),n=Object.values(e);if(n.length!==t.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.
      provided: ${n} 
      expected: ${t}`);return t.map((s,i)=>({element:n[i],type:s.type??s}))}function Er(e,r,t){if(e===void 0)throw Error(`Missing parameter for type ${r}`);if(Array.isArray(e))throw Error(`Array inside array (nD) are not supported by cairo. Element: ${e} ${r}`);if(t[r]&&t[r].members.length){let{members:n}=t[r],s=e;return n.reduce((i,o)=>i.concat(Er(s[o.name],o.type,t)),[])}if((0,ue.isTypeTuple)(r))return Ao(e,r).reduce((s,i)=>{let o=Er(i.element,i.type,t);return s.concat(o)},[]);if(typeof e=="object")throw Error(`Parameter ${e} do not align with abi parameter ${r}`);return(0,ue.felt)(e)}function vo(e,r,t){let{name:n,type:s}=r,{value:i}=e.next();switch(!0){case(0,ue.isTypeArray)(s):if(!Array.isArray(i)&&!(0,hn.isText)(i))throw Error(`ABI expected parameter ${n} to be array or long string, got ${i}`);typeof i=="string"&&(i=(0,hn.splitLongString)(i));let o=[];return o.push((0,ue.felt)(i.length)),i.reduce((u,f)=>((0,ue.isTypeFeltArray)(s)?u.push((0,ue.felt)(f)):u.push(...Er(f,s.replace("*",""),t)),u),o);case((0,ue.isTypeStruct)(s,t)||(0,ue.isTypeTuple)(s)):return Er(i,s,t);default:return(0,ue.felt)(i)}}xe.parseCalldataField=vo});var _n=m(Xe=>{"use strict";a();c();var Co=Xe&&Xe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xe,"__esModule",{value:!0});var Tr=be(),Po=Co(ht());function Ar(e,r,t){if(r in t&&t[r])return t[r].members.reduce((s,i)=>(s[i.name]=Ar(e,i.type,t),s),{});if((0,Tr.isTypeTuple)(r))return(0,Po.default)(r).reduce((i,o,u)=>{let f=o?.name?o.name:u,l=o?.type?o.type:o;return i[f]=Ar(e,l,t),i},{});let n=e.next().value;return BigInt(n)}function Oo(e,r,t,n){let{name:s,type:i}=r,o;switch(!0){case(0,Tr.isLen)(s):return o=e.next().value,BigInt(o);case(0,Tr.isTypeArray)(i):let u=[];if(n&&n[`${s}_len`]){let f=n[`${s}_len`];for(;u.length<f;)u.push(Ar(e,r.type.replace("*",""),t))}return u;case(i in t||(0,Tr.isTypeTuple)(i)):return Ar(e,i,t);default:return o=e.next().value,BigInt(o)}}Xe.default=Oo});var En=m(Je=>{"use strict";a();c();var wo=Je&&Je.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Je,"__esModule",{value:!0});var Ye=wo(Rt()),No=oe(),le=be(),yn=(e,r)=>{(0,Ye.default)(typeof e=="string"||typeof e=="number"||typeof e=="bigint",`Validate: arg ${r.name} should be a felt (string, number, BigNumber)`)},bn=(e,r,t)=>{(0,Ye.default)(typeof e=="object"&&!Array.isArray(e),`Validate: arg ${r.name} is cairo type struct (${r.type}), and should be defined as js object (not array)`),t[r.type].members.forEach(({name:n})=>{(0,Ye.default)(Object.keys(e).includes(n),`Validate: arg ${r.name} should have a property ${n}`)})},Sn=(e,r)=>{(0,Ye.default)(typeof e=="object"&&!Array.isArray(e),`Validate: arg ${r.name} should be a tuple (defined as object)`)},xo=(e,r,t)=>{let n=r.type.replace("*","");if(!((0,le.isTypeFelt)(n)&&(0,No.isLongText)(e)))switch((0,Ye.default)(Array.isArray(e),`Validate: arg ${r.name} should be an Array`),!0){case(0,le.isTypeFelt)(n):e.forEach(s=>yn(s,r));break;case(0,le.isTypeTuple)(n):e.forEach(s=>Sn(s,{name:r.name,type:n}));break;case(0,le.isTypeStruct)(n,t):e.forEach(s=>bn(s,{name:r.name,type:n},t));break;default:throw new Error(`Validate Unhandled: argument ${r.name}, type ${r.type}, value ${e}`)}};function Ho(e,r,t){e.inputs.reduce((n,s)=>{let i=r[n];switch(!0){case(0,le.isLen)(s.name):return n;case(0,le.isTypeFelt)(s.type):yn(i,s);break;case(0,le.isTypeStruct)(s.type,t):bn(i,s,t);break;case(0,le.isTypeTuple)(s.type):Sn(i,s);break;case(0,le.isTypeArray)(s.type):xo(i,s,t);break;default:throw new Error(`Validate Unhandled: argument ${s.name}, type ${s.type}, value ${i}`)}return n+1},0)}Je.default=Ho});var Me=m(Ie=>{"use strict";a();c();var Cr=Ie&&Ie.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.CallData=void 0;var Io=Cr(Rt()),Mo=q(),Tn=oe(),vr=be(),Do=Cr(pn()),jo=mn(),qo=Cr(_n()),Lo=Cr(En()),He=class{constructor(r){this.abi=r,this.structs=He.getAbiStruct(r)}validate(r,t,n=[]){if(r!=="DEPLOY"){let o=this.abi.filter(u=>{if(u.type!=="function")return!1;let f=u.stateMutability==="view"||u.state_mutability==="view";return r==="INVOKE"?!f:f}).map(u=>u.name);(0,Io.default)(o.includes(t),`${r==="INVOKE"?"invocable":"viewable"} method not found in abi`)}let s=this.abi.find(o=>r==="DEPLOY"?o.name===t&&o.type===t:o.name===t&&o.type==="function"),i=He.abiInputsLength(s.inputs);if(n.length!==i)throw Error(`Invalid number of arguments, expected ${i} arguments, but got ${n.length}`);(0,Lo.default)(s,n,this.structs)}compile(r,t){let n=r[Symbol.iterator]();return t.reduce((s,i)=>(0,vr.isLen)(i.name)?s:s.concat((0,jo.parseCalldataField)(n,i,this.structs)),[])}static compile(r){let t=s=>{let i=(o,u="")=>{let f=Array.isArray(o)?[o.length.toString(),...o]:o;return Object.entries(f).flatMap(([l,h])=>{let _=h;(0,Tn.isLongText)(_)&&(_=(0,Tn.splitLongString)(_));let O=Array.isArray(f)&&l==="0"?"$$len":l;return(0,Mo.isBigInt)(_)?[[`${u}${O}`,(0,vr.felt)(_)]]:Object(_)===_?i(_,`${u}${O}.`):[[`${u}${O}`,(0,vr.felt)(_)]]})};return Object.fromEntries(i(s))},n;if(Array.isArray(r))n=r;else{let s=t(r);n=Object.values(s)}return Object.defineProperty(n,"compiled",{enumerable:!1,writable:!1,value:!0}),n}parse(r,t){let{outputs:n}=this.abi.find(i=>i.name===r),s=t.flat()[Symbol.iterator]();return n.flat().reduce((i,o)=>(i[o.name]=(0,qo.default)(s,o,this.structs,i),i[o.name]&&i[`${o.name}_len`]&&delete i[`${o.name}_len`],i),{})}format(r,t,n){let s=this.parse(r,t);return(0,Do.default)(s,n)}static abiInputsLength(r){return r.reduce((t,n)=>(0,vr.isLen)(n.name)?t:t+1,0)}static getAbiStruct(r){return r.filter(t=>t.type==="struct").reduce((t,n)=>({...t,[n.name]:n}),{})}};Ie.CallData=He});var Or=m(M=>{"use strict";a();c();Object.defineProperty(M,"__esModule",{value:!0});M.getExecuteCalldata=M.fromCallsToExecuteCalldata_cairo1=M.transformCallsToMulticallArrays_cairo1=M.fromCallsToExecuteCalldataWithNonce=M.fromCallsToExecuteCalldata=M.transformCallsToMulticallArrays=void 0;var An=te(),De=q(),Pr=Me(),Bo=e=>{let r=[],t=[];return e.forEach(n=>{let s=Pr.CallData.compile(n.calldata||[]);r.push({to:(0,De.toBigInt)(n.contractAddress).toString(10),selector:n.entrypoint.startsWith("0x")?(0,De.toBigInt)(n.entrypoint):(0,De.toBigInt)((0,An.getSelectorFromName)(n.entrypoint)).toString(10),data_offset:t.length.toString(),data_len:s.length.toString()}),t.push(...s)}),{callArray:r,calldata:Pr.CallData.compile({calldata:t})}};M.transformCallsToMulticallArrays=Bo;var Ro=e=>{let{callArray:r,calldata:t}=(0,M.transformCallsToMulticallArrays)(e);return[...Pr.CallData.compile({callArray:r}),...t]};M.fromCallsToExecuteCalldata=Ro;var Ko=(e,r)=>[...(0,M.fromCallsToExecuteCalldata)(e),(0,De.toBigInt)(r).toString()];M.fromCallsToExecuteCalldataWithNonce=Ko;var $o=e=>e.map(t=>({to:(0,De.toBigInt)(t.contractAddress).toString(10),selector:(0,De.toBigInt)((0,An.getSelectorFromName)(t.entrypoint)).toString(10),calldata:Pr.CallData.compile(t.calldata||[])}));M.transformCallsToMulticallArrays_cairo1=$o;var Uo=e=>{let r=(0,M.transformCallsToMulticallArrays_cairo1)(e);return[r.length.toString(),...r.map(({to:t,selector:n,calldata:s})=>[t,n,s.length.toString(),...s]).flat()]};M.fromCallsToExecuteCalldata_cairo1=Uo;var Vo=(e,r="0")=>r==="1"?(0,M.fromCallsToExecuteCalldata_cairo1)(e):(0,M.fromCallsToExecuteCalldata)(e);M.getExecuteCalldata=Vo});var mt=m(je=>{"use strict";a();c();Object.defineProperty(je,"__esModule",{value:!0});je.proofMerklePath=je.MerkleTree=void 0;var Fo=ie(),vn=q(),ge=class{constructor(r){this.branches=[],this.leaves=r,this.root=this.build(r)}build(r){if(r.length===1)return r[0];r.length!==this.leaves.length&&this.branches.push(r);let t=[];for(let n=0;n<r.length;n+=2)n+1===r.length?t.push(ge.hash(r[n],"0x0")):t.push(ge.hash(r[n],r[n+1]));return this.build(t)}static hash(r,t){let[n,s]=[(0,vn.toBigInt)(r),(0,vn.toBigInt)(t)].sort((i,o)=>i>=o?1:-1);return Fo.starkCurve.pedersen(n,s)}getProof(r,t=this.leaves,n=[]){let s=t.indexOf(r);if(s===-1)throw new Error("leaf not found");if(t.length===1)return n;let i=s%2===0,o=(i?t[s+1]:t[s-1])??"0x0",u=[...n,o],f=this.leaves.length===t.length?-1:this.branches.findIndex(h=>h.length===t.length),l=this.branches[f+1]??[this.root];return this.getProof(ge.hash(i?r:o,i?o:r),l,u)}};je.MerkleTree=ge;function Cn(e,r,t){if(t.length===0)return e===r;let[n,...s]=t;return Cn(e,ge.hash(r,n),s)}je.proofMerklePath=Cn});var Pn=m(wr=>{"use strict";a();c();Object.defineProperty(wr,"__esModule",{value:!0});wr.validateTypedData=void 0;var ko=e=>{let r=e;return Boolean(r.types&&r.primaryType&&r.message)};wr.validateTypedData=ko});var wn=m(On=>{"use strict";a();c();Object.defineProperty(On,"__esModule",{value:!0})});var Nr=m(E=>{"use strict";a();c();var Go=E&&E.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var s=Object.getOwnPropertyDescriptor(r,t);(!s||("get"in s?!r.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,s)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Wo=E&&E.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&Go(r,e,t)};Object.defineProperty(E,"__esModule",{value:!0});E.getMessageHash=E.getStructHash=E.encodeData=E.encodeValue=E.getTypeHash=E.encodeType=E.getDependencies=E.isMerkleTreeType=E.prepareSelector=void 0;var qe=te(),Xo=mt(),_t=q(),Nn=oe(),Yo=Pn();Wo(wn(),E);function Jo(e){try{return(0,_t.toHex)(e)}catch{if(typeof e=="string")return(0,_t.toHex)((0,Nn.encodeShortString)(e));throw new Error(`Invalid BigNumberish: ${e}`)}}function xn(e){return(0,_t.isHex)(e)?e:(0,qe.getSelectorFromName)(e)}E.prepareSelector=xn;function Hn(e){return e.type==="merkletree"}E.isMerkleTreeType=Hn;var Zo=(e,r,t=[])=>(r[r.length-1]==="*"&&(r=r.slice(0,-1)),t.includes(r)||!e[r]?t:[r,...e[r].reduce((n,s)=>[...n,...(0,E.getDependencies)(e,s.type,n).filter(i=>!n.includes(i))],[])]);E.getDependencies=Zo;function zo(e,r){if(r.parent&&r.key){let n=e[r.parent].find(i=>i.name===r.key);if(!Hn(n))throw new Error(`${r.key} is not a merkle tree`);if(n.contains.endsWith("*"))throw new Error(`Merkle tree contain property must not be an array but was given ${r.key}`);return n.contains}return"raw"}var Qo=(e,r)=>{let[t,...n]=(0,E.getDependencies)(e,r);return(t?[t,...n.sort()]:[]).map(i=>`${i}(${e[i].map(o=>`${o.name}:${o.type}`)})`).join("")};E.encodeType=Qo;var ea=(e,r)=>(0,qe.getSelectorFromName)((0,E.encodeType)(e,r));E.getTypeHash=ea;var ra=(e,r,t,n={})=>{if(e[r])return[r,(0,E.getStructHash)(e,r,t)];if(Object.keys(e).map(s=>`${s}*`).includes(r)){let s=t.map(i=>(0,E.getStructHash)(e,r.slice(0,-1),i));return[r,(0,qe.computeHashOnElements)(s)]}if(r==="merkletree"){let s=zo(e,n),i=t.map(u=>(0,E.encodeValue)(e,s,u)[1]),{root:o}=new Xo.MerkleTree(i);return["felt",o]}return r==="felt*"?["felt*",(0,qe.computeHashOnElements)(t)]:r==="selector"?["felt",xn(t)]:[r,Jo(t)]};E.encodeValue=ra;var ta=(e,r,t)=>{let[n,s]=e[r].reduce(([i,o],u)=>{if(t[u.name]===void 0||t[u.name]===null)throw new Error(`Cannot encode data: missing data for '${u.name}'`);let f=t[u.name],[l,h]=(0,E.encodeValue)(e,u.type,f,{parent:r,key:u.name});return[[...i,l],[...o,h]]},[["felt"],[(0,E.getTypeHash)(e,r)]]);return[n,s]};E.encodeData=ta;var na=(e,r,t)=>(0,qe.computeHashOnElements)((0,E.encodeData)(e,r,t)[1]);E.getStructHash=na;var sa=(e,r)=>{if(!(0,Yo.validateTypedData)(e))throw new Error("Typed data does not match JSON schema");let t=[(0,Nn.encodeShortString)("StarkNet Message"),(0,E.getStructHash)(e.types,"StarkNetDomain",e.domain),r,(0,E.getStructHash)(e.types,e.primaryType,e.message)];return(0,qe.computeHashOnElements)(t)};E.getMessageHash=sa});var In=m(xr=>{"use strict";a();c();Object.defineProperty(xr,"__esModule",{value:!0});xr.Signer=void 0;var Le=ie(),ia=de(),yt=te(),oa=q(),aa=Or(),ca=Nr(),ua=Me(),bt=class{constructor(r=Le.starkCurve.utils.randomPrivateKey()){this.pk=r instanceof Uint8Array?(0,ia.buf2hex)(r):(0,oa.toHex)(r)}async getPubKey(){return Le.starkCurve.getStarkKey(this.pk)}async signMessage(r,t){let n=(0,ca.getMessageHash)(r,t);return Le.starkCurve.sign(n,this.pk)}async signTransaction(r,t,n){if(n&&n.length!==r.length)throw new Error("ABI must be provided for each transaction or no transaction");let s=(0,aa.getExecuteCalldata)(r,t.cairoVersion),i=(0,yt.calculateTransactionHash)(t.walletAddress,t.version,s,t.maxFee,t.chainId,t.nonce);return{signature:Le.starkCurve.sign(i,this.pk),hash:i}}async signDeployAccountTransaction({classHash:r,contractAddress:t,constructorCalldata:n,addressSalt:s,maxFee:i,version:o,chainId:u,nonce:f}){let l=(0,yt.calculateDeployAccountTransactionHash)(t,r,ua.CallData.compile(n),s,o,i,u,f);return{signature:Le.starkCurve.sign(l,this.pk),hash:l}}async signDeclareTransaction({classHash:r,senderAddress:t,chainId:n,maxFee:s,version:i,nonce:o,compiledClassHash:u}){let f=(0,yt.calculateDeclareTransactionHash)(r,t,i,s,n,o,u);return Le.starkCurve.sign(f,this.pk)}};xr.Signer=bt});var St=m(pe=>{"use strict";a();c();var la=pe&&pe.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var s=Object.getOwnPropertyDescriptor(r,t);(!s||("get"in s?!r.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,s)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Mn=pe&&pe.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&la(r,e,t)};Object.defineProperty(pe,"__esModule",{value:!0});Mn(Kt(),pe);Mn(In(),pe)});var qn=m(jn=>{"use strict";a();c();Object.defineProperty(jn,"__esModule",{value:!0});var Dn;(function(e){e[e.function=0]="function",e[e.l1_handler=1]="l1_handler",e[e.constructor=2]="constructor"})(Dn||(Dn={}))});var Bn=m(Ln=>{"use strict";a();c();Object.defineProperty(Ln,"__esModule",{value:!0})});var Kn=m(Rn=>{"use strict";a();c();Object.defineProperty(Rn,"__esModule",{value:!0})});var $n=m(G=>{"use strict";a();c();var da=G&&G.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var s=Object.getOwnPropertyDescriptor(r,t);(!s||("get"in s?!r.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,s)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Et=G&&G.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&da(r,e,t)};Object.defineProperty(G,"__esModule",{value:!0});G.EntryPointType=void 0;var fa;(function(e){e.EXTERNAL="EXTERNAL",e.L1_HANDLER="L1_HANDLER",e.CONSTRUCTOR="CONSTRUCTOR"})(fa=G.EntryPointType||(G.EntryPointType={}));Et(qn(),G);Et(Bn(),G);Et(Kn(),G)});var Un=m(F=>{"use strict";a();c();var ga=F&&F.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var s=Object.getOwnPropertyDescriptor(r,t);(!s||("get"in s?!r.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,s)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),pa=F&&F.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&ga(r,e,t)};Object.defineProperty(F,"__esModule",{value:!0});F.TransactionType=F.TransactionStatus=void 0;var ha;(function(e){e.NOT_RECEIVED="NOT_RECEIVED",e.RECEIVED="RECEIVED",e.PENDING="PENDING",e.ACCEPTED_ON_L2="ACCEPTED_ON_L2",e.ACCEPTED_ON_L1="ACCEPTED_ON_L1",e.REJECTED="REJECTED"})(ha=F.TransactionStatus||(F.TransactionStatus={}));var ma;(function(e){e.INVOKE="INVOKE_FUNCTION",e.DECLARE="DECLARE",e.DEPLOY="DEPLOY",e.DEPLOY_ACCOUNT="DEPLOY_ACCOUNT"})(ma=F.TransactionType||(F.TransactionType={}));pa($n(),F)});var Fn=m(Vn=>{"use strict";a();c();Object.defineProperty(Vn,"__esModule",{value:!0})});var Gn=m(kn=>{"use strict";a();c();Object.defineProperty(kn,"__esModule",{value:!0})});var Xn=m(Wn=>{"use strict";a();c();Object.defineProperty(Wn,"__esModule",{value:!0})});var Jn=m(Yn=>{"use strict";a();c();Object.defineProperty(Yn,"__esModule",{value:!0})});var zn=m(Zn=>{"use strict";a();c();Object.defineProperty(Zn,"__esModule",{value:!0})});var Qn=m(Ze=>{"use strict";a();c();Object.defineProperty(Ze,"__esModule",{value:!0});Ze.RPC=void 0;var _a;(function(e){let r;(function(t){t.DECLARE="DECLARE",t.DEPLOY="DEPLOY",t.DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",t.INVOKE="INVOKE",t.L1_HANDLER="L1_HANDLER"})(r=e.TransactionType||(e.TransactionType={}))})(_a=Ze.RPC||(Ze.RPC={}))});var Tt=m(k=>{"use strict";a();c();var ya=k&&k.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var s=Object.getOwnPropertyDescriptor(r,t);(!s||("get"in s?!r.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,s)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Se=k&&k.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&ya(r,e,t)};Object.defineProperty(k,"__esModule",{value:!0});Se(Un(),k);Se(Fn(),k);Se(Gn(),k);Se(Xn(),k);Se(Jn(),k);Se(zn(),k);Se(Qn(),k)});var At=m(Be=>{"use strict";a();c();Object.defineProperty(Be,"__esModule",{value:!0});Be.extractContractHashes=Be.isSierra=void 0;var es=te(),ba=ze();function rs(e){return"sierra_program"in(typeof e=="string"?ba.json.parse(e):e)}Be.isSierra=rs;function Sa(e){let r={...e};if(rs(e.contract)&&(!e.compiledClassHash&&e.casm&&(r.compiledClassHash=(0,es.computeCompiledClassHash)(e.casm)),!r.compiledClassHash))throw new Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(r.classHash=e.classHash??(0,es.computeContractClassHash)(e.contract),!r.classHash)throw new Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return r}Be.extractContractHashes=Sa});var Hr=m(R=>{"use strict";a();c();Object.defineProperty(R,"__esModule",{value:!0});R.estimatedFeeToMaxFee=R.signatureToHexArray=R.signatureToDecimalArray=R.formatSignature=R.makeAddress=R.randomAddress=R.compressProgram=void 0;var ts=ye(),Ea=Ls(),Ta=ze(),ns=de(),Ee=q();function Aa(e){let r=typeof e=="string"?e:Ta.json.stringify(e),t=(0,Ea.gzip)(r);return(0,ns.btoaUniversal)(t)}R.compressProgram=Aa;function va(){let e=ts.signUtil.schnorr.stark.utils.randomPrivateKey();return ts.signUtil.schnorr.stark.getStarkKey(e)}R.randomAddress=va;function Ca(e){return(0,ns.addHexPrefix)(e).toLowerCase()}R.makeAddress=Ca;function vt(e){if(!e)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(e))return e.map(r=>(0,Ee.toHex)(r));try{let{r,s:t}=e;return[(0,Ee.toHex)(r),(0,Ee.toHex)(t)]}catch{throw new Error("Signature need to be weierstrass.SignatureType or an array for custom")}}R.formatSignature=vt;function Pa(e){return(0,Ee.bigNumberishArrayToDecimalStringArray)(vt(e))}R.signatureToDecimalArray=Pa;function Oa(e){return(0,Ee.bigNumberishArrayToHexadecimalStringArray)(vt(e))}R.signatureToHexArray=Oa;function wa(e,r=.5){let t=Math.round((1+r)*100);return(0,Ee.toBigInt)(e)*(0,Ee.toBigInt)(t)/100n}R.estimatedFeeToMaxFee=wa});var cs=m(ne=>{"use strict";a();c();Object.defineProperty(ne,"__esModule",{value:!0});ne.parseContract=ne.createSierraContractClass=ne.parseCalldata=ne.wait=void 0;var Na=At(),ss=te(),is=q(),os=Hr(),Ct=ze();function xa(e){return new Promise(r=>{setTimeout(r,e)})}ne.wait=xa;function Ha(e=[]){return e.map(r=>typeof r=="string"&&(0,is.isHex)(r)?r:(0,is.toHex)(r))}ne.parseCalldata=Ha;function as(e){let r={...e};return delete r.sierra_program_debug_info,r.abi=(0,ss.formatSpaces)(Ct.json.stringify(e.abi)),r.sierra_program=(0,ss.formatSpaces)(Ct.json.stringify(e.sierra_program)),r.sierra_program=(0,os.compressProgram)(r.sierra_program),r}ne.createSierraContractClass=as;function Ia(e){let r=typeof e=="string"?Ct.json.parse(e):e;return(0,Na.isSierra)(e)?as(r):{...r,..."program"in r&&{program:(0,os.compressProgram)(r.program)}}}ne.parseContract=Ia});var us=m(qr=>{"use strict";a();c();Object.defineProperty(qr,"__esModule",{value:!0});qr.Account=void 0;var Ir=Ce(),Ma=St(),Mr=Tt(),Dr=At(),Da=ie(),Re=te(),$=q(),ja=cs(),Qe=Hr(),qa=Or(),La=Nr(),jr=Me(),Pt=class{constructor(r,t,n="0"){this.address=r.toLowerCase(),this.signer=typeof t=="string"||t instanceof Uint8Array?new Ma.Signer(t):t,this.cairoVersion=n}async signMessage(r){return this.signer.signMessage(r,this.address)}async declare(r,t){if(t.nonce===void 0||t.maxFee===void 0||t.chainId===void 0)throw new Error("missing transaction parameter");let n=(0,Dr.extractContractHashes)(r),s={};s.nonce=(0,$.toBigInt)(t.nonce),s.maxFee=t.maxFee,s.chainId=t.chainId,s.version=(0,Dr.isSierra)(r.contract)?Re.transactionVersion_2:Re.transactionVersion;let i=await this.buildDeclareContractTransaction(n,{...s,walletAddress:this.address,cairoVersion:this.cairoVersion}),{senderAddress:o,contractDefinition:u,signature:f,compiledClassHash:l}=i;return(0,Dr.isSierra)(u)?{type:Mr.TransactionType.DECLARE,sender_address:o,compiled_class_hash:l,contract_class:u,nonce:(0,$.toHex)(s.nonce),signature:(0,Qe.signatureToDecimalArray)(f),max_fee:(0,$.toHex)(s.maxFee||0),version:"0x2"}:{type:Mr.TransactionType.DECLARE,contract_class:u,nonce:(0,$.toHex)(s.nonce),signature:(0,Qe.signatureToDecimalArray)(f),sender_address:o,max_fee:(0,$.toHex)(s.maxFee||0),version:"0x1"}}async execute(r,t=void 0,n){if(n.nonce===void 0||n.maxFee===void 0||n.chainId===void 0)throw new Error("missing transaction parameter");let s=Array.isArray(r)?r:[r],i=(0,$.toBigInt)(n.nonce),o=n.maxFee,u=(0,$.toBigInt)(Re.transactionVersion),f=n.chainId,l={walletAddress:this.address,nonce:i,maxFee:o,version:u,chainId:f,cairoVersion:this.cairoVersion},h=await this.signer.signTransaction(s,l,t),_=(0,qa.getExecuteCalldata)(s,this.cairoVersion);return{txId:h.hash,signature:{type:Mr.TransactionType.INVOKE,sender_address:this.address,calldata:jr.CallData.compile(_??[]),max_fee:(0,$.toHex)(o||0),signature:(0,Qe.signatureToDecimalArray)(h.signature),version:"0x1",nonce:(0,$.toHex)(i)}}}async deploy(r,t){let n=[].concat(r).map(o=>{let{classHash:u,salt:f,unique:l=!0,constructorCalldata:h=[]}=o,_=jr.CallData.compile(h),O=f??(0,Qe.randomAddress)();return{call:{contractAddress:Ir.UDC.ADDRESS,entrypoint:Ir.UDC.ENTRYPOINT,calldata:[u,O,(0,$.toCairoBool)(l),_.length,..._]},address:(0,Re.calculateContractAddressFromHash)(l?Da.starkCurve.pedersen(this.address,O):O,u,_,l?Ir.UDC.ADDRESS:0)}}),s=n.map(o=>o.call),i=n.map(o=>o.address);return await this.execute(s,void 0,t)}async deployAccount({classHash:r,constructorCalldata:t=[],addressSalt:n=0,contractAddress:s},i){if(i.maxFee===void 0||i.chainId===void 0)throw new Error("missing transaction parameter");let o=(0,$.toBigInt)(Re.transactionVersion),u=Ir.ZERO,f=i.chainId,l=jr.CallData.compile(t),h=s??(0,Re.calculateContractAddressFromHash)(n,r,l,0),_=i.maxFee,O=await this.signer.signDeployAccountTransaction({classHash:r,constructorCalldata:t,contractAddress:h,addressSalt:n,chainId:f,maxFee:_,version:o,nonce:u});return{txId:O.hash,signature:{type:Mr.TransactionType.DEPLOY_ACCOUNT,contract_address_salt:n,constructor_calldata:jr.CallData.compile(t??[]),class_hash:(0,$.toHex)(r),max_fee:(0,$.toHex)(_||0),version:(0,$.toHex)(o||0),nonce:(0,$.toHex)(u),signature:(0,Qe.signatureToDecimalArray)(O.signature)}}}async buildDeclareContractTransaction(r,{nonce:t,chainId:n,version:s,walletAddress:i,maxFee:o}){let{classHash:u,contract:f,compiledClassHash:l}=(0,Dr.extractContractHashes)(r),h=(0,ja.parseContract)(f),_=await this.signer.signDeclareTransaction({classHash:u,compiledClassHash:l,senderAddress:i,chainId:n,maxFee:o,version:s,nonce:t});return{senderAddress:i,signature:_,contractDefinition:h,compiledClassHash:l}}async hashMessage(r){return(0,La.getMessageHash)(r,this.address)}};qr.Account=Pt});var ls=m(Lr=>{"use strict";a();c();Object.defineProperty(Lr,"__esModule",{value:!0});Lr.AccountInterface=void 0;var Ot=class{};Lr.AccountInterface=Ot});var wt=m(he=>{"use strict";a();c();var Ba=he&&he.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var s=Object.getOwnPropertyDescriptor(r,t);(!s||("get"in s?!r.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,s)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),ds=he&&he.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&Ba(r,e,t)};Object.defineProperty(he,"__esModule",{value:!0});ds(us(),he);ds(ls(),he)});var Nt=m(Ke=>{"use strict";a();c();Object.defineProperty(Ke,"__esModule",{value:!0});Ke.validateAndParseAddress=Ke.addAddressPadding=void 0;var fs=Ce(),gs=de(),ps=q();function hs(e){return(0,gs.addHexPrefix)((0,gs.removeHexPrefix)((0,ps.toHex)(e)).padStart(64,"0"))}Ke.addAddressPadding=hs;function Ra(e){(0,ps.assertInRange)(e,fs.ZERO,fs.MASK_251,"Starknet Address");let r=hs(e);if(!r.match(/^(0x)?[0-9a-fA-F]{64}$/))throw new Error("Invalid Address Format");return r}Ke.validateAndParseAddress=Ra});var xt=m(er=>{"use strict";a();c();Object.defineProperty(er,"__esModule",{value:!0});er.SignType=void 0;var Ka;(function(e){e[e.Secp256k1=1]="Secp256k1",e[e.ECDSA_P256=2]="ECDSA_P256",e[e.ED25519=3]="ED25519",e[e.StarknetSignType=4]="StarknetSignType",e[e.TezosSignType=5]="TezosSignType"})(Ka=er.SignType||(er.SignType={}))});var ms=m(W=>{"use strict";a();c();Object.defineProperty(W,"__esModule",{value:!0});W.CoinCurveMap=W.MultiAddressCoins=W.segwitType=W.Currency=void 0;var S;(function(e){e[e.NULL=-1]="NULL",e[e.BTC=0]="BTC",e[e.TBTC=1]="TBTC",e[e.ETH=60]="ETH",e[e.LTC=2]="LTC",e[e.DOGE=3]="DOGE",e[e.BCH=145]="BCH",e[e.BSV=236]="BSV",e[e.TRX=195]="TRX",e[e.SOL=501]="SOL",e[e.APTOS=637]="APTOS",e[e.OMNI_USDT=20001]="OMNI_USDT",e[e.OMNI_USDT_TEST=20002]="OMNI_USDT_TEST",e[e.SUI=784]="SUI",e[e.ATOM=118]="ATOM",e[e.OSMO=1e3]="OSMO",e[e.EVMOS=1001]="EVMOS",e[e.AXL=1002]="AXL",e[e.CRO=1003]="CRO",e[e.Iris=1004]="Iris",e[e.Juno=1005]="Juno",e[e.Kava=1006]="Kava",e[e.Kujira=1007]="Kujira",e[e.SCRT=1008]="SCRT",e[e.Stargaze=1009]="Stargaze",e[e.Terra=1010]="Terra",e[e.ZKSPACE=1011]="ZKSPACE",e[e.ZKSYNC=804]="ZKSYNC",e[e.Stx=5757]="Stx",e[e.SEI=2837]="SEI",e[e.WAX=14001]="WAX",e[e.Starknet=9004]="Starknet",e[e.ADA=1815]="ADA",e[e.INJ=2892]="INJ",e[e.Celestia=2854]="Celestia",e[e.DYDX=2897]="DYDX",e[e.Kaspa=111111]="Kaspa",e[e.TON=607]="TON",e[e.NostrAssets=1237]="NostrAssets",e[e.Near=397]="Near"})(S=W.Currency||(W.Currency={}));var $a;(function(e){e[e.SEGWIT_NESTED=1]="SEGWIT_NESTED",e[e.SEGWIT_NESTED_49=2]="SEGWIT_NESTED_49",e[e.SEGWIT_NATIVE=3]="SEGWIT_NATIVE",e[e.SEGWIT_TAPROOT=4]="SEGWIT_TAPROOT"})($a=W.segwitType||(W.segwitType={}));W.MultiAddressCoins=[S.BTC,S.TBTC,S.LTC,S.DOGE,S.BSV,S.OMNI_USDT,S.OMNI_USDT_TEST];var C="secp256k1",Br="ed25519";W.CoinCurveMap=new Map([[S.BTC,C],[S.TBTC,C],[S.ETH,C],[S.LTC,C],[S.DOGE,C],[S.BCH,C],[S.BSV,C],[S.TRX,C],[S.OMNI_USDT,C],[S.OMNI_USDT_TEST,C],[S.ATOM,C],[S.OSMO,C],[S.EVMOS,C],[S.AXL,C],[S.CRO,C],[S.Iris,C],[S.Juno,C],[S.Kava,C],[S.Kujira,C],[S.SCRT,C],[S.Stargaze,C],[S.Terra,C],[S.SEI,C],[S.Celestia,C],[S.DYDX,C],[S.SOL,Br],[S.APTOS,Br],[S.SUI,Br],[S.TON,Br]])});var Ht=m(d=>{"use strict";a();c();Object.defineProperty(d,"__esModule",{value:!0});d.SignCommonMsgError=d.EstimateFeeError=d.validSignedTransactionError=d.GetPayLoadError=d.HardwareDerivePubKeyError=d.CalcTxHashError=d.SignMsgStep3Error=d.SignMsgSetupError=d.Ed25519Step3Error=d.Ed25519Step2Error=d.Ed25519Step1Error=d.Ed25519SetupError=d.EcdsaStep3Error=d.EcdsaStep2Error=d.EcdsaStep1Error=d.EcdsaSetupError=d.MPCShakeHandsError=d.MPCStepError=d.MPCAesKeyMissError=d.GetHardWareMessageHashError=d.GetHardwareSignedTransactionError=d.GetHardwareRawTransactionError=d.GetMpcTransactionError=d.GetMpcRawTransactionError=d.DerivePathError=d.GenMnemonicError=d.GenPrivateKeyError=d.UnsupportedCoinError=d.SignMsgError=d.SignTxError=d.ValidAddressError=d.NewAddressError=d.NotImplementedError=void 0;d.NotImplementedError="no implementation method";d.NewAddressError="generate address error";d.ValidAddressError="valid address error";d.SignTxError="sign tx error";d.SignMsgError="sign message error";d.UnsupportedCoinError="unsupported currency";d.GenPrivateKeyError="generate private key error";d.GenMnemonicError="generate mnemonic error";d.DerivePathError="derive hdPath error";d.GetMpcRawTransactionError="get mpc raw transaction error";d.GetMpcTransactionError="get mpc transaction error";d.GetHardwareRawTransactionError="get hardware raw transaction error";d.GetHardwareSignedTransactionError="get hardware signed transaction error";d.GetHardWareMessageHashError="get hardware message hash error";d.MPCAesKeyMissError="mpc get aes key error";d.MPCStepError="mpc step error";d.MPCShakeHandsError="mpc shake hands error";d.EcdsaSetupError="ecdsa setup error";d.EcdsaStep1Error="ecdsa step1 error";d.EcdsaStep2Error="ecdsa step2 error";d.EcdsaStep3Error="ecdsa step3 error";d.Ed25519SetupError="ed25519 setup error";d.Ed25519Step1Error="ed25519 step1 error";d.Ed25519Step2Error="ed25519 step2 error";d.Ed25519Step3Error="ed25519 step3 error";d.SignMsgSetupError="sign message setup error";d.SignMsgStep3Error="sign message step3 error";d.CalcTxHashError="calculate tx hash error";d.HardwareDerivePubKeyError="derive sub pub key error";d.GetPayLoadError="get payload error";d.validSignedTransactionError="valid signed transaction error";d.EstimateFeeError="estimate fee error";d.SignCommonMsgError="sign common msg error"});var _s=m(V=>{"use strict";a();c();Object.defineProperty(V,"__esModule",{value:!0});V.jsonStringifyUniform=V.cloneObject=V.assertBufferLength=V.convert2BigNumber=V.convert2Number=V.buildCommonSignMsg=void 0;var Rr=ye();function Ua(e,r){return`OKX Wallet Sign In

publicKey: ${e}
walletId: ${r}
host: api.wallet.okx
OKX Wallet Sign In`}V.buildCommonSignMsg=Ua;function Va(e){if(e!=null)return typeof e=="string"?parseInt(e):e}V.convert2Number=Va;function Fa(e){if(e!=null)return Rr.BigNumber.isBigNumber(e)?e:new Rr.BigNumber(e)}V.convert2BigNumber=Fa;function ka(e,r){if(e.length!=r)throw Error("buffer length is illegal")}V.assertBufferLength=ka;function Ga(e){return JSON.parse(JSON.stringify(e))}V.cloneObject=Ga;function Wa(e){return JSON.stringify(e,(r,t)=>t&&(t.type==="Buffer"||t instanceof Uint8Array?Rr.base.toHex(t):typeof t=="bigint"?t.toString():t))}V.jsonStringifyUniform=Wa});var It=m(Te=>{"use strict";a();c();var Xa=Te&&Te.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var s=Object.getOwnPropertyDescriptor(r,t);(!s||("get"in s?!r.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,s)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Ya=Te&&Te.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&Xa(r,e,t)};Object.defineProperty(Te,"__esModule",{value:!0});Ya(_s(),Te)});var Ts=m(P=>{"use strict";a();c();Object.defineProperty(P,"__esModule",{value:!0});P.SimpleWallet=P.BaseWallet=P.ecdsaSign=P.fromSigned=P.padWithZeroes=P.toUnsigned=P.intToHex=P.makeSignature=P.secp256k1SignTest=void 0;var H=Ht(),$e=xt(),I=ye(),Ja=It();function ys(e){let r=I.base.sha256("secp256k1-test"),t=I.signUtil.secp256k1.publicKeyCreate(e,!1),{signature:n,recovery:s}=I.signUtil.secp256k1.sign(p.Buffer.from(r),e);return I.signUtil.secp256k1.verify(r,n,s,t)}P.secp256k1SignTest=ys;function bs(e,r,t){let n=(0,P.fromSigned)(r),s=(0,P.fromSigned)(t),i=e,o=Mt((0,P.toUnsigned)(n).toString("hex"),64),u=Mt((0,P.toUnsigned)(s).toString("hex"),64);return I.base.stripHexPrefix(Ss(i)).concat(o,u)}P.makeSignature=bs;function Ss(e){return`0x${e.toString(16)}`}P.intToHex=Ss;var Za=function(e){return p.Buffer.from(e.toTwos(256).toArray())};P.toUnsigned=Za;function Mt(e,r){if(e!==""&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(r<0)throw new Error(`Expected a non-negative integer target length. Received: ${r}`);return String.prototype.padStart.call(e,r,"0")}P.padWithZeroes=Mt;var za=function(e){return new I.BN(e).fromTwos(256)};P.fromSigned=za;function Es(e,r,t){let{signature:n,recovery:s}=I.signUtil.secp256k1.sign(e,r),i=p.Buffer.from(n.slice(0,32)),o=p.Buffer.from(n.slice(32,64));if(t&&!Number.isSafeInteger(t))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");return{v:t?s+(t*2+35):s+27,r:i,s:o}}P.ecdsaSign=Es;var Kr=class{getRandomPrivateKey(){try{for(;;){let r=I.base.randomBytes(32);if(ys(r))return Promise.resolve(I.base.toHex(r,!0))}}catch{}return Promise.reject(H.GenPrivateKeyError)}getDerivedPrivateKey(r){return I.bip39.mnemonicToSeed(r.mnemonic).then(t=>{let n=I.bip32.fromSeed(t).derivePath(r.hdPath);if(n.privateKey){let s=I.base.toHex(n.privateKey);return Promise.resolve("0x"+s)}else return Promise.reject(H.GenPrivateKeyError)}).catch(t=>Promise.reject(H.GenPrivateKeyError))}getDerivedPath(r){return Promise.reject(H.NotImplementedError)}validPrivateKey(r){return Promise.reject(H.NotImplementedError)}signMessage(r){return Promise.reject(H.NotImplementedError)}async signCommonMsg(r){r.signType||(r.signType=$e.SignType.Secp256k1);let t;if(r.message.text)t=r.message.text;else{let u;if(r.publicKey?u=r.publicKey:u=(await this.getNewAddress({privateKey:r.privateKey,addressType:r.addressType,hrp:r.hrp,version:r.version})).publicKey,u.startsWith("0x")&&(u=u.substring(2)),!r.message.walletId)return Promise.reject("invalid walletId");t=(0,Ja.buildCommonSignMsg)(u,r.message.walletId)}let n=I.base.magicHash(t),s=r.privateKeyHex?r.privateKeyHex:r.privateKey,i=I.base.fromHex(s);var o;switch(r.signType){case $e.SignType.Secp256k1:let{v:u,r:f,s:l}=Es(p.Buffer.from(n),i);return Promise.resolve(bs(u,f,l));case $e.SignType.ECDSA_P256:return o=I.signUtil.p256.sign(p.Buffer.from(n),i).signature,Promise.resolve(I.base.toHex(o));case $e.SignType.ED25519:return o=I.signUtil.ed25519.sign(n,i),Promise.resolve(I.base.toHex(o));case $e.SignType.StarknetSignType:return o=I.signUtil.schnorr.stark.sign(n,i).toCompactRawBytes(),Promise.resolve(I.base.toHex(o));case $e.SignType.TezosSignType:return Promise.reject("not support")}}verifyMessage(r){return Promise.reject(H.NotImplementedError)}ecRecover(r,t){return Promise.reject(H.NotImplementedError)}getAddressByPublicKey(r){return Promise.reject(H.NotImplementedError)}getMPCRawTransaction(r){return Promise.reject(H.NotImplementedError)}getMPCTransaction(r){return Promise.reject(H.NotImplementedError)}getMPCRawMessage(r){return Promise.reject(H.NotImplementedError)}getMPCSignedMessage(r){return Promise.reject(H.NotImplementedError)}getHardWareRawTransaction(r){return Promise.reject(H.NotImplementedError)}getHardWareSignedTransaction(r){return Promise.reject(H.NotImplementedError)}getHardWareMessageHash(r){return Promise.reject(H.NotImplementedError)}calcTxHash(r){return Promise.reject(H.NotImplementedError)}getRawTransaction(r){return Promise.reject(H.NotImplementedError)}validSignedTransaction(r){return Promise.reject(H.NotImplementedError)}estimateFee(r){return Promise.reject(H.NotImplementedError)}};P.BaseWallet=Kr;var Dt=class extends Kr{mockData(r,t){this.mockAddress=r,this.mockPublicKey=t}getNewAddress(r){return Promise.resolve({address:this.mockAddress,publicKey:this.mockPublicKey})}validAddress(r){throw new Error("Method not implemented.")}signTransaction(r){throw new Error("Method not implemented.")}};P.SimpleWallet=Dt});var As=m(Q=>{"use strict";a();c();var Qa=Q&&Q.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var s=Object.getOwnPropertyDescriptor(r,t);(!s||("get"in s?!r.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,s)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),rr=Q&&Q.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&Qa(r,e,t)};Object.defineProperty(Q,"__esModule",{value:!0});rr(xt(),Q);rr(ms(),Q);rr(Ht(),Q);rr(Ts(),Q);rr(It(),Q)});var Ps=m($r=>{"use strict";a();c();Object.defineProperty($r,"__esModule",{value:!0});$r.StarknetWallet=void 0;var ee=As(),re=ye(),j=ze(),jt=ie(),vs=q();function ec(e){if(!e)return!1;let r=e.toLowerCase().startsWith("0x")?e.substring(2).toLowerCase():e.toLowerCase();return!(r.length===0||!r.match(/^[0-9A-Fa-f]*$/))}function Cs(e){if(!ec(e))return!1;let r=re.base.fromHex(e.toLowerCase());return!(r.length<25||r.length>33||r.every(t=>t===0))}var qt=class extends ee.BaseWallet{getRandomPrivateKey(){return(0,j.GetRandomPrivateKey)()}async getDerivedPath(r){return`m/44'/9004'/0'/0/${r.index}`}async getDerivedPrivateKey(r){return re.bip39.mnemonicToSeed(r.mnemonic).then(t=>{let n=re.bip32.fromSeed(t).derivePath("m/44'/60'/0'/0/0");if(!n.privateKey)return Promise.reject(ee.GenPrivateKeyError);let s=p.Buffer.from(n.privateKey),i=re.bip32.fromSeed(s).derivePath(r.hdPath);if(i.privateKey){let o=re.base.toHex(i.privateKey),u=j.ec.starkCurve.grindKey(o);return Promise.resolve(`0x${u}`)}else return Promise.reject(ee.GenPrivateKeyError)}).catch(t=>Promise.reject(ee.GenPrivateKeyError+":"+t))}async getNewAddress(r){if(!Cs(r.privateKey))throw new Error("invalid key");try{let t=(0,j.modPrivateKey)(r.privateKey),n=j.ec.starkCurve.getStarkKey(t),i={address:(0,j.CalculateContractAddressFromHash)(n),publicKey:n};return Promise.resolve(i)}catch(t){return Promise.reject(ee.NewAddressError+":"+t)}}async validPrivateKey(r){let n={isValid:Cs(r.privateKey),privateKey:r.privateKey};return Promise.resolve(n)}async signTransaction(r){try{let t=r.data;if(t.nonce===void 0||t.maxFee===void 0)return Promise.reject(ee.SignTxError);let n=t.nonce,s=t.maxFee,i=t.chainId||j.constants.StarknetChainId.SN_MAIN,o=(0,j.modPrivateKey)(r.privateKey);if(t.type=="transfer"&&t.transferData!==void 0){let u=t.transferData.contractAddress,f=t.transferData.from,l=t.transferData.to,h=t.transferData.amount,_=await(0,j.CreateTransferTx)(u,f,l,h,n,s,i,o);return Promise.resolve(_)}else if(t.type=="deploy_account"){let u=await(0,j.CreateSignedDeployAccountTx)(n,s,i,o);return Promise.resolve(u)}else if(t.type=="contract_call"&&t.contractCallData!==void 0){let u=t.contractCallData.contractAddress,f=t.contractCallData.from,l=t.contractCallData.functionName,h=t.contractCallData.callData,_=await(0,j.CreateContractCall)(u,f,l,h,n,s,i,o);return Promise.resolve(_)}else if(t.type=="multi_contract_call"&&t.multiContractCallData!==void 0){let u=t.multiContractCallData.from,f=t.multiContractCallData.calls,l=(0,j.CreateMultiContractCall)(u,f,n,s,i,o);return Promise.resolve(l)}return Promise.reject(ee.SignTxError)}catch(t){return Promise.reject(ee.SignTxError+":"+t)}}async validAddress(r){let t;try{(0,j.validateAndParseAddress)(r.address),t=r.address.startsWith("0x")&&r.address.length>50}catch{t=!1}let n={isValid:t,address:r.address};return Promise.resolve(n)}async signMessage(r){try{let t=(0,j.modPrivateKey)(r.privateKey);if(typeof r.data.message=="string"){let n=r.data.message;if(n.startsWith("0x")){let s=(0,j.signMessage)(n,t);return Promise.resolve(s)}}else{let n=r.data.message,s=await(0,j.signMessageWithTypeData)(n,t);return Promise.resolve(s)}}catch(t){return Promise.reject(ee.SignTxError+":"+t)}}async signCommonMsg(r){let t;if(r.message.text)t=r.message.text;else{let _=await this.getNewAddress({privateKey:r.privateKey});_.publicKey.startsWith("0x")&&(_.publicKey=_.publicKey.substring(2)),t=(0,ee.buildCommonSignMsg)(_.publicKey,r.message.walletId)}let n=re.base.magicHash(t),s=n.slice(0,16),i=n.slice(16),o=(0,j.computeHashOnElements)([(0,vs.hexToDecimalString)(re.base.toHex(s)),(0,vs.hexToDecimalString)(re.base.toHex(i))]);o.startsWith("0x")&&(o=o.substring(2));let u=(0,j.modPrivateKey)(r.privateKey),f=jt.starkCurve.sign(o,u),l=jt.starkCurve.ProjectivePoint.fromHex(re.base.toHex(jt.starkCurve.getPublicKey(u))),h={publicKey:l.x.toString(16),publicKeyY:l.y.toString(16),signedDataR:f.r.toString(16),signedDataS:f.s.toString(16)};return Promise.resolve(re.base.toHex(re.base.toUtf8((0,ee.jsonStringifyUniform)(h))))}verifyMessage(r){try{let t=r.data.signature,n=r.data.hash,s=r.data.publicKey;return Promise.resolve((0,j.verifyMessage)(t,n,s))}catch(t){return Promise.reject(t)}}};$r.StarknetWallet=qt});var ze=m(g=>{a();c();var Os=g&&g.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var s=Object.getOwnPropertyDescriptor(r,t);(!s||("get"in s?!r.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,s)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),rc=g&&g.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Ae=g&&g.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&Os(r,e,t)},K=g&&g.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Os(r,e,t);return rc(r,e),r};Object.defineProperty(g,"__esModule",{value:!0});g.modPrivateKey=g.testSign=g.GetRandomPrivateKey=g.verifyMessage=g.signMessage=g.signMessageWithTypeData=g.CreateMultiContractCall=g.CreateContractCall=g.CreateTransferTx=g.CreateSignedDeployAccountTx=g.CalculateContractAddressFromHash=g.number=g.typedData=g.shortString=g.uint256=g.merkle=g.ec=g.stark=g.transaction=g.num=g.json=g.hash=g.encode=g.constants=void 0;var nr=wt();Ae(St(),g);Ae(Tt(),g);Ae(te(),g);Ae(wt(),g);g.constants=K(Ce());g.encode=K(de());g.hash=K(te());g.json=K(_r());g.num=K(q());g.transaction=K(Or());g.stark=K(Hr());g.ec=K(ie());g.merkle=K(mt());g.uint256=K(Jr());g.shortString=K(oe());g.typedData=K(Nr());Ae(Nt(),g);Ae(Me(),g);Ae(Ps(),g);var tc=K(q());g.number=tc;var tr=K(ie()),Lt=K(te()),Ur=Ce(),Fr=K(_r()),nc=Nt(),me=ye(),sc=ie(),Vr=Me(),sr=de();function Bt(e){let r={implementation:Ur.accountClassHash,selector:Lt.getSelectorFromName("initialize"),calldata:Vr.CallData.compile({signer:e,guardian:"0"})},t=Lt.calculateContractAddressFromHash(e,Ur.ProxyAccountClassHash,Vr.CallData.compile(r),0);return(0,nc.addAddressPadding)(t)}g.CalculateContractAddressFromHash=Bt;async function ic(e,r,t,n){let s=tr.starkCurve.getStarkKey(n),i=Bt(s),o=new nr.Account(i,(0,sr.addHexPrefix)(n)),u={implementation:Ur.accountClassHash,selector:Lt.getSelectorFromName("initialize"),calldata:Vr.CallData.compile({signer:s,guardian:"0"})},f=Vr.CallData.compile(u),l=await o.deployAccount({addressSalt:s,classHash:Ur.ProxyAccountClassHash,constructorCalldata:f,contractAddress:i},{nonce:e,maxFee:r,chainId:t});return{txId:l.txId,signature:Fr.stringify(l.signature)}}g.CreateSignedDeployAccountTx=ic;async function oc(e,r,t,n,s,i,o,u){let l=await new nr.Account(r,(0,sr.addHexPrefix)(u)).execute({contractAddress:e,entrypoint:"transfer",calldata:[t,n,0]},void 0,{nonce:s,maxFee:i,chainId:o});return{txId:l.txId,signature:Fr.stringify(l.signature)}}g.CreateTransferTx=oc;async function ac(e,r,t,n,s,i,o,u){let f=new nr.Account(r,(0,sr.addHexPrefix)(u));n||(n=[]);let l=await f.execute({contractAddress:e,entrypoint:t,calldata:n},void 0,{nonce:s,maxFee:i,chainId:o});return{txId:l.txId,signature:Fr.stringify(l.signature)}}g.CreateContractCall=ac;async function cc(e,r,t,n,s,i){let o=new nr.Account(e,(0,sr.addHexPrefix)(i)),u=r.map(l=>({contractAddress:l.contract_address?l.contract_address:l.contractAddress,entrypoint:l.entry_point?l.entry_point:l.entrypoint,calldata:l.calldata})),f=await o.execute(u,void 0,{nonce:t,maxFee:n,chainId:s});return{txId:f.txId,signature:Fr.stringify(f.signature)}}g.CreateMultiContractCall=cc;async function uc(e,r){let t=me.signUtil.schnorr.stark.getPublicKey(r),n=tr.starkCurve.getStarkKey(r),s=Bt(n),i=new nr.Account(s,(0,sr.addHexPrefix)(r)),o=await i.signMessage(e),u=await i.hashMessage(e);return{signature:o,hash:u,publicKey:t}}g.signMessageWithTypeData=uc;async function lc(e,r){let t=me.signUtil.schnorr.stark.getPublicKey(r);return{signature:sc.starkCurve.sign(e,r),hash:e,publicKey:t}}g.signMessage=lc;function dc(e,r,t){return me.signUtil.schnorr.stark.verify(e,r,t)}g.verifyMessage=dc;async function fc(){for(;;){let e=me.base.randomBytes(32);if(gc(e)&&ws(e.toString("hex")))return`0x${me.signUtil.schnorr.bytesToHex(e)}`}}g.GetRandomPrivateKey=fc;function ws(e){let r="7465dd6b1bbffdb05442eb17f5ca38ad1aa78a6f56bf4415bdee219114a47a1",t=tr.starkCurve.sign(r,e),n=me.signUtil.schnorr.stark.getPublicKey(e);return tr.starkCurve.verify(t,r,n)}g.testSign=ws;function gc(e){let r=new me.BN(Array.from(e)),t=new me.BN(tr.starkCurve.CURVE.n.toString());return r.cmp(t)<0&&!r.isZero()}var pc=BigInt("3618502788666131213697322783095070105526743751716087489154079457884512865583");function hc(e){let r;return!e.startsWith("0x")&&!e.startsWith("0X")?r=`0x${e}`:r=e,"0x"+(BigInt(r.toLowerCase())%pc).toString(16)}g.modPrivateKey=hc});export{ze as a};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-DBBA3IKU.js.map
