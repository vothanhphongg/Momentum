import{b as D,c as U}from"./chunk-NTQ2YVDA.js";import{n as W}from"./chunk-IRMYAC6R.js";import{b as N,c as C}from"./chunk-Y2TPPS4H.js";import{a as g}from"./chunk-YALUYHLV.js";import{ec as z}from"./chunk-HPWCPLRR.js";import{a as J}from"./chunk-ON6S2DB7.js";import{h as R,k as x,l as v}from"./chunk-3DZ7WRLL.js";import{c as T}from"./chunk-N2BCRNDB.js";import{$c as f,I as E,K as u,ha as q,kb as _,rc as Q,rd as j}from"./chunk-TM67VPZU.js";import{H as I}from"./chunk-PUSMMCUD.js";import{R as O,z as y}from"./chunk-UWJLNJLY.js";import{b as H}from"./chunk-JWYCKY2V.js";import{f as w,o as a,q as l}from"./chunk-6KXF36WM.js";a();l();var Y=w(H()),k=w(J());O();a();l();var K=w(z());a();l();v();var V=x({name:"assetsSlice",initialState:{assets:[]},reducers:{setAssets:(t,r)=>{t.assets=r.payload}}}),{actions:X,reducer:Z}=V,$=[],b=R(t=>t.assetsSlice.assets??$,t=>t.reduce((r,s)=>r.set(s.walletId,s),new Map)),ot=()=>async t=>{(await T.assets).liveQuery().subscribe((s,c)=>{c||t(X.setAssets(s))})},at=Z;function B(){return(0,K.useSelector)(b)}a();l();j();Q();q();var P=({walletAccounts:t,rpcData:r,assetsMap:s,showNftAmount:c,selectedCurrency:A})=>{let m=t.map(e=>{if(!e)return{walletAsset:"0",platformAsset:"0"};let{walletId:o}=e;if(!!r){let{chainTokensAccountMap:S}=r,p=e?.account?.[_];if(!p||[f.HD_KEYRING,f.SIMPLE_KEYRING,f.MPC_KEYRING].indexOf(e?.initialType)<0)return{unsupported:!0,walletAsset:"0",platformAsset:"0",...e};let{balance:L="0"}=S[p]?.filter(({address:F})=>!F)[0]||{};return{walletAsset:L,platformAsset:"0",...e}}let n=s.get(o),G=(n?[n.tokenTotalAssetsUSD,n.defiTotalAssetsUSD,c?n.nftTotalAssetsUSD:"0"]:[]).reduce((S,p)=>u(S,p),"0");return{walletAsset:n?E(G,A.usdToThisRate):"--",platformAsset:n?n.platformTotalAssetsUSD:"--",...e}}),{walletAsset:i,platformAsset:d}=m.reduce((e,o)=>({walletAsset:u(e.walletAsset,o.walletAsset==="--"?"0":o.walletAsset),platformAsset:u(e.platformAsset,o.platformAsset==="--"?"0":o.platformAsset)}),{walletAsset:"0",platformAsset:"0"});return{walletAccountsWidthBalance:m,walletAsset:i,platformAsset:d}};var tt=t=>{let r=(0,k.useHistory)(),s=W(t),[c]=C(N.showNftAmount),A=D(),m=U(A),i=B();return s||(I.error(y("wallet_extension_top_error_parameters")),r.push(g)),(0,Y.useMemo)(()=>{let{walletIdentities:d}=s,{walletAccountsWidthBalance:e,walletAsset:o,platformAsset:h}=P({walletAccounts:d,showNftAmount:c,rpcData:null,selectedCurrency:m,assetsMap:i});return{...s,walletAsset:o,platformAsset:h,walletIdentities:e}},[s,c,m,i])},Ct=tt;export{ot as a,at as b,B as c,P as d,Ct as e};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-FHKOH5E6.js.map
