import{a as q,c as ie,d as Ae}from"./chunk-BEARJZIP.js";import{a as Me,b as Ge,c as Oe,e as Ue,f as qe,g as Ye,h as Ve,i as ze,j as je,m as He,n as j}from"./chunk-AK5XDPVX.js";import"./chunk-HBNKRX4V.js";import"./chunk-EEFD5KZC.js";import"./chunk-73ZHJYCP.js";import"./chunk-3NSLXJYR.js";import"./chunk-ENPNPH37.js";import"./chunk-5QJIR6ZJ.js";import"./chunk-H6SNSZIS.js";import"./chunk-YWECPG37.js";import{q as Be}from"./chunk-AXJECT36.js";import{i as De,j as Le,l as We}from"./chunk-5BIOTNBS.js";import"./chunk-R5SMHBLJ.js";import"./chunk-IY4RYRL6.js";import"./chunk-4OAEJJK5.js";import"./chunk-34VLVCKN.js";import"./chunk-J4ZKBKEJ.js";import"./chunk-TFJRUJHH.js";import"./chunk-7NMUCCUG.js";import"./chunk-YF3DWJDS.js";import{g as Fe,h as ne}from"./chunk-RH4ISAHA.js";import{y as Pe}from"./chunk-ECQND2NK.js";import"./chunk-W3L3YTJO.js";import"./chunk-M5NI6HPE.js";import"./chunk-YQHUKBMA.js";import"./chunk-VM2NMLPX.js";import{a as se}from"./chunk-YP7CHBKG.js";import{f as Ne}from"./chunk-FNXLAYUB.js";import{a as re,g as ke,l as $}from"./chunk-PQK3LXXN.js";import{$c as z,V as xe,Va as Te,W as ue,Wa as ye,X as he,Xa as Ce,Ya as Ie,Zc as _,vb as Ee}from"./chunk-FTRHGHDS.js";import{c as m}from"./chunk-XT3EOPTE.js";import{B as d,m as u}from"./chunk-A6Z53EN6.js";import"./chunk-LL63GZNI.js";import"./chunk-M7CL2K7X.js";import"./chunk-W2CTJYFJ.js";import"./chunk-XUKVTAH5.js";import"./chunk-5OJTPISL.js";import"./chunk-7UPVX2FL.js";import"./chunk-BSFXZ46S.js";import"./chunk-ZMCTBWUY.js";import"./chunk-JI6FOZGR.js";import"./chunk-O6ZBO5JF.js";import"./chunk-TSTPZ3JM.js";import{a as It}from"./chunk-ON6S2DB7.js";import"./chunk-VW6OQNWT.js";import{d as V,e as be,h as Z}from"./chunk-PUSMMCUD.js";import"./chunk-UWJLNJLY.js";import{j as oe,ra as ve}from"./chunk-XDY6V34Y.js";import{$ as fe,ea as A}from"./chunk-JT3LNHPY.js";import"./chunk-47UWF72W.js";import{b}from"./chunk-JWYCKY2V.js";import"./chunk-G2266BV2.js";import"./chunk-NM2PDVBD.js";import"./chunk-7VFUX7IX.js";import{f,o as t,q as o}from"./chunk-6KXF36WM.js";t();o();var h=f(b()),xt=f(It()),we=f(z());t();o();var N=f(b());var Et=()=>{let{HeaderTip:e}=d.components,{walletContractStore:r,fromToStore:s,quoteStore:a}=m(),{noCurrentPathTipInfo:{visible:n,bridgeName:i}}=a,{gasInfo:l,gasLimitError:c,starknetRegisterStatus:S,setVisibleStarknetRegister:p,computedPriceUpdate:T,computedSolonaNativeTokenSufficientRent:w,solonaRent:v,gasFee:y,nativeCoin:E,compuletedGetNativeCoinError:C,compuletedGetNativeCoinLoading:I,computedTipsBtnProps:k}=r,{from:F}=s,{symbol:U}=E??{},P={type:V.TYPE.error,renderGasStation:!1},Y=()=>N.default.createElement(e,{type:V.TYPE.warn,message:_("swaptrade_extension_cinteraction_insufficient_networkfee",{symbol:U}),actions:[k],renderGasStation:!1}),D=()=>N.default.createElement(e,{...P,message:_("swaptrade_extension_cinteraction_might_error")}),te=()=>N.default.createElement(e,{...P,type:V.TYPE.warn,message:_("swaptrade_xrouting_dialog_market_fluctuations_default",{value:i})}),pe=()=>N.default.createElement(e,{...P,message:c}),ht=()=>N.default.createElement(e,{...P,message:N.default.createElement(N.default.Fragment,null,N.default.createElement("p",null,_("swaptrade_extension_errortip_address_not_registered")),N.default.createElement(Z,{type:Z.TYPE.primary,weight:Z.WEIGHT.muted,size:Z.SIZE.xs,onClick:()=>{p(!0)}},_("swaptrade_extension_textbtn_registor_now")))}),Tt=()=>N.default.createElement(e,{...P,type:V.TYPE.warn,message:_("swaptrade_extension_errortip_chainname_address_registering",{chainName:F.chainName})}),yt=()=>N.default.createElement(e,{actions:[k],renderGasStation:!1,message:_("swaptrade_transfer_textarea_quote_expired")}),Ct=()=>N.default.createElement(e,{actions:[k],type:V.TYPE.warn,renderGasStation:!1,message:_("swaptrade_extension_solana_insufficient_sol_balance",{number:ke(re.BigNumber(v||0).plus(y).toFixed(9),{sigFigs:9})})});if(I)return null;if(C)return N.default.createElement(e,{...P,message:_("swaptrade_history_error_retrieve_balance_error")});if(S===d.global.RegisterLocalStatusEnum.NOT_STARTED)return ht();if(S===d.global.RegisterLocalStatusEnum.PROCESSING)return Tt();if(c)return pe();if(r.computedIsSufficientGas&&l?.gasLimitInfo?.queryGasLimitErrorUseDefault)return D();if(w)if(r.computedIsSufficientGas){if(n)return te();if(T)return yt()}else return Y();else return Ct();return null},Ze=u(Et);t();o();var Q=f(b());t();o();var $e={gap:"_gap_lzws5_1"};var kt=(e="")=>{let{commonStore:r}=m(),{currentTab:s}=r,n=(e||s)===Ee.SWAP;return{image:{light:n?Te():Ce(),dark:n?ye():Ie()},title:{text:n?_("swaptrade_top_segmentedctl_swap"):_("swaptrade_bridge_order_title_bridge")}}},Nt=({fromList:e,toList:r})=>{let{components:{MultipleChangeSummary:s,TxTypeWithTools:a}}=d,n=kt();return Q.default.createElement(a,{txTypeInfo:{baseInfo:n}},Q.default.createElement("div",{className:$e.gap},Q.default.createElement(s,{title:_("swaptrade_orders_label_sell"),summaryList:e}),Q.default.createElement(s,{title:_("swaptrade_orders_label_receive"),summaryList:r})))},Qe=u(Nt);t();o();var x=f(b()),de=f(z());t();o();var B=f(b()),Je=f(z());t();o();var W={"chain-logos":"_chain-logos_11m0k_1",chainLogos:"_chain-logos_11m0k_1","bridge-logo":"_bridge-logo_11m0k_2",bridgeLogo:"_bridge-logo_11m0k_2",w100:"_w100_11m0k_15","icon-color":"_icon-color_11m0k_18",iconColor:"_icon-color_11m0k_18",exchange:"_exchange_11m0k_26","increase-weight":"_increase-weight_11m0k_26",increaseWeight:"_increase-weight_11m0k_26",icon:"_icon_11m0k_18","show-data-icon":"_show-data-icon_11m0k_54",showDataIcon:"_show-data-icon_11m0k_54","visible-set":"_visible-set_11m0k_58",visibleSet:"_visible-set_11m0k_58",rotate:"_rotate_11m0k_1","call-data":"_call-data_11m0k_61",callData:"_call-data_11m0k_61"};var Ft=({bridge:e})=>{let r=(0,B.useRef)(null),[s,a]=(0,B.useState)(null);return(0,B.useEffect)(()=>{let n=r.current;if(n){let i=n.getBoundingClientRect().width;a(i)}},[e]),B.default.createElement("div",{ref:r,className:(0,Je.default)("flex align-items-center justify-content-start",W.w100)},B.default.createElement(be,{className:W.bridgeLogo,src:e?.bridgeLogoUrl,alt:e?.bridgeName,width:20,height:20}),B.default.createElement(q,{maxWidth:s,text:e?.bridgeName}))},Xe=Ft;t();o();var L=f(b()),Ke=f(z());var Pt=({networks:e})=>{let r=(0,L.useRef)(null),[s,a]=(0,L.useState)(null);return(0,L.useEffect)(()=>{let n=r.current;if(n){let i=n.getBoundingClientRect().width;a(i)}},[e]),L.default.createElement("div",{ref:r,className:(0,Ke.default)("flex align-items-center justify-content-start",W.w100)},L.default.createElement("div",{className:W.chainLogos},e.map(({chainName:n,chainLogoUrl:i})=>L.default.createElement("img",{src:i,alt:`${n}Logo`,key:n}))),L.default.createElement(q,{maxWidth:s,text:e.map(({chainName:n})=>n).join(` ${_("swaptrade_order_info_label_network_to")} `)}))},Re=Pt;var Dt=({type:e})=>{let{rate:r,toFromRate:s,minimumReceived:a,isFromBtcCoin:n,isEvmChain:i,data:l,walletId:c,address:S,networks:p,bridge:T,hideExchangeBtn:w,fromToken:v,toToken:y,isIntentSwap:E,name:C,logo:I,enableQuoteAggregates:k,estimatedTime:F,computedIsCrossChain:U}=Oe(e),{components:{SectionWrap:P,InteractiveAddress:Y,ModuleWrap:D,ViewData:te}}=d;return x.default.createElement(x.default.Fragment,null,x.default.createElement(P,null,x.default.createElement(Y,{title:_("swaptrade_transfer_textarea_wallet_used"),address:S,walletId:c})),x.default.createElement(P,{bordered:!1},k&&C&&I&&x.default.createElement(D,{title:_("swaptrade_mid_dialog_title_provider")},x.default.createElement("div",{className:"flex"},x.default.createElement(Be,{size:20,logo:I,name:C,className:"ml-8 content-primary font-14"}))),T?.bridgeName&&x.default.createElement(D,{title:_("swaptrade_xrouting_single_chain_routes")},x.default.createElement(Xe,{bridge:T})),!n&&x.default.createElement(D,{title:_("swaptrade_extension_cinteraction_reference")},x.default.createElement(Ae,{contentClassName:(0,de.default)("truncate font-14 font-400"),maxWidth:240,from:v.tokenSymbol,to:y.tokenSymbol,rate:r,toFromRate:s,hideExchangeBtn:w,className:(0,de.default)(W.exchange,W.increaseWeight),iconClassName:W.icon,wrapContentClassName:"justify-start"})),U&&x.default.createElement(D,{title:_("swaptrade_bridge_select_label_est_time")},x.default.createElement(q,{text:_("swaptrade_xrouting_tag_mins",{value:F})})),!n&&x.default.createElement(D,{title:_("swaptrade_card_swap_label3_minimum_receive")},x.default.createElement(q,{text:a})),x.default.createElement(D,{title:_("swaptrade_extension_cinteraction_network")},x.default.createElement(Re,{networks:p})),i&&!E&&l&&x.default.createElement(te,{copyable:{hideDesc:!0},data:l})))},et=u(Dt);t();o();var M=f(b()),_e=f(z());t();o();var J={footer:"_footer_1s2g9_1","button-groups":"_button-groups_1s2g9_4",buttonGroups:"_button-groups_1s2g9_4","button-style":"_button-style_1s2g9_10",buttonStyle:"_button-style_1s2g9_10"};var Lt=({onChangeHeight:e,type:r})=>{let s=(0,M.useRef)(null),{walletContractStore:a}=m(),{computedConfirmBtnProps:n,computedCancelBtnProps:i}=a;return(0,M.useEffect)(()=>{let l=S=>{e&&e(S.offsetHeight)},c=new MutationObserver(S=>{l(S[0]?.target)});return s.current&&(l(s.current),c.observe(s.current,{childList:!0})),()=>{c.disconnect()}},[e]),M.default.createElement("div",{ref:s,className:(0,_e.default)(J.footer)},M.default.createElement("div",{className:(0,_e.default)(J.buttonGroups)},M.default.createElement(A,{block:!0,circle:!1,className:J.buttonStyle,size:A.SIZE.lg,category:A.CATEGORY.outline,type:A.TYPE.primary,loading:i.loading,loadingText:i.btnText,disabled:i.disabled,onClick:i.onClick},i.btnText),M.default.createElement(A,{block:!0,circle:!1,className:J.buttonStyle,size:A.SIZE.lg,type:A.TYPE.highlight,category:A.CATEGORY.fill,loading:n.loading,loadingText:n.btnText,disabled:n.disabled,onClick:()=>{n.onClick(r)}},n.btnText)))},tt=u(Lt);t();o();var ae=f(b());t();o();var ot={mev:"_mev_c6yzz_1"};var Wt=()=>{let{components:{Mev:e}}=d,{quoteStore:{quote:r},mevStore:s,fromToStore:a,walletContractStore:n}=m(),{bestRoute:i}=r||{},{preExecutionResult:l}=n,{computedIsEvmChain:c}=a,S=i?.isEnableMev,{computedIsMevOpen:p,setMevUserSwitchOpen:T,setMevInfo:w,setWalletMevControl:v,walletMevControl:y}=s,E=!p&&Number(S)===he.ON;return(0,ae.useEffect)(()=>()=>{v(!1)},[v]),!c||l&&!l.mevInfo?null:ae.default.createElement(e,{serverMevInfo:l.mevInfo||{},className:ot.mev,isMev:y||p,needTooltip:!1,isShowBlockSwapMevTooltip:E,onMevChange:(C,I)=>{ne.info(Fe.USER_ON_OR_OFF_MEV_IN_WALLET,{isMev:C}),v(C),T(C?ue.USER_ON:ue.USER_OFF),w(I)}})},rt=u(Wt);t();o();var ce=f(b());t();o();var at=f(b());t();o();var G=f(b());t();o();var le=f(b());var me={SLOW:"slow",STANDARD:"standard",FAST:"fast",CUSTOM:"custom"};function Bt(){let{useSignInfo:e,useUtxoEstimateFee:r}=d.hooks,{walletContractStore:s,accountStore:a,fromToStore:n}=m(),{nativeCoin:i,transactionPayload:l}=s,{from:c,to:S,value:p,...T}=l||{},w=i?.coinId,{decimals:v,availableBalance:y}=n.from,[E,C]=(0,le.useState)(null),I=e({address:a.address,coinId:w}),k=E?.level||me.STANDARD,F=(0,le.useMemo)(()=>{let pe={[me.SLOW]:"min",[me.STANDARD]:"normal",[me.FAST]:"max"};return I?.[pe[k]]||E?.satBytes||0},[I,k,E?.satBytes]),U=$(p,v),P=$(y,v),[,Y,D]=r({coinId:w,fromAddr:c,toAddr:S,satBytes:F,networkFee:"0",coinAmount:U,canTransferAmount:P,...T});return{loading:re.lte(Y,"0")&&!D,error:D,signInfo:I,option:{level:k,satBytes:F},estimatedFee:Y,setOption:C}}var nt=Bt;t();o();var X=f(b());function At(e){let{loading:r,estimatedFee:s,error:a}=e,{fromToStore:n,walletContractStore:i}=m(),{setGasFeeLoading:l,setGasLimitError:c}=i,{decimals:S}=n.from,{maxGasFee:p}=Ye({maxGasFeeInt:s,estimatedGasFeeInt:s,decimals:S});Ve(p),(0,X.useEffect)(()=>{l(r)},[r,l]),(0,X.useEffect)(()=>{c(a)},[a,c])}function Mt(e){let{signInfo:r,estimatedFee:s,option:a}=e,{useUtxoListFn:n,useUtxoCheckBeforePublishFn:i}=d.hooks,{walletContractStore:l,accountStore:c,fromToStore:S}=m(),{setPreDataForSendBtc:p,nativeCoin:T,transactionPayload:w}=l,{from:v,value:y}=w||{},{decimals:E}=S.from,C=$(y,E),I=n({coinId:T?.coinId,walletId:c.computedAccountId,address:v}),k=i({address:v,coinId:T?.coinId}),{satBytes:F}=a;(0,X.useEffect)(()=>{p({satBytes:F,coinAmount:C,dustSize:r?.minOutput,serviceCharge:s,checkUtxoBeforePublish:U=>k(U,()=>{}),fetchUtxoList:()=>I(C,s)})},[p,F,r?.minOutput,I,k,C,s]),(0,X.useEffect)(()=>()=>{p(null)},[p])}function Gt(e){At(e),Mt(e)}var st=Gt;function Ot(){let{UtxoNetworkFeePanel:e,NetworkFeeEnter:r,SectionWrap:s}=d.components,[a,n]=(0,G.useState)(!1),{walletContractStore:i,commonStore:l}=m(),c=nt();st(c);let{loading:S,signInfo:p,estimatedFee:T,option:w,setOption:v,error:y}=c,{nativeCoin:E}=i,{chainName:C,symbol:I,coinId:k}=E||{},F=l.nowCurrencyUnit;return G.default.createElement(G.default.Fragment,null,G.default.createElement(s,null,G.default.createElement(r,{title:G.default.createElement(qe,{chainName:C,coinSymbol:I}),coinId:k,loading:S,networkFee:T,estimateFailed:y,onClick:()=>{n(!0)}})),G.default.createElement(e,{visible:a,coinId:k,currencyId:F.currencyId,signInfo:p,value:w,estimatedFee:T,onChange:v,onToggleVisible:()=>{n(!1)}}))}var it=u(Ot);function Ut(){let{walletContractStore:e}=m(),{nativeCoin:r}=e;return se(r?.chainId)?at.default.createElement(it,null):null}var mt=u(Ut);var qt=({type:e,transactionPayload:r})=>{let{fromToStore:s,walletContractStore:a}=m(),{isEvmChain:n}=s,{fromToken:i}=Ge(e);return Ue(i.chainId),a.computedIsIntentSwap?null:se(i.chainId)?i.isNativeToken?ce.default.createElement(mt,null):null:n(i.chainId)?ce.default.createElement(je,{chainId:i.chainId,transactionPayload:r}):ce.default.createElement(ze,{chainId:i.chainId,transactionPayload:r})},lt=u(qt);t();o();var ge=f(b());t();o();var K=f(b());ve();t();o();var O={box:"_box_r55yw_1",label:"_label_r55yw_1",fee:"_fee_r55yw_7"};var Vt=()=>{let{SectionWrap:e}=d.components,{commonStore:r,quoteStore:s}=m(),a=De(oe(s,"quote.bestRoute",{})),{isDisplayServiceFee:n,label:i,tooltip:l,serviceFee:c}=We({...a,formatServiceFeeUsd:r.currencyConversionWithSymbol,nowCurrencySymbol:r.computedNowCurrencySymbol,hasAmountSymbolUsd:!0});return n?K.default.createElement(e,null,K.default.createElement("div",{className:O.box},K.default.createElement(ie,{className:O.label,label:i,tooltip:l}),K.default.createElement("div",{className:O.fee},c))):null},ct=u(Vt);t();o();var R=f(b());ve();var zt=()=>{let{SectionWrap:e}=d.components,{commonStore:r,quoteStore:s}=m(),a=oe(s,"quote.bestRoute.serviceFeeInfo",{}),{isDisplayServiceFee:n,label:i,tooltip:l,serviceFee:c}=Le({...a,formatServiceFeeUsd:r.currencyConversionWithSymbol});return n?R.default.createElement(e,null,R.default.createElement("div",{className:O.box},R.default.createElement(ie,{className:O.label,label:i,tooltip:l}),R.default.createElement("div",{className:O.fee},c))):null},pt=u(zt);var jt=()=>{let{fromToStore:e}=m(),{computedIsCrossChain:r}=e;return r?ge.default.createElement(ct,null):ge.default.createElement(pt,null)},ft=u(jt);t();o();var ee=f(b());t();o();var dt=f(b()),_t=f(z());t();o();var ut={"drawer-mask":"_drawer-mask_jl4xy_1",drawerMask:"_drawer-mask_jl4xy_1","box-padding":"_box-padding_jl4xy_4",boxPadding:"_box-padding_jl4xy_4"};var Ht=({visible:e,children:r})=>{let{Layout:s}=d.components;return e?dt.default.createElement(s.Portal,{className:(0,_t.default)(ut.drawerMask)},r):null},gt=Ht;t();o();var St={drawer:"_drawer_kg0sg_1"};var Zt=()=>{let{hooks:{useRegisterStatus:e},components:{StarknetRegister:r}}=d,{walletContractStore:s}=m(),{registerStatus:a}=e();return(0,ee.useEffect)(()=>{s.setStarknetRegisterStatus(a)},[a,s]),ee.default.createElement(gt,{className:St.drawer,visible:s.visibleStarknetRegister},ee.default.createElement(r,{onBack:()=>{s.setVisibleStarknetRegister(!1)},registerStatus:a}))},wt=u(Zt);t();o();var H=f(b());var vt=()=>{let{global:{preExecTransaction:e,EvmRequestEnum:r,decimalToHex:s}}=d,{quoteStore:{quote:a},walletContractStore:n,fromToStore:i}=m(),{transactionPayload:l,setPreExecutionResult:c}=n,{bestRoute:S}=a||{},{fromToken:p}=S||{},{computedIsEvmChain:T}=i,w=(0,H.useMemo)(()=>{let{data:y,from:E,to:C,value:I}=l||{};return{data:y,from:E,to:C,value:I?s(I):0}},[s,l]),v=(0,H.useCallback)(async()=>{try{let y=await e({from:w.from,chainIndex:p?.chainId,dappData:JSON.stringify(w),method:r.SIGN_TRANSACTION,dappInfo:{}});c(y)}catch(y){ne.error(y)}},[r.SIGN_TRANSACTION,p?.chainId,e,c,w]);(0,H.useEffect)(()=>{T&&w.data&&v()},[T,v,w.data])};t();o();var bt=f(b());function Se(e=!0){let{walletContractStore:r}=m(),{startCountdown:s,clearTimer:a,initCountDown:n}=r;(0,bt.useEffect)(()=>(e&&s(),()=>{a(),n()}),[a,n,s,e])}var $t=()=>{let{fromToStore:e,walletContractStore:r}=m(),{computedIsStarknetChain:s}=e,{loading:a,reset:n,transactionPayload:i}=r,[l,c]=(0,h.useState)(80),{needUpdate:S,type:p}=Me(),{fromList:T,toList:w}=He(p),{search:v}=(0,xt.useLocation)(),{type:y}=Ne(v),E=y!==xe.INTENT_SWAP;return(0,h.useEffect)(()=>{r.setSwapType(p)},[p]),(0,h.useEffect)(()=>{Pe()},[]),Se(S),vt(),(0,h.useEffect)(()=>n,[n]),a?h.default.createElement("div",{className:(0,we.default)(j.container,j.loading)},h.default.createElement(fe,{size:fe.SIZE.lg})):h.default.createElement("div",{className:j.container},h.default.createElement("div",{style:{height:`calc(100% - ${l}px)`},className:(0,we.default)(j.wrap)},h.default.createElement("div",{className:j.scroll,id:"wallet_scroll"},h.default.createElement(Ze,null),h.default.createElement(Qe,{fromList:T,toList:w}),E?h.default.createElement(rt,null):null,h.default.createElement(lt,{type:p,transactionPayload:i}),h.default.createElement(ft,null),h.default.createElement(et,{type:p}))),h.default.createElement(tt,{onChangeHeight:c,type:p}),s&&h.default.createElement(wt,null))},js=u($t);export{js as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=Contract-LVLB7UGT.js.map
