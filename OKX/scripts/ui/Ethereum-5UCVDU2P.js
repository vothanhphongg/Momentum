import{b as Jo,f as Xo,g as $o,h as er}from"./chunk-7ZGKDYR2.js";import{a as Ko,b as st,c as z,d as Qo,e as Zo}from"./chunk-BWUNSDJX.js";import{k as jo}from"./chunk-M5N3SNPA.js";import"./chunk-SJXVXTEI.js";import{a as Vo}from"./chunk-XHICU65C.js";import{a as zo}from"./chunk-5IXP4AVF.js";import{a as qo}from"./chunk-RWQI7GDI.js";import"./chunk-PNUHZ2Q5.js";import{a as Yo}from"./chunk-MOWMAO7P.js";import{a as gt}from"./chunk-DJ522E4U.js";import{a as Uo}from"./chunk-F6DRZBXE.js";import{a as Ho}from"./chunk-DKHD2LWP.js";import{a as Wo}from"./chunk-TBVRCWPO.js";import"./chunk-CBKILZK2.js";import"./chunk-GVFP6PSC.js";import{a as Go}from"./chunk-3RHBRLYM.js";import{a as Ro}from"./chunk-HVMJHKTE.js";import"./chunk-GR4GFB4P.js";import{a as Do}from"./chunk-2W6CXXNZ.js";import{g as Oo}from"./chunk-JUBHPSCA.js";import{a as Ne}from"./chunk-RRTG4E4G.js";import"./chunk-BARA7AIG.js";import{a as Fo,b as Ao,c as Po,e as Lo}from"./chunk-F53ZSIN7.js";import{a as Fe}from"./chunk-RJWOTEDA.js";import{h as vo,i as Bo}from"./chunk-66H5QE4F.js";import{d as xe}from"./chunk-GPDETZNQ.js";import{a as So,b as bo}from"./chunk-M2Q6VTQI.js";import{a as No}from"./chunk-3YGJNBCZ.js";import{a as me}from"./chunk-U7LFLL6J.js";import{a as Eo}from"./chunk-EVRKRU7I.js";import"./chunk-KQDMYE3F.js";import"./chunk-SQ2BNI3O.js";import"./chunk-PWLZXA4M.js";import"./chunk-BLGJS4OD.js";import"./chunk-IGYAABP7.js";import"./chunk-RYRQK4MH.js";import{a as re,e as ko}from"./chunk-EHKSYXXT.js";import"./chunk-TOV4UWR3.js";import"./chunk-ZE645RND.js";import"./chunk-MDL52WR7.js";import"./chunk-PSDESO5W.js";import"./chunk-VOOXQWRX.js";import{a as oe,d as Te}from"./chunk-HOU3VS5H.js";import{a as at}from"./chunk-SQDIO2NL.js";import"./chunk-TISF4HQJ.js";import{a as te}from"./chunk-IP7VSGCS.js";import{b as Re}from"./chunk-XYDICNP3.js";import{Z as wo}from"./chunk-ALLM2Z34.js";import"./chunk-QXPTHK7Q.js";import{A as Io,a as xo,l as P}from"./chunk-2LCPVMSO.js";import"./chunk-Q57GWOMY.js";import"./chunk-7C3BTQYU.js";import{l as go,m as Co,u as ho}from"./chunk-3XTUMVWB.js";import"./chunk-MGYCOFIC.js";import{d as yo}from"./chunk-6THUPAMO.js";import"./chunk-FK5ARFJK.js";import"./chunk-6Y7SZIB7.js";import"./chunk-VVYJA72I.js";import"./chunk-OWWFH26C.js";import"./chunk-MNZIO3NP.js";import"./chunk-HEFTA5OH.js";import{a as xt}from"./chunk-S7NLB5XS.js";import"./chunk-UUWJWUOY.js";import{a as Mo}from"./chunk-2DF43JKM.js";import{a as ke}from"./chunk-7CC6X6YX.js";import"./chunk-JAGKSBYF.js";import"./chunk-CR2CPF4X.js";import"./chunk-HKZGONPS.js";import"./chunk-IIAVVYHZ.js";import{a as To}from"./chunk-TSTKPLAO.js";import"./chunk-52XLG23J.js";import"./chunk-EEFD5KZC.js";import"./chunk-73ZHJYCP.js";import"./chunk-3NSLXJYR.js";import"./chunk-ENPNPH37.js";import"./chunk-5QJIR6ZJ.js";import"./chunk-H6SNSZIS.js";import"./chunk-YWECPG37.js";import"./chunk-AXJECT36.js";import"./chunk-5BIOTNBS.js";import"./chunk-R5SMHBLJ.js";import"./chunk-IY4RYRL6.js";import"./chunk-4OAEJJK5.js";import"./chunk-34VLVCKN.js";import"./chunk-J4ZKBKEJ.js";import"./chunk-TFJRUJHH.js";import"./chunk-7NMUCCUG.js";import"./chunk-YF3DWJDS.js";import"./chunk-RH4ISAHA.js";import"./chunk-ECQND2NK.js";import"./chunk-W3L3YTJO.js";import"./chunk-M5NI6HPE.js";import"./chunk-YQHUKBMA.js";import"./chunk-VM2NMLPX.js";import"./chunk-YP7CHBKG.js";import"./chunk-FNXLAYUB.js";import"./chunk-PQK3LXXN.js";import"./chunk-FTRHGHDS.js";import"./chunk-XT3EOPTE.js";import"./chunk-A6Z53EN6.js";import"./chunk-LL63GZNI.js";import"./chunk-M7CL2K7X.js";import"./chunk-W2CTJYFJ.js";import"./chunk-XUKVTAH5.js";import"./chunk-5OJTPISL.js";import"./chunk-7UPVX2FL.js";import"./chunk-BSFXZ46S.js";import"./chunk-ZMCTBWUY.js";import"./chunk-UMGTYP2Z.js";import"./chunk-DTLEDHZZ.js";import{a as lo}from"./chunk-QR4O7ZB4.js";import"./chunk-5F6JALEN.js";import"./chunk-HWGRDY67.js";import"./chunk-STLJDFJO.js";import"./chunk-ISZ2JUQK.js";import"./chunk-M5H47IO2.js";import"./chunk-HRKDKI66.js";import"./chunk-V7MKKAGW.js";import"./chunk-SKMCCAGC.js";import{a as po,b as uo}from"./chunk-O3O4HNQA.js";import"./chunk-LR7KSTP2.js";import{b as fo}from"./chunk-FWD2CUUI.js";import{a as mo,b as co}from"./chunk-QCP7SXMX.js";import"./chunk-W23ABSXX.js";import"./chunk-FOF22X4F.js";import"./chunk-P4EMG7RN.js";import"./chunk-BVDJNUOM.js";import"./chunk-7B5UI77E.js";import"./chunk-R6X7EOIE.js";import{a as ot,c as to,d as oo,g as dt,h as ro,i as no}from"./chunk-MKEYCSLA.js";import"./chunk-4EFZXPDV.js";import"./chunk-4KODREVA.js";import"./chunk-6UWGBJGT.js";import"./chunk-G4AVWXHJ.js";import"./chunk-76CRIMII.js";import"./chunk-F7VSWGDW.js";import"./chunk-MKSCYWSV.js";import{e as tt}from"./chunk-XIYLMV6I.js";import{J as Xt,c as Jt}from"./chunk-KLLSVAFY.js";import"./chunk-MBHGLWZJ.js";import"./chunk-QZO7W5WD.js";import"./chunk-AKE54ZCC.js";import"./chunk-EHZWM44P.js";import"./chunk-K6STDTUY.js";import{a as nt}from"./chunk-A57OTXBP.js";import{e as ao,o as _o}from"./chunk-YJQGXXOQ.js";import"./chunk-HTLOGWI7.js";import"./chunk-6SEP5B7P.js";import"./chunk-FHKOH5E6.js";import"./chunk-NTQ2YVDA.js";import"./chunk-KKG4PJ6O.js";import"./chunk-DZLXEJHX.js";import"./chunk-7SRLIN7D.js";import"./chunk-AW5NL3JM.js";import"./chunk-RI2WZ5PA.js";import"./chunk-YIAOHVF5.js";import"./chunk-KBS3PMLQ.js";import"./chunk-7GKX3YKG.js";import"./chunk-7HFBMBFB.js";import"./chunk-TJCPJQIM.js";import"./chunk-ZTAZ2272.js";import{m as rt}from"./chunk-IRMYAC6R.js";import"./chunk-Q76QXAWY.js";import"./chunk-THSNJ5WU.js";import"./chunk-MRB2XFLQ.js";import"./chunk-65AJJVJY.js";import"./chunk-PDC447BO.js";import"./chunk-JI6FOZGR.js";import"./chunk-JCM7SRK2.js";import{l as Zt}from"./chunk-UBFC7TLG.js";import{a as it}from"./chunk-PTD7UCOR.js";import"./chunk-Q4YTGP2G.js";import"./chunk-ETJEH7T4.js";import"./chunk-LLZAOPDB.js";import{a as we}from"./chunk-V3IFYKWM.js";import"./chunk-EWTTD4DL.js";import"./chunk-Y2TPPS4H.js";import"./chunk-ITY22AD4.js";import"./chunk-E2JYOUYE.js";import"./chunk-B3JSNQIV.js";import{a as io}from"./chunk-YALUYHLV.js";import{o as so,q as Tt}from"./chunk-I3CPAVOC.js";import"./chunk-ARWSGU73.js";import"./chunk-CZ2ZBAZV.js";import{o as Ee}from"./chunk-5QMHGZLF.js";import{U as zt,_ as Kt,ec as _t,ib as Qt,jb as et}from"./chunk-HPWCPLRR.js";import"./chunk-O6ZBO5JF.js";import"./chunk-TSTPZ3JM.js";import"./chunk-D2LKUI4F.js";import{a as Zr}from"./chunk-ON6S2DB7.js";import{j as Ie,p as $t}from"./chunk-SZD6WTBQ.js";import"./chunk-ASR4HLU7.js";import"./chunk-ANIUN6US.js";import{s as Wt,u as Qr}from"./chunk-3DZ7WRLL.js";import{d as Lt,f as Yr}from"./chunk-DEOJU4Z3.js";import"./chunk-PLIIQKFY.js";import"./chunk-YOPEZ2F5.js";import"./chunk-6BXYJZHH.js";import"./chunk-CCEMKRO6.js";import{a as q,b as _e}from"./chunk-2HSCH6R3.js";import"./chunk-CWNIM6RS.js";import"./chunk-NNAD25BL.js";import{e as eo,h as De}from"./chunk-XV444F26.js";import{C as Ut,D as Yt,H as ut,W as qt,_ as $e,aa as Vt,fa as ft,h as Ht,ha as jt,q as Xe}from"./chunk-N2BCRNDB.js";import"./chunk-RTFE54S3.js";import"./chunk-GCQ4H2BA.js";import"./chunk-JGEHAFTO.js";import"./chunk-UVFOW4HH.js";import"./chunk-LNOPECCQ.js";import"./chunk-CB7FOZNP.js";import{c as I}from"./chunk-43VURGIT.js";import{D as se,H as Hr,I as At,Ia as Gt,K as de,L as Qe,N as Pt,Na as Vr,P as ee,Pa as Ot,Q as Le,R as Me,Sc as zr,X as St,bd as Rt,ha as ye,jb as jr,kb as Oe,la as bt,qa as Ur,rc as Dt,rd as Kr,sc as pt,ya as Mt,za as qr}from"./chunk-TM67VPZU.js";import"./chunk-VW6OQNWT.js";import{H as Y,d as J,o as Bt,q as lt,r as Je}from"./chunk-PUSMMCUD.js";import{R as U,o as Be,z as s}from"./chunk-UWJLNJLY.js";import"./chunk-VRY2ADKE.js";import"./chunk-VWEB6W6G.js";import"./chunk-5U7FO2PW.js";import"./chunk-B7EGZO4E.js";import"./chunk-PDUOSATP.js";import{L as ve,a as kt,b as Ft,o as Nt,ra as Ke}from"./chunk-XDY6V34Y.js";import"./chunk-YJFNO57I.js";import"./chunk-DZ6CTC22.js";import{W as Ze,c as vt,ea as Ge}from"./chunk-JT3LNHPY.js";import"./chunk-47UWF72W.js";import{b as D}from"./chunk-JWYCKY2V.js";import"./chunk-G2266BV2.js";import"./chunk-L4PAIYPH.js";import"./chunk-UT7LJPKF.js";import"./chunk-AFZ6A2B3.js";import"./chunk-VVPY7ZA7.js";import"./chunk-KUW5VATV.js";import"./chunk-BNAVWOJ2.js";import"./chunk-IG2Q5ALZ.js";import"./chunk-WOMUNWBT.js";import"./chunk-QNGB57GN.js";import"./chunk-NM2PDVBD.js";import"./chunk-F6PXOVYL.js";import"./chunk-324EPGNQ.js";import"./chunk-5GFHI4AK.js";import"./chunk-QYVQBXDG.js";import"./chunk-7D4PUIEN.js";import"./chunk-IWVM7XL6.js";import"./chunk-7QO4TZYQ.js";import"./chunk-FF4LY6PE.js";import"./chunk-76KCDJDG.js";import"./chunk-YDUDQP2P.js";import"./chunk-PGPFV4JQ.js";import"./chunk-MIBHDVGP.js";import"./chunk-7VFUX7IX.js";import"./chunk-XLF4LAH2.js";import"./chunk-ONKZ57T6.js";import"./chunk-ZC7Q7LCH.js";import{f as C,o as c,q as l}from"./chunk-6KXF36WM.js";c();l();var pe=C(D());Hr();c();l();var He=C(D()),ir=C(_t()),ar=C(Zr()),sr=C(Ee());c();l();Ke();var Jr=e=>{let t=z(e?.chainId),n=e?.image;return kt(n)?e.image=n[0]:Ft(n)&&(e.image=null),{token:e,baseCoin:t}},tr=Jr;c();l();var or=C(_t()),Ct=C(Ee());U();$t();var Xr=(e={},t={},n=!0,o=!1)=>{let i=(0,or.useDispatch)(),m=e.address,p=nt(),a=Ko(),u=me(),r=(0,Ct.useMemoizedFn)(async()=>{u({all_confirmation:"cancel",trade:"add_token"}),await a(m,!1),await Ie(i)}),{loading:f,onClick:d}=te(r),_={actionType:P.ACTION_TYPE.CANCEL,btnText:s("wallet_dapp_connection_btn_reject"),onClick:d,loading:f},T=(0,Ct.useMemoizedFn)(async()=>{try{u({all_confirmation:"confirm",trade:"add_token"});let y=await ot(t.localType,p),F={...e,contractAddress:m,blockChain:y.shortName,localType:t.localType,chainId:t.chainId};await uo(F),await a(m,!0),await Ie(i)}catch(y){Y.error(y?.data?.originalError?.msg||s("wallet_extenshion_toast_add_failed"))}}),{loading:x,onClick:g}=te(T),w={actionType:P.ACTION_TYPE.CONFIRM,disabled:!n||o,onClick:g,loading:x};return[_,w]},rr=Xr;c();l();var We=C(D());U();var $r=({contractAddress:e,chainInfo:t})=>{let[n,o]=(0,We.useState)({}),[i,m]=(0,We.useState)(!0),p=async()=>{try{m(!0);let a=await po({contractAddress:e,chainInfo:t});o(a),m(!1)}catch{Y.error({title:s("wallet_extension_loading_toast_retrieve_tokeninfo_fail")})}};return(0,We.useEffect)(()=>{p()},[]),{coinInfo:n,loading:i}},nr=$r;var en=({unapproved:e})=>{let t=(0,ir.useSelector)(co),{token:n,baseCoin:o}=tr(e),[i,m]=(0,He.useState)(!0),p=nt();(0,sr.useMount)(async()=>{let d=await ot(o.localType,p);m(!!d)});let{coinInfo:a,loading:u}=nr({contractAddress:n?.address,chainInfo:{coinId:o?.coinId}}),r=rr(n,o,i,u);if(!n||t!==mo.addToken)return He.default.createElement(ar.Redirect,{to:io});let f={...n,symbol:a?.symbol,decimals:a?.decimals};return He.default.createElement(zo,{token:f,supported:i,buttonGroup:r,networkName:o.chainName,loading:u})},mr=en;c();l();var S=C(D()),_r=C(Ee());U();c();l();var cr=C(D());Ke();ye();var tn=({unapproved:e,walletAccount:t,customGasInfo:n={}})=>{let{params:o}=e,{walletId:i}=t,m=z(),{coinId:p}=m,a=No(p,i)?.coinAmountInt,{gasType:u,isNetworkFeeLoading:r,networkFee:f,getLimit:d}=n,{minGasFee:_}=go(n),T=Co(n),x=(0,cr.useMemo)(()=>{if(ve(a))return o;let A=a,k=[];return o.forEach(R=>{A=Qe(A,f),ee(A,0)&&k.push(R)}),k},[a,o,f]),g=r&&Me(d,0),w={level:u||Vt.STANDARD,loading:r,coinId:m?.coinId,networkFee:g?void 0:_,maxNetworkFee:g?void 0:f,estimateFailed:T},y=r||x.length&&x.length===o.length,F=ve(a)||Le(a,f);return{isNetworkFeeLoading:r,estimateFailed:T,networkFeeProps:w,canApproveTxs:x,isSufficientGas:F,canApproveAll:y}},lr=tn;c();l();var ur=C(D());U();Ur();Kr();zr();qr();Vr();ye();var pr=100,on=e=>e.msg||s("wallet_home_toast_network_error"),rn=({txParams:e,gasLimit:t,supportEip1559:n})=>({...e,value:q(e.value),gas:t,gasPrice:q(n?e.maxFeePerGas:e.gasPrice),priorityFee:q(n?e.maxPriorityFeePerGas:0),nonce:q(e.nonce),repeatTxType:Ht.CONFIRMING,oldTxHash:"",inscriptionType:1}),nn=({ext:e,signature:t,coinId:n,txParams:o,fromAdr:i,toAdr:m,networkFee:p,txHash:a,walletId:u,walletAccount:r})=>({extJson:JSON.stringify(e),signedTx:t,coinId:n,coinAmount:q(o.value||0),fromAdr:i,toAdr:m,serviceCharge:p,txHash:a,txSource:Rt.DAPP,inputData:o.data,accountId:u,txType:1,walletType:r?.serverWalletType}),an=({unapproved:e,walletAccount:t,isSufficientGas:n,canApproveTxs:o,customGasInfo:i,isNetworkFeeLoading:m})=>{let{id:p}=e,{walletId:a,address:u}=t,r=rt(a),f=me(a),{coinId:d}=z(),_=Vo(),T=qo(),x=(0,ur.useCallback)(async()=>{f({trade:"sendEvmInscriptions",all_confirmation:"cancel"}),await _({id:p})},[_,f,p]),{loading:g,onClick:w}=te(x),y={loading:g,onClick:w,actionType:P.ACTION_TYPE.CANCEL,btnText:s("wallet_dapp_connection_btn_reject")},F=r||m,{gasPrice:A,supportEip1559:k,gasLimitInfo:R={},gasLimit:L,maxFeePerGas:Q,maxPriorityFeePerGas:W,networkFee:H}=i,$=Io({fromAddr:o[0]?.txParams?.from,walletId:a,localType:pt}),Z=async()=>{try{let j=o.length,Se=o[0],{from:O,to:ue,value:Ce}=Se.txParams;if(f({trade:"sendEvmInscriptions",all_confirmation:"confirm"}),!await ke({callback:x,walletId:a}))return;let{data:ne}=await zt({checkTypes:[ft.OVERWRITTEN],coinId:d,from:O,to:ue,amount:q(Ce||0),gasPrice:A}),he=ne.find(({checkType:ae})=>ae===ft.OVERWRITTEN)||{},{newNonce:ie,toastType:mt,pendingNum:ct}=he;if(mt===jt.FAILED){Y.error(s("wallet_extension_function_toast_failed_single")),await xt(1500),await _({id:p});return}let be=de(ct,j);if(ee(be,pr)){Y.error(s("wallet_extension_function_toast_pending",{TotalNum:be,ExceededNum:pr}));return}let Ve=[],je=[];for(let ae=0;ae<o.length;ae++){let ze=o[ae],{txParams:B}=ze,{from:Gr,to:Or}=B;B.nonce=bt(_e(de(ie,ae))),k?(delete ze.gasPrice,B.maxFeePerGas=_e(Q),B.maxPriorityFeePerGas=_e(W),B.type=Xe.FEE_MARKET):(delete B.maxFeePerGas,delete B.maxPriorityFeePerGas,delete B.type,B.gasPrice=_e(A)),B.gas=_e(L),B.gasLimit=_e(L),B.gasLimitInfo=R,B.gasType=i.gasType;let Dr=lo(ze.txParams),Et=await $({params:Dr}),wt=await xo(pt,Et),Rr=rn({txParams:B,gasLimit:L,supportEip1559:k}),Wr=nn({ext:Rr,signature:Et,coinId:d,txParams:B,fromAdr:Gr,toAdr:Or,networkFee:H,txHash:wt,walletId:a,walletAccount:t});je.push(Wr),Ve.push({id:ze.id,txHash:wt})}await Gt(Mt.postSendEvmInscriptions,{txList:je}),await T({id:p,result:Ve})}catch(j){Y.error(on(j)),await xt(1500),await T({id:p,error:"Failed"})}},{loading:V,onClick:M}=te(Z),G={loading:V,disabled:F,actionType:P.ACTION_TYPE.CONFIRM,onClick:M};return F?[y,G]:(n||(G={actionType:P.ACTION_TYPE.FILL_UP,txId:p,coinId:d,walletId:a,address:u,receiveOnly:n}),[y,G])},fr=an;c();l();U();var sn=e=>{for(let t=0;t<e.length;t++){let n=e[t],o=n();if(o)return o}return null},mn=({walletAccount:e,canApproveTxs:t,canApproveAll:n,isSufficientGas:o})=>{let i=rt(e.walletId),m=()=>i?{type:J.TYPE.error,message:s("wallet_extension_function_alert_wallet_unsupported")}:null,p=z(),a=Oo({baseCoin:p,isSufficientGas:o});return sn([m,a,()=>n?null:{type:J.TYPE.warn,message:s("wallet_extension_function_alert_available_balance",{gasToken:p.symbol,num:t.length})}])},dr=mn;var cn=({unapproved:e})=>{let{coinId:t}=z(),{txParams:n={}}=e?.params?.[0],{from:o,to:i,data:m,value:p}=n,{walletId:a}=e,u=Mo(e),r=me(a),f=Ne(e),[d,_]=(0,S.useState)({}),T=(0,S.useCallback)(W=>{_(W)},[]),{networkFeeProps:x,canApproveTxs:g,canApproveAll:w,isSufficientGas:y,isNetworkFeeLoading:F}=lr({unapproved:e,walletAccount:u,customGasInfo:d}),A=fr({unapproved:e,walletAccount:u,canApproveTxs:g,customGasInfo:d,isSufficientGas:y,isNetworkFeeLoading:F}),k=dr({walletAccount:u,canApproveTxs:g,canApproveAll:w,isSufficientGas:y}),[R,{setTrue:L,setFalse:Q}]=(0,_r.useBoolean)(!1);return S.default.createElement(I.Container,null,S.default.createElement(it,{title:s("wallet_extension_function_title_bulk_signing"),closeable:!1,backable:!1}),S.default.createElement(oe,null,S.default.createElement(Do,{...f})),S.default.createElement(oe,null,S.default.createElement(at,{onClick:L,...x})),S.default.createElement(oe,{bordered:!1},S.default.createElement(Re,{title:s("wallet_extension_network_address_title_walletused"),address:u.address,walletId:u.walletId,onCopyCallback:()=>{r({trade:"sendEvmInscriptions",all_confirmation:"wallet_used_address"})}})),S.default.createElement(we,{placeholder:!0,offsetBottom:0,borderTop:!0},S.default.createElement(Te,{...k}),S.default.createElement(P,{buttonGroup:A})),S.default.createElement(Eo,{visible:R,coinId:t,address:o,inputData:m,tokenAddress:i,value:q(p),onBack:Q,onClose:null,onGasChange:T}))},Tr=cn;c();l();var X=C(D());Dt();jr();ye();c();l();var wr=C(D()),Ye=C(_t()),Ue=C(Ee());U();$t();Qr();c();l();var K=C(D());c();l();Yr();var Ae=()=>(0,K.useCallback)(async(t,n)=>{await Lt().updateReportTimestamp(t,n)},[]);var ln=()=>{let e=Ae();return(0,K.useCallback)(async n=>{await e(n,"CAN_CONFIRM")},[e])},xr=(e,t)=>{let n=ln(),o=(0,K.useRef)(!1);(0,K.useEffect)(()=>{!t&&!o.current&&(o.current=!0,n(e))},[e,t,n])},gr=()=>{let e=Ae();return(0,K.useCallback)(async n=>{await e(n,"CLICK_CONFIRM")},[e])},Cr=()=>{let e=Ae();return(0,K.useCallback)(async t=>{await e(t,"SIGN")},[e])},hr=()=>{let e=Ae();return(0,K.useCallback)(async t=>{await e(t,"START_PUBLISH")},[e])},yr=()=>{let e=Ae();return(0,K.useCallback)(async t=>{await e(t,"FINISH_PUBLISH")},[e])},Ir=()=>{let e=Ae();return(0,K.useCallback)(async t=>{await e(t,"END_REQUEST")},[e])};c();l();Ke();var Er=({isMev:e,mevInfo:t,unapproved:n,modifiedData:o,customGasInfo:i,updateData:m,gasReturnActivity:p})=>{let{nonce:a,updateGasInfo:u}=m,r=Nt(n),{method:f}=r;r.txParams=r.params,delete r.params;let{supportEip1559:d,gasLimitInfo:_={},gasLimit:T,maxFeePerGas:x,gasPrice:g,maxPriorityFeePerGas:w}=i;if(o&&r.txParams&&(r.txParams.data=o),r.txParams.supportEip1559=d,d?(delete r?.txParams.gasPrice,r.txParams.maxFeePerGas=re(x),r.txParams.maxPriorityFeePerGas=re(w),r.txParams.type=Xe.FEE_MARKET):(delete r?.txParams.maxFeePerGas,delete r?.txParams.maxPriorityFeePerGas,delete r?.txParams.type,r.txParams.gasPrice=re(g)),u){let y=Object.entries(u).reduce((F,[A,k])=>(F[A]=re(k),F),{});r.txParams={...r.txParams,...y}}return r.txParams.gas=re(T),r.txParams.gasLimit=re(T),r.txParams.nonce=re(a),r.txParams.chainId=re(r.chainId),r.gasLimitInfo=_||{},r.mevSuppliers=e?t?.mevSuppliers:[],r.activityId=p?.activityId,r.gasType=i.gasType,r?.txParams?.data||(r.isBaseCoinTransfer=!0),f===ut.KAIA_SIGN_TRANSACTION&&(r.txParams.signFn=ut.KAIA_SIGN_TRANSACTION,r.txParams.kaiaTxType=r.txParams.typeInt),r};var pn=(e,t)=>{let n=(0,Ye.useSelector)(i=>oo(i,e)),o=(0,Ye.useSelector)(i=>to(i,e)??t);return{mevInfo:n,isMev:o}},un=({walletId:e,from:t,to:n})=>(0,Ue.useMemoizedFn)(o=>{let i=o;o===Ut&&(i="sdk-error"),Wt(`evm_tx_failed-${i}`,{to:n},{tags:{walletId:e,from:t}})}),fn=({unapproved:e})=>{let{id:t,params:n={},extParams:o={},chainId:i}=e,m=(0,Ye.useDispatch)(),p=z(i),a=Ne(e),{from:u,to:r,value:f}=n,{coinId:d,chainName:_}=p,{walletId:T}=st(e.origin,u)||{},{isMev:x,mevInfo:g}=pn(t,o?.isMev),w=gr(),y=Cr(),F=hr(),A=yr(),k=Ir(),R=(0,Ue.useMemoizedFn)((V,M)=>{m(dt.setIsMev({isMev:V,id:t})),m(dt.setMevInfo({mevInfo:M,id:t}))});xr();let L=me(T),Q=ko({walletId:T,fromAddr:u,coinId:d}),W=(0,Ue.useMemoizedFn)(async()=>{L({trade:"contract_interaction",all_confirmation:"cancel",network:_,dapp_url:e.origin}),Xt(),await m(ro(t)),await Ie(m)}),H=Fo(),$=un({extParams:o,walletId:T,from:u,to:r}),Z=(0,Ue.useMemoizedFn)(async({modifiedData:V,customGasInfo:M,gasReturnActivity:G,preExecInfo:j,reportGasReturnActivityDataInConfirm:Se})=>{try{let{gasPrice:O}=M;if(w(t),await ke({callback:W,walletId:T})){let Ce=q(f||0),fe=await H({to:r,from:u,coinId:d,gasPrice:O,userGasInfo:M,amount:Ce,baseCoinAmountUse:Ce});Se();let ne=Er({isMev:x,mevInfo:g,unapproved:e,updateData:fe,modifiedData:V,customGasInfo:M,gasReturnActivity:G});y(t);let he=await Q(ne.txParams);F(t);let ie=await m(no(t,{...ne,signedTx:he,walletId:T,coinId:d,preExecInfo:j},{failTxWhenError:!1}));A(t),gt(ie?.code)?(G?.clear(),Y.error({title:ie?.msg||s("wallet_home_toast_network_error"),duration:3})):(Zt({tx_id:ie?.serverTxId}),k(t))}}catch(O){let ue=O?.data?.originalError;gt(ue?.code)?(G?.clear(),Y.error({title:ue?.msg||s("wallet_home_toast_network_error"),duration:3})):O?.message===Yt?Y.error(s("wallet_extension_tg_error_network")):O?.message!==wo&&O?.message!==ho&&Y.error(O?.message||s("wallet_home_toast_network_error")),$(O?.message)}await Ie(m)});return wr.default.createElement(Lo,{needMev:!0,coinId:d,openMev:x,onConfirmReplace:!0,dappInfo:a,txParams:n,txType:e?.type,walletId:T,isShowBlockSwapMevTooltip:o?.isShowBlockSwapMevTooltip,onMevChange:R,onCancel:W,onConfirm:Z})},ht=fn;c();l();var N=C(D());U();ye();c();l();var ge=C(D()),yt=C(vt());Ke();U();ye();c();l();var Pe={RpcEvmSendEditNonce:"_RpcEvmSendEditNonce_1jypd_1",rpcEvmSendEditNonce:"_RpcEvmSendEditNonce_1jypd_1",content:"_content_1jypd_1",inner:"_inner_1jypd_5","rpc-evm-send-edit-nonce__warning-input":"_rpc-evm-send-edit-nonce__warning-input_1jypd_5",rpcEvmSendEditNonceWarningInput:"_rpc-evm-send-edit-nonce__warning-input_1jypd_5",warningText:"_warningText_1jypd_9",icon:"_icon_1jypd_13"};function dn({nonce:e,suggestedNonce:t,setNonce:n}){let o=m=>{n(m)},i;return e&&(ee(e,t)?i=s("developer_mode_send_tooltip_higher",{num:t}):Pt(e,t)&&(i=s("developer_mode_send_tooltip_lower",{num:t}))),ge.default.createElement(Yo.Row,{className:Pe.RpcEvmSendEditNonce,noMargin:!0,noPadding:!0},ge.default.createElement("div",{className:Pe.content},ge.default.createElement("div",{className:Pe.inner},ge.default.createElement(lt.Number,{innerClassName:(0,yt.default)({"rpc-evm-send-edit-nonce__warning-input":!!i}),withOperation:!0,alwaysOperation:!0,enableMinus:!1,title:s("developer_mode_send_maintitle_nonce"),placeholder:`${ve(t)?"":Be.thousandFormat(t)}`,size:lt.SIZE.xl,value:e,onAdd:()=>!e&&t!==null?(o(de(t,1)),!1):!0,onSub:()=>!e&&ee(t,0)?(o(Qe(t-1)),!1):!0,onChange:o})),i&&ge.default.createElement("div",{className:Pe.warningText},ge.default.createElement(Ze,{className:(0,yt.default)(Pe.icon,"okx-wallet-plugin-warning-circle")}),i)))}var kr=dn;c();l();var ce=C(D());U();c();l();var h=C(D()),qe=C(Ee()),Fr=C(vt());U();c();l();var b={root:"_root_424m3_1",icon:"_icon_424m3_1",editApproveAmountModal:"_editApproveAmountModal_424m3_10",content:"_content_424m3_22",editArea:"_editArea_424m3_25",unlimitedText:"_unlimitedText_424m3_30",unlimitedSymbol:"_unlimitedSymbol_424m3_39",symbolClassName:"_symbolClassName_424m3_45",quickHandler:"_quickHandler_424m3_48",balanceWrap:"_balanceWrap_424m3_55",balance:"_balance_424m3_55",maxBalance:"_maxBalance_424m3_68",maxDisabled:"_maxDisabled_424m3_76",unlimited:"_unlimited_424m3_30",text:"_text_424m3_84",authQuantityWarnTip:"_authQuantityWarnTip_424m3_91",danger:"_danger_424m3_98",info:"_info_424m3_101",approveTip:"_approveTip_424m3_104",footerActions:"_footerActions_424m3_112"};var _n=e=>{typeof e!="string"&&(e=e.toString());let t=e?.length;return t<=9?36:t>=10&&t<12?32:t===12?30:t>=13&&t<=15?24:t>=16&&t<=18?20:t>=19&&t<=24?16:12},Tn=({txTypeInfo:e,approve:t,onUpdateAuthAmount:n})=>{let{tokenInfo:o,amount:i}=t||{},{decimals:m,symbol:p}=o,a=xe(p,12),[u,r]=(0,h.useState)(!1),[f,{toggle:d,setFalse:_,setTrue:T}]=(0,qe.useBoolean)(!1),[x,g]=(0,h.useState)(0),w=(0,h.useMemo)(()=>f?{type:b.danger,text:s("wallet_extension_approve_alert_high_risk_unlimited")}:!f&&Be.eq(x||0,0)?{type:b.info,text:s("wallet_extension_approve_cannot_zero")}:null,[f,x]),y=(0,qe.useMemoizedFn)((k=i)=>{et(k)?(g(0),T()):(g(So(k,m)),_()),r(!0)}),F=(0,h.useMemo)(()=>f?!1:!Be.gt(`${x||0}`,0),[f,x]),A=(0,qe.useMemoizedFn)(()=>{r(!1);let k=f?Qt:bo(x,m);n(k)});return h.default.createElement(I.Box,{className:b.root},h.default.createElement(I.Box,{className:b.icon,onClick:()=>{y()}},h.default.createElement(Ze,{className:"okx-wallet-plugin-draw-20"})),h.default.createElement(Bt.Action,{hideCloseBtn:!0,noContentPadding:!0,visible:u},h.default.createElement(I.Box,{className:b.editApproveAmountModal},h.default.createElement(I.Box,{className:b.content},h.default.createElement(Fe,{txTypeInfo:e,bordered:!1}),h.default.createElement(I.Box,{className:b.editArea},f?h.default.createElement(Tt.Text,{className:b.unlimitedText},s("wallet_extension_transfer_title_unlimited_amount",{token:h.default.createElement(Tt.Text,{className:b.unlimitedSymbol},a)})):h.default.createElement(yo,{symbol:a,autoSize:_n,placeholder:"0",decimals:m,value:x,onChange:g,style:{fontWeight:700,height:"42px"},symbolClassName:b.symbolClassName})),h.default.createElement(I.Box,{className:b.quickHandler},h.default.createElement(I.Box,{onClick:d,className:b.unlimited},h.default.createElement(I.Box,{className:b.text},s("wallet_extension_transfer_dialog_checkbox_set_to_unlimited")),h.default.createElement(Je,{checked:f}))),!!w&&h.default.createElement(I.Box,{className:(0,Fr.default)(b.authQuantityWarnTip,w.type)},w.text)),h.default.createElement(I.Box,{className:b.approveTip},s("wallet_extension_approve_desc_dapp_right")),h.default.createElement(we,{affixStyle:{position:"none"},placeholder:!1,className:b.footerActions},h.default.createElement(Ge,{block:!0,disabled:F,category:Ge.CATEGORY.fill,type:Ge.TYPE.primary,size:Ge.SIZE.lg,onClick:A},s("wallet_extension_approve_btn_amount_confirmation"))))))},Nr=Tn;var xn=({onUpdateAuthAmount:e,dappInfo:t,loading:n,approveToken:o,title:i})=>{let{isApprove:m,isRevoke:p,address:a,customApproveAmount:u=0,symbol:r=De,decimals:f=0,icon:d=eo}=o,_=xe(r,12);if(n)return ce.default.createElement(Ro,null);if(m){let T={title:{text:i},subTitle:t.host};if(p){let g={image:{light:"/cdn/assets/imgs/2411/55679A63BA670217.png",dark:"/cdn/assets/imgs/2411/E42714B599040ADC.png"},...T};return ce.default.createElement(Fe,{txTypeInfo:{baseInfo:g}},ce.default.createElement(vo,{imageUrl:d,text:_}))}let x={image:{light:"/cdn/assets/imgs/2411/EF6FBB80F8021B76.png",dark:"/cdn/assets/imgs/2411/E457296ACFFE1EA9.png"},...T};return ce.default.createElement(Fe,{txTypeInfo:{baseInfo:x}},ce.default.createElement(Bo,{approveInfoList:[{amount:u,canEditAmount:!0,autoOpen:!1,tokenInfo:{address:a,decimals:f,symbol:r}}],renderEditApproveAmount:g=>ce.default.createElement(Nr,{txTypeInfo:{baseInfo:x},approve:g,onUpdateAuthAmount:e})}))}return ce.default.createElement(Fe,{txTypeInfo:{baseInfo:{image:{light:"/cdn/assets/imgs/2411/E917E86725EBEB35.png",dark:"/cdn/assets/imgs/2411/3B767A859A18470E.png"},title:{text:s("wallet_extension_transaction_page_title_unknown_transaction")},subTitle:t.host}}})},Ar=xn;c();l();U();var gn=({chainGasLoadFailed:e,isSufficientBalance:t,isSufficientGas:n,transaction:o,actions:i,modifiedDataError:m,walletInfo:p,params:a,rpcInfo:u,addressCheckRet:r})=>{let{addressCheckLoading:f,addressCheckError:d}=r,_=t&&n,{chain:T,nonce:x,loading:g,gas:w}=o,{sign:y,cancel:F}=i,{chainGasLoading:A}=w,{loading:k,onClick:R}=te(F),L={actionType:P.ACTION_TYPE.CANCEL,onClick:R,loading:k},Q=async()=>{try{if(!await ke({walletId:p?.walletId,callback:F}))return}catch{}let M=G=>{let j=ao[p?.keyringIdentityType];Jt({tx_source:"dapp",from_addr:a.from,to_addr:a.to,main_token_symbol:u?.symbol,token_symbol:G?.extraParams?.coinSymbol||"",contract_address:a?.to,volume_token:a?.value,volume_usdt:"",tx_hash_unique:G?.txHash,wallet_type:j,chain_id:parseInt(T.chainId,16)})};y(p?.walletId,M,u)},W=()=>{globalThis.open(u.faucetUrl)},H=A||e||!_&&!u?.faucetUrl||x.pending||g.sign||g.token||m||d||f,{loading:$,onClick:Z}=te(Q),V={disabled:H,actionType:P.ACTION_TYPE.CONFIRM,onClick:Z,loading:$};return!_&&u?.faucetUrl&&(V.actionType=P.ACTION_TYPE.FILL_UP,V.onClick=W,V.btnText=s("wallet_extension_transfer_btn_via_faucet")),[L,V]},Pr=gn;c();l();U();ye();var Cn=({customGasInfo:e})=>()=>e?.isSupportEip1559&&e?.baseFeePerGas==="0"?{type:J.TYPE.warn,message:s("wallet_extension_transaction_error_base_zero")}:null,hn=({modifiedDataError:e})=>()=>e?{}:null,yn=({isSufficientBalance:e})=>()=>e?null:{type:J.TYPE.warn,message:s("wallet_extension_popup_dapp_insufficient_balance")},In=({isSufficientGas:e,chain:t})=>()=>e?null:{type:J.TYPE.warn,message:s("wallet_extension_popup_insufficient_network_fee",{token:t.symbol})},En=({chainGasLoadFailed:e,chainGasError:t})=>()=>e?{type:Te.TIP_TYPE.FEE_ERROR,message:s("wallet_extension_alert_estimate_unavailable_error",{errorMsg:t})}:null,wn=({auth:e,contract:t,asset:n})=>()=>et(e.customApproveAmount)?{type:J.TYPE.warn,message:s("wallet_extension_popup_unlimited_transfer",{contract:t,asset:n})}:ee(e.customApproveAmount,0)?{type:J.TYPE.warn,message:s("extension_approve_alert_authorized_tips",{contract:t,asset:n})}:null,kn=e=>()=>e?{type:Te.TIP_TYPE.COMMON_ERROR,message:e}:null,Fn=({customGasInfo:e,chainGasError:t,chainGasLoadFailed:n,modifiedDataError:o,isSufficientBalance:i,isSufficientGas:m,isRevokeTx:p,transaction:a,loading:u,addressCheckRet:r})=>{let{auth:f,chain:d}=a,{addressCheckLoading:_,addressCheckError:T}=r,x=xe(f.name||De),g=xe(f.symbol||De),w=Cn({customGasInfo:e}),y=hn({modifiedDataError:o}),F=yn({isSufficientBalance:i,chain:d}),A=In({isSufficientGas:m,chain:d}),k=En({chainGasLoadFailed:n,chainGasError:t}),R=()=>p?{type:J.TYPE.info,message:s("extension_revoke_approval_alert_evoke_authorization",{contract:x,asset:g})}:null,L=kn(T),Q=wn({auth:f,contract:x,asset:g});if(u||_)return null;let W=[y,L,A,F,R,Q,k,w];for(let H=0;H<W.length;H++){let $=W[H],Z=$();if(Z)return Z}return null},Sr=Fn;var It=({unapproved:e,rpcInfo:t})=>{let{origin:n,params:o,method:i,chainId:m}=e,{from:p,value:a,to:u,typeInt:r}=o,[f,d]=(0,N.useState)(""),[_,T]=(0,N.useState)(!1),x=Po(f),g=st(n,p),[w,y]=jo({...o,...e,walletId:g?.walletId},t),F=(0,N.useMemo)(()=>[$e.FeeDelegatedValueTransfer,$e.FeeDelegatedValueTransferMemo,$e.FeeDelegatedSmartContractExecution].includes(r),[r]),{title:A,auth:k,meta:R,nonce:L,gas:Q,loading:W,data:H}=w,{setNonce:$,setAuthAmount:Z}=y,{setGasType:V,currentGasInfo:M,chainGasLevels:G,chainGasLoading:j,chainGasError:Se,chainGasLoadFailed:O,setCustomGasOption:ue,chainGasLimitLoadFailed:Ce}=Q,fe=_o(void 0,void 0,t),ne=Jo(M);Ho(t),Xo(p,t),er();let he=Le(fe?.balance,de(ne,St(a||0))),ie=Le(fe?.balance,ne),{cancel:mt}=y,ct=Ne(e),be=Uo({from:p,to:u,method:i,dappData:JSON.stringify({from:p,to:u,data:H,value:a}),dappInfo:ct,chainIndex:q(m),isRpcChain:!0,handleCancel:mt},Kt),Ve=Sr({customGasInfo:M,chainGasError:Se,chainGasLoadFailed:O,isSufficientGas:ie,isSufficientBalance:he,isRevokeTx:k.isRevoke,modifiedDataError:x,transaction:w,loading:j,addressCheckRet:be}),je=Pr({chainGasLoadFailed:O,isSufficientBalance:he,isSufficientGas:ie,transaction:w,actions:y,modifiedDataError:x,walletInfo:g,params:o,rpcInfo:t,addressCheckRet:be});return N.default.createElement(I.Container,null,N.default.createElement(Ar,{title:A,confirmBuryPointFn:()=>{},onUpdateAuthAmount:ae=>{Z(ae)},dappInfo:R.originInfo,loading:W.token,approveToken:k}),N.default.createElement(oe,null,N.default.createElement(at,{isFree:F,onClick:()=>{T(!0)},level:M?.typeKey,injectCoin:fe,loading:j,estimateFailed:O,networkFee:j?void 0:At(ne,10**fe?.decimals)})),N.default.createElement(oe,null,N.default.createElement(Re,{title:s("wallet_extension_network_address_title_walletused"),address:g.address,walletId:g.walletId}),!!u&&N.default.createElement(Re,{title:s("wallet_extension_popup_text_interact_with"),address:u})),N.default.createElement(kr,{nonce:L.custom,suggestedNonce:L.suggested,setNonce:$}),H?N.default.createElement(oe,{bordered:!1},N.default.createElement(Go,{data:H,copyable:{hideDesc:!0}})):N.default.createElement(oe,{bordered:!1},N.default.createElement(Ao,{value:f,error:x,onChange:d})),N.default.createElement(we,{placeholder:!0,offsetBottom:0,borderTop:!0},!x&&N.default.createElement(Te,{...Ve}),N.default.createElement(P,{buttonGroup:je})),j?null:N.default.createElement($o,{onBack:()=>{T(!1)},visible:_,rpcInfo:t,setGasType:V,chainGasLevels:G,setCustomGasOption:ue,currentGasInfo:M,chainGasLimitLoadFailed:Ce}))};c();l();var v=C(D()),vr=C(Ee());U();Dt();c();l();var le={root:"_root_184nf_1",main:"_main_184nf_5",tips:"_tips_184nf_10",list:"_list_184nf_16",item:"_item_184nf_16",title:"_title_184nf_22",footer:"_footer_184nf_29"};var br={uniqueId:Oe,rpcUrl:s("wallet_extension_rpc_title_official")},Nn=({targetRpcChain:e,targetMainChain:t,handleSelect:n})=>{let[o,i]=(0,v.useState)({}),m=[...e],p=!!t.length;p&&m.unshift(br);let[a,u]=(0,v.useState)(!1),{updateRpcNetwork:r}=tt(),f=(0,v.useCallback)(async()=>{try{u(!0);let _=e.find(T=>!!T.isDefaultRpc);if(o.isDefaultRpc||o.uniqueId===Oe&&!_)return;_&&await r({..._,isDefaultRpc:!1}),await r({...o,isDefaultRpc:!0})}catch(_){console.log(_)}finally{u(!1)}},[o,e,r]),d=(0,v.useCallback)(async()=>{await f(),n(o)},[o,n,f]);return(0,vr.useMount)(()=>{let _=e.find(T=>T.isDefaultRpc);_?i(_):p&&i(br)}),v.default.createElement(I.FlexBox,{className:le.root,direction:I.DIRECTION.vertical},v.default.createElement(it,{backable:!1,closeable:!1,title:s("wallet_extension_rpc_title_select_rpc")}),v.default.createElement(I.Box,{className:le.main},v.default.createElement(I.Box,{className:le.tips},s("wallet_extension_rpc_desc_select_rpc_current")),v.default.createElement(I.Box,{className:le.list},m.map(_=>v.default.createElement(I.Box,{className:le.item,onClick:()=>{i(_)}},v.default.createElement(so,{ellipsis:!0,className:le.title},_.rpcUrl),v.default.createElement(Je.Circle,{checked:_.uniqueId===o.uniqueId}))))),v.default.createElement(I.Box,{className:le.footer},v.default.createElement(P,{buttonGroup:[{loading:a,disabled:!o.uniqueId,actionType:P.ACTION_TYPE.CONFIRM,onClick:d}]})))},Br=Nn;c();l();var Lr={root:"_root_1ou6i_1"};var An=e=>{let{unapproved:t}=e,{rpcNetworks:n,status:o}=tt(),i=To({appBaseChain:"ethereum"})||[],m=i.filter(d=>Me(d.realChainIdHex,t.chainId)),p=n.filter(d=>Me(d.chainId,t.chainId)),[a,u]=(0,X.useState)(null),r=m?.[0]?.chainName||p?.[0]?.name,{loading:f}=Wo({unapproved:t,network:r,providerType:Ot});return o==="loading"||!i?.length||f?X.default.createElement(I.Box,{className:Lr.root},X.default.createElement(fo,null)):m.length+p.length>1?a?a.uniqueId===Oe?X.default.createElement(ht,{...e}):X.default.createElement(It,{...e,rpcInfo:a}):X.default.createElement(Br,{networkType:t.networkType,targetRpcChain:p,targetMainChain:m,handleSelect:u}):m.length?X.default.createElement(ht,{...e}):X.default.createElement(It,{...e,rpcInfo:p[0]})},Mr=An;var Hc=(0,pe.memo)(({unapproved:e})=>{switch(e.method){case qt.SEND_EVM_INSCRIPTIONS:return pe.default.createElement(Tr,{unapproved:e});default:break}switch(e.type){case se.ETH_SIGN:case se.PERSONAL_SIGN:case se.ETH_SIGN_TYPED_DATA:case se.ETH_GET_ENCRYPTION_PUBLIC_KEY:case se.ETH_DECRYPT:return pe.default.createElement(Qo,{unapproved:e});case se.WATCH_ASSET:return pe.default.createElement(mr,{unapproved:e});case se.ADD_ETHEREUM_CHAIN:return pe.default.createElement(Zo,{unapproved:e});default:return pe.default.createElement(Mr,{unapproved:e})}});export{Hc as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=Ethereum-5UCVDU2P.js.map
