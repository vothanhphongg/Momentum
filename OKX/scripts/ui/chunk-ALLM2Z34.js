import{d as Jo}from"./chunk-QXPTHK7Q.js";import{d as Qo,l as J,m as q}from"./chunk-7C3BTQYU.js";import{a as j}from"./chunk-OWWFH26C.js";import{a as Xo}from"./chunk-7CC6X6YX.js";import{E as Go,N as qo,b as _o,d as No,e as Ro,f as N,g as Bo,h as Lo,i as Do,j as ko,l as Oo,m as vo,n as Po,o as wo,p as Mo,r as Uo,s as K,u as Vo,v as Ho,y as $o}from"./chunk-FOF22X4F.js";import{d as jo}from"./chunk-P4EMG7RN.js";import{f as Zo,g as Ko}from"./chunk-G4AVWXHJ.js";import{a as zo}from"./chunk-KKG4PJ6O.js";import{a as Yo}from"./chunk-LLZAOPDB.js";import{a as To,f as G,sa as bo,ta as So}from"./chunk-YALUYHLV.js";import{d as yo}from"./chunk-I3CPAVOC.js";import{o as _}from"./chunk-5QMHGZLF.js";import{Gb as ho,W as go,ec as I}from"./chunk-HPWCPLRR.js";import{a as v}from"./chunk-ON6S2DB7.js";import{ka as C}from"./chunk-N2BCRNDB.js";import{a as Wo}from"./chunk-UVFOW4HH.js";import{I as F,J as Co,L as $,N as Ao,O as S,P as Z,aa as Eo,ba as Fo,fa as xo,ha as x}from"./chunk-TM67VPZU.js";import{H as Io}from"./chunk-PUSMMCUD.js";import{R as Be,z as po}from"./chunk-UWJLNJLY.js";import{H,L as fo,ra as lo}from"./chunk-XDY6V34Y.js";import{b}from"./chunk-JWYCKY2V.js";import{f as u,o as t,q as s}from"./chunk-6KXF36WM.js";t();s();var oe="DontShowError";t();s();var le=u(I()),pe=u(_());Be();t();s();lo();var ce=u(v());t();s();var l=u(I());x();t();s();var W=u(b());t();s();function Le(){return(o,e,r)=>{if(!o)return o;typeof r=="boolean"&&(r={isFee:r});let{isFee:n,useApproximate:i=!0,...a}=r||{};return jo(o,{fixed:e.orderDecimalNum,isFixedUp:n,useApproximate:i,...a})}}var Q=Le;x();var De=(0,W.createContext)({coinId:null,fromAddress:""});function ee(){return(0,W.useContext)(De)}function re(){let{coinId:o}=ee();return o}function R(){let{fromAddress:o}=ee();return o}function g(){return(o,e,r)=>{if(!o)return o;let n;return r?n=Fo(o,e.orderDecimalNum):n=Eo(o,e.orderDecimalNum),xo(n)}}var ne=()=>(0,l.useSelector)(_o),Cr=()=>(0,l.useSelector)(N),E=()=>{let o=g(),e=(0,l.useSelector)(Do),{coin:r}=c();return o(e,r,!1)},te=()=>(0,l.useSelector)(ko),Ar=()=>{let o=E(),{coin:e}=c();return F(o,10**e.decimals)},X=()=>(0,l.useSelector)(Mo),oo=()=>(0,l.useSelector)(vo),eo=()=>{let o=g(),e=oo(),r=A();return o(Co(e,10**r.decimals),r,!0)},se=()=>(0,l.useSelector)(wo),ro=()=>(0,l.useSelector)(Po),ie=()=>{let o=(0,l.useSelector)(ho),e=(0,l.useSelector)(Uo);return e===-1?o.currencyId:e},ue=()=>{let o=(0,l.useSelector)(Oo),{baseCoin:e}=c();return o===-1?e.coinId:o},no=()=>(0,l.useSelector)(Vo),me=()=>(0,l.useSelector)(Ho);var to={vdecimalNum:0,decimals:0,symbol:""};function h(){let{coinId:o}=(0,ce.useParams)(),e=re();return Number(e)||Number(o)}var c=()=>{let o=h(),{coin:e,baseCoin:r}=j(o,!0),n=H(e)?to:e,i=H(r)?to:r;return{coin:n,baseCoin:i}},A=()=>{let o=ue(),{coin:e}=j(o,!1);return H(e)?to:e};t();s();var so=u(I()),ae=u(v());var fe=()=>{let o=(0,ae.useHistory)(),e=(0,so.useSelector)(Lo),r=(0,so.useSelector)(N),{coin:n}=c();return async()=>{await Jo(n.localType,{name:e?.name,type:e?.type,address:r}),o.go(-3)}};function Gr(){let o=(0,le.useSelector)(K),e=se(),r=ro(),{coin:n}=c();return(!!o.key||!!o.text)&&o.type!==C.COMMON_TIP||e||r||!n.coinId}function qr(o){let[e,{setTrue:r,setFalse:n}]=(0,pe.useBoolean)(),i=fe();return{loading:e,onClick:async(...a)=>{r();try{if(!await Xo()){n();return}if(o){let p=await o(...a),{pause:d}=p||{};d||await i()}}catch(f){if(f?.message===Wo||f?.message===oe)n();else{let d=f?.data?.msg||f?.msg||f?.data?.originalError?.msg||po("wallet_home_toast_network_error");Io.error({title:d})}}n()}}}t();s();t();s();var P=u(_()),w=u(b());var B=Symbol("UNSET_INPUT");function ke(){let[o,e]=(0,w.useState)(B),r=(0,P.useLatest)(o);return(0,w.useEffect)(()=>{$o(o!==B)},[o]),{latestRequestInputRef:r,setLatestRequestInput:e}}function Oe({domainInputValue:o,coinId:e},r,n=!1){let{latestRequestInputRef:i,setLatestRequestInput:a}=ke(),f=(0,P.useLatest)(o),{run:p,cancel:d}=(0,P.useDebounceFn)(O=>{go({coinId:e,domain:O}).then(({data:y})=>{O===f.current&&y?.address&&r({address:y?.address,domain:O})}).catch(y=>{console.log(y)}).finally(()=>{i.current===O&&a(B)})},{wait:800});return(0,w.useEffect)(()=>(o.indexOf(".")!==-1&&!n?(a(o),p(o)):a(B),()=>{d&&d()}),[o,n]),{loading:i.current!==B,abort:()=>{d&&d(),a(B)}}}var ve=Oe;t();s();var de=u(v());function Pe(){let o=(0,de.useHistory)(),e=ne();return()=>{o.push(e||To)}}var we=Pe;t();s();var mn=()=>{let o=R(),{baseCoin:e}=c(),r=zo(e.localType);return e.localType?o||r:""};t();s();var M=u(I()),Ce=u(v()),Ae=u(_());function En(){return(0,M.useSelector)(No)}function Fn(){let o=(0,M.useSelector)(Ro),e=(0,M.useSelector)(N),r=(0,M.useSelector)(Bo);return!e||o||!!r.key}function xn(){let o=h(),e=(0,Ce.useHistory)(),r=R(),{amount:n}=Yo(e&&e.location.search.slice(1));return(0,Ae.useMemoizedFn)(()=>{let i={pathname:`${G}/${o}${bo}`};r&&(i.search=`?from=${r}`),n&&(i.search=i.search?`${i.search}&amount=${n}`:`?amount=${n}`),e.push(i)})}t();s();t();s();t();s();var L=u(b()),Ee=u(_());function Me(o,e){let[r,n]=(0,L.useState)(0),i=(0,L.useRef)(0);Array.isArray(e)&&(e={override:!1,fns:e});let a=e?.override?e?.fns||[]:[...o||[],...e?.fns||[]],f=(0,L.useCallback)((p,d)=>{(async()=>{let y=++i.current;n(T=>T+1);try{let T={key:"",args:{}};for(let Re of a){let ao=await Re(p);if(ao){T=ao;break}}y===i.current&&d(T)}finally{n(T=>T-1)}})()},a);return{isCheckingError:r>0,runErrorFns:f}}function Fe(o,e,r){let{callback:n,disabled:i}=r||{};(0,Ee.useDebounceEffect)(()=>{(async()=>{i||e(o,n)})()},[e,o,i],{wait:100})}var xe=Me;function Nn(o,e,r){let n=E();Fe(n,o,{callback:e,disabled:r})}var U=xe;t();s();var io=u(_());function Ue(){return(0,io.useMemoizedFn)(o=>o?null:{key:"wallet_transfer_errortip_receive_address_empty",args:{}})}function Ve(){let{baseCoin:o}=c();return(0,io.useMemoizedFn)(async e=>await Qo(e,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}})}function On(){let o=Ue(),e=Ve();return[o,e]}t();s();var D=u(b()),he=u(I());t();s();var Ie=u(b());x();var He=o=>{let e=Zo(o),r=Ko();return(0,Ie.useCallback)((n,i,a)=>{let{useApproximate:f=!0}=a||{},p=r?.[n]?.coinToUSDRate;return yo(F(i,F(p,e.usdToThisRate)),{useApproximate:f,symbol:e.symbol})},[r,e.symbol,e.usdToThisRate])},ge=He;x();function $e(){let{coin:o}=c(),e=z();return(0,D.useCallback)(()=>o.baseCoinId===0&&S(e,0)?{key:"wallet_extension_transaction_input_error_insufficient_gas_fee",args:{chainSymbol:o.symbol},type:C.FEE_BALANCE_INSUFFICIENT}:null,[e])}function uo(){let o=co();return(0,D.useCallback)(e=>Z(e,o)?{key:"wallet_transfer_errortip_insufficient_balance",args:{},type:C.BALANCE_INSUFFICIENT}:null,[o])}function mo(){let o=ie(),e=Q(),r=ge(o),{coin:n}=c(),i=z();return(0,D.useCallback)(a=>{if(Z(a,i)){let f=r(n.coinId,i,{useApproximate:!1}),p=`${e(i,n,{useApproximate:!1})} ${n.symbol}`;return{key:"wallet_extension_send_text_max_price",args:{fiatamount:f,cryptoamount:p},type:C.BALANCE_INSUFFICIENT}}return null},[i])}var Jn=o=>{let e=(0,he.useDispatch)(),r=$e(),n=uo(),i=mo(),a=[r,n,i],{runErrorFns:f}=U(a,o),p=Y();(0,D.useEffect)(()=>{f(p,d=>{e(Go(d))})},[f,p])};t();s();var k=u(b()),ye=u(I());x();t();s();var V={AMOUNT:"amount",FEE:"fee"};function Ge(){let o=A(),e=Te();return(0,k.useCallback)(()=>S(e,0)?{key:"wallet_extension_popup_insufficient_network_fee",args:{token:o.symbol},type:C.FEE_BALANCE_INSUFFICIENT,highlight:V.FEE}:null,[e,o.symbol])}function qe(){let o=uo();return(0,k.useCallback)(e=>{let r=o(e);return r?{...r,highlight:V.AMOUNT}:null},[o])}function We(){let o=mo();return(0,k.useCallback)(e=>{let r=o(e);return r?{...r,highlight:V.AMOUNT}:null},[o])}function ze(){let o=Ge(),e=qe(),r=We();return[o,e,r]}function at(o){let e=(0,ye.useDispatch)(),r=ze(),{runErrorFns:n}=U(r,o),i=Y();(0,k.useEffect)(()=>{n(i,a=>{e(qo(a))})},[n,i])}t();s();var be=u(v()),Se=u(_());x();lo();function Nt(){let o=te(),e=E();return!!o.key&&o.type!==C.COMMON_TIP||fo(e)||e===""||S(e,0)}function Rt(){let o=h(),e=(0,be.useHistory)(),r=R();return(0,Se.useMemoizedFn)(()=>{let n={pathname:`${G}/${o}${So}`};r&&(n.search=`?from=${r}`),e.push(n)})}t();s();x();var _e=()=>{let o=h();return J(o)},Mt=()=>{let o=g(),e=_e(),{coin:r}=c();return o(q(e,r.decimals),r,!1)},Ne=()=>{let o=_e(),e=no();return e===null?o:e},co=()=>{let o=g(),e=Ne(),{coin:r}=c();return o(q(e,r.decimals),r,!1)},Ye=()=>{let{coin:o}=c(),e=A(),r=oo(),n=Ne();return o.coinId===e.coinId?$(n,r):n},z=()=>{let{coin:o}=c(),e=A(),r=eo(),n=co();return o.coinId===e.coinId?$(n,r):n},Y=()=>{let o=X(),e=z(),r=E();return o?Ao(e,0)?"0":e:r},Ze=()=>{let o=A();return J(o.coinId)},Ke=()=>{let{coin:o}=c(),e=A(),r=Ze(),n=me(),i=no();return n!==null?n:o.coinId===e.coinId&&i!==null?i:r},je=()=>{let o=g(),e=Ke(),r=A();return o(q(e,r.decimals),r,!1)},Te=()=>{let o=je(),e=eo();return $(o,e)},Ut=()=>{let{coin:o}=c(),e=X(),r=E(),n=Ye();return e?n:F(r,10**o.decimals)};t();s();t();s();var Je=u(I());export{ve as a,Q as b,De as c,R as d,h as e,c as f,A as g,Cr as h,E as i,te as j,Ar as k,X as l,oo as m,eo as n,se as o,ro as p,ie as q,ue as r,no as s,me as t,we as u,mn as v,fe as w,En as x,Fn as y,xn as z,Nn as A,U as B,Ue as C,Ve as D,On as E,$e as F,uo as G,mo as H,Jn as I,V as J,Ge as K,qe as L,ze as M,at as N,Nt as O,Rt as P,_e as Q,Mt as R,Ne as S,co as T,z as U,Ze as V,Ke as W,Te as X,Ut as Y,oe as Z,Gr as _,qr as $};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-ALLM2Z34.js.map
