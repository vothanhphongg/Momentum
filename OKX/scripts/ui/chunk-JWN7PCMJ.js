import{a as At}from"./chunk-GVFP6PSC.js";import{a as Z}from"./chunk-3RHBRLYM.js";import{b as Dt}from"./chunk-EWRQIXXK.js";import{a as It,b as Ct}from"./chunk-COMRRNGX.js";import{a as yt,b as gt,c as Et,d as St,e as wt,f as Ft,h as ht,i as Pt}from"./chunk-JUBHPSCA.js";import{a as kt}from"./chunk-RRTG4E4G.js";import{a as bt}from"./chunk-3YGJNBCZ.js";import{a as C}from"./chunk-HOU3VS5H.js";import{a as Tt}from"./chunk-XYDICNP3.js";import{n as dt,q as U,r as ft,s as _t,t as xt}from"./chunk-2LCPVMSO.js";import{s as ut}from"./chunk-3XTUMVWB.js";import{d as pt}from"./chunk-MNZIO3NP.js";import{a as D}from"./chunk-2DF43JKM.js";import{a as ie}from"./chunk-ROB6CHUJ.js";import{e as mt}from"./chunk-JCM7SRK2.js";import{q as b}from"./chunk-I3CPAVOC.js";import{a as ce}from"./chunk-ARWSGU73.js";import{o as se}from"./chunk-5QMHGZLF.js";import{fa as A}from"./chunk-N2BCRNDB.js";import{c as M}from"./chunk-43VURGIT.js";import{L as st,Pc as K,Q as q,R as it,Sc as ne,ha as ae}from"./chunk-TM67VPZU.js";import{A as I,G as lt,N as z,d as v}from"./chunk-PUSMMCUD.js";import{R,z as m}from"./chunk-UWJLNJLY.js";import{L as j,la as at,ra as nt}from"./chunk-XDY6V34Y.js";import{D as ct}from"./chunk-JT3LNHPY.js";import{b as N}from"./chunk-JWYCKY2V.js";import{f as P,o,q as r}from"./chunk-6KXF36WM.js";o();r();var l=P(N());R();o();r();var f=P(N()),Wt=P(se()),Bt=P(ce());R();o();r();var L={tabContent:"_tabContent_klbwj_1",data:"_data_klbwj_4",abi:"_abi_klbwj_7"};var le=t=>{let{data:e,copyable:s,tooltipZIndex:n,kysRet:p}=t,u=p?.intention?.contract?.[0],a=u?.methodName,d=u?.methodParameter,_=(0,f.useMemo)(()=>a&&d?JSON.stringify({[m("wallet_extension_transaction_tab_func")]:a,[m("wallet_extension_transaction_tab_params")]:d},null,2):"",[a,d]),i=(0,Wt.useMemoizedFn)(c=>{(0,Bt.default)(c),lt.success({title:m("wallet_receive_toast_address_copied")})},[e]);return f.default.createElement(Z,{data:e,copyable:s,tooltipZIndex:n,title:m("wallet_extension_transaction_tab_advanced")},f.default.createElement(z.Underline,{size:ct.xs,noLine:!0,noPadding:!0,paneSpacing:24},f.default.createElement(z.TabPane,{tab:m("wallet_dapp_connection_subtitle_data_label"),id:"wallet_dapp_connection_subtitle_data_label"},f.default.createElement(M.Box,{className:L.tabContent},f.default.createElement(I,{graspBaseDom:!0,title:m("wallet_receive_btn_copy_address"),type:I.TYPES.neutral,trigger:I.TRIGGER_TYPES.hover,zIndex:n},f.default.createElement(b.Text,{forceWrap:!0,onClick:()=>{i(e)},size:b.SIZE.sm,className:L.data},e)))),_?f.default.createElement(z.TabPane,{tab:m("wallet_extension_transaction_tab_abi"),id:"wallet_extension_transaction_tab_abi"},f.default.createElement(M.Box,{className:L.tabContent,onClick:()=>{i(_)}},f.default.createElement(I,{noWrapper:!0,graspBaseDom:!0,title:m("wallet_receive_btn_copy_address"),type:I.TYPES.neutral,trigger:I.TRIGGER_TYPES.hover,zIndex:n},f.default.createElement("pre",{className:L.abi},_)))):null))},Gt=le;ne();o();r();var O=P(N());var me=({message:t,bordered:e=!1})=>O.default.createElement(C,{bordered:e},O.default.createElement(Z,null,O.default.createElement(At,{message:t,noPadding:!0}))),Nt=me;o();r();nt();R();var S=P(N());o();r();var W={root:"_root_ap48w_1",title:"_title_ap48w_1",detail:"_detail_ap48w_4",detailText:"_detailText_ap48w_7"};var pe=({permission:t})=>{let e=(0,S.useMemo)(()=>{let s=[];try{t.forEach(({after:n})=>{n.detail.forEach(({authGrous:p})=>{p.forEach(u=>{s.push(u.address)})})})}catch{}return at(s)},[t]);return e.length?S.default.createElement(C,{className:W.root},S.default.createElement(Tt,{titleType:b.TYPE.danger,title:S.default.createElement(b.Text,{size:b.SIZE.xs,className:W.title},m("wallet_extension_tronsettings_title_authorize_address"))},e.map((s,n)=>S.default.createElement(M.Box,{className:W.detail},S.default.createElement(b.Text,{size:b.SIZE.sm,className:W.detailText,type:b.TYPE.secondary},m("wallet_extension_tronsettings_subtitle_addressnum",{num:n+1})),S.default.createElement(b.Text,{forceWrap:!0,size:b.SIZE.sm,className:W.detailText},s))))):null},Mt=pe;o();r();nt();o();r();ae();o();r();var Q=P(ie()),ue=t=>{let e=t.params.transaction.raw_data||{contract:[{parameter:{value:{contract_address:""}}}]},s=t?.params?.transaction?.raw_data_hex||"",{data:n="",amount:p=0,to_address:u,contract_address:a,call_value:d=0}=e.contract[0].parameter.value,_=e.contract[0].type,i=t?.params?.transaction?.functionSelector,c=t?.params?.transaction?.visible,x=d||p,y=a,g=a||u;try{y=Q.default.address.fromHex(y),g=Q.default.address.fromHex(g)}catch{}return{data:n,callValue:d,finalAmount:x,contractAddress:y,finalAddress:g,tronHexData:s,txType:_,functionSelector:i,visible:c}},B=ue;var de=({coinId:t,unapproved:e,verifyGasLimitRet:s})=>{let{data:n,callValue:p,finalAmount:u,contractAddress:a,functionSelector:d,visible:_}=B(e),i=D(e),{loading:c,trxFee:x=0,error:y}=ut({coinId:t,address:i.address,inputData:n,toAddr:a,value:u,functionSelector:d,visible:_},!0),{isOffline:g=!1}=e.params,F=bt(t,e.walletId)||{},{coinAmountInt:h}=F,k=g||j(h)||q(h,x)&&!ft(s),T=!0;return it(p,0)||(T=j(h)||q(st(h,x),p)),{loading:c,networkFee:x,networkFeeProps:{coinId:t,loading:c,estimateFailed:y,networkFee:c?void 0:x},isSufficientGas:k,estimateFailed:y,isSufficientBalance:T,coinWithBalance:F}},Lt=de;o();r();var w=P(N());var fe=({unapproved:t})=>{let e=xt(),[s,n]=(0,w.useState)(!0),{host:p}=kt(t),u=D(t),[a,d]=(0,w.useState)({}),{data:_,finalAmount:i,finalAddress:c,tronHexData:x}=B(t),y=(0,w.useCallback)(async k=>{let{coinId:T,chainId:Y}=k,G=await e({coinId:T,checkTypes:[A.VERIFY_GAS_LIMIT,A.TRON_PERMISSTION,A.KYS],amount:i,from:u.address,to:c,txType:3,domain:p,tokenAddress:c,inputData:_,chainId:Y,additionalData:{tronHexData:x}});d(G),n(!1)},[i,c,_,p,e,u.address,x]),g=(0,w.useMemo)(()=>a[A.VERIFY_GAS_LIMIT]||{},[a]),F=(0,w.useMemo)(()=>a[A.TRON_PERMISSTION]||{},[a]);return{kysRet:(0,w.useMemo)(()=>({loading:s,...a[A.KYS]||{}}),[s,a]),loading:s,preExecute:y,setLoading:n,preExecuteRet:a,verifyGasLimitRet:g,tronPermisstionRet:F}},Yt=fe;var _e=(0,l.memo)(({unapproved:t,onCancel:e,onConfirm:s,backable:n=!1,onBack:p,asPage:u})=>{let{extraData:a,isOffline:d=!1,extParams:_}=t.params||{},i=pt(K)||{},c=i?.coinId||K,{contractAddress:x,txType:y,data:g}=B(t),{initialType:F}=D(t),h=_?.shouldSend,k=Yt({unapproved:t,coinId:c,baseCoin:i}),{kysRet:T,preExecute:Y,verifyGasLimitRet:G,tronPermisstionRet:H}=k;(0,l.useEffect)(()=>{i?.coinId&&Y(i)},[i?.coinId]);let{networkFee:V,networkFeeProps:Vt,isSufficientGas:X,estimateFailed:$,isSufficientBalance:tt,loading:vt,coinWithBalance:et}=Lt({coinId:c,unapproved:t,verifyGasLimitRet:G}),{isBalanceLoadError:zt,coinAmount:Zt}=et,Ot=yt({initialType:F}),ot=y==="TriggerSmartContract"&&!x,Ht=()=>ot?{type:v.TYPE.warn,message:m("wallet_extension_confirmation_toast_not_compatible")}:null,Jt=()=>U(H)?{type:v.TYPE.error,message:H.msg}:null,{permissionMsg:J}=T,jt=()=>J?{type:v.TYPE.error,message:J}:null,Rt=Et({isBalanceLoadError:zt}),qt=gt({estimateFailed:$}),Kt=St({verifyGasLimitRet:G}),Ut=wt({kysRet:T}),Qt=Ft({kysRet:T}),Xt=ht({baseCoin:i,isSufficientGas:X,coinAmount:Zt}),$t=Pt({isSufficientBalance:tt}),te=It({},{custom:[Ht,Ot,Jt,qt,Kt,Rt,Xt,$t,jt,Ut,Qt]}),ee=(0,l.useMemo)(()=>d?{...a,serviceCharge:V}:h?{serviceCharge:V}:{},[a,d,h,V]),{buttonGroup:oe,handleCancel:re}=Dt({coinId:c,preExecuteRet:k,unapproved:t,feeLoading:vt,onCancel:e,onConfirm:s,networkFee:V,estimateFailed:$,isSufficientGas:X,isSufficientBalance:tt,extParams:ee,needCheckMpc:!0,chainConfirmDisabled:ot||mt(F)||U(H)||_t(G),coinWithBalance:et}),{permission:rt}=T;return dt({kysRet:T,handleCancel:re,coinId:c}),l.default.createElement(Ct,{backable:n,onBack:p,asPage:u,kysRet:T,unapproved:t,tipMessage:te,buttonGroup:oe,networkFee:Vt,contractAddress:x,chainTxDetailSlot:l.default.createElement(l.default.Fragment,null,J?l.default.createElement(l.default.Fragment,null,l.default.createElement(Mt,{permission:rt}),l.default.createElement(Nt,{message:rt})):null,g?l.default.createElement(C,{bordered:!1},l.default.createElement(Gt,{data:g,kysRet:T,copyable:{hideDesc:!0},tooltipZIndex:101})):null)})}),Ho=_e;export{Ho as a};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-JWN7PCMJ.js.map
