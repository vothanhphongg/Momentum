import{a as C,b as z}from"./chunk-JAGKSBYF.js";import{c as q}from"./chunk-TSTKPLAO.js";import{a as J}from"./chunk-K6STDTUY.js";import{d as $}from"./chunk-A57OTXBP.js";import{ec as ee,xb as h}from"./chunk-HPWCPLRR.js";import{r as A}from"./chunk-N2BCRNDB.js";import{Jc as G,Sc as v,mb as w,nb as b,ob as R,oc as U,pb as D,pc as K,rc as j,tb as M}from"./chunk-TM67VPZU.js";import{G as W}from"./chunk-PUSMMCUD.js";import{R as Z,z as O}from"./chunk-UWJLNJLY.js";import{C as E,O as S,ga as a,ra as F}from"./chunk-XDY6V34Y.js";import{b as Y}from"./chunk-JWYCKY2V.js";import{f as k,o as y,q as L}from"./chunk-6KXF36WM.js";y();L();var I=k(Y()),T=k(ee());F();Z();j();y();L();F();v();j();function _(t,e){return!e||!t||!t.length?null:t.find(s=>a(s.address)===a(e))||null}function H(t,e,r){let n,s=_(t,r);return s&&s.networks.indexOf(e)!==-1&&(n=s.name),n}function P(t,e,r){let n,s=G({localType:e});if(s){let o=t.find(u=>{let g=a(u.account[s.chain]),m=a(r),p=!1;if(e===w||e===M||e===b||e===R||e===D){let l=K(e),c=u.accountsMap[l];if(c){let N=Object.values(c).map(f=>f.address);p=N.find(f=>a(f)===g)&&N.find(f=>a(f)===m),p=Boolean(p)}}return g===m||p});o&&(n=`${o.keyringName} - ${o.walletName}`)}return n}function ne(t){let{baseCoinId:e,network:r,name:n}=t||{},s=q({coinId:e}),o=(0,T.useSelector)(C),u=J(),g=r||s?.localType;return(0,I.useMemo)(()=>{let m=o||[];n&&(m=m.filter(({name:l,address:c})=>l.indexOf(n)!==-1||c.indexOf(n)!==-1)),g&&(m=m.filter(({networks:l})=>l.indexOf(g)!==-1));let p=S(u,"localType");return m.map(l=>({...l,networks:l.networks.map(c=>{let N=p[c];return{name:c,iconUrl:N?.image}})}))},[o,u,n,g])}function Q(t){let e=(0,T.useSelector)(C);return(0,I.useCallback)((r,n)=>H(e,n??t,r),[e])}function V(t){let e=(0,T.useSelector)(h);return(0,I.useCallback)((r,n)=>P(e,n??t,r),[e])}function re(t){let e=Q(t),r=V(t);return(0,I.useCallback)((n,s)=>{let o=e(n,s);return o?{name:o,address:n,type:A.ADDRESS_BOOK}:(o=r(n,s),o?{name:o,address:n,type:A.WALLET_ACCOUNT}:null)},[e,r])}function se(t){return(0,T.useSelector)(z)[t]||[]}function he(t){let e=(0,T.useSelector)(C);return _(e,t)}var oe=({type:t,name:e,address:r},{addressToNameFn:n,addressInBookToNameFn:s,addressInWalletToNameFn:o})=>{if(t===A.ADDRESS_BOOK)e=s(r);else if(t===A.WALLET_ACCOUNT)e=o(r);else if(t===A.DIRECT){let u=n(r);u&&(e=u.name)}return{type:t,address:r,name:e}};function _e(t,e){let r=[],n=[],s=[],o=[],u=re(t),g=Q(t),m=V(t),p=se(t),l=ne({network:t}),c=(0,T.useSelector)(h),N=$();return(0,I.useMemo)(()=>{p?.length&&(n=p.map(({type:i,name:d,address:B})=>oe({type:i,name:d,address:B},{addressToNameFn:u,addressInBookToNameFn:g,addressInWalletToNameFn:m})),n=n.filter(({address:i})=>a(i)!==a(e)),n?.length&&r.push({group:O("wallet_extension_send_dropdown_recent_address"),list:n}));let f;if(U.includes(t))f=[],c.forEach(i=>{N(t,i.walletId)?.forEach((d,B)=>{a(d.address)!==a(e)&&f.push({address:d.address,group:i.keyringName,name:i.walletName,type:A.WALLET_ACCOUNT,addressType:d.addressType,hideName:B!==0,walletId:i.walletId})})});else{let i=c.filter(d=>{let B=d.needBackup!==1,x=a(d.account[t]),X=a(e);return B&&x!==X&&!!x});i?.length&&(f=i.map(d=>({address:d.account[t],group:d.keyringName,name:d.walletName,type:A.WALLET_ACCOUNT,walletId:d.walletId})))}return o=Object.entries(E(f,"group")),o.forEach(([i,d])=>{r.push({group:i,list:d})}),l?.length&&(s=l.map(({address:i,name:d})=>({address:i,name:d,type:A.ADDRESS_BOOK})),s=s.filter(({address:i})=>a(i)!==a(e)),s?.length&&r.push({group:O("wallet_extension_send_dropdown_address_book"),list:s})),r},[e,p,l,c])}function xe(t){let e=(0,T.useSelector)(C);return()=>{e&&e?.length>=200?W.error({title:O("wallet_extension_addressbook_toast_address_limit_reached")}):t&&t()}}export{ne as a,re as b,he as c,_e as d,xe as e};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-YAQ2CLWQ.js.map
