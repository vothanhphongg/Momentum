import{a as Te,b as be}from"./chunk-V4UEXA3W.js";import{a as xe}from"./chunk-67MFCNYA.js";import{b as Ee,d as Ne,e as Le}from"./chunk-MESORVO5.js";import{a as ve}from"./chunk-2MXPW7CS.js";import{a as Se}from"./chunk-Q5NFQSZP.js";import{a as Me}from"./chunk-PH4IFPBJ.js";import"./chunk-3USV7RH4.js";import{b as he}from"./chunk-W4FUIZTR.js";import{c as ge,e as ye}from"./chunk-V7L2VEJW.js";import{a as de}from"./chunk-E4DNCCNP.js";import"./chunk-HDSEENZ7.js";import{a as K,i as fe,k as _e}from"./chunk-ZE7UTNU6.js";import{f as _,g as Y}from"./chunk-5QJIR6ZJ.js";import{b as z}from"./chunk-H6SNSZIS.js";import"./chunk-J4ZKBKEJ.js";import{a as ce}from"./chunk-W3L3YTJO.js";import"./chunk-M5NI6HPE.js";import"./chunk-YQHUKBMA.js";import{a as q}from"./chunk-VM2NMLPX.js";import{a as A}from"./chunk-PQK3LXXN.js";import{$c as Z,Ha as ue,Ia as pe,Zc as x}from"./chunk-FTRHGHDS.js";import{m as le}from"./chunk-A6Z53EN6.js";import{a as wt}from"./chunk-ON6S2DB7.js";import{q as D}from"./chunk-PUSMMCUD.js";import"./chunk-UWJLNJLY.js";import{I as P,j as H,ra as me}from"./chunk-XDY6V34Y.js";import{ea as C}from"./chunk-JT3LNHPY.js";import"./chunk-47UWF72W.js";import{b as B}from"./chunk-JWYCKY2V.js";import"./chunk-G2266BV2.js";import"./chunk-7VFUX7IX.js";import{f as k,o as y,q as h}from"./chunk-6KXF36WM.js";y();h();var i=k(B()),R=k(Z());me();y();h();var L=k(B()),U=k(Z());y();h();var N={root:"_root_mctsf_1",title:"_title_mctsf_12","input-container":"_input-container_mctsf_19",inputContainer:"_input-container_mctsf_19",input:"_input_mctsf_19","input-tag":"_input-tag_mctsf_25",inputTag:"_input-tag_mctsf_25","custom-input":"_custom-input_mctsf_28",customInput:"_custom-input_mctsf_28","inner-input":"_inner-input_mctsf_28",innerInput:"_inner-input_mctsf_28","error-input":"_error-input_mctsf_36",errorInput:"_error-input_mctsf_36","err-text":"_err-text_mctsf_39",errText:"_err-text_mctsf_39"};var It=({className:e,amountList:t,setAmountList:o,currentMode:n,currency:r,decimals:m,placeholderRef:a})=>{let l=(0,L.useMemo)(()=>n==="sell"?x("swaptrade_meme_input_label_sell_amount"):x("swaptrade_meme_input_label_pay_amount",{token:r}),[n,r]),[p,g]=(0,L.useMemo)(()=>n==="sell"?[!0,2]:[!1,m],[n,m]),s=(u,c)=>{if(p&&A.gt(u,100))return;let d=t.map((S,f)=>f===c?u:S);o(d)},M=(0,L.useMemo)(()=>t.some(u=>A.eq(u,0)),[t]),v=()=>{a.current?.scrollIntoView({behavior:"smooth",block:"center"})};return L.default.createElement("div",{className:(0,U.default)(e,N.root)},L.default.createElement("div",{className:(0,U.default)(N.title)},l),L.default.createElement("div",{className:(0,U.default)("flex items-center",N.inputContainer)},t.map((u,c)=>L.default.createElement(D.Number,{key:c,value:u,size:D.SIZE.sm,symbol:p?"%":null,useReactTransition:!0,autoComplete:"off",spellCheck:"false",precision:g,enableMinus:!1,min:0,className:N.input,inputClassName:N.inputTag,innerClassName:(0,U.default)(N.customInput,N.innerInput,{[N.errorInput]:A.eq(u,0)}),onChange:d=>{s(d,c)},onFocus:v}))),M&&L.default.createElement("div",{className:(0,U.default)(N.errText)},x("swaptrade_meme_input_error_no_zero")))},we=It;y();h();var w=k(B()),j=k(Z());y();h();var O={root:"_root_1jhe8_1",title:"_title_1jhe8_12",tips:"_tips_1jhe8_19",input:"_input_1jhe8_26","custom-input":"_custom-input_1jhe8_26",customInput:"_custom-input_1jhe8_26"};var kt=({className:e,name:t,setName:o,disabled:n})=>{let r=g=>{let s=g.target.value;s.length>12&&(s=s.substring(0,12)),o(s)},[m,a]=(0,w.useState)(!1),l=(0,w.useMemo)(()=>String(t).length>=1&&m,[t,m]),{isSm:p}=de();return w.default.createElement("div",{className:(0,j.default)(e,O.root)},w.default.createElement("div",{className:(0,j.default)(O.title)},x("swaptrade_meme_input_label_preset_name")),w.default.createElement(D,{value:t,size:p?D.SIZE.lg:D.SIZE.sm,error:()=>String(t).length<1?x("swaptrade_meme_input_error_preset_name_empty"):null,innerClassName:(0,j.default)(O.input,O.customInput),disabled:n,errorType:D.TIP_TYPE.always,onChange:r,onFocus:()=>{a(!0)},onBlur:()=>{a(!1)}}),l&&w.default.createElement("div",{className:O.tips},`${t.length}/12`))},Ie=kt;y();h();var T=k(B()),ke=k(wt());me();function De({currentMode:e,computeBuyDefaultPresetList:t,computedSellDefaultPresetList:o}){return(0,T.useMemo)(()=>e==="buy"?t:o,[e,t,o])}function Pe({isEdit:e,currentMode:t,savePresetFn:o,onClose:n,setConfirmText:r,setConfirmVisible:m}){let a=(0,ke.useHistory)(),l=(0,T.useCallback)(()=>{o(),n?n():a.goBack()},[a,n,o]),p=(0,T.useCallback)(()=>{if(!e){let s=t==="buy",M=s?ue:pe,v=s?"swaptrade_meme_dialog_desc_buy_only":"swaptrade_meme_dialog_desc_sell_only";if(!q.get(M)){r(x(v)),m(!0),q.set(M,"1");return}}o(),n?n():a.goBack()},[e,t,n,o,r,m,a]);return[l,p]}function Ae({slippage:e,setSlippageMode:t,setSlippageUse:o,setSlippageError:n,setCustomMaxUse:r,setCustomMaxError:m,editPresetValue:a,setEditPreset:l,isEdit:p}){return(0,T.useCallback)(({mode:s,fixedData:M,dynamicData:v})=>{if(t(s),s===z.FIXED){let{value:u,level:c,error:d}=M;o(u),n(d),l({isEdit:p,value:{...a,slippage:{...e,mode:s,value:u?Y(u):"",type:c}}})}if(s===z.DYNAMIC){let{customMax:u,error:c}=v;r(u),m(c),l({isEdit:p,value:{...a,slippage:{...e,mode:s,customMax:u?Y(u):""}}})}},[a,p,m,r,n,t,o,e,l])}function Fe({setEditPreset:e,isEdit:t,editPresetValue:o,priorityFee:n,setPriorityFeeError:r,setLatestSelectFeeType:m}){return(0,T.useCallback)((l,p,g)=>{e({isEdit:t,value:{...o,priorityFee:{...n,value:p,type:l}}}),r(g),l!=="custom"&&m(l)},[o,t,n,e,m,r])}function Ue({setAmountListUsed:e,setEditPreset:t,isEdit:o,editPresetValue:n,currentMode:r}){return(0,T.useCallback)(a=>{e(a),t({isEdit:o,value:{...n,amountList:a.map(l=>r==="sell"?Y(l):l)}})},[e,t,o,n,r])}function Oe({defaultPresetList:e,id:t,slippage:o,priorityFee:n,amountList:r,slippageError:m,priorityFeeError:a,customMaxError:l,name:p,mevModeStatus:g}){let s=(0,T.useMemo)(()=>e.find(c=>c.id===t)||null,[e,t]),M=(0,T.useMemo)(()=>s?P(s.slippage.value,o.value)&&P(s.slippage.type,o.type)&&P(s.priorityFee.type,n.type)&&P(s.amountList,r)&&P(s.slippage.mode,o.mode)&&P(s.slippage.customMax,o.customMax):!0,[s,o,n,r]),v=(0,T.useMemo)(()=>m||a||l||p.length===0||r.some(c=>A.eq(c,0))||g===6,[m,a,l,p,r,g]),u=(0,T.useMemo)(()=>t?.includes(fe),[t]);return[s,M,v,u]}function He({newPreset:e,setSlippageUse:t,setSlippageMode:o,setCustomMaxUse:n,setPriorityFeeError:r,setSlippageError:m,setCustomMaxError:a,currentMode:l,setAmountListUsed:p,setEditPreset:g,isEdit:s,editPresetValue:M,slippage:v,priorityFee:u}){return(0,T.useCallback)(()=>{if(e){t(_(e.slippage.value)),o(e.slippage.mode),n(_(e.slippage.customMax)),r(!1),m(!1),a(!1);let d=e.amountList.map(S=>l==="sell"?_(S):S);p(d),g({isEdit:s,value:{...M,slippage:{...v,value:e.slippage.value,type:e.slippage.type,mode:e.slippage.mode,customMax:e.slippage.customMax},priorityFee:{...u,value:e.priorityFee.value,type:e.priorityFee.type},amountList:e.amountList}})}},[e,t,o,n,r,m,a,l,p,g,s,M,v,u])}y();h();var I={root:"_root_wwkuh_1",name:"_name_wwkuh_7",mev:"_mev_wwkuh_8",slippage:"_slippage_wwkuh_9",priority:"_priority_wwkuh_10",amount:"_amount_wwkuh_11",btns:"_btns_wwkuh_14","no-bg":"_no-bg_wwkuh_23",noBg:"_no-bg_wwkuh_23","placeholder-tg":"_placeholder-tg_wwkuh_26",placeholderTg:"_placeholder-tg_wwkuh_26"};var Dt=le(({onClose:e})=>{let{useMemeStore:t}=he().hooks,{configStore:o,quoteStore:n}=t(),{currentMode:r,computedConfig:m,tradeScene:a}=o,{mevUnstableShowLevel:l,jitoIsSuccess:p}=n,g=H(m,"nativeTokenInfo.decimals",0),s=H(m,"mevPriceThreshold"),M=H(m,"nativeTokenInfo.chainName"),{chainSymbol:v}=ve(),{editPreset:u,setEditPreset:c}=Ee(),{value:d,isEdit:S}=u,{slippage:f,priorityFee:E,name:G,amountList:X,id:Be,priorityMode:Ye,manualType:je}={..._e,...d},{savePresetFn:Re}=Ne(),[qe,V]=(0,i.useState)(!1),[ze,W]=(0,i.useState)(!1),[Ze,$]=(0,i.useState)(!1),[J,Ke]=(0,i.useState)(Ye),[Q,Ge]=(0,i.useState)(je),Xe=Me({priorityMode:J,manualType:Q,jitoIsSuccess:p,mevUnstableShowLevel:l}),Ve={low:_(f.config.low),medium:_(f.config.medium),high:_(f.config.high)},ee=_(f.min),te=_(f.max),We=_(f.dynamicMax),$e=_(f.dynamicMin),Je=_(f.recommendMax),Qe=_(f.recommendMin),et=b=>be({value:b,min:ee,max:te,level:f.type}),[tt,oe]=(0,i.useState)(_(f?.value)),[ot,ne]=(0,i.useState)(f.mode),[nt,re]=(0,i.useState)(_(f.customMax)),[rt,st]=(0,i.useState)(E.type!==K.CUSTOM?E.type:K.MARKET),{getTokenAmount:it,getUsd:at}=xe(),{computeBuyDefaultPresetList:mt,computedSellDefaultPresetList:lt}=Se(),ut=De({currentMode:r,computeBuyDefaultPresetList:mt,computedSellDefaultPresetList:lt}),[pt,ct]=(0,i.useState)(!1),[ft,_t]=(0,i.useState)(""),[dt,gt]=Pe({isEdit:S,currentMode:r,savePresetFn:Re,onClose:e,setConfirmText:_t,setConfirmVisible:ct}),yt=b=>{c({isEdit:S,value:{...d,name:b}})},ht=b=>{Ke(b),c({isEdit:S,value:{...d,priorityMode:b}})},Mt=b=>{Ge(b),c({isEdit:S,value:{...d,manualType:b}})},vt=Ae({slippage:f,setSlippageMode:ne,setSlippageUse:oe,setSlippageError:V,setCustomMaxUse:re,setCustomMaxError:$,editPresetValue:d,setEditPreset:c,isEdit:S}),St=Fe({setEditPreset:c,editPresetValue:d,isEdit:S,setPriorityFeeError:W,setLatestSelectFeeType:st,priorityFee:E}),[xt,se]=(0,i.useState)(X.map(b=>r==="sell"?Number(_(b)):b)),Tt=Ue({setAmountListUsed:se,setEditPreset:c,isEdit:S,editPresetValue:d,currentMode:r}),[bt,Et,Nt,ie]=Oe({defaultPresetList:ut,id:Be,slippage:f,priorityFee:E,amountList:X,slippageError:qe,priorityFeeError:ze,customMaxError:Ze,name:G,mevModeStatus:Xe}),Lt=He({newPreset:bt,setSlippageUse:oe,setSlippageMode:ne,setCustomMaxUse:re,setPriorityFeeError:W,setSlippageError:V,setCustomMaxError:$,currentMode:r,setAmountListUsed:se,setEditPreset:c,isEdit:S,editPresetValue:d,slippage:f,priorityFee:E}),ae=(0,i.useRef)(null),Ct=ce();return i.default.createElement("div",{className:(0,R.default)(I.root)},i.default.createElement(Ie,{className:I.name,name:G,setName:yt,disabled:ie}),a===0&&i.default.createElement(Te,{className:I.mev,priorityMode:J,setMode:ht,manualType:Q,setManualType:Mt,mevUnstableShowLevel:l,jitoIsSuccess:p,mevPriceThreshold:s,chainName:M}),i.default.createElement(ye,{className:I.slippage,mode:ot,fixedData:{value:tt,level:f.type,levelMap:Ve,min:ee,max:te,validator:et},dynamicData:{showDynamicSlippage:!1,dynamicSlippage:"",supportCustomMax:f.supportCustomMax,customMax:nt,dynamicMax:We,dynamicMin:$e,recommendMax:Je,recommendMin:Qe},onChange:vt}),i.default.createElement(ge.SelectMode,{className:I.priority,fee:E?.value,type:E?.type,feeMap:E.config,max:E?.max,currency:v,onChange:St,recommendMaxValue:E?.recommendMaxValue,recommendMinValue:E?.recommendMinValue,latestSelectType:rt,getTokenAmount:it,getUsd:at,tradeScene:a}),i.default.createElement(we,{className:I.amount,amountList:xt,setAmountList:Tt,currency:v,currentMode:r,decimals:g,placeholderRef:ae}),i.default.createElement("div",{className:(0,R.default)({[I.placeholderTg]:Ct}),ref:ae}),i.default.createElement("div",{className:(0,R.default)("flex justify-between",I.btns)},ie&&i.default.createElement(C,{className:"flex-1",category:C.CATEGORY.outline,type:C.TYPE.primary,size:C.SIZE.lg,block:!0,disabled:Et,onClick:Lt},x("swaptrade_general_btn_reset")),i.default.createElement(C,{className:"flex-1",category:C.CATEGORY.fill,type:C.TYPE.primary,disabled:Nt,size:C.SIZE.lg,block:!0,onClick:gt},x("swaptrade_dialog_btn_confirm"))),i.default.createElement(Le,{onConfirm:dt,visible:pt,showChecked:!1,text:ft,confirmText:x("commonall_text_btn_ok_active")}))}),Vo=Dt;export{Vo as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=PresetEdit-5HB66VOB.js.map
