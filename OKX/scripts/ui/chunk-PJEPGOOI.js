import{b as Be,c as be,e as we,g as Fe}from"./chunk-EVRKRU7I.js";import{c as $,e as ee}from"./chunk-IGYAABP7.js";import{a as B,b as i}from"./chunk-RYRQK4MH.js";import{c as P,k as Ee}from"./chunk-7C3BTQYU.js";import{t as U}from"./chunk-3XTUMVWB.js";import{a as ye}from"./chunk-OWWFH26C.js";import{o as vt}from"./chunk-5QMHGZLF.js";import{Q as Ie,U as Ne}from"./chunk-HPWCPLRR.js";import{fa as m}from"./chunk-N2BCRNDB.js";import{I as X,L as Ge,ha as Gt}from"./chunk-TM67VPZU.js";import{G as ve,o as v}from"./chunk-PUSMMCUD.js";import{R,z as e}from"./chunk-UWJLNJLY.js";import{d as Q,ra as Pt}from"./chunk-XDY6V34Y.js";import{ea as a}from"./chunk-JT3LNHPY.js";import{b as D}from"./chunk-JWYCKY2V.js";import{f as x,o as t,q as o}from"./chunk-6KXF36WM.js";t();o();var c=x(D()),w=x(vt());Pt();R();Gt();t();o();t();o();var te=x(D());R();t();o();var I=x(D());var It=({title:s,text:p,...l})=>I.default.createElement(v.Prompt,{className:"tx-check-dialog",hideCloseBtn:!0,alignBottom:!1,titleCenter:!1,infoType:null,renderContent:f=>I.default.createElement(f,null,I.default.createElement("div",{className:"tx-check-dialog__content"},I.default.createElement("div",{className:"tx-check-dialog__content-title"},s),I.default.createElement("div",{className:"tx-check-dialog__content-text"},p))),cancelBtnProps:{category:a.CATEGORY.outline,size:a.SIZE.lg},confirmBtnProps:{type:a.TYPE.highlight,size:a.SIZE.lg},...l}),b=I.default.memo(It);var Nt=({visible:s,onConfirm:p,onCancel:l,txCheckData:f})=>{let h=f?.find(d=>d?.checkType===m.OVERWRITTEN)||{},{popUpTitle:_,popUpDesc:u,primaryButtonName:C,secondaryButtonName:k}=h||{};return te.default.createElement(b,{visible:s,title:_||e("wallet_extension_transaction_popup_failed_transaction"),text:u||e("wallet_extension_transaction_popup_replace_failed_transaction"),confirmText:C||e("wallet_extension_transaction_popup_btn_replace"),cancelText:k||e("wallet_extension_transaction_popup_btn_skip"),onConfirm:p,onCancel:l})},oe=te.default.memo(Nt);t();o();var r=x(D());R();function yt({visible:s,onConfirm:p,onCancel:l,data:f}){let{userGasInfo:h,updateGasInfo:_,baseCoin:u}=f,{gasPrice:C,maxFeePerGas:k}=_,{supportEip1559:d,gasLimit:N,gasPrice:Y,maxFeePerGas:z}=h,S=d?z:Y,L=$(S,N,u),y=ee(S,N),W=d?k:C,V=$(W,N,u),Z=ee(W,N);return r.default.createElement(v.Prompt,{visible:s,className:"ethereum-check-gas-dialog",alignBottom:!1,titleCenter:!1,infoType:null,onConfirm:p,onClose:l,confirmText:e("extension_toast_btn_confirmgasfee"),confirmBtnProps:{type:a.TYPE.highlight,size:a.SIZE.lg},renderContent:F=>r.default.createElement(F,null,r.default.createElement("div",{className:"ethereum-check-gas-dialog__title"},e("extension_toast_title_transaction_replace")),r.default.createElement("div",{className:"ethereum-check-gas-dialog__subtitle"},e("extension_toast_subtitle_gasincrease")),r.default.createElement("div",{className:"ethereum-check-gas-dialog__fee-title"},e("extension_toast_title_current_transaction")),r.default.createElement("div",{className:"ethereum-check-gas-dialog__fee"},r.default.createElement("div",{className:"ethereum-check-gas-dialog__fee__fee-detail"},L),r.default.createElement("div",{className:"ethereum-check-gas-dialog__fee__gas-detail"},y)),r.default.createElement("div",{className:"ethereum-check-gas-dialog__fee-title"},e("extension_toast_title_gasprice")),r.default.createElement("div",{className:"ethereum-check-gas-dialog__fee"},r.default.createElement("div",{className:"ethereum-check-gas-dialog__fee__fee-detail--speed"},V),r.default.createElement("div",{className:"ethereum-check-gas-dialog__fee__gas-detail"},Z)))})}var ne=(0,r.memo)(yt);t();o();var ae=x(D());var Et=({visible:s,onConfirm:p,onCancel:l,txCheckData:f})=>{let h=f?.find(d=>d?.checkType===m.OVERWRITTEN)||{},{popUpTitle:_,popUpDesc:u,primaryButtonName:C,secondaryButtonName:k}=h||{};return ae.default.createElement(b,{visible:s,title:_,text:u,confirmText:C,cancelText:k,onConfirm:p,onCancel:l,hideCloseBtn:!0})},ie=ae.default.memo(Et);t();o();var se=x(D());R();var Bt=({visible:s,onConfirm:p,onCancel:l,txCheckData:f})=>{let h=f?.find(d=>d?.checkType===m.OVERWRITTEN)||{},{popUpTitle:_,popUpDesc:u,primaryButtonName:C,secondaryButtonName:k}=h||{};return se.default.createElement(b,{visible:s,title:_||e("wallet_extension_transaction_popup_pending_transaction"),text:u||e("wallet_extension_transaction_popup_replace_pending_transaction"),confirmText:C||e("wallet_extension_transaction_popup_btn_replace"),cancelText:k||e("wallet_extension_transaction_popup_btn_continue_wait"),onConfirm:p,onCancel:l,hideCloseBtn:!0})},re=se.default.memo(Bt);t();o();var le=x(D());R();t();o();var ce=x(D());var bt=({...s})=>ce.default.createElement(v.Prompt,{alignBottom:!1,hideCloseBtn:!0,infoType:v.Prompt.INFO_TYPE.warn,confirmBtnProps:{type:a.TYPE.highlight,size:a.SIZE.lg},cancelBtnProps:{category:a.CATEGORY.outline,size:a.SIZE.lg},...s}),Ae=ce.default.memo(bt);var wt=({visible:s,onConfirm:p,onCancel:l})=>le.default.createElement(Ae,{visible:s,title:e("wallet_extension_popup_repeat_order"),confirmText:e("wallet_extension_popup_repeat_order_btn_continue"),cancelText:l?e("wallet_extension_popup_repeat_order_btn_viewhistory"):null,text:e("wallet_extension_popup_repeat_order_desc"),onConfirm:p,onCancel:l||(()=>{})}),pe=le.default.memo(wt);var Ft=({children:s=null,btnProps:p={},dataForCheck:l={},whetherCheckRepeat:f=!1,whetherCheckGas:h=!0,onFailedCancel:_=()=>{},onFailedConfirm:u=()=>{},onPendingCancel:C=()=>{},onPendingConfirm:k=()=>{},onRepeatCancel:d=()=>{},onRepeatConfirm:N=()=>{},onPending7702Cancel:Y=()=>{},onPending7702Confirm:z=()=>{},onClick:S=()=>{},beforeClick:L=()=>{},afterClick:y=()=>{},onGasReplaceCancel:W,onGasReplaceConfirm:V})=>{let{fetchParams:Z,userGasInfo:F,baseCoinAmountUse:Oe}=l,E=(0,c.useRef)([]),H=(0,c.useRef)(U.NEW),me=(0,c.useRef)({}),G=(0,c.useRef)({}),fe=(0,c.useRef)(!1),[Re,{setTrue:Ue,setFalse:ue}]=(0,w.useBoolean)(!1),[Se,{setTrue:We,setFalse:de}]=(0,w.useBoolean)(!1),[Ye,{setTrue:ze,setFalse:ge}]=(0,w.useBoolean)(!1),[Le,{setTrue:Ve,setFalse:he}]=(0,w.useBoolean)(!1),[Ze,{setTrue:He,setFalse:_e}]=(0,w.useBoolean)(!1),{coinId:M,from:Ce,to:Me,amount:je,gasPrice:qe}=Z,{baseCoin:ke}=ye(M,!0),{coinAmountInt:Je}=Ee(ke.coinId),Ke=async()=>{let n={checkTypes:[m.REPEAT,m.OVERWRITTEN],coinId:M,from:Ce,to:Me,amount:je,gasPrice:qe},[{data:g=[]},{data:O}]=await Promise.all([Ne(n),Ie({coinId:M,address:Ce})]);E.current=g;let K=O?.info?.gasPrice||{};return me.current=K,g},A=()=>E.current,Qe=()=>me.current,xe=()=>G.current,Xe=()=>{let g=A().find(Dt=>Dt?.checkType===m.OVERWRITTEN)||{},{gasPrice:O,priorityFee:K}=g;return{originGasPrice:X(O,1.1),originPriorityFee:X(K,1.1)}},$e=()=>{H.current=U.ON_CHAIN},et=()=>{H.current=U.NEW},tt=n=>(G.current={...G.current,...n},G.current),ot=()=>{fe.current=!0},nt=()=>{ve.error({title:e("extension_toast_text_insufficient_balance")})},j=i(()=>{let n={nonce:0,updateGasInfo:null},g=E.current.find(O=>O?.checkType===m.OVERWRITTEN)||{};return H.current===U.NEW?n.nonce=g.newNonce:n.nonce=g.nonce,fe.current&&(G.current.gasPrice||G.current.maxFeePerGas)&&(n.updateGasInfo=G.current),n},S),at=B(Ue,P),it=B(We,P),st=B(ze,P),rt=n=>be(n,at,it,st),ct=B(tt,He,P),Te=h?n=>we(n,{userGasInfo:F,serverGasInfo:Qe(),originTxGasInfo:Xe()},ct):Q,lt=B(nt,y,P),pt=n=>{let g=Ge(Je,Oe);return Fe(n,{userGasInfo:F,updateGasInfo:xe(),baseCoinAmountAvailable:g},lt)},De=f?n=>(Be(n,m.REPEAT)&&(Ve(),P()),n):Q,Pe=i(A,De,j),q=i($e,Pe),J=i(et,Pe),mt=i(_,ue,J),ft=i(u,ue,A,Te,q),ut=i(C,de,J),dt=i(k,de,A,Te,q),gt=i(Y,ge),ht=i(z,ge,J),_t=i(d,he,y),Ct=i(N,he,j),kt=i(W,_e,y,P),xt=i(ot,V,_e,A,pt,q),Tt=i(L,Ke,rt,De,j,y);return c.default.createElement(c.default.Fragment,null,c.default.createElement(a,{category:a.CATEGORY.fill,type:a.TYPE.highlight,size:a.SIZE.lg,block:!0,...p,onClick:Tt},s),c.default.createElement(oe,{visible:Re,txCheckData:E.current,onCancel:mt,onConfirm:ft}),c.default.createElement(re,{visible:Se,txCheckData:E.current,onCancel:ut,onConfirm:dt}),c.default.createElement(ie,{visible:Ye,txCheckData:E.current,onCancel:gt,onConfirm:ht}),c.default.createElement(pe,{visible:Le,onCancel:_t,onConfirm:Ct}),c.default.createElement(ne,{visible:Ze,onCancel:kt,onConfirm:xt,data:{baseCoin:ke,userGasInfo:F,updateGasInfo:xe()}}))},At=Ft;t();o();export{At as a};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-PJEPGOOI.js.map
