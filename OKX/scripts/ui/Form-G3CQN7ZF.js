import{a as Me}from"./chunk-DMNTGO4X.js";import{a as We}from"./chunk-UUWJWUOY.js";import{b as Ie,c as O,d as z,e as be,f as Ne,g as Ee,h as ke,i as Ce,j as Te,k as Se,l as D,m as j,n as G,o as Ue,p as K,q as V,r as De,s as Pe,t as Le,u as $e}from"./chunk-3Q5RSJMP.js";import{a as ge,c as W,e as U}from"./chunk-XIYLMV6I.js";import{y as ze}from"./chunk-YJQGXXOQ.js";import"./chunk-HTLOGWI7.js";import{a as we}from"./chunk-6SEP5B7P.js";import"./chunk-FHKOH5E6.js";import"./chunk-NTQ2YVDA.js";import"./chunk-KKG4PJ6O.js";import"./chunk-ZTAZ2272.js";import"./chunk-IRMYAC6R.js";import"./chunk-Q76QXAWY.js";import"./chunk-THSNJ5WU.js";import{b as ie}from"./chunk-PDC447BO.js";import"./chunk-JCM7SRK2.js";import{a as Re}from"./chunk-PTD7UCOR.js";import{b as ne}from"./chunk-ETJEH7T4.js";import{a as Be}from"./chunk-V3IFYKWM.js";import"./chunk-EWTTD4DL.js";import"./chunk-Y2TPPS4H.js";import"./chunk-ITY22AD4.js";import"./chunk-E2JYOUYE.js";import"./chunk-B3JSNQIV.js";import{Ea as xe,X as ye,a as ve}from"./chunk-YALUYHLV.js";import"./chunk-I3CPAVOC.js";import"./chunk-ARWSGU73.js";import"./chunk-CZ2ZBAZV.js";import{o as ue}from"./chunk-5QMHGZLF.js";import{ec as A}from"./chunk-HPWCPLRR.js";import"./chunk-TSTPZ3JM.js";import"./chunk-D2LKUI4F.js";import{a as Ae}from"./chunk-ON6S2DB7.js";import"./chunk-SZD6WTBQ.js";import"./chunk-ASR4HLU7.js";import"./chunk-ANIUN6US.js";import"./chunk-3DZ7WRLL.js";import"./chunk-DEOJU4Z3.js";import"./chunk-PLIIQKFY.js";import{b as H}from"./chunk-2HSCH6R3.js";import{i as he}from"./chunk-XV444F26.js";import"./chunk-N2BCRNDB.js";import"./chunk-RTFE54S3.js";import"./chunk-GCQ4H2BA.js";import"./chunk-UVFOW4HH.js";import"./chunk-LNOPECCQ.js";import"./chunk-CB7FOZNP.js";import"./chunk-43VURGIT.js";import{Ea as ce,Ga as fe,Kc as _e,Na as de,Sc as lr,ya as pe,za as ar}from"./chunk-TM67VPZU.js";import"./chunk-VW6OQNWT.js";import{A as oe,d as te,q as y}from"./chunk-PUSMMCUD.js";import{R as $,z as t}from"./chunk-UWJLNJLY.js";import"./chunk-VRY2ADKE.js";import"./chunk-5U7FO2PW.js";import"./chunk-PDUOSATP.js";import"./chunk-XDY6V34Y.js";import"./chunk-YJFNO57I.js";import"./chunk-DZ6CTC22.js";import{$ as C,W as me,c as sr,ea as T}from"./chunk-JT3LNHPY.js";import"./chunk-47UWF72W.js";import{b as L}from"./chunk-JWYCKY2V.js";import"./chunk-G2266BV2.js";import"./chunk-L4PAIYPH.js";import"./chunk-UT7LJPKF.js";import"./chunk-AFZ6A2B3.js";import"./chunk-VVPY7ZA7.js";import"./chunk-KUW5VATV.js";import"./chunk-BNAVWOJ2.js";import"./chunk-IG2Q5ALZ.js";import"./chunk-WOMUNWBT.js";import"./chunk-QYVQBXDG.js";import"./chunk-7D4PUIEN.js";import"./chunk-7QO4TZYQ.js";import"./chunk-FF4LY6PE.js";import"./chunk-76KCDJDG.js";import"./chunk-YDUDQP2P.js";import"./chunk-PGPFV4JQ.js";import"./chunk-MIBHDVGP.js";import"./chunk-7VFUX7IX.js";import"./chunk-XLF4LAH2.js";import"./chunk-ONKZ57T6.js";import"./chunk-ZC7Q7LCH.js";import{c as nr,f as v,o as w,p as N,q as g}from"./chunk-6KXF36WM.js";var se=nr((hr,qe)=>{w();g();(function(o){"use strict";o.exports.is_uri=f,o.exports.is_http_uri=r,o.exports.is_https_uri=i,o.exports.is_web_uri=h,o.exports.isUri=f,o.exports.isHttpUri=r,o.exports.isHttpsUri=i,o.exports.isWebUri=h;var a=function(s){var e=s.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return e};function f(s){if(!!s&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(s)&&!/%[^0-9a-f]/i.test(s)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(s)){var e=[],n="",_="",m="",d="",p="",c="";if(e=a(s),n=e[1],_=e[2],m=e[3],d=e[4],p=e[5],!!(n&&n.length&&m.length>=0)){if(_&&_.length){if(!(m.length===0||/^\//.test(m)))return}else if(/^\/\//.test(m))return;if(!!/^[a-z][a-z0-9\+\-\.]*$/.test(n.toLowerCase()))return c+=n+":",_&&_.length&&(c+="//"+_),c+=m,d&&d.length&&(c+="?"+d),p&&p.length&&(c+="#"+p),c}}}function r(s,e){if(!!f(s)){var n=[],_="",m="",d="",p="",c="",I="",l="";if(n=a(s),_=n[1],m=n[2],d=n[3],c=n[4],I=n[5],!!_){if(e){if(_.toLowerCase()!="https")return}else if(_.toLowerCase()!="http")return;if(!!m)return/:(\d+)$/.test(m)&&(p=m.match(/:(\d+)$/)[0],m=m.replace(/:\d+$/,"")),l+=_+":",l+="//"+m,p&&(l+=p),l+=d,c&&c.length&&(l+="?"+c),I&&I.length&&(l+="#"+I),l}}}function i(s){return r(s,!0)}function h(s){return r(s)||i(s)}})(qe)});w();g();var u=v(L()),er=v(A()),rr=v(Ae()),tr=v(ue()),or=v(sr());$();w();g();var M=v(L()),Q=v(A());$();var Ze=(0,M.memo)(o=>{let{disabled:a}=o,f=(0,Q.useDispatch)(),r=({target:{value:n}})=>{f(Ce(n))},{name:i,nameErr:h}=(0,Q.useSelector)(Ie),s=()=>{f(Te(t(i?"":"developer_mode_network_errortip_cannotspace")))},e=t("extension_wallet_addnetwork_placeholder_network");return M.default.createElement("div",{className:"net-form__wrap-input"},M.default.createElement(y,{value:i,onBlur:s,disabled:a,size:y.SIZE.xl,errorType:y.TIP_TYPE.always,error:h,onChange:r,placeholder:e,label:t("wallet_transaction_history_subtitle_network_name")}))});w();g();var B=v(L()),Z=v(A()),Ye=v(se());$();w();g();w();g();de();async function Fe(o,a,f=[]){let r=o,i={"Content-Type":"application/json"},{origin:h,pathname:s,username:e,password:n,search:_}=new URL(o);if(e&&n){let I=N.Buffer.from(`${e}:${n}`).toString("base64");i.Authorization=`Basic ${I}`,r=`${h}${s}${_}`}let m=await fe(r,{id:Date.now().toString(),jsonrpc:"2.0",method:a,params:f},{timeout:3e4,cache:"default",headers:i}),d=m?.data;try{d||(d=await m.clone().json())}catch{}if(!d||Array.isArray(d)||typeof d!="object")throw new Error(`RPC endpoint ${o} returned non-object response.`);let{error:p,result:c}=d;if(p)throw new Error(p?.message||p);return c}var X=o=>{try{let a=new URL(o);return a.protocol==="http:"||a.protocol==="https:"}catch{return!1}},J=((o={})=>a=>new Promise((f,r)=>o[a]?f(o[a]):Fe(a,"eth_chainId").then(i=>{o[a]=i,f(i)}).catch(i=>{r(i)})))();var He=B.default.memo(o=>{let{disabled:a,modify:f}=o,r=(0,Z.useDispatch)(),[i,h]=(0,B.useState)(!1),s=({target:{value:c}})=>{r(Se(c.trim()))},{rpcUrl:e,rpcUrlErr:n}=(0,Z.useSelector)(O),{rpcNetworks:_}=U(),{chainId:m}=(0,Z.useSelector)(z),d=()=>{if(!e)return r(D(t("developer_mode_network_errortip_cannotspace")));if(!X(e))return r(D(t("developer_mode_infor_errortip_https")));if(!Ye.default.isWebUri(e))return r(D(t("developer_mode_infor_errortip_rpcurl")));let I=_.find(l=>l.rpcUrl===e);return I&&!f?r(D(t("developer_mode_infor_errortip_used_network",{network:I.name}))):(h(!0),J(e).then(l=>{try{if(l=parseInt(l,16).toString(10),Number.isNaN(+l)){h(!1),r(D(""));return}f?l!==m&&r(G({err:t("developer_mode_infor_errortip_chainid",{chainID:l}),validChainId:m})):r(j(l))}catch{}h(!1),r(D(""))}).catch(()=>{r(D(t("developer_mode_infor_errortip_rpcurl"))),h(!1)}))},p=t("extension_wallet_addnetwork_placeholder_prcurl");return B.default.createElement("div",{className:"net-form__wrap-input"},B.default.createElement(y,{value:e,onBlur:d,disabled:a,size:y.SIZE.xl,errorType:y.TIP_TYPE.always,error:n,onChange:s,placeholder:p,label:t("developer_mode_network_title_rpcurl"),suffix:i&&B.default.createElement(C.Circle,{size:C.SIZE.sm})}))});w();g();var P=v(L()),q=v(A()),Oe=v(ue());$();ar();de();var mr=async o=>{let{data:a}=await ce(pe.getRpcNetworkByChainId,{chainIds:[o]});return a?.[0]?.nativeCurrency?.symbol},je=P.default.memo(o=>{let{disabled:a,modify:f}=o,r=(0,q.useDispatch)(),i=({target:{value:l}})=>{r(K(l.trim()))},{symbol:h,symbolErr:s,symbolTip:e}=(0,q.useSelector)(be),[n,_]=(0,P.useState)(!1),{chainId:m}=(0,q.useSelector)(z),[d,p]=(0,P.useState)(!0),c=()=>{let l="";if(!m){r(V(l));return}h||(l=t("developer_mode_network_errortip_cannotspace"),r(V(l))),r(V(l))};(0,Oe.useDebounceEffect)(()=>{(async()=>{if(!m||f)return;let l;_(!0);try{r(K("")),l=await mr(m),r(K(l))}catch{}finally{p(l),_(!1)}})()},[m],{wait:500});let I=t("extension_wallet_addnetwork_placeholder_symbol");return P.default.createElement("div",{className:"net-form__wrap-input"},P.default.createElement(y,{value:h,disabled:a||f||d,onBlur:c,size:y.SIZE.xl,errorType:y.TIP_TYPE.always,error:s,tips:e,onChange:i,suffix:n&&P.default.createElement(C.Circle,{size:C.SIZE.sm}),placeholder:I,label:t("developer_mode_network_title_tokenname")}))});w();g();var E=v(L()),F=v(A());$();w();g();lr();function Ge(o){return Number.isSafeInteger(o)&&o>0&&o<=_e}var Ke=E.default.memo(o=>{let{disabled:a,modify:f}=o,r=(0,F.useDispatch)(),i=({target:{value:x}})=>{r(j(x.trim()))},[h,s]=(0,E.useState)(!1),{chainId:e,chainIdErr:n,chainIdTip:_,fieldUpdated:m}=(0,F.useSelector)(z),{rpcUrl:d}=(0,F.useSelector)(O),{rpcNetworks:p}=U(),c=(x,b,k=e)=>{r(G({err:x,validChainId:k})),r(Ue({tip:b,validChainId:k}))},I=()=>{let x="",b="";if(!e)return x=t("developer_mode_network_errortip_cannotspace"),c(x,b);let k=e,ae=10;if(!k.startsWith("0x"))try{k=`0x${H(k)}`}catch{x=t("developer_mode_infor_errortip_errorchainid")}let[le]=p.filter(S=>S.chainId===k&&S.rpcUrl!==d);if(le?b=t("developer_mode_infor_errortip_network",{network:le.name}):e.startsWith("0x")?(ae=16,/^0x[0-9a-f]+$/iu.test(e)||(x=t("developer_mode_infor_errortip_errornum"))):/^[0-9]+$/u.test(e)?e.startsWith("0")?x=t("developer_mode_infor_errortip_errornum"):Ge(parseInt(e,ae))||(x=t("developer_mode_infor_errortip_errorchainid")):x=t("developer_mode_infor_errortip_errornum"),!d||h||x)return c(x,b);s(!0),J(d).then(S=>{if(k!==S){if(!e.startsWith("0x"))try{S=parseInt(S,16).toString(10)}catch(ir){console.log(ir)}x=t("developer_mode_infor_errortip_chainid",{chainID:S})}c(x,b,e),s(!1)}).catch(()=>{b=t("developer_mode_infor_errortip_rpcurl_confirm"),s(!1),c(x,b,e)})},l=t("extension_wallet_addnetwork_placeholder_chainid");return E.default.createElement("div",{className:"net-form__wrap-input"},E.default.createElement(y,{value:e,disabled:a||!!f,size:y.SIZE.xl,errorType:y.TIP_TYPE.always,error:n,onBlur:I,tips:_,onChange:i,suffix:h&&m&&E.default.createElement(C.Circle,{size:C.SIZE.sm}),placeholder:l,label:E.default.createElement(E.default.Fragment,null,t("developer_mode_network_title_chainid"),E.default.createElement(oe,{title:t("developer_mode_network_tooltip_display_decimal"),placement:oe.DIRECTION.topRight},E.default.createElement(me,{className:"okx-wallet-plugin-information-circle"})))}))});w();g();var R=v(L()),Y=v(A()),Ve=v(Ae());$();w();g();var Qe=o=>{let{modify:a,uniqueId:f,onDeleteNet:r}=o,i=(0,Ve.useHistory)(),h=(0,Y.useSelector)(ke),s=ze(),{rpcNetworks:e,updateRpcNetwork:n,addRpcNetwork:_}=U(),{extensionConfig:m,setExtensionConfig:d}=we("rpc_info"),p=(0,Y.useDispatch)(),c=(0,Y.useSelector)(Ee),I=e.find(b=>W(b,{uniqueId:f}))||{},l=(0,R.useRef)(!1),x=async()=>{if(!l.current){if(l.current=!0,a){let b=await n({...I,...c});W(b,m)&&await d(b);let k={...c,chainId:`0x${H(c.chainId)}`};s(k),i.replace(`${ye}?tab=2`)}else{let b=await _(c);await p(ie("isRpcMode",!0)),await p(ie("currentNetworkUniqueId",b?.uniqueId)),await d(b),i.replace(xe)}l.current=!1}};return R.default.createElement(Be.FooterActions,{usePortal:!0},a&&R.default.createElement(T,{category:T.CATEGORY.outline,type:T.TYPE.primary,size:T.SIZE.lg,onClick:r,className:"net-form__footer-delete-btn",contentClassName:"net-form__footer-delete-btn__text"},t("commonall_resultpage_btn_delete")),R.default.createElement(T,{disabled:h,category:T.CATEGORY.fill,type:T.TYPE.highlight,size:T.SIZE.lg,onClick:x},t("developer_mode_bot_btn_save")))};w();g();var ee=v(L()),re=v(A()),Xe=v(se());$();var Je=ee.default.memo(o=>{let{disabled:a}=o,f=(0,re.useDispatch)(),r=({target:{value:n}})=>{f(De(n.trim()))},{explorerUrl:i,explorerUrlErr:h}=(0,re.useSelector)(Ne),s=()=>{let n="";i&&(Xe.default.isWebUri(i)||(X(i)?n=t("developer_mode_infor_errortip_invalidurl"):n=t("developer_mode_infor_errortip_https1"))),f(Pe(n))},e=t("extension_wallet_addnetwork_placeholder_blockchain");return ee.default.createElement("div",{className:"net-form__wrap-input"},ee.default.createElement(y,{value:i,onBlur:s,disabled:a,size:y.SIZE.xl,errorType:y.TIP_TYPE.always,error:h,onChange:r,placeholder:e,label:t("developer_mode_network_title_blockchain_explorer")}))});var Vt=()=>{let o=(0,er.useDispatch)(),a=(0,rr.useHistory)(),f=We(),r=f.get("modify"),i=r===ge.CANT,h=decodeURIComponent(f.get("id")),{rpcNetworks:s}=U(),e=(0,u.useMemo)(()=>s.find(p=>W(p,{uniqueId:h}))||{},[s]);(0,u.useEffect)(()=>{let p={...e};p.chainId&&(p.chainId=`${Number.parseInt(p.chainId,16)}`),o(Le(p))},[e]),(0,tr.useUnmount)(()=>{o($e())});let n=(0,u.useCallback)(()=>{a.action==="POP"?a.replace(ve):a.goBack()},[a]),_=Me(),m=(0,u.useCallback)(()=>{_({editRpcInfo:e,onDeleted:n})},[_,n,e]),d=(0,u.useMemo)(()=>u.default.createElement("div",{className:"net-form__title"},e.name?u.default.createElement(u.default.Fragment,null,u.default.createElement(ne,{size:ne.SIZE.md,src:e.icon,text:e.name,className:"net-form__title-icon",defaultIcon:he}),u.default.createElement("div",{className:"net-form__title-text net-form__title-text-top"},e.name)):u.default.createElement("div",{className:"net-form__title-text"},t("wallet_extension_settings_header_custom_network"))),[e]);return u.default.createElement("div",{className:(0,or.default)("net-form",{disabled:i})},u.default.createElement(Re,{onBack:n,closeable:!1}),i||r?null:u.default.createElement(te,{className:"net-form__warn",desc:t("developer_mode_network_errortip_trust_network"),type:te.TYPE.warn,closable:!1}),d,u.default.createElement("div",{className:"net-form__wrap"},u.default.createElement(Ze,{disabled:i}),u.default.createElement(He,{disabled:i,modify:r}),u.default.createElement(Ke,{disabled:i,modify:r}),u.default.createElement(je,{disabled:i,modify:r}),u.default.createElement(Je,{disabled:i}),!i&&u.default.createElement(Qe,{modify:r,uniqueId:h,onDeleteNet:m})))};export{Vt as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=Form-G3CQN7ZF.js.map
