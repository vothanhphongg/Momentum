import{a as le}from"./chunk-TWODQDWW.js";import{a as ne,b as pe}from"./chunk-4GZAV2XC.js";import{a as re}from"./chunk-UUWJWUOY.js";import{a as ae}from"./chunk-RL43YSUD.js";import{a as se,b as ie}from"./chunk-DSWVONUM.js";import"./chunk-H5H4QFZG.js";import"./chunk-3USSVI5T.js";import{c as Q}from"./chunk-T2F6X5K7.js";import{b as z,c as J}from"./chunk-X3FPMAMT.js";import"./chunk-MRB2XFLQ.js";import"./chunk-65AJJVJY.js";import"./chunk-PDC447BO.js";import{a as te}from"./chunk-PTD7UCOR.js";import"./chunk-ETJEH7T4.js";import"./chunk-V3IFYKWM.js";import"./chunk-EWTTD4DL.js";import{ub as Y}from"./chunk-YALUYHLV.js";import{e as X,q as c}from"./chunk-I3CPAVOC.js";import{a as Ne}from"./chunk-ARWSGU73.js";import{f as Z}from"./chunk-CZ2ZBAZV.js";import{o as ye}from"./chunk-5QMHGZLF.js";import{ec as ee}from"./chunk-HPWCPLRR.js";import"./chunk-TSTPZ3JM.js";import"./chunk-D2LKUI4F.js";import{a as oe}from"./chunk-ON6S2DB7.js";import"./chunk-ANIUN6US.js";import"./chunk-3DZ7WRLL.js";import"./chunk-DEOJU4Z3.js";import{n as h,o as w}from"./chunk-XV444F26.js";import"./chunk-N2BCRNDB.js";import"./chunk-JGEHAFTO.js";import{c as r}from"./chunk-43VURGIT.js";import"./chunk-TM67VPZU.js";import"./chunk-VW6OQNWT.js";import{G as T,d as S,e as H}from"./chunk-PUSMMCUD.js";import{E as a,R as W,l as U,o as L}from"./chunk-UWJLNJLY.js";import"./chunk-VRY2ADKE.js";import"./chunk-5U7FO2PW.js";import"./chunk-PDUOSATP.js";import"./chunk-XDY6V34Y.js";import"./chunk-YJFNO57I.js";import"./chunk-DZ6CTC22.js";import{W as F,c as xe}from"./chunk-JT3LNHPY.js";import"./chunk-47UWF72W.js";import{b as K}from"./chunk-JWYCKY2V.js";import"./chunk-G2266BV2.js";import"./chunk-L4PAIYPH.js";import"./chunk-UT7LJPKF.js";import"./chunk-AFZ6A2B3.js";import"./chunk-VVPY7ZA7.js";import"./chunk-KUW5VATV.js";import"./chunk-BNAVWOJ2.js";import"./chunk-IG2Q5ALZ.js";import"./chunk-WOMUNWBT.js";import{a as $}from"./chunk-7U3DN5ZD.js";import"./chunk-QYVQBXDG.js";import"./chunk-7D4PUIEN.js";import"./chunk-7QO4TZYQ.js";import"./chunk-FF4LY6PE.js";import"./chunk-76KCDJDG.js";import"./chunk-YDUDQP2P.js";import"./chunk-PGPFV4JQ.js";import"./chunk-MIBHDVGP.js";import"./chunk-7VFUX7IX.js";import"./chunk-XLF4LAH2.js";import"./chunk-ONKZ57T6.js";import"./chunk-ZC7Q7LCH.js";import{f as s,o as f,q as k}from"./chunk-6KXF36WM.js";f();k();var e=s(K()),M=s(ee()),ue=s(oe()),fe=s(ye()),E=s(xe()),ke=s(Ne()),Te=s($());W();f();k();var q=s(K()),C=s(ee()),ce=s(oe()),me=s($());W();var Ie=(p,m,d)=>{let l=L.safeCeilDiv(p,10**Number(d));return p===h||Number(l)>w?a("wallet_extension_transfer_title_unlimited_amount",{token:m}):X(p,{symbol:m,decimals:d})},Ae={[2]:"wallet_extension_approval_btn_revoking",[3]:"wallet_extension_approval_btn_approving"},de=({tokenList:p,chainId:m})=>{let d=(0,C.useSelector)(Z),l=(0,C.useDispatch)(),P=(0,ce.useHistory)();return q.default.createElement(q.default.Fragment,null,p.map(O=>{let{symbol:x,imageUrl:y,approvalNum:u,decimalNum:v,approvalTime:t,status:_,coinId:N,tokenAddress:I,approvalAddress:D,permit2Address:g,address:j}=O,b=U(new Date(t),{format:"yyyyMMdd",locale:d}),B=async()=>{let i=await le({address:j,chainId:m,tokenAddress:I,approvalAddress:D,permit2Address:g,coinId:N,approvalNum:u});if((0,me.isEmpty)(i)){T.error({title:a("wallet_extension_approval_toast_initiate_fail"),duration:3,showClose:!0,placement:T.DIRECTION.top});return}l(Q({type:"approve",data:[i]})),P.push(`${Y}?type=approve`)};return q.default.createElement(ne,{icon:y,key:`${x}-${N}-${I}`,title:Ie(u,x,v),desc:b,btnText:a("wallet_extension_approval_btn_revoke"),btnLoadingText:a(Ae[_]),btnLoading:[3,2].includes(_),btnClick:B})}))};f();k();var o={"retina-border-basic":"_retina-border-basic_k43oq_1",retinaBorderBasic:"_retina-border-basic_k43oq_1",alert:"_alert_k43oq_29",logo:"_logo_k43oq_32",img:"_img_k43oq_37","text-info":"_text-info_k43oq_42",textInfo:"_text-info_k43oq_42",text:"_text_k43oq_42",project:"_project_k43oq_48","project-name":"_project-name_k43oq_51",projectName:"_project-name_k43oq_51",network:"_network_k43oq_59","address-wrapper":"_address-wrapper_k43oq_67",addressWrapper:"_address-wrapper_k43oq_67",title:"_title_k43oq_131","address-info":"_address-info_k43oq_137",addressInfo:"_address-info_k43oq_137",address:"_address_k43oq_67",icon:"_icon_k43oq_149","copy-icon":"_copy-icon_k43oq_149",copyIcon:"_copy-icon_k43oq_149","add-weight":"_add-weight_k43oq_154",addWeight:"_add-weight_k43oq_154","link-icon":"_link-icon_k43oq_154",linkIcon:"_link-icon_k43oq_154","list-title":"_list-title_k43oq_158",listTitle:"_list-title_k43oq_158","security-icon":"_security-icon_k43oq_166",securityIcon:"_security-icon_k43oq_166","alert-title":"_alert-title_k43oq_171",alertTitle:"_alert-title_k43oq_171"};var ve={[3]:"wallet_extension_approval_alertbanner_dapp_risky_approvals",[2]:"wallet_extension_alertbanner_deprecated_adddress",[1]:"wallet_extension_approve_alertbanner_desc_mal_approval"},ge=()=>{let p=(0,ue.useHistory)(),m=se(),{loading:d,run:l,error:P}=(0,fe.useRequest)(async()=>await m(),{manual:!0}),O=(0,M.useSelector)(z),x=re(),y=x.get("projectAddr"),u=x.get("chainId"),v=ae(O),t=(0,e.useMemo)(()=>(v||[]).find(n=>n.approvalAddress===y&&Number(n.chainId)===Number(u))||{},[v,y,u]),_=(0,M.useSelector)(J);(0,e.useEffect)(()=>{_&&(0,Te.isEmpty)(t)&&p.goBack()},[_,t]),(0,e.useEffect)(()=>{!_&&l()},[_,l]);let N=(0,e.useMemo)(()=>t?.tokens?.length?(t.tokens||[]).findIndex(n=>{let A=L.safeCeilDiv(n.approvalNum,10**n.decimalNum);return n.approvalNum===h||Number(A)>w})!==-1:!1,[t.tokens]),I=(0,e.useMemo)(()=>{let i=t.blackTagType,n=!1,A,R,V;if((i||N)&&(n=!0),i){R=S.TYPE.error,V="okx-wallet-plugin-security-1";let G=ve[i];A=i===3?a(G,{num:t.blackTagLongTimeDayLimit}):a(G)}else A=a("wallet_extension_alertbanner_unlimited_approval");return{show:n,props:{title:e.default.createElement("span",{className:o.alertTitle},A),type:R,icon:V}}},[t.blackTagLongTimeDayLimit,t.blackTagType,N]),{projectIcon:D,projectName:g,network:j,approvalAddress:b,linkApprovalAddress:B}=t;return ie(),e.default.createElement(r.Container,null,e.default.createElement(te,{bordered:!1,closeable:!1}),e.default.createElement(pe,{isError:!!P,isLoading:d,reload:l},I.show&&e.default.createElement(r.Box,{className:o.alert},e.default.createElement(S,{...I.props,closable:!1})),e.default.createElement(r.FlexBox,{className:o.project},e.default.createElement(H,{pictureClassName:o.logo,className:o.img,src:D,alt:g}),e.default.createElement(r.FlexBox,{direction:r.DIRECTION.vertical,justify:"space-between",className:o.textInfo},e.default.createElement(r.FlexBox,{direction:r.DIRECTION.vertical,className:o.text},e.default.createElement(c.Text,{className:o.projectName,ellipsis:{tooltip:!0},strong:!0},g)),e.default.createElement(c.Text,{type:c.TYPE.secondary,size:c.SIZE.xs,ellipsis:{tooltip:!0},className:o.network},j))),e.default.createElement(r.Box,{className:o.addressWrapper},e.default.createElement(r.Box,{className:o.title},a("wallet_extension_approval_subtitle_contract_address")),e.default.createElement(r.FlexBox,{className:o.addressInfo,justify:"space-between"},e.default.createElement(c.Text,{size:c.SIZE.md,className:o.address},b),e.default.createElement(r.FlexBox,null,e.default.createElement(F,{className:(0,E.default)("okx-wallet-plugin-copy-3",o.icon,o.copyIcon),onClick:()=>{(0,ke.default)(b),T.success({title:a("wallet_transaction_history_toast_address_copied"),duration:3,showClose:!0,placement:T.DIRECTION.top})}}),e.default.createElement(F,{onClick:()=>{globalThis.open(B)},className:(0,E.default)("okds-open-link",o.addWeight,o.linkIcon)})))),e.default.createElement(r.Box,{className:(0,E.default)(o.listTitle)},a("wallet_extension_mid_text_approved_amount")),e.default.createElement(de,{projectAddr:y,chainId:u,tokenList:t?.tokens||[]})))},no=ge;export{ve as RISK_ALERT_TITLE_MAP,no as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=ApproveDetailPage-3RBNSL7P.js.map
