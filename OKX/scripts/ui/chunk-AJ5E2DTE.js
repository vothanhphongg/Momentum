import{a as _t}from"./chunk-GYYGAM6G.js";import{a as st}from"./chunk-4Y4WTH2P.js";import{a as gt}from"./chunk-X4AGSDQV.js";import{d as nt}from"./chunk-W23ABSXX.js";import{a as wt}from"./chunk-A57OTXBP.js";import{z as ft}from"./chunk-YJQGXXOQ.js";import{a as ct}from"./chunk-KBS3PMLQ.js";import{a as et}from"./chunk-7GKX3YKG.js";import{b as lt,c as ut,f as dt}from"./chunk-4FBPDXIS.js";import{b as $}from"./chunk-UBFC7TLG.js";import{i as j}from"./chunk-XKL64FTO.js";import{a as pt}from"./chunk-V3IFYKWM.js";import{b as at,c as mt}from"./chunk-Y2TPPS4H.js";import{a as N,x as Q,y as tt}from"./chunk-YALUYHLV.js";import{q as m}from"./chunk-I3CPAVOC.js";import{o as Ct}from"./chunk-5QMHGZLF.js";import{Jb as X,ec as vt,ob as G,rb as V,ub as J}from"./chunk-HPWCPLRR.js";import{a as rt}from"./chunk-D2LKUI4F.js";import{a as ot}from"./chunk-ON6S2DB7.js";import{p as Z,q as K,r as Lt}from"./chunk-3DZ7WRLL.js";import{g as it}from"./chunk-LNOPECCQ.js";import{H as Nt,ka as R,qa as Pt,u as z}from"./chunk-TM67VPZU.js";import{D as x,H as q,h as S,o as Y,q as O}from"./chunk-PUSMMCUD.js";import{A as B,R as D,z as s}from"./chunk-UWJLNJLY.js";import{c as Ut,ea as y}from"./chunk-JT3LNHPY.js";import{b as A}from"./chunk-JWYCKY2V.js";import{f as c,o,q as e}from"./chunk-6KXF36WM.js";o();e();var t=c(A()),ht=c(ot());var L=c(Ut());D();o();e();o();e();var h=c(A()),k=c(vt()),P=c(ot());o();e();var yt=()=>et("passwordSecurity",{...st,location:window.location.href})?.data;Pt();o();e();var xt=r=>{let n="";try{let p=V(r),u=G(r),d=X(r);n=nt(r)?.metadata?.origin||u[u.length-1]?.origin||u[u.length-1]?.msgParams?.origin||d[d.length-1]?.origin||p[p.length-1]?.origin}catch{}return n};Nt();Lt();var U=c(Ct());D();o();e();var g=c(A());D();o();e();var T={updateMb32:"_updateMb32_2kuwm_1",centerImage:"_centerImage_2kuwm_4",titleUpdate:"_titleUpdate_2kuwm_11",textUpdate:"_textUpdate_2kuwm_16"};var Tt=(r,n)=>{Y.action({mobileWidth:"77.777777%",noTopRadius:!1,alignBottom:!1,hideCloseBtn:!0,btnFull:!0,children:g.default.createElement("div",{className:T.updateMb32},g.default.createElement("div",{className:T.centerImage},g.default.createElement("img",{src:n,alt:""})),g.default.createElement("div",{className:T.titleUpdate},s("wallet_extension_password_popup_title_wallet_security_tip")),g.default.createElement("div",{className:T.textUpdate},s("wallet_extension_password_popup_text_wallet_security_tip"))),confirmText:s("wallet_extension_password_popup_btn_update_password"),cancelText:s("wallet_extension_password_popup_btn_maybe_later"),maskClosable:!1,onConfirm:p=>{window.localStorage.pss=1,r.push(tt),p.destroy()},cancelBtnProps:{category:"text",type:"primary"},onCancel:p=>{window.localStorage.pss=1,p.destroy()}})};var Ft=r=>`https://${r}/help/how-to-solve-the-problem-of-encountering-password-errors-when-logging-in-to`,H=()=>(0,k.useSelector)(J),M=({form:r})=>{let n=(0,P.useHistory)(),{search:p}=(0,P.useLocation)(),u=(0,k.useDispatch)(),d=wt(),[w,f]=(0,h.useState)(!1),[i,E]=(0,h.useState)(null),[{walletAsset:C=0}]=ft(),b=yt(),a=(0,k.useSelector)(xt),v=R()===z;(0,U.useMount)(()=>{$({islogin:"no",isbydapp:v?" yes":"no",dapp_url:a,wallet_id:d})});let Et=_t(),bt=ct()?.passwordNotice||Ft(Et),It=it({dark:"/cdn/assets/imgs/246/74D87A474619BCFE.png",light:"/cdn/assets/imgs/246/696DAB049D0A9095.png"}),St=(0,U.useMemoizedFn)(async W=>{let F=r.getFieldValue("password");if(F&&!w&&!i)try{let I=window.localStorage.pss;f(!0),await u(j(F)),b&&F.length<gt&&Number(C)>100&&!I&&Tt(n,It),n.push({pathname:N,search:p})}catch({message:I}){I===Z?E(B("wallet_set_password_errortip_password_wrong_see_notice",{notice:h.default.createElement(S,{size:S.SIZE.sm,weight:S.WEIGHT.muted,target:"_blank",href:bt,underline:!0},s("wallet_set_password_errortip_password_wrong_see_notice_icu"))})):I===K&&q.error(s("wallet_home_toast_version_error")),W&&W()}finally{f(!1)}},[r,w,i]);return{submitting:w,passwordError:i,setPasswordError:E,onSubmit:St}};o();e();var l={password:"_password_11p2x_1",error:"_error_11p2x_5",input:"_input_11p2x_8",btn:"_btn_11p2x_14",footer:"_footer_11p2x_17","tip-text":"_tip-text_11p2x_21",tipText:"_tip-text_11p2x_21","password-tip-text":"_password-tip-text_11p2x_31",passwordTipText:"_password-tip-text_11p2x_31","pass-key-tip-text":"_pass-key-tip-text_11p2x_34",passKeyTipText:"_pass-key-tip-text_11p2x_34"};var At=()=>{let r=x.useForm(),n=H(),p=(0,ht.useHistory)();t.default.useLayoutEffect(()=>{n&&p.push(N)},[n]);let{submitting:u,passwordError:d,setPasswordError:w,onSubmit:f}=M({form:r}),i=(0,t.useRef)(null),[E]=mt(at.passwordType),{open:C}=dt(),b=(0,t.useCallback)(async a=>{(a?.key==="Enter"||a?.keyCode===13)&&await f(()=>{i.current&&setTimeout(()=>{i.current.focus()})})},[]);return(0,t.useEffect)(()=>(document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}),[]),E===2?t.default.createElement(t.default.Fragment,null,t.default.createElement(lt,{onPass:async a=>{r.setFieldsValue({password:a}),await f()}}),t.default.createElement(m.Text,{className:(0,L.default)(l.tipText,l.passKeyTipText),strong:!0,align:m.ALIGN.center,size:m.SIZE.sm,type:m.TYPE.secondary,onClick:()=>{C()}},s("wallet_extension_biometrics_dialog_title_cant_unlock"))):t.default.createElement(x,{form:r,onChange:()=>{w(null)},onSubmit:async()=>{await f(()=>{i.current&&setTimeout(()=>{i.current.focus()})})}},t.default.createElement(x.Item,{useChildError:!0,name:"password",className:l.password,extra:!!d&&t.default.createElement(m.Text,{size:m.SIZE.sm,className:l.error},d)},t.default.createElement(ut,{elementName:"u",autoFocus:"autoFocus",inputClassName:l.input,className:(0,L.default)({error:!!d}),size:O.SIZE.xl,autoComplete:"off",errorType:O.TIP_TYPE.always,disabled:u,placeholder:s("wallet_home_lock_wallet_placeholder_input_password"),onRef:a=>{i.current=a}})),t.default.createElement(x.Item,{shouldUpdate:!0,className:l.btn},({getFieldValue:a})=>{let v=!a("password")||!!d;return t.default.createElement(pt,{usePortal:!0,placeholder:!0,offsetBottom:0,className:l.footer,style:{zIndex:1e4}},t.default.createElement(y,{block:!0,htmlType:"submit",disabled:v,category:y.CATEGORY.fill,type:y.TYPE.highlight,size:y.SIZE.xl,loading:u,loadingText:s("wallet_home_btn_unlock"),onClick:async()=>{await f(()=>{i.current&&setTimeout(()=>{i.current.focus()})})}},s("wallet_home_btn_unlock")),t.default.createElement(rt,{to:Q,className:(0,L.default)(l.tipText,l.passwordTipText)},t.default.createElement(m.Text,{strong:!0,size:m.SIZE.sm,type:m.TYPE.secondary},s("wallet_footer_subtitle_forgot_password"))))}))};o();e();export{xt as a,M as b,At as c};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-AJ5E2DTE.js.map
