import{a as K}from"./chunk-YJKK7H74.js";import{e as Go}from"./chunk-WXZ3ZM4J.js";import{a as Y}from"./chunk-AQOCVER4.js";import{a as Fo}from"./chunk-BSH4EYRL.js";import{j as zo,k as Oo}from"./chunk-7C3BTQYU.js";import{a as Mo}from"./chunk-VVYJA72I.js";import{a as Wo}from"./chunk-KQSVDWZZ.js";import{a as Do}from"./chunk-TSTKPLAO.js";import{a as Po}from"./chunk-YJDAHJUY.js";import{d as Bo,e as So,h as Lo,j as Eo}from"./chunk-G4AVWXHJ.js";import{s as j}from"./chunk-KLLSVAFY.js";import{g as Ao}from"./chunk-IRMYAC6R.js";import{b as No}from"./chunk-MRB2XFLQ.js";import{a as Z}from"./chunk-Q4YTGP2G.js";import{b as M}from"./chunk-ETJEH7T4.js";import{b as ko}from"./chunk-LLZAOPDB.js";import{ib as vo}from"./chunk-YALUYHLV.js";import{d as P,e as io,q as N}from"./chunk-I3CPAVOC.js";import{o as se}from"./chunk-5QMHGZLF.js";import{C as V,I as eo,Ib as no,J as Io,K as to,Ka as wo,ec as ae}from"./chunk-HPWCPLRR.js";import{a as le}from"./chunk-ON6S2DB7.js";import{d as yo,f as Ro}from"./chunk-DEOJU4Z3.js";import{c as u}from"./chunk-43VURGIT.js";import{Ea as go,F as fo,H as Qo,I as X,Ia as xo,Na as ee,Rc as bo,Sc as ne,Uc as Co,Xc as To,_c as ie,ad as ho,fc as U,ha as Xo,rc as te,rd as re,ya as oo,za as oe}from"./chunk-TM67VPZU.js";import{A as w,G as H,H as R,g as I,o as _o}from"./chunk-PUSMMCUD.js";import{G as po,R as D,l as mo,y as L,z as c}from"./chunk-UWJLNJLY.js";import{L as lo,ea as Q,ra as co}from"./chunk-XDY6V34Y.js";import{W as E,c as G,ea as uo}from"./chunk-JT3LNHPY.js";import{b as S}from"./chunk-JWYCKY2V.js";import{f as g,o as a,q as l}from"./chunk-6KXF36WM.js";a();l();var h=g(S()),ro=g(ae()),$=g(se());co();D();re();te();ie();Xo();a();l();oe();ee();var Be=async o=>{try{let e=await go(oo.getMarketMap,o);if(e?.data)return e.data}catch{}return""},Ho=async o=>{try{let{data:e={}}=await xo(oo.getTonMintlessInfo,o);return e}catch{}return{}};function Uo(o,e,n="0"){let t={coinAmountDisplay:io(0),currencyAmountDisplay:P(0,{symbol:e}),currencyAmountNoUnitDisplay:P(0,{symbol:e,useApproximate:!1})};if(!o.coinAmount)return t;let{coinAmount:i}=o,s=io(i),r=P(X(i,n),{symbol:e}),m=P(X(i,n),{symbol:e,useApproximate:!1});return t={coinAmountDisplay:s,currencyAmountDisplay:r,currencyAmountNoUnitDisplay:m},t}function ce(o,e,n){return!Array.isArray(o)||!o?.length?[]:(o.forEach(t=>{let{coinAmountDisplay:i,currencyAmountDisplay:s,currencyAmountNoUnitDisplay:r}=Uo(t,e,n?.[t.coinId]||0);t.coinAmountDisplay=i,t.currencyAmountDisplay=s,t.currencyAmountNoUnitDisplay=r}),o)}function me(o,e){if(!Array.isArray(o)||!o?.length)return[];let n=e.reduce((t,i)=>(t[i.coinId]=i,t),{});return o.forEach(t=>{let i=t.baseCoinId===0?t.coinId:t.baseCoinId,s=n[i]||{},{imageUrl:r,symbol:m}=s;t.chainImage=r,t.chainSymbol=m}),o}function pe(o,e){return!Array.isArray(o)||!o?.length?[]:o.map(t=>{let i=zo(e,t.coinId);return t={...t,...i},t})}function fe(o){if(!Array.isArray(o)||!o?.length)return[];let e=[],n=o.filter(t=>+t.coinAmount>0);if(n&&n.length>=2){e=[{symbol:o[0].symbol,image:o[0].image,chainImage:o[0].chainImage,coinAmount:0,currencyAmount:0,tokenType:"wallet_extension_dashboard_tab_overview",coinId:"",overview:!0}];let t=o[0];(eo(t)||Io(t)||to(t))&&(e[0].coinId=o[0].coinId,e[0].addressType="")}return e}function ue(o){if(!Array.isArray(o)||!o?.length)return[];let e=[];return e=o.filter(n=>Boolean(n.localType)),e=Q(Q(e,n=>n.tokenSort),n=>-n.coinAmount),e}function de(o,e){return!Array.isArray(o)||!o?.length?[]:o.map(t=>{t.overview&&(t.tokenType=e(t.tokenType));let i=eo(t)||to(t);if(i&&!t.overview){let{localType:s,addressType:r}=t,m=e(Co[To[s][r]]);t.chainName=m,t.tokenType=m}return!i&&!t.tokenType&&(t.tokenType=t.chainName),t})}function Qe({aggregation:o,coinSymbol:e,btcAggregation:n,nearAggregation:t,tonAggregation:i,coin:s}){let r=[],m=So(),T=Bo(),x=(0,ro.useSelector)(no),_=Lo(),d=Fo(s),B=Do(),A=n||t||i;return!o&&!A||(A?r=d:(r=m.find(W=>W.aggregation&&W.symbol===e)?.childrenCoin||[],r=pe(r,T)),r=me(r,B),r=ce(r,x,_),r=ue(r),r=[...fe(r),...r],r=de(r,c)),r}function Xe(o,e){let n=Oo(o,e),t=(0,ro.useSelector)(no),i=Eo(o),s=Uo(n,t,i);return(0,$.useCreation)(()=>({...n,...s}),[n,s])}function Re(o,e,n){let{coinId:t,baseCoinId:i,symbol:s}=o,[r,m]=(0,h.useState)(null),T=(0,$.useLatest)(r),x=(0,h.useCallback)(async()=>{let{status:d,offlineAmount:B,expiredAt:A}=await Ho({coinId:t,address:e});m(d===1?{desc:c("wallet_extension_airdrop_toast_claim_before_expire_new",{num:B,token:s,time:mo(A,{format:"yyyyMMddHHmmss",locale:n})}),closable:!1,showTonMessage:!0}:null)},[t,e]),_=No("wallet-asset",{onError:()=>{i===U&&T.current?.showTonMessage&&x()},pollingInterval:10*1e3});return(0,h.useEffect)(()=>{i===U&&t&&e&&x()},[i,t,e]),(0,h.useEffect)(()=>{let d=_?.data?.coinId;T.current?.showTonMessage&&d===t&&x()},[t,_]),r}function ot(o,e){let n="isShowTonTipsAtCoinDetail",[t,i]=(0,h.useState)(null),s=L.get(n);return(0,h.useEffect)(()=>{!s&&e===ho.MNEMONIC&&o?.coinId===U?i({desc:c("wallet_extension_alert_ton_asset"),onClose:()=>{L.set(n,!0),i(null)},closable:!0,showTonMessage:!0}):i(null)},[e,o?.coinId]),t}function Vo({canChangeDefaultAddress:o}){let e="firstTimeOpenDetailPage",n=(0,h.useRef)();return(0,h.useEffect)(()=>{let t=L.get(e)!==!1;!o||!n.current||!t||(L.set(e,!1),setTimeout(()=>{n.current?.setVisible(!0)},500),setTimeout(()=>{n.current?.setVisible(!1)},3500))},[o,n]),n}a();l();var y=g(S()),so=g(G());a();l();var z={refreshWrapper:"_refreshWrapper_7eog8_1",refreshIcon:"_refreshIcon_7eog8_5",hidden:"_hidden_7eog8_11",amount:"_amount_7eog8_14",refreshAnimation:"_refreshAnimation_7eog8_33",refresh:"_refresh_7eog8_1"};var _e={maxWidth:156,popupStyle:{borderRadius:4},modifiers:[{name:"offset",options:{offset:[86,-10]}},{name:"arrow",options:{padding:({popper:o})=>o.width/2}}]},ye={14:36,15:32,16:32,17:28,18:28,19:24,20:24,21:24,22:20,23:20,24:20,25:20,26:18,27:18};function ge({coinSymbol:o,amountDisplay:e,currencyDisplay:n,justify:t=u.ALIGN.center}){let[i,s]=(0,y.useState)("hidden"),r=(0,y.useMemo)(()=>{let _=e.length,d={};return d.fontSize=ye[_]||40,_>=28&&(d={fontSize:18,display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:"pointer"}),d},[e]),m=()=>{s("hidden")},T=(0,y.useCallback)(()=>{i!=="loading"&&s("show")},[i]),x=(0,y.useCallback)(()=>{i!=="loading"&&s("hidden")},[i]);return y.default.createElement("div",{className:"coin-detail-balance"},y.default.createElement(u.FlexBox,{align:u.ALIGN.center,justify:t,style:r,onMouseEnter:T,onMouseLeave:x,className:z.refreshWrapper},y.default.createElement(u.Box,{onAnimationEnd:m,className:(0,so.default)(z.refreshWrapper,{[z.refreshAnimation]:i==="success"})},r.textOverflow?y.default.createElement(w,{layerClassName:"coin-detail-balance__tooltip",style:r,title:`${e} ${o}`,type:w.TYPES.neutral,placement:w.DIRECTION.bottom,..._e},e):e,y.default.createElement(Go,{className:(0,so.default)(z.refreshIcon,{[z.hidden]:i==="hidden"}),status:i,handleRefresh:s}))),n&&y.default.createElement(u.FlexBox,{align:u.ALIGN.center,justify:t},y.default.createElement("div",{className:"coin-detail-balance__currency"},n)))}var xe=ge;a();l();var C=g(S()),Yo=g(le()),Ko=g(G());D();a();l();var p=g(S()),Zo=g(G());co();D();Ro();a();l();D();Qo();var q=L.init({project:fo});a();l();function J(o){let e=o;o||(e=""),typeof e!="string"&&(e=String(e));let n=e.length;return n<=14?"18px":n<=18?"16px":n<=22?"14px":"12px"}a();l();var v={container:"_container_1xuoz_1",title:"_title_1xuoz_4",tip:"_tip_1xuoz_13",iconContainer:"_iconContainer_1xuoz_22",icon:"_icon_1xuoz_22",symbol:"_symbol_1xuoz_32",reportText:"_reportText_1xuoz_38",reportDisabled:"_reportDisabled_1xuoz_43"};var jo=({data:o,address:e})=>{let[n,t]=(0,p.useState)(!1),[i,s]=(0,p.useState)(!1),r=Ao(),m=(0,p.useCallback)(()=>{t(!0)},[]),T=(0,p.useCallback)(()=>{t(!1)},[]),x=(0,p.useCallback)(async()=>{let _={chainIndex:o?.chainId,address:e,reportedAddress:o?.address,reportType:1},d=await yo().getRequestHeaders({walletId:r,needSign:!0,currency:"usd"}),[B,A]=await po(wo(_,{headers:d}));if(!B&&A?.data.reportStatus){R.success({title:c("wallet_extension_top_toast_report_success")}),s(!0);let F=q.get(Z.reportedCoins)||[];q.set(Z.reportedCoins,F.concat(o.coinId))}else R.error(c("wallet_home_toast_network_error"));t(!1)},[o?.coinId,e,r]);return(0,p.useEffect)(()=>{if(lo(o?.coinId))return;(q.get(Z.reportedCoins)||[]).includes(o?.coinId)&&s(!0)},[o?.coinId]),!o||o?.isHighQuality?null:p.default.createElement(p.default.Fragment,null,p.default.createElement(N.Text,{onClick:m,className:(0,Zo.default)(v.reportText,{[v.reportDisabled]:i}),size:N.SIZE.sm,type:N.TYPE.default},c("wallet_extension_top_textbtn_report")),p.default.createElement(_o.Confirmation,{visible:n,confirmText:c("wallet_extension_bot_btn_report"),onConfirm:x,onClose:T,confirmBtnProps:{size:uo.SIZE.lg}},p.default.createElement("div",{className:v.container},p.default.createElement("div",{className:v.iconContainer},p.default.createElement(M,{size:M.SIZE.lg,className:v.icon,src:o.image,alt:o.symbol}),p.default.createElement(N.AdaptiveText,{className:v.symbol,text:o.symbol,ellipsis:{tooltip:!0},autoSize:J},o.symbol)),p.default.createElement("div",{className:v.title},c("wallet_extension_bot_title_report_token")),p.default.createElement("div",{className:v.tip},c("wallet_extension_bot_desc_report_token")))))};a();l();var k={"coin-basic-info":"_coin-basic-info_kigxm_1",coinBasicInfo:"_coin-basic-info_kigxm_1","coin-basic-info__symbol-con":"_coin-basic-info__symbol-con_kigxm_5",coinBasicInfoSymbolCon:"_coin-basic-info__symbol-con_kigxm_5","coin-basic-info__symbol":"_coin-basic-info__symbol_kigxm_5",coinBasicInfoSymbol:"_coin-basic-info__symbol_kigxm_5","coin-basic-info__name":"_coin-basic-info__name_kigxm_12",coinBasicInfoName:"_coin-basic-info__name_kigxm_12","coin-basic-info__info":"_coin-basic-info__info_kigxm_18",coinBasicInfoInfo:"_coin-basic-info__info_kigxm_18","coin-basic-info__info-icon":"_coin-basic-info__info-icon_kigxm_27",coinBasicInfoInfoIcon:"_coin-basic-info__info-icon_kigxm_27","coin-basic-info__tag":"_coin-basic-info__tag_kigxm_31",coinBasicInfoTag:"_coin-basic-info__tag_kigxm_31"};function be({data:o,coinSymbol:e,aggregation:n,coinTag:t,address:i}){let s=(0,Yo.useHistory)(),r=Y(j);if(!o)return null;let m=e&&e!=="null",T=Boolean(n?e:o?.supportShowDetail),x=()=>{if(r({button_clicked:"token_info"}),!o.coinId&&!m)return;let _={aggregation:n};o.coinId&&(_.coinId=o.coinId),m&&(_.coinSymbol=e);let d=`${vo}${ko(_)}`;s.push(d)};return C.default.createElement(u.FlexBox,{align:u.ALIGN.center,justify:"space-between",className:k["coin-basic-info"]},C.default.createElement(u.FlexBox,{className:k["coin-basic-info__symbol-con"],align:u.ALIGN.center,justify:u.ALIGN.start},C.default.createElement(M,{size:M.SIZE.md,className:k["coin-basic-info__symbol"],src:o.image,alt:o.symbol}),C.default.createElement(N.AdaptiveText,{className:k["coin-basic-info__name"],text:o.symbol,ellipsis:{tooltip:!0},autoSize:J},o.symbol),t&&C.default.createElement(u.Box,{className:k["coin-basic-info__tag"]},C.default.createElement(I,{size:I.SIZE.md,type:I.TYPE.rounded,color:I.COLOR.gray},C.default.createElement(N.Text,{nowrap:!0,style:{color:"inherit",fontSize:"inherit"}},t))),T&&C.default.createElement(w,{placement:w.DIRECTION.topRight,title:c("wallet_extension_cryptodetail_tooltips_token_info")},C.default.createElement(u.Box,{onClick:x,className:k["coin-basic-info__info"]},C.default.createElement(E,{className:(0,Ko.default)("okds-information-circle",k["coin-basic-info__info-icon"])})))),C.default.createElement(u.FlexBox,{align:u.ALIGN.center,justify:u.ALIGN.end},C.default.createElement(jo,{data:o,address:i})))}var Ce=be;a();l();var f=g(S());D();ne();function Te({addressLabel:o,address:e,addressType:n,isDefaultAddress:t,baseCoin:i={},coin:s={},canChangeDefaultAddress:r,openAddressesDialog:m}){let T=Vo({canChangeDefaultAddress:r}),[x,_]=K(),{isNotBackupWallet:d}=Po(),B=Wo(),A=bo.includes(s?.localType),F=Y(j),W=()=>{if(F({button_clicked:"copy_address"}),d){B();return}if(!x){_(e);let ao=c("wallet_extension_overview_receive_address_copied");n&&(ao=Mo(c,n,i)),H.success({title:ao,desc:f.default.createElement("div",{className:"coin-detail-address__copy-message"},e)})}},Jo=()=>d?f.default.createElement("span",{className:"new-coin-detail-address-content-black"},V(e)):A?f.default.createElement("span",null,e):f.default.createElement(f.default.Fragment,null,f.default.createElement("span",{className:"new-coin-detail-address-content-black"},e));return f.default.createElement("div",{className:"new-coin-detail-address-wrapper"},f.default.createElement("div",{className:"new-coin-detail-address",onClick:W},f.default.createElement("div",{className:"new-coin-detail-address-title"},c("extension_wallet_address_text_network_address",{network:o}),t&&r&&f.default.createElement(I,{className:"new-coin-detail-address-tag",size:I.SIZE.sm,type:I.TYPE.rounded,color:I.COLOR.grey},c("wallet_extension_btc_tag_default_address"))),f.default.createElement("div",{className:"new-coin-detail-address-inner"},f.default.createElement("div",{className:"new-coin-detail-address-content"},Jo()),f.default.createElement("div",{className:"new-coin-detail-address__icon"},f.default.createElement(E,{className:"okx-wallet-plugin-copy-1",style:{fontSize:"20px",color:d?"var(--okd-color-content-disabled)":"var(--okd-color-content-primary)"}})))),r&&f.default.createElement("div",{className:"new-coin-detail-address-wrapper__default-address"},f.default.createElement(w,{popupRef:T,placement:w.DIRECTION.topRight,title:c("wallet_extension_hover_change_address_format")},f.default.createElement("div",{onClick:()=>{F({button_clicked:"default_address"}),m()},className:"new-coin-detail-address-wrapper__address-content"},c("extension_wallet_settings_title_set_default"),f.default.createElement(E,{className:"okx-wallet-plugin-arrow-small-right coin-detail__body__overview-address__icon"})))))}var he=Te;a();l();var $o=g(S()),qo=g(G());function Ie({className:o,children:e}){return $o.default.createElement("div",{className:(0,qo.default)("coin-detail-overview-container",o)},e)}var we=Ie;a();l();a();l();var O=g(S());D();function ve({address:o}){let[e,n]=K();return O.default.createElement("div",{className:"coin-detail-address"},O.default.createElement("div",{className:"coin-detail-address__text",onClick:()=>{if(!e){n(o);let i=c("wallet_extension_overview_receive_address_copied");H.success({title:i,desc:O.default.createElement("div",{className:"coin-detail-address__copy-message"},o)})}}},V(o),O.default.createElement("div",{className:"coin-detail-address__icon"},O.default.createElement(E,{className:"okx-wallet-plugin-copy",style:{fontSize:"20px"}}))))}var Ae=ve;export{Ae as a,xe as b,Ce as c,Be as d,Qe as e,Xe as f,Re as g,ot as h,Vo as i,he as j,we as k};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-SKGQKB5E.js.map
