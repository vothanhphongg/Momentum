import{a as B}from"./chunk-U7LFLL6J.js";import{a as P}from"./chunk-IP7VSGCS.js";import{l as e,r as v,s as z}from"./chunk-2LCPVMSO.js";import{a as J}from"./chunk-2DF43JKM.js";import{a as H}from"./chunk-7CC6X6YX.js";import{h as S,i as W}from"./chunk-MKEYCSLA.js";import{o as ut}from"./chunk-5QMHGZLF.js";import{ec as j}from"./chunk-HPWCPLRR.js";import{j as y,p as q}from"./chunk-SZD6WTBQ.js";import{R as pt,z as E}from"./chunk-UWJLNJLY.js";import{b as lt}from"./chunk-JWYCKY2V.js";import{f as d,o as C,q as _}from"./chunk-6KXF36WM.js";C();_();var K=d(j()),Q=d(ut());q();function mt({id:r,walletId:n,origin:c,localType:T,extraParams:k}){let i=(0,K.useDispatch)(),s=B(n);return(0,Q.useMemoizedFn)(async()=>{s({trade:"contract_interaction",all_confirmation:"cancel",network:T,dapp_url:c}),await i(S(r,k)),await y(i)})}var V=mt;C();_();var t=d(lt()),X=d(j());pt();q();var dt=({coinId:r,unapproved:n,networkFee:c,feeLoading:T,estimateFailed:k=!1,preExecuteRet:i={},isSufficientGas:s,isSufficientBalance:Z=!0,extParams:L,needCheckMpc:b=!1,chainConfirmDisabled:$=!1,onCancel:l,onConfirm:p,disabledConfirmBtn:tt,coinWithBalance:ot})=>{let{id:a,origin:x,localType:D}=n,g=(0,X.useDispatch)(),{address:h,walletId:o}=J(n),{loading:at=!1,verifyGasLimitRet:I={}}=i,N=V({id:a,walletId:o,origin:x,localType:D}),A=!s||!Z||v(I),et=B(o),u=(0,t.useCallback)(async()=>{l&&typeof l=="function"?await l():await N()},[l,N]),{loading:rt,onClick:nt}=P(u),ct={loading:rt,onClick:nt,actionType:e.ACTION_TYPE.CANCEL,btnText:E("wallet_dapp_connection_btn_reject")},f=tt||T||k||at||z(I)||$,it=(0,t.useCallback)(async()=>{try{if(b&&!await H({walletId:o,callback:u}))return;p&&typeof p=="function"?await p({networkFee:c}):(await g(W(a,L)),await y(g))}catch(Y){console.log("error",Y)}},[x,b,p,o,u,c,et,D,g,a,L]),{isBalanceLoadError:F,requestBalance:O,isBalanceLoading:m}=ot,{loading:M,onClick:R}=P(it),w=(0,t.useMemo)(()=>({loading:M||m,disabled:f,onClick:R,actionType:e.ACTION_TYPE.CONFIRM}),[f,m,M,R]),G=(0,t.useMemo)(()=>({actionType:e.ACTION_TYPE.FILL_UP,txId:a,coinId:r,walletId:o,address:h}),[h,r,a,s,o]),U=(0,t.useMemo)(()=>({onClick:O,btnText:E("wallet_extension_transfer_error_text_reload"),actionType:e.ACTION_TYPE.CONFIRM}),[O]),st=(0,t.useMemo)(()=>f?w:F&&!m?U:A?G:w,[w,f,G,A,U,m,F]);return{buttonGroup:[ct,st],handleCancel:u}},Nt=dt;export{V as a,Nt as b};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-EWRQIXXK.js.map
