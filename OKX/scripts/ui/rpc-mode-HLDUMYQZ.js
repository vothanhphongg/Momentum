import{a as ys,b as Es,k as Is}from"./chunk-SKGQKB5E.js";import{a as hs,b as Cs}from"./chunk-OAOTBWD6.js";import{a as To,b as Lo,c as Bo,d as Lt,e as _s,f as Ts,g as gs,h as xs}from"./chunk-7ZGKDYR2.js";import{a as os,b as Pt,c as as,d as ms,e as ls,f as cs,h as ps,i as ds,j as us,m as fs}from"./chunk-M5N3SNPA.js";import{a as b,b as v,c as Ze,d as ts,e as rs,f as Pe,g as ns,h as Ot,i as ss,k as is}from"./chunk-SJXVXTEI.js";import"./chunk-XHICU65C.js";import"./chunk-RWQI7GDI.js";import{a as Ie,b as De,c as _o,d as jn,e as Jn,f as Rn,g as es,i as Dt}from"./chunk-QJE5SYKN.js";import{a as Xn}from"./chunk-YJKK7H74.js";import{d as E}from"./chunk-K72LBGMX.js";import"./chunk-PANWMONP.js";import{a as qn,b as Qn}from"./chunk-VQLHLWTV.js";import{a as Se}from"./chunk-MOWMAO7P.js";import{a as Zn}from"./chunk-DKHD2LWP.js";import{a as Mn,b as Un,c as Wn,d as $n,e as Yn,f as Kn}from"./chunk-PSP73LQF.js";import{a as Fn}from"./chunk-NKH3CSPK.js";import"./chunk-WXZ3ZM4J.js";import{a as Hn}from"./chunk-XVXZXT5F.js";import"./chunk-CNXMURDK.js";import"./chunk-A3TCWWB7.js";import"./chunk-ZLEGHRVC.js";import{a as Vn}from"./chunk-A7OOQ3UI.js";import"./chunk-VIG2JFWH.js";import"./chunk-J2QAPBIL.js";import"./chunk-DHW2TR6Z.js";import"./chunk-BRMEQH2Q.js";import"./chunk-HQA3BGLM.js";import"./chunk-AQOCVER4.js";import{a as Ln}from"./chunk-3RHBRLYM.js";import"./chunk-BSH4EYRL.js";import"./chunk-M2Q6VTQI.js";import{a as On}from"./chunk-U7LFLL6J.js";import"./chunk-SQ2BNI3O.js";import"./chunk-PWLZXA4M.js";import"./chunk-BLGJS4OD.js";import"./chunk-IGYAABP7.js";import{a as wn,d as Nn}from"./chunk-RYRQK4MH.js";import"./chunk-EHKSYXXT.js";import"./chunk-TOV4UWR3.js";import{a as gr}from"./chunk-MDL52WR7.js";import"./chunk-PSDESO5W.js";import{a as An}from"./chunk-VOOXQWRX.js";import{a as Oo,b as Pn,d as hr}from"./chunk-HOU3VS5H.js";import{a as Dn}from"./chunk-SQDIO2NL.js";import"./chunk-TISF4HQJ.js";import{a as Sn,b as xr}from"./chunk-XYDICNP3.js";import"./chunk-ALLM2Z34.js";import"./chunk-QXPTHK7Q.js";import{l as Tr}from"./chunk-2LCPVMSO.js";import"./chunk-Q57GWOMY.js";import{i as fo}from"./chunk-7C3BTQYU.js";import"./chunk-3XTUMVWB.js";import"./chunk-MGYCOFIC.js";import{b as bn}from"./chunk-6THUPAMO.js";import"./chunk-FK5ARFJK.js";import"./chunk-6Y7SZIB7.js";import"./chunk-VVYJA72I.js";import"./chunk-OWWFH26C.js";import"./chunk-MNZIO3NP.js";import"./chunk-HEFTA5OH.js";import"./chunk-S7NLB5XS.js";import{a as se}from"./chunk-UUWJWUOY.js";import"./chunk-NDLFKMQN.js";import"./chunk-4T7BFKW3.js";import{a as St,b as Bn}from"./chunk-KQSVDWZZ.js";import"./chunk-IIBMWABX.js";import"./chunk-BXTE3YT2.js";import"./chunk-MSSFBMEE.js";import"./chunk-MED2SCZJ.js";import"./chunk-2DF43JKM.js";import"./chunk-7CC6X6YX.js";import"./chunk-JAGKSBYF.js";import"./chunk-CR2CPF4X.js";import"./chunk-HKZGONPS.js";import{a as vn}from"./chunk-IIAVVYHZ.js";import"./chunk-TSTKPLAO.js";import"./chunk-52XLG23J.js";import"./chunk-MXWU6HV7.js";import"./chunk-J5SZHERT.js";import"./chunk-XEVQJIQN.js";import"./chunk-PJTYQKWA.js";import"./chunk-XQGZFXUE.js";import{b as zn}from"./chunk-BMKBVCIX.js";import{a as Gn}from"./chunk-ULWEH6UQ.js";import{a as At}from"./chunk-YJDAHJUY.js";import"./chunk-3USSVI5T.js";import"./chunk-EEFD5KZC.js";import"./chunk-73ZHJYCP.js";import"./chunk-3NSLXJYR.js";import"./chunk-ENPNPH37.js";import"./chunk-5QJIR6ZJ.js";import"./chunk-H6SNSZIS.js";import"./chunk-YWECPG37.js";import"./chunk-AXJECT36.js";import"./chunk-5BIOTNBS.js";import"./chunk-R5SMHBLJ.js";import"./chunk-IY4RYRL6.js";import"./chunk-4OAEJJK5.js";import"./chunk-34VLVCKN.js";import"./chunk-J4ZKBKEJ.js";import"./chunk-TFJRUJHH.js";import"./chunk-7NMUCCUG.js";import"./chunk-YF3DWJDS.js";import"./chunk-RH4ISAHA.js";import"./chunk-ECQND2NK.js";import"./chunk-W3L3YTJO.js";import"./chunk-M5NI6HPE.js";import"./chunk-YQHUKBMA.js";import"./chunk-VM2NMLPX.js";import"./chunk-YP7CHBKG.js";import"./chunk-FNXLAYUB.js";import"./chunk-PQK3LXXN.js";import"./chunk-FTRHGHDS.js";import"./chunk-XT3EOPTE.js";import"./chunk-A6Z53EN6.js";import"./chunk-LL63GZNI.js";import"./chunk-M7CL2K7X.js";import"./chunk-W2CTJYFJ.js";import"./chunk-XUKVTAH5.js";import"./chunk-5OJTPISL.js";import"./chunk-7UPVX2FL.js";import"./chunk-BSFXZ46S.js";import"./chunk-ZMCTBWUY.js";import"./chunk-UMGTYP2Z.js";import"./chunk-DTLEDHZZ.js";import"./chunk-5F6JALEN.js";import"./chunk-OQMIWCJU.js";import"./chunk-SRYEAF33.js";import{d as La}from"./chunk-VDODWXUE.js";import"./chunk-HWGRDY67.js";import{a as wa,c as uo,d as re,e as Do,f as Tn}from"./chunk-WVBYWIG3.js";import{b as J,c as ue,d as an,e as yt,f as po,g as mn,h as Et,i as ln,j as pr,k as Ao,l as It,m as So,n as cn,o as pn,p as dn,q as kt,r as un,s as dr,t as fn,u as _n,w as vt,x as ur}from"./chunk-STLJDFJO.js";import"./chunk-ISZ2JUQK.js";import"./chunk-M5H47IO2.js";import{b as Ct}from"./chunk-HRKDKI66.js";import"./chunk-YBR4PVVH.js";import"./chunk-JJ3YEFIG.js";import"./chunk-LTM6SBVL.js";import"./chunk-4Y4WTH2P.js";import"./chunk-V7MKKAGW.js";import"./chunk-SKMCCAGC.js";import{b as gn}from"./chunk-LR7KSTP2.js";import"./chunk-QCP7SXMX.js";import"./chunk-W23ABSXX.js";import"./chunk-FOF22X4F.js";import"./chunk-P4EMG7RN.js";import"./chunk-BVDJNUOM.js";import"./chunk-7B5UI77E.js";import"./chunk-R6X7EOIE.js";import"./chunk-MKEYCSLA.js";import"./chunk-4EFZXPDV.js";import"./chunk-4KODREVA.js";import"./chunk-6UWGBJGT.js";import"./chunk-G4AVWXHJ.js";import"./chunk-76CRIMII.js";import"./chunk-F7VSWGDW.js";import{b as kn}from"./chunk-XKFKE2T7.js";import{a as Xr}from"./chunk-MKSCYWSV.js";import{b as ao}from"./chunk-XIYLMV6I.js";import{c as Yr,qa as Kr,va as Zr}from"./chunk-KLLSVAFY.js";import"./chunk-MBHGLWZJ.js";import"./chunk-QZO7W5WD.js";import{d as xn,e as hn,f as fr}from"./chunk-AKE54ZCC.js";import"./chunk-EHZWM44P.js";import"./chunk-K6STDTUY.js";import{a as In}from"./chunk-A57OTXBP.js";import{e as nn,h as sn,l as Nt,n as fe,o as w,p as Cn,s as yn,u as En}from"./chunk-YJQGXXOQ.js";import"./chunk-HTLOGWI7.js";import{a as P}from"./chunk-6SEP5B7P.js";import"./chunk-FHKOH5E6.js";import"./chunk-NTQ2YVDA.js";import{b as ne}from"./chunk-KKG4PJ6O.js";import"./chunk-ELJJJNTC.js";import"./chunk-EPWGNYZZ.js";import"./chunk-DZLXEJHX.js";import"./chunk-7SRLIN7D.js";import"./chunk-AW5NL3JM.js";import"./chunk-RI2WZ5PA.js";import"./chunk-UWQ3PY7I.js";import"./chunk-YIAOHVF5.js";import"./chunk-KBS3PMLQ.js";import"./chunk-7GKX3YKG.js";import"./chunk-7HFBMBFB.js";import"./chunk-TJCPJQIM.js";import"./chunk-ZTAZ2272.js";import{a as _r,h as wt}from"./chunk-IRMYAC6R.js";import"./chunk-Q76QXAWY.js";import"./chunk-THSNJ5WU.js";import"./chunk-MRB2XFLQ.js";import"./chunk-65AJJVJY.js";import{d as ht}from"./chunk-PDC447BO.js";import"./chunk-JI6FOZGR.js";import"./chunk-JCM7SRK2.js";import"./chunk-UBFC7TLG.js";import"./chunk-XKL64FTO.js";import{a as z}from"./chunk-PTD7UCOR.js";import"./chunk-Q4YTGP2G.js";import{b as bt}from"./chunk-ETJEH7T4.js";import"./chunk-LLZAOPDB.js";import{a as Ae}from"./chunk-V3IFYKWM.js";import"./chunk-EWTTD4DL.js";import"./chunk-Y2TPPS4H.js";import"./chunk-ITY22AD4.js";import"./chunk-E2JYOUYE.js";import"./chunk-B3JSNQIV.js";import{Da as tn,Ea as dt,Fa as mo,Ga as de,Ha as ut,Ia as ft,Ja as _t,Ka as Tt,La as gt,Ma as lo,Na as xt,W as Jr,X as Rr,Z as en,a as q,fa as on,gb as rn,i as jr}from"./chunk-YALUYHLV.js";import{e as io,q as Ee}from"./chunk-I3CPAVOC.js";import"./chunk-ARWSGU73.js";import{f as co}from"./chunk-CZ2ZBAZV.js";import{o as te}from"./chunk-5QMHGZLF.js";import{Bb as zr,C as G,Fb as Vr,Gb as $r,_ as Wr,ec as A}from"./chunk-HPWCPLRR.js";import"./chunk-O6ZBO5JF.js";import"./chunk-TSTPZ3JM.js";import"./chunk-D2LKUI4F.js";import{a as W}from"./chunk-ON6S2DB7.js";import"./chunk-SZD6WTBQ.js";import"./chunk-ASR4HLU7.js";import"./chunk-ANIUN6US.js";import"./chunk-3DZ7WRLL.js";import{d as Hr,f as Sa}from"./chunk-DEOJU4Z3.js";import"./chunk-PLIIQKFY.js";import"./chunk-YOPEZ2F5.js";import"./chunk-6BXYJZHH.js";import"./chunk-CCEMKRO6.js";import{a as j,b as Qr}from"./chunk-2HSCH6R3.js";import"./chunk-CWNIM6RS.js";import"./chunk-NNAD25BL.js";import{e as qr}from"./chunk-XV444F26.js";import{i as No,q as so,sa as Oa}from"./chunk-N2BCRNDB.js";import"./chunk-RTFE54S3.js";import"./chunk-GCQ4H2BA.js";import"./chunk-JGEHAFTO.js";import"./chunk-UVFOW4HH.js";import"./chunk-LNOPECCQ.js";import"./chunk-CB7FOZNP.js";import{c as Po}from"./chunk-43VURGIT.js";import{H as Na,I as V,J as mt,L as $e,N as lt,O as to,P as Ye,Q as wo,R as ro,W as Ke,X as me,aa as ct,cd as cr,ha as X,ka as Br,kb as Gr,qa as Aa,rc as Da,rd as Pa,t as Lr}from"./chunk-TM67VPZU.js";import"./chunk-VW6OQNWT.js";import{A as ye,D as H,G as no,H as Ur,d as Fr,o as pt,q as D,y as Mr}from"./chunk-PUSMMCUD.js";import{R as k,l as oo,o as M,q as Or,z as a}from"./chunk-UWJLNJLY.js";import"./chunk-VRY2ADKE.js";import"./chunk-VWEB6W6G.js";import"./chunk-5U7FO2PW.js";import"./chunk-B7EGZO4E.js";import"./chunk-PDUOSATP.js";import{K as Pr,L as at,f as Sr,r as Dr,ra as bo}from"./chunk-XDY6V34Y.js";import"./chunk-YJFNO57I.js";import"./chunk-DZ6CTC22.js";import{$ as lr,W as B,c as oe,ea as O}from"./chunk-JT3LNHPY.js";import"./chunk-47UWF72W.js";import{b as _}from"./chunk-JWYCKY2V.js";import"./chunk-G2266BV2.js";import"./chunk-L4PAIYPH.js";import"./chunk-UT7LJPKF.js";import"./chunk-AFZ6A2B3.js";import"./chunk-VVPY7ZA7.js";import"./chunk-KUW5VATV.js";import"./chunk-BNAVWOJ2.js";import"./chunk-IG2Q5ALZ.js";import"./chunk-WOMUNWBT.js";import"./chunk-QNGB57GN.js";import"./chunk-NM2PDVBD.js";import"./chunk-7U3DN5ZD.js";import"./chunk-F6PXOVYL.js";import"./chunk-324EPGNQ.js";import"./chunk-5GFHI4AK.js";import"./chunk-QYVQBXDG.js";import"./chunk-7D4PUIEN.js";import"./chunk-IWVM7XL6.js";import"./chunk-7QO4TZYQ.js";import"./chunk-FF4LY6PE.js";import"./chunk-76KCDJDG.js";import"./chunk-YDUDQP2P.js";import"./chunk-PGPFV4JQ.js";import"./chunk-MIBHDVGP.js";import"./chunk-7VFUX7IX.js";import"./chunk-XLF4LAH2.js";import"./chunk-ONKZ57T6.js";import"./chunk-ZC7Q7LCH.js";import{f as l,h as mr,o as s,q as i}from"./chunk-6KXF36WM.js";s();i();var ot=l(_()),ka=l(A()),ko=l(W());s();i();var K=l(_()),ee=l(W());s();i();var I=l(_()),Mo=l(A()),Us=l(W()),Hs=l(La()),Gs=l(te());k();Aa();Na();s();i();var le=l(_()),ks=l(W()),vs=l(oe()),bs=l(_r());k();s();i();var Fo={button:"_button_l2q1y_1",showButton:"_showButton_l2q1y_5",editIcon:"_editIcon_l2q1y_11"};var Ba=190,ws=({dataSource:e,backupHeight:t,scrollTop:o})=>{let r=(0,le.useMemo)(()=>e.length>=8&&o>Ba,[e.length,o]),{paddingBottom:n,buttonPaddingBottom:m,absoluteBottom:c}=zn({isButtonAbsolute:r,backupHeight:t});return le.default.createElement("div",{className:Fo.wrapper},le.default.createElement("div",{style:{paddingBottom:n}},le.default.createElement(fr,{className:"rc-mode-home__tokens",dataSource:e,renderItem:p=>le.default.createElement(fr.Coin,{name:p?.name,symbol:p?.symbol,to:`${lo}?${bs.default.stringify({address:p?.address})}`,balance:p.balance||"0",market:!1})})),le.default.createElement("div",{className:`${r?Fo.showButton:""} ${Fo.button}`,style:{bottom:c,paddingBottom:m}},le.default.createElement(ks.Link,{to:_t},le.default.createElement(O,{circle:!0,type:O.TYPE.primary,category:O.CATEGORY.outline},le.default.createElement(B,{className:(0,vs.default)("okx-wallet-plugin-edit-wallet",Fo.editIcon)}),a("developer_mode_home_maintitle_managecpt")))))};s();i();var Oe=l(_()),As=l(W()),Ss=l(_r());s();i();var Ns=[{text:"wallet_home_btn_send",icon:"okx-wallet-plugin-up",type:"SEND"},{text:"wallet_home_btn_receive",icon:"okx-wallet-plugin-down",type:"RECEIVE"},{text:"developer_mode_home_btn_faucet",icon:"okx-wallet-plugin-faucet-1",type:"FAUCET",disabledText:"extension_wallet_home_tooltip_no_faucet"},{text:"developer_mode_home_btn_t_tradinghistory",icon:"okx-wallet-plugin-history-1",type:"HISTORY"},{text:"wallet_extension_home_text_toolkit",icon:"okx-wallet-plugin-toolkit",type:"MORE"}];var Ds=()=>{let{isNotBackupWallet:e}=At(),t=St(),o=(0,As.useHistory)(),r=fe(),{extensionConfig:n}=P("rpc_info"),m=(0,Oe.useMemo)(()=>r.filter(({balance:x})=>!!Number(x)),[r]),c=(0,Oe.useCallback)(()=>{m.length===1?o.push(`${de}?${Ss.default.stringify({address:m[0]?.address})}`):o.push(ft)},[m]),p=(0,Oe.useCallback)(()=>{e?t():o.push(mo)},[e]),d=()=>{o.push(gt)},f=(0,Oe.useCallback)(()=>{n.faucetUrl&&globalThis.open(n.faucetUrl)},[n.faucetUrl]),T=()=>{Zr({button_name:"more",site:""})},h=()=>{o.push(jr)},g=(0,Oe.useCallback)(x=>{switch(x.type){case"SEND":c();break;case"RECEIVE":p();break;case"HISTORY":d();break;case"FAUCET":f();break;case"DAPP_CONNECT":h();break;case"MORE":T();break;default:break}},[h,f,d,p,c]),C=(0,Oe.useMemo)(()=>Ns.map(x=>x.type==="FAUCET"?{...x,disabled:!n?.faucetUrl}:x),[n]);return{clickHandle:g,iconOptions:C}};s();i();var Bt=l(_()),Os=l(A()),Ls=l(W()),Bs=l(te());k();s();i();var Ha=l(_()),Ga=l(A());s();i();var Ma=l(_()),Ua=l(oe());var Ps="SHOW-SWITCH";var Fs=()=>{let e=se(),t=(0,Ls.useHistory)(),o=fe(),{extensionConfig:r}=P("rpc_info"),n=ne(),[m,c]=Bt.default.useState(!0),{isNotBackupWallet:p}=At(),d=(0,Os.useSelector)(zr);(0,Bs.useMount)(()=>{e.get("from")==="setting"&&(c(!1),t.replace({search:""}),Or.listen(Ps,()=>{c(!0)}))});let f=(0,Bt.useMemo)(()=>o.find(({address:T})=>!T)||{},[o]);return{rpcInfo:r,mainToken:f,chainTokens:o,walletAccount:d,ethereumAccount:n,isNotBackupWallet:p,switchVisible:m}};s();i();var Ms={wrapper:"_wrapper_11hdl_1"};var Wa=({history:e,unapprovedTxCount:t,isNotBackupWallet:o,unapprovedRequestCount:r,unapprovedPermissionsRequestId:n,triggerShowBackupWalletDialog:m})=>{o&&r!==0?m({text:a("wallet_dapp_conncetion_alert_backup_wallet")},n):t>0?e.push(en):r>0&&e.push(Jr)},za=({history:e,isRpcMode:t})=>{t||e.replace(q)},Va=({walletAccount:e})=>{let{walletId:t}=e||{};return t},$a=e=>{let t=Br()===Lr;(0,I.useEffect)(()=>{e&&t&&globalThis.platform.openExtensionInPopup(dt)},[])},Ya=()=>{let{isNeedShowDisconnectUpgrade:e,setDisconnectUpgrade:t}=Fn();return(0,I.useCallback)(()=>{e&&(no.success({title:a("wallet_extension_card_subtitle_disconnect_update")}),t())},[e,t])},Ka=e=>{let[t,o]=(0,I.useState)(ao.init);return{tryRpc:()=>{!e.rpcUrl||(o(ao.loading),hs(e.rpcUrl).then(()=>{o(ao.success)}).catch(()=>{o(ao.failed)}))},status:t,setStatus:o}},Za=({mainToken:e,chainId:t,walletId:o,symbol:r})=>{(0,I.useEffect)(()=>{e?.balance&&t&&Kr({wallet_id:o,main_coin_number_by_networks:[{chain_id:(0,Hs.hexToDecimalString)(t),main_token_symbol:r,main_token_amount:e?.balance}]})},[o,e?.balance,t,r])},qa=(e,t)=>{let o=(0,Mo.useDispatch)();(0,I.useEffect)(()=>{(async()=>{e===0&&!t&&await o(gn())})()},[e])},Ws=()=>{let e=(0,Us.useHistory)(),t=St(),o=Gn(),{rpcInfo:r,chainTokens:n,isNotBackupWallet:m,mainToken:c,ethereumAccount:p}=Fs(),d=wt(),f=(0,I.useRef)(null),[T,h]=(0,I.useState)(0),[g,C]=(0,I.useState)(0),x=(0,I.useRef)(null),{unapprovedRequestCount:S,unapprovedTxCount:ie,unapprovedPermissionsRequestId:Z}=fs(),Q=Mn(),{loadingMoonCatData:Ne}=kn(),ae=(0,I.useCallback)((...ar)=>{Ne||t(...ar)},[t,Ne]);(0,I.useEffect)(()=>{Wa({history:e,unapprovedTxCount:ie,isNotBackupWallet:m,unapprovedRequestCount:S,unapprovedPermissionsRequestId:Z,triggerShowBackupWalletDialog:ae})},[m,S,ae]);let tt=(0,Mo.useSelector)(Vr);qa(S,tt);let{isRpcMode:ze}=(0,Mo.useSelector)(ht);(0,I.useEffect)(()=>{za({history:e,isRpcMode:ze})},[ze]),$a(tt);let nr=io(c.balance),{clickHandle:Re,iconOptions:Ve}=Ds(),sr=Ya(),eo=Vn(),{run:vo}=(0,Gs.useDebounceFn)(()=>{C(x.current?.scrollTop||0)},{wait:50,maxWait:50}),{status:rt,tryRpc:F}=Ka(r);(0,I.useEffect)(()=>{F()},[r]),(0,I.useLayoutEffect)(()=>{f.current&&m&&h(f.current?.clientHeight||0)},[m]);let ir=Va({walletAccount:d}),{chainId:nt,symbol:st}=r;return Za({mainToken:c,chainId:nt,walletId:ir,symbol:st}),I.default.createElement("div",{className:Ms.wrapper,ref:x,onScroll:()=>{vo()}},I.default.createElement("div",null,I.default.createElement($n,{titleLeft:d?.keyringName,titleRight:d?.walletName,subTitle:G(p),address:p,chainName:r?.name}),I.default.createElement(Kn,{balance:nr,symbol:c.symbol}),I.default.createElement(Wn,{clickHandle:Re,iconOptions:Ve}),I.default.createElement(ws,{dataSource:n,scrollTop:g,backupHeight:m?T+24:0})),I.default.createElement(Un,{info:o,isNotBackupWallet:m,disconnectCallback:sr}),I.default.createElement("div",{ref:f},I.default.createElement(Bn,{offsetBottom:24})),I.default.createElement(Yn,{showBackup:()=>{}}),I.default.createElement(Cs,{visible:rt===ao.failed,onRetry:F,onChangeNet:()=>{e.push(`${Rr}?tab=${eo?.networkType??"1"}`)}}),Q&&I.default.createElement(Hn,{actionMap:{["RECOVER"]:()=>{e.push(`${rn}?action=${vn.RECOVER}`)},["SWITCH_WALLET"]:()=>{e.push(`${on}?fromHome=1`)}}}))};s();i();var Ys=l(_());s();i();var Uo=l(_()),zs=l(A()),Ft=l(te());bo();var Vs=l(wa());X();var Cr=class extends Vs.default{constructor(){super();mr(this,"DROPPED_BUFFER_COUNT",3);mr(this,"droppedBlocksBufferByTxHash",new Map);this.confirmedTxs=[],this.web3=null}setWeb3(o){this.web3=o}setConfirmedTxs(o){this.confirmedTxs=o}async checkPendingTx(o,r,n){let m=[o,...o.txPool],c=0,p;(await Promise.allSettled(m.map(f=>this.checkOnePendingTx(f)))).forEach(f=>{if(f.status==="fulfilled"){let{value:T={}}=f;if(T.status==="dropped")c++;else if(T.status==="confirmed"){let{txId:h,transactionReceipt:g}=T;p={id:h,transactionReceipt:g}}}}),p?r(p,o.id):c===m.length&&n(o.id)}async checkOnePendingTx(o){let{id:r,txHash:n}=o;if(!n||o.status===b.DROPPED||this.checkIfNonceIsTaken(o))return{status:"dropped"};try{let m=await this.web3.eth.getTransactionReceipt(n);if(m?.blockNumber)return{status:"confirmed",txId:r,transactionReceipt:m}}catch(m){throw new Error(m)}return await this.checkIfTxWasDropped(o)?{status:"dropped"}:{}}checkIfNonceIsTaken(o){return this.confirmedTxs.some(r=>r.id!==o.id&&ro(j(r.txParams.nonce),j(o.txParams.nonce)))}async checkIfTxWasDropped(o){let{id:r,txHash:n,txParams:{nonce:m,from:c}}=o,p=`${r}-${n}`,d;try{d=await this.web3.eth.getTransactionCount(c)}catch{return!1}if(at(d)||wo(j(m),d))return!1;this.droppedBlocksBufferByTxHash.has(p)||this.droppedBlocksBufferByTxHash.set(p,0);let f=this.droppedBlocksBufferByTxHash.get(p);return f<this.DROPPED_BUFFER_COUNT?(this.droppedBlocksBufferByTxHash.set(p,f+1),!1):(this.droppedBlocksBufferByTxHash.delete(p),!0)}};function $s(){let e=Nt(),t=as(),o=(0,zs.useSelector)(Ct),r=(0,Ft.useLatest)(ne()),n=(0,Ft.useLatest)(Pe()),m=(0,Ft.useLatest)(ts()),c=(0,Uo.useRef)(!1),p=(0,Uo.useRef)(new Cr),d=async(h,g,C)=>{let x=await os({txId:h,replaceTxId:g,tx:C});t(x)},f=h=>{d(h,null,{status:b.DROPPED,finishTime:+new Date})},T=({id:h,transactionReceipt:g},C)=>{let x={blockNumber:g.blockNumber,gasUsed:g.gasUsed,finishTime:+new Date,extraParams:{contractAddress:g.contractAddress}};g.status?x.status=b.SUCCEED:x.status=b.FAILED,d(C,h,x)};(0,Uo.useEffect)(()=>{(async()=>{if(!(n.current.length===0||c.current)){c.current=!0;try{let g=await e();p.current.setWeb3(g),p.current.setConfirmedTxs(m.current);let C=null;try{C=await g.eth.getTransactionCount(r.current,"latest")}catch{}await Promise.all(n.current.map(x=>C!==null&&wo(j(x.txParams.nonce),C)?null:p.current.checkPendingTx(x,T,f)))}finally{c.current=!1}}})()},[o,e])}var Qa=()=>(Zn(),Ts(),$s(),xs(),null),Ks=(0,Ys.memo)(Qa);s();i();var Mt=l(_()),Zs=l(W());var Xa=()=>{let e=(0,Zs.useHistory)(),t=se(),o=t.get("showClose"),r=t.get("address"),{extensionConfig:n}=P("rpc_info"),m=w(r),c=ne(),p=`ethereum:${c}`;return Mt.default.createElement(bn,{navigator:{bordered:!1,onClose:o?()=>{e.push(q)}:null,closeable:!0},content:{symbol:m?.symbol,coinLogo:m?.icon,chainName:n?.name,walletAddress:c,aggregation:!1,QRCodeAddress:p}})},qs=(0,Mt.memo)(Xa);s();i();var ge=l(_()),ai=l(A()),mi=l(te());s();i();var qe=l(_()),Ho=l(A());k();function ja(){let e=(0,Ho.useDispatch)(),t=(0,Ho.useSelector)(ue),o=(0,Ho.useSelector)(yt),r=(0,qe.useRef)(null),n=c=>{let{value:p}=c.target,d=null;p?p&&!fo(p,{allowNonPrefixed:!1})&&(d={key:"wallet_manage_crypto_errortip_invalid_address_tips"}):d={key:"wallet_transfer_errortip_receive_address_empty"},e(pn(p)),e(dn(d))};(0,qe.useLayoutEffect)(()=>{r.current.focus()},[]);let m=a("wallet_extension_transaction_placeholder_input_address");return qe.default.createElement(Se.Row,null,qe.default.createElement(D.TextArea,{onRef:c=>{r.current=c},value:t,label:a("wallet_extension_transaction_input_label_to"),placeholder:m,size:D.SIZE.xl,autoResize:!0,errorType:D.TIP_TYPE.always,error:o&&a(o.key,o.args),onChange:n}))}var Qs=ja;s();i();var Te=l(_()),Le=l(A()),Ht=l(te());k();X();s();i();var Ut={"max-button":"_max-button_zd8rw_1",maxButton:"_max-button_zd8rw_1",balance:"_balance_zd8rw_14","balance-wrap":"_balance-wrap_zd8rw_18",balanceWrap:"_balance-wrap_zd8rw_18"};function Ja(e){let t=(0,Le.useDispatch)(),o=(0,Le.useSelector)(J),r=w(),n=w(o),m=r?.balance,c=Lo(e),p=!o,{run:d,cancel:f}=(0,Ht.useThrottleFn)(T=>{let h=null,g=$e(m,c);lt(g,0)?h={key:"wallet_transfer_errortip_mainchain_coin_insufficient",args:{chainSymbol:r?.symbol}}:Ye(T,p?g:n?.balance)&&(h={key:"wallet_transfer_errortip_insufficient_balance"}),t(un(h))},{wait:100});return(0,Ht.useUnmount)(f),d}function Ra({currentGasInfo:e}){let t=(0,Le.useDispatch)(),o=w(),r=(0,Le.useSelector)(J),n=(0,Le.useSelector)(po),m=(0,Le.useSelector)(Et),c=w(r),p=c?.balanceInt,d=To(c?.balance,{symbol:c?.symbol,decimals:c?.decimals}),f=Ja(e),T=Lo(e),h=(0,Te.useRef)(!!n),g=x=>{h.current=!0,t(kt(x))},C=()=>{let x=c.decimals,S=mt(p,10**x);if(r)g(S);else{let ie=$e(S,T);g(to(ie,0)?"0":ie)}t(ur(!0))};return(0,Te.useEffect)(()=>{h.current&&f(n)},[n,T,o?.balance]),Te.default.createElement(Se.Row,null,Te.default.createElement(D.Number,{placeholder:M.showFloorTruncation(0,6,{needZero:!0}),title:a("wallet_extension_send_subtitle_amount"),size:D.SIZE.xl,enableMinus:!1,precision:c?.decimals,value:n,error:m&&a(m.key,m.args),errorType:D.TIP_TYPE.always,onChange:x=>{g(x),t(ur(!1))},action:Te.default.createElement(Ee.Text,{size:Ee.SIZE.xs,type:Ee.TYPE.secondary,className:Ut["balance-wrap"],onClick:C},`${a("wallet_extension_send_text_balance")}:`,Te.default.createElement(Ee.Text,{inherit:!0,ellipsis:{tooltip:!0},className:Ut.balance},d)),suffix:Te.default.createElement(Ee.Text,{className:Ut["max-button"],onClick:C},a("wallet_extension_send_text_max"))}))}var Xs=Ra;s();i();var Gt=l(_()),go=l(A()),js=l(W());k();function em(){let e=(0,go.useSelector)(ue),t=(0,go.useSelector)(yt),o=(0,go.useSelector)(Et);return!e||!!t||!!o}function om({loading:e}){let t=(0,go.useSelector)(ue),o=ne(),r=(0,js.useHistory)(),n=(0,go.useSelector)(J),m=em(),c=Qn(Wr),[p,d]=(0,Gt.useState)(!1),f=p||e,{extensionConfig:T}=P("rpc_info"),h=async()=>{try{d(!0),await c({from:o,to:t,method:qn,isRpcChain:!0,chainIndex:j(T?.chainId)});let g=ut;n&&(g+=`?address=${n}`),r.push(g)}finally{d(!1)}};return Gt.default.createElement(O,{category:O.CATEGORY.fill,type:O.TYPE.highlight,size:O.SIZE.lg,loading:f,block:!0,disabled:m,onClick:h},a("wallet_extension_send_btn_next"))}var Js=om;s();i();var Rs=l(_());var ei=l(W()),Go=l(A());var tm=()=>{let e=(0,ei.useHistory)(),t=(0,Go.useDispatch)(),r=se().get("showClose"),n=(0,Go.useSelector)(It),m=(0,Go.useSelector)(J),c=w(m),p=()=>{setTimeout(()=>{t(vt())},200)},d=()=>{p(),e.goBack()},f=r?()=>{p(),e.push(n||q)}:null;return Rs.default.createElement(z,{title:c?.symbol,icon:{text:c?.symbol},onBack:d,onClose:f})},oi=tm;s();i();var Be=l(_()),ke=l(A()),ti=l(Oa());bo();k();X();s();i();function rm(){let e=(0,ke.useDispatch)(),t=(0,ke.useSelector)(J),o=w(t),r=(0,ke.useSelector)(ue),n=(0,ke.useSelector)(po);(0,Be.useEffect)(()=>{if(t&&fo(r)&&o?.decimals){let m=!n||Pr(Number(n));e(dr(Xr(r,m?"0":(0,ti.addHexPrefix)(Qr(V(n,10**o?.decimals))))))}},[t,o?.decimals,r,n])}function nm(){let e=(0,ke.useDispatch)(),o=!(0,ke.useSelector)(J),r=(0,ke.useSelector)(ln);return rm(),o?Be.default.createElement(Se.Row,null,Be.default.createElement(D,{title:Be.default.createElement("div",{className:"rpc-evm-send-edit-input-data__title"},a("developer_mode_send_maintitle_gasprice"),Be.default.createElement(ye,{title:a("developer_mode_send_tooltip_additional_data"),placement:ye.DIRECTION.topRight},Be.default.createElement(B,{className:"okx-wallet-plugin-information-circle rpc-evm-send-edit-input-data__info-icon"}))),placeholder:a("developer_mode_select_a_token_input_optional"),errorType:D.TIP_TYPE.always,size:D.SIZE.xl,value:r,onChange:n=>{e(dr(n.target.value))}})):null}var ri=nm;s();i();var xo=l(_()),Wo=l(A()),ni=l(oe());bo();k();X();s();i();function sm(){let e=(0,Wo.useDispatch)(),t=(0,Wo.useSelector)(Ao),o=(0,Wo.useSelector)(So),r=p=>{e(fn(p))},n;t&&(Ye(t,o)?n=a("developer_mode_send_tooltip_higher",{num:o}):lt(t,o)&&(n=a("developer_mode_send_tooltip_lower",{num:o})));let m=a("developer_mode_send_maintitle_nonce1"),c=`${at(o)?"":M.thousandFormat(o)}`;return xo.default.createElement(Se.Row,{className:"rpc-evm-send-edit-nonce",noMargin:!0},xo.default.createElement("div",{className:"rpc-evm-send-edit-nonce__inner"},xo.default.createElement(D.Number,{innerClassName:(0,ni.default)({"rpc-evm-send-edit-nonce__warning-input":!!n}),withOperation:!0,alwaysOperation:!0,enableMinus:!1,precision:0,title:m,placeholder:c,size:D.SIZE.xl,value:t,onAdd:()=>!t&&o!==null?(r(o+1),!1):!0,onSub:()=>!t&&Ye(o,0)?(r(o-1),!1):!0,onChange:r})),n&&xo.default.createElement("div",{className:"rpc-evm-send-edit-nonce__warning-text"},xo.default.createElement(B,{className:"okx-wallet-plugin-warning-circle rpc-evm-send-edit-nonce__warning-icon"}),n))}var si=sm;s();i();var ii={"rpc-evm-send-edit__inner":"_rpc-evm-send-edit__inner_3qvkv_1",rpcEvmSendEditInner:"_rpc-evm-send-edit__inner_3qvkv_1"};function im(){let e=(0,ai.useDispatch)(),t=se(),{chainGasLimitLoading:o,currentGasInfo:r}=Lt(),{loadingNonce:n}=_s();return(0,mi.useMount)(()=>{e(cn(t.get("address")))}),ge.default.createElement(Po.Container,null,ge.default.createElement(oi,null),ge.default.createElement(Po.Box,{className:ii["rpc-evm-send-edit__inner"]},ge.default.createElement(Qs,null),ge.default.createElement(Xs,{currentGasInfo:r}),ge.default.createElement(ri,null),ge.default.createElement(si,null)),ge.default.createElement(Ae.FooterActions,{usePortal:!0},ge.default.createElement(Js,{loading:o||n})))}var li=im;s();i();var N=l(_()),U=l(A()),ci=l(W()),pi=l(te());bo();k();Da();X();function am(e){let t=(0,U.useSelector)(J),o=!t,r=ne(),n=(0,U.useSelector)(ue),m=(0,U.useSelector)(pr),c=(0,U.useSelector)(mn),p=(0,U.useSelector)(Ao),d=(0,U.useSelector)(So),{extensionConfig:f}=P("rpc_info"),T={from:r,to:o?n:t,value:o?c:"0x0",data:m},[h,g]=ps(T),C=ds({data:T.data,type:h}),x=w(T.to),S=io(C?.amount||0,{decimals:x?.decimals||6});return{txMeta:us({tx:T,customGasInfo:e,nonce:p||d,txData:C,tokenInfo:x,chain:f,approvedAmount:S,formattedAmount:S,txType:h}),loadingTxData:g}}var mm=()=>{let e=(0,ci.useHistory)(),t=(0,U.useDispatch)(),o=(0,U.useSelector)(It),r=(0,U.useSelector)(J),n=w(r),m=w(),c=(0,U.useSelector)(po),p=In(),d=wt(p),f=(0,U.useSelector)(ue),T=(0,U.useSelector)(Ao),h=(0,U.useSelector)(So),g=(0,U.useSelector)(pr),{extensionConfig:C}=P("rpc_info"),x=ms(),S=On(p),[ie,Z]=(0,N.useState)(!1),[Q,Ne]=(0,N.useState)(!1),{setGasType:ae,chainGasLevels:tt,currentGasInfo:ze,setCustomGasOption:nr,chainGasLoading:Re,chainGasLoadFailed:Ve,chainGasLimitLoadFailed:sr}=Lt(),eo=ze,vo=Lo(ze),rt=(0,U.useSelector)(an),{txMeta:F,loadingTxData:ir}=am(ze),nt=n?.balanceInt;(0,pi.useMount)(()=>{if(!f){let pe=de;r&&(pe+=`?address=${r}`),e.replace(pe)}});let st=(0,N.useMemo)(()=>[v.AUTHORIZATION,v.CANCEL_AUTHORIZATION].includes(F.type)?!1:F.type===v.TRANS_OUT?F.extraParams?.value:c,[c,F]),ar=(0,N.useMemo)(()=>F.type===v.TRANS_OUT?F.extraParams?.coinSymbol:[v.AUTHORIZATION,v.CANCEL_AUTHORIZATION].includes(F.type)?a(Ze[F.type],{symbol:F.extraParams?.coinSymbol}):a(Ze[F.type]),[F]),Nr=()=>{setTimeout(()=>{t(vt())},200),e.push(o||q)},va=async()=>{try{Ne(!0),await x(F,void 0,pe=>{let it=nn[d?.keyringIdentityType];Yr({tx_source:"transfer",from_addr:pe?.txParams?.from,to_addr:f,main_token_symbol:C?.symbol,token_symbol:pe?.extraParams?.coinSymbol||"",contract_address:r||"",volume_token:c,volume_usdt:"",tx_hash_unique:pe?.txHash,wallet_type:it,chain_id:parseInt(C?.chainId,16)})}),Nr()}catch(pe){Sr(pe)}finally{Ne(!1)}},ba=(0,N.useMemo)(()=>Ve?{type:hr.TIP_TYPE.FEE_ERROR}:eo?.isSupportEip1559&&eo?.baseFeePerGas==="0"?{type:Fr.TYPE.warn,message:a("wallet_extension_transaction_error_base_zero")}:null,[Ve,eo?.baseFeePerGas,eo?.isSupportEip1559]);return(0,N.useEffect)(()=>{if(rt){let pe=n.decimals,it=mt(nt,10**pe),Ar=r?it:$e(it,vo);t(kt(to(Ar,0)?"0":Ar))}},[vo,rt,nt,r,n.decimals]),N.default.createElement(Po.Container,null,N.default.createElement(z,{icon:F.type===v.TRANS_OUT&&{text:F.extraParams?.coinSymbol},title:ar,onClose:Nr}),st&&N.default.createElement(Oo,null,N.default.createElement(Pn,{summaryList:[{useMinPrecision:!1,coinAmount:st,injectCoin:n,displayEstimate:!1}],title:a("wallet_extension_send_colored_send")})),N.default.createElement(Oo,null,N.default.createElement(xr,{localType:Gr,title:a("extension_send_mid_text_from"),walletId:p,onCopyCallback:()=>{S({trade:"send",all_confirmation:"wallet_used_address"})}}),N.default.createElement(xr,{address:f,title:a("extension_send_mid_text_to"),onCopyCallback:()=>{S({trade:"send",all_confirmation:"to_address"})}})),N.default.createElement(Oo,null,N.default.createElement(Dn,{onClick:()=>{Z(!0)},injectCoin:m,estimateFailed:!!Ve,networkFee:Re?void 0:M.mul(vo,10**m?.decimals),loading:Re})),N.default.createElement(Oo,{bordered:!1},N.default.createElement(Sn,{title:a("developer_mode_send_maintitle_nonce1")},N.default.createElement(Ee.Text,{size:Ee.SIZE.sm},T||h)),!!g&&N.default.createElement(Ln,{copyable:!0,defaultExpanded:!0,data:g})),N.default.createElement(Ae,{placeholder:!0,offsetBottom:0},N.default.createElement(hr,{...ba}),N.default.createElement(Tr,{buttonGroup:[{disabled:!!Ve,onClick:va,actionType:Tr.ACTION_TYPE.CONFIRM,loading:(ir||Q||Re)&&!Ve}]})),Re?null:N.default.createElement(gs,{onBack:()=>{Z(!1)},visible:ie,rpcInfo:C,setGasType:ae,chainGasLevels:tt,setCustomGasOption:nr,currentGasInfo:ze,chainGasLimitLoadFailed:sr}))},di=mm;s();i();var Ue=l(_());k();var Bi=l(te()),Fi=l(A());s();i();var ui=l(_()),Wt=l(A());k();var fi=l(te());function lm(){let e=(0,Wt.useDispatch)(),t=(0,Wt.useSelector)(re),o=Pe(),r=[{text:a("wallet_extension_history_option_pending",{num:o.length}),value:uo.PENDING},{text:a("wallet_extension_history_tab_completed"),value:uo.COMPLETE}];return(0,fi.useMount)(()=>{o.length===0&&e(Do({status:uo.COMPLETE}))}),ui.default.createElement(E.FilterTabs,{tabs:r,value:t.status,onSelect:n=>{e(Do({status:n}))}})}var _i=lm;s();i();var zo=l(_()),Vt=l(A()),Ti=l(oe());k();Sa();s();i();var zt={"retina-border-basic":"_retina-border-basic_2pibg_1",retinaBorderBasic:"_retina-border-basic_2pibg_1",root:"_root_2pibg_29",resetNonceIcon:"_resetNonceIcon_2pibg_99",disabledResetNonceIcon:"_disabledResetNonceIcon_2pibg_103"};function cm(){let e=(0,Vt.useDispatch)(),t=(0,Vt.useSelector)(re),o=Pe(),r=()=>{o.length!==0&&pt.warn({alignBottom:!1,title:a("extension_wallet_advanced_title_clear_confirm"),text:a("extension_wallet_advanced_subtitle_clear_confirm"),cancelText:a("wallet_extension_btn_general_cancel"),confirmText:a("wallet_extension_btn_general_confirm"),onConfirm:async()=>{await Hr().rpcEvmClearPendingTransaction(),Ur.success({title:a("extension_wallet_advanced_notification_cleared")})}})};return zo.default.createElement("div",{className:zt.root},zo.default.createElement(E.DateRangeSelection,{dates:t.dates,onChange:(n,m)=>{e(Do({dates:m}))}}),zo.default.createElement(ye,{title:a("wallet_extension_settings_tooltips_reset_nonce"),placement:ye.DIRECTION.bottomRight},zo.default.createElement(B,{className:(0,Ti.default)("okx-wallet-plugin-brush-20",zt.resetNonceIcon,{[zt.disabledResetNonceIcon]:o.length===0}),onClick:r})))}var gi=cm;s();i();var Me=l(_()),Oi=l(A());s();i();s();i();var je=l(_());k();s();i();var xe=l(_());k();s();i();s();i();var Yt=l(_());X();s();i();X();var $t=e=>{if(!e?.txParams)return{};let{gasPrice:t,maxFeePerGas:o,maxPriorityFeePerGas:r,gasLimit:n,type:m}=e.txParams,c={gasLimit:n};return m===so.FEE_MARKET?(c.maxFeePerGas=ct(V(o,1.2),0),c.maxPriorityFeePerGas=ct(V(r,1.2),0)):c.gasPrice=ct(V(t,1.2),0),c};function pm({txId:e,onClose:t}){let o=Ot(e),r=ls(),[n,m]=(0,Yt.useState)(!1),c=$t(o),p=async()=>{if(n)return;m(!0);let Q=await Pt(o.id);if(!Q||Q.status!==b.PENDING){m(!1),t();return}r(o,c).catch(Ne=>{console.log(Ne)}).finally(()=>{m(!1),t()})},{gasPrice:d,maxFeePerGas:f,gasLimit:T,type:h}=o?.txParams||{},g="",C="";h===so.FEE_MARKET?(g=f,C=c.maxFeePerGas):(g=d,C=c.gasPrice);let x=Bo(me(V(g,T))),S=`=Gas Price(${Ke(g)})`,ie=Bo(me(V(C,c.gasLimit))),Z=`=Gas Price(${Ke(C)})`;return Yt.default.createElement(E.EthereumTxSpeedDialogBase,{visible:!!o,onConfirm:p,loading:n,onClose:t,oldGasFeeDisplay:x,oldGasDetailDisplay:S,newGasFeeDisplay:ie,newGasDetailDisplay:Z})}var Vo=pm;s();i();var Kt=l(_());X();function dm({txId:e,onClose:t}){let o=Ot(e),r=cs(),n=w(),[m,c]=(0,Kt.useState)(!1),p=$t(o),d=async()=>{if(m)return;if(c(!0),(await Pt(o.id)).status!==b.PENDING){c(!1),t();return}r(o,p).catch(x=>{console.log(x)}).finally(()=>{t(),c(!1)})},{type:f}=o?.txParams||{},T="";f===so.FEE_MARKET?T=p.maxFeePerGas:T=p.gasPrice;let h=Bo(me(V(T,p.gasLimit))),g=`Gas Price (${Ke(T)} GWEI) *Gas Limit(${p.gasLimit}) `;return Kt.default.createElement(E.EthereumTxCancelDialogBase,{visible:!!o,onConfirm:d,loading:m,onClose:t,chainSymbol:n?.symbol,newGasFeeDisplay:h,newGasDetailDisplay:g})}var $o=dm;s();i();var ve=l(_());s();i();var Qe=l(_()),Ci=l(A());k();s();i();var Yo=l(_());k();var xi=({onClick:e,children:t})=>Yo.default.createElement(O,{className:"rpc-evm-tx-actions__button",category:O.CATEGORY.outline,type:O.TYPE.primary,size:O.SIZE.xs,onClick:o=>{o.stopPropagation(),e&&e(o)}},t);function um({tx:e,onCancel:t,onSpeed:o}){let{isShowPending:r,isCanceling:n}=e,m=n?a("wallet_extension_history_list_status_btn_speed_up_cancellation"):a("wallet_extension_history_list_status_btn_cancel_transaction");return r?Yo.default.createElement("div",{className:"rpc-evm-tx-actions"},Yo.default.createElement(xi,{onClick:t},m),!n&&Yo.default.createElement(xi,{onClick:o},a("wallet_extension_history_list_status_btn_speed_up"))):null}var hi=um;s();i();k();Pa();X();function Zt({type:e,extraParams:t}){let o=Ze[e],r,n=a(o);return e===v.TRANS_OUT?r="okx-wallet-plugin-pointer-up":e===v.AUTHORIZATION||e===v.CANCEL_AUTHORIZATION?(r="okx-wallet-plugin-lock-1",n=a(o,{symbol:t?.coinSymbol})):e===v.CONTRACT_CALL?r="okx-wallet-plugin-report-centre":e===v.CONTRACT_DEPLOY&&(r="okx-wallet-plugin-futures-20"),{icons:[r],title:n}}function qt({type:e,txParams:t,extraParams:o}){let{extensionConfig:r}=P("rpc_info");if(e===v.TRANS_OUT){let c=o?.value;return c&&(c=M.thousandFormat(c)),[{direction:cr.OUT,coinAmount:`${c||""} ${o?.coinSymbol||""}`}]}let{value:n}=t||{},m=j(n);return Ye(m,0)?[{direction:cr.OUT,coinAmount:`${M.thousandFormat(me(m))} ${r.symbol||""}`}]:[]}function Qt(e){let t;return e.type===v.TRANS_OUT?t=`${a("wallet_extension_history_list_send_to")}   ${G(e.extraParams.toAddress)}`:e.type===v.AUTHORIZATION||e.type===v.CANCEL_AUTHORIZATION?t=G(e.extraParams?.approvedAddress):t=G(e.txParams.to),t}function fm({isShowPending:e,isSpeeding:t,isCanceling:o}){let r="",n="";return e?(r=No.PENDING,t?n=a("wallet_extension_send_status_speedingup"):o?n=a("wallet_extension_send_status_canceling"):n=a("wallet_extension_history_list_status_pending")):(r=No.WAITING,n=a("wallet_extension_history_list_status_waiting")),{labelType:r,labelText:n}}function _m(e){let t=Qt(e),o=(0,Ci.useSelector)(co),r=[t],n=oo(e.sendTime,{format:"yyyyMMddHHmmss",locale:o});return r.push(n),r}function Tm({tx:e,onClick:t,onCancel:o,onSpeed:r}){let{icons:n,title:m}=Zt(e),{labelType:c,labelText:p}=fm(e),d=qt(e),f=_m(e),T=Dt(f,d),h=Qe.default.createElement(E.Label,{className:"tx-history-ml4",type:c,text:p});return Qe.default.createElement(E.ItemContainer,{onClick:g=>{t&&t(e,g)}},Qe.default.createElement(E.Row,{assets:d,align:T},Qe.default.createElement(E.Info,{icons:n,title:m,label:h,details:f}),Qe.default.createElement(E.Assets,{assets:d})),Qe.default.createElement(hi,{tx:e,onCancel:o,onSpeed:r}))}var Ko=Tm;function gm({txs:e,onClick:t}){let[o,r]=(0,ve.useState)(null),[n,m]=(0,ve.useState)(null);return ve.default.createElement(ve.default.Fragment,null,e.map(c=>ve.default.createElement(Ko,{key:c.id,tx:c,onClick:t,onSpeed:()=>{r(c.id)},onCancel:()=>{m(c.id)}})),ve.default.createElement(Vo,{txId:o,onClose:()=>{r(null)}}),ve.default.createElement($o,{txId:n,onClose:()=>{m(null)}}))}var Zo=gm;s();i();var Xe=l(_());k();var yr=l(A());function xm({txs:e,onClick:t}){let o=(0,yr.useSelector)(co),{dates:r}=(0,yr.useSelector)(re),n=(0,Xe.useMemo)(()=>{let m=e.map(T=>({...T,groupDate:oo(T.sortTime,{format:"yyyyMMdd",locale:o})})),c=[],p=0,d,f;return m.forEach(T=>{let{groupDate:h}=T;d!==h&&(d=h,f=[],c[p++]={date:d,list:f}),f.push(T)}),c},[e,r]);return Xe.default.createElement(E.List,null,n.map(({date:m,list:c},p)=>Xe.default.createElement("div",{key:p},Xe.default.createElement(E.Date,null,m),c.map(d=>Xe.default.createElement(d.Comp,{key:d.id,tx:d,onClick:t})))))}var qo=xm;s();i();var ho=l(_());k();function hm({status:e}){let t="",o="";return(e===b.FAILED||e===b.DROPPED)&&(t=No.FAILED,o=a("wallet_extension_history_status_failed")),{labelText:o,labelType:t}}function Cm(e){return[Qt(e)]}function ym({tx:e,onClick:t}){let{icons:o,title:r}=Zt(e),n=qt(e),m=Cm(e),c=Dt(m,n),{labelType:p,labelText:d}=hm(e),f=ho.default.createElement(E.Label,{className:"tx-history-ml4",type:p,text:d});return ho.default.createElement(E.ItemContainer,{onClick:T=>{t&&t(e,T)}},ho.default.createElement(E.Row,{assets:n,align:c},ho.default.createElement(E.Info,{icons:o,title:r,label:f,details:m}),ho.default.createElement(E.Assets,{assets:n})))}var Qo=ym;function Em({tx:e}){let t=is(),{status:o,isShowPending:r,isCanceling:n}=e,[m,c]=(0,xe.useState)(!1),[p,d]=(0,xe.useState)(!1);return xe.default.createElement(xe.default.Fragment,null,(o===b.SUCCEED||o===b.FAILED)&&xe.default.createElement(Jn,{url:t(e.txHash),text:a("wallet_extension_mid_link_explorer")}),r&&o===b.PENDING&&xe.default.createElement(Rn,{isShowCancel:!n,isShowSpeedUp:!n,isShowSpeedupCancel:n,onCancel:()=>{c(!0)},onSpeedUp:()=>{d(!0)}}),p&&xe.default.createElement(Vo,{txId:e?.id,onClose:()=>{d(!1)}}),m&&xe.default.createElement($o,{txId:e?.id,onClose:()=>{c(!1)}}))}var yi=Em;s();i();var Fe=l(_());k();s();i();var Er=l(_()),Ir=l(oe());s();i();var Im={lightBlue:{color:"var(--okx-wallet-color-white)",background:"var(--okd-color-semantic-informative)"},deepBlue:{color:"var(--okx-wallet-color-white)",background:"var(--okd-color-semantic-informative)"},lightGray:{background:"var(var(--okd-color-content-contrast))",color:"var(--okx-wallet-color-white)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(--okx-wallet-color-white)"},black:{background:"var(--okx-wallet-color-black)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(var(--okd-color-content-tertiary))",color:"var(--okx-wallet-color-white)"}},km={larger:{size:56,fontSize:30},large:{size:32,fontSize:20},normal:{size:24,fontSize:14},small:{size:20,fontSize:12}};function vm({icon:e,className:t,text:o,size:r="normal",fontSize:n,theme:m,color:c,background:p}){if(!o)return null;let d=o[0].toUpperCase(),f,T,h;if(m){let S=Im[m];f=S?.color,T=S?.background,h=S?.border}let g,C;if(typeof r=="string"){let S=km[r];g=S?.size,C=S?.fontSize}else g=r.size;let x={width:`${g}px`,height:`${g}px`};return e?Er.default.createElement("img",{alt:"",src:e,style:x,className:(0,Ir.default)("capitalize-letter",t)}):(x={...x,fontSize:`${n||C}px`,color:c||f,background:p||T,border:h},Er.default.createElement("div",{style:x,className:(0,Ir.default)("capitalize-letter",t)},d))}var $=vm;X();s();i();var R=l(_()),Xt=l(oe());k();s();i();function bm({className:e,label:t,children:o}){return R.default.createElement("div",{className:(0,Xt.default)("rpc-evm-coin-flow__label",e)},R.default.createElement("div",{className:"rpc-evm-coin-flow__label-text"},t),R.default.createElement("div",null,o))}function wm({isNFT:e,icon:t,title:o,address:r}){let n=typeof t=="string"?R.default.createElement(An,{className:(0,Xt.default)({"rpc-evm-coin-flow__record-icon-nft":e}),src:t,alt:""}):t;return R.default.createElement("div",{className:"rpc-evm-coin-flow__record"},R.default.createElement("div",{className:"rpc-evm-coin-flow__record-icon"},n),R.default.createElement("div",{className:"rpc-evm-coin-flow__record-right"},R.default.createElement("div",{className:"rpc-evm-coin-flow__record-title"},o),r&&R.default.createElement(De,{className:"rpc-evm-coin-flow__record-address",label:G(r),value:r,message:a("wallet_extension_popup_title_receiving_address_copied")})))}function Nm({data:e=[]}){if(e=(e||[]).filter(Boolean),e.length===0)return null;let t=e.length===1,o=r=>{if(!r)return null;let{items:n,label:m,...c}=r;return R.default.createElement(bm,{...c,label:m,key:r},n.map((p,d)=>R.default.createElement(wm,{...p,key:d})))};return R.default.createElement("div",{className:(0,Xt.default)("rpc-evm-coin-flow",{"rpc-evm-coin-flow__hidden-label":t})},e.map(o))}var Ei=Nm;var{TRANS_OUT:Ii,CONTRACT_CALL:ki,AUTHORIZATION:jt,CANCEL_AUTHORIZATION:Jt,CONTRACT_DEPLOY:vi}=v,Am={[jt]:"wallet_extension_header_approval_title_approve",[Jt]:"wallet_extension_header_approval_title_cancel_approval"},Sm={[jt]:"wallet_extension_header_approval_title_for",[Jt]:"wallet_extension_header_approval_title_for"},Dm="/static/images/tx-history/default-protocol.svg";function Pm(e){let{type:t}=e,o=w("",!0);switch(t){case Ii:{let{value:r,coinSymbol:n}=e.extraParams||{},m=`- ${M.thousandFormat(r)} ${n||a("wallet_extension_history_text_unknown_token")}`;return{items:[{icon:Fe.default.createElement($,{icon:!n&&qr,text:n,size:"large",theme:"black"}),title:Fe.default.createElement(gr,{maxWidth:"284px",text:m})}]}}case ki:{let{value:r}=e.txParams||{},n=j(r);if(ro(n,0))return null;let m=`- ${To(me(n),{symbol:o.symbol,decimals:o?.decimals})}`;return{items:[{icon:Fe.default.createElement($,{text:o.symbol,size:"large",theme:"black"}),title:Fe.default.createElement(gr,{text:m,maxWidth:"284px"})}]}}case jt:case Jt:{let{coinSymbol:r}=e.extraParams||{};return r?{label:a(Am[t]),items:[{icon:Fe.default.createElement($,{text:r,size:"large",theme:"black"}),title:r}]}:null}case vi:default:return null}}function Om(e){let{type:t,extraParams:o}=e;switch(t){case jt:case Jt:{let{approvedAddress:r}=o||{};return{label:a(Sm[t]),items:[{icon:Dm,title:Fe.default.createElement(De,{className:"rpc-mode-evm-tx-detail-flow__authorization",label:G(r),value:r,message:a("wallet_extension_popup_title_receiving_address_copied")})}]}}case Ii:case ki:case vi:default:return null}}function Lm({tx:e}){let t=Pm(e),o=Om(e);return Fe.default.createElement(Ei,{data:[t,o]})}var bi=Lm;s();i();var y=l(_()),kr=l(A()),wi=l(oe());k();X();function Bm({status:e,isCanceling:t,isSpeeding:o,isShowPending:r}){let n,m="";return e===b.SUCCEED?(n=_o.TxStatusInfoEnum.SUCCESS,m=a("wallet_extension_history_status_completed")):e===b.FAILED||e===b.DROPPED?(n=_o.TxStatusInfoEnum.FAILED,m=a("wallet_extension_history_status_failed")):e===b.PENDING&&(r?(n=_o.TxStatusInfoEnum.PENDING,t?m=a("wallet_extension_send_status_canceling"):o?m=a("wallet_extension_send_status_speedingup"):m=a("wallet_extension_history_list_status_pending")):(n=_o.TxStatusInfoEnum.WAITING,m=a("wallet_extension_history_list_status_waiting"))),y.default.createElement(_o,{label:a("wallet_extension_mid_text_status"),status:n,statusText:m})}function Fm({status:e,sendTime:t,finishTime:o}){let r=(0,kr.useSelector)(co);return y.default.createElement(Ie,{label:a("wallet_extension_mid_text_time"),value:oo(e===b.PENDING?t:o,{format:"yyyyMMddHHmmss",locale:r})})}function Mm({type:e,extraParams:t}){let{approvedAmount:o}=t||{};return e!==v.AUTHORIZATION?null:y.default.createElement(Ie,{label:a("wallet_extension_mid_text_approved_amount"),value:o>=10**13?a("wallet_extension_mid_text_unlimited"):M.thousandFormat(o||"0")})}function Um({status:e,blockNumber:t}){let o=(0,kr.useSelector)(Ct),r=$e(o,t);return e===b.PENDING||e===b.DROPPED||to(r,0)||wo(r,14)?null:y.default.createElement(Ie,{label:a("wallet_extension_mid_text_block_confirmation"),value:r})}function Hm(){let{extensionConfig:e}=P("rpc_info");return y.default.createElement(Ie,{label:a("wallet_extension_mid_text_network"),value:y.default.createElement(y.default.Fragment,null,y.default.createElement($,{className:"rpc-mode-evm-tx-detail-info__network-icon",icon:e.icon,text:e.name,size:"small",theme:"lightGray"}),e.name)})}function Gm({txParams:e}){let{from:t}=e;return y.default.createElement(Ie,{label:a("wallet_extension_mid_text_from"),value:y.default.createElement(De,{label:G(t),value:t,message:a("wallet_extension_popup_title_receiving_address_copied")})})}function Wm({status:e,type:t,extraParams:o,txParams:r}){let{toAddress:n,tokenAddress:m,contractAddress:c}=o||{},{to:p}=r,d,f;if(t===v.TRANS_OUT)d=a("wallet_extension_mid_text_to"),f=n;else if(t===v.CONTRACT_DEPLOY)if(e===b.SUCCEED)d=a("developer_mode_history_subtitle_developer"),f=c;else return null;else d=a("wallet_extension_mid_text_interaction_address"),t===v.AUTHORIZATION||t===v.CANCEL_AUTHORIZATION?f=m:f=p;return y.default.createElement(Ie,{label:d,value:y.default.createElement(De,{label:G(f),value:f,message:a("wallet_extension_popup_title_receiving_address_copied")})})}function zm({status:e,gasUsed:t,txParams:o}){let{extensionConfig:r}=P("rpc_info"),{gasLimit:n,maxFeePerGas:m,gasPrice:c}=o,p=wn(V,me),d=c||m,f=To(p(d,t||n),{symbol:r?.symbol,decimals:r?.decimals});return y.default.createElement(jn,{label:a("wallet_extension_mid_text_network_fee"),value:f,tip:e===b.PENDING&&a("wallet_extension_popup_cancle_transaction_gasprice_gaslimit",{gasPrice:M.thousandFormat(Ke(d)),gasLimit:M.thousandFormat(n)})})}function Vm({txParams:e}){let{data:t}=e,[o,r]=(0,y.useState)(!1);return t?y.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data"},y.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__inner"},y.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__title",onClick:()=>{r(n=>!n)}},a("developer_mode_history_title_transaction_data"),y.default.createElement(B,{className:(0,wi.default)("okx-wallet-plugin-arrow-small-down rpc-mode-evm-tx-detail-info-data__arrow",{"rpc-mode-evm-tx-detail-info-data__arrow--spread":o})})),o&&y.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__data"},t))):null}function $m({tx:e}){let{txHash:t,txParams:{nonce:o}}=e;return y.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info"},y.default.createElement(Bm,{...e}),y.default.createElement(Fm,{...e}),y.default.createElement(Mm,{...e}),y.default.createElement(Um,{...e}),y.default.createElement(Hm,{...e}),y.default.createElement(Gm,{...e}),y.default.createElement(Wm,{...e}),y.default.createElement(zm,{...e}),y.default.createElement(Ie,{label:a("developer_mode_history_title_nonce"),value:j(o)}),y.default.createElement(Ie,{label:a("wallet_extension_mid_text_transaction_hash"),value:y.default.createElement(De,{label:G(t),value:t,message:a("wallet_extension_popup_title_transaction_hash_copied")})}),y.default.createElement(Vm,{...e}))}var Ni=$m;var Ym=e=>{if(!e)return null;let{type:t,extraParams:o}=e,r=Ze[t];return t===v.AUTHORIZATION||t===v.CANCEL_AUTHORIZATION?a(r,{symbol:o?.coinSymbol||""}):a(r)};function Km({txId:e,onBack:t}){let r=ns().find(({id:m})=>m===e),n=Ym(r);return je.default.createElement(pt.Action,{isFull:!0,titleCenter:!0,title:n,visible:!!e,onClose:t},je.default.createElement(es,{message:r?.errorMessage}),!!r&&je.default.createElement("div",{className:"rpc-mode-tx-detail__content"},je.default.createElement(bi,{tx:r}),je.default.createElement(Ni,{tx:r}),je.default.createElement(yi,{tx:r})))}var Xo=Km;s();i();var vr=l(_());function Zm({symbol:e}){return vr.default.createElement("div",{className:"rpc-mode-evm-title-header__title"},vr.default.createElement($,{className:"rpc-mode-evm-title-header__icon",text:e,theme:"black"}),e)}var br=Zm;s();i();s();i();var Rt=l(_()),Ai=l(A());function qm({onClick:e}){let{dates:t}=(0,Ai.useSelector)(re),o=Pe({dates:t});return o.length===0?Rt.default.createElement(E.Empty,{top:72}):Rt.default.createElement(E.ListContainer,{style:{paddingTop:"8px"}},Rt.default.createElement(Zo,{txs:o,onClick:e}))}var Si=qm;s();i();var Co=l(_());var Di=l(A());function Qm({onClick:e}){let{dates:t}=(0,Di.useSelector)(re),o=rs({dates:t}),r=(0,Co.useMemo)(()=>o.map(n=>({...n,sortTime:n.finishTime,Comp:Qo})),[o]);return r.length===0?Co.default.createElement(E.Empty,{top:72}):Co.default.createElement(E.ListContainer,null,Co.default.createElement(qo,{txs:r,onClick:e}))}var Pi=Qm;function Xm(){let e=(0,Oi.useSelector)(re),[t,o]=(0,Me.useState)(null),r=n=>{o(n.id)};return Me.default.createElement(Me.default.Fragment,null,e.status===uo.PENDING?Me.default.createElement(Si,{onClick:r}):Me.default.createElement(Pi,{onClick:r}),t&&Me.default.createElement(Xo,{txId:t,onBack:()=>{o(null)}}))}var Li=Xm;s();i();function jm(){let e=(0,Fi.useDispatch)();return(0,Bi.useUnmount)(()=>{e(Tn())}),Ue.default.createElement(E.PageContainer,{className:"rpc-evm-tx-history"},Ue.default.createElement(Ae,{className:"rpc-evm-tx-history__top",offsetTop:0},Ue.default.createElement(z,{sticky:!1,title:a("wallet_extension_header_text_history")}),Ue.default.createElement(_i,null),Ue.default.createElement(gi,null)),Ue.default.createElement("div",{className:"rpc-evm-tx-history__bottom"},Ue.default.createElement(Li,null)))}var Mi=jm;s();i();var Eo=l(_());s();i();var yo=l(_()),Ui=l(W());k();s();i();function He(){return se().get("address")}var Jm=()=>{let e=(0,Ui.useHistory)(),t=He(),o=w(t),r=()=>{e.push(q)};return yo.default.createElement(z,{title:yo.default.createElement(br,{symbol:o?.symbol}),onBack:r},t&&yo.default.createElement(ye,{title:a("developer_mode_infor_tooltip_token_details"),placement:ye.DIRECTION.bottom},yo.default.createElement(B,{className:"okds-information-circle rpc-mode-evm-coin-detail-header__info-icon",onClick:()=>{e.push(`${xt}?address=${t}`)}})))},Hi=yo.default.memo(Jm);s();i();var he=l(_());s();i();var Gi=l(_());function Rm({txs:e,onClick:t}){return e.length===0?null:Gi.default.createElement(Zo,{txs:e,onClick:t})}var Wi=Rm;s();i();var er=l(_());function el({txs:e,onClick:t}){let o=(0,er.useMemo)(()=>e.map(r=>{let n,m;return r.status===b.PENDING?(n=r.sendTime,m=Ko):(n=r.finishTime,m=Qo),{...r,sortTime:n,Comp:m}}),[e]);return o.length===0?null:er.default.createElement(qo,{txs:o,onClick:t})}var zi=el;function ol(){let e=He(),t=ss({tokenAddress:e}),[o,r]=(0,he.useState)(null),[n,m]=(0,he.useMemo)(()=>{let p=[],d=[];return t.forEach(f=>{f.isShowPending?p.push(f):d.push(f)}),[p,d]},[t]),c=p=>{r(p.id)};return t.length===0?he.default.createElement(E.Empty,null):he.default.createElement("div",null,he.default.createElement(Wi,{txs:n,onClick:c}),he.default.createElement(zi,{txs:m,onClick:c}),he.default.createElement(Xo,{txId:o,onBack:()=>{r(null)}}))}var Vi=ol;s();i();var Jo=l(_()),Zi=l(A());X();s();i();var jo=l(_()),$i=l(A()),Yi=l(W());k();X();function tl(){let e=(0,Yi.useHistory)(),t=(0,$i.useDispatch)(),{extensionConfig:o}=P("rpc_info"),r=He(),n=w(r),m=`${lo}?address=${r||""}`,c=!r&&o?.faucetUrl;return jo.default.createElement("div",{className:`rpc-evm-coin-detail-btns ${c?"with-faucet":"without-faucet"}`},jo.default.createElement(bt.IconButtonWithLabel,{disabled:ro(n?.balance,0),icon:"okx-wallet-plugin-up",text:a("wallet_home_btn_send"),onClick:()=>{t(_n(m));let p=`${de}?showClose=1`;r&&(p+=`&address=${r}`),e.push(p)}}),jo.default.createElement(bt.IconButtonWithLabel,{icon:"okx-wallet-plugin-down",text:a("wallet_home_btn_receive"),onClick:()=>{let p=r?`&address=${r}`:"";e.push(`${mo}?showClose=1${p}`)}}),c&&jo.default.createElement(bt.IconButtonWithLabel,{icon:"okx-wallet-plugin-faucet-1",text:a("developer_mode_home_btn_faucet"),href:o?.faucetUrl}))}var Ki=tl;function rl(){let e=He(),t=w(e),o=t?.balance||0,{symbol:r,usdToThisRate:n}=(0,Zi.useSelector)($r),m=V(t?.price,n);return{coinAmount:o,coinSymbol:t?.symbol,coinAmountDisplay:io(o),currencyAmountDisplay:Nn({amount:o,rate:m,symbol:r},{useSign:!0,useFixed:!0})}}function nl(){let e=ne(),{coinSymbol:t,coinAmountDisplay:o}=rl();return Jo.default.createElement(Is,null,Jo.default.createElement(Es,{coinSymbol:t,amountDisplay:o,currencyDisplay:null}),Jo.default.createElement(ys,{address:e}),Jo.default.createElement(Ki,null))}var qi=nl;s();i();function sl(){return Eo.default.createElement("div",{className:"rpc-evm-coin-detail"},Eo.default.createElement(Hi,null),Eo.default.createElement("div",{className:"rpc-evm-coin-detail__content"},Eo.default.createElement(qi,null),Eo.default.createElement(Vi,null)))}var Qi=sl;s();i();var ce=l(_()),ta=l(_r());k();var ra=l(W());s();i();var be=l(_()),Ji=l(oe());s();i();var Io=l(_()),Xi=l(oe());var ji=({token:e,className:t,children:o,onClick:r})=>Io.default.createElement("div",{onClick:r,className:(0,Xi.default)("rc-mode__token",t)},Io.default.createElement($,{fontSize:"18px",theme:"black",className:"rc-mode__token__icon",size:"large",text:e?.symbol}),Io.default.createElement("div",{className:"rc-mode__token__info"},Io.default.createElement("div",{className:"rc-mode__token__title"},e.symbol),Io.default.createElement("div",{className:"rc-mode__token__name"},e.name)),o);var Ri=({className:e,dataSource:t=[],renderItem:o,emptyText:r,useFade:n,component:m="div",...c})=>{let p=!t.length,d=n?xn:be.default.Fragment,f=n?hn:be.default.Fragment,T=n?"div":be.default.Fragment;return be.default.createElement(m,{className:(0,Ji.default)("rc-mode__tokens",e),...c},be.default.createElement(d,null,t.map((h,g)=>{let C=g,x=be.default.createRef();return be.default.createElement(f,{key:C,nodeRef:x},be.default.createElement(T,{ref:x},o(h)))})),p&&r)};Ri.Item=ji;var Ge=Ri;s();i();var Ro=l(_()),ea=l(te());var oa=()=>{let e=fe(),[t,o]=Ro.default.useState(),r=(0,ea.useMemoizedFn)(({target:{value:c}})=>{o(c)},[]),n=(0,Ro.useMemo)(()=>e.filter(({balance:c})=>!!Number(c)),[e]);return[(0,Ro.useMemo)(()=>t?n.filter(({name:c,symbol:p})=>{let d=t?.toLowerCase();return c?.toLowerCase()?.includes(d)||p?.toLowerCase()?.includes(d)}):n,[t,n]),{onChange:r,value:t,showSearch:!!n.length}]};s();i();var na=()=>{let[e,{showSearch:t,...o}]=oa();return ce.default.createElement("div",{className:"rc-mode-select__token"},ce.default.createElement(z,{title:a("developer_mode_send_title_selecta_token")}),t&&ce.default.createElement(D.Search,{placeholder:a("developer_mode_send_input_selecta_token"),className:"rc-mode-select__token__search",...o}),ce.default.createElement(Ge,{dataSource:e,renderItem:r=>ce.default.createElement(ra.Link,{to:`${de}?${ta.default.stringify({showClose:1,address:r?.address})}`},ce.default.createElement(Ge.Item,{token:r},ce.default.createElement("div",{className:"rc-mode-select__token__balance"},ce.default.createElement("div",{className:"rc-mode-select__token__amount"},M.thousandFormat(r.balance||0))))),emptyText:ce.default.createElement(Mr.State,{className:"rc-mode-select__token__empty",title:t?a("developer_mode_send_toast_addnewtoken",{crypto:ce.default.createElement("span",{className:"rc-mode-select__token__empty__title__special"},o.value)}):a("developer_mode_send_toast_nonetoken")})}))};s();i();var Je=l(_()),ca=l(W()),pa=l(te());k();s();i();s();i();var or=l(_()),il=({children:e})=>or.default.createElement("div",{className:"token-detail-container"},e),sa=(0,or.memo)(il);s();i();var We=l(_()),al=({image:e,symbol:t,name:o})=>We.default.createElement("div",{className:"token-detail-intro"},We.default.createElement("div",{className:"token-detail-intro__image"},e),We.default.createElement("div",{className:"token-detail-intro__desc"},We.default.createElement("div",{className:"token-detail-intro__symbol"},t),We.default.createElement("div",{className:"token-detail-intro__name"},o))),ia=(0,We.memo)(al);s();i();var Ce=l(_()),aa=l(oe());var ml=({className:e,title:t,text:o,copyText:r,copyNotificationTitle:n,copyNotificationDesc:m})=>{let c=(0,aa.default)("token-detail-row",e),[p,d]=Xn();return Ce.default.createElement("div",{className:c},Ce.default.createElement("div",{className:"token-detail-row__title"},t),Ce.default.createElement("div",{className:"token-detail-row__content"},Ce.default.createElement("div",{className:"token-detail-row__text"},o),r&&Ce.default.createElement("div",{className:"token-detail-row__copy",onClick:()=>{p||(d(r),no.success({title:n,desc:Ce.default.createElement("div",{className:"token-detail-row__copy-desc"},m)}))}},Ce.default.createElement(B,{className:"okx-wallet-plugin-copy"}))))},tr=(0,Ce.memo)(ml);s();i();var et=l(_()),ma=l(oe());var ll=({details:e})=>et.default.createElement("div",{className:"token-detail-details"},e.map((t,o)=>{let r=o===0?"":"token-detail-details__split",n=(0,ma.default)(t?.className,r);return et.default.createElement(tr,{...t,className:n})})),la=(0,et.memo)(ll);var rr={Container:sa,Intro:ia,Row:tr,Details:la};s();i();function cl(){let e=(0,ca.useHistory)(),o=se().get("address"),r=w(o,!0),{extensionConfig:n}=P("rpc_info"),m=[{title:a("developer_mode_infor_subtitle_contractadd"),text:G(o),copyText:o,copyNotificationTitle:a("developer_mode_infor_toast_success"),copyNotificationDesc:o},{title:a("developer_mode_infor_subtitle_tokendecimal"),text:r.decimals},{title:a("developer_mode_infor_subtitle_network"),text:n.name}];return(0,pa.useMount)(()=>{o||e.replace(q)}),Je.default.createElement("div",{className:"rpc-evm-token-detail"},Je.default.createElement(z,{title:a("developer_mode_infor_maintitle_tokendetails")}),Je.default.createElement(rr.Container,null,Je.default.createElement(rr.Intro,{image:Je.default.createElement($,{text:r.symbol,size:"large",theme:"black"}),symbol:r.symbol,name:r.name}),Je.default.createElement(rr.Details,{details:m})))}var da=cl;s();i();var Y=l(_()),ga=l(W()),xa=l(oe());k();s();i();var ua=l(_()),fa=l(A()),_a=l(te());var Ta=()=>{let e=(0,fa.useDispatch)(),{extensionConfig:t}=P("rpc_info"),{chainId:o}=t,r=fe(!0,!0),n=(0,ua.useMemo)(()=>{let c=[],p=[];return r.forEach(d=>{d.isDeleted?p.push(d):c.push(d)}),{usedChainTokens:c,disusedChainTokens:p}},[r]),m=(0,_a.useMemoizedFn)(({address:c,isDeleted:p})=>{e(sn({chainId:o,address:c,isDeleted:!p}))},[o]);return[n,m]};s();i();var ha=()=>{let[{usedChainTokens:e,disusedChainTokens:t},o]=Ta();return Y.default.createElement("div",{className:"rpc-mode-manage-crypto"},Y.default.createElement(z,{closeable:!1,title:a("developer_mode_home_maintitle_managecpt")}),Y.default.createElement(ga.Link,{to:Tt},Y.default.createElement("div",{className:"rpc-mode-manage-crypto__custom"},Y.default.createElement("span",{className:"rpc-mode-manage-crypto__custom__title"},a("developer_mode_manage_text_customcpt")),Y.default.createElement(B,{className:"okds-arrow-chevron-right-centered-md rpc-mode-manage-crypto__custom__icon"}))),Y.default.createElement("h2",{className:"rpc-mode-manage-crypto__added"},a("developer_mode_manage_title_addedcpt")),Y.default.createElement(Ge,{useFade:!0,className:"rc-mode-home__tokens",dataSource:e,renderItem:r=>{let n=!r.address;return Y.default.createElement(Ge.Item,{token:r},Y.default.createElement(B,{className:(0,xa.default)("okx-wallet-plugin-take","rc-mode-home__token__action","rc-mode-home__token__action__minus",{"rc-mode-home__token__action__disabled":n}),onClick:()=>o(r)}))}}),!!t.length&&Y.default.createElement("h2",{className:"rpc-mode-manage-crypto__added"},a("developer_mode_manage_title_adding")),Y.default.createElement(Ge,{useFade:!0,className:"rc-mode-home__tokens",dataSource:t,renderItem:r=>Y.default.createElement(Ge.Item,{token:r,key:r?.address},Y.default.createElement(B,{className:"okx-wallet-plugin-add rc-mode-home__token__action rc-mode-home__token__action__add",onClick:()=>o(r)}))}))};s();i();var L=l(_());k();s();i();var we=l(_()),Ca=l(W()),wr=l(te());bo();k();var pl="0x",dl=()=>{let e=Nt();return async t=>{try{return!fo(t)||await(await e()).eth.getCode(t)===pl}catch(o){return console.log(o),!0}}},ya=()=>{let e=H.useForm(),t=(0,Ca.useHistory)(),[o,r]=we.default.useState(null),[n,m]=we.default.useState(!1),[c,p]=we.default.useState(!1),d=En(),f=Cn(),T=yn(),h=dl(),g=fe(!0,!0),{extensionConfig:C}=P("rpc_info");we.default.useEffect(()=>{e?.setFieldsValue({network:C.name})},[C]);let x=(0,wr.useMemoizedFn)(()=>{let{chainId:Z}=C,Q=e.getFieldsValue();d(Z,Q.address,Q),T({chainId:Z,address:Q.address}),no.success({title:a("developer_mode_manage_toast_added")}),t.go(-1)},[C]),S=(0,wr.useMemoizedFn)(Dr(async()=>{r(null),p(null);let Z=e.getFieldValue("address");if(e.cleanErrors(),!Z)return!1;let Q=g.find(ae=>ae.address===Z);if(Q&&!Q.isDeleted)return e.setErrors({address:a("developer_mode_manage_errortip_duplicate_add")});if(m(!0),p(!1),await h(Z))return m(!1),e.setErrors({address:a("developer_mode_manage_errortip_request_failed")});try{let ae=await f(Z);r(ae),e.setFieldsValue(ae)}catch(ae){p(!0),e.setErrors({address:""}),console.log("error",ae)}finally{m(!1)}},250),[g]),ie=(0,we.useMemo)(()=>c?we.default.createElement("div",{className:"rpc-mode-custom-crypto__address__error"},a("developer_mode_manage_errortip_request_failed"),we.default.createElement("span",{className:"rpc-mode-custom-crypto__address__refresh",onClick:S},a("developer_mode_manage_errortip_refresh"))):null,[c]);return{form:e,token:o,rpcInfo:C,fetching:n,addressError:ie,onConfirm:x,onAddressTrigger:S}};s();i();var ul=11,Ea=()=>{let{form:e,token:t,rpcInfo:o,fetching:r,onConfirm:n,addressError:m,onAddressTrigger:c}=ya();return L.default.createElement("div",{className:"rpc-mode-custom-crypto"},L.default.createElement(z,{title:a("developer_mode_manage_maintitle_customcpt")}),L.default.createElement(H,{form:e,size:H.SIZE.lg,validateTrigger:["onBlur","onChange"],className:"rpc-mode-custom-crypto__form"},L.default.createElement(H.Item,{name:"network",label:a("developer_mode_manage_title_network")},L.default.createElement(D,{size:H.SIZE.xl,innerClassName:"rpc-mode-custom-crypto__form__input__disabled",prefix:L.default.createElement($,{theme:"lightGray",icon:o.icon,text:o?.name,className:"rpc-mode-custom-crypto__icon"})})),L.default.createElement(H.Item,{name:"address",label:a("developer_mode_manage_title_contractadd"),extra:m},L.default.createElement(D.TextArea,{autoResize:!0,size:H.SIZE.xl,onChange:c,errorType:D.TIP_TYPE.always,suffix:r&&L.default.createElement(lr.Circle,{size:lr.SIZE.sm})})),L.default.createElement(H.Item,{name:"symbol",hidden:!t,label:a("developer_mode_manage_title_symbol"),rules:[{validator:(p,d)=>d?.length>ul?Promise.reject(a("developer_mode_manage_errortip_symbollimit")):Promise.resolve()}]},L.default.createElement(D,{size:H.SIZE.xl})),L.default.createElement(H.Item,{hidden:!t,name:"decimals",label:a("developer_mode_manage_title_decimals")},L.default.createElement(D,{size:H.SIZE.xl,disabled:!0})),L.default.createElement(H.Item,{hidden:!0,name:"name"},L.default.createElement(D,{size:H.SIZE.xl})),L.default.createElement(H.Item,{noStyle:!0,shouldUpdate:!0},({getFieldsError:p,getFieldValue:d})=>L.default.createElement(Ae.FooterActions,{usePortal:!0,offsetBottom:0},L.default.createElement(O,{size:O.SIZE.lg,type:O.TYPE.highlight,category:O.CATEGORY.fill,disabled:p().length||!d("symbol"),onClick:n},a("developer_mode_manage_btn_confirm"))))))};var Ia=()=>K.default.createElement(K.default.Fragment,null,K.default.createElement(ee.Switch,null,K.default.createElement(ee.Route,{path:dt,component:Ws,exact:!0}),K.default.createElement(ee.Route,{path:mo,component:qs,exact:!0}),K.default.createElement(ee.Route,{path:de,component:li,exact:!0}),K.default.createElement(ee.Route,{path:ut,component:di,exact:!0}),K.default.createElement(ee.Route,{path:ft,component:na,exact:!0}),K.default.createElement(ee.Route,{path:_t,component:ha,exact:!0}),K.default.createElement(ee.Route,{path:Tt,component:Ea,exact:!0}),K.default.createElement(ee.Route,{path:gt,component:Mi,exact:!0}),K.default.createElement(ee.Route,{path:lo,component:Qi,exact:!0}),K.default.createElement(ee.Route,{path:xt,component:da,exact:!0})),K.default.createElement(Ks,null));var IE=()=>{let e=(0,ko.useHistory)(),{isRpcMode:t}=(0,ka.useSelector)(ht);return(0,ot.useEffect)(()=>{t||e.replace(q)},[t]),ot.default.createElement(ko.Switch,null,ot.default.createElement(ko.Route,{path:tn,component:Ia}))};export{IE as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=rpc-mode-HLDUMYQZ.js.map
