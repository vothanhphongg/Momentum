import{a as Te}from"./chunk-RYO62TNQ.js";import{a as H,c as q}from"./chunk-BFW6HCQ3.js";import{a as Ee}from"./chunk-HHQEFPQ4.js";import{a as be,b as Ne}from"./chunk-FU6DGYIU.js";import"./chunk-UZWUY4JR.js";import{a as Ie}from"./chunk-CNXMURDK.js";import"./chunk-N5DH5ULG.js";import{a as T}from"./chunk-J2QAPBIL.js";import{a as W}from"./chunk-ZE645RND.js";import"./chunk-OWWFH26C.js";import"./chunk-MNZIO3NP.js";import{c as xe}from"./chunk-TSTKPLAO.js";import"./chunk-52XLG23J.js";import{c as Le,d as R}from"./chunk-O3O4HNQA.js";import"./chunk-LR7KSTP2.js";import"./chunk-QCP7SXMX.js";import"./chunk-W23ABSXX.js";import"./chunk-R6X7EOIE.js";import"./chunk-4EFZXPDV.js";import"./chunk-4KODREVA.js";import"./chunk-6UWGBJGT.js";import"./chunk-G4AVWXHJ.js";import"./chunk-76CRIMII.js";import"./chunk-F7VSWGDW.js";import"./chunk-MBHGLWZJ.js";import"./chunk-QZO7W5WD.js";import{f as A}from"./chunk-AKE54ZCC.js";import"./chunk-A57OTXBP.js";import"./chunk-YJQGXXOQ.js";import"./chunk-HTLOGWI7.js";import"./chunk-6SEP5B7P.js";import"./chunk-FHKOH5E6.js";import"./chunk-NTQ2YVDA.js";import"./chunk-KKG4PJ6O.js";import"./chunk-7SRLIN7D.js";import"./chunk-AW5NL3JM.js";import"./chunk-RI2WZ5PA.js";import"./chunk-YIAOHVF5.js";import"./chunk-7HFBMBFB.js";import"./chunk-TJCPJQIM.js";import"./chunk-ZTAZ2272.js";import{g as we}from"./chunk-IRMYAC6R.js";import"./chunk-Q76QXAWY.js";import"./chunk-THSNJ5WU.js";import"./chunk-65AJJVJY.js";import{d as ge}from"./chunk-PDC447BO.js";import"./chunk-JCM7SRK2.js";import{a as Se}from"./chunk-PTD7UCOR.js";import"./chunk-Q4YTGP2G.js";import{b as ye}from"./chunk-ETJEH7T4.js";import{a as ve}from"./chunk-V3IFYKWM.js";import{a as he}from"./chunk-EWTTD4DL.js";import{d as Ae}from"./chunk-Y2TPPS4H.js";import"./chunk-ITY22AD4.js";import"./chunk-E2JYOUYE.js";import"./chunk-B3JSNQIV.js";import{H as fe,I as D,a as pe}from"./chunk-YALUYHLV.js";import{q as I}from"./chunk-I3CPAVOC.js";import"./chunk-ARWSGU73.js";import"./chunk-CZ2ZBAZV.js";import{o as N}from"./chunk-5QMHGZLF.js";import{C as me,Ga as _e,H as le,M as ce,ec as ao}from"./chunk-HPWCPLRR.js";import"./chunk-TSTPZ3JM.js";import"./chunk-D2LKUI4F.js";import{a as Ce}from"./chunk-ON6S2DB7.js";import"./chunk-SZD6WTBQ.js";import"./chunk-ASR4HLU7.js";import"./chunk-ANIUN6US.js";import"./chunk-3DZ7WRLL.js";import"./chunk-DEOJU4Z3.js";import"./chunk-PLIIQKFY.js";import{l as ue}from"./chunk-CWNIM6RS.js";import"./chunk-NNAD25BL.js";import"./chunk-XV444F26.js";import"./chunk-N2BCRNDB.js";import"./chunk-RTFE54S3.js";import"./chunk-GCQ4H2BA.js";import"./chunk-UVFOW4HH.js";import"./chunk-LNOPECCQ.js";import"./chunk-CB7FOZNP.js";import{c as x}from"./chunk-43VURGIT.js";import{Ia as se,Mc as de,Na as no,Sc as io,ya as ae,za as ro}from"./chunk-TM67VPZU.js";import"./chunk-VW6OQNWT.js";import{q as J,y as ie}from"./chunk-PUSMMCUD.js";import{R as B,z as _}from"./chunk-UWJLNJLY.js";import"./chunk-VRY2ADKE.js";import"./chunk-5U7FO2PW.js";import"./chunk-PDUOSATP.js";import"./chunk-XDY6V34Y.js";import"./chunk-YJFNO57I.js";import"./chunk-DZ6CTC22.js";import{$ as P,W as ne,c as re}from"./chunk-JT3LNHPY.js";import"./chunk-47UWF72W.js";import{b as v}from"./chunk-JWYCKY2V.js";import"./chunk-G2266BV2.js";import"./chunk-L4PAIYPH.js";import"./chunk-UT7LJPKF.js";import"./chunk-AFZ6A2B3.js";import"./chunk-VVPY7ZA7.js";import"./chunk-KUW5VATV.js";import"./chunk-BNAVWOJ2.js";import"./chunk-IG2Q5ALZ.js";import"./chunk-WOMUNWBT.js";import"./chunk-F6PXOVYL.js";import"./chunk-324EPGNQ.js";import"./chunk-5GFHI4AK.js";import"./chunk-QYVQBXDG.js";import"./chunk-7D4PUIEN.js";import"./chunk-IWVM7XL6.js";import"./chunk-7QO4TZYQ.js";import"./chunk-FF4LY6PE.js";import"./chunk-76KCDJDG.js";import"./chunk-YDUDQP2P.js";import"./chunk-PGPFV4JQ.js";import"./chunk-MIBHDVGP.js";import"./chunk-7VFUX7IX.js";import"./chunk-XLF4LAH2.js";import"./chunk-ONKZ57T6.js";import"./chunk-ZC7Q7LCH.js";import{f as a,o as t,q as r}from"./chunk-6KXF36WM.js";t();r();var s=a(v()),Qe=a(Ce()),Ve=a(re());B();t();r();var Z=a(v());B();t();r();var L={"list-title":"_list-title_6m0y6_1",listTitle:"_list-title_6m0y6_1","empty-box":"_empty-box_6m0y6_6",emptyBox:"_empty-box_6m0y6_6","search-text":"_search-text_6m0y6_10",searchText:"_search-text_6m0y6_10","coin-box":"_coin-box_6m0y6_13",coinBox:"_coin-box_6m0y6_13","icon-add":"_icon-add_6m0y6_13",iconAdd:"_icon-add_6m0y6_13","icon-remove":"_icon-remove_6m0y6_16",iconRemove:"_icon-remove_6m0y6_16","icon-not-remove":"_icon-not-remove_6m0y6_20",iconNotRemove:"_icon-not-remove_6m0y6_20","clear-icon":"_clear-icon_6m0y6_24",clearIcon:"_clear-icon_6m0y6_24"};var ke=({renderCoin:e,list:n})=>Z.default.createElement(x.Box,null,Z.default.createElement(I.Text,{className:L.listTitle,size:I.SIZE.xs,type:I.TYPE.secondary},_("wallet_manage_crypto_list_added_crypto")),Z.default.createElement(A,{itemKey:"coinId",renderEmpty:!1,renderItem:e,dataSource:n}));t();r();var K=a(v()),Me=a(N());B();io();var Q=({coin:e,deleteAddedCoinAbled:n,onAction:o,isSearchStatus:d})=>{let[i]=Ae(),m="",l="",u=Ne(),f=e?.aggregation;e?.added?n?(m="okx-wallet-plugin-take",l="icon-remove"):(m="okx-wallet-plugin-take",l="icon-not-remove"):(m="okx-wallet-plugin-add",l="icon-add");let w=le({coinId:e?.baseCoinId})&&!!e?.address,S=d&&!f&&!w&&!!e?.address,g=(0,Me.useCreation)(()=>u(e),[e?.coinId,u]);return K.default.createElement(A.Coin,{className:L["coin-box"],hovered:!1,name:e?.coinId===de?e?.chainName:e?.name,icon:e.image,symbol:e.symbol,address:S&&`${_("wallet_manage_crypto_label_contract_address")}: ${me(e?.address)}`,tag:f?_("wallet_manage_crypto_labels_crypto_multichain"):e.tokenType,hidden:i,balance:g?e.coinAmount:void 0,market:g?e.currencyAmount:void 0},!g&&e?.added?K.default.createElement(be,{coinId:e?.coinId,from:fe}):K.default.createElement(ye.IconButton,{className:L[l],disabled:e?.added&&!n,onClick:()=>{o(e)},icon:{icon:m}}))};t();r();var Y=a(v()),Fe=a(re());var Be=Y.default.memo(({search:e,setSearch:n,spinLoading:o})=>!e||e.length===0?null:o?Y.default.createElement(P.Circle,{size:P.SIZE.sm}):Y.default.createElement(ne,{className:(0,Fe.default)("okds-clear-fill",L.clearIcon),onClick:()=>{n("")}}));t();r();var V=a(v());t();r();var Pe=a(v()),Oe=a(Ce());B();var Ue=()=>{let e=(0,Oe.useHistory)();return Pe.default.createElement(ie.State,{className:L["empty-box"],title:_("wallet_search_text_search_no_results"),buttonText:_("wallet_manage_crypto_text_add_custom_crypto"),onButtonClick:()=>{e.push(D)}})};var ze=({loadingMore:e,searchCoins:n,renderCoin:o,spinLoading:d})=>V.default.createElement(A,{itemKey:"coinId",dataSource:n,renderItem:o,loadingMore:e,renderEmpty:()=>d?null:V.default.createElement(Ue,null)});t();r();var E=a(v());B();var De=(0,E.forwardRef)(({unAddedLoadingMore:e,renderCoin:n,unAddedList:o})=>o.length===0?null:E.default.createElement(x.Box,null,E.default.createElement(I.Text,{className:L.listTitle,size:I.SIZE.xs,type:I.TYPE.secondary},_("wallet_manage_crypto_subtitle_popular_crypto")),E.default.createElement(A,{itemKey:"coinId",renderEmpty:!1,renderItem:n,dataSource:o,loadingMore:e})));t();r();var We=a(N());t();r();var X=a(v()),Re=a(N());function $(e,n){let o=(0,X.useRef)(null),d=(0,X.useRef)(Date.now());return(0,Re.useMemoizedFn)((...m)=>{o.current||(e(...m),d.current=Date.now(),o.current=setTimeout(()=>{o.current=null},n))})}t();r();var G=(e,n)=>{if(e.aggregation){let o=n(e.childrenCoin);return{...e,childrenCoin:o}}return e};var He=()=>{let e=W(),n=T();return(0,We.useCreation)(()=>ue(e,n).map(i=>({...i,added:!0})),[e])},qe=()=>{let e=H();return $(n=>{let o=G(n,e);R(o)},500)};t();r();var Ze=a(ao());var Ke=()=>{let{currentNetworkUniqueId:e}=(0,Ze.useSelector)(ge),n=xe({netWorkId:e?String(e):void 0}),{data:o,loading:d,run:i}=Ee(),m=o?.supportNetworkList,l=d&&!o?.supportNetworkList?.length,u=!!m&&m.length>0,f="";if(e!==""){let S=n?.coinId;f=(m||[]).find(g=>g.coinId===S)?.name||""}let w=`${D}?network=${f}`;return{supportCustomCoin:u,customCryptoPath:w,customCoinLoading:l,reloadCustomNetworkData:i}};t();r();var b=a(v()),O=a(N());var Ye=()=>{let e=W(),n=T(),[o,d]=(0,b.useState)(""),i=(0,O.useDebounce)(o,{wait:500}),m=(0,b.useCallback)(C=>{d(C.target.value)},[]),[l,u]=(0,b.useState)(!0);(0,b.useEffect)(()=>{u(!!o)},[o]);let{data:f,loadingMore:w,listRef:S}=q({symbolLike:i,aggregation:!0,chainIds:n?[Number(n)]:void 0},{reloadDeps:[i],enableEmptyAccountCoins:!0,beforeRequest:()=>{if(!i)return{list:[],pageNo:0,isNoMore:!0}},onFinally(){u(!1)}}),g=(0,O.useCreation)(()=>new Set(e.map(C=>C.aggregation?C.symbol:C.coinId)),[e]),p=(0,O.useCreation)(()=>(f?.list??[]).map(y=>(y.added=g.has(y.aggregation?y.symbol:y.coinId),y)).sort((y,M)=>M.added-y.added),[g,f?.list]);return{searchListRef:S,search:o,searchCoins:p,searchLoading:l,searchLoadingMore:w,onSearch:m,setSearch:d}};t();r();t();r();var $e=a(N());no();ro();function Ge(){let e=we();return(0,$e.useMemoizedFn)(async n=>{try{let{code:o}=await se(ae.registerCustomCoinAddr,{coinAddrRegisterList:[{accountId:e,coinId:n}]},{needSign:!0});return o===0}catch{return!1}})}var je=()=>{let e=H(),n=Ge();return $(async o=>{let d=ce(o),i;if(d){if(i=await _e(o),!i)return}else i=o;i=G(i,e),o.added?R(i):await n(i.coinId)&&Le(i)},500)};t();r();var U=a(v()),k=a(N());var Je=(e=[],n)=>{let o=T(),d=Ie(),i=(0,k.useCreation)(()=>new Set(e.map(h=>h.aggregation?h.symbol:h.coinId)),[e]),m=(0,k.useCreation)(()=>Array.from(new Set(Te(e).map(h=>h.coinId))),[e]),{data:l,loading:u,loadingMore:f,listRef:w,reload:S}=q({aggregation:!0,chainIds:o?[Number(o)]:void 0,excludeCoinIds:m},{enable:!d,reloadDeps:[o],enableEmptyAccountCoins:!0}),g=(0,k.usePrevious)(i.size),p=i.size<g;(0,U.useEffect)(()=>{!n&&p&&S()},[p,i.size,n]);let C=(0,k.useCreation)(()=>l?.list?.filter(F=>!i.has(F.aggregation?F.symbol:F.coinId))??[],[l?.list,e])??[],[y,M]=(0,U.useState)(!0);return(0,U.useEffect)(()=>{u||M(!1)},[u]),{unAddedList:C,unAddedListRef:w,unAddedLoading:y,unAddedLoadingMore:f}};t();r();var z={"wallet-coin__manage":"_wallet-coin__manage_1imve_1",walletCoinManage:"_wallet-coin__manage_1imve_1","wallet-coin__manage__search":"_wallet-coin__manage__search_1imve_4",walletCoinManageSearch:"_wallet-coin__manage__search_1imve_4","wallet-coin__manage__spin":"_wallet-coin__manage__spin_1imve_8",walletCoinManageSpin:"_wallet-coin__manage__spin_1imve_8","wallet-coin__manage__spin__hidden":"_wallet-coin__manage__spin__hidden_1imve_11",walletCoinManageSpinHidden:"_wallet-coin__manage__spin__hidden_1imve_11","wallet-coin__manage__spin__auto":"_wallet-coin__manage__spin__auto_1imve_14",walletCoinManageSpinAuto:"_wallet-coin__manage__spin__auto_1imve_14","wallet-coin__manage__spin__custom":"_wallet-coin__manage__spin__custom_1imve_17",walletCoinManageSpinCustom:"_wallet-coin__manage__spin__custom_1imve_17","wallet-coin__manage__tag__title":"_wallet-coin__manage__tag__title_1imve_21",walletCoinManageTagTitle:"_wallet-coin__manage__tag__title_1imve_21","fade-enter":"_fade-enter_1imve_25",fadeEnter:"_fade-enter_1imve_25","fade-added-enter":"_fade-added-enter_1imve_26",fadeAddedEnter:"_fade-added-enter_1imve_26","fade-enter-active":"_fade-enter-active_1imve_30",fadeEnterActive:"_fade-enter-active_1imve_30","fade-added-enter-active":"_fade-added-enter-active_1imve_31",fadeAddedEnterActive:"_fade-added-enter-active_1imve_31",fade:"_fade_1imve_25","fade-added":"_fade-added_1imve_26",fadeAdded:"_fade-added_1imve_26","fade-leave-active":"_fade-leave-active_1imve_41",fadeLeaveActive:"_fade-leave-active_1imve_41","fade-added-leave-active":"_fade-added-leave-active_1imve_42",fadeAddedLeaveActive:"_fade-added-leave-active_1imve_42"};var so=()=>{let e=(0,Qe.useHistory)(),{customCryptoPath:n,supportCustomCoin:o,customCoinLoading:d,reloadCustomNetworkData:i}=Ke(),{searchListRef:m,search:l,searchCoins:u,onSearch:f,searchLoading:w,searchLoadingMore:S,setSearch:g}=Ye(),p=!!l,C=He(),{unAddedList:y,unAddedListRef:M,unAddedLoading:h,unAddedLoadingMore:F}=Je(C,p),Xe=qe(),ee=C?.length>1,eo=je();(0,s.useEffect)(()=>{i()},[]);let oo=j=>s.default.createElement(Q,{isSearchStatus:p,coin:j,onAction:Xe,deleteAddedCoinAbled:ee}),oe=j=>s.default.createElement(Q,{isSearchStatus:p,coin:j,deleteAddedCoinAbled:ee,onAction:eo}),te=l?w:h,to=_("wallet_manage_crypto_placeholder_search_coin");return s.default.createElement(x.Container,{className:"wallet-coin__manage"},s.default.createElement(ve,{offsetTop:0,style:{zIndex:100}},s.default.createElement(Se,{sticky:!1,closeable:!1,onBack:()=>{e.push(pe)},title:_("wallet_manage_crypto_maintitle_manage_crypto")}),s.default.createElement(x.Box,{className:z["wallet-coin__manage__search"]},s.default.createElement(J.Search,{value:l,size:J.SIZE.md,placeholder:to,onChange:f,cleanable:!1,suffix:s.default.createElement(Be,{search:l,setSearch:g,spinLoading:te})}))),s.default.createElement(x.Spin,{ref:p?m:M,className:(0,Ve.default)(z["wallet-coin__manage__spin"],z["wallet-coin__manage__spin__auto"]),loading:!1,size:P.SIZE.lg},!p&&!!o&&s.default.createElement(x.Spin,{loading:d&&!h},s.default.createElement(A.Cell,{"data-testid":he.COIN_MANAGEMENT_PAGE.CUSTOM_COIN,className:z["wallet-coin__manage__spin__custom"],isLink:!0,to:n,title:_("wallet_manage_crypto_text_custom_crypto")})),p&&s.default.createElement(ze,{itemKey:"coinId",searchCoins:u,renderCoin:oe,spinLoading:te,loadingMore:S}),!p&&s.default.createElement(ke,{list:C,renderCoin:oo}),!p&&s.default.createElement(De,{unAddedList:y,unAddedLoading:h,unAddedLoadingMore:F,renderCoin:oe})))},Tr=s.default.memo(so);export{Tr as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=CoinManage-7YSSAS4X.js.map
