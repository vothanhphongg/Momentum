import"./chunk-IIBBHDCN.js";import{a as io}from"./chunk-GJVXQNL5.js";import{a as ao}from"./chunk-ZLLPZ2MA.js";import"./chunk-JWN7PCMJ.js";import"./chunk-GVFP6PSC.js";import"./chunk-3RHBRLYM.js";import"./chunk-EWRQIXXK.js";import"./chunk-COMRRNGX.js";import"./chunk-4M3K2SWT.js";import"./chunk-BKCZZV5Q.js";import"./chunk-HVMJHKTE.js";import"./chunk-GR4GFB4P.js";import"./chunk-2W6CXXNZ.js";import"./chunk-JUBHPSCA.js";import"./chunk-RRTG4E4G.js";import"./chunk-BARA7AIG.js";import{e as N}from"./chunk-F53ZSIN7.js";import"./chunk-RJWOTEDA.js";import"./chunk-66H5QE4F.js";import"./chunk-GPDETZNQ.js";import"./chunk-M2Q6VTQI.js";import"./chunk-3YGJNBCZ.js";import"./chunk-U7LFLL6J.js";import"./chunk-EVRKRU7I.js";import"./chunk-KQDMYE3F.js";import"./chunk-SQ2BNI3O.js";import"./chunk-PWLZXA4M.js";import"./chunk-BLGJS4OD.js";import"./chunk-IGYAABP7.js";import"./chunk-RYRQK4MH.js";import{a as z}from"./chunk-EHKSYXXT.js";import"./chunk-TOV4UWR3.js";import"./chunk-N7RVZ3T6.js";import"./chunk-ZE645RND.js";import"./chunk-MDL52WR7.js";import"./chunk-PSDESO5W.js";import"./chunk-VOOXQWRX.js";import"./chunk-HOU3VS5H.js";import"./chunk-SQDIO2NL.js";import"./chunk-TISF4HQJ.js";import"./chunk-IP7VSGCS.js";import"./chunk-XYDICNP3.js";import"./chunk-ALLM2Z34.js";import"./chunk-QXPTHK7Q.js";import"./chunk-2LCPVMSO.js";import"./chunk-Q57GWOMY.js";import"./chunk-7C3BTQYU.js";import"./chunk-3XTUMVWB.js";import"./chunk-MGYCOFIC.js";import"./chunk-6THUPAMO.js";import"./chunk-FK5ARFJK.js";import"./chunk-6Y7SZIB7.js";import"./chunk-VVYJA72I.js";import{a as no}from"./chunk-OWWFH26C.js";import{g as to}from"./chunk-MNZIO3NP.js";import"./chunk-HEFTA5OH.js";import"./chunk-S7NLB5XS.js";import{a as so}from"./chunk-UUWJWUOY.js";import"./chunk-2DF43JKM.js";import"./chunk-7CC6X6YX.js";import"./chunk-JAGKSBYF.js";import"./chunk-CR2CPF4X.js";import"./chunk-HKZGONPS.js";import"./chunk-IIAVVYHZ.js";import"./chunk-TSTKPLAO.js";import"./chunk-52XLG23J.js";import"./chunk-H5H4QFZG.js";import"./chunk-EEFD5KZC.js";import"./chunk-73ZHJYCP.js";import"./chunk-3NSLXJYR.js";import"./chunk-ENPNPH37.js";import"./chunk-5QJIR6ZJ.js";import"./chunk-H6SNSZIS.js";import"./chunk-YWECPG37.js";import"./chunk-AXJECT36.js";import"./chunk-5BIOTNBS.js";import"./chunk-R5SMHBLJ.js";import"./chunk-IY4RYRL6.js";import"./chunk-4OAEJJK5.js";import"./chunk-34VLVCKN.js";import"./chunk-J4ZKBKEJ.js";import"./chunk-TFJRUJHH.js";import"./chunk-7NMUCCUG.js";import"./chunk-YF3DWJDS.js";import"./chunk-RH4ISAHA.js";import"./chunk-ECQND2NK.js";import"./chunk-W3L3YTJO.js";import"./chunk-M5NI6HPE.js";import"./chunk-YQHUKBMA.js";import"./chunk-VM2NMLPX.js";import"./chunk-YP7CHBKG.js";import"./chunk-FNXLAYUB.js";import"./chunk-PQK3LXXN.js";import"./chunk-FTRHGHDS.js";import"./chunk-XT3EOPTE.js";import"./chunk-A6Z53EN6.js";import"./chunk-LL63GZNI.js";import"./chunk-M7CL2K7X.js";import"./chunk-W2CTJYFJ.js";import"./chunk-XUKVTAH5.js";import"./chunk-5OJTPISL.js";import"./chunk-7UPVX2FL.js";import"./chunk-BSFXZ46S.js";import"./chunk-ZMCTBWUY.js";import"./chunk-UMGTYP2Z.js";import"./chunk-DTLEDHZZ.js";import"./chunk-5F6JALEN.js";import"./chunk-ROB6CHUJ.js";import"./chunk-I4YMOX2C.js";import"./chunk-ZUQDHFDA.js";import"./chunk-HWGRDY67.js";import"./chunk-WEIFASI6.js";import"./chunk-FIGDH6DV.js";import{b as Z,c as J,d as $}from"./chunk-T2F6X5K7.js";import"./chunk-V7MKKAGW.js";import"./chunk-SKMCCAGC.js";import"./chunk-O3O4HNQA.js";import"./chunk-LR7KSTP2.js";import"./chunk-FWD2CUUI.js";import"./chunk-QCP7SXMX.js";import"./chunk-W23ABSXX.js";import"./chunk-FOF22X4F.js";import"./chunk-P4EMG7RN.js";import"./chunk-BVDJNUOM.js";import"./chunk-7B5UI77E.js";import"./chunk-R6X7EOIE.js";import"./chunk-MKEYCSLA.js";import"./chunk-4EFZXPDV.js";import"./chunk-4KODREVA.js";import"./chunk-6UWGBJGT.js";import"./chunk-G4AVWXHJ.js";import"./chunk-76CRIMII.js";import"./chunk-F7VSWGDW.js";import"./chunk-MKSCYWSV.js";import"./chunk-KLLSVAFY.js";import"./chunk-MBHGLWZJ.js";import"./chunk-QZO7W5WD.js";import"./chunk-AKE54ZCC.js";import"./chunk-EHZWM44P.js";import"./chunk-K6STDTUY.js";import"./chunk-A57OTXBP.js";import"./chunk-YJQGXXOQ.js";import{a as ro}from"./chunk-HTLOGWI7.js";import"./chunk-6SEP5B7P.js";import"./chunk-FHKOH5E6.js";import"./chunk-NTQ2YVDA.js";import"./chunk-KKG4PJ6O.js";import"./chunk-DZLXEJHX.js";import"./chunk-7SRLIN7D.js";import"./chunk-AW5NL3JM.js";import"./chunk-RI2WZ5PA.js";import"./chunk-YIAOHVF5.js";import"./chunk-KBS3PMLQ.js";import"./chunk-7GKX3YKG.js";import"./chunk-7HFBMBFB.js";import"./chunk-TJCPJQIM.js";import"./chunk-ZTAZ2272.js";import{g as eo}from"./chunk-IRMYAC6R.js";import"./chunk-Q76QXAWY.js";import"./chunk-THSNJ5WU.js";import{b as D,d as S}from"./chunk-X3FPMAMT.js";import"./chunk-MRB2XFLQ.js";import"./chunk-65AJJVJY.js";import"./chunk-PDC447BO.js";import"./chunk-JI6FOZGR.js";import"./chunk-JCM7SRK2.js";import"./chunk-PTD7UCOR.js";import"./chunk-Q4YTGP2G.js";import"./chunk-ETJEH7T4.js";import"./chunk-LLZAOPDB.js";import"./chunk-V3IFYKWM.js";import"./chunk-EWTTD4DL.js";import"./chunk-Y2TPPS4H.js";import"./chunk-ITY22AD4.js";import"./chunk-E2JYOUYE.js";import"./chunk-B3JSNQIV.js";import"./chunk-YALUYHLV.js";import"./chunk-I3CPAVOC.js";import"./chunk-ARWSGU73.js";import"./chunk-CZ2ZBAZV.js";import"./chunk-5QMHGZLF.js";import{ec as _}from"./chunk-HPWCPLRR.js";import"./chunk-O6ZBO5JF.js";import"./chunk-TSTPZ3JM.js";import"./chunk-D2LKUI4F.js";import{a as oo}from"./chunk-ON6S2DB7.js";import"./chunk-SZD6WTBQ.js";import"./chunk-ASR4HLU7.js";import"./chunk-ANIUN6US.js";import"./chunk-3DZ7WRLL.js";import"./chunk-DEOJU4Z3.js";import"./chunk-PLIIQKFY.js";import"./chunk-6BXYJZHH.js";import"./chunk-CCEMKRO6.js";import"./chunk-2HSCH6R3.js";import"./chunk-CWNIM6RS.js";import"./chunk-NNAD25BL.js";import"./chunk-XV444F26.js";import{$ as X,f as H}from"./chunk-N2BCRNDB.js";import"./chunk-RTFE54S3.js";import"./chunk-GCQ4H2BA.js";import{a as Y,g as Q}from"./chunk-JGEHAFTO.js";import"./chunk-UVFOW4HH.js";import"./chunk-LNOPECCQ.js";import"./chunk-CB7FOZNP.js";import"./chunk-43VURGIT.js";import{Jc as R,Sc as W,bd as q,rd as bo}from"./chunk-TM67VPZU.js";import"./chunk-VW6OQNWT.js";import{H as w}from"./chunk-PUSMMCUD.js";import{R as V,z as E}from"./chunk-UWJLNJLY.js";import{a as Io}from"./chunk-VRY2ADKE.js";import"./chunk-VWEB6W6G.js";import"./chunk-5U7FO2PW.js";import"./chunk-B7EGZO4E.js";import"./chunk-PDUOSATP.js";import"./chunk-XDY6V34Y.js";import"./chunk-YJFNO57I.js";import"./chunk-DZ6CTC22.js";import{$ as M}from"./chunk-JT3LNHPY.js";import"./chunk-47UWF72W.js";import{b as x}from"./chunk-JWYCKY2V.js";import"./chunk-G2266BV2.js";import"./chunk-L4PAIYPH.js";import"./chunk-UT7LJPKF.js";import"./chunk-AFZ6A2B3.js";import"./chunk-VVPY7ZA7.js";import"./chunk-KUW5VATV.js";import"./chunk-BNAVWOJ2.js";import"./chunk-IG2Q5ALZ.js";import"./chunk-WOMUNWBT.js";import"./chunk-QNGB57GN.js";import"./chunk-OWAOOJKR.js";import"./chunk-NM2PDVBD.js";import{a as j}from"./chunk-7U3DN5ZD.js";import"./chunk-F6PXOVYL.js";import"./chunk-324EPGNQ.js";import"./chunk-5GFHI4AK.js";import"./chunk-QYVQBXDG.js";import"./chunk-7D4PUIEN.js";import"./chunk-IWVM7XL6.js";import"./chunk-7QO4TZYQ.js";import"./chunk-FF4LY6PE.js";import"./chunk-76KCDJDG.js";import"./chunk-YDUDQP2P.js";import"./chunk-PGPFV4JQ.js";import"./chunk-MIBHDVGP.js";import"./chunk-7VFUX7IX.js";import"./chunk-XLF4LAH2.js";import"./chunk-ONKZ57T6.js";import"./chunk-ZC7Q7LCH.js";import{f as a,o as i,q as m}from"./chunk-6KXF36WM.js";i();m();var L=a(x()),Ao=a(_()),Lo=a(oo()),F=a(j());i();m();var P=a(x()),fo=a(_());Io();i();m();var mo=a(x()),U=a(_()),po=a(j());var co=()=>{let s=(0,U.useDispatch)(),e=(0,U.useSelector)(D);return(0,mo.useCallback)((o,n,r)=>{let p=(0,po.cloneDeep)(e||[]),t=p.find(c=>c.approvalAddress===n&&c.chainId===Number(r));if(t){let c=t?.tokens?.map(u=>u.tokenAddress===o?{...u,status:2}:u)||[];t.tokens=c,s(S(p))}},[e])};var Eo=({unapproved:s,unapprovedRequests:e})=>{let{chainId:o,approvalAddress:n,tokenAddress:r,coinId:p,txParams:t}=s,c=eo(),u=Number(o)===Number(195),f=(0,fo.useDispatch)(),C=co(),k=(0,P.useCallback)(()=>{if(e.length===1){f($({type:"approve"}));return}let y=e.filter(d=>!(r===d.tokenAddress&&Number(o)===Number(d.chainId)));f(J({type:"approve",data:y}))},[o,f,r,e]),h=async({preExecInfo:y})=>{let d={},A=y?.approveInfoList?.[0];return A?.spender?.approvalType===X&&(d.approvalAddress=A?.spender?.address),{publishParams:d}},g=async()=>{C(r,n,o),k()},v=()=>{k()},[,I]=to(p,{});return u?P.default.createElement(ao,{walletId:c,txParams:t,onConfirm:g,onCancel:v}):P.default.createElement(N,{walletId:c,chainId:o,coinId:I?.coinId,txParams:t,onBeforePublish:h,onCancel:v,onConfirm:g})},lo=(0,P.memo)(Eo);i();m();var G=a(x()),Po=a(oo());V();i();m();var uo=a(x()),B=a(_()),go=a(j());var ho=()=>{let s=(0,B.useDispatch)(),e=(0,B.useSelector)(D);return(0,uo.useCallback)(o=>{let n=(0,go.cloneDeep)(e||[]),r=n.find(p=>p.type===1);if(r?.chainList?.length){let p=(r?.chainList||[]).map(t=>Number(t.chainIndex)===Number(o)?{...t,status:5}:t);r.chainList=p,s(S(n))}},[e])};bo();W();i();m();var b=a(x());V();W();function wo({disabled:s,localType:e,inputData:o,upgradeAddress:n}){let r=R({localType:e}),[p,t]=(0,b.useState)(!1),[c,u]=(0,b.useState)(null),f=r?.realChainIdHex;return(0,b.useEffect)(()=>{if(s){t(!1);return}t(!0),(async()=>{try{let{getRandomPrivateKey:C,getNewAddress:k}=await Y(),h=await C(r?.coinType),{address:g}=await k(r?.coinType,{privateKey:h}),v={address:g,tokenAddress:g,value:"0",inputData:o,authorizationList:[]},I={privateKey:h,data:{chainId:f,address:n,nonce:z(1)}},{EthWallet:y}=await Q(),A=await new y().signAuthorizationListItemForRPC(I);v.authorizationList=[A],u(v),t(!1)}catch{w.error({title:E("wallet_extension_general_error_extension_code_error")})}})()},[s,o,f,n,r?.coinType]),{gasLimitParams:c,loading:p}}var vo=wo;i();m();var yo=a(x());function Ro({chainId:s,fromAddress:e,inputData:o,upgradeAddress:n}){return(0,yo.useMemo)(()=>({from:e,to:e,value:"0x0",data:o,authorizationList:[{chainId:s,address:n}]}),[e,o,s,n])}var xo=Ro;i();m();var To={loading:"_loading_6vxdb_1"};function Do({walletId:s,baseCoinId:e,upgradeAddress:o,inputData:n,needConfirmCallback:r,isUpgrade:p,chainIndex:t}){let c=(0,Po.useHistory)(),u=ho(),{coin:f}=no(e),C=ro(f.localType,s),h=R({localType:f.localType})?.realChainIdHex,{gasLimitParams:g}=vo({localType:f.localType,inputData:n,upgradeAddress:o}),v=xo({chainId:h,upgradeAddress:o,inputData:n,fromAddress:C}),I=l=>{let{authorizationList:K,nonce:O,...ko}=l;return{...ko,nonce:O,authorizationList:[{chainId:h,address:o,nonce:z(O+1),fromAddress:C,walletId:s,localType:f.localType}]}},y=()=>{let l={txType:p?H.UPGRADE_7702:H.REVOKE_7702,txSource:q.NORMAL};return p&&(l.approvalAddress=o),{publishParams:l}},d=()=>{c.goBack()},A=async({error:l})=>{if(l){let K=l.msg||l.message||l.originalError?.message||E("wallet_extension_general_error_extension_code_error");w.error({title:K})}else r&&u(t),d()};return g?G.default.createElement(N,{chainId:f.chainId,walletId:s,interactAddress:p?o:!1,gasLimitParams:g,txParams:v,showDappInfo:!1,coinId:e,onBeforeSign:I,onBeforePublish:y,onConfirm:A,onCancel:d}):G.default.createElement("div",{className:To.loading},G.default.createElement(M.Circle,{size:M.SIZE.lg}))}var Co=Do;var So=()=>{let e=so().get("type"),o=(0,Ao.useSelector)(Z),n=(0,Lo.useHistory)(),r=o[e],t={upgrade7702:Co,approve:lo}[e]||null,c=(0,F.isEmpty)(r)||!t;return(0,L.useEffect)(()=>{c&&n.goBack()},[c]),(0,F.isEmpty)(r)?null:L.default.createElement(io,{unapprovedRequests:r,ConfirmComp:t})},Ke=(0,L.memo)(So);export{Ke as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=TxConfirmEntry-5LXTFXQF.js.map
