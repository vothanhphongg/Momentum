import{c as Xt}from"./chunk-YQHUKBMA.js";import{Oa as or}from"./chunk-FTRHGHDS.js";import{f as er,g as rr,l as M,m as z}from"./chunk-A6Z53EN6.js";import{b as _r}from"./chunk-LL63GZNI.js";import{a as hr}from"./chunk-M7CL2K7X.js";import{a as pr,b as zt,c as lr,d as dr,e as St,f as ur,g as mr,h as ge}from"./chunk-W2CTJYFJ.js";import{a as ir,c as y,e as sr,g as cr}from"./chunk-XUKVTAH5.js";import{a as jt,b as qt}from"./chunk-5OJTPISL.js";import{a as ar,b as he,c as nr,d as _e}from"./chunk-BSFXZ46S.js";import{a as X,b as Y}from"./chunk-ZMCTBWUY.js";import{a as tr}from"./chunk-TSTPZ3JM.js";import{c as ft,d as so}from"./chunk-VW6OQNWT.js";import{A as Ct,H as w,b as at,o as Vt,p as me,q as yt,u as Ze}from"./chunk-PUSMMCUD.js";import{B as Qe,D as Je,G as K,R as V,a as pt,c as de,d as lt,h as Ye,i as ue,j as gt,y as et}from"./chunk-UWJLNJLY.js";import{U as Xe,d as qe,ra as io}from"./chunk-XDY6V34Y.js";import{W as xt,ea as nt}from"./chunk-JT3LNHPY.js";import{b as N}from"./chunk-JWYCKY2V.js";import{a as co}from"./chunk-NM2PDVBD.js";import{c as no,d as je,f as v,h as R,o as p,q as l}from"./chunk-6KXF36WM.js";var rt=no((Lp,oe)=>{p();l();(function(){"use strict";var o={}.hasOwnProperty;function t(){for(var a="",i=0;i<arguments.length;i++){var s=arguments[i];s&&(a=r(a,e(s)))}return a}function e(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return t.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var i="";for(var s in a)o.call(a,s)&&a[s]&&(i=r(i,s));return i}function r(a,i){return i?a?a+" "+i:a+i:a}typeof oe<"u"&&oe.exports?(t.default=t,oe.exports=t):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return t}):window.classNames=t})()});p();l();p();l();p();l();p();l();var Q=v(N());p();l();var Qt=v(N());V();var Yt={fetchConfig:{site:"okx",project:"okx_web_metax_defi"}};function fe({children:o,isSelfProject:t=!1}){return t?Qt.default.createElement(Qt.default.Fragment,null,o):Qt.default.createElement(Je,{normalCsr:!0,fetchConfig:Yt.fetchConfig,customRender:(e,r)=>r?o:""},o)}p();l();V();var _=(...o)=>Qe({partName:Yt.fetchConfig.project})(...o);p();l();p();l();p();l();var Zt=v(tr());p();l();var Rt=v(co());p();l();var lo=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],gr={sha256:1};function fr(o){if(o&&!gr[o]&&!gr[o.toLowerCase()])throw new Error("Digest method not supported");return new xe}var xe=class{constructor(){this.A=1779033703,this.B=-1150833019,this.C=1013904242,this.D=-1521486534,this.E=1359893119,this.F=-1694144372,this.G=528734635,this.H=1541459225,this._size=0,this._sp=0,(!Jt||Lt>=8e3)&&(Jt=new ArrayBuffer(8e3),Lt=0),this._byte=new Uint8Array(Jt,Lt,80),this._word=new Int32Array(Jt,Lt,20),Lt+=80}update(t){if(typeof t=="string")return this._utf8(t);if(t==null)throw new TypeError("Invalid type: "+typeof t);let e=t.byteOffset,r=t.byteLength,a=r/64|0,i=0;if(a&&!(e&3)&&!(this._size%64)){let c=new Int32Array(t.buffer,e,a*16);for(;a--;)this._int32(c,i>>2),i+=64;this._size+=i}if(t.BYTES_PER_ELEMENT!==1&&t.buffer){let c=new Uint8Array(t.buffer,e+i,r-i);return this._uint8(c)}return i===r?this:this._uint8(t,i)}_uint8(t,e){let{_byte:r,_word:a}=this,i=t.length;for(e=e|0;e<i;){let s=this._size%64,c=s;for(;e<i&&c<64;)r[c++]=t[e++];c>=64&&this._int32(a),this._size+=c-s}return this}_utf8(t){let{_byte:e,_word:r}=this,a=t.length,i=this._sp;for(let s=0;s<a;){let c=this._size%64,d=c;for(;s<a&&d<64;){let u=t.charCodeAt(s++)|0;u<128?e[d++]=u:u<2048?(e[d++]=192|u>>>6,e[d++]=128|u&63):u<55296||u>57343?(e[d++]=224|u>>>12,e[d++]=128|u>>>6&63,e[d++]=128|u&63):i?(u=((i&1023)<<10)+(u&1023)+65536,e[d++]=240|u>>>18,e[d++]=128|u>>>12&63,e[d++]=128|u>>>6&63,e[d++]=128|u&63,i=0):i=u}d>=64&&(this._int32(r),r[0]=r[16]),this._size+=d-c}return this._sp=i,this}_int32(t,e){let{A:r,B:a,C:i,D:s,E:c,F:d,G:u,H:g}=this,h=0;for(e=e|0;h<16;)dt[h++]=j(t[e++]);for(h=16;h<64;h++)dt[h]=Co(dt[h-2])+dt[h-7]+xo(dt[h-15])+dt[h-16]|0;for(h=0;h<64;h++){let E=g+fo(c)+ho(c,d,u)+lo[h]+dt[h]|0,I=go(r)+_o(r,a,i)|0;g=u,u=d,d=c,c=s+E|0,s=i,i=a,a=r,r=E+I|0}this.A=r+this.A|0,this.B=a+this.B|0,this.C=i+this.C|0,this.D=s+this.D|0,this.E=c+this.E|0,this.F=d+this.F|0,this.G=u+this.G|0,this.H=g+this.H|0}digest(t){let{_byte:e,_word:r}=this,a=this._size%64|0;for(e[a++]=128;a&3;)e[a++]=0;if(a>>=2,a>14){for(;a<16;)r[a++]=0;a=0,this._int32(r)}for(;a<16;)r[a++]=0;let i=this._size*8,s=(i&4294967295)>>>0,c=(i-s)/4294967296;return c&&(r[14]=j(c)),s&&(r[15]=j(s)),this._int32(r),t==="hex"?this._hex():this._bin()}_hex(){let{A:t,B:e,C:r,D:a,E:i,F:s,G:c,H:d}=this;return it(t)+it(e)+it(r)+it(a)+it(i)+it(s)+it(c)+it(d)}_bin(){let{A:t,B:e,C:r,D:a,E:i,F:s,G:c,H:d,_byte:u,_word:g}=this;return g[0]=j(t),g[1]=j(e),g[2]=j(r),g[3]=j(a),g[4]=j(i),g[5]=j(s),g[6]=j(c),g[7]=j(d),u.slice(0,32)}},dt=new Int32Array(64),Jt,Lt=0,it=o=>(o+4294967296).toString(16).substr(-8),uo=o=>o<<24&4278190080|o<<8&16711680|o>>8&65280|o>>24&255,mo=o=>o,j=Eo()?mo:uo,ho=(o,t,e)=>e^o&(t^e),_o=(o,t,e)=>o&t|e&(o|t),go=o=>(o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10),fo=o=>(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),xo=o=>(o>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,Co=o=>(o>>>17|o<<15)^(o>>>19|o<<13)^o>>>10;function Eo(){return new Uint8Array(new Uint16Array([65279]).buffer)[0]===254}var xr=o=>fr().update(o).digest(),ko=o=>{let t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";if(!o||typeof o!="string")throw new Error(`Expected base58 string but got \u201C${o}\u201D`);if(o.match(/[IOl0]/gmu))throw new Error(`Invalid base58 character \u201C${o.match(/[IOl0]/gmu)}\u201D`);let e=o.match(/^1+/gmu),r=e?e[0].length:0,a=(o.length-r)*(Math.log(58)/Math.log(256))+1>>>0;return new Uint8Array([...new Uint8Array(r),...o.match(/.{1}/gmu).map(i=>t.indexOf(i)).reduce((i,s)=>(i=i.map(c=>{let d=c*58+s;return s=d>>8,d}),i),new Uint8Array(a)).reverse().filter((i=>s=>i=i||s)(!1))])},ut={mainnet:"mainnet",testnet:"testnet",regtest:"regtest"},mt={p2pkh:"p2pkh",p2sh:"p2sh",p2wpkh:"p2wpkh",p2wsh:"p2wsh",p2tr:"p2tr"},Cr={0:{type:mt.p2pkh,network:ut.mainnet},111:{type:mt.p2pkh,network:ut.testnet},5:{type:mt.p2sh,network:ut.mainnet},196:{type:mt.p2sh,network:ut.testnet}},To=o=>{let t;try{o.startsWith("bc1p")||o.startsWith("tb1p")||o.startsWith("bcrt1p")?t=Rt.bech32m.decode(o):t=Rt.bech32.decode(o)}catch{throw new Error("Invalid address")}let r={bc:ut.mainnet,tb:ut.testnet,bcrt:ut.regtest}[t.prefix];if(r===void 0)throw new Error("Invalid address");let a=t.words[0];if(a<0||a>16)throw new Error("Invalid address");let i=Rt.bech32.fromWords(t.words.slice(1)),s;return i.length===20?s=mt.p2wpkh:a===1?s=mt.p2tr:s=mt.p2wsh,{bech32:!0,network:r,address:o,type:s}},vo=o=>{let t,e=o.substr(0,2).toLowerCase();if(e==="bc"||e==="tb")return To(o);try{t=ko(o)}catch{throw new Error("Invalid address")}let r=t.length;if(r!==25)throw new Error("Invalid address");let a=t[0],i=t.slice(r-4,r),s=t.slice(0,r-4),c=xr(xr(s)).slice(0,4);if(i.some((g,h)=>g!==c[h]))throw new Error("Invalid address");if(!Object.keys(Cr).map(Number).includes(a))throw new Error("Invalid address");return{...Cr[a],address:o,bech32:!1}},Er=(o,t)=>{try{let e=vo(o);return t?t===e.network:!0}catch{return!1}};p();l();var kr=v(tr()),Ce=async({abi:o,addr:t,ownerAddr:e,operatorAddr:r,amount:a,web3:i})=>new Promise(s=>{new i.eth.Contract(o,t).methods.allowance(e,r).call((d,u)=>{if(a){let g=i.utils.BN,h=new g(u),E=new g(a);h.gte(E)?(console.log("commApproved, the amount is greater than the consumption amount, pass!"),s(!0)):s(!1)}else s(u==="0"||!u?0:u)})}),Tr=async({addr:o,web3:t})=>new Promise(e=>{new t.eth.Contract(kr.default,o).methods.decimals().call((a,i)=>{e(i||0)})});p();l();async function Ao(o){switch(o){case y.METAMASK:return(await import("./MetaMaskAdapter-XS3TCAZX.js")).MetaMaskAdapter;case y.PHANTOM:return(await import("./PhantomAdapter-5A2HL3EO.js")).PhantomAdapter;case y.WALLET_CONNECT:return(await import("./WalletConnectAdapter-QBBC72FL.js")).WalletConnectAdapter;case y.OKX_WALLET:return(await import("./OkxWalletAdapter-EZ5VB3VN.js")).OkxWalletAdapter;case y.KEPLR:return(await import("./KeplrAdapter-KJJFUT4U.js")).KeplrAdapter;case y.LEDGER:return(await import("./LedgerAdapter-WJW4JQHZ.js")).LedgerAdapter;case y.UNISAT:return(await import("./UnisatAdapter-TNGFDOFU.js")).UnisatAdapter;case y.XVERSE:return(await import("./XverseAdapter-H55SAV44.js")).XverseAdapter;case y.PHANTOM_BTC:return(await import("./PhantomBtcAdapter-6FC36XML.js")).PhantomBtcAdapter;case y.OKX_CONNECT:return(await import("./OkxConnectAdapter-BVPVPWJV.js")).OkxConnectAdapter;default:throw new Error(`Unsupported walletType: ${o}`)}}async function Ee({okxWalletSupportChain:o}){let t=St();if(t){let e=await Ao(t);if([y.OKX_WALLET,y.WALLET_CONNECT,y.OKX_CONNECT].includes(t)){let r=new e({supportChain:o});return await r.initPromise,r}return new e}throw new Error("No supported wallet found")}function Io(o,t){let e=new Promise(r=>{let a=setTimeout(()=>{clearTimeout(a),r("Timeout")},o)});return Promise.race([t,e])}var ke=class{constructor(){this.adapter=null,this.adapterFlag=!1,this.okxWalletSupportChain=[],this.initPromise=this.init(),this.walletChangeCallbacks=new Map,this.chainChangeCallbacks=new Map,this.dashboardChangeCallbacks=new Map,this.nextWalletChangeSubId=1,this.nextChainChangeSubId=1,this.nextDashboardChangeSubId=1,this.adapterReadyPromise=new Promise(t=>{this.resolveAdapterReady=t})}resetAdapterPromise(){this.adapterReadyPromise=new Promise(t=>{this.resolveAdapterReady=t})}onWalletChange(t){if(X())return;let e=this.nextWalletChangeSubId++;return jt({subscriptionId:e,callbacks:this.walletChangeCallbacks,callback:t})}offWalletChange(t){X()||qt({subscriptionId:t,callbacks:this.walletChangeCallbacks})}onDashboardChange(t){if(X())return;let e=this.nextDashboardChangeSubId++;return jt({subscriptionId:e,callbacks:this.dashboardChangeCallbacks,callback:t})}offDashboardChange(t){X()||qt({subscriptionId:t,callbacks:this.dashboardChangeCallbacks})}async onChainChange(t){if(X())return;let e=async()=>{let a=await this.getChainId(),i=`0x${parseInt(a).toString(16)}`;t&&t(i)};this.adapter?.onChainChange?this.adapter?.onChainChange(e):window?.ethereum?.on?.("chainChanged",e);let r=this.nextChainChangeSubId++;return jt({subscriptionId:r,callbacks:this.chainChangeCallbacks,callback:e})}async offChainChange(t){if(X())return;let e=()=>{};for(let[a,i]of this.chainChangeCallbacks.entries())if(i===t){e=a;break}qt({subscriptionId:t,callbacks:this.chainChangeCallbacks}),window?.okxwallet?.removeListener?.("chainChanged",e),window?.ethereum?.removeListener?.("chainChanged",e),(await lr())?.ethereum?.removeListener?.("chainChanged",e)}get chainTypeEnum(){return he}get chainIdEnum(){return ar}get chainTypeKeyEnum(){return nr}get walletTypeEnum(){return y}get walletActionTypeEnum(){return cr}get chainType(){return this.adapter?.chainType}get btcAddressTypeEnum(){return ir}get isConnected(){return!!St()}get isWalletReady(){return!!this.adapter}get Web3(){return typeof Web3>"u"?void 0:Web3}async walletDataChangeCallBack(t,e){console.log("walletDataChangeCallBack ---> start");let{actionType:r}=t;if(["add_connected_wallet","init_wallet"].includes(r)){this.adapterFlag||e.adapter||(e.adapter=await Ee({okxWalletSupportChain:e.okxWalletSupportChain}),e.resolveAdapterReady(),console.log("walletDataChangeCallBack success ======>"));for(let a of this.walletChangeCallbacks.keys())a(t)}else if(r==="log_out_wallet"){e.adapter=null,e.resolveAdapterReady();let a=setTimeout(()=>{e.resetAdapterPromise(),clearTimeout(a)},2005);for(let i of this.walletChangeCallbacks.keys())i(t)}for(let a of this.dashboardChangeCallbacks.keys())a(t)}async init(){try{if(X())return;let{onchain:t={}}=Y,{onWalletDataChange:e}=t,r=this;e&&e(a=>{this.walletDataChangeCallBack(a,r)})}catch(t){console.log(t)}}async createAdapter({isForce:t}={}){(t||!this.adapter)&&(this.adapter=await Ee({okxWalletSupportChain:this.okxWalletSupportChain}),this.resolveAdapterReady(),this.adapterFlag=!1,console.log("createAdapter walletDataChangeCallBack success ======>"))}setOkxWalletSupportChain(t){this.okxWalletSupportChain=t}connect(t){try{if(X())return;let{successCallback:e}=t||{},a={...t,successCallback:async i=>{this.adapterFlag=!0,await this.createAdapter(),e&&e(i)}};Y?.onchain?.getWalletWidget().then(i=>{i&&i.connect(a)})}catch(e){throw console.error("Error connecting wallet:",e),e}}disconnect(){X()||Y?.onchain?.setWalletLogout()}async getWeb3(t){if(t)return mr(t);if(this.adapter)return this.adapter.getWeb3?.()}async getWalletAdapter(){if(!this.adapter)throw new Error("No wallet connected");return this.adapter}async getAccount(t){return await this.adapter?.getAccount(t)||""}async getChainId(){if(!this.adapter)throw new Error("No wallet connected");return await this.adapter.getChainId()}async signData({account:t,signData:e,nonce:r,...a}){if(!this.adapter)throw new Error("No wallet connected");return await this.adapter.signMessage({message:e,account:t,nonce:r,...a})}async signMessage({message:t,nonce:e,...r}){if(!this.adapter)throw new Error("No wallet connected");return await this.adapter.signMessage({message:t,nonce:e,...r})}async signTypedData({message:t,...e}){if(!this.adapter)throw new Error("No wallet connected");return await this.adapter?.signTypedData({message:t,...e})}async sendTransaction(t,e,r,a){if(!this.adapter)throw new Error("No wallet connected");return await this.adapter.sendTransaction({payload:t,cb:e,extraParams:r,externalProvider:a})}async switchNetwork({chain:t,chainType:e,switchFaildCallback:r=()=>{},...a}){let i=ge(t);if(!this.adapter)throw new Error("No wallet connected");try{this.adapter.setChainType&&await this.adapter.setChainType({chainId:i,chainType:e});let s=await this.adapter.switchNetwork({chain:i,chainType:e,...a});return s||r(t),s}catch(s){return console.log("switchNetwork error: ",s),r(t),!1}}async commAdapterLinkAndNet({chain:t,chainType:e,connectOptions:r,succCallback:a,closeCallback:i,switchFaildCallback:s,...c}){let d=ge(t);try{return new Promise(async u=>{let g=()=>{this.connect({...r,successCallback:async()=>{a&&a();let h=await this.switchNetwork({...c,chain:d,chainType:e,switchFaildCallback:s});u(h)},closeCallback:i})};if(this.adapter)if(this.adapter.setChainType&&await this.adapter.setChainType({chainId:d,chainType:e}),await this.isSupportChainType({chainId:d})){let E=await this.switchNetwork({...c,chain:d,chainType:e,switchFaildCallback:s});u(E)}else s&&s(t),u(!1);else g()})}catch{return s&&s(d),Promise.resolve(!1)}}async checkLinKAndNet(t,e,r){return this.commAdapterLinkAndNet({chain:t,switchFaildCallback:e,...r})}async getConnectedConfig(){return pr()}async commAdapterChain({chain:t,switchFaildCallback:e,...r}){return this.switchNetwork({chain:t,switchFaildCallback:e,...r})}async commAdaterChain({chain:t,switchFaildCallback:e,...r}){return this.switchNetwork({chain:t,switchFaildCallback:e,...r})}async checkWalletNet(t,e,...r){return this.switchNetwork({chain:t,switchFaildCallback:e,...r})}async getWalletAccount({isNeedAll:t,chainId:e,...r}={}){return await this.getAccount({isNeedAll:t,chainId:e,...r})}async getProviderData(){return zt()}async setChainType({chainType:t,chainId:e}){if(this.adapter?.setChainType)return await this.adapter.setChainType({chainType:t,chainId:e})}async isSupportChainType({chainId:t}){let e=ur(t),r=!0,a=await zt(),{walletType:i}=a;return[y.OKX_WALLET,y.OKX_CONNECT].includes(i)&&this.adapter?.getAccountByChainId?r=!!await this.adapter.getAccountByChainId({chainId:t}):i===y.LEDGER?r=!0:i!==y.NO_WALLET?(sr[i]||[]).includes(e)||(r=!1):i===y.NO_WALLET&&(r=!1),r}getChainTypeByChainId(t){let e=he.EVM;return Object.keys(_e).forEach(r=>{_e[r].includes(t)&&(e=Number(r))}),e}async getAllChainTypeInfoList(){return this.adapter?.getAllChainTypeInfoList?.()||[]}async getWalletType(){let t=await zt(),{walletType:e}=t;return e}async commApproved(t,e,r,a,i,s,c){return this.commApproveToken({abi:t,addr:e,operatorAddr:r,amount:a,cb:i,maxFeePerGas:s,maxPriorityFeePerGas:c})}async commApproveToken({abi:t,addr:e,operatorAddr:r,amount:a,cb:i,maxFeePerGas:s,maxPriorityFeePerGas:c,extParams:d}){let u=t||Zt.default,g=await this.getAccount(),h=await this.getWeb3();if(await Ce({abi:u,addr:e,ownerAddr:g,operatorAddr:r,amount:a,web3:h}))return!0;let I=await this.approvedToken({abi:u,addr:e,operatorAddr:r,cb:i,maxFeePerGas:s,maxPriorityFeePerGas:c,extParams:d});return I&&console.log("commApproved, Unlimited authorization, pass!"),I}async approvedToken({abi:t,addr:e,operatorAddr:r,cb:a,maxFeePerGas:i,maxPriorityFeePerGas:s,extParams:c}){try{let d=t||Zt.default,u=await this.getWeb3(),g=new u.eth.Contract(d,e),E={from:await this.getAccount(),to:e,data:g.methods.approve(r,hr).encodeABI(),extParams:{...c,canSupplyGas:!0}};return i&&s&&(E.maxFeePerGas=i,E.maxPriorityFeePerGas=s),await this.sendTransaction(E,a),console.log(`Approved Token success to ${r}`),!0}catch(d){return console.log("Approved Token error",d),!1}}async isApproved({abi:t,addr:e,ownerAddr:r,operatorAddr:a,amount:i}){let s=t||Zt.default,c=await this.getWeb3();return!!await Ce({abi:s,addr:e,ownerAddr:r,operatorAddr:a,amount:i,web3:c})}async getContract(t,e){let r=await this.getWeb3();return new r.eth.Contract(t,e)}async getDecimals(t){let e=await this.getWeb3();return Tr({addr:t,web3:e})}async getEthBalance(t){let e=await this.getWeb3();return new Promise(r=>{e.eth.getBalance(t,(a,i)=>{let s=e.utils.fromWei(i,"ether");r(s)})})}async getWalletProvider(){return dr()}async setSupportWalletOptions(t){if(Y.onchain){let e=Y.onchain.supportWalletOptions;Y.onchain.supportWalletOptions={...e,...t}}}async getDeposit({currency:t,network:e,address:r,prefix:a,contract:i,onClose:s,...c}){(await(await Y?.onchain?.getWalletWidget?.())?.getDeposit?.())?.V1({currency:t,network:e,address:r,prefix:a,contract:i,onClose:s,...c})}async getWalletStorage(){return await(await Y?.onchain?.getWalletWidget?.())?.getWalletStorage()}async getWalletWidget(){return await Y?.onchain?.getWalletWidget?.()}async okxAppSendCustomTransaction(t,e){if(!this.adapter)throw new Error("No wallet connected");return await this.adapter.sendCustomTransaction?.(t,e)}async okxAppCancelApprove({abi:t,addr:e,operatorAddr:r,cb:a,options:i}){if(!this.adapter)throw new Error("No wallet connected");return await this.adapter.okxAppCancelApprove?.({abi:t,addr:e,operatorAddr:r,cb:a,options:i})}isBtcAddress(t){return Er(t)}checkSolanaAccountRentExemption({accountAddress:t}){return _r({accountAddress:t})}},wo=new ke,yo=new Proxy(wo,{get(o,t,e){let r=Reflect.get(o,t,e);return["getChainTypeByChainId","Web3","onWalletChange","offWalletChange","onDashboardChange","offDashboardChange","setOkxWalletSupportChain","setSupportWalletOptions","connect","disconnect","getWalletStorage","createAdapter","isBtcAddress","checkSolanaAccountRentExemption"].includes(t)?r:typeof r=="function"?async function(...i){return await o.initPromise,St()&&await Io(2e3,o.adapterReadyPromise),r.apply(o,i)}:r}}),Ot=yo;p();l();var n="",$a=`${n}/priapi/v1/dx/trade/multi/orders`,Ba=`${n}/priapi/v1/dx/trade/multi/orders/details`,Fa=`${n}/priapi/v1/dx/trade/multi/post/pending/orders`,Ha=`${n}/priapi/v1/dx/trade/limit-order/orders`,Ka=`${n}/priapi/v1/dx/trade/limit-order/order/detail`,Va=`${n}/priapi/v1/dx/market/kLine/infos`,za=`${n}/priapi/v1/dx/trade/multi/allTokens`,ja=`${n}/priapi/v1/dx/trade/bridge/crossAbility/allTokens`;var qa=`${n}/priapi/v1/dx/trade/multi/v3/quote`,Xa=`${n}/priapi/v1/dx/trade/multi/outer/v3/quote/snap-mode`,Ya=`${n}/priapi/v1/dx/trade/multi/v3/reverse/quote`,Qa=`${n}/priapi/v1/dx/trade/multi/v3/quote/snap-mode`,Ja=`${n}/priapi/v1/dx/trade/bridge/v3/quote`,Za=`${n}/priapi/v1/dx/trade/multi/v3/quote/aggregateQuote`,tn=`${n}/priapi/v1/dx/trade/multi/defiPlatform-list`,en=`${n}/priapi/v1/dx/trade/multi/v2/saveOrder`,rn=`${n}/priapi/v1/dx/trade/multi/outer/saveOrder`,on=`${n}/priapi/v1/dx/trade/multi/updateOrder`,an=`${n}/priapi/v1/dx/trade/bridge/supportChain/list`,nn=`${n}/priapi/v1/dx/public/swap/chain/list`,sn=`${n}/priapi/v1/dx/trade/bridge/chain/list`,cn=`${n}/priapi/v1/dx/trade/limit-order/chain/list`,pn=`${n}/priapi/v1/dx/trade/multi/order/checkRepeat`,ln=`${n}/priapi/v1/dx/trade/bridge/common/check`,dn=`${n}/priapi/v1/dx/trade/multi/v2/checkAndGetTokenInfo`,un=`${n}/priapi/v1/dx/trade/crossChain/toastTokenCheck`,mn=`${n}/priapi/v1/dx/trade/bridge/crossTokenCheck`,hn=`${n}/priapi/v1/dx/trade/multi/batchGetTokenApproveInfo`,_n=`${n}/priapi/v1/dx/trade/multi/approveData`,gn=`${n}/priapi/v1/dx/trade/multi/v2/saveApprove`,fn=`${n}/priapi/v1/dx/trade/bridge/gasDropConfig`,xn=`${n}/priapi/v1/dx/trade/multi/allNetWorkTokens`,Cn=`${n}/priapi/v1/dx/trade/multi/swap/allNetWorkTokens`,En=`${n}/priapi/v1/dx/trade/bridge/crossAbility/allTokens`,kn=`${n}/priapi/v1/dx/trade/multi/addOrCancelCollectionToken`,Tn=`${n}/priapi/v1/dx/market/collectionTokens`,vn=`${n}/priapi/v1/dx/trade/multi/single/chain/collectionGroups`,An=`${n}/priapi/v1/dx/trade/bridge/collectionGroup/group/list`,In=`${n}/priapi/v1/dx/trade/multi/single/chain/collectionTokens`,wn=`${n}/priapi/v1/dx/trade/bridge/crossAbility/collectionTokens`,yn=`${n}/priapi/v1/dx/trade/multi/tokens/v2/search`,Sn=`${n}/priapi/v1/dx/trade/multi/tokens/single/search`,Ln=`${n}/priapi/v1/dx/trade/bridge/crossAbility/tokens/search`,Rn=`${n}/priapi/v1/dx/market/coin/detail`,On=`${n}/priapi/v1/dx/trade/activity/invite/banner/list`,bn=`${n}/priapi/v1/dx/trade/multi/tokens/tx/status`,Dn=`${n}/priapi/v1/dx/trade/multi/slippage/configs`,Nn=`${n}/priapi/v1/dx/trade/multi/callData`,Pn=`${n}/priapi/v1/dx/trade/multi/v3/quote/callData`,Gn=`${n}/priapi/v1/dx/trade/multi/redeem/callData`,Mn=`${n}/priapi/v1/dx/trade/limit-order/exChangeRate`,Un=`${n}/priapi/v1/dx/trade/limit-order/calOrder`,Wn=`${n}/priapi/v1/dx/trade/limit-order/expireTimeConfig`,$n=`${n}/priapi/v1/dx/trade/limit-order/calldata`,Bn=`${n}/priapi/v1/dx/trade/limit-order/create`,Fn=`${n}/priapi/v1/dx/trade/limit-order/cancel`,Hn=`${n}/priapi/v1/dx/trade/multi/cancel-order`,Kn=`${n}/priapi/v1/dx/trade/multi/liquidityList`,Vn=`${n}/v2/support/helpCenter/simpleFaq`,zn=`${n}/priapi/v1/dx/trade/multi/order/checkContinue`,jn=`${n}/priapi/v1/dx/trade/bridge/queryBlackList`,qn=`${n}/priapi/v1/dx/trade/single/toastTokenCheck`,Xn=`${n}/priapi/v1/dx/trade/intent/quote`,Yn=`${n}/priapi/v1/dx/trade/intent/quote/callData`,Qn=`${n}/priapi/v1/dx/trade/intent/createOrder`,Jn=`${n}/priapi/v1/dx/trade/limit-order/recommend`,Zn=`${n}/priapi/v1/dx/trade/multi/business/chain/list`,ti=`${n}/priapi/v1/dx/trade/bridge/intent/quote/calldata`,ei=`${n}/priapi/v1/dx/trade/bridge/intent/orderSubmit`,ri=`${n}/priapi/v1/dx/public/swap/chain/dapp-list`,oi=`${n}/priapi/v1/dx/trade/bridge/dapp-list`,ai=`${n}/priapi/v1/dx/public/swap/chain/ca-dapp-list`,ni=`${n}/priapi/v1/dx/market/v2/search`,ii=`${n}/priapi/v1/dx/market/v2/ranking/hot-search`,si=`${n}/priapi/v1/dx/market/batch/addOrCancelCollectionToken`,ci=`${n}/priapi/v1/dx/market/coin/check`,pi=`${n}/priapi/v1/dx/market/v2/market/check`,li=`${n}/priapi/v1/dx/market/v2/ranking/base-info`,di=`${n}/priapi/v1/dx/market/v2/ranking/content`,ui=`${n}/priapi/v1/dx/market/v2/highlight/ranking`,mi=`${n}/priapi/v1/dx/market/v2/collection/list`,hi=`${n}/priapi/v1/dx/market/v2/collection/top`,_i=`${n}/priapi/v1/dx/market/v2/smartmoney/ranking/content`,gi=`${n}/priapi/v1/dx/market/v2/advanced/ranking/config/new`,fi=`${n}/priapi/v1/dx/market/v2/chain/list`,xi=`${n}/priapi/v1/dx/market/v2/advanced/ranking/content`,Ci=`${n}/priapi/v1/dx/market/v2/advanced/ranking/categories`,Ei=`${n}/priapi/v1/dx/trade/limit-order/toastCheck`,ki=`${n}/priapi/v1/dx/market/toastTokenCheck`,Ti=`${n}/priapi/v1/dx/market/pool/list`,vi=`${n}/priapi/v1/dx/market/vote`,Ai=`${n}/priapi/v1/dx/market/vote/like`,Ii=`${n}/priapi/v1/dx/market/vote/dislike`,wi=`${n}/priapi/v1/dx/market/v2/latest/info`,yi=`${n}/priapi/v1/dx/trade/multi/support/swap`,Si=`${n}/priapi/v1/dx/market/v2/report/valid-search`,Li=`${n}/priapi/v1/dx/market/v2/token/overview`,Ri=`${n}/priapi/v1/dx/market/v2/token/share/info`,Oi=`${n}/priapi/v1/dx/market/v2/token/activity`,bi=`${n}/priapi/v1/dx/market/v2/trading-history/info`,Di=`${n}/priapi/v1/dx/market/v2/trading-history/filter-list`,Ni=`${n}/priapi/v1/dx/market/v2/my-position/latest-pnl`,Pi=`${n}/priapi/v1/dx/market/v2/my-position/recent-transactions`,Gi=`${n}/priapi/v1/dx/market/v2/pnl/share/info`,Mi=`${n}/priapi/v1/dx/market/v2/pnl/share/wallet-profile`,Ui=`${n}/priapi/v1/dx/market/v2/trading-history/filter-config`,Wi=`${n}/priapi/v1/dx/market/v2/pool-liquidity/change-history/filter-list`,$i=`${n}/priapi/v1/dx/market/v2/pool-liquidity/tendency/chart`,Bi=`${n}/priapi/v1/dx/market/v2/pool-liquidity/change-history/filter-config`,Fi=`${n}/priapi/v1/dx/trade/multi/simple/tokenList`,Hi=`${n}/priapi/v1/dx/market/v2/trading/kline-bs-point`,Ki=`${n}/priapi/v1/dx/market/v2/trading/tag/kline-bs-point`,Vi=`${n}/priapi/v1/dx/market/tag/tmpFilterTags`,zi=`${n}/priapi/v1/dx/market/tag/txHistoryTagFilter`,ji=`${n}/priapi/v1/dx/market/tag/holderTagFilter`,qi=`${n}/priapi/v1/dx/market/v2/holders/holding-list`,Xi=`${n}/priapi/v1/dx/market/v2/risk/new/check`,Yi=`${n}/priapi/v1/dx/market/v2/query/banner`,Qi=`${n}/priapi/v1/dx/market/v2/address/collect/update`,Ji=`${n}/priapi/v1/dx/market/v2/address/collect/simplify/query`,Zi=`${n}/priapi/v1/dx/market/v2/address/collect/group/query`,ts=`${n}/priapi/v1/dx/market/v2/address/alias/update`,es=`${n}/priapi/v1/dx/market/v2/address/alias/simplify/query`,rs=`${n}/priapi/v1/dx/market/v2/address/collect/support/chain`,os=`${n}/priapi/v1/dx/market/v2/address/collect/checkSize`,as=`${n}/priapi/v1/dx/market/v2/address/collect/checkBotSize`,ns=`${n}/priapi/v1/dx/market/v2/address/collect/batch/import`,is=`${n}/priapi/v1/dx/market/user/sign`,ss=`${n}/priapi/v1/dx/market/user/login`,cs=`${n}/priapi/v1/dx/market/v2/address/collect/queryTxHistory`,ps=`${n}/priapi/v1/dx/market/v2/tracker/smartmoney/activity`,ls=`${n}/priapi/v1/dx/trade/blinks/share/url`,ds=`${n}/priapi/v1/dx/market/v2/universal/link/create`;var us=`${n}/priapi/v1/dx/trade/multi/order/save/broadcast`,ms=`${n}/priapi/v5/dex/token/market/dex-token-hlc-candles`,hs=`${n}/priapi/v5/dex/token/market/history-dex-token-hlc-candles`,_s=`${n}/priapi/v1/dx/market/v2/config/info`,gs=`${n}/priapi/v1/dx/market/v2/holders/over-time`,fs=`${n}/priapi/v1/dx/market/v2/holders/ranking-list`,xs=`${n}/priapi/v1/dx/market/v2/trading-history/statistics`,Cs=`${n}/priapi/v1/dx/market/v2/trading/kline-bs-point`,Es=`${n}/priapi/v1/dx/market/v2/holders/analysis-info`,ks=`${n}/priapi/v1/dx/market/v2/holders/single-detail-info`,Ts=`${n}/priapi/v1/dx/market/v2/holders/early-buyer/list`,vs=`${n}/priapi/v1/dx/market/v2/memefun/entrance`,As=`${n}/priapi/v1/dx/market/v2/memefun/ranking/type`,Is=`${n}/priapi/v1/dx/market/v2/memefun/ranking/info`,ws=`${n}/priapi/v1/dx/market/v2/memefun/ranking/config`,ys=`${n}/priapi/v1/dx/market/v2/memefun/ranking/list`,Ss=`${n}/priapi/v1/dx/market/v2/config/info`,Ls=`${n}/priapi/v1/dx/market/v2/smartmoney/ranking/content`,Rs=`${n}/priapi/v1/dx/market/v2/smartmoney/signal-list`,Os=`${n}/priapi/v1/dx/market/v2/smartmoney/signal-detail`,bs=`${n}/priapi/v1/dx/market/v2/smartmoney/config/new`,vr=`${n}/priapi/v1/dx/market/v2/watchlist/token/group/list`,Ar=`${n}/priapi/v1/dx/market/v2/watchlist/token/group/create`,Ir=`${n}/priapi/v1/dx/market/v2/watchlist/token/group/delete`,wr=`${n}/priapi/v1/dx/market/v2/watchlist/token/group/rename`,yr=`${n}/priapi/v1/dx/market/v2/watchlist/token/group/sort`,Sr=`${n}/priapi/v1/dx/market/v2/watchlist/token/group/top`,Lr=`${n}/priapi/v1/dx/market/v2/watchlist/token/all/list`,Ds=`${n}/priapi/v1/dx/market/v2/watchlist/token/all/details`,Ns=`${n}/priapi/v1/dx/market/v2/watchlist/token/inGroupIds`,Rr=`${n}/priapi/v1/dx/market/v2/watchlist/token/inGroups`,Ps=`${n}/priapi/v1/dx/market/v2/watchlist/token/group/tokenList`,Gs=`${n}/priapi/v1/dx/market/v2/watchlist/token/group/tokenTop`,Or=`${n}/priapi/v1/dx/market/v2/watchlist/token/addOrDelete`,Ms=`${n}/priapi/v1/dx/market/v2/address/collect/group/top`,Us=`${n}/priapi/v1/dx/market/v2/address/collect/group/update`,Ws=`${n}/priapi/v1/dx/market/v2/address/collect/group/sort`,$s=`${n}/priapi/v1/dx/trade/limit-order/web/exChangeRate`,Bs=`${n}/priapi/v1/dx/trade/multi/meme/openOrders`,Fs=`${n}/priapi/v1/dx/market/v2/tracker/trends/trade/list`,Hs=`${n}/priapi/v1/dx/market/v2/tracker/trends/trade/detail`,Ks=`${n}/priapi/v1/dx/market/v2/tracker/smartmoney/trends`,Vs=`${n}/priapi/v1/dx/market/v2/tracker/smartmoney/trends/detail`,zs=`${n}/priapi/v1/dapp/insights/control/summaryAndInsight`,js=`${n}/priapi/v1/dx/trade/multi/getAllTokenTagInfo`,qs=`${n}/priapi/v1/dx/trade/multi/getServiceFeeTagInfo`,Xs=`${n}/priapi/v1/dx/trade/multi/feeToken/search`,Ys=`${n}/priapi/v1/dx/market/v2/address/collect/detail-query`,Qs=`${n}/priapi/v1/dx/market/v2/tracker/smartmoney/address`,Js=`${n}/priapi/v1/dx/market/v2/tracker/ranking/info`,Zs=`${n}/priapi/v1/dx/market/v2/tracker/smartmoney/ranking`,tc=`${n}/priapi/v1/dx/trade/multi/checkServiceOffLine`,ec=`${n}/priapi/v1/dx/trade/bridge/trade/multi/checkServiceOffLine`,rc=`${n}/priapi/v1/dx/market/v2/getLimitOrderBalance`,oc=`${n}/priapi/v1/dx/market/v2/address/collect/groupId/query`;var Dr={};je(Dr,{createAbortController:()=>Te,default:()=>U,interceptRequest:()=>bt,interceptResponse:()=>Dt,isCancel:()=>ve,setDataProxy:()=>Ro});p();l();V();so();var So=[0],Te=()=>new AbortController,Lo=()=>Promise.reject(),ve=o=>o?.status===ft.STATUS_CODE?.ERR_CANCELED;async function bt(o={}){let t=o;return pt()||t.headers||(t.headers={}),t.needSign=!0,t.customToLogin=Lo,t}function Dt(o){return o.then(t=>{let{data:e}=t;return So.includes(e?.code)?e:Promise.reject(e||{})})}var Et={};Et.get=(o,t)=>Dt(bt({...t,url:o}).then(e=>{let{url:r,...a}=e;return ft.get(r,a).then(i=>(i?.status===200&&i?.data?.code&&(i.data.code=+i.data.code),i))}));Et.getWithCache=(o,t)=>Dt(bt({...t,url:o}).then(e=>{let{url:r,...a}=e;return ft.getWithCache(r,{cacheSeconds:60*5,...a})}));Et.post=(o,t,e)=>Dt(bt({...e,url:o,data:t,method:"post"}).then(r=>{let{url:a,data:i,...s}=r;return ft.post(a,i,s)}));Et.delete=(o,t,e)=>Dt(bt({...e,url:o,data:t,method:"delete"}).then(r=>{let{url:a,...i}=r;return ft.delete(a,i)}));var U=Et,br=!1,Ro=o=>{br||(br=!0,Object.keys(o).forEach(t=>{Et[t]=o[t]}))};p();l();V();p();l();var Nt="universe_swap";et.init({project:Nt});et.session.init({project:Nt});var Ae=pt()?et:et.getInstance(Nt),gc=pt()?et.session:et.session.getInstance(Nt);var Oo=async()=>{try{if(!Ot.adapter)return await Ot.createAdapter({isForce:!0})}catch(o){return Promise.reject(o)}return Promise.resolve()};var Nr=async o=>{try{await Oo();let t=Ot.getChainTypeByChainId(o),e=await Ot.getAllChainTypeInfoList(),r=e.find(a=>a.chainType===t);return r?r.address:e[0]?.address||""}catch{return""}};var te={};je(te,{getRandomId:()=>bo,getWalletId:()=>Pr,initUniqueId:()=>Ie});p();l();V();function bo(o){let t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),e=[],r=t.length;if(o)for(let a=0;a<o;a++)e[a]=t[0|ue.get()*r];return e.join("")}function Pr(){let o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),t=[],e;t[8]="-",t[13]="-",t[18]="-",t[23]="-",t[14]="4";for(let r=0;r<36;r++)t[r]||(e=0|ue.get()*16,t[r]=o[r==19?e&3|8:e]);return t.join("")}function Ie(){if(pt())return"";let o=Ae.get("onChainUserId"),t=Pr();return o||Ae.set("onChainUserId",t),o||t}p();l();var Gr={10064:"swaptrade_market_error_watchlist_name_already_exist",10066:"swaptrade_market_error_name_char_limt",10067:"swaptrade_market_error_max_group_limit",10068:"swaptrade_market_error_delete_last_group",10069:"swaptrade_market_error_watchlist_token_limit"},Mr=200,ee=20,Ur=30,Wr=1,re=2;var Do={chainId:"all",chainName:"",chainLogo:"",chainBWLogoUrl:"",monitorName:"all_networks"},$r=Do.chainId,we="universe_swap_token_map_change",ye="universe_swap_token_group_map_change",Se="universe_swap_watch_list_group_change";p();l();var Le=class{constructor(){this.accountId="";this.userUniqueId="";this.collectWalletAddress="";this.fetchCollectGroupUrl="";this.groupDialogBoxScroll=!1;M(this,{},{autoBind:!0})}},T=new Le;var Re=class{constructor(){this.initCommonTokenCollectAction=async({accountId:t,fetchCollectGroupUrl:e,groupDialogBoxScroll:r,tokenCollectWalletAddress:a})=>{if(t!==T.accountId&&(T.accountId=t,T.fetchCollectGroupUrl=e||"",T.groupDialogBoxScroll=r||!1,T.userUniqueId||(T.userUniqueId=Ie()),t)){let i;if(a!==void 0)i=a;else try{i=await Nr(Wr)}catch{i=""}T.collectWalletAddress=i}};this.destroyCommonTokenCollectAction=()=>{T.accountId&&(T.accountId="",T.collectWalletAddress="")};M(this,{},{autoBind:!0})}},kt=new Re;p();l();V();p();l();var x={DEFAULT:"DEFAULT",LOADING:"LOADING",READY:"READY",NULL:"NULL",ERROR:"ERROR",SUCCESS:"SUCCESS"};p();l();var Pt=({chainId:o,tokenContractAddress:t,tokenAddress:e=void 0}={})=>`${o}_${(t||e)?.toLowerCase()}`;p();l();function Gt(o,t={}){let e=new CustomEvent(o,{detail:{params:t,timestamp:Date.now()}});window.dispatchEvent(e)}function Mt(o,t){let e=r=>{t(r.detail.params)};return window.addEventListener(o,e),()=>{window.removeEventListener(o,e)}}p();l();var Oe=class{constructor(){this.collectionMap={};this.collectionGroupMap={};this.fetchCollectionDataStatus=x.DEFAULT;M(this,{},{autoBind:!0})}get computedCollectionMap(){return{...this.collectionMap}}},P=new Oe;p();l();var q=()=>{let o=T.accountId,t=T.collectWalletAddress;return{accountId:o,walletAddress:t}};var be=class{constructor(){this.destroyReaction=()=>{};this.removeEventListener=()=>{};this.removeEventGroupListener=()=>{};this.initEd=!1;this.initCollectionData=()=>{this.initEd||(this.initEd=!0,this.destroyReaction(),this.destroyReaction=rr(()=>T.collectWalletAddress,t=>{t?(this.refreshCollectionData(),this.onUpdateTokenCollectMapData(),this.onUpdateTokenCollectGroupMapData()):this.destroyCollectionData()}))};this.updateCollectionGroupMap=({selected:t,groupId:e})=>{let r=P.collectionGroupMap[e];r===void 0?P.collectionGroupMap[e]=1:P.collectionGroupMap[e]=t?r+1:r-1};this.cancelRef=null;this.updateTokenCollectStatus=async({tokenInfo:t,groupInfo:e,callBack:r})=>{if(!T.accountId){this.walletWarnInterceptor();return}this.cancelRef&&this.cancelRef.abort(),this.cancelRef=Te();let{groupId:a,status:i}=e,s=i===1?0:1,c={tokenContractAddress:t?.tokenContractAddress,chainId:Number(t?.chainId),symbol:t?.tokenSymbol,decimal:t?.decimals,userUniqueId:T.userUniqueId,...q(),groupIds:[a],action:s,isCustomToken:t?.isCustomToken||t?.isSubscribe},[d,u]=await K(U.post(Or,c,{signal:this.cancelRef.signal}));this.handleResult({error:d,res:u,callBack:r,tokenInfo:t,action:s,groupId:a})};this.debounceUpdateTokenCollectStatus=Ye(this.updateTokenCollectStatus,300);this.walletWarnInterceptor=()=>{w.error({title:_("swaptrade_selecttoken_toast_connect_wallet"),duration:re})};this.fetchCollectionData=async()=>{if([x.LOADING,x.READY].includes(P.fetchCollectionDataStatus))return;P.fetchCollectionDataStatus=x.LOADING;let[t,e]=await K(U.get(Lr,{params:{chainId:$r,...q()}}));if(P.fetchCollectionDataStatus=x.READY,!t&&e&&e?.data&&Array.isArray(e.data)){let r={};e?.data.forEach(a=>{let i=Pt({chainId:a?.chainId,tokenContractAddress:a.tokenContractAddress,tokenAddress:a.tokenAddress});r[i]=1}),er(()=>{this.emitUpdateTokenCollectMapData({collectionMap:r})})}};this.destroyCollectionData=()=>{this.emitUpdateTokenCollectMapData({collectionMap:{}}),this.removeEventListener(),this.removeEventGroupListener(),P.fetchCollectionDataStatus=x.DEFAULT};this.refreshCollectionData=()=>{P.fetchCollectionDataStatus=x.DEFAULT,this.fetchCollectionData()};this.updateCollectMap=({tokenInfo:t,afterGroupIds:e,collectionMap:r})=>{let a=!!e?.length;if(t){let i=Pt({chainId:t?.chainId,tokenContractAddress:t.tokenContractAddress});a?P.collectionMap[i]=1:delete P.collectionMap[i]}r&&(P.collectionMap={...r})};this.onUpdateTokenCollectMapData=()=>{this.removeEventListener(),this.removeEventListener=Mt(we,this.updateCollectMap)};this.emitUpdateTokenCollectMapData=(t={})=>{Gt(we,{...t})};this.onUpdateTokenCollectGroupMapData=()=>{this.removeEventGroupListener(),this.removeEventGroupListener=Mt(ye,this.updateCollectionGroupMap)};this.emitUpdateTokenCollectGroupMapData=(t={})=>{Gt(ye,{...t})};this.fetchTokenWatchGroup=gt(async(t={},e=1e4,r=!0)=>{if(!T.accountId||!T.collectWalletAddress)return this.walletWarnInterceptor(),null;let a={...q(),...t},[i,s]=await K(U.get(Rr,{params:a,timeout:e}));if(i&&!r){let c=i?.message||i?.msg||"";i?.status==="ERR_TIMEOUT"&&(c=_("swaptrade_general_error_connection_timeout")),w.error(c)}return s?.data},500,{leading:!0,trailing:!1});M(this,{},{autoBind:!0})}handleResult({error:t,res:e,callBack:r,tokenInfo:a,action:i,groupId:s}){!ve(t)&&t?t.code===10023?w.error(_("swaptrade_selecttoken_modal_favorite_limitreached")):w.error(_("swaptrade_pricechart_no_connection_desc")):e&&(i===0?(r({selected:!1,tokenInfo:a}),this.emitUpdateTokenCollectGroupMapData({selected:!1,groupId:s}),w.success({title:_("swaptrade_selecttoken_toast_removed_from_favorite"),duration:re})):i===1&&(r({selected:!0,tokenInfo:a}),this.emitUpdateTokenCollectGroupMapData({selected:!0,groupId:s}),w.success({title:_("swaptrade_selecttoken_toast_added_to_favorite"),duration:re})))}},Tt=new be;p();l();var Ne=v(N()),Br=v(rt());p();l();var De={icon:"_icon_elmob_1",activity:"_activity_elmob_5"};function Pe(o){let{className:t,isCollection:e,fontSize:r,onClick:a}=o;return Ne.default.createElement(at,{onClick:a},Ne.default.createElement(xt,{a11yText:"collection",className:(0,Br.default)(`${e?"okx-defi-dex-star-filled":"okx-defi-dex-star"}`,{[De.activity]:e},De.icon,t),style:{fontSize:r||"24px"}}))}p();l();var _t=v(N());p();l();var Ue=v(N());p();l();var Ut=v(N()),Hr=v(rt());p();l();var ae=v(N()),Ge=v(rt());p();l();var Fr={container:"_container_b0pkk_1"};var Po=({data:o,containerClass:t="",className:e="",children:r=null,height:a=void 0,tooltipProps:i={},outerStyle:s={},...c})=>{let d=r||o;return ae.default.createElement("div",{className:(0,Ge.default)(Fr.container,t),style:{height:a,...s}},ae.default.createElement(Ct,{title:o,noWrapper:!0,textOverflow:{text:o},...i},ae.default.createElement("div",{className:(0,Ge.default)("ellipsis",e),...c},d)))},ne=Po;p();l();var ie={"group-item":"_group-item_11yhk_1",groupItem:"_group-item_11yhk_1","group-name":"_group-name_11yhk_17",groupName:"_group-name_11yhk_17"};function Me(o){let{item:t,checked:e,onCheck:r}=o;return Ut.default.createElement(at,{className:(0,Hr.default)(ie.groupItem),onClick:()=>r(t)},Ut.default.createElement(ne,{containerClass:ie.groupName,data:t.groupName}),Ut.default.createElement("span",{className:ie.checkIcon},Ut.default.createElement(xt,{className:e?"okx-defi-marketplace-selected":"okx-defi-marketplace-unselected"})))}p();l();var Kr={"group-list":"_group-list_ajv6w_1",groupList:"_group-list_ajv6w_1"};var Go=o=>{let{options:t=[],onCheck:e}=o;return Ue.default.createElement("div",{className:Kr.groupList},t.map(r=>Ue.default.createElement(Me,{key:r.groupId,item:r,checked:r.status===1,onCheck:e})))},Vr=Go;p();l();var G=v(N()),ce=v(rt());p();l();var jr=v(N()),qr=v(rt());p();l();var zr={icon:"_icon_13h51_1"};function ht({className:o="",type:t="",size:e,...r}){let a={fontSize:`${e}px`};return jr.default.createElement(xt,{className:(0,qr.default)(t,zr.icon,o),style:a,...r})}p();l();var D=v(N()),ct=v(rt());p();l();var Wt=v(N()),We=v(rt());p();l();var se={"tip-icon":"_tip-icon_w15f9_1",tipIcon:"_tip-icon_w15f9_1","arrow-icon":"_arrow-icon_w15f9_5",arrowIcon:"_arrow-icon_w15f9_5",disabled:"_disabled_w15f9_9"};var st=({title:o,tipsClass:t="",iconClass:e="",iconName:r="okx-defi-nft-information-circle",onClick:a=()=>{},size:i=16,disabled:s=!1,...c})=>Wt.default.createElement(Ct,{title:o,className:(0,We.default)(se.tipIcon,t),...c},Wt.default.createElement(ht,{className:(0,We.default)(r,se.arrowIcon,e,s&&se.disabled),size:i,a11yText:o,onClick:d=>{(0,Wt.startTransition)(()=>{!s&&a(d)})}}));p();l();V();p();l();var $e=class{constructor(){this.accountId="";this.fetchWatchListGroupUrl=T.fetchCollectGroupUrl||vr;this.groupList=[];this.managedGroupList=[];this.status=x.DEFAULT;this.query={};this.optionStatus=x.DEFAULT;this.editGroup=null;this.hasInit=!1;M(this,{},{autoBind:!0})}get computedGroupStatusLoading(){return this.status===x.LOADING}get computedGroupOptions(){return(this.groupList||[]).map(e=>{let{groupId:r,groupName:a}=e;return{value:r,label:a}})}},C=new $e;var Be=class{constructor(){this.removeEventListener=()=>{};this.onUpdateGroupList=()=>{this.removeEventListener(),this.removeEventListener=Mt(Se,this.setGroupList)};this.emitUpdateGroupList=(t=[])=>{Gt(Se,[...t])};this.fetchGroups=gt(async(t=!1,e=null)=>{let{accountId:r,walletAddress:a,fetchGroupUrl:i}=e||{},s=r?{accountId:r,walletAddress:a}:q();!t&&!C.hasInit&&this.setStatus(x.LOADING);let[c,d]=await K(U.get(i||C.fetchWatchListGroupUrl,{params:s}));if(c)t||(this.emitUpdateGroupList([]),this.setManagedGroupList([]),this.setStatus(x.ERROR));else{let u=d?.data||[];this.emitUpdateGroupList(u),this.setManagedGroupList(this.getItemsFromList(u)),t||(u.length===0?this.setStatus(x.NULL):this.setStatus(x.READY)),C.hasInit=!0}return d?.data},500,{leading:!0,trailing:!1});M(this,{},{autoBind:!0})}initGroupList(t=!1,e=null){this.onUpdateGroupList(),this.fetchGroups(t,e)}resetStore(){this.emitUpdateGroupList([]),this.setManagedGroupList([]),this.setStatus(x.NULL)}setStatus(t){C.status=t}setOptionStatus(t){C.optionStatus=t}setGroupList(t){C.groupList=t}setManagedGroupList(t){C.managedGroupList=t}setEditGroup(t){let e=C.managedGroupList?.map(r=>({...r,disabled:!!(t?.id&&r.id!==t?.id)}));C.editGroup=t&&{...t},this.setManagedGroupList(e)}getItemsFromList(t=[]){return t.map(r=>({id:r.groupId,groupName:r.groupName,tokenCount:r.tokenCount,disabled:!1}))}showErrorMessage(t,e={}){let r=Gr[t?.code];if(r){let a=_(r,e);w.warn(a)}else{let a=t?.error_message||t?.msg;a&&w.error(a)}this.setManagedGroupList(this.getItemsFromList(C.groupList))}async createGroup(t,e){this.setOptionStatus(x.LOADING);let r=q(),[a,i]=await K(U.post(Ar,{...r,groupName:t}));if(a)this.setOptionStatus(x.ERROR),this.showErrorMessage(a,{groupName:t});else{w.success({title:_("swaptrade_market_watchlist_toast_group_added",{groupName:t})});let s=i.data,c={groupId:s,groupName:t,tokenCount:0,sortOrder:C.groupList?.length};C.groupList.push(c),C.managedGroupList.push({id:s,groupName:t,disabled:!1,tokenCount:0}),e&&e(),this.setOptionStatus(x.READY)}return i}async deleteGroup(t,e){let{id:r,groupName:a}=t;this.setOptionStatus(x.LOADING);let i=T.userUniqueId,[s,c]=await K(U.delete(Ir,{...q(),groupId:r,userUniqueId:i}));if(s)this.setOptionStatus(x.ERROR),this.showErrorMessage(s);else{w.success({title:_("swaptrade_market_watchlist_toast_group_deleted",{groupName:a})}),this.setOptionStatus(x.READY);let d=C.groupList.findIndex(u=>u.groupId===r);C.groupList.splice(d,1),e&&e()}return c}async renameGroup(t,e,r){let a=C.groupList?.findIndex(d=>d.groupId===t),i=C.groupList?.[a];if(i.groupName===e)return Promise.resolve(e);this.setOptionStatus(x.LOADING);let[s,c]=await K(U.post(wr,{groupId:t,groupName:e,...q()}));if(s)this.setOptionStatus(x.ERROR),this.showErrorMessage(s,{groupName:e});else{w.success({title:_("swaptrade_market_watchlist_toast_group_renamed",{groupName:e})});let d={...i,groupName:e};C.groupList.splice(a,1,d),r&&r(),this.setOptionStatus(x.READY)}return c}async sortGroup(t){let e=t.map(i=>i.id);this.setOptionStatus(x.LOADING);let[r,a]=await K(U.post(yr,{groupIds:e,...q()}));if(r)this.setOptionStatus(x.ERROR),this.showErrorMessage(r);else{let i=new Map;C.groupList.forEach(c=>{i.set(c.groupId,c)});let s=e.map(c=>i.get(c));this.emitUpdateGroupList(s),this.setOptionStatus(x.READY)}return a}async topGroup(t){let{id:e,groupName:r}=t,a=C.groupList?.findIndex(c=>c.groupId===e);if(a===0)return Promise.resolve(1);this.setOptionStatus(x.LOADING);let[i,s]=await K(U.post(Sr,{groupId:e,...q()}));if(i)this.setOptionStatus(x.ERROR),this.showErrorMessage(i);else{w.success({title:_("swaptrade_market_watchlist_toast_group_move_top",{groupName:r})}),this.setOptionStatus(x.READY);let c=[...C.groupList],d=c.splice(a,1)?.[0];c.unshift(d),this.emitUpdateGroupList(c)}return s}},W=new Be;p();l();var vt=v(N());V();var Fe=({value:o="",valueLen:t=Ur,values:e=[],valuesCount:r=ee})=>o?Array.from(o).length>t?(w.warn(_("swaptrade_market_error_name_char_limt")),!1):e.includes(o)?(w.warn(_("swaptrade_market_error_watchlist_name_already_exist")),!1):e.length>=r?(w.warn(_("swaptrade_market_error_max_group_limit")),!1):!0:(w.warn(_("swaptrade_market_error_name_empty")),!1);function $t(o){return gt(o,500,{leading:!0,trailing:!1})}var Xr=o=>{let{setEditGroup:t,setManagedGroupList:e,topGroup:r,sortGroup:a,deleteGroup:i,renameGroup:s}=W,{editGroup:c,managedGroupList:d}=C,{refreshCollectionData:u}=Tt,g=$t(S=>{e(S),(0,vt.startTransition)(()=>{a(S),o({button_name:"drag_move"})})}),h=$t(S=>{(0,vt.startTransition)(()=>{let{id:F}=S,J=d.findIndex(H=>H.id===F);d.unshift(...d.splice(J,1)),e([...d]),r(S),o({button_name:"pin_top"})})}),E=$t(S=>{(0,vt.startTransition)(()=>{let{id:F}=S,J=d.findIndex(H=>H.id===F);d.splice(J,1),e([...d]),i(S,()=>{u()}),o({button_name:"delete"})})}),I=$t((S,F,J)=>{(0,vt.startTransition)(()=>{let H=d.findIndex(At=>At.id===S);d.splice(H,1,{...d[H],groupName:F}),e([...d]),s(S,F,J),o({button_name:"rename"})})}),B=$t(S=>{(0,vt.startTransition)(()=>{t(S)})});return{managedGroupList:d,setManagedGroupList:e,editGroup:c,handlerEditGroup:B,handlerDragEnd:g,handlerTopSort:h,handlerDelete:E,handlerRename:I}};p();l();var f=v(N()),b=v(rt());V();p();l();var A={"create-box":"_create-box_uuypa_1",createBox:"_create-box_uuypa_1","create-input-container":"_create-input-container_uuypa_8",createInputContainer:"_create-input-container_uuypa_8","create-input":"_create-input_uuypa_8",createInput:"_create-input_uuypa_8","group-item":"_group-item_uuypa_15",groupItem:"_group-item_uuypa_15","item-left":"_item-left_uuypa_24",itemLeft:"_item-left_uuypa_24","edit-input":"_edit-input_uuypa_29",editInput:"_edit-input_uuypa_29","item-name":"_item-name_uuypa_32",itemName:"_item-name_uuypa_32",sm:"_sm_uuypa_38","item-right":"_item-right_uuypa_41",itemRight:"_item-right_uuypa_41","icon-class":"_icon-class_uuypa_48",iconClass:"_icon-class_uuypa_48","success-icon":"_success-icon_uuypa_53",successIcon:"_success-icon_uuypa_53","cancel-icon":"_cancel-icon_uuypa_56",cancelIcon:"_cancel-icon_uuypa_56","confirm-title":"_confirm-title_uuypa_59",confirmTitle:"_confirm-title_uuypa_59","title-icon":"_title-icon_uuypa_63",titleIcon:"_title-icon_uuypa_63","confirm-text":"_confirm-text_uuypa_67",confirmText:"_confirm-text_uuypa_67","dialog-confirmation":"_dialog-confirmation_uuypa_70",dialogConfirmation:"_dialog-confirmation_uuypa_70"};var Yr=z(({onCreated:o,handleGroupCallback:t})=>{let[e,r]=(0,f.useState)(""),[a,i]=(0,f.useState)(!1),{managedGroupList:s,editGroup:c}=C,{createGroup:d}=W;(0,f.useEffect)(()=>{i(!!c?.id),c?.id&&r("")},[c?.id]);let u=async()=>{let E=de(e.trim());(0,f.startTransition)(()=>{let I=s.map(S=>S.groupName||"");Fe({value:E,values:I})&&(d(E,()=>{r(""),o()}),t({button_name:"add_group"}))})},g=E=>{let I=E.target?.value;r(I)},h=_("swaptrade_market_watchlist_dialog_input_new_group");return f.default.createElement("div",{className:(0,b.default)(A.createBox)},f.default.createElement(yt,{className:(0,b.default)(A.createInputContainer),innerClassName:(0,b.default)(A.createInput),value:e,onChange:g,size:yt.SIZE.lg,placeholder:h,onPressEnter:u,disabled:a}),f.default.createElement(nt,{rect:!0,type:nt.TYPE.primary,onClick:u,icon:"okx-defi-x1-liquidity-plus",iconType:nt.ICON_POSITION.leading,disabled:a},_("swaptrade_market_btn_create")))}),Qr=z(({handlerRename:o})=>{let{managedGroupList:t,editGroup:e}=C,{setEditGroup:r}=W,[a,i]=(0,f.useState)(e?.groupName),s=g=>{let h=g.target?.value;i(h)},c=()=>{(0,f.startTransition)(()=>{i(""),r(null)})},d=()=>{(0,f.startTransition)(()=>{let g=de(String(a).trim());if(e?.groupName===g){c();return}let h=t?.map(I=>I.groupName||"");Fe({value:g,values:h,valuesCount:ee+1})&&o(e?.id,g,()=>{c()})})},u=_("swaptrade_market_watchlist_dialog_input_new_group");return f.default.createElement("div",{className:(0,b.default)(A.groupItem)},f.default.createElement(yt,{className:(0,b.default)(A.itemLeft),innerClassName:(0,b.default)(A.editInput),value:a,onChange:s,size:yt.SIZE.sm,placeholder:u}),f.default.createElement("div",{className:(0,b.default)(A.itemRight)},f.default.createElement(st,{title:_("commonall_filter_btn_save"),size:20,iconClass:(0,b.default)(A.iconClass,A.successIcon),iconName:"okds-success-circle-fill",onClick:d}),f.default.createElement(st,{title:_("commonall_text_btn_cancel"),size:20,iconClass:(0,b.default)(A.iconClass,A.cancelIcon),iconName:"okds-fail-circle-fill",onClick:c})))}),Jr=z(({item:o,handlerTopSort:t,handlerDelete:e,handlerEditGroup:r,delDisabled:a})=>{let{isSm:i}=Xt(),[s,c]=(0,f.useState)(!1),d=()=>{c(!0)};return f.default.createElement(f.default.Fragment,null,s&&f.default.createElement(at,{className:A.dialogConfirmation,onClick:u=>{u.stopPropagation()}},f.default.createElement(Vt.Confirmation,{visible:s,title:f.default.createElement("div",{className:A.confirmTitle},f.default.createElement(ht,{className:A.titleIcon,type:"okds-warning-circle-fill",size:28}),_("swaptrade_market_watchlist_dialog_title_delete_group")),confirmText:_("commonall_filter_btn_delete"),cancelText:_("commonall_text_btn_cancel"),onConfirm:()=>{c(!1),e(o)},onCancel:()=>{c(!1)},onClose:()=>{c(!1)}},f.default.createElement("div",{className:A.confirmText},_("swaptrade_market_watchlist_dialog_desc_delete_group")))),f.default.createElement("div",{className:(0,b.default)(A.groupItem)},f.default.createElement("div",{className:(0,b.default)(A.itemLeft)},f.default.createElement(ne,{className:(0,b.default)(A.itemName,i&&A.sm),data:o?.groupName}),f.default.createElement("span",{className:(0,b.default)(A.itemCount,"mt-4")},_("swaptrade_market_watchlist_dialog_desc_token_num",{num:o?.tokenCount}))),f.default.createElement("div",{className:(0,b.default)(A.itemRight)},f.default.createElement(st,{title:_("swaptrade_market_tooltips_move_top"),size:20,iconClass:A.iconClass,iconName:"okds-back-to-top",onClick:()=>t(o)}),f.default.createElement(st,{title:_("swaptrade_market_filter_btn_edit"),size:20,iconClass:A.iconClass,iconName:"okx-defi-marketplace-edit",onClick:()=>r(o)}),f.default.createElement(st,{title:_("commonall_filter_btn_delete"),size:20,iconClass:A.iconClass,iconName:"okds-trash",disabled:a,onClick:d}))))});p();l();var O={"group-button":"_group-button_1xujz_1",groupButton:"_group-button_1xujz_1","dialog-box":"_dialog-box_1xujz_4",dialogBox:"_dialog-box_1xujz_4","dialog-body":"_dialog-body_1xujz_4",dialogBody:"_dialog-body_1xujz_4",sm:"_sm_1xujz_8","wallet-dialog-box":"_wallet-dialog-box_1xujz_11",walletDialogBox:"_wallet-dialog-box_1xujz_11","drag-container":"_drag-container_1xujz_20",dragContainer:"_drag-container_1xujz_20","drag-item":"_drag-item_1xujz_39",dragItem:"_drag-item_1xujz_39","item-disabled":"_item-disabled_1xujz_47",itemDisabled:"_item-disabled_1xujz_47","drag-handler":"_drag-handler_1xujz_50",dragHandler:"_drag-handler_1xujz_50","custom-drag-handler":"_custom-drag-handler_1xujz_54",customDragHandler:"_custom-drag-handler_1xujz_54","empty-drag-handler":"_empty-drag-handler_1xujz_60",emptyDragHandler:"_empty-drag-handler_1xujz_60","drag-icon":"_drag-icon_1xujz_64",dragIcon:"_drag-icon_1xujz_64","group-manage":"_group-manage_1xujz_67",groupManage:"_group-manage_1xujz_67"};var Mo=o=>{let{getHandlerRef:t,listeners:e,disabled:r}=o,{editGroup:a}=C;return a?.id&&!r?D.default.createElement("div",{className:O.emptyDragHandler}):D.default.createElement("div",{ref:t,...e,className:(0,ct.default)(O.customDragHandler)},D.default.createElement(st,{title:_("swaptrade_market_watchlist_tooltip_drag_sort"),size:20,iconClass:O.dragIcon,iconName:"okds-hamburger"}))},Uo=z(o=>{let{handleGroupCallback:t}=o,{editGroup:e,handlerEditGroup:r,managedGroupList:a,handlerDragEnd:i,handlerTopSort:s,handlerDelete:c,handlerRename:d}=Xr(t);return D.default.createElement(Ze.Sortable,{onDragEnd:i,dataSource:a,mobileLongPress:!0,withVirtualPlaceholder:!0,virtualPlaceholderOpacity:.3,itemClassName:(0,ct.default)(O.dragItem),itemDraggingClassName:(0,ct.default)(O.dragItem),handlerClassName:(0,ct.default)(O.dragHandler),overlayMountToBody:!0,renderHandler:Mo},a.map(u=>u.id===e?.id?D.default.createElement(Qr,{key:u.id,handlerRename:d}):D.default.createElement(Jr,{key:u.id,item:u,handlerEditGroup:r,handlerTopSort:s,handlerDelete:c,delDisabled:a.length===1})))}),Wo=o=>{let{visible:t,onClose:e,handleGroupCallback:r}=o,{setEditGroup:a,fetchGroups:i}=W,{isSm:s}=Xt(),c=(0,D.useRef)(null),d=()=>{setTimeout(()=>{c?.current?.scrollTo({top:c.current.scrollHeight,behavior:"smooth"})},100)},u=()=>{a({}),e()};return(0,D.useEffect)(()=>{t&&i(!0)},[t]),D.default.createElement(Vt.Action,{visible:t,title:_("swaptrade_market_watchlist_dialog_title_manage_groups"),onClose:u,scrollBoxClassName:(0,ct.default)(O.dialogBox,{[O.walletDialogBox]:T.groupDialogBoxScroll}),containerClassName:(0,ct.default)(O.dialogBody,s&&O.sm),width:600},D.default.createElement(Yr,{onCreated:d,handleGroupCallback:r}),D.default.createElement("div",{className:(0,ct.default)(O.dragContainer,s&&O.sm),ref:c},D.default.createElement(Uo,{handleGroupCallback:r})))},Zr=z(Wo);var $o=o=>{let{size:t="",onClick:e,isButton:r=!1,className:a="",onVisible:i=()=>{},onClose:s=()=>{},handleGroupCallback:c=()=>{}}=o,[d,u]=(0,G.useState)(!1),g=()=>{(0,G.startTransition)(()=>{u(!1),setTimeout(()=>{i(!1),s?.()},200)})},h=(I,B)=>{(0,G.startTransition)(()=>{u(!0),setTimeout(()=>{i(!0),e(I,B),c({source:B})},100)})},E=t||nt.SIZE.xs;return G.default.createElement(G.default.Fragment,null,r?G.default.createElement(nt,{className:(0,ce.default)(O.groupButton,a),rect:!0,type:nt.TYPE.gray,onClick:I=>h(I,"list_group_manage"),icon:"okx-defi-chart-settings",size:E},_("swaptrade_market_btn_manage")):G.default.createElement(at,{className:(0,ce.default)(O.groupManage,a),onClick:I=>h(I,"add_token_popup")},G.default.createElement(ht,{className:(0,ce.default)("mr-8"),size:16,type:"okx-defi-chart-settings"}),G.default.createElement("span",null,_("swaptrade_market_watchlist_dialog_title_manage_groups"))),G.default.createElement(Zr,{visible:d,onClose:g,handleGroupCallback:c}))},to=z($o);p();l();var pe={"dividing-line":"_dividing-line_xp5n5_1",dividingLine:"_dividing-line_xp5n5_1","group-manage":"_group-manage_xp5n5_5",groupManage:"_group-manage_xp5n5_5"};var Bo=(o,t)=>{let{options:e=[],onCheck:r=()=>{},onGroupManageVisible:a,handleGroupCallback:i}=o;return _t.default.createElement("div",{className:pe.groupContent,ref:t},_t.default.createElement(Vr,{options:e,onCheck:r}),_t.default.createElement("div",{className:pe.dividingLine}),_t.default.createElement(to,{className:pe.groupManage,onVisible:a,handleGroupCallback:i,onClick:()=>{}}))},eo=(0,_t.forwardRef)(Bo);p();l();var $=v(N());var He=(o,t=!1,e=()=>Promise.resolve(!0),r=()=>{})=>{let a=(0,$.useRef)(null),[i,s]=(0,$.useState)(t),[c,d]=(0,$.useState)(!1),[u,g]=(0,$.useState)(!1),[h,E]=(0,$.useState)([]),{debounceUpdateTokenCollectStatus:I,fetchTokenWatchGroup:B,emitUpdateTokenCollectMapData:S}=Tt,{computedCollectionMap:F}=P,{computedGroupOptions:J}=C,{initGroupList:H}=W,At=async k=>{if(!k){let{chainId:L,tokenContractAddress:ot}=o,tt=await B({chainId:L,tokenContractAddress:ot});Array.isArray(tt)&&E(tt)}g(k)},It=async()=>{if(c)d(!c),r(!c);else{let{chainId:k,tokenContractAddress:L}=o,Z=await B({chainId:k,tokenContractAddress:L},1e3,!1);Array.isArray(Z)&&(E(Z),d(!c),r(!c)),J?.length||H(!0)}},Bt=(k,L)=>{let ot=h.findIndex(tt=>tt.groupId===k.groupId),Z=k.tokenCount+(L?1:-1);h.splice(ot,1,{...k,status:L,tokenCount:Z}),E([...h])},wt=(0,$.useMemo)(()=>h.filter(k=>k.status===1).map(k=>k.groupId),[h]),le=async(k,L)=>{if(!await e({tokenInfo:o,groupIds:wt,groupInfo:k}))return;let{groupName:Z,tokenCount:tt,status:oo}=k;if(oo===0&&tt>=Mr){w.warn(_("swaptrade_market_error_watchlist_token_limit",{groupName:Z}));return}I({tokenInfo:o,groupInfo:k,callBack:({selected:Ht})=>{Bt(k,Ht?1:0);let Kt=[];Ht?Kt=[...wt,k.groupId]:Kt=wt.filter(ao=>ao!==k.groupId),S({tokenInfo:o,selected:Ht,afterGroupIds:Kt,groupInfo:k}),L&&L(Ht,o,Kt)}})},Ft=Pt(o);return(0,$.useEffect)(()=>{let k=!!F?.[Ft]||t;s(k)},[t,F,Ft]),(0,$.useEffect)(()=>{let k=L=>{!u&&a.current&&!a.current.contains(L.target)&&setTimeout(()=>{d(!1),r(!1)},100)};return c?window.addEventListener("mousedown",k,!0):window.removeEventListener("mousedown",k,!0),()=>window.removeEventListener("mousedown",k,!0)},[a,c,u]),{popupRef:a,isCollection:i,setIsCollection:s,options:h,updateOptions:Bt,showPopup:c,setShowPopup:d,onGroupManageVisible:At,clickIcon:It,onCheck:le}};p();l();var Ke={container:"_container_zydai_1","group-popup":"_group-popup_zydai_4",groupPopup:"_group-popup_zydai_4"};var Fo=o=>{let{accountId:t,tokenInfo:e,collected:r=!1,iconSize:a,className:i="",handleIconCallback:s=()=>{},collectCallBack:c=()=>{},handleGroupCallback:d=()=>{},clickedPromise:u=()=>Promise.resolve(!0),checkedPromise:g=()=>Promise.resolve(!0),fetchCollectGroupUrl:h,groupDialogBoxScroll:E,showTooltip:I=!1,tokenCollectWalletAddress:B,isSelfProject:S=!1}=o,{popupRef:F,options:J,isCollection:H,setIsCollection:At,showPopup:It,onGroupManageVisible:Bt,clickIcon:wt,onCheck:le}=He(e,r,g),Ft=async L=>{L.stopPropagation(),L.preventDefault(),await u()&&(wt(),s())},k=L=>{le(L,(ot,Z,tt)=>{c?.(ot,Z,tt),At(!!tt?.length)})};return(0,Q.useEffect)(()=>{Tt.initCollectionData()},[]),(0,Q.useEffect)(()=>{t?kt.initCommonTokenCollectAction({accountId:t,fetchCollectGroupUrl:h,groupDialogBoxScroll:E,tokenCollectWalletAddress:B}):kt.destroyCommonTokenCollectAction()},[t,h,E,B]),Q.default.createElement(fe,{isSelfProject:S},Q.default.createElement("div",{className:Ke.container},Q.default.createElement(me,{useReactTransition:!0,stopPropagation:!0,hideArrow:!0,placement:me.DIRECTION.bottomRight,content:It?Q.default.createElement(eo,{ref:F,options:J,onGroupManageVisible:Bt,onCheck:k,handleGroupCallback:d}):null,show:It,contentClassName:Ke.groupPopup},Q.default.createElement(Ct,{delayShow:400,title:_(H?"swaptrade_market_header_tooltips_remove_watchlist":"swaptrade_market_header_tooltips_addto_watchlist"),disabled:I===!1||It},Q.default.createElement(Pe,{className:i,isCollection:H,fontSize:a,onClick:Ft})))))},Ho=z(Fo);p();l();var Ko={initGroupList:W.initGroupList,destroyGroupList:W.resetStore,initTokenCollectAction:kt.initCommonTokenCollectAction,destroyTokenCollectAction:kt.destroyCommonTokenCollectAction},Vo=Ko;io();V();p();l();V();function Ve(){return or()?{walletType:"okwallet-extension"}:et.getProjectStorage("onChain")}var ro={HEART:"heart",HEART_FINISH:"heartFinish",UPDATE_HASH:"updateHash",UPDATE_HASH_ERROR:"updateHashError",SAVE_ORDER:"saveOrder",SAVE_ORDER_PARAMS:"saveOrderParams",SAVE_ORDER_ERROR:"saveOrderError",SEND_ERROR:"sendError",ON_WALLET_FAIL:"onWalletFail",PAYLOAD:"payload",UPDATE_NONCE:"updateNonce",UPDATE_NONCE_FAIL:"updateNonceFail",CLOSE_CONFIRM_SWAP:"closeConfirmSwap",BEFOREUNLOAD:"beforeunload",CANCEL_ORDER:"cancelOrder",REDEEM_ORDER:"redeemOrder",ERROR_BOUNDARY:"errorBoundary",STUFF_LOG:"stuffLog",GET_LIMIT_CALL_DATA_ERROR:"getLimitCallDataError",SAVE_APPROVE:"saveApprove",SAVE_APPROVE_ERROR:"saveApproveError",APPROVE_DATA:"approveData",APPROVE_TOKEN_ERROR:"approveTokenError",CHAIN_ID_ADDRESS_MAP_IS_EMPTY:"chainIdAddressMapIsEmpty",UPDATE_BTC_BALANCE_ERROR_BEFORE_SWAP:"updateBtcBalanceErrorBeforeSwap",CHAIN_INFO:"chainInfo",ON_CHAIN_CHANGE:"onChainChange",LINK_SWITCH_START:"linkSwitchStart",LINK_SWITCH_SUCCESS:"linkSwitchSuccess",LINK_SWITCH_FAILED:"linkSwitchFailed",LINK_SWITCH_END:"linkSwitchEnd",DOUBLE_CHECK_CHAIN_ID_SUCCESS:"doubleCheckChainIdSuccess",DOUBLE_CHECK_CHAIN_ID_FAILED:"doubleCheckChainIdFailed",GET_CHAIN_ID_FAILED:"getChainIdFailed",UPDATE_APPROVAL_GAS_INFO_ERROR:"updateApprovalGasInfoError",WALLET_INFO:"walletInfo",OVER_VIEW_PRE_DATA_ERROR:"overViewInfoPreDataError",TRANSACTION_HISTORY_PRE_DATA_ERROR:"transactionHistoryPreDataError",REDEEM_ORDER_CALL_DATA:"redeemOrderCallData",REDEEM_ORDER_CALL_DATA_ERROR:"redeemOrderCallDataError",REDEEM_ORDER_ERROR:"redeemOrderError",INTENT_QUOTE_CALLDATA_ERROR:"intentQuoteCallDataError",INTENT_SWAP_SIGN_ERROR:"intentSwapSignError",INTENT_ORDER_CREATE_ERROR:"intentOrderCreateError",INTENT_SWAP_CALLDATA_ERROR:"intentSwapCalldataError",INTENT_SWAP_PROCESS_ERROR:"intentSwapProcessError",REGISTER_CO_LISTING_ERROR:"registerCoListingError",BEFORE_SEND_TRANSACTION_ERROR:"beforeSendTransactionError",TRANSACTION_HISTORY_LIST_ERROR:"transaction_history_list_error",TRANSACTION_HISTORY_INFO_ERROR:"transaction_history_info_error",EXTENSION_SWITCH_BTC_ADDRESS_ERROR:"extensionSwitchBtcAddressError",CHECK_CHAIN_ID_BEFORE_SEND_TRANSACTION:"checkChainIdBeforeSendTransaction",CHECK_CHAIN_ID_AFTER_SEND_TRANSACTION:"checkChainIdAfterSendTransaction",WIDGET_UPDATE_PROVIDER_ERROR:"widgetUpdateProviderError",WIDGET_DISCONNECT_WALLET_ERROR:"widgetDisconnectWalletError",OK_GLOBAL_LOCALE_MAP_IS_EMPTY:"okGlobalLocaleMapIsEmpty",SET_LANGUAGE_ERROR:"setLanguageError",SIGN_PERMIT2_DATA:"signPermit2Data",LIMIT_ORDER_TOKEN_PAIR_ERROR:"limitOrderTokenPairError",LIMIT_TOKEN_CONFIG_EMPTY:"limitChainListTokenConfigIsEmpty",LIMIT_TOKEN_CONFIG_DIFF_CHAIN:"limitChainListTokenConfigIsDiffChain",SWAP_SLIPPAGER_MEV_SETTING:"swapSlippagerMevSetting",BA_FANG_SDK_INIT_ERROR:"baFangSdkInitError",BA_FANG_SDK_INIT_SUCCESS:"baFangSdkInitSuccess",BA_FANG_SDK_INIT_FAILED:"baFangSdkInitFailed",MEME_SWAP_VALUE_DIFF_ERROR:"memeSwapValueDiffError",MEME_SWAP_GET_CALLDATA_PARAMS:"memeSwapGetCalldataParams",MEME_SWAP_GET_CALLDATA_ERROR:"memeSwapGetCalldataError",MEME_SWAP_PRE_EXECUTE_PARAMS:"memeSwapPreExecuteParams",MEME_SWAP_PRE_EXECUTE_ERR:"memeSwapPreExecuteErr",MEME_SWAP_PRE_EXECUTE_RESULT_ERR:"memeSwapPreExecuteResultErr",MEME_SWAP_PRE_EXECUTE_RESULT:"memeSwapPreExecuteResult",MEME_SWAP_SIGN_PARAMS:"memeSwapSgParams",MEME_SWAP_SIGN_SUCCESS:"memeSwapSgSuccess",MEME_SWAP_SIGN_ERROR:"memeSwapSgERROR",MEME_SWAP_BROADCAST_PARAMS:"memeSwapBroadcastParams",MEME_SWAP_BROADCAST_ERROR:"memeSwapBroadcastError",MEME_SWAP_BROADCAST_SUCCESS:"memeSwapBroadcastSuccess",GET_BALANCE:"getBalanceV2",CLICK_WALLET_SWAP_BUTTON:"clickWalletSwapButtonV2",BALANCE_IS_ERROR:"balanceIsErrorV2",USER_ON_OR_OFF_MEV_IN_WALLET:"userOnOrOffMevInWallet",MEME_SWAP_AMOUNT_SELECT:"memeSwapAmountSelect",MEME_SWAP_AMOUNT_INPUT:"memeSwapAmountInput",MEME_SWAP_CUSTOM_PRESET:"memeSwapCustomPreset",COLLECT_ADDRESS_SIGN_INFO:"collectAddressSignInfo",COLLECT_ADDRESS_SIGN_ERROR:"collectAddressSignError",LIMIT_ORDER_QUOTE_ERROR_RATE:"limitOrderQuoteErrorRate",LIMIT_ORDER_CALL_DATA:"limitOrderCallData",LIMIT_ORDER_CALL_DATA_SUCCESS:"limitOrderCallDataSuccess",LIMIT_ORDER_CALL_DATA_ERROR:"limitOrderCallDataError",LIMIT_ORDER_CALL_DATA_SIGN:"limitOrderCallDataSign",LIMIT_ORDER_CALL_DATA_SIGN_SUCCESS:"limitOrderCallDataSignSuccess",LIMIT_ORDER_CALL_DATA_SIGN_ERROR:"limitOrderCallDataSignError",LIMIT_ORDER_BROADCAST:"limitOrderBroadcast",LIMIT_ORDER_BROADCAST_SUCCESS:"limitOrderBroadcastSuccess",LIMIT_ORDER_BROADCAST_ERROR:"limitOrderBroadcastError",PRESET_EDIT_SAVE:"presetEditSave",PRESET_CHANGE_SELECT_TYPE:"presetChangeSelectType",QUICK_BUY_CALL_DATA:"quickBuyCallData",QUICK_BUY_WALLET_ERROR:"quick_buyCallDataError",QUICK_BUY_BROADCAST:"quickBuyBroadcast",SWAP_VALUE_DIFF_PROMPT:"swapValueDiffPrompt",OKXGLOBAL_PREFERENCE_IS_EMPTY:"okxGlobalPreferenceIsEmpty",FETCH_CLAIM_CALDATA_ERROR:"fetchClaimCaldataError",CLAIM_PAYLOAD:"claimPayload",UPDATE_CLAIM_ORDER:"updateClaimOrder"};var zo={business:"dex"},ze=class{constructor(t){R(this,"setTags",t=>{this.tags={...this.tags,...t}});R(this,"extendTags",()=>{let{walletType:t,scanAppType:e}=Ve();return Xe({walletType:t,scanAppType:e,taskId:this.uid,...this.tags},qe)});R(this,"wrapHandle",(t,e,r={})=>{t(e,{...r,tags:{...this.extendTags(),...r?.tags}})});R(this,"debug",(...t)=>{this.wrapHandle(lt.debug,...t)});R(this,"info",(...t)=>{this.wrapHandle(lt.info,...t)});R(this,"error",(...t)=>{this.wrapHandle(lt.error,...t)});R(this,"warn",(...t)=>{this.wrapHandle(lt.warn,...t)});R(this,"stuff",(...t)=>{t.length===1&&typeof t[0]=="string"?this.wrapHandle(lt.info,ro.STUFF_LOG,{msg:t[0]}):this.wrapHandle(lt.info,ro.STUFF_LOG,...t)});R(this,"generateUUID",()=>{this.uid=te.getWalletId()});R(this,"timerRef",null);R(this,"heartNumber",0);R(this,"uid","");R(this,"keepLive",()=>{this.generateUUID(),this.heartNumber=0,this.timerRef&&clearInterval(this.timerRef),this.heartCheck(),this.timerRef=setInterval(()=>{this.heartCheck()},30*1e3)});R(this,"heartCheck",()=>{this.info("heart",{tags:{heartNumber:this.heartNumber}}),this.heartNumber++});R(this,"removeKeep",()=>{this.timerRef&&clearInterval(this.timerRef),this.info("heart finish",{tags:{heartNumber:this.heartNumber}}),this.heartNumber=0,this.uid=""});this.tags=t}};var Wm=new ze(zo);export{Dr as a,te as b,C as c,He as d,Ho as e,Vo as f,ro as g,Wm as h};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-RH4ISAHA.js.map
