import{c as N,h as K,n as process,o as B,q as $}from"./chunk-6KXF36WM.js";var W=N((U,x)=>{B();$();(function(M,D){typeof U=="object"&&typeof x=="object"?x.exports=D():typeof define=="function"&&define.amd?define([],D):typeof U=="object"?U._prohibitedMonitor=D():M._prohibitedMonitor=D()})(U,function(){return function(){"use strict";var k={"../monitor/src/amp/helper.js":function(S,f,i){i.r(f),i.d(f,{getAmpDefaultEndpoint:function(){return r},getAmplitudeAPIKey:function(){return e},getAmplitudeProject:function(){return l},logSignUpComplete:function(){return s},reportIdentifyEvent:function(){return t}});var m=i("../monitor/src/common/variables.js"),g=i("../monitor/src/common/constants.js");let s=a=>{let{signUpCompleted:_}=sessionStorage;_&&(a.logEvent("signup_completed",{},{language:m.default.getOkGlobal().locale}),sessionStorage.removeItem("signUpCompleted"))},l=a=>a||(m.default.isOKLink()?g.default.AMPLITUDE_PROJECT.oklink:m.default.isOKEx()||m.default.isInExtension()?g.default.AMPLITUDE_PROJECT.okx:g.default.AMPLITUDE_PROJECT.okcoin),e=a=>{let _=m.default.isProdEnv(),c=g.default.AMPLITUDE_KEY_MAP?.[a];return c?_?c?.prod:c?.dev:""},t=(a,_)=>{let c=new window.amplitude.Identify;c.set("channel_id",_),a.identify(c,{language:m.default.getOkGlobal().locale})},r=()=>{if(m.default.isInternalSystem()||m.default.isOKEx()||m.default.isOKLink())return"/amplitude/2/httpapi"}},"../monitor/src/amplitude.js":function(S,f,i){i.r(f);var m=i("../monitor/src/monitor.js"),g=i("../monitor/src/common/variables.js"),s=i("../monitor/src/common/event-bus.js"),l=i("../monitor/src/common/constants.js"),e=i("../monitor/src/lib/libs-amplitude.js"),t=i("../monitor/src/amp/helper.js");let r={},a,_={RESOLVE:"RESOLVE",REJECT:"REJECT"},c={events:new s.default,getAmplitudeSDKInstance(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return new Promise((o,n)=>{this.events.on(_.RESOLVE,u=>{o(u)}),this.events.on(_.REJECT,u=>{n(u)}),this.getInstance(d)})},async getInstance(d){let o=(0,t.getAmplitudeProject)(d);a&&clearTimeout(a),window.amplitude||await(0,e.default)();let n=await g.default.getTk(),u=await g.default.getDeviceId()||"";if(r[o])return r[o];let E=window.amplitude.createInstance(),p=(0,t.getAmplitudeAPIKey)(o),I=(0,t.getAmpDefaultEndpoint)(),v=m.default.apiEndpoint?m.default.apiEndpoint:I,h={userId:o===l.default.AMPLITUDE_PROJECT.web3?u:n,deviceId:u,instanceName:o,serverUrl:v,defaultTracking:!0,identityStorage:"localStorage",autocapture:{pageViews:!1,fileDownloads:!1,sessions:!1,formInteractions:!1},appVersion:g.default.getOkGlobal().assetsBuildVersion};return E.init(p,h),r[o]=E,sessionStorage.channelId&&(0,t.reportIdentifyEvent)(E,sessionStorage.channelId),sessionStorage.ampCacheEvents&&(JSON.parse(sessionStorage.ampCacheEvents).forEach(O=>{E.logEvent(...O,{language:g.default.getOkGlobal().locale})}),sessionStorage.ampCacheEvents=""),(0,t.logSignUpComplete)(E),this.events.emit(_.RESOLVE,E),E}};f.default=c},"../monitor/src/common/constants.js":function(S,f,i){i.r(f);var m=i("../monitor/src/common/variables.js");let g="";if(m.default.isInBrowser()){let{cdnBaseUrl:e="//static.coinall.ltd"}=m.default.getOkGlobal();g=e}let s={okx:"okx",oklink:"oklink",web3:"web3",okcoin:"okcoin",internal_system:"internal_system"},l={[s.okx]:{prod:"56bf9d43d57f079e506b4f26c70a698f",dev:"1baf4c48da921e60512f74d455f02da8"},[s.oklink]:{prod:"d77757dff7616a060069e378595de0f7",dev:"d77757dff7616a060069e378595de0f7"},[s.web3]:{prod:"669cbf122dec17ceb8e68a78c8240d24",dev:"2f69d358792107218343f78d2488e305"},[s.okcoin]:{prod:"21c676d501be3d648464d7ae0038cd53",dev:"69ec37219ff98b032d9e1a1d3bd81de7"},[s.internal_system]:{prod:"118100a32c295da61d6c1809bcfe470e",dev:"118100a32c295da61d6c1809bcfe470e"}};f.default={Actions:{CLICK:"clk",EXPOSE:"xps"},Configs:{ATTR_CLICK:"data-clk",ATTR_EXPOSE:"data-xps",ATTR_LISTEN:"data-lsn",EXPOSE_DURATION:500},REQUEST_LONG_WAIT_TIME:1e3,PERF_REPORT_DEFER_TIME:5e3,AMPLITUDE_PROJECT:s,AMPLITUDE_KEY_MAP:l,CDN_BASE_URL:g,MILLISECONDS_OF_30_DAYS:2592e6,YESTERDAY:-864e5,DEBUG_KEY:"a6ywbd8",WEB3CATEGORY:["onchain","web3_homepage","wallet","web3_trade","nft","web3_discover","web3_invest","okc","onchain_data"],REQUEST_HEADERS:{deviceId:"Devid"},API_PATH:{INTERNAL:"/et/priapi/boss",OKLINK:"/et/priapi/lnweb",OKX:"/et/priapi/xweb"},internalCategory:["opboss"]}},"../monitor/src/common/cookie.js":function(S,f,i){i.r(f);let m=s=>{try{let l=document.cookie.split(";"),e=null;for(let t=0;t<l.length;t++){let r=l[t];for(;r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(s)===0){e=r.substring(s.length+1,r.length);break}}return e}catch{return null}},g=function(s,l){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{expirationDays:365},t=l!==null?e.expirationDays:-1;if(t){let a=new Date;a.setTime(a.getTime()+t*24*60*60*1e3),t=a}let r=`${s}=${l}`;t&&(r+=`; expires=${t.toUTCString()}`),r+="; path=/",document.cookie=r};f.default={set:g,get:m}},"../monitor/src/common/event-bus.js":function(S,f,i){i.r(f);class m{constructor(){K(this,"listeners",{})}on(s,l,e){let t=[],r=arguments.length;for(let a=0;a<r;a++)t.push(arguments[a]);t=t.length>3?t.splice(3,t.length-1):[],typeof this.listeners[s]<"u"?this.listeners[s].push({scope:e,callback:l,args:t}):this.listeners[s]=[{scope:e,callback:l,args:t}]}remove(s,l,e){if(typeof this.listeners[s]<"u"){let t=this.listeners[s].length,r=this.listeners[s].slice(0);for(let a=0;a<t;a++){let _=r[a];_.scope==e&&_.callback==l&&this.listeners[s].splice(a,1)}}}has(s,l,e){if(typeof this.listeners[s]<"u"){let t=this.listeners[s].length;if(l===void 0&&e===void 0)return t>0;for(let r=0;r<t;r++){let a=this.listeners[s][r];if((e?a.scope==e:!0)&&a.callback==l)return!0}}return!1}emit(s){if(typeof this.listeners[s]<"u"){let r=this.listeners[s].slice(),a=r.length;for(var l=arguments.length,e=new Array(l>1?l-1:0),t=1;t<l;t++)e[t-1]=arguments[t];for(let _=0;_<a;_++){let c=r[_];if(c&&c.callback){let d=e.concat(c.args);c.callback.apply(c.scope,d)}}}}}f.default=m},"../monitor/src/common/seo.js":function(S,f,i){i.r(f);var m=i("../monitor/src/common/utils.js");let g=[{keyword:"baidu.com",type:"BaiduSEO"},{keyword:"google",type:"GoogleSEO"},{keyword:"yandex",type:"yandexSEO"},{keyword:"ya.ru",type:"yandexSEO"},{keyword:"dzen.ru",type:"yandexSEO"},{keyword:"yahoo",type:"yahooSEO"},{keyword:"so.com",type:"360SEO"},{keyword:"bing.com",type:"bingSEO"},{keyword:"sogou.com",type:"sogouSEO"},{keyword:"m.sm.cn",type:"smSEO"},{keyword:"naver",type:"naverSEO"},{keyword:"duckduckgo",type:"duckduckgoSEO"},{keyword:"ecosia",type:"EcosiaSEO"},{keyword:"startpage",type:"startpageSEO"}];f.default={getSeoType(){let s=m.default.getUrlDomain(document.referrer);for(let l=0;l<g.length;l++){let{keyword:e,type:t}=g[l];if(s.indexOf(e)>-1)return t}return""}}},"../monitor/src/common/statex.js":function(S,f,i){i.r(f),i.d(f,{default:function(){return m}});function m(g){let s,l=new Set,e=(c,d)=>{let o=typeof c=="function"?c(s):c;if(o!==s){let n=s;s=d??typeof o!="object"?o:Object.assign({},s,o),l.forEach(u=>u(s,n))}},t=()=>s,_={setState:e,getState:t,subscribe:c=>(l.add(c),()=>l.delete(c)),destroy:()=>l.clear()};return s=g(e,t,_),_}},"../monitor/src/common/utils.js":function(S,f,i){i.r(f);let m=/([^{]+)({.+})?/,g=/^{|}$/g,s=/^['"]|['"]$/g,l=/\/\/([^/]+)\//;f.default={serializeParams(e){let t=[],r=Object.keys(e);for(let a=0,_=r.length;a<_;a++){let c=r[a];t.push(`${encodeURIComponent(c)}=${encodeURIComponent(e[c])}`)}return t.join("&")},getUrlDomain(e){let t=e.match(l);return t?t[1]:""},getUrlQuery(e){return this.getParsedUrl(window.location.href).searchParams.get(e)||""},getParsedUrl(e){return new URL(e)},getChannelIdByUserAgent(){let e=/channelId\/(\w+)/;return window.navigator.userAgent?.match?.(e)?.[1]},getChannelContext(e){let t={channelId:"",referralSrc:""};if(!e)return t;let r="",a="";if(e.searchParams.forEach((u,E)=>{let p=E.toLowerCase();p==="channelid"&&(r=u),p==="channelflag"&&(a=u)}),t.channelId=r||a,t.channelId)return t;let _="/join";if(e.pathname.endsWith(_)||!e.pathname.includes(_))return t;let c=e.pathname.split(`${_}/`)[1];if(!c)return t;let d=c.split("/")[0];if(d.startsWith("-"))return t;let o=d.split("-"),n=o[o.length-2]||"";return r=o[o.length-1],r&&(t.referralSrc=n,t.channelId=r),t},getOriginalUrl(e){return e.replace(/([?&])t=\d+(&)?/,(t,r,a)=>r&&a?r===a?"&":"?":"")},setCookie(e,t,r){let a=new Date;a.setTime(a.getTime()+r),document.cookie=`${e}=${encodeURIComponent(t)};expires=${a.toGMTString()};path=/`},getCookie(e){let t=new RegExp(`(^| )${e}=([^;]*)(;|$)`),r=document.cookie.match(t);return r?decodeURIComponent(r[2]):""},parseTarget(e){let t=e.match(m),r={key:"",data:{}};if(t){let a=t[1],_=t[2],c={};_&&_.replace(g,"").split(",").forEach(o=>{let n=o.split(":");n=n.map(p=>p.trim().replace(s,""));let[u,E]=n;c[u]=E}),r.key=a,r.data=c}return r},matchType(e,t){return Object.prototype.toString.call(e)===`[object ${t}]`},isArray(e){return this.matchType(e,"Array")},isObject(e){return this.matchType(e,"Object")},isInArray(e,t){if(Array.prototype.includes)return e.includes(t);for(let r=0,a=e.length;r<a;r++)if(e[r]===t)return!0;return!1},generateUUID(){let e=Date.now()+window.performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let r=(e+this.cryptoRandom()*16)%16|0;return e=Math.floor(e/16),(t==="x"?r:r&3|8).toString(16)})},valueExists(e){return e!=null&&e!==""},passedNamingCheck(e){return!/[^a-z0-9_]/.test(e)},toFixed(e){return Number(e.toFixed(4))},toUnderLineFormat(e){return e.replace(/([A-Z])/g,(t,r,a)=>a===0?`${r.toLowerCase()}`:`_${r.toLowerCase()}`)},filterXSS(e){let t=/</g,r=/>/g,a=/'/g,_=/"/g;return e.replace(t,"&lt;").replace(r,"&gt;").replace(a,"&#39;").replace(_,"&#34;")},merge(e,t){let r={};return Object.keys({...e,...t}).forEach(a=>{(t[a]!=null||e[a]!=null)&&(r[a]=t[a]??e[a])}),r},cryptoRandom(){if(window?.crypto){let e=new Uint32Array(1);return window.crypto.getRandomValues(e),e[0]/Math.pow(2,32)}return Math.random()},base64Id(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",t="";for(let r=0;r<22;++r)t+=e.charAt(Math.floor(this.cryptoRandom()*64));return t},isTargetingCookiesRejected(){if(typeof window>"u"||typeof window.OnetrustActiveGroups>"u")return!1;try{return!window.OnetrustActiveGroups.includes("C0004")}catch{return!1}}}},"../monitor/src/common/variables.js":function(S,f,i){i.r(f);var m=i("../monitor/src/common/utils.js"),g=i("../monitor/src/store.js");let s="oklink",l="okex",e="OKX_GLOBAL",t="okex_inner",r=typeof window<"u",a=Boolean(typeof window>"u"||typeof process<"u"&&{NODE_ENV:"production",ASSETS_BUILD_TYPE:"feature",ASSETS_BUILD_VERSION:"monitor-extension-0.1.1-beta-1e9333fcb9-250423112426",BUILD_TARGET_ENV:"extension"}.SSR_ENV),_=r?/OKApp\/\(\S+\/\S+\)/i.test(navigator.userAgent):!1,c={_expires:{}};if(r){let{ok_monitor:o='{ "_expires": {} }'}=localStorage;c=JSON.parse(o)}let d={};f.default={setEnv(o){let{screen:n}=window,{_tk:u}=localStorage,{systemLanguage:E,language:p}=navigator,{referrer:I}=document;d.site=this.getSiteInfo(),d.lcl=this.getProductLanguage(),d.fpid=m.default.getCookie("fingerprint_id"),I&&(I.length>256&&(I=I.substr(0,256)),d.rf=I),u&&(d.tk=u),d.lan=(E||p).toLowerCase();let v="0x0";if(n){let{width:P,height:O}=n;v=`${P}x${O}`}d.scr=v;let h=m.default.getCookie("first_ref");h&&(d.frf=h.slice(0,256))},getEnv(){return{...d,site:this.getSiteInfo(),lcl:this.getProductLanguage()}},isInApp(){return _},getDeviceId(){let{deviceId:o}=g.default.getState();return o?Promise.resolve(o):window.utils.ont?.getDevId?.()},toLocalStorage(o){let{key:n,value:u,maxAge:E}=o;c[n]=u,c._expires[n]=Date.now()+E,localStorage.ok_monitor=JSON.stringify(c)},removeLocalStorage(o){delete c[o],delete c._expires[o],localStorage.ok_monitor=JSON.stringify(c)},getClientValue(o){let n=sessionStorage.getItem(o);return n||this.getValueFromLocalStorage(o)},getValueFromLocalStorage(o){return Date.now()<c._expires[o]&&c[o]||""},syncUpLocalStorageToSessionStorage(o){if(sessionStorage.getItem(o))return;let n=this.getValueFromLocalStorage(o);n&&sessionStorage.setItem(o,n)},shouldIgnoreAmpEvent(){if(!this.isInBrowser())return!0;let o=this.getOkGlobal(),n=o.broker&&o.broker.is,u=localStorage.simulatedTrading==="1",{okjp:E}=o.site&&o.site.is||{};return n||u||E===!0},getProductLanguage(){return m.default.getCookie("locale")||this.getOkGlobal().locale},__getOkGlobalSite(){return this.getOkGlobal().site||{}},getSiteInfo(){let o=this.__getOkGlobalSite().sign,n=this.__getOkGlobalSite().subSite;return o===l?!n||n===e?l:n.toLowerCase():o},isOKEx(){return this.__getOkGlobalSite().sign===l},isOKLink(){let o=this.__getOkGlobalSite();return o.sign===s||o.sign===l&&o.linkInOKX},isInternalSystem(){return this.__getOkGlobalSite().sign===t},isInSSR(){return a},isInBrowser(){return r},isInExtension(){return window.inOKXExtension||window.inUIOKXExtension},isMiniApp(){return window.inMiniApp},isInDesktop(){return window?.navigator?.userAgent?.toLocaleLowerCase()?.includes("electron/")},isDevTestEnv(){return this.isInExtension()?window.ASSETS_BUILD_TYPE!=="publish":["pre","prod"].indexOf(this.getOkGlobal().envSign)<0},isProdEnv(){return this.isInExtension()?window.ASSETS_BUILD_TYPE==="publish":this.getOkGlobal().envSign==="prod"},getOkGlobal(){return this.isInBrowser()?window._okGlobal||window.okGlobal||{}:{}},isEnableAMP(){return this.isProdEnv()||sessionStorage.getItem("monitor_amplitude_enable_for_test")==="true"},getTk(){return _&&window.jsbridge?window.jsbridge.getTK().then(o=>o||localStorage._tk||"").catch(()=>{}):Promise.resolve(localStorage._tk||"")}}},"../monitor/src/de-duplicate.js":function(S,f,i){i.r(f),i.d(f,{shouldReport:function(){return l}});let m={},g,s=e=>{g!==void 0&&clearTimeout(g),g=setTimeout(()=>{m={},g=void 0},e+500)},l=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,r=typeof e=="string"?e:e.action||e.anchor,a=+new Date,_=m[r]||0;return a-_<t?!1:(s(t),m[r]=a,!0)}},"../monitor/src/error.js":function(S,f,i){i.r(f);var m=i("../monitor/src/common/variables.js");let g=m.default.isInBrowser()?JSON.parse(localStorage.__error__||"[]"):[];f.default={getErrorInfo(s){let{message:l,filename:e,lineno:t,colno:r,error:a}=s,_="";a&&a.stack?(_=a.stack,_.indexOf("@")!==-1&&(_=`${l} 
\r ${_}`)):(a||l)&&(_=`ThrowError: ${JSON.stringify(a||l)} 
\r at ${e}: ${t}: ${r}`);let c=encodeURIComponent(window.location.href);return{msg:l,file:e,line:t,col:r,stack:_,url:c}},isReported(s){let{file:l,line:e,col:t}=s,r=`${l}__${e}__${t}`;return g.includes(r)},rememberError(s){let{file:l,line:e,col:t}=s,r=`${l}__${e}__${t}`;g.unshift(r),g.length>50&&g.pop(),setTimeout(()=>{localStorage.__error__=JSON.stringify(g)},0)}}},"../monitor/src/global/attrs.js":function(S,f,i){i.r(f);var m=i("../monitor/src/global/click.js"),g=i("../monitor/src/global/expose.js"),s=i("../monitor/src/common/constants.js");let{Configs:l}=s.default;f.default={listen(e){let t=r=>{e.logEvent({...r,category:"ok"})};this.preprocess(),m.default.listen(t,this),g.default.listen(t,this)},preprocess(){document.querySelectorAll(`[${l.ATTR_LISTEN}]`).forEach(t=>{let r=t.getAttribute(l.ATTR_LISTEN),a=r.indexOf(":");if(a>-1){let _=r.substring(0,a).trim(),c=r.substring(a+1).trim();_.split("+").forEach(o=>{t.setAttribute(`data-${o.trim()}`,c)}),t.removeAttribute(l.ATTR_LISTEN)}})}}},"../monitor/src/global/click.js":function(S,f,i){i.r(f);var m=i("../monitor/src/common/utils.js"),g=i("../monitor/src/common/constants.js");let{Actions:s,Configs:l}=g.default;f.default={listen(e,t){document.addEventListener("click",r=>{let{target:a}=r;a.getAttribute(l.ATTR_LISTEN)&&t.preprocess();let c=a.getAttribute(l.ATTR_CLICK);if(c){let d=m.default.parseTarget(c),{key:o,data:n}=d;o&&e({target:o,action:s.CLICK,params:n,extras:{area:n.area}})}})}}},"../monitor/src/global/expose.js":function(S,f,i){i.r(f);var m=i("../monitor/src/common/utils.js"),g=i("../monitor/src/common/constants.js");let s={},{Actions:l,Configs:e}=g.default;f.default={listen(t){this.trackFn=t;let r={threshold:[.5,1]},a=new window.IntersectionObserver(this.onSectionChange.bind(this),r);document.querySelectorAll(`[${e.ATTR_EXPOSE}]`).forEach(c=>{a.observe(c)}),this.observer=a},onSectionChange(t){t.forEach(r=>{let{target:a,isIntersecting:_}=r,c=a.getAttribute(e.ATTR_EXPOSE),d=m.default.parseTarget(c),{key:o,data:n}=d,u=Number(r.time.toFixed(2));if(_){let E=setTimeout(()=>{let p=s[o],I=a.getBoundingClientRect(),{innerHeight:v,innerWidth:h}=window,{top:P,bottom:O,left:T,right:A}=I;if((P>=0&&P<=v||O>=0&&O<=v)&&(T>=0&&T<=h||A>=0&&A<=h)){let{area:y,elementType:R,actionType:b}=n;delete n.area,delete n.elementType,delete n.actionType,this.trackFn({target:o,action:l.EXPOSE,params:{...n,time:u},extras:{area:y},actionType:b||"Show",elementType:R,anchor:R?o:""}),this.observer.unobserve(a),p.forEach(L=>{window.clearTimeout(L)}),delete s[o]}else p.shift()},e.EXPOSE_DURATION);s[o]||(s[o]=[]),s[o].push(E)}})}}},"../monitor/src/lib/libs-amplitude.js":function(S,f,i){i.r(f),i.d(f,{default:function(){return a}});var m=i("../monitor/src/common/variables.js"),g=i("../monitor/src/common/event-bus.js");let s=!1,l=new g.default,e="LOAD_SUCCESS",t="LOAD_FAILED";function r(){return new Promise((_,c)=>{let d=()=>{l.emit(e),_()},o=h=>{l.emit(t),c(h)};s=!0;let{envSign:n,cdnBaseUrl:u}=m.default.getOkGlobal(),E=document.createElement("script");E.type="text/javascript",E.crossOrigin="anonymous",E.async=!0;let p="";switch(n){case"dev":p="cdndev";break;case"pre":p="cdnpre";break;case"daily":p="cdn";break;case"prod":p="cdn";break;default:p="cdn";break}let I="amplitude-analytics-browser-2.11.8.js";E.integrity="sha384-EeMLYO4Izpc3SCjHbLn1iwBHBhefXKXLUjoBpuQ3D5nlnKYrZ9Edhq/V9+XEAA12",m.default.isInExtension(),E.src=`./scripts/lib/${I}`,E.onload=function(){if(s=!1,!window.amplitude)return o("[Amplitude] Error: could not load SDK");d()},E.onerror=function(h){s=!1,o(h)};let v=document.getElementsByTagName("script")[0];v.parentNode.insertBefore(E,v)})}async function a(){if(s)return new Promise((_,c)=>{l.on(e,d=>{_(d)}),l.on(t,d=>{c(d)})});await r()}},"../monitor/src/logger.js":function(S,f,i){i.r(f),i.d(f,{default:function(){return _}});var m=i("../monitor/src/common/utils.js"),g=i("../monitor/src/common/variables.js"),s=i("../monitor/src/common/cookie.js"),l=i("../monitor/src/common/constants.js"),e=i("../monitor/src/monitor.js");let t=null,r=!1;class a{constructor(d){g.default.setEnv(d),this._category=d.product}logPV(){if(r)return Promise.resolve();let d={_act:"_pv",_ct:"_pv",_action_type:"Show",_element_type:"Page",...this._getCommonData()};return r=!0,this.sendLogs(d)}logEvent(d){let o={},{category:n,action:u,target:E,params:p,extras:I,_m:v,anchor:h,elementType:P,actionType:O,tk:T}=d;if(Object.assign(o,{_ct:n,_act:u,_lb:encodeURIComponent(E||""),_anchor_en_name:encodeURIComponent(h||""),_element_type:encodeURIComponent(P||""),_action_type:encodeURIComponent(O||""),...this._getCommonData()}),o._tk=T||o._tk,m.default.isArray(p)){let A=0,C=0;p.forEach((y,R)=>{if(m.default.isObject(y)){let{value:b,random:L}=y,j=encodeURIComponent(b);L?o[`_unlist${C++}`]=j:o[`_reser${A++}`]=j}else o[`_reser${R}`]=encodeURIComponent(y)})}else if(m.default.valueExists(p)){let A=p;m.default.isObject(p)&&(A=JSON.stringify(p));let C=encodeURIComponent(A);o._v=C,o._reser0=C}if(I){I.page=encodeURIComponent(window.location.href);let A={};Object.keys(I).forEach(C=>{A[`__${C}`]=I[C]}),Object.assign(o,A)}return v&&(o._m=v),this.sendLogs(o)}_getCommonData(){let d={...g.default.getEnv()};localStorage._tk&&(d.tk=localStorage._tk);let{src:o,sessionId:n=""}=sessionStorage,u=g.default.getClientValue("pageId"),E=g.default.getClientValue("channelId"),{deviceId:p=m.default.base64Id(),eventId:I=1,sequenceNumber:v=1}=JSON.parse(s.default.get("_monitor_extras")||"{}");s.default.set("_monitor_extras",JSON.stringify({deviceId:p,eventId:I+1,sequenceNumber:v+1}));let h=JSON.stringify({_amp_rejected:m.default.isTargetingCookiesRejected(),_device_id:p,_event_id:I,_sequence_number:v,_uuid:m.default.generateUUID()}),P={_cid:E,_pgid:u,_source:o,_session_id:encodeURIComponent(n.slice(0,256)),_page_url:encodeURIComponent(window.location.href.slice(0,256)),_extras:encodeURIComponent(h)};return Object.keys(d).forEach(O=>{P[`_${O}`]=encodeURIComponent(d[O])}),P}sendLogs(d){let o=[];if(Object.keys(d).forEach(n=>{let u=d[n];m.default.valueExists(u)?o.push(`${n}=${u}`):delete d[n]}),g.default.isDevTestEnv()){let{console:n}=window;return n.groupCollapsed(`dev monitor: ${d._ct} > ${d._act}`),n.log(decodeURIComponent(JSON.stringify(d,null,2))),n.groupEnd(),Promise.resolve()}return g.default.isInApp()&&window.jsbridge?window.jsbridge.getTK().then(n=>{if(n){let u=`_tk=${encodeURIComponent(n)}`,E=o.findIndex(p=>/^_tk/.test(p));E>-1?o[E]=u:o.push(u)}return this.addClientInfo(o.join("&"))}).catch(()=>this.addClientInfo(o.join("&"))):this.addClientInfo(o.join("&"))}addClientInfo(d){let o=`&_ts=${Date.now()}&_r=${Math.floor(m.default.cryptoRandom()*2147483648)}`,n=`${d}${o}`;return g.default.isInApp()&&window.jsbridge?window.jsbridge.getClientInfo().then(u=>{let E=u?`&_app_info=${encodeURIComponent(u)}`:"";return n=`${d}${E}${o}`,this.sendRequest(n)}).catch(u=>this.sendRequest(n)):this.sendRequest(n)}getApiPath(){return l.default.internalCategory.includes(this._category)?l.default.API_PATH.INTERNAL:g.default.isOKLink()?l.default.API_PATH.OKLINK:l.default.API_PATH.OKX}async sendRequest(d){let o=await g.default.getDeviceId(),n=`_mv=${l.default.DEBUG_KEY}&_uid=${encodeURIComponent(o)}&${d}`;return new Promise((u,E)=>{let p=g.default.isInExtension()&&!g.default.isMiniApp(),I=this.getApiPath();if(navigator.sendBeacon&&!p)navigator.sendBeacon(I,n),u();else{let v=p?e.default.dwApiEndpoint||`https://www.oklink.com${l.default.API_PATH.OKX}`:I,h=new XMLHttpRequest;h.open("POST",v),h.setRequestHeader(l.default.REQUEST_HEADERS.deviceId,o),h.onload=()=>h.status!==200?E(new Error(`Error ${h.status}:${h.statusText}`)):u(),h.onerror=()=>{E(new Error(`Error ${h.status}: ${h.statusText}`))},h.send(n),setTimeout(()=>{u()},150)}})}}function _(c){return t||(t=new a(c),t)}},"../monitor/src/monitor.js":function(S,f,i){i.r(f),i.d(f,{default:function(){return d}});var m=i("../monitor/src/common/utils.js"),g=i("../monitor/src/common/constants.js"),s=i("../monitor/src/common/variables.js"),l=i("../monitor/src/error.js"),e=i("../monitor/src/logger.js"),t=i("../monitor/src/global/attrs.js"),r=i("../monitor/src/amplitude.js"),a=i("../monitor/src/store.js"),_=i("../monitor/src/de-duplicate.js");let c=!1;class d{constructor(n){s.default.isInSSR()||(this.commonParams=n.commonParams||{},this._logger=(0,e.default)(n),this._category=n.product,n.withPV&&this.delayReportPV(),c||(this._initEventListener(),c=!0))}delayReportPV(){setTimeout(()=>{this.logPV()},1e3)}setApiEndpoint(n){d.apiEndpoint=n}setDWApiEndpoint(n){d.dwApiEndpoint=n}report(n){let{type:u,value:E}=n;if(s.default.isInSSR())return Promise.resolve();let p=E;return(m.default.isObject(p)||m.default.isArray(p))&&(p=JSON.stringify(p)),this._logger.logEvent({category:"performance",action:u,params:p})}logPV(){return this._logger.logPV()}logAmplitudeEvent(n,u,E){if(s.default.isInSSR()||s.default.shouldIgnoreAmpEvent())return Promise.resolve();let p="",I=!1;m.default.isObject(E)&&(p=E.ampProject,I=E.ignoreBackUp);let v={};for(let h in u)Object.prototype.hasOwnProperty.call(u,h)&&(v[h]=u[h]);if(v.monitor_after_navigation){delete v.monitor_after_navigation;let h=JSON.parse(sessionStorage.ampCacheEvents||"[]");return h.push([n,v]),sessionStorage.ampCacheEvents=JSON.stringify(h),Promise.resolve()}return r.default.getInstance(p).then(h=>{h.logEvent(n,{...v,site:s.default.getSiteInfo()},{language:s.default.getOkGlobal().locale}),I||this.act(n,u,{isSyncAMP:!1})})}resetAmplitudeUser(){return s.default.isInSSR()?Promise.resolve():r.default.getInstance().then(n=>(n.reset(),Promise.resolve()))}track(n,u,E,p){if(s.default.isInSSR())return Promise.resolve();let I={category:this._category,action:E,target:u,params:p,extras:{area:n}};if(m.default.isObject(n)){let{area:v,action:h,target:P,params:O}=n;Object.assign(I,{action:h,target:P,params:O,extras:{area:v}})}return this._logger.logEvent(I)}act(n){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isSyncAMP:!0};return s.default.isInSSR()||!(0,_.shouldReport)(n)?Promise.resolve():new Promise((p,I)=>{setTimeout(()=>{this._act(n,u,E).then(p,I)},0)})}async _act(n){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isSyncAMP:!0},{user_id:p,...I}=this.commonParams||{},v={web_mode_okx:m.default.isInArray(g.default.WEB3CATEGORY,this._category)?"wallet":"exchange"},P=Object.assign({},s.default.isOKEx()?v:{}),O=E?.tk||p,T={category:this._category,params:u,_m:"1"};m.default.isObject(u)&&(T.params=m.default.merge({...I,...P},u),P=m.default.merge(s.default.isOKLink()?{...I,...P}:P,u));let A;typeof n=="string"?(A=n,T.action=n):(A=n.action||n.anchor,T.action=A,T.anchor=n.anchor,T.actionType=n.actionType,T.elementType=n.elementType,T={...T,params:m.default.merge(T.params,n.params||{})},O=n.tk||O,P=m.default.merge(P,n.params)),T.tk=O;let{needDurationActions:C,needDurationActionParams:y,actionTriggerTimes:R,setActionTriggerTimes:b,setNeedDurationActionParams:L}=a.default.getState();if(s.default.isEnableAMP()&&E?.isSyncAMP){let j=n?.ampProject;this.logAmplitudeEvent(A,P,{ampProject:j,ignoreBackUp:!0})}return m.default.isInArray(C,A)?(R[A]=Date.now(),b(R),y[A]=T,L(y),Promise.resolve("The event will be reported when the page is closed")):this._logger.logEvent(T)}_initEventListener(){window.addEventListener("load",()=>{t.default.listen(this._logger)}),window.addEventListener("error",n=>{let u=l.default.getErrorInfo(n);l.default.isReported(u)||(this._logger.logEvent({category:"error",action:"report",extras:u}),l.default.rememberError(u))},!0),window.addEventListener("beforeunload",()=>{let{needDurationActions:n,needDurationActionParams:u,actionTriggerTimes:E,setNeedDurationActions:p,setNeedDurationActionParams:I,setActionTriggerTimes:v}=a.default.getState();n.length&&n.forEach(h=>{u[h].params.duration=Date.now()-E[h],this._logger.logEvent(u[h])}),p([]),I({}),v({})})}initABTest(n){let u="ab_experiment";n?.exper_flagKey&&n?.exper_variant&&(Object.assign(this.commonParams,n),this.act(u))}setCommonParams(n){this.commonParams={...this.commonParams,...n}}triggerReportDuration(n){let{needDurationActions:u,setNeedDurationActions:E}=a.default.getState();m.default.isInArray(u,n)||(u.push(n),E(u))}}},"../monitor/src/store.js":function(S,f,i){i.r(f);var m=i("../monitor/src/common/statex.js");let g=(0,m.default)(s=>({deviceId:"",needDurationActions:[],needDurationActionParams:{},actionTriggerTimes:{},setDeviceId:l=>s(()=>({deviceId:l})),setNeedDurationActions:l=>s(()=>({needDurationActions:l})),setNeedDurationActionParams:l=>s(()=>({needDurationActionParams:l})),setActionTriggerTimes:l=>s(()=>({actionTriggerTimes:l}))}));f.default=g},"../monitor/src/web.js":function(S,f,i){i.r(f);var m=i("../monitor/src/common/constants.js"),g=i("../monitor/src/common/seo.js"),s=i("../monitor/src/common/utils.js"),l=i("../monitor/src/monitor.js"),e=i("../monitor/src/common/variables.js"),t=i("../monitor/src/amplitude.js"),r=i("../monitor/src/store.js");let{MILLISECONDS_OF_30_DAYS:a}=m.default,_=(c,d)=>{if(e.default.isInSSR())return;let{pathname:o}=window.location;sessionStorage.channelId=c,e.default.toLocalStorage({key:"channelId",value:c,maxAge:a}),d?(sessionStorage.referralSrc=d,e.default.toLocalStorage({key:"referralSrc",value:d,maxAge:a})):(sessionStorage.removeItem("referralSrc"),e.default.removeLocalStorage("referralSrc")),sessionStorage.pageId=o,e.default.toLocalStorage({key:"pageId",value:o,maxAge:a})};f.default={monitor:{get amplitude(){return e.default.isInSSR()?{getAmplitudeSDKInstance(){return new Promise((d,o)=>{o("Currently not a browser environment!")})}}:t.default},newInstance(c){return e.default.isInSSR()?{setApiEndpoint(){},report(){return Promise.resolve()},logPV(){return Promise.resolve()},logAmplitudeEvent(){return Promise.resolve()},resetAmplitudeUser(){return Promise.resolve()},track(){return Promise.resolve()},act(){return Promise.resolve()},_initEventListener(){},initABTest(){return Promise.resolve()},setCommonParams(){},triggerReportDuration(){}}:new l.default(c)},saveChannelId(c){_(c)},getChannelId(){return sessionStorage.channelId},setDeviceId(c){let{setDeviceId:d}=r.default.getState();d(c)},getChannelContextFromUrl(c){return s.default.getChannelContext(s.default.getParsedUrl(c))}},parseUrl(){let c=s.default.getParsedUrl(window.location.href),d=c.searchParams.get("src");d&&sessionStorage.setItem("src",d),this.parseChannelId(c)},parseChannelId(c){let d=s.default.getChannelIdByUserAgent(),o=g.default.getSeoType(),n=s.default.getChannelContext(c),u=n.channelId,E=n.referralSrc;if(e.default.isInDesktop()&&d&&(u=d,E=""),!u&&o&&(u=o),u=s.default.filterXSS(u),u){_(u,E);return}e.default.syncUpLocalStorageToSessionStorage("channelId"),sessionStorage.getItem("channelId")&&(e.default.syncUpLocalStorageToSessionStorage("referralSrc"),e.default.syncUpLocalStorageToSessionStorage("pageId"))},init(){e.default.isInSSR()||(this.parseUrl(),!s.default.getCookie("first_ref")&&document.referrer&&s.default.setCookie("first_ref",document.referrer.slice(0,256),a),sessionStorage.getItem("sessionId")||sessionStorage.setItem("sessionId",window.location.href),window.utils=window.utils||{},window.utils.monitor=this.monitor)},saveChannelId(c){_(c)}}}},M={};function D(S){var f=M[S];if(f!==void 0)return f.exports;var i=M[S]={exports:{}};return k[S](i,i.exports,D),i.exports}(function(){D.d=function(S,f){for(var i in f)D.o(f,i)&&!D.o(S,i)&&Object.defineProperty(S,i,{enumerable:!0,get:f[i]})}})(),function(){D.o=function(S,f){return Object.prototype.hasOwnProperty.call(S,f)}}(),function(){D.r=function(S){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(S,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(S,"__esModule",{value:!0})}}();var w={};return function(){D.r(w);var S=D("../monitor/src/web.js");S.default.init(),w.default=S.default.monitor}(),w=w.default,w}()})});export{W as a};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-O6ZBO5JF.js.map
