import{b as Yn}from"./chunk-G55YEDT5.js";import{a as qs,b as Ds,c as Fs,d as Pr,e as Hs,f as Tr,g as Vn,h as Be,i as Gn,j as tr,k as $s,l as jn,m as be,n as we,o as Vs,p as Cr,q as Gs,r as js,s as Ys,t as uo,u as Nr}from"./chunk-K24XFWCI.js";import{x as Hn,z as $n}from"./chunk-KUW5VATV.js";import{a as co}from"./chunk-BNAVWOJ2.js";import{a as ao}from"./chunk-IG2Q5ALZ.js";import{a as H,c as Ws,d as Us,e as oo}from"./chunk-ZC7Q7LCH.js";import{c as Mr,f as Ue,h as ne,o as Lt,q as Rt}from"./chunk-6KXF36WM.js";var ri=Mr((ei,Qn)=>{Lt();Rt();(function(o,t){"use strict";function e(w,s){if(!w)throw new Error(s||"Assertion failed")}function r(w,s){w.super_=s;var u=function(){};u.prototype=s.prototype,w.prototype=new u,w.prototype.constructor=w}function n(w,s,u){if(n.isBN(w))return w;this.negative=0,this.words=null,this.length=0,this.red=null,w!==null&&((s==="le"||s==="be")&&(u=s,s=10),this._init(w||0,s||10,u||"be"))}typeof o=="object"?o.exports=n:t.BN=n,n.BN=n,n.wordSize=26;var i;try{typeof window<"u"&&typeof window.Buffer<"u"?i=window.Buffer:i=Us().Buffer}catch{}n.isBN=function(s){return s instanceof n?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===n.wordSize&&Array.isArray(s.words)},n.max=function(s,u){return s.cmp(u)>0?s:u},n.min=function(s,u){return s.cmp(u)<0?s:u},n.prototype._init=function(s,u,h){if(typeof s=="number")return this._initNumber(s,u,h);if(typeof s=="object")return this._initArray(s,u,h);u==="hex"&&(u=16),e(u===(u|0)&&u>=2&&u<=36),s=s.toString().replace(/\s+/g,"");var l=0;s[0]==="-"&&(l++,this.negative=1),l<s.length&&(u===16?this._parseHex(s,l,h):(this._parseBase(s,u,l),h==="le"&&this._initArray(this.toArray(),u,h)))},n.prototype._initNumber=function(s,u,h){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(e(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),u,h)},n.prototype._initArray=function(s,u,h){if(e(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var l=0;l<this.length;l++)this.words[l]=0;var d,b,k=0;if(h==="be")for(l=s.length-1,d=0;l>=0;l-=3)b=s[l]|s[l-1]<<8|s[l-2]<<16,this.words[d]|=b<<k&67108863,this.words[d+1]=b>>>26-k&67108863,k+=24,k>=26&&(k-=26,d++);else if(h==="le")for(l=0,d=0;l<s.length;l+=3)b=s[l]|s[l+1]<<8|s[l+2]<<16,this.words[d]|=b<<k&67108863,this.words[d+1]=b>>>26-k&67108863,k+=24,k>=26&&(k-=26,d++);return this._strip()};function c(w,s){var u=w.charCodeAt(s);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;e(!1,"Invalid character in "+w)}function f(w,s,u){var h=c(w,u);return u-1>=s&&(h|=c(w,u-1)<<4),h}n.prototype._parseHex=function(s,u,h){this.length=Math.ceil((s.length-u)/6),this.words=new Array(this.length);for(var l=0;l<this.length;l++)this.words[l]=0;var d=0,b=0,k;if(h==="be")for(l=s.length-1;l>=u;l-=2)k=f(s,u,l)<<d,this.words[b]|=k&67108863,d>=18?(d-=18,b+=1,this.words[b]|=k>>>26):d+=8;else{var p=s.length-u;for(l=p%2===0?u+1:u;l<s.length;l+=2)k=f(s,u,l)<<d,this.words[b]|=k&67108863,d>=18?(d-=18,b+=1,this.words[b]|=k>>>26):d+=8}this._strip()};function g(w,s,u,h){for(var l=0,d=0,b=Math.min(w.length,u),k=s;k<b;k++){var p=w.charCodeAt(k)-48;l*=h,p>=49?d=p-49+10:p>=17?d=p-17+10:d=p,e(p>=0&&d<h,"Invalid character"),l+=d}return l}n.prototype._parseBase=function(s,u,h){this.words=[0],this.length=1;for(var l=0,d=1;d<=67108863;d*=u)l++;l--,d=d/u|0;for(var b=s.length-h,k=b%l,p=Math.min(b,b-k)+h,a=0,y=h;y<p;y+=l)a=g(s,y,y+l,u),this.imuln(d),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(k!==0){var P=1;for(a=g(s,y,s.length,u),y=0;y<k;y++)P*=u;this.imuln(P),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}this._strip()},n.prototype.copy=function(s){s.words=new Array(this.length);for(var u=0;u<this.length;u++)s.words[u]=this.words[u];s.length=this.length,s.negative=this.negative,s.red=this.red};function x(w,s){w.words=s.words,w.length=s.length,w.negative=s.negative,w.red=s.red}if(n.prototype._move=function(s){x(s,this)},n.prototype.clone=function(){var s=new n(null);return this.copy(s),s},n.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},n.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=v}catch{n.prototype.inspect=v}else n.prototype.inspect=v;function v(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var A=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(s,u){s=s||10,u=u|0||1;var h;if(s===16||s==="hex"){h="";for(var l=0,d=0,b=0;b<this.length;b++){var k=this.words[b],p=((k<<l|d)&16777215).toString(16);d=k>>>24-l&16777215,l+=2,l>=26&&(l-=26,b--),d!==0||b!==this.length-1?h=A[6-p.length]+p+h:h=p+h}for(d!==0&&(h=d.toString(16)+h);h.length%u!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(s===(s|0)&&s>=2&&s<=36){var a=M[s],y=_[s];h="";var P=this.clone();for(P.negative=0;!P.isZero();){var O=P.modrn(y).toString(s);P=P.idivn(y),P.isZero()?h=O+h:h=A[a-O.length]+O+h}for(this.isZero()&&(h="0"+h);h.length%u!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}e(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&e(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},n.prototype.toJSON=function(){return this.toString(16,2)},i&&(n.prototype.toBuffer=function(s,u){return this.toArrayLike(i,s,u)}),n.prototype.toArray=function(s,u){return this.toArrayLike(Array,s,u)};var E=function(s,u){return s.allocUnsafe?s.allocUnsafe(u):new s(u)};n.prototype.toArrayLike=function(s,u,h){this._strip();var l=this.byteLength(),d=h||Math.max(1,l);e(l<=d,"byte array longer than desired length"),e(d>0,"Requested array length <= 0");var b=E(s,d),k=u==="le"?"LE":"BE";return this["_toArrayLike"+k](b,l),b},n.prototype._toArrayLikeLE=function(s,u){for(var h=0,l=0,d=0,b=0;d<this.length;d++){var k=this.words[d]<<b|l;s[h++]=k&255,h<s.length&&(s[h++]=k>>8&255),h<s.length&&(s[h++]=k>>16&255),b===6?(h<s.length&&(s[h++]=k>>24&255),l=0,b=0):(l=k>>>24,b+=2)}if(h<s.length)for(s[h++]=l;h<s.length;)s[h++]=0},n.prototype._toArrayLikeBE=function(s,u){for(var h=s.length-1,l=0,d=0,b=0;d<this.length;d++){var k=this.words[d]<<b|l;s[h--]=k&255,h>=0&&(s[h--]=k>>8&255),h>=0&&(s[h--]=k>>16&255),b===6?(h>=0&&(s[h--]=k>>24&255),l=0,b=0):(l=k>>>24,b+=2)}if(h>=0)for(s[h--]=l;h>=0;)s[h--]=0},Math.clz32?n.prototype._countBits=function(s){return 32-Math.clz32(s)}:n.prototype._countBits=function(s){var u=s,h=0;return u>=4096&&(h+=13,u>>>=13),u>=64&&(h+=7,u>>>=7),u>=8&&(h+=4,u>>>=4),u>=2&&(h+=2,u>>>=2),h+u},n.prototype._zeroBits=function(s){if(s===0)return 26;var u=s,h=0;return(u&8191)===0&&(h+=13,u>>>=13),(u&127)===0&&(h+=7,u>>>=7),(u&15)===0&&(h+=4,u>>>=4),(u&3)===0&&(h+=2,u>>>=2),(u&1)===0&&h++,h},n.prototype.bitLength=function(){var s=this.words[this.length-1],u=this._countBits(s);return(this.length-1)*26+u};function B(w){for(var s=new Array(w.bitLength()),u=0;u<s.length;u++){var h=u/26|0,l=u%26;s[u]=w.words[h]>>>l&1}return s}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,u=0;u<this.length;u++){var h=this._zeroBits(this.words[u]);if(s+=h,h!==26)break}return s},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},n.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var u=0;u<s.length;u++)this.words[u]=this.words[u]|s.words[u];return this._strip()},n.prototype.ior=function(s){return e((this.negative|s.negative)===0),this.iuor(s)},n.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},n.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},n.prototype.iuand=function(s){var u;this.length>s.length?u=s:u=this;for(var h=0;h<u.length;h++)this.words[h]=this.words[h]&s.words[h];return this.length=u.length,this._strip()},n.prototype.iand=function(s){return e((this.negative|s.negative)===0),this.iuand(s)},n.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},n.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},n.prototype.iuxor=function(s){var u,h;this.length>s.length?(u=this,h=s):(u=s,h=this);for(var l=0;l<h.length;l++)this.words[l]=u.words[l]^h.words[l];if(this!==u)for(;l<u.length;l++)this.words[l]=u.words[l];return this.length=u.length,this._strip()},n.prototype.ixor=function(s){return e((this.negative|s.negative)===0),this.iuxor(s)},n.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},n.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},n.prototype.inotn=function(s){e(typeof s=="number"&&s>=0);var u=Math.ceil(s/26)|0,h=s%26;this._expand(u),h>0&&u--;for(var l=0;l<u;l++)this.words[l]=~this.words[l]&67108863;return h>0&&(this.words[l]=~this.words[l]&67108863>>26-h),this._strip()},n.prototype.notn=function(s){return this.clone().inotn(s)},n.prototype.setn=function(s,u){e(typeof s=="number"&&s>=0);var h=s/26|0,l=s%26;return this._expand(h+1),u?this.words[h]=this.words[h]|1<<l:this.words[h]=this.words[h]&~(1<<l),this._strip()},n.prototype.iadd=function(s){var u;if(this.negative!==0&&s.negative===0)return this.negative=0,u=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,u=this.isub(s),s.negative=1,u._normSign();var h,l;this.length>s.length?(h=this,l=s):(h=s,l=this);for(var d=0,b=0;b<l.length;b++)u=(h.words[b]|0)+(l.words[b]|0)+d,this.words[b]=u&67108863,d=u>>>26;for(;d!==0&&b<h.length;b++)u=(h.words[b]|0)+d,this.words[b]=u&67108863,d=u>>>26;if(this.length=h.length,d!==0)this.words[this.length]=d,this.length++;else if(h!==this)for(;b<h.length;b++)this.words[b]=h.words[b];return this},n.prototype.add=function(s){var u;return s.negative!==0&&this.negative===0?(s.negative=0,u=this.sub(s),s.negative^=1,u):s.negative===0&&this.negative!==0?(this.negative=0,u=s.sub(this),this.negative=1,u):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},n.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var u=this.iadd(s);return s.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var h=this.cmp(s);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var l,d;h>0?(l=this,d=s):(l=s,d=this);for(var b=0,k=0;k<d.length;k++)u=(l.words[k]|0)-(d.words[k]|0)+b,b=u>>26,this.words[k]=u&67108863;for(;b!==0&&k<l.length;k++)u=(l.words[k]|0)+b,b=u>>26,this.words[k]=u&67108863;if(b===0&&k<l.length&&l!==this)for(;k<l.length;k++)this.words[k]=l.words[k];return this.length=Math.max(this.length,k),l!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(s){return this.clone().isub(s)};function R(w,s,u){u.negative=s.negative^w.negative;var h=w.length+s.length|0;u.length=h,h=h-1|0;var l=w.words[0]|0,d=s.words[0]|0,b=l*d,k=b&67108863,p=b/67108864|0;u.words[0]=k;for(var a=1;a<h;a++){for(var y=p>>>26,P=p&67108863,O=Math.min(a,s.length-1),U=Math.max(0,a-w.length+1);U<=O;U++){var F=a-U|0;l=w.words[F]|0,d=s.words[U]|0,b=l*d+P,y+=b/67108864|0,P=b&67108863}u.words[a]=P|0,p=y|0}return p!==0?u.words[a]=p|0:u.length--,u._strip()}var q=function(s,u,h){var l=s.words,d=u.words,b=h.words,k=0,p,a,y,P=l[0]|0,O=P&8191,U=P>>>13,F=l[1]|0,j=F&8191,X=F>>>13,Pt=l[2]|0,tt=Pt&8191,nt=Pt>>>13,We=l[3]|0,yt=We&8191,gt=We>>>13,Ar=l[4]|0,_t=Ar&8191,Bt=Ar>>>13,Er=l[5]|0,mt=Er&8191,bt=Er>>>13,Qe=l[6]|0,wt=Qe&8191,kt=Qe>>>13,fr=l[7]|0,vt=fr&8191,St=fr>>>13,Lr=l[8]|0,At=Lr&8191,Et=Lr>>>13,Rr=l[9]|0,Ct=Rr&8191,Nt=Rr>>>13,Ls=d[0]|0,Ot=Ls&8191,zt=Ls>>>13,Rs=d[1]|0,Kt=Rs&8191,Wt=Rs>>>13,Ms=d[2]|0,Ut=Ms&8191,qt=Ms>>>13,Ps=d[3]|0,Dt=Ps&8191,Ft=Ps>>>13,Ts=d[4]|0,Ht=Ts&8191,$t=Ts>>>13,Cs=d[5]|0,Vt=Cs&8191,Gt=Cs>>>13,Ns=d[6]|0,jt=Ns&8191,Yt=Ns>>>13,Os=d[7]|0,Zt=Os&8191,Jt=Os>>>13,zs=d[8]|0,Xt=zs&8191,Qt=zs>>>13,Ks=d[9]|0,te=Ks&8191,ee=Ks>>>13;h.negative=s.negative^u.negative,h.length=19,p=Math.imul(O,Ot),a=Math.imul(O,zt),a=a+Math.imul(U,Ot)|0,y=Math.imul(U,zt);var _n=(k+p|0)+((a&8191)<<13)|0;k=(y+(a>>>13)|0)+(_n>>>26)|0,_n&=67108863,p=Math.imul(j,Ot),a=Math.imul(j,zt),a=a+Math.imul(X,Ot)|0,y=Math.imul(X,zt),p=p+Math.imul(O,Kt)|0,a=a+Math.imul(O,Wt)|0,a=a+Math.imul(U,Kt)|0,y=y+Math.imul(U,Wt)|0;var Bn=(k+p|0)+((a&8191)<<13)|0;k=(y+(a>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,p=Math.imul(tt,Ot),a=Math.imul(tt,zt),a=a+Math.imul(nt,Ot)|0,y=Math.imul(nt,zt),p=p+Math.imul(j,Kt)|0,a=a+Math.imul(j,Wt)|0,a=a+Math.imul(X,Kt)|0,y=y+Math.imul(X,Wt)|0,p=p+Math.imul(O,Ut)|0,a=a+Math.imul(O,qt)|0,a=a+Math.imul(U,Ut)|0,y=y+Math.imul(U,qt)|0;var An=(k+p|0)+((a&8191)<<13)|0;k=(y+(a>>>13)|0)+(An>>>26)|0,An&=67108863,p=Math.imul(yt,Ot),a=Math.imul(yt,zt),a=a+Math.imul(gt,Ot)|0,y=Math.imul(gt,zt),p=p+Math.imul(tt,Kt)|0,a=a+Math.imul(tt,Wt)|0,a=a+Math.imul(nt,Kt)|0,y=y+Math.imul(nt,Wt)|0,p=p+Math.imul(j,Ut)|0,a=a+Math.imul(j,qt)|0,a=a+Math.imul(X,Ut)|0,y=y+Math.imul(X,qt)|0,p=p+Math.imul(O,Dt)|0,a=a+Math.imul(O,Ft)|0,a=a+Math.imul(U,Dt)|0,y=y+Math.imul(U,Ft)|0;var En=(k+p|0)+((a&8191)<<13)|0;k=(y+(a>>>13)|0)+(En>>>26)|0,En&=67108863,p=Math.imul(_t,Ot),a=Math.imul(_t,zt),a=a+Math.imul(Bt,Ot)|0,y=Math.imul(Bt,zt),p=p+Math.imul(yt,Kt)|0,a=a+Math.imul(yt,Wt)|0,a=a+Math.imul(gt,Kt)|0,y=y+Math.imul(gt,Wt)|0,p=p+Math.imul(tt,Ut)|0,a=a+Math.imul(tt,qt)|0,a=a+Math.imul(nt,Ut)|0,y=y+Math.imul(nt,qt)|0,p=p+Math.imul(j,Dt)|0,a=a+Math.imul(j,Ft)|0,a=a+Math.imul(X,Dt)|0,y=y+Math.imul(X,Ft)|0,p=p+Math.imul(O,Ht)|0,a=a+Math.imul(O,$t)|0,a=a+Math.imul(U,Ht)|0,y=y+Math.imul(U,$t)|0;var Ln=(k+p|0)+((a&8191)<<13)|0;k=(y+(a>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,p=Math.imul(mt,Ot),a=Math.imul(mt,zt),a=a+Math.imul(bt,Ot)|0,y=Math.imul(bt,zt),p=p+Math.imul(_t,Kt)|0,a=a+Math.imul(_t,Wt)|0,a=a+Math.imul(Bt,Kt)|0,y=y+Math.imul(Bt,Wt)|0,p=p+Math.imul(yt,Ut)|0,a=a+Math.imul(yt,qt)|0,a=a+Math.imul(gt,Ut)|0,y=y+Math.imul(gt,qt)|0,p=p+Math.imul(tt,Dt)|0,a=a+Math.imul(tt,Ft)|0,a=a+Math.imul(nt,Dt)|0,y=y+Math.imul(nt,Ft)|0,p=p+Math.imul(j,Ht)|0,a=a+Math.imul(j,$t)|0,a=a+Math.imul(X,Ht)|0,y=y+Math.imul(X,$t)|0,p=p+Math.imul(O,Vt)|0,a=a+Math.imul(O,Gt)|0,a=a+Math.imul(U,Vt)|0,y=y+Math.imul(U,Gt)|0;var Rn=(k+p|0)+((a&8191)<<13)|0;k=(y+(a>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,p=Math.imul(wt,Ot),a=Math.imul(wt,zt),a=a+Math.imul(kt,Ot)|0,y=Math.imul(kt,zt),p=p+Math.imul(mt,Kt)|0,a=a+Math.imul(mt,Wt)|0,a=a+Math.imul(bt,Kt)|0,y=y+Math.imul(bt,Wt)|0,p=p+Math.imul(_t,Ut)|0,a=a+Math.imul(_t,qt)|0,a=a+Math.imul(Bt,Ut)|0,y=y+Math.imul(Bt,qt)|0,p=p+Math.imul(yt,Dt)|0,a=a+Math.imul(yt,Ft)|0,a=a+Math.imul(gt,Dt)|0,y=y+Math.imul(gt,Ft)|0,p=p+Math.imul(tt,Ht)|0,a=a+Math.imul(tt,$t)|0,a=a+Math.imul(nt,Ht)|0,y=y+Math.imul(nt,$t)|0,p=p+Math.imul(j,Vt)|0,a=a+Math.imul(j,Gt)|0,a=a+Math.imul(X,Vt)|0,y=y+Math.imul(X,Gt)|0,p=p+Math.imul(O,jt)|0,a=a+Math.imul(O,Yt)|0,a=a+Math.imul(U,jt)|0,y=y+Math.imul(U,Yt)|0;var Mn=(k+p|0)+((a&8191)<<13)|0;k=(y+(a>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,p=Math.imul(vt,Ot),a=Math.imul(vt,zt),a=a+Math.imul(St,Ot)|0,y=Math.imul(St,zt),p=p+Math.imul(wt,Kt)|0,a=a+Math.imul(wt,Wt)|0,a=a+Math.imul(kt,Kt)|0,y=y+Math.imul(kt,Wt)|0,p=p+Math.imul(mt,Ut)|0,a=a+Math.imul(mt,qt)|0,a=a+Math.imul(bt,Ut)|0,y=y+Math.imul(bt,qt)|0,p=p+Math.imul(_t,Dt)|0,a=a+Math.imul(_t,Ft)|0,a=a+Math.imul(Bt,Dt)|0,y=y+Math.imul(Bt,Ft)|0,p=p+Math.imul(yt,Ht)|0,a=a+Math.imul(yt,$t)|0,a=a+Math.imul(gt,Ht)|0,y=y+Math.imul(gt,$t)|0,p=p+Math.imul(tt,Vt)|0,a=a+Math.imul(tt,Gt)|0,a=a+Math.imul(nt,Vt)|0,y=y+Math.imul(nt,Gt)|0,p=p+Math.imul(j,jt)|0,a=a+Math.imul(j,Yt)|0,a=a+Math.imul(X,jt)|0,y=y+Math.imul(X,Yt)|0,p=p+Math.imul(O,Zt)|0,a=a+Math.imul(O,Jt)|0,a=a+Math.imul(U,Zt)|0,y=y+Math.imul(U,Jt)|0;var Pn=(k+p|0)+((a&8191)<<13)|0;k=(y+(a>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,p=Math.imul(At,Ot),a=Math.imul(At,zt),a=a+Math.imul(Et,Ot)|0,y=Math.imul(Et,zt),p=p+Math.imul(vt,Kt)|0,a=a+Math.imul(vt,Wt)|0,a=a+Math.imul(St,Kt)|0,y=y+Math.imul(St,Wt)|0,p=p+Math.imul(wt,Ut)|0,a=a+Math.imul(wt,qt)|0,a=a+Math.imul(kt,Ut)|0,y=y+Math.imul(kt,qt)|0,p=p+Math.imul(mt,Dt)|0,a=a+Math.imul(mt,Ft)|0,a=a+Math.imul(bt,Dt)|0,y=y+Math.imul(bt,Ft)|0,p=p+Math.imul(_t,Ht)|0,a=a+Math.imul(_t,$t)|0,a=a+Math.imul(Bt,Ht)|0,y=y+Math.imul(Bt,$t)|0,p=p+Math.imul(yt,Vt)|0,a=a+Math.imul(yt,Gt)|0,a=a+Math.imul(gt,Vt)|0,y=y+Math.imul(gt,Gt)|0,p=p+Math.imul(tt,jt)|0,a=a+Math.imul(tt,Yt)|0,a=a+Math.imul(nt,jt)|0,y=y+Math.imul(nt,Yt)|0,p=p+Math.imul(j,Zt)|0,a=a+Math.imul(j,Jt)|0,a=a+Math.imul(X,Zt)|0,y=y+Math.imul(X,Jt)|0,p=p+Math.imul(O,Xt)|0,a=a+Math.imul(O,Qt)|0,a=a+Math.imul(U,Xt)|0,y=y+Math.imul(U,Qt)|0;var Tn=(k+p|0)+((a&8191)<<13)|0;k=(y+(a>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,p=Math.imul(Ct,Ot),a=Math.imul(Ct,zt),a=a+Math.imul(Nt,Ot)|0,y=Math.imul(Nt,zt),p=p+Math.imul(At,Kt)|0,a=a+Math.imul(At,Wt)|0,a=a+Math.imul(Et,Kt)|0,y=y+Math.imul(Et,Wt)|0,p=p+Math.imul(vt,Ut)|0,a=a+Math.imul(vt,qt)|0,a=a+Math.imul(St,Ut)|0,y=y+Math.imul(St,qt)|0,p=p+Math.imul(wt,Dt)|0,a=a+Math.imul(wt,Ft)|0,a=a+Math.imul(kt,Dt)|0,y=y+Math.imul(kt,Ft)|0,p=p+Math.imul(mt,Ht)|0,a=a+Math.imul(mt,$t)|0,a=a+Math.imul(bt,Ht)|0,y=y+Math.imul(bt,$t)|0,p=p+Math.imul(_t,Vt)|0,a=a+Math.imul(_t,Gt)|0,a=a+Math.imul(Bt,Vt)|0,y=y+Math.imul(Bt,Gt)|0,p=p+Math.imul(yt,jt)|0,a=a+Math.imul(yt,Yt)|0,a=a+Math.imul(gt,jt)|0,y=y+Math.imul(gt,Yt)|0,p=p+Math.imul(tt,Zt)|0,a=a+Math.imul(tt,Jt)|0,a=a+Math.imul(nt,Zt)|0,y=y+Math.imul(nt,Jt)|0,p=p+Math.imul(j,Xt)|0,a=a+Math.imul(j,Qt)|0,a=a+Math.imul(X,Xt)|0,y=y+Math.imul(X,Qt)|0,p=p+Math.imul(O,te)|0,a=a+Math.imul(O,ee)|0,a=a+Math.imul(U,te)|0,y=y+Math.imul(U,ee)|0;var Cn=(k+p|0)+((a&8191)<<13)|0;k=(y+(a>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,p=Math.imul(Ct,Kt),a=Math.imul(Ct,Wt),a=a+Math.imul(Nt,Kt)|0,y=Math.imul(Nt,Wt),p=p+Math.imul(At,Ut)|0,a=a+Math.imul(At,qt)|0,a=a+Math.imul(Et,Ut)|0,y=y+Math.imul(Et,qt)|0,p=p+Math.imul(vt,Dt)|0,a=a+Math.imul(vt,Ft)|0,a=a+Math.imul(St,Dt)|0,y=y+Math.imul(St,Ft)|0,p=p+Math.imul(wt,Ht)|0,a=a+Math.imul(wt,$t)|0,a=a+Math.imul(kt,Ht)|0,y=y+Math.imul(kt,$t)|0,p=p+Math.imul(mt,Vt)|0,a=a+Math.imul(mt,Gt)|0,a=a+Math.imul(bt,Vt)|0,y=y+Math.imul(bt,Gt)|0,p=p+Math.imul(_t,jt)|0,a=a+Math.imul(_t,Yt)|0,a=a+Math.imul(Bt,jt)|0,y=y+Math.imul(Bt,Yt)|0,p=p+Math.imul(yt,Zt)|0,a=a+Math.imul(yt,Jt)|0,a=a+Math.imul(gt,Zt)|0,y=y+Math.imul(gt,Jt)|0,p=p+Math.imul(tt,Xt)|0,a=a+Math.imul(tt,Qt)|0,a=a+Math.imul(nt,Xt)|0,y=y+Math.imul(nt,Qt)|0,p=p+Math.imul(j,te)|0,a=a+Math.imul(j,ee)|0,a=a+Math.imul(X,te)|0,y=y+Math.imul(X,ee)|0;var Nn=(k+p|0)+((a&8191)<<13)|0;k=(y+(a>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,p=Math.imul(Ct,Ut),a=Math.imul(Ct,qt),a=a+Math.imul(Nt,Ut)|0,y=Math.imul(Nt,qt),p=p+Math.imul(At,Dt)|0,a=a+Math.imul(At,Ft)|0,a=a+Math.imul(Et,Dt)|0,y=y+Math.imul(Et,Ft)|0,p=p+Math.imul(vt,Ht)|0,a=a+Math.imul(vt,$t)|0,a=a+Math.imul(St,Ht)|0,y=y+Math.imul(St,$t)|0,p=p+Math.imul(wt,Vt)|0,a=a+Math.imul(wt,Gt)|0,a=a+Math.imul(kt,Vt)|0,y=y+Math.imul(kt,Gt)|0,p=p+Math.imul(mt,jt)|0,a=a+Math.imul(mt,Yt)|0,a=a+Math.imul(bt,jt)|0,y=y+Math.imul(bt,Yt)|0,p=p+Math.imul(_t,Zt)|0,a=a+Math.imul(_t,Jt)|0,a=a+Math.imul(Bt,Zt)|0,y=y+Math.imul(Bt,Jt)|0,p=p+Math.imul(yt,Xt)|0,a=a+Math.imul(yt,Qt)|0,a=a+Math.imul(gt,Xt)|0,y=y+Math.imul(gt,Qt)|0,p=p+Math.imul(tt,te)|0,a=a+Math.imul(tt,ee)|0,a=a+Math.imul(nt,te)|0,y=y+Math.imul(nt,ee)|0;var On=(k+p|0)+((a&8191)<<13)|0;k=(y+(a>>>13)|0)+(On>>>26)|0,On&=67108863,p=Math.imul(Ct,Dt),a=Math.imul(Ct,Ft),a=a+Math.imul(Nt,Dt)|0,y=Math.imul(Nt,Ft),p=p+Math.imul(At,Ht)|0,a=a+Math.imul(At,$t)|0,a=a+Math.imul(Et,Ht)|0,y=y+Math.imul(Et,$t)|0,p=p+Math.imul(vt,Vt)|0,a=a+Math.imul(vt,Gt)|0,a=a+Math.imul(St,Vt)|0,y=y+Math.imul(St,Gt)|0,p=p+Math.imul(wt,jt)|0,a=a+Math.imul(wt,Yt)|0,a=a+Math.imul(kt,jt)|0,y=y+Math.imul(kt,Yt)|0,p=p+Math.imul(mt,Zt)|0,a=a+Math.imul(mt,Jt)|0,a=a+Math.imul(bt,Zt)|0,y=y+Math.imul(bt,Jt)|0,p=p+Math.imul(_t,Xt)|0,a=a+Math.imul(_t,Qt)|0,a=a+Math.imul(Bt,Xt)|0,y=y+Math.imul(Bt,Qt)|0,p=p+Math.imul(yt,te)|0,a=a+Math.imul(yt,ee)|0,a=a+Math.imul(gt,te)|0,y=y+Math.imul(gt,ee)|0;var zn=(k+p|0)+((a&8191)<<13)|0;k=(y+(a>>>13)|0)+(zn>>>26)|0,zn&=67108863,p=Math.imul(Ct,Ht),a=Math.imul(Ct,$t),a=a+Math.imul(Nt,Ht)|0,y=Math.imul(Nt,$t),p=p+Math.imul(At,Vt)|0,a=a+Math.imul(At,Gt)|0,a=a+Math.imul(Et,Vt)|0,y=y+Math.imul(Et,Gt)|0,p=p+Math.imul(vt,jt)|0,a=a+Math.imul(vt,Yt)|0,a=a+Math.imul(St,jt)|0,y=y+Math.imul(St,Yt)|0,p=p+Math.imul(wt,Zt)|0,a=a+Math.imul(wt,Jt)|0,a=a+Math.imul(kt,Zt)|0,y=y+Math.imul(kt,Jt)|0,p=p+Math.imul(mt,Xt)|0,a=a+Math.imul(mt,Qt)|0,a=a+Math.imul(bt,Xt)|0,y=y+Math.imul(bt,Qt)|0,p=p+Math.imul(_t,te)|0,a=a+Math.imul(_t,ee)|0,a=a+Math.imul(Bt,te)|0,y=y+Math.imul(Bt,ee)|0;var Kn=(k+p|0)+((a&8191)<<13)|0;k=(y+(a>>>13)|0)+(Kn>>>26)|0,Kn&=67108863,p=Math.imul(Ct,Vt),a=Math.imul(Ct,Gt),a=a+Math.imul(Nt,Vt)|0,y=Math.imul(Nt,Gt),p=p+Math.imul(At,jt)|0,a=a+Math.imul(At,Yt)|0,a=a+Math.imul(Et,jt)|0,y=y+Math.imul(Et,Yt)|0,p=p+Math.imul(vt,Zt)|0,a=a+Math.imul(vt,Jt)|0,a=a+Math.imul(St,Zt)|0,y=y+Math.imul(St,Jt)|0,p=p+Math.imul(wt,Xt)|0,a=a+Math.imul(wt,Qt)|0,a=a+Math.imul(kt,Xt)|0,y=y+Math.imul(kt,Qt)|0,p=p+Math.imul(mt,te)|0,a=a+Math.imul(mt,ee)|0,a=a+Math.imul(bt,te)|0,y=y+Math.imul(bt,ee)|0;var Wn=(k+p|0)+((a&8191)<<13)|0;k=(y+(a>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,p=Math.imul(Ct,jt),a=Math.imul(Ct,Yt),a=a+Math.imul(Nt,jt)|0,y=Math.imul(Nt,Yt),p=p+Math.imul(At,Zt)|0,a=a+Math.imul(At,Jt)|0,a=a+Math.imul(Et,Zt)|0,y=y+Math.imul(Et,Jt)|0,p=p+Math.imul(vt,Xt)|0,a=a+Math.imul(vt,Qt)|0,a=a+Math.imul(St,Xt)|0,y=y+Math.imul(St,Qt)|0,p=p+Math.imul(wt,te)|0,a=a+Math.imul(wt,ee)|0,a=a+Math.imul(kt,te)|0,y=y+Math.imul(kt,ee)|0;var Un=(k+p|0)+((a&8191)<<13)|0;k=(y+(a>>>13)|0)+(Un>>>26)|0,Un&=67108863,p=Math.imul(Ct,Zt),a=Math.imul(Ct,Jt),a=a+Math.imul(Nt,Zt)|0,y=Math.imul(Nt,Jt),p=p+Math.imul(At,Xt)|0,a=a+Math.imul(At,Qt)|0,a=a+Math.imul(Et,Xt)|0,y=y+Math.imul(Et,Qt)|0,p=p+Math.imul(vt,te)|0,a=a+Math.imul(vt,ee)|0,a=a+Math.imul(St,te)|0,y=y+Math.imul(St,ee)|0;var qn=(k+p|0)+((a&8191)<<13)|0;k=(y+(a>>>13)|0)+(qn>>>26)|0,qn&=67108863,p=Math.imul(Ct,Xt),a=Math.imul(Ct,Qt),a=a+Math.imul(Nt,Xt)|0,y=Math.imul(Nt,Qt),p=p+Math.imul(At,te)|0,a=a+Math.imul(At,ee)|0,a=a+Math.imul(Et,te)|0,y=y+Math.imul(Et,ee)|0;var Dn=(k+p|0)+((a&8191)<<13)|0;k=(y+(a>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,p=Math.imul(Ct,te),a=Math.imul(Ct,ee),a=a+Math.imul(Nt,te)|0,y=Math.imul(Nt,ee);var Fn=(k+p|0)+((a&8191)<<13)|0;return k=(y+(a>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,b[0]=_n,b[1]=Bn,b[2]=An,b[3]=En,b[4]=Ln,b[5]=Rn,b[6]=Mn,b[7]=Pn,b[8]=Tn,b[9]=Cn,b[10]=Nn,b[11]=On,b[12]=zn,b[13]=Kn,b[14]=Wn,b[15]=Un,b[16]=qn,b[17]=Dn,b[18]=Fn,k!==0&&(b[19]=k,h.length++),h};Math.imul||(q=R);function G(w,s,u){u.negative=s.negative^w.negative,u.length=w.length+s.length;for(var h=0,l=0,d=0;d<u.length-1;d++){var b=l;l=0;for(var k=h&67108863,p=Math.min(d,s.length-1),a=Math.max(0,d-w.length+1);a<=p;a++){var y=d-a,P=w.words[y]|0,O=s.words[a]|0,U=P*O,F=U&67108863;b=b+(U/67108864|0)|0,F=F+k|0,k=F&67108863,b=b+(F>>>26)|0,l+=b>>>26,b&=67108863}u.words[d]=k,h=b,b=l}return h!==0?u.words[d]=h:u.length--,u._strip()}function W(w,s,u){return G(w,s,u)}n.prototype.mulTo=function(s,u){var h,l=this.length+s.length;return this.length===10&&s.length===10?h=q(this,s,u):l<63?h=R(this,s,u):l<1024?h=G(this,s,u):h=W(this,s,u),h};function V(w,s){this.x=w,this.y=s}V.prototype.makeRBT=function(s){for(var u=new Array(s),h=n.prototype._countBits(s)-1,l=0;l<s;l++)u[l]=this.revBin(l,h,s);return u},V.prototype.revBin=function(s,u,h){if(s===0||s===h-1)return s;for(var l=0,d=0;d<u;d++)l|=(s&1)<<u-d-1,s>>=1;return l},V.prototype.permute=function(s,u,h,l,d,b){for(var k=0;k<b;k++)l[k]=u[s[k]],d[k]=h[s[k]]},V.prototype.transform=function(s,u,h,l,d,b){this.permute(b,s,u,h,l,d);for(var k=1;k<d;k<<=1)for(var p=k<<1,a=Math.cos(2*Math.PI/p),y=Math.sin(2*Math.PI/p),P=0;P<d;P+=p)for(var O=a,U=y,F=0;F<k;F++){var j=h[P+F],X=l[P+F],Pt=h[P+F+k],tt=l[P+F+k],nt=O*Pt-U*tt;tt=O*tt+U*Pt,Pt=nt,h[P+F]=j+Pt,l[P+F]=X+tt,h[P+F+k]=j-Pt,l[P+F+k]=X-tt,F!==p&&(nt=a*O-y*U,U=a*U+y*O,O=nt)}},V.prototype.guessLen13b=function(s,u){var h=Math.max(u,s)|1,l=h&1,d=0;for(h=h/2|0;h;h=h>>>1)d++;return 1<<d+1+l},V.prototype.conjugate=function(s,u,h){if(!(h<=1))for(var l=0;l<h/2;l++){var d=s[l];s[l]=s[h-l-1],s[h-l-1]=d,d=u[l],u[l]=-u[h-l-1],u[h-l-1]=-d}},V.prototype.normalize13b=function(s,u){for(var h=0,l=0;l<u/2;l++){var d=Math.round(s[2*l+1]/u)*8192+Math.round(s[2*l]/u)+h;s[l]=d&67108863,d<67108864?h=0:h=d/67108864|0}return s},V.prototype.convert13b=function(s,u,h,l){for(var d=0,b=0;b<u;b++)d=d+(s[b]|0),h[2*b]=d&8191,d=d>>>13,h[2*b+1]=d&8191,d=d>>>13;for(b=2*u;b<l;++b)h[b]=0;e(d===0),e((d&-8192)===0)},V.prototype.stub=function(s){for(var u=new Array(s),h=0;h<s;h++)u[h]=0;return u},V.prototype.mulp=function(s,u,h){var l=2*this.guessLen13b(s.length,u.length),d=this.makeRBT(l),b=this.stub(l),k=new Array(l),p=new Array(l),a=new Array(l),y=new Array(l),P=new Array(l),O=new Array(l),U=h.words;U.length=l,this.convert13b(s.words,s.length,k,l),this.convert13b(u.words,u.length,y,l),this.transform(k,b,p,a,l,d),this.transform(y,b,P,O,l,d);for(var F=0;F<l;F++){var j=p[F]*P[F]-a[F]*O[F];a[F]=p[F]*O[F]+a[F]*P[F],p[F]=j}return this.conjugate(p,a,l),this.transform(p,a,U,b,l,d),this.conjugate(U,b,l),this.normalize13b(U,l),h.negative=s.negative^u.negative,h.length=s.length+u.length,h._strip()},n.prototype.mul=function(s){var u=new n(null);return u.words=new Array(this.length+s.length),this.mulTo(s,u)},n.prototype.mulf=function(s){var u=new n(null);return u.words=new Array(this.length+s.length),W(this,s,u)},n.prototype.imul=function(s){return this.clone().mulTo(s,this)},n.prototype.imuln=function(s){var u=s<0;u&&(s=-s),e(typeof s=="number"),e(s<67108864);for(var h=0,l=0;l<this.length;l++){var d=(this.words[l]|0)*s,b=(d&67108863)+(h&67108863);h>>=26,h+=d/67108864|0,h+=b>>>26,this.words[l]=b&67108863}return h!==0&&(this.words[l]=h,this.length++),u?this.ineg():this},n.prototype.muln=function(s){return this.clone().imuln(s)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(s){var u=B(s);if(u.length===0)return new n(1);for(var h=this,l=0;l<u.length&&u[l]===0;l++,h=h.sqr());if(++l<u.length)for(var d=h.sqr();l<u.length;l++,d=d.sqr())u[l]!==0&&(h=h.mul(d));return h},n.prototype.iushln=function(s){e(typeof s=="number"&&s>=0);var u=s%26,h=(s-u)/26,l=67108863>>>26-u<<26-u,d;if(u!==0){var b=0;for(d=0;d<this.length;d++){var k=this.words[d]&l,p=(this.words[d]|0)-k<<u;this.words[d]=p|b,b=k>>>26-u}b&&(this.words[d]=b,this.length++)}if(h!==0){for(d=this.length-1;d>=0;d--)this.words[d+h]=this.words[d];for(d=0;d<h;d++)this.words[d]=0;this.length+=h}return this._strip()},n.prototype.ishln=function(s){return e(this.negative===0),this.iushln(s)},n.prototype.iushrn=function(s,u,h){e(typeof s=="number"&&s>=0);var l;u?l=(u-u%26)/26:l=0;var d=s%26,b=Math.min((s-d)/26,this.length),k=67108863^67108863>>>d<<d,p=h;if(l-=b,l=Math.max(0,l),p){for(var a=0;a<b;a++)p.words[a]=this.words[a];p.length=b}if(b!==0)if(this.length>b)for(this.length-=b,a=0;a<this.length;a++)this.words[a]=this.words[a+b];else this.words[0]=0,this.length=1;var y=0;for(a=this.length-1;a>=0&&(y!==0||a>=l);a--){var P=this.words[a]|0;this.words[a]=y<<26-d|P>>>d,y=P&k}return p&&y!==0&&(p.words[p.length++]=y),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(s,u,h){return e(this.negative===0),this.iushrn(s,u,h)},n.prototype.shln=function(s){return this.clone().ishln(s)},n.prototype.ushln=function(s){return this.clone().iushln(s)},n.prototype.shrn=function(s){return this.clone().ishrn(s)},n.prototype.ushrn=function(s){return this.clone().iushrn(s)},n.prototype.testn=function(s){e(typeof s=="number"&&s>=0);var u=s%26,h=(s-u)/26,l=1<<u;if(this.length<=h)return!1;var d=this.words[h];return!!(d&l)},n.prototype.imaskn=function(s){e(typeof s=="number"&&s>=0);var u=s%26,h=(s-u)/26;if(e(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(u!==0&&h++,this.length=Math.min(h,this.length),u!==0){var l=67108863^67108863>>>u<<u;this.words[this.length-1]&=l}return this._strip()},n.prototype.maskn=function(s){return this.clone().imaskn(s)},n.prototype.iaddn=function(s){return e(typeof s=="number"),e(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<=s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},n.prototype._iaddn=function(s){this.words[0]+=s;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},n.prototype.isubn=function(s){if(e(typeof s=="number"),e(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},n.prototype.addn=function(s){return this.clone().iaddn(s)},n.prototype.subn=function(s){return this.clone().isubn(s)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(s,u,h){var l=s.length+h,d;this._expand(l);var b,k=0;for(d=0;d<s.length;d++){b=(this.words[d+h]|0)+k;var p=(s.words[d]|0)*u;b-=p&67108863,k=(b>>26)-(p/67108864|0),this.words[d+h]=b&67108863}for(;d<this.length-h;d++)b=(this.words[d+h]|0)+k,k=b>>26,this.words[d+h]=b&67108863;if(k===0)return this._strip();for(e(k===-1),k=0,d=0;d<this.length;d++)b=-(this.words[d]|0)+k,k=b>>26,this.words[d]=b&67108863;return this.negative=1,this._strip()},n.prototype._wordDiv=function(s,u){var h=this.length-s.length,l=this.clone(),d=s,b=d.words[d.length-1]|0,k=this._countBits(b);h=26-k,h!==0&&(d=d.ushln(h),l.iushln(h),b=d.words[d.length-1]|0);var p=l.length-d.length,a;if(u!=="mod"){a=new n(null),a.length=p+1,a.words=new Array(a.length);for(var y=0;y<a.length;y++)a.words[y]=0}var P=l.clone()._ishlnsubmul(d,1,p);P.negative===0&&(l=P,a&&(a.words[p]=1));for(var O=p-1;O>=0;O--){var U=(l.words[d.length+O]|0)*67108864+(l.words[d.length+O-1]|0);for(U=Math.min(U/b|0,67108863),l._ishlnsubmul(d,U,O);l.negative!==0;)U--,l.negative=0,l._ishlnsubmul(d,1,O),l.isZero()||(l.negative^=1);a&&(a.words[O]=U)}return a&&a._strip(),l._strip(),u!=="div"&&h!==0&&l.iushrn(h),{div:a||null,mod:l}},n.prototype.divmod=function(s,u,h){if(e(!s.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var l,d,b;return this.negative!==0&&s.negative===0?(b=this.neg().divmod(s,u),u!=="mod"&&(l=b.div.neg()),u!=="div"&&(d=b.mod.neg(),h&&d.negative!==0&&d.iadd(s)),{div:l,mod:d}):this.negative===0&&s.negative!==0?(b=this.divmod(s.neg(),u),u!=="mod"&&(l=b.div.neg()),{div:l,mod:b.mod}):(this.negative&s.negative)!==0?(b=this.neg().divmod(s.neg(),u),u!=="div"&&(d=b.mod.neg(),h&&d.negative!==0&&d.isub(s)),{div:b.div,mod:d}):s.length>this.length||this.cmp(s)<0?{div:new n(0),mod:this}:s.length===1?u==="div"?{div:this.divn(s.words[0]),mod:null}:u==="mod"?{div:null,mod:new n(this.modrn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new n(this.modrn(s.words[0]))}:this._wordDiv(s,u)},n.prototype.div=function(s){return this.divmod(s,"div",!1).div},n.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},n.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},n.prototype.divRound=function(s){var u=this.divmod(s);if(u.mod.isZero())return u.div;var h=u.div.negative!==0?u.mod.isub(s):u.mod,l=s.ushrn(1),d=s.andln(1),b=h.cmp(l);return b<0||d===1&&b===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},n.prototype.modrn=function(s){var u=s<0;u&&(s=-s),e(s<=67108863);for(var h=(1<<26)%s,l=0,d=this.length-1;d>=0;d--)l=(h*l+(this.words[d]|0))%s;return u?-l:l},n.prototype.modn=function(s){return this.modrn(s)},n.prototype.idivn=function(s){var u=s<0;u&&(s=-s),e(s<=67108863);for(var h=0,l=this.length-1;l>=0;l--){var d=(this.words[l]|0)+h*67108864;this.words[l]=d/s|0,h=d%s}return this._strip(),u?this.ineg():this},n.prototype.divn=function(s){return this.clone().idivn(s)},n.prototype.egcd=function(s){e(s.negative===0),e(!s.isZero());var u=this,h=s.clone();u.negative!==0?u=u.umod(s):u=u.clone();for(var l=new n(1),d=new n(0),b=new n(0),k=new n(1),p=0;u.isEven()&&h.isEven();)u.iushrn(1),h.iushrn(1),++p;for(var a=h.clone(),y=u.clone();!u.isZero();){for(var P=0,O=1;(u.words[0]&O)===0&&P<26;++P,O<<=1);if(P>0)for(u.iushrn(P);P-- >0;)(l.isOdd()||d.isOdd())&&(l.iadd(a),d.isub(y)),l.iushrn(1),d.iushrn(1);for(var U=0,F=1;(h.words[0]&F)===0&&U<26;++U,F<<=1);if(U>0)for(h.iushrn(U);U-- >0;)(b.isOdd()||k.isOdd())&&(b.iadd(a),k.isub(y)),b.iushrn(1),k.iushrn(1);u.cmp(h)>=0?(u.isub(h),l.isub(b),d.isub(k)):(h.isub(u),b.isub(l),k.isub(d))}return{a:b,b:k,gcd:h.iushln(p)}},n.prototype._invmp=function(s){e(s.negative===0),e(!s.isZero());var u=this,h=s.clone();u.negative!==0?u=u.umod(s):u=u.clone();for(var l=new n(1),d=new n(0),b=h.clone();u.cmpn(1)>0&&h.cmpn(1)>0;){for(var k=0,p=1;(u.words[0]&p)===0&&k<26;++k,p<<=1);if(k>0)for(u.iushrn(k);k-- >0;)l.isOdd()&&l.iadd(b),l.iushrn(1);for(var a=0,y=1;(h.words[0]&y)===0&&a<26;++a,y<<=1);if(a>0)for(h.iushrn(a);a-- >0;)d.isOdd()&&d.iadd(b),d.iushrn(1);u.cmp(h)>=0?(u.isub(h),l.isub(d)):(h.isub(u),d.isub(l))}var P;return u.cmpn(1)===0?P=l:P=d,P.cmpn(0)<0&&P.iadd(s),P},n.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var u=this.clone(),h=s.clone();u.negative=0,h.negative=0;for(var l=0;u.isEven()&&h.isEven();l++)u.iushrn(1),h.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;h.isEven();)h.iushrn(1);var d=u.cmp(h);if(d<0){var b=u;u=h,h=b}else if(d===0||h.cmpn(1)===0)break;u.isub(h)}while(!0);return h.iushln(l)},n.prototype.invm=function(s){return this.egcd(s).a.umod(s)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(s){return this.words[0]&s},n.prototype.bincn=function(s){e(typeof s=="number");var u=s%26,h=(s-u)/26,l=1<<u;if(this.length<=h)return this._expand(h+1),this.words[h]|=l,this;for(var d=l,b=h;d!==0&&b<this.length;b++){var k=this.words[b]|0;k+=d,d=k>>>26,k&=67108863,this.words[b]=k}return d!==0&&(this.words[b]=d,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(s){var u=s<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var h;if(this.length>1)h=1;else{u&&(s=-s),e(s<=67108863,"Number is too big");var l=this.words[0]|0;h=l===s?0:l<s?-1:1}return this.negative!==0?-h|0:h},n.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var u=this.ucmp(s);return this.negative!==0?-u|0:u},n.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var u=0,h=this.length-1;h>=0;h--){var l=this.words[h]|0,d=s.words[h]|0;if(l!==d){l<d?u=-1:l>d&&(u=1);break}}return u},n.prototype.gtn=function(s){return this.cmpn(s)===1},n.prototype.gt=function(s){return this.cmp(s)===1},n.prototype.gten=function(s){return this.cmpn(s)>=0},n.prototype.gte=function(s){return this.cmp(s)>=0},n.prototype.ltn=function(s){return this.cmpn(s)===-1},n.prototype.lt=function(s){return this.cmp(s)===-1},n.prototype.lten=function(s){return this.cmpn(s)<=0},n.prototype.lte=function(s){return this.cmp(s)<=0},n.prototype.eqn=function(s){return this.cmpn(s)===0},n.prototype.eq=function(s){return this.cmp(s)===0},n.red=function(s){return new ut(s)},n.prototype.toRed=function(s){return e(!this.red,"Already a number in reduction context"),e(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},n.prototype.fromRed=function(){return e(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(s){return this.red=s,this},n.prototype.forceRed=function(s){return e(!this.red,"Already a number in reduction context"),this._forceRed(s)},n.prototype.redAdd=function(s){return e(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},n.prototype.redIAdd=function(s){return e(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},n.prototype.redSub=function(s){return e(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},n.prototype.redISub=function(s){return e(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},n.prototype.redShl=function(s){return e(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},n.prototype.redMul=function(s){return e(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},n.prototype.redIMul=function(s){return e(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},n.prototype.redSqr=function(){return e(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return e(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return e(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return e(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return e(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(s){return e(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var dt={k256:null,p224:null,p192:null,p25519:null};function rt(w,s){this.name=w,this.p=new n(s,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}rt.prototype._tmp=function(){var s=new n(null);return s.words=new Array(Math.ceil(this.n/13)),s},rt.prototype.ireduce=function(s){var u=s,h;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),h=u.bitLength();while(h>this.n);var l=h<this.n?-1:u.ucmp(this.p);return l===0?(u.words[0]=0,u.length=1):l>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},rt.prototype.split=function(s,u){s.iushrn(this.n,0,u)},rt.prototype.imulK=function(s){return s.imul(this.k)};function It(){rt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(It,rt),It.prototype.split=function(s,u){for(var h=4194303,l=Math.min(s.length,9),d=0;d<l;d++)u.words[d]=s.words[d];if(u.length=l,s.length<=9){s.words[0]=0,s.length=1;return}var b=s.words[9];for(u.words[u.length++]=b&h,d=10;d<s.length;d++){var k=s.words[d]|0;s.words[d-10]=(k&h)<<4|b>>>22,b=k}b>>>=22,s.words[d-10]=b,b===0&&s.length>10?s.length-=10:s.length-=9},It.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var u=0,h=0;h<s.length;h++){var l=s.words[h]|0;u+=l*977,s.words[h]=u&67108863,u=l*64+(u/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function Tt(){rt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(Tt,rt);function ie(){rt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(ie,rt);function xe(){rt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(xe,rt),xe.prototype.imulK=function(s){for(var u=0,h=0;h<s.length;h++){var l=(s.words[h]|0)*19+u,d=l&67108863;l>>>=26,s.words[h]=d,u=l}return u!==0&&(s.words[s.length++]=u),s},n._prime=function(s){if(dt[s])return dt[s];var u;if(s==="k256")u=new It;else if(s==="p224")u=new Tt;else if(s==="p192")u=new ie;else if(s==="p25519")u=new xe;else throw new Error("Unknown prime "+s);return dt[s]=u,u};function ut(w){if(typeof w=="string"){var s=n._prime(w);this.m=s.p,this.prime=s}else e(w.gtn(1),"modulus must be greater than 1"),this.m=w,this.prime=null}ut.prototype._verify1=function(s){e(s.negative===0,"red works only with positives"),e(s.red,"red works only with red numbers")},ut.prototype._verify2=function(s,u){e((s.negative|u.negative)===0,"red works only with positives"),e(s.red&&s.red===u.red,"red works only with red numbers")},ut.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):(x(s,s.umod(this.m)._forceRed(this)),s)},ut.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},ut.prototype.add=function(s,u){this._verify2(s,u);var h=s.add(u);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},ut.prototype.iadd=function(s,u){this._verify2(s,u);var h=s.iadd(u);return h.cmp(this.m)>=0&&h.isub(this.m),h},ut.prototype.sub=function(s,u){this._verify2(s,u);var h=s.sub(u);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},ut.prototype.isub=function(s,u){this._verify2(s,u);var h=s.isub(u);return h.cmpn(0)<0&&h.iadd(this.m),h},ut.prototype.shl=function(s,u){return this._verify1(s),this.imod(s.ushln(u))},ut.prototype.imul=function(s,u){return this._verify2(s,u),this.imod(s.imul(u))},ut.prototype.mul=function(s,u){return this._verify2(s,u),this.imod(s.mul(u))},ut.prototype.isqr=function(s){return this.imul(s,s.clone())},ut.prototype.sqr=function(s){return this.mul(s,s)},ut.prototype.sqrt=function(s){if(s.isZero())return s.clone();var u=this.m.andln(3);if(e(u%2===1),u===3){var h=this.m.add(new n(1)).iushrn(2);return this.pow(s,h)}for(var l=this.m.subn(1),d=0;!l.isZero()&&l.andln(1)===0;)d++,l.iushrn(1);e(!l.isZero());var b=new n(1).toRed(this),k=b.redNeg(),p=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new n(2*a*a).toRed(this);this.pow(a,p).cmp(k)!==0;)a.redIAdd(k);for(var y=this.pow(a,l),P=this.pow(s,l.addn(1).iushrn(1)),O=this.pow(s,l),U=d;O.cmp(b)!==0;){for(var F=O,j=0;F.cmp(b)!==0;j++)F=F.redSqr();e(j<U);var X=this.pow(y,new n(1).iushln(U-j-1));P=P.redMul(X),y=X.redSqr(),O=O.redMul(y),U=j}return P},ut.prototype.invm=function(s){var u=s._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},ut.prototype.pow=function(s,u){if(u.isZero())return new n(1).toRed(this);if(u.cmpn(1)===0)return s.clone();var h=4,l=new Array(1<<h);l[0]=new n(1).toRed(this),l[1]=s;for(var d=2;d<l.length;d++)l[d]=this.mul(l[d-1],s);var b=l[0],k=0,p=0,a=u.bitLength()%26;for(a===0&&(a=26),d=u.length-1;d>=0;d--){for(var y=u.words[d],P=a-1;P>=0;P--){var O=y>>P&1;if(b!==l[0]&&(b=this.sqr(b)),O===0&&k===0){p=0;continue}k<<=1,k|=O,p++,!(p!==h&&(d!==0||P!==0))&&(b=this.mul(b,l[k]),p=0,k=0)}a=26}return b},ut.prototype.convertTo=function(s){var u=s.umod(this.m);return u===s?u.clone():u},ut.prototype.convertFrom=function(s){var u=s.clone();return u.red=null,u},n.mont=function(s){return new ue(s)};function ue(w){ut.call(this,w),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(ue,ut),ue.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},ue.prototype.convertFrom=function(s){var u=this.imod(s.mul(this.rinv));return u.red=null,u},ue.prototype.imul=function(s,u){if(s.isZero()||u.isZero())return s.words[0]=0,s.length=1,s;var h=s.imul(u),l=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=h.isub(l).iushrn(this.shift),b=d;return d.cmp(this.m)>=0?b=d.isub(this.m):d.cmpn(0)<0&&(b=d.iadd(this.m)),b._forceRed(this)},ue.prototype.mul=function(s,u){if(s.isZero()||u.isZero())return new n(0)._forceRed(this);var h=s.mul(u),l=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=h.isub(l).iushrn(this.shift),b=d;return d.cmp(this.m)>=0?b=d.isub(this.m):d.cmpn(0)<0&&(b=d.iadd(this.m)),b._forceRed(this)},ue.prototype.invm=function(s){var u=this.imod(s._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(typeof Qn>"u"||Qn,ei)});var si=Mr((Pu,ni)=>{"use strict";Lt();Rt();var Kr=oo().Buffer;function Vo(o){if(o.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<o.length;r++){var n=o.charAt(r),i=n.charCodeAt(0);if(t[i]!==255)throw new TypeError(n+" is ambiguous");t[i]=r}var c=o.length,f=o.charAt(0),g=Math.log(c)/Math.log(256),x=Math.log(256)/Math.log(c);function v(_){if((Array.isArray(_)||_ instanceof Uint8Array)&&(_=Kr.from(_)),!Kr.isBuffer(_))throw new TypeError("Expected Buffer");if(_.length===0)return"";for(var E=0,B=0,R=0,q=_.length;R!==q&&_[R]===0;)R++,E++;for(var G=(q-R)*x+1>>>0,W=new Uint8Array(G);R!==q;){for(var V=_[R],dt=0,rt=G-1;(V!==0||dt<B)&&rt!==-1;rt--,dt++)V+=256*W[rt]>>>0,W[rt]=V%c>>>0,V=V/c>>>0;if(V!==0)throw new Error("Non-zero carry");B=dt,R++}for(var It=G-B;It!==G&&W[It]===0;)It++;for(var Tt=f.repeat(E);It<G;++It)Tt+=o.charAt(W[It]);return Tt}function A(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return Kr.alloc(0);var E=0;if(_[E]!==" "){for(var B=0,R=0;_[E]===f;)B++,E++;for(var q=(_.length-E)*g+1>>>0,G=new Uint8Array(q);_[E];){var W=t[_.charCodeAt(E)];if(W===255)return;for(var V=0,dt=q-1;(W!==0||V<R)&&dt!==-1;dt--,V++)W+=c*G[dt]>>>0,G[dt]=W%256>>>0,W=W/256>>>0;if(W!==0)throw new Error("Non-zero carry");R=V,E++}if(_[E]!==" "){for(var rt=q-R;rt!==q&&G[rt]===0;)rt++;var It=Kr.allocUnsafe(B+(q-rt));It.fill(0,0,B);for(var Tt=B;rt!==q;)It[Tt++]=G[rt++];return It}}}function M(_){var E=A(_);if(E)return E;throw new Error("Non-base"+c+" character")}return{encode:v,decodeUnsafe:A,decode:M}}ni.exports=Vo});var oi=Mr((Nu,ii)=>{Lt();Rt();var Go=si(),jo="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";ii.exports=Go(jo)});var ns=Mr(I=>{"use strict";Lt();Rt();Object.defineProperty(I,"__esModule",{value:!0});I.s16=I.s8=I.nu64be=I.u48be=I.u40be=I.u32be=I.u24be=I.u16be=I.nu64=I.u48=I.u40=I.u32=I.u24=I.u16=I.u8=I.offset=I.greedy=I.Constant=I.UTF8=I.CString=I.Blob=I.Boolean=I.BitField=I.BitStructure=I.VariantLayout=I.Union=I.UnionLayoutDiscriminator=I.UnionDiscriminator=I.Structure=I.Sequence=I.DoubleBE=I.Double=I.FloatBE=I.Float=I.NearInt64BE=I.NearInt64=I.NearUInt64BE=I.NearUInt64=I.IntBE=I.Int=I.UIntBE=I.UInt=I.OffsetLayout=I.GreedyCount=I.ExternalLayout=I.bindConstructorLayout=I.nameWithProperty=I.Layout=I.uint8ArrayToBuffer=I.checkUint8Array=void 0;I.constant=I.utf8=I.cstr=I.blob=I.unionLayoutDiscriminator=I.union=I.seq=I.bits=I.struct=I.f64be=I.f64=I.f32be=I.f32=I.ns64be=I.s48be=I.s40be=I.s32be=I.s24be=I.s16be=I.ns64=I.s48=I.s40=I.s32=I.s24=void 0;var es=Us();function nr(o){if(!(o instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}I.checkUint8Array=nr;function st(o){return nr(o),es.Buffer.from(o.buffer,o.byteOffset,o.length)}I.uint8ArrayToBuffer=st;var at=class{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){let e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}};I.Layout=at;function rs(o,t){return t.property?o+"["+t.property+"]":o}I.nameWithProperty=rs;function Yo(o,t){if(typeof o!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(o,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof at))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");o.layout_=t,t.boundConstructor_=o,t.makeDestinationObject=()=>new o,Object.defineProperty(o.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(o,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}I.bindConstructorLayout=Yo;var ae=class extends at{isCount(){throw new Error("ExternalLayout is abstract")}};I.ExternalLayout=ae;var Wr=class extends ae{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){nr(t);let r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}};I.GreedyCount=Wr;var dr=class extends ae{constructor(t,e=0,r){if(!(t instanceof at))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof le||this.layout instanceof pe}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}};I.OffsetLayout=dr;var le=class extends at{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return st(t).readUIntLE(e,this.span)}encode(t,e,r=0){return st(e).writeUIntLE(t,r,this.span),this.span}};I.UInt=le;var pe=class extends at{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return st(t).readUIntBE(e,this.span)}encode(t,e,r=0){return st(e).writeUIntBE(t,r,this.span),this.span}};I.UIntBE=pe;var Ae=class extends at{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return st(t).readIntLE(e,this.span)}encode(t,e,r=0){return st(e).writeIntLE(t,r,this.span),this.span}};I.Int=Ae;var Ce=class extends at{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return st(t).readIntBE(e,this.span)}encode(t,e,r=0){return st(e).writeIntBE(t,r,this.span),this.span}};I.IntBE=Ce;var ts=Math.pow(2,32);function rn(o){let t=Math.floor(o/ts),e=o-t*ts;return{hi32:t,lo32:e}}function nn(o,t){return o*ts+t}var Ur=class extends at{constructor(t){super(8,t)}decode(t,e=0){let r=st(t),n=r.readUInt32LE(e),i=r.readUInt32LE(e+4);return nn(i,n)}encode(t,e,r=0){let n=rn(t),i=st(e);return i.writeUInt32LE(n.lo32,r),i.writeUInt32LE(n.hi32,r+4),8}};I.NearUInt64=Ur;var qr=class extends at{constructor(t){super(8,t)}decode(t,e=0){let r=st(t),n=r.readUInt32BE(e),i=r.readUInt32BE(e+4);return nn(n,i)}encode(t,e,r=0){let n=rn(t),i=st(e);return i.writeUInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}};I.NearUInt64BE=qr;var Dr=class extends at{constructor(t){super(8,t)}decode(t,e=0){let r=st(t),n=r.readUInt32LE(e),i=r.readInt32LE(e+4);return nn(i,n)}encode(t,e,r=0){let n=rn(t),i=st(e);return i.writeUInt32LE(n.lo32,r),i.writeInt32LE(n.hi32,r+4),8}};I.NearInt64=Dr;var Fr=class extends at{constructor(t){super(8,t)}decode(t,e=0){let r=st(t),n=r.readInt32BE(e),i=r.readUInt32BE(e+4);return nn(n,i)}encode(t,e,r=0){let n=rn(t),i=st(e);return i.writeInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}};I.NearInt64BE=Fr;var Hr=class extends at{constructor(t){super(4,t)}decode(t,e=0){return st(t).readFloatLE(e)}encode(t,e,r=0){return st(e).writeFloatLE(t,r),4}};I.Float=Hr;var $r=class extends at{constructor(t){super(4,t)}decode(t,e=0){return st(t).readFloatBE(e)}encode(t,e,r=0){return st(e).writeFloatBE(t,r),4}};I.FloatBE=$r;var Vr=class extends at{constructor(t){super(8,t)}decode(t,e=0){return st(t).readDoubleLE(e)}encode(t,e,r=0){return st(e).writeDoubleLE(t,r),8}};I.Double=Vr;var Gr=class extends at{constructor(t){super(8,t)}decode(t,e=0){return st(t).readDoubleBE(e)}encode(t,e,r=0){return st(e).writeDoubleBE(t,r),8}};I.DoubleBE=Gr;var jr=class extends at{constructor(t,e,r){if(!(t instanceof at))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof ae&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;!(e instanceof ae)&&0<t.span&&(n=e*t.span),super(n,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof ae&&(n=n.decode(t,e)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let i=0;for(;i<n;)r+=this.elementLayout.getSpan(t,e+r),++i}return r}decode(t,e=0){let r=[],n=0,i=this.count;for(i instanceof ae&&(i=i.decode(t,e));n<i;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),n+=1;return r}encode(t,e,r=0){let n=this.elementLayout,i=t.reduce((c,f)=>c+n.encode(f,e,r+c),0);return this.count instanceof ae&&this.count.encode(t.length,e,r),i}};I.Sequence=jr;var Yr=class extends at{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((i,c)=>i&&c instanceof at,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(let i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=t.reduce((i,c)=>i+c.getSpan(),0)}catch{}super(n,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((n,i)=>{let c=i.getSpan(t,e);return e+=c,n+c},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e=0){nr(t);let r=this.makeDestinationObject();for(let n of this.fields)if(n.property!==void 0&&(r[n.property]=n.decode(t,e)),e+=n.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){let n=r,i=0,c=0;for(let f of this.fields){let g=f.span;if(c=0<g?g:0,f.property!==void 0){let x=t[f.property];x!==void 0&&(c=f.encode(x,e,r),0>g&&(g=f.getSpan(e,r)))}i=r,r+=g}return i+c-n}fromArray(t){let e=this.makeDestinationObject();for(let r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(let e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(let r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}};I.Structure=Yr;var pr=class{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}};I.UnionDiscriminator=pr;var rr=class extends pr{constructor(t,e){if(!(t instanceof ae&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}};I.UnionLayoutDiscriminator=rr;var yr=class extends at{constructor(t,e,r){let n;if(t instanceof le||t instanceof pe)n=new rr(new dr(t));else if(t instanceof ae&&t.isCount())n=new rr(t);else if(t instanceof pr)n=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof at))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof le||t instanceof pe)&&(i+=n.layout.span)),super(i,r),this.discriminator=n,this.usesPrefixDiscriminator=t instanceof le||t instanceof pe,this.defaultLayout=e,this.registry={};let c=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(f){return c(f)},this.configGetSourceVariant=function(f){c=f.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;let r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;let e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(let e in this.registry){let r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r,n=this.discriminator,i=n.decode(t,e),c=this.registry[i];if(c===void 0){let f=this.defaultLayout,g=0;this.usesPrefixDiscriminator&&(g=n.layout.span),r=this.makeDestinationObject(),r[n.property]=i,r[f.property]=f.decode(t,e+g)}else r=c.decode(t,e);return r}encode(t,e,r=0){let n=this.getSourceVariant(t);if(n===void 0){let i=this.discriminator,c=this.defaultLayout,f=0;return this.usesPrefixDiscriminator&&(f=i.layout.span),i.encode(t[i.property],e,r),f+c.encode(t[c.property],e,r+f)}return n.encode(t,e,r)}addVariant(t,e,r){let n=new Zr(this,t,e,r);return this.registry[t]=n,n}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}};I.Union=yr;var Zr=class extends at{constructor(t,e,r,n){if(!(t instanceof yr))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&n===void 0&&(n=r,r=null),r){if(!(r instanceof at))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof n!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,n),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let n=0;return this.layout&&(n=this.layout.getSpan(t,e+r)),r+n}decode(t,e=0){let r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=n;if(this.layout&&(this.layout.encode(t[this.property],e,r+n),i+=this.layout.getSpan(e,r+n),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}};I.VariantLayout=Zr;function er(o){return 0>o&&(o+=4294967296),o}var gr=class extends at{constructor(t,e,r){if(!(t instanceof le||t instanceof pe))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let n=0;this._packedSetValue=function(i){return n=er(i),this},this._packedGetValue=function(){return n}}decode(t,e=0){let r=this.makeDestinationObject(),n=this.word.decode(t,e);this._packedSetValue(n);for(let i of this.fields)i.property!==void 0&&(r[i.property]=i.decode(t));return r}encode(t,e,r=0){let n=this.word.decode(e,r);this._packedSetValue(n);for(let i of this.fields)if(i.property!==void 0){let c=t[i.property];c!==void 0&&i.encode(c)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){let r=new mr(this,t,e);return this.fields.push(r),r}addBoolean(t){let e=new Jr(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(let e of this.fields)if(e.property===t)return e}};I.BitStructure=gr;var mr=class{constructor(t,e,r){if(!(t instanceof gr))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");let n=8*t.span,i=t.fields.reduce((c,f)=>c+f.bits,0);if(e+i>n)throw new Error("bits too long for span remainder ("+(n-i)+" of "+n+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=n-i-e),this.wordMask=er(this.valueMask<<this.start),this.property=r}decode(t,e){let r=this.container._packedGetValue();return er(r&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==er(t&this.valueMask))throw new TypeError(rs("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let e=this.container._packedGetValue(),r=er(t<<this.start);this.container._packedSetValue(er(e&~this.wordMask)|r)}};I.BitField=mr;var Jr=class extends mr{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};I.Boolean=Jr;var Xr=class extends at{constructor(t,e){if(!(t instanceof ae&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof ae||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),st(t).slice(e,e+r)}encode(t,e,r){let n=this.length;if(this.length instanceof ae&&(n=t.length),!(t instanceof Uint8Array&&n===t.length))throw new TypeError(rs("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>e.length)throw new RangeError("encoding overruns Uint8Array");let i=st(t);return st(e).write(i.toString("hex"),r,n,"hex"),this.length instanceof ae&&this.length.encode(n,e,r),n}};I.Blob=Xr;var Qr=class extends at{constructor(t){super(-1,t)}getSpan(t,e=0){nr(t);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e=0){let r=this.getSpan(t,e);return st(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));let n=es.Buffer.from(t,"utf8"),i=n.length;if(r+i>e.length)throw new RangeError("encoding overruns Buffer");let c=st(e);return n.copy(c,r),c[r+i]=0,i+1}};I.CString=Qr;var tn=class extends at{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return nr(t),t.length-e}decode(t,e=0){let r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return st(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));let n=es.Buffer.from(t,"utf8"),i=n.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return n.copy(st(e),r),i}};I.UTF8=tn;var en=class extends at{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}};I.Constant=en;I.greedy=(o,t)=>new Wr(o,t);I.offset=(o,t,e)=>new dr(o,t,e);I.u8=o=>new le(1,o);I.u16=o=>new le(2,o);I.u24=o=>new le(3,o);I.u32=o=>new le(4,o);I.u40=o=>new le(5,o);I.u48=o=>new le(6,o);I.nu64=o=>new Ur(o);I.u16be=o=>new pe(2,o);I.u24be=o=>new pe(3,o);I.u32be=o=>new pe(4,o);I.u40be=o=>new pe(5,o);I.u48be=o=>new pe(6,o);I.nu64be=o=>new qr(o);I.s8=o=>new Ae(1,o);I.s16=o=>new Ae(2,o);I.s24=o=>new Ae(3,o);I.s32=o=>new Ae(4,o);I.s40=o=>new Ae(5,o);I.s48=o=>new Ae(6,o);I.ns64=o=>new Dr(o);I.s16be=o=>new Ce(2,o);I.s24be=o=>new Ce(3,o);I.s32be=o=>new Ce(4,o);I.s40be=o=>new Ce(5,o);I.s48be=o=>new Ce(6,o);I.ns64be=o=>new Fr(o);I.f32=o=>new Hr(o);I.f32be=o=>new $r(o);I.f64=o=>new Vr(o);I.f64be=o=>new Gr(o);I.struct=(o,t,e)=>new Yr(o,t,e);I.bits=(o,t,e)=>new gr(o,t,e);I.seq=(o,t,e)=>new jr(o,t,e);I.union=(o,t,e)=>new yr(o,t,e);I.unionLayoutDiscriminator=(o,t)=>new rr(o,t);I.blob=(o,t)=>new Xr(o,t);I.cstr=o=>new Qr(o);I.utf8=(o,t)=>new tn(o,t);I.constant=(o,t)=>new en(o,t)});Lt();Rt();Ws();Lt();Rt();Lt();Rt();Lt();Rt();var Or=BigInt(4294967295),Zn=BigInt(32);function Zs(o,t=!1){return t?{h:Number(o&Or),l:Number(o>>Zn&Or)}:{h:Number(o>>Zn&Or)|0,l:Number(o&Or)|0}}function ho(o,t=!1){let e=new Uint32Array(o.length),r=new Uint32Array(o.length);for(let n=0;n<o.length;n++){let{h:i,l:c}=Zs(o[n],t);[e[n],r[n]]=[i,c]}return[e,r]}var lo=(o,t)=>BigInt(o>>>0)<<Zn|BigInt(t>>>0),fo=(o,t,e)=>o>>>e,po=(o,t,e)=>o<<32-e|t>>>e,yo=(o,t,e)=>o>>>e|t<<32-e,go=(o,t,e)=>o<<32-e|t>>>e,mo=(o,t,e)=>o<<64-e|t>>>e-32,bo=(o,t,e)=>o>>>e-32|t<<64-e,wo=(o,t)=>t,ko=(o,t)=>o,vo=(o,t,e)=>o<<e|t>>>32-e,So=(o,t,e)=>t<<e|o>>>32-e,xo=(o,t,e)=>t<<e-32|o>>>64-e,Io=(o,t,e)=>o<<e-32|t>>>64-e;function _o(o,t,e,r){let n=(t>>>0)+(r>>>0);return{h:o+e+(n/2**32|0)|0,l:n|0}}var Bo=(o,t,e)=>(o>>>0)+(t>>>0)+(e>>>0),Ao=(o,t,e,r)=>t+e+r+(o/2**32|0)|0,Eo=(o,t,e,r)=>(o>>>0)+(t>>>0)+(e>>>0)+(r>>>0),Lo=(o,t,e,r,n)=>t+e+r+n+(o/2**32|0)|0,Ro=(o,t,e,r,n)=>(o>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Mo=(o,t,e,r,n,i)=>t+e+r+n+i+(o/2**32|0)|0;var Po={fromBig:Zs,split:ho,toBig:lo,shrSH:fo,shrSL:po,rotrSH:yo,rotrSL:go,rotrBH:mo,rotrBL:bo,rotr32H:wo,rotr32L:ko,rotlSH:vo,rotlSL:So,rotlBH:xo,rotlBL:Io,add:_o,add3L:Bo,add3H:Ao,add4L:Eo,add4H:Lo,add5H:Mo,add5L:Ro},Y=Po;var[To,Co]=(()=>Y.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(o=>BigInt(o))))(),Pe=new Uint32Array(80),Te=new Uint32Array(80),Jn=class extends Fs{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:e,Bh:r,Bl:n,Ch:i,Cl:c,Dh:f,Dl:g,Eh:x,El:v,Fh:A,Fl:M,Gh:_,Gl:E,Hh:B,Hl:R}=this;return[t,e,r,n,i,c,f,g,x,v,A,M,_,E,B,R]}set(t,e,r,n,i,c,f,g,x,v,A,M,_,E,B,R){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=n|0,this.Ch=i|0,this.Cl=c|0,this.Dh=f|0,this.Dl=g|0,this.Eh=x|0,this.El=v|0,this.Fh=A|0,this.Fl=M|0,this.Gh=_|0,this.Gl=E|0,this.Hh=B|0,this.Hl=R|0}process(t,e){for(let W=0;W<16;W++,e+=4)Pe[W]=t.getUint32(e),Te[W]=t.getUint32(e+=4);for(let W=16;W<80;W++){let V=Pe[W-15]|0,dt=Te[W-15]|0,rt=Y.rotrSH(V,dt,1)^Y.rotrSH(V,dt,8)^Y.shrSH(V,dt,7),It=Y.rotrSL(V,dt,1)^Y.rotrSL(V,dt,8)^Y.shrSL(V,dt,7),Tt=Pe[W-2]|0,ie=Te[W-2]|0,xe=Y.rotrSH(Tt,ie,19)^Y.rotrBH(Tt,ie,61)^Y.shrSH(Tt,ie,6),ut=Y.rotrSL(Tt,ie,19)^Y.rotrBL(Tt,ie,61)^Y.shrSL(Tt,ie,6),ue=Y.add4L(It,ut,Te[W-7],Te[W-16]),w=Y.add4H(ue,rt,xe,Pe[W-7],Pe[W-16]);Pe[W]=w|0,Te[W]=ue|0}let{Ah:r,Al:n,Bh:i,Bl:c,Ch:f,Cl:g,Dh:x,Dl:v,Eh:A,El:M,Fh:_,Fl:E,Gh:B,Gl:R,Hh:q,Hl:G}=this;for(let W=0;W<80;W++){let V=Y.rotrSH(A,M,14)^Y.rotrSH(A,M,18)^Y.rotrBH(A,M,41),dt=Y.rotrSL(A,M,14)^Y.rotrSL(A,M,18)^Y.rotrBL(A,M,41),rt=A&_^~A&B,It=M&E^~M&R,Tt=Y.add5L(G,dt,It,Co[W],Te[W]),ie=Y.add5H(Tt,q,V,rt,To[W],Pe[W]),xe=Tt|0,ut=Y.rotrSH(r,n,28)^Y.rotrBH(r,n,34)^Y.rotrBH(r,n,39),ue=Y.rotrSL(r,n,28)^Y.rotrBL(r,n,34)^Y.rotrBL(r,n,39),w=r&i^r&f^i&f,s=n&c^n&g^c&g;q=B|0,G=R|0,B=_|0,R=E|0,_=A|0,E=M|0,{h:A,l:M}=Y.add(x|0,v|0,ie|0,xe|0),x=f|0,v=g|0,f=i|0,g=c|0,i=r|0,c=n|0;let u=Y.add3L(xe,ue,s);r=Y.add3H(u,ie,ut,w),n=u|0}({h:r,l:n}=Y.add(this.Ah|0,this.Al|0,r|0,n|0)),{h:i,l:c}=Y.add(this.Bh|0,this.Bl|0,i|0,c|0),{h:f,l:g}=Y.add(this.Ch|0,this.Cl|0,f|0,g|0),{h:x,l:v}=Y.add(this.Dh|0,this.Dl|0,x|0,v|0),{h:A,l:M}=Y.add(this.Eh|0,this.El|0,A|0,M|0),{h:_,l:E}=Y.add(this.Fh|0,this.Fl|0,_|0,E|0),{h:B,l:R}=Y.add(this.Gh|0,this.Gl|0,B|0,R|0),{h:q,l:G}=Y.add(this.Hh|0,this.Hl|0,q|0,G|0),this.set(r,n,i,c,f,g,x,v,A,M,_,E,B,R,q,G)}roundClean(){Pe.fill(0),Te.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var Js=qs(()=>new Jn);Lt();Rt();var ke=BigInt(0),he=BigInt(1),zr=BigInt(2),No=BigInt(8),Oo={zip215:!0};function zo(o){let t=Ys(o);return $s(o,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function Xs(o){let t=zo(o),{Fp:e,n:r,prehash:n,hash:i,randomBytes:c,nByteLength:f,h:g}=t,x=zr<<BigInt(f*8)-he,v=e.create,A=Cr(t.n,t.nBitLength),M=t.uvRatio||((h,l)=>{try{return{isValid:!0,value:e.sqrt(h*e.inv(l))}}catch{return{isValid:!1,value:ke}}}),_=t.adjustScalarBytes||(h=>h),E=t.domain||((h,l,d)=>{if(Pr("phflag",d),l.length||d)throw new Error("Contexts/pre-hash are not supported");return h});function B(h,l){tr("coordinate "+h,l,ke,x)}function R(h){if(!(h instanceof W))throw new Error("ExtendedPoint expected")}let q=jn((h,l)=>{let{ex:d,ey:b,ez:k}=h,p=h.is0();l==null&&(l=p?No:e.inv(k));let a=v(d*l),y=v(b*l),P=v(k*l);if(p)return{x:ke,y:he};if(P!==he)throw new Error("invZ was invalid");return{x:a,y}}),G=jn(h=>{let{a:l,d}=t;if(h.is0())throw new Error("bad point: ZERO");let{ex:b,ey:k,ez:p,et:a}=h,y=v(b*b),P=v(k*k),O=v(p*p),U=v(O*O),F=v(y*l),j=v(O*v(F+P)),X=v(U+v(d*v(y*P)));if(j!==X)throw new Error("bad point: equation left != right (1)");let Pt=v(b*k),tt=v(p*a);if(Pt!==tt)throw new Error("bad point: equation left != right (2)");return!0});class W{constructor(l,d,b,k){this.ex=l,this.ey=d,this.ez=b,this.et=k,B("x",l),B("y",d),B("z",b),B("t",k),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(l){if(l instanceof W)throw new Error("extended point not allowed");let{x:d,y:b}=l||{};return B("x",d),B("y",b),new W(d,b,he,v(d*b))}static normalizeZ(l){let d=e.invertBatch(l.map(b=>b.ez));return l.map((b,k)=>b.toAffine(d[k])).map(W.fromAffine)}static msm(l,d){return js(W,A,l,d)}_setWindowSize(l){rt.setWindowSize(this,l)}assertValidity(){G(this)}equals(l){R(l);let{ex:d,ey:b,ez:k}=this,{ex:p,ey:a,ez:y}=l,P=v(d*y),O=v(p*k),U=v(b*y),F=v(a*k);return P===O&&U===F}is0(){return this.equals(W.ZERO)}negate(){return new W(v(-this.ex),this.ey,this.ez,v(-this.et))}double(){let{a:l}=t,{ex:d,ey:b,ez:k}=this,p=v(d*d),a=v(b*b),y=v(zr*v(k*k)),P=v(l*p),O=d+b,U=v(v(O*O)-p-a),F=P+a,j=F-y,X=P-a,Pt=v(U*j),tt=v(F*X),nt=v(U*X),We=v(j*F);return new W(Pt,tt,We,nt)}add(l){R(l);let{a:d,d:b}=t,{ex:k,ey:p,ez:a,et:y}=this,{ex:P,ey:O,ez:U,et:F}=l;if(d===BigInt(-1)){let mt=v((p-k)*(O+P)),bt=v((p+k)*(O-P)),Qe=v(bt-mt);if(Qe===ke)return this.double();let wt=v(a*zr*F),kt=v(y*zr*U),fr=kt+wt,vt=bt+mt,St=kt-wt,Lr=v(fr*Qe),At=v(vt*St),Et=v(fr*St),Rr=v(Qe*vt);return new W(Lr,At,Rr,Et)}let j=v(k*P),X=v(p*O),Pt=v(y*b*F),tt=v(a*U),nt=v((k+p)*(P+O)-j-X),We=tt-Pt,yt=tt+Pt,gt=v(X-d*j),Ar=v(nt*We),_t=v(yt*gt),Bt=v(nt*gt),Er=v(We*yt);return new W(Ar,_t,Er,Bt)}subtract(l){return this.add(l.negate())}wNAF(l){return rt.wNAFCached(this,l,W.normalizeZ)}multiply(l){let d=l;tr("scalar",d,he,r);let{p:b,f:k}=this.wNAF(d);return W.normalizeZ([b,k])[0]}multiplyUnsafe(l){let d=l;return tr("scalar",d,ke,r),d===ke?dt:this.equals(dt)||d===he?this:this.equals(V)?this.wNAF(d).p:rt.unsafeLadder(this,d)}isSmallOrder(){return this.multiplyUnsafe(g).is0()}isTorsionFree(){return rt.unsafeLadder(this,r).is0()}toAffine(l){return q(this,l)}clearCofactor(){let{h:l}=t;return l===he?this:this.multiplyUnsafe(l)}static fromHex(l,d=!1){let{d:b,a:k}=t,p=e.BYTES;l=Be("pointHex",l,p),Pr("zip215",d);let a=l.slice(),y=l[p-1];a[p-1]=y&-129;let P=Tr(a),O=d?x:e.ORDER;tr("pointHex.y",P,ke,O);let U=v(P*P),F=v(U-he),j=v(b*U-k),{isValid:X,value:Pt}=M(F,j);if(!X)throw new Error("Point.fromHex: invalid y coordinate");let tt=(Pt&he)===he,nt=(y&128)!==0;if(!d&&Pt===ke&&nt)throw new Error("Point.fromHex: x=0 and x_0=1");return nt!==tt&&(Pt=v(-Pt)),W.fromAffine({x:Pt,y:P})}static fromPrivateKey(l){return ie(l).point}toRawBytes(){let{x:l,y:d}=this.toAffine(),b=Vn(d,e.BYTES);return b[b.length-1]|=l&he?128:0,b}toHex(){return Hs(this.toRawBytes())}}W.BASE=new W(t.Gx,t.Gy,he,v(t.Gx*t.Gy)),W.ZERO=new W(ke,he,he,ke);let{BASE:V,ZERO:dt}=W,rt=Gs(W,f*8);function It(h){return be(h,r)}function Tt(h){return It(Tr(h))}function ie(h){let l=f;h=Be("private key",h,l);let d=Be("hashed private key",i(h),2*l),b=_(d.slice(0,l)),k=d.slice(l,2*l),p=Tt(b),a=V.multiply(p),y=a.toRawBytes();return{head:b,prefix:k,scalar:p,point:a,pointBytes:y}}function xe(h){return ie(h).pointBytes}function ut(h=new Uint8Array,...l){let d=Gn(...l);return Tt(i(E(d,Be("context",h),!!n)))}function ue(h,l,d={}){h=Be("message",h),n&&(h=n(h));let{prefix:b,scalar:k,pointBytes:p}=ie(l),a=ut(d.context,b,h),y=V.multiply(a).toRawBytes(),P=ut(d.context,y,p,h),O=It(a+P*k);tr("signature.s",O,ke,r);let U=Gn(y,Vn(O,e.BYTES));return Be("result",U,f*2)}let w=Oo;function s(h,l,d,b=w){let{context:k,zip215:p}=b,a=e.BYTES;h=Be("signature",h,2*a),l=Be("message",l),p!==void 0&&Pr("zip215",p),n&&(l=n(l));let y=Tr(h.slice(a,2*a)),P,O,U;try{P=W.fromHex(d,p),O=W.fromHex(h.slice(0,a),p),U=V.multiplyUnsafe(y)}catch{return!1}if(!p&&P.isSmallOrder())return!1;let F=ut(k,O.toRawBytes(),P.toRawBytes(),l);return O.add(P.multiplyUnsafe(F)).subtract(U).clearCofactor().equals(W.ZERO)}return V._setWindowSize(8),{CURVE:t,getPublicKey:xe,sign:ue,verify:s,ExtendedPoint:W,utils:{getExtendedPublicKey:ie,randomPrivateKey:()=>c(e.BYTES),precompute(h=8,l=W.BASE){return l._setWindowSize(h),l.multiply(BigInt(3)),l}}}}var Xn=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Qs=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),_u=BigInt(0),Ko=BigInt(1),ti=BigInt(2),Bu=BigInt(3),Wo=BigInt(5),Uo=BigInt(8);function qo(o){let t=BigInt(10),e=BigInt(20),r=BigInt(40),n=BigInt(80),i=Xn,f=o*o%i*o%i,g=we(f,ti,i)*f%i,x=we(g,Ko,i)*o%i,v=we(x,Wo,i)*x%i,A=we(v,t,i)*v%i,M=we(A,e,i)*A%i,_=we(M,r,i)*M%i,E=we(_,n,i)*_%i,B=we(E,n,i)*_%i,R=we(B,t,i)*v%i;return{pow_p_5_8:we(R,ti,i)*o%i,b2:f}}function Do(o){return o[0]&=248,o[31]&=127,o[31]|=64,o}function Fo(o,t){let e=Xn,r=be(t*t*t,e),n=be(r*r*t,e),i=qo(o*n).pow_p_5_8,c=be(o*r*i,e),f=be(t*c*c,e),g=c,x=be(c*Qs,e),v=f===o,A=f===be(-o,e),M=f===be(-o*Qs,e);return v&&(c=g),(A||M)&&(c=x),Vs(c,e)&&(c=be(-c,e)),{isValid:v||A,value:c}}var Ho=(()=>Cr(Xn,void 0,!0))(),$o=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Ho,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Uo,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Js,randomBytes:Ds,adjustScalarBytes:Do,uvRatio:Fo}))(),qe=(()=>Xs($o))();var gs=Ue(ri()),se=Ue(oi());var hr=Ue(ao()),m=Ue(ns()),qi=Ue(ns()),Br=Ue(co());Lt();Rt();var ss=class extends TypeError{constructor(t,e){let r,{message:n,explanation:i,...c}=t,{path:f}=t,g=f.length===0?n:`At path: ${f.join(".")} -- ${n}`;super(i??g),i!=null&&(this.cause=g),Object.assign(this,c),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}};function Zo(o){return br(o)&&typeof o[Symbol.iterator]=="function"}function br(o){return typeof o=="object"&&o!=null}function sn(o){return br(o)&&!Array.isArray(o)}function ve(o){return typeof o=="symbol"?o.toString():typeof o=="string"?JSON.stringify(o):`${o}`}function Jo(o){let{done:t,value:e}=o.next();return t?void 0:e}function Xo(o,t,e,r){if(o===!0)return;o===!1?o={}:typeof o=="string"&&(o={message:o});let{path:n,branch:i}=t,{type:c}=e,{refinement:f,message:g=`Expected a value of type \`${c}\`${f?` with refinement \`${f}\``:""}, but received: \`${ve(r)}\``}=o;return{value:r,type:c,refinement:f,key:n[n.length-1],path:n,branch:i,...o,message:g}}function*ai(o,t,e,r){Zo(o)||(o=[o]);for(let n of o){let i=Xo(n,t,e,r);i&&(yield i)}}function*is(o,t,e={}){let{path:r=[],branch:n=[o],coerce:i=!1,mask:c=!1}=e,f={path:r,branch:n,mask:c};i&&(o=t.coercer(o,f));let g="valid";for(let x of t.validator(o,f))x.explanation=e.message,g="not_valid",yield[x,void 0];for(let[x,v,A]of t.entries(o,f)){let M=is(v,A,{path:x===void 0?r:[...r,x],branch:x===void 0?n:[...n,v],coerce:i,mask:c,message:e.message});for(let _ of M)_[0]?(g=_[0].refinement!=null?"not_refined":"not_valid",yield[_[0],void 0]):i&&(v=_[1],x===void 0?o=v:o instanceof Map?o.set(x,v):o instanceof Set?o.add(v):br(o)&&(v!==void 0||x in o)&&(o[x]=v))}if(g!=="not_valid")for(let x of t.refiner(o,f))x.explanation=e.message,g="not_refined",yield[x,void 0];g==="valid"&&(yield[void 0,o])}var ge=class{constructor(t){let{type:e,schema:r,validator:n,refiner:i,coercer:c=g=>g,entries:f=function*(){}}=t;this.type=e,this.schema=r,this.entries=f,this.coercer=c,n?this.validator=(g,x)=>{let v=n(g,x);return ai(v,x,this,g)}:this.validator=()=>[],i?this.refiner=(g,x)=>{let v=i(g,x);return ai(v,x,this,g)}:this.refiner=()=>[]}assert(t,e){return os(t,this,e)}create(t,e){return N(t,this,e)}is(t){return ci(t,this)}mask(t,e){return Qo(t,this,e)}validate(t,e={}){return wr(t,this,e)}};function os(o,t,e){let r=wr(o,t,{message:e});if(r[0])throw r[0]}function N(o,t,e){let r=wr(o,t,{coerce:!0,message:e});if(r[0])throw r[0];return r[1]}function Qo(o,t,e){let r=wr(o,t,{coerce:!0,mask:!0,message:e});if(r[0])throw r[0];return r[1]}function ci(o,t){return!wr(o,t)[0]}function wr(o,t,e={}){let r=is(o,t,e),n=Jo(r);return n[0]?[new ss(n[0],function*(){for(let c of r)c[0]&&(yield c[0])}),void 0]:[void 0,n[1]]}function De(o,t){return new ge({type:o,schema:null,validator:t})}function ui(){return De("any",()=>!0)}function z(o){return new ge({type:"array",schema:o,*entries(t){if(o&&Array.isArray(t))for(let[e,r]of t.entries())yield[e,r,o]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${ve(t)}`}})}function Se(){return De("boolean",o=>typeof o=="boolean")}function on(o){return De("instance",t=>t instanceof o||`Expected a \`${o.name}\` instance, but received: ${ve(t)}`)}function pt(o){let t=ve(o),e=typeof o;return new ge({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?o:null,validator(r){return r===o||`Expected the literal \`${t}\`, but received: ${ve(r)}`}})}function ta(){return De("never",()=>!1)}function K(o){return new ge({...o,validator:(t,e)=>t===null||o.validator(t,e),refiner:(t,e)=>t===null||o.refiner(t,e)})}function S(){return De("number",o=>typeof o=="number"&&!isNaN(o)||`Expected a number, but received: ${ve(o)}`)}function $(o){return new ge({...o,validator:(t,e)=>t===void 0||o.validator(t,e),refiner:(t,e)=>t===void 0||o.refiner(t,e)})}function as(o,t){return new ge({type:"record",schema:null,*entries(e){if(br(e))for(let r in e){let n=e[r];yield[r,r,o],yield[r,n,t]}},validator(e){return sn(e)||`Expected an object, but received: ${ve(e)}`},coercer(e){return sn(e)?{...e}:e}})}function T(){return De("string",o=>typeof o=="string"||`Expected a string, but received: ${ve(o)}`)}function an(o){let t=ta();return new ge({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){let r=Math.max(o.length,e.length);for(let n=0;n<r;n++)yield[n,e[n],o[n]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${ve(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function L(o){let t=Object.keys(o);return new ge({type:"type",schema:o,*entries(e){if(br(e))for(let r of t)yield[r,e[r],o[r]]},validator(e){return sn(e)||`Expected an object, but received: ${ve(e)}`},coercer(e){return sn(e)?{...e}:e}})}function ce(o){let t=o.map(e=>e.type).join(" | ");return new ge({type:"union",schema:null,coercer(e,r){for(let n of o){let[i,c]=n.validate(e,{coerce:!0,mask:r.mask});if(!i)return c}return e},validator(e,r){let n=[];for(let i of o){let[...c]=is(e,i,r),[f]=c;if(f[0])for(let[g]of c)g&&n.push(g);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${ve(e)}`,...n]}})}function Fe(){return De("unknown",()=>!0)}function sr(o,t,e){return new ge({...o,coercer:(r,n)=>ci(r,t)?o.coercer(e(r,n),n):o.coercer(r,n)})}var Di=Ue(uo());Lt();Rt();Ws();var ea=class extends Yn.default{constructor(t,e,r){super();ne(this,"socket");this.socket=new window.WebSocket(t,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=n=>this.emit("message",n.data),this.socket.onerror=n=>this.emit("error",n),this.socket.onclose=n=>{this.emit("close",n.code,n.reason)}}send(t,e,r){let n=r||e;try{this.socket.send(t),n()}catch(i){n(i)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,r){this.socket.addEventListener(t,e,r)}};function hi(o,t){return new ea(o,t)}var ra=class{encode(o){return JSON.stringify(o)}decode(o){return JSON.parse(o)}},li=class extends Yn.default{constructor(t,e="ws://localhost:8080",{autoconnect:r=!0,reconnect:n=!0,reconnect_interval:i=1e3,max_reconnects:c=5,...f}={},g,x){super();ne(this,"address");ne(this,"rpc_id");ne(this,"queue");ne(this,"options");ne(this,"autoconnect");ne(this,"ready");ne(this,"reconnect");ne(this,"reconnect_timer_id");ne(this,"reconnect_interval");ne(this,"max_reconnects");ne(this,"rest_options");ne(this,"current_reconnects");ne(this,"generate_request_id");ne(this,"socket");ne(this,"webSocketFactory");ne(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=r,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=c,this.rest_options=f,this.current_reconnects=0,this.generate_request_id=g||(()=>++this.rpc_id),x?this.dataPack=x:this.dataPack=new ra,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,r,n){return!n&&typeof r=="object"&&(n=r,r=null),new Promise((i,c)=>{if(!this.ready)return c(new Error("socket not ready"));let f=this.generate_request_id(t,e),g={jsonrpc:"2.0",method:t,params:e||void 0,id:f};this.socket.send(this.dataPack.encode(g),n,x=>{if(x)return c(x);this.queue[f]={promise:[i,c]},r&&(this.queue[f].timeout=setTimeout(()=>{delete this.queue[f],c(new Error("reply timeout"))},r))})})}async login(t){let e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((r,n)=>{if(!this.ready)return n(new Error("socket not ready"));let i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),c=>{if(c)return n(c);r()})})}async subscribe(t){typeof t=="string"&&(t=[t]);let e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);let e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=H.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);let n=[r.notification];if(r.params.constructor===Object)n.push(r.params);else for(let i=0;i<r.params.length;i++)n.push(r.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,n)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r?.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:n})=>{this.ready&&setTimeout(()=>this.emit("close",r,n),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}};var na=qe.utils.randomPrivateKey,fi=()=>{let o=qe.utils.randomPrivateKey(),t=hn(o),e=new Uint8Array(64);return e.set(o),e.set(t,32),{publicKey:t,secretKey:e}},hn=qe.getPublicKey;function di(o){try{return qe.ExtendedPoint.fromHex(o),!0}catch{return!1}}var Is=(o,t)=>qe.sign(o,t.slice(0,32)),sa=qe.verify,J=o=>H.isBuffer(o)?o:o instanceof Uint8Array?H.from(o.buffer,o.byteOffset,o.byteLength):H.from(o),ln=class{constructor(t){Object.assign(this,t)}encode(){return H.from((0,hr.serialize)(un,this))}static decode(t){return(0,hr.deserialize)(un,this,t)}static decodeUnchecked(t){return(0,hr.deserializeUnchecked)(un,this,t)}},pi=class extends ln{constructor(t){if(super(t),this.enum="",Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(e=>{this.enum=e})}},un=new Map,Fi,ia=32,Re=32;function oa(o){return o._bn!==void 0}var yi=1,C=class extends ln{constructor(t){if(super({}),this._bn=void 0,oa(t))this._bn=t._bn;else{if(typeof t=="string"){let e=se.default.decode(t);if(e.length!=Re)throw new Error("Invalid public key input");this._bn=new gs.default(e)}else this._bn=new gs.default(t);if(this._bn.byteLength()>Re)throw new Error("Invalid public key input")}}static unique(){let t=new C(yi);return yi+=1,new C(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return se.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){let t=this._bn.toArrayLike(H);if(t.length===Re)return t;let e=H.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){let n=H.concat([t.toBuffer(),H.from(e),r.toBuffer()]),i=Hn(n);return new C(i)}static createProgramAddressSync(t,e){let r=H.alloc(0);t.forEach(function(i){if(i.length>ia)throw new TypeError("Max seed length exceeded");r=H.concat([r,J(i)])}),r=H.concat([r,e.toBuffer(),H.from("ProgramDerivedAddress")]);let n=Hn(r);if(di(n))throw new Error("Invalid seeds, address must fall off the curve");return new C(n)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,n;for(;r!=0;){try{let i=t.concat(H.from([r]));n=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[n,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){let e=new C(t);return di(e.toBytes())}};Fi=C;C.default=new Fi("11111111111111111111111111111111");un.set(C,{kind:"struct",fields:[["_bn","u256"]]});var gi=class{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){let e=J(t);if(t.length!==64)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=J(na()),this._publicKey=J(hn(this._secretKey))}get publicKey(){return new C(this._publicKey)}get secretKey(){return H.concat([this._secretKey,this._publicKey],64)}},oh=new C("BPFLoader1111111111111111111111111111111111"),Ge=1280-40-8,_s=127,fn=64,dn=class extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}};Object.defineProperty(dn.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var pn=class extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}};Object.defineProperty(pn.prototype,"name",{value:"TransactionExpiredTimeoutError"});var $e=class extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}};Object.defineProperty($e.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});var ir=class{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){let t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(let e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");let r=new Map;this.keySegments().flat().forEach((i,c)=>{r.set(i.toBase58(),c)});let n=i=>{let c=r.get(i.toBase58());if(c===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return c};return t.map(i=>({programIdIndex:n(i.programId),accountKeyIndexes:i.keys.map(c=>n(c.pubkey)),data:i.data}))}},Q=(o="publicKey")=>m.blob(32,o),aa=(o="signature")=>m.blob(64,o),Ve=(o="string")=>{let t=m.struct([m.u32("length"),m.u32("lengthPadding"),m.blob(m.offset(m.u32(),-8),"chars")],o),e=t.decode.bind(t),r=t.encode.bind(t),n=t;return n.decode=(i,c)=>e(i,c).chars.toString(),n.encode=(i,c,f)=>{let g={chars:H.from(i,"utf8")};return r(g,c,f)},n.alloc=i=>m.u32().span+m.u32().span+H.from(i,"utf8").length,n},ca=(o="authorized")=>m.struct([Q("staker"),Q("withdrawer")],o),ua=(o="lockup")=>m.struct([m.ns64("unixTimestamp"),m.ns64("epoch"),Q("custodian")],o),ha=(o="voteInit")=>m.struct([Q("nodePubkey"),Q("authorizedVoter"),Q("authorizedWithdrawer"),m.u8("commission")],o),la=(o="voteAuthorizeWithSeedArgs")=>m.struct([m.u32("voteAuthorizationType"),Q("currentAuthorityDerivedKeyOwnerPubkey"),Ve("currentAuthorityDerivedKeySeed"),Q("newAuthorized")],o);function Hi(o,t){let e=n=>{if(n.span>=0)return n.span;if(typeof n.alloc=="function")return n.alloc(t[n.property]);if("count"in n&&"elementLayout"in n){let i=t[n.property];if(Array.isArray(i))return i.length*e(n.elementLayout)}else if("fields"in n)return Hi({layout:n},t[n.property]);return 0},r=0;return o.layout.fields.forEach(n=>{r+=e(n)}),r}function fe(o){let t=0,e=0;for(;;){let r=o.shift();if(t|=(r&127)<<e*7,e+=1,(r&128)===0)break}return t}function ye(o,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){o.push(r);break}else r|=128,o.push(r)}}function ot(o,t){if(!o)throw new Error(t||"Assertion failed")}var or=class{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){let r=new Map,n=c=>{let f=c.toBase58(),g=r.get(f);return g===void 0&&(g={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(f,g)),g},i=n(e);i.isSigner=!0,i.isWritable=!0;for(let c of t){n(c.programId).isInvoked=!0;for(let f of c.keys){let g=n(f.pubkey);g.isSigner||=f.isSigner,g.isWritable||=f.isWritable}}return new or(e,r)}getMessageComponents(){let t=[...this.keyMetaMap.entries()];ot(t.length<=256,"Max static account keys length exceeded");let e=t.filter(([,g])=>g.isSigner&&g.isWritable),r=t.filter(([,g])=>g.isSigner&&!g.isWritable),n=t.filter(([,g])=>!g.isSigner&&g.isWritable),i=t.filter(([,g])=>!g.isSigner&&!g.isWritable),c={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{ot(e.length>0,"Expected at least one writable signer key");let[g]=e[0];ot(g===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}let f=[...e.map(([g])=>new C(g)),...r.map(([g])=>new C(g)),...n.map(([g])=>new C(g)),...i.map(([g])=>new C(g))];return[c,f]}extractTableLookup(t){let[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,c=>!c.isSigner&&!c.isInvoked&&c.isWritable),[n,i]=this.drainKeysFoundInLookupTable(t.state.addresses,c=>!c.isSigner&&!c.isInvoked&&!c.isWritable);if(!(e.length===0&&n.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:n},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){let r=new Array,n=new Array;for(let[i,c]of this.keyMetaMap.entries())if(e(c)){let f=new C(i),g=t.findIndex(x=>x.equals(f));g>=0&&(ot(g<256,"Max lookup table index exceeded"),r.push(g),n.push(f),this.keyMetaMap.delete(i))}return[r,n]}},$i="Reached end of buffer unexpectedly";function Ie(o){if(o.length===0)throw new Error($i);return o.shift()}function de(o,...t){let[e]=t;if(t.length===2?e+(t[1]??0)>o.length:e>=o.length)throw new Error($i);return o.splice(...t)}var me=class{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new C(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:se.default.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new ir(this.staticAccountKeys)}static compile(t){let e=or.compile(t.instructions,t.payerKey),[r,n]=e.getMessageComponents(),c=new ir(n).compileInstructions(t.instructions).map(f=>({programIdIndex:f.programIdIndex,accounts:f.accountKeyIndexes,data:se.default.encode(f.data)}));return new me({header:r,accountKeys:n,recentBlockhash:t.recentBlockhash,instructions:c})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){let e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){let r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{let r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){let t=this.accountKeys.length,e=[];ye(e,t);let r=this.instructions.map(A=>{let{accounts:M,programIdIndex:_}=A,E=Array.from(se.default.decode(A.data)),B=[];ye(B,M.length);let R=[];return ye(R,E.length),{programIdIndex:_,keyIndicesCount:H.from(B),keyIndices:M,dataLength:H.from(R),data:E}}),n=[];ye(n,r.length);let i=H.alloc(Ge);H.from(n).copy(i);let c=n.length;r.forEach(A=>{let _=m.struct([m.u8("programIdIndex"),m.blob(A.keyIndicesCount.length,"keyIndicesCount"),m.seq(m.u8("keyIndex"),A.keyIndices.length,"keyIndices"),m.blob(A.dataLength.length,"dataLength"),m.seq(m.u8("userdatum"),A.data.length,"data")]).encode(A,i,c);c+=_}),i=i.slice(0,c);let f=m.struct([m.blob(1,"numRequiredSignatures"),m.blob(1,"numReadonlySignedAccounts"),m.blob(1,"numReadonlyUnsignedAccounts"),m.blob(e.length,"keyCount"),m.seq(Q("key"),t,"keys"),Q("recentBlockhash")]),g={numRequiredSignatures:H.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:H.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:H.from([this.header.numReadonlyUnsignedAccounts]),keyCount:H.from(e),keys:this.accountKeys.map(A=>J(A.toBytes())),recentBlockhash:se.default.decode(this.recentBlockhash)},x=H.alloc(2048),v=f.encode(g,x);return i.copy(x,v),x.slice(0,v+i.length)}static from(t){let e=[...t],r=Ie(e);if(r!==(r&_s))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let n=Ie(e),i=Ie(e),c=fe(e),f=[];for(let M=0;M<c;M++){let _=de(e,0,Re);f.push(new C(H.from(_)))}let g=de(e,0,Re),x=fe(e),v=[];for(let M=0;M<x;M++){let _=Ie(e),E=fe(e),B=de(e,0,E),R=fe(e),q=de(e,0,R),G=se.default.encode(H.from(q));v.push({programIdIndex:_,accounts:B,data:G})}let A={header:{numRequiredSignatures:r,numReadonlySignedAccounts:n,numReadonlyUnsignedAccounts:i},recentBlockhash:se.default.encode(H.from(g)),accountKeys:f,instructions:v};return new me(A)}},ze=class{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(let e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new ir(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){let e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){let n=t-r,i=this.addressTableLookups.reduce((c,f)=>c+f.writableIndexes.length,0);return n<i}else if(t>=this.header.numRequiredSignatures){let n=t-e,c=r-e-this.header.numReadonlyUnsignedAccounts;return n<c}else{let n=e-this.header.numReadonlySignedAccounts;return t<n}}resolveAddressTableLookups(t){let e={writable:[],readonly:[]};for(let r of this.addressTableLookups){let n=t.find(i=>i.key.equals(r.accountKey));if(!n)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(let i of r.writableIndexes)if(i<n.state.addresses.length)e.writable.push(n.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(let i of r.readonlyIndexes)if(i<n.state.addresses.length)e.readonly.push(n.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){let e=or.compile(t.instructions,t.payerKey),r=new Array,n={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(let v of i){let A=e.extractTableLookup(v);if(A!==void 0){let[M,{writable:_,readonly:E}]=A;r.push(M),n.writable.push(..._),n.readonly.push(...E)}}let[c,f]=e.getMessageComponents(),x=new ir(f,n).compileInstructions(t.instructions);return new ze({header:c,staticAccountKeys:f,recentBlockhash:t.recentBlockhash,compiledInstructions:x,addressTableLookups:r})}serialize(){let t=Array();ye(t,this.staticAccountKeys.length);let e=this.serializeInstructions(),r=Array();ye(r,this.compiledInstructions.length);let n=this.serializeAddressTableLookups(),i=Array();ye(i,this.addressTableLookups.length);let c=m.struct([m.u8("prefix"),m.struct([m.u8("numRequiredSignatures"),m.u8("numReadonlySignedAccounts"),m.u8("numReadonlyUnsignedAccounts")],"header"),m.blob(t.length,"staticAccountKeysLength"),m.seq(Q(),this.staticAccountKeys.length,"staticAccountKeys"),Q("recentBlockhash"),m.blob(r.length,"instructionsLength"),m.blob(e.length,"serializedInstructions"),m.blob(i.length,"addressTableLookupsLength"),m.blob(n.length,"serializedAddressTableLookups")]),f=new Uint8Array(Ge),g=1<<7,x=c.encode({prefix:g,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(v=>v.toBytes()),recentBlockhash:se.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},f);return f.slice(0,x)}serializeInstructions(){let t=0,e=new Uint8Array(Ge);for(let r of this.compiledInstructions){let n=Array();ye(n,r.accountKeyIndexes.length);let i=Array();ye(i,r.data.length);let c=m.struct([m.u8("programIdIndex"),m.blob(n.length,"encodedAccountKeyIndexesLength"),m.seq(m.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),m.blob(i.length,"encodedDataLength"),m.blob(r.data.length,"data")]);t+=c.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0,e=new Uint8Array(Ge);for(let r of this.addressTableLookups){let n=Array();ye(n,r.writableIndexes.length);let i=Array();ye(i,r.readonlyIndexes.length);let c=m.struct([Q("accountKey"),m.blob(n.length,"encodedWritableIndexesLength"),m.seq(m.u8(),r.writableIndexes.length,"writableIndexes"),m.blob(i.length,"encodedReadonlyIndexesLength"),m.seq(m.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=c.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t],r=Ie(e),n=r&_s;ot(r!==n,"Expected versioned message but received legacy message");let i=n;ot(i===0,`Expected versioned message with version 0 but found version ${i}`);let c={numRequiredSignatures:Ie(e),numReadonlySignedAccounts:Ie(e),numReadonlyUnsignedAccounts:Ie(e)},f=[],g=fe(e);for(let E=0;E<g;E++)f.push(new C(de(e,0,Re)));let x=se.default.encode(de(e,0,Re)),v=fe(e),A=[];for(let E=0;E<v;E++){let B=Ie(e),R=fe(e),q=de(e,0,R),G=fe(e),W=new Uint8Array(de(e,0,G));A.push({programIdIndex:B,accountKeyIndexes:q,data:W})}let M=fe(e),_=[];for(let E=0;E<M;E++){let B=new C(de(e,0,Re)),R=fe(e),q=de(e,0,R),G=fe(e),W=de(e,0,G);_.push({accountKey:B,writableIndexes:q,readonlyIndexes:W})}return new ze({header:c,staticAccountKeys:f,recentBlockhash:x,compiledInstructions:A,addressTableLookups:_})}},Vi={deserializeMessageVersion(o){let t=o[0],e=t&_s;return e===t?"legacy":e},deserialize:o=>{let t=Vi.deserializeMessageVersion(o);if(t==="legacy")return me.from(o);if(t===0)return ze.deserialize(o);throw new Error(`Transaction message version ${t} deserialization is not supported`)}},Ne=function(o){return o[o.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",o[o.PROCESSED=1]="PROCESSED",o[o.TIMED_OUT=2]="TIMED_OUT",o[o.NONCE_INVALID=3]="NONCE_INVALID",o}({}),fa=H.alloc(fn).fill(0),ht=class{constructor(t){this.keys=void 0,this.programId=void 0,this.data=H.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}},it=class{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){let{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){let{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{let{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new ht(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let B=0;B<e.length;B++)if(e[B].programId===void 0)throw new Error(`Transaction instruction index ${B} has undefined program id`);let n=[],i=[];e.forEach(B=>{B.keys.forEach(q=>{i.push({...q})});let R=B.programId.toString();n.includes(R)||n.push(R)}),n.forEach(B=>{i.push({pubkey:new C(B),isSigner:!1,isWritable:!1})});let c=[];i.forEach(B=>{let R=B.pubkey.toString(),q=c.findIndex(G=>G.pubkey.toString()===R);q>-1?(c[q].isWritable=c[q].isWritable||B.isWritable,c[q].isSigner=c[q].isSigner||B.isSigner):c.push(B)}),c.sort(function(B,R){if(B.isSigner!==R.isSigner)return B.isSigner?-1:1;if(B.isWritable!==R.isWritable)return B.isWritable?-1:1;let q={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return B.pubkey.toBase58().localeCompare(R.pubkey.toBase58(),"en",q)});let f=c.findIndex(B=>B.pubkey.equals(r));if(f>-1){let[B]=c.splice(f,1);B.isSigner=!0,B.isWritable=!0,c.unshift(B)}else c.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(let B of this.signatures){let R=c.findIndex(q=>q.pubkey.equals(B.publicKey));if(R>-1)c[R].isSigner||(c[R].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${B.publicKey.toString()}`)}let g=0,x=0,v=0,A=[],M=[];c.forEach(({pubkey:B,isSigner:R,isWritable:q})=>{R?(A.push(B.toString()),g+=1,q||(x+=1)):(M.push(B.toString()),q||(v+=1))});let _=A.concat(M),E=e.map(B=>{let{data:R,programId:q}=B;return{programIdIndex:_.indexOf(q.toString()),accounts:B.keys.map(G=>_.indexOf(G.pubkey.toString())),data:se.default.encode(R)}});return E.forEach(B=>{ot(B.programIdIndex>=0),B.accounts.forEach(R=>ot(R>=0))}),new me({header:{numRequiredSignatures:g,numReadonlySignedAccounts:x,numReadonlyUnsignedAccounts:v},accountKeys:_,recentBlockhash:t,instructions:E})}_compile(){let t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((n,i)=>e[i].equals(n.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");let e=new Set;this.signatures=t.filter(r=>{let n=r.toString();return e.has(n)?!1:(e.add(n),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");let e=new Set,r=[];for(let i of t){let c=i.publicKey.toString();e.has(c)||(e.add(c),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));let n=this._compile();this._partialSign(n,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");let e=new Set,r=[];for(let i of t){let c=i.publicKey.toString();e.has(c)||(e.add(c),r.push(i))}let n=this._compile();this._partialSign(n,...r)}_partialSign(t,...e){let r=t.serialize();e.forEach(n=>{let i=Is(r,n.secretKey);this._addSignature(n.publicKey,J(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){ot(e.length===64);let r=this.signatures.findIndex(n=>t.equals(n.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=H.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){let r={};for(let{signature:n,publicKey:i}of this.signatures)n===null?e&&(r.missing||=[]).push(i):sa(n,t,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(t){let{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),n=this.serializeMessage();if(r){let i=this._getMessageSignednessErrors(n,e);if(i){let c="Signature verification failed.";throw i.invalid&&(c+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(f=>f.toBase58()).join("`, `")}\`].`),i.missing&&(c+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(f=>f.toBase58()).join("`, `")}\`].`),new Error(c)}}return this._serialize(n)}_serialize(t){let{signatures:e}=this,r=[];ye(r,e.length);let n=r.length+e.length*64+t.length,i=H.alloc(n);return ot(e.length<256),H.from(r).copy(i,0),e.forEach(({signature:c},f)=>{c!==null&&(ot(c.length===64,"signature has invalid length"),H.from(c).copy(i,r.length+f*64))}),t.copy(i,r.length+e.length*64),ot(i.length<=Ge,`Transaction too large: ${i.length} > ${Ge}`),i}get keys(){return ot(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return ot(this.instructions.length===1),this.instructions[0].programId}get data(){return ot(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t],r=fe(e),n=[];for(let i=0;i<r;i++){let c=de(e,0,fn);n.push(se.default.encode(H.from(c)))}return it.populate(me.from(e),n)}static populate(t,e=[]){let r=new it;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((n,i)=>{let c={signature:n==se.default.encode(fa)?null:se.default.decode(n),publicKey:t.accountKeys[i]};r.signatures.push(c)}),t.instructions.forEach(n=>{let i=n.accounts.map(c=>{let f=t.accountKeys[c];return{pubkey:f,isSigner:r.signatures.some(g=>g.publicKey.toString()===f.toString())||t.isAccountSigner(c),isWritable:t.isAccountWritable(c)}});r.instructions.push(new ht({keys:i,programId:t.accountKeys[n.programIdIndex],data:se.default.decode(n.data)}))}),r._message=t,r._json=r.toJSON(),r}},yn=class{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){let{header:r,compiledInstructions:n,recentBlockhash:i}=t,{numRequiredSignatures:c,numReadonlySignedAccounts:f,numReadonlyUnsignedAccounts:g}=r,x=c-f;ot(x>0,"Message header is invalid");let v=t.staticAccountKeys.length-c-g;ot(v>=0,"Message header is invalid");let A=t.getAccountKeys(e),M=A.get(0);if(M===void 0)throw new Error("Failed to decompile message because no account keys were found");let _=[];for(let E of n){let B=[];for(let q of E.accountKeyIndexes){let G=A.get(q);if(G===void 0)throw new Error(`Failed to find key for account key index ${q}`);let W=q<c,V;W?V=q<x:q<A.staticAccountKeys.length?V=q-c<v:V=q-A.staticAccountKeys.length<A.accountKeysFromLookups.writable.length,B.push({pubkey:G,isSigner:q<r.numRequiredSignatures,isWritable:V})}let R=A.get(E.programIdIndex);if(R===void 0)throw new Error(`Failed to find program id for program id index ${E.programIdIndex}`);_.push(new ht({programId:R,data:J(E.data),keys:B}))}return new yn({payerKey:M,instructions:_,recentBlockhash:i})}compileToLegacyMessage(){return me.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return ze.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}},gn=class{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)ot(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{let r=[];for(let n=0;n<t.header.numRequiredSignatures;n++)r.push(new Uint8Array(fn));this.signatures=r}this.message=t}serialize(){let t=this.message.serialize(),e=Array();ye(e,this.signatures.length);let r=m.struct([m.blob(e.length,"encodedSignaturesLength"),m.seq(aa(),this.signatures.length,"signatures"),m.blob(t.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},n);return n.slice(0,i)}static deserialize(t){let e=[...t],r=[],n=fe(e);for(let c=0;c<n;c++)r.push(new Uint8Array(de(e,0,fn)));let i=Vi.deserialize(new Uint8Array(e));return new gn(i,r)}sign(t){let e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(let n of t){let i=r.findIndex(c=>c.equals(n.publicKey));ot(i>=0,`Cannot sign with non signer key ${n.publicKey.toBase58()}`),this.signatures[i]=Is(e,n.secretKey)}}addSignature(t,e){ot(e.byteLength===64,"Signature must be 64 bytes long");let n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));ot(n>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[n]=e}},da=160,pa=64,ya=da/pa,Gi=1e3/ya,Ee=new C("SysvarC1ock11111111111111111111111111111111"),ah=new C("SysvarEpochSchedu1e111111111111111111111111"),ch=new C("Sysvar1nstructions1111111111111111111111111"),cs=new C("SysvarRecentB1ockHashes11111111111111111111"),vr=new C("SysvarRent111111111111111111111111111111111"),uh=new C("SysvarRewards111111111111111111111111111111"),hh=new C("SysvarS1otHashes111111111111111111111111111"),lh=new C("SysvarS1otHistory11111111111111111111111111"),us=new C("SysvarStakeHistory1111111111111111111111111"),ar=class extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:n}){let i=n?`Logs: 
${JSON.stringify(n.slice(-10),null,2)}. `:"",c="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.",f;switch(t){case"send":f=`Transaction ${e} resulted in an error. 
${r}. `+i+c;break;case"simulate":f=`Simulation failed. 
Message: ${r}. 
`+i+c;break;default:f=`Unknown action '${(g=>g)(t)}'`}super(f),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=n||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){let t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(n=>{if(n&&n.meta&&n.meta.logMessages){let i=n.meta.logMessages;this.transactionLogs=i,e(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}},fh={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016},D=class extends Error{constructor({code:t,message:e,data:r},n){super(n!=null?`${n}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}};async function mi(o,t,e,r){let n=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},i=await o.sendTransaction(t,e,n),c;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)c=(await o.confirmTransaction({abortSignal:r?.abortSignal,signature:i,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},r&&r.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){let{nonceInstruction:f}=t.nonceInfo,g=f.keys[0].pubkey;c=(await o.confirmTransaction({abortSignal:r?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:g,nonceValue:t.nonceInfo.nonce,signature:i},r&&r.commitment)).value}else r?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),c=(await o.confirmTransaction(i,r&&r.commitment)).value;if(c.err)throw i!=null?new ar({action:"send",signature:i,transactionMessage:`Status: (${JSON.stringify(c)})`}):new Error(`Transaction ${i} failed (${JSON.stringify(c)})`);return i}function He(o){return new Promise(t=>setTimeout(t,o))}function et(o,t){let e=o.layout.span>=0?o.layout.span:Hi(o,t),r=H.alloc(e),n=Object.assign({instruction:o.index},t);return o.layout.encode(n,r),r}function ct(o,t){let e;try{e=o.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.instruction!==o.index)throw new Error(`invalid instruction; instruction index mismatch ${e.instruction} != ${o.index}`);return e}var ga=m.nu64("lamportsPerSignature"),ji=m.struct([m.u32("version"),m.u32("state"),Q("authorizedPubkey"),Q("nonce"),m.struct([ga],"feeCalculator")]),bi=ji.span,Sr=class{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){let e=ji.decode(J(t),0);return new Sr({authorizedPubkey:new C(e.authorizedPubkey),nonce:new C(e.nonce).toString(),feeCalculator:e.feeCalculator})}},ma=o=>{let t=o.decode.bind(o),e=o.encode.bind(o);return{decode:t,encode:e}},ba=o=>t=>{let e=(0,qi.blob)(o,t),{encode:r,decode:n}=ma(e),i=e;return i.decode=(c,f)=>{let g=n(c,f);return(0,Br.toBigIntLE)(H.from(g))},i.encode=(c,f,g)=>{let x=(0,Br.toBufferLE)(c,o);return r(x,f,g)},i},cr=ba(8),wi=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let r=m.u32("instruction").decode(t.data),n;for(let[i,c]of Object.entries(ft))if(c.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a SystemInstruction");return n}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{lamports:e,space:r,programId:n}=ct(ft.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:r,programId:new C(n)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{lamports:e}=ct(ft.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:e,seed:r,programId:n}=ct(ft.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:r,programId:new C(n)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{space:e}=ct(ft.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{base:e,seed:r,space:n,programId:i}=ct(ft.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new C(e),seed:r,space:n,programId:new C(i)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{programId:e}=ct(ft.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new C(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{base:e,seed:r,programId:n}=ct(ft.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new C(e),seed:r,programId:new C(n)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{base:e,seed:r,lamports:n,space:i,programId:c}=ct(ft.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new C(e),seed:r,lamports:n,space:i,programId:new C(c)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{authorized:e}=ct(ft.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new C(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),ct(ft.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);let{lamports:e}=ct(ft.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{authorized:e}=ct(ft.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new C(e)}}static checkProgramId(t){if(!t.equals(re.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},ft=Object.freeze({Create:{index:0,layout:m.struct([m.u32("instruction"),m.ns64("lamports"),m.ns64("space"),Q("programId")])},Assign:{index:1,layout:m.struct([m.u32("instruction"),Q("programId")])},Transfer:{index:2,layout:m.struct([m.u32("instruction"),cr("lamports")])},CreateWithSeed:{index:3,layout:m.struct([m.u32("instruction"),Q("base"),Ve("seed"),m.ns64("lamports"),m.ns64("space"),Q("programId")])},AdvanceNonceAccount:{index:4,layout:m.struct([m.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:m.struct([m.u32("instruction"),m.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:m.struct([m.u32("instruction"),Q("authorized")])},AuthorizeNonceAccount:{index:7,layout:m.struct([m.u32("instruction"),Q("authorized")])},Allocate:{index:8,layout:m.struct([m.u32("instruction"),m.ns64("space")])},AllocateWithSeed:{index:9,layout:m.struct([m.u32("instruction"),Q("base"),Ve("seed"),m.ns64("space"),Q("programId")])},AssignWithSeed:{index:10,layout:m.struct([m.u32("instruction"),Q("base"),Ve("seed"),Q("programId")])},TransferWithSeed:{index:11,layout:m.struct([m.u32("instruction"),cr("lamports"),Ve("seed"),Q("programId")])},UpgradeNonceAccount:{index:12,layout:m.struct([m.u32("instruction")])}}),re=class{constructor(){}static createAccount(t){let e=ft.Create,r=et(e,{lamports:t.lamports,space:t.space,programId:J(t.programId.toBuffer())});return new ht({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){let n=ft.TransferWithSeed;e=et(n,{lamports:BigInt(t.lamports),seed:t.seed,programId:J(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{let n=ft.Transfer;e=et(n,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new ht({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){let n=ft.AssignWithSeed;e=et(n,{base:J(t.basePubkey.toBuffer()),seed:t.seed,programId:J(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{let n=ft.Assign;e=et(n,{programId:J(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new ht({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){let e=ft.CreateWithSeed,r=et(e,{base:J(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:J(t.programId.toBuffer())}),n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||n.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new ht({keys:n,programId:this.programId,data:r})}static createNonceAccount(t){let e=new it;"basePubkey"in t&&"seed"in t?e.add(re.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:bi,programId:this.programId})):e.add(re.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:bi,programId:this.programId}));let r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){let e=ft.InitializeNonceAccount,r=et(e,{authorized:J(t.authorizedPubkey.toBuffer())}),n={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:cs,isSigner:!1,isWritable:!1},{pubkey:vr,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new ht(n)}static nonceAdvance(t){let e=ft.AdvanceNonceAccount,r=et(e),n={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:cs,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new ht(n)}static nonceWithdraw(t){let e=ft.WithdrawNonceAccount,r=et(e,{lamports:t.lamports});return new ht({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:cs,isSigner:!1,isWritable:!1},{pubkey:vr,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){let e=ft.AuthorizeNonceAccount,r=et(e,{authorized:J(t.newAuthorizedPubkey.toBuffer())});return new ht({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){let n=ft.AllocateWithSeed;e=et(n,{base:J(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:J(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{let n=ft.Allocate;e=et(n,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new ht({keys:r,programId:this.programId,data:e})}};re.programId=new C("11111111111111111111111111111111");var wa=Ge-300,Ke=class{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/Ke.chunkSize)+1+1)}static async load(t,e,r,n,i){{let A=await t.getMinimumBalanceForRentExemption(i.length),M=await t.getAccountInfo(r.publicKey,"confirmed"),_=null;if(M!==null){if(M.executable)return console.error("Program load failed, account is already executable"),!1;M.data.length!==i.length&&(_=_||new it,_.add(re.allocate({accountPubkey:r.publicKey,space:i.length}))),M.owner.equals(n)||(_=_||new it,_.add(re.assign({accountPubkey:r.publicKey,programId:n}))),M.lamports<A&&(_=_||new it,_.add(re.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:A-M.lamports})))}else _=new it().add(re.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:A>0?A:1,space:i.length,programId:n}));_!==null&&await mi(t,_,[e,r],{commitment:"confirmed"})}let c=m.struct([m.u32("instruction"),m.u32("offset"),m.u32("bytesLength"),m.u32("bytesLengthPadding"),m.seq(m.u8("byte"),m.offset(m.u32(),-8),"bytes")]),f=Ke.chunkSize,g=0,x=i,v=[];for(;x.length>0;){let A=x.slice(0,f),M=H.alloc(f+16);c.encode({instruction:0,offset:g,bytes:A,bytesLength:0,bytesLengthPadding:0},M);let _=new it().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:n,data:M});v.push(mi(t,_,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await He(1e3/4),g+=f,x=x.slice(f)}await Promise.all(v);{let A=m.struct([m.u32("instruction")]),M=H.alloc(A.span);A.encode({instruction:1},M);let _=new it().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:vr,isSigner:!1,isWritable:!1}],programId:n,data:M}),E="processed",B=await t.sendTransaction(_,[e,r],{preflightCommitment:E}),{context:R,value:q}=await t.confirmTransaction({signature:B,lastValidBlockHeight:_.lastValidBlockHeight,blockhash:_.recentBlockhash},E);if(q.err)throw new Error(`Transaction ${B} failed (${JSON.stringify(q)})`);for(;;){try{if(await t.getSlot({commitment:E})>R.slot)break}catch{}await new Promise(G=>setTimeout(G,Math.round(Gi/2)))}}return!0}};Ke.chunkSize=wa;var dh=new C("BPFLoader2111111111111111111111111111111111"),ki=class{static getMinNumSignatures(t){return Ke.getMinNumSignatures(t)}static load(t,e,r,n,i){return Ke.load(t,e,r,i,n)}};function ka(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var hs,vi;function va(){if(vi)return hs;vi=1;var o=Object.prototype.toString,t=Object.keys||function(r){var n=[];for(var i in r)n.push(i);return n};function e(r,n){var i,c,f,g,x,v,A;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return e(r.toJSON(),n);if(A=o.call(r),A==="[object Array]"){for(f="[",c=r.length-1,i=0;i<c;i++)f+=e(r[i],!0)+",";return c>-1&&(f+=e(r[i],!0)),f+"]"}else if(A==="[object Object]"){for(g=t(r).sort(),c=g.length,f="",i=0;i<c;)x=g[i],v=e(r[x],!1),v!==void 0&&(f&&(f+=","),f+=JSON.stringify(x)+":"+v),i++;return"{"+f+"}"}else return JSON.stringify(r);case"function":case"undefined":return n?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return hs=function(r){var n=e(r,!1);if(n!==void 0)return""+n},hs}var Sa=va(),Si=ka(Sa),kr=32;function ls(o){let t=0;for(;o>1;)o/=2,t++;return t}function xa(o){return o===0?1:(o--,o|=o>>1,o|=o>>2,o|=o>>4,o|=o>>8,o|=o>>16,o|=o>>32,o+1)}var ms=class{constructor(t,e,r,n,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){let e=ls(xa(t+kr+1))-ls(kr)-1,r=this.getSlotsInEpoch(e),n=t-(r-kr);return[e,n]}else{let e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),n=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[n,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*kr:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+ls(kr)):this.slotsPerEpoch}},Ia=globalThis.fetch,bs=class extends li{constructor(t,e,r){let n=i=>{let c=hi(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in c?this.underlyingSocket=c.socket:this.underlyingSocket=c,c};super(n,t,e,r),this.underlyingSocket=void 0}call(...t){let e=this.underlyingSocket?.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){let e=this.underlyingSocket?.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}};function _a(o,t){let e;try{e=o.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==o.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${o.index}`);return e}var xi=56,mn=class{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){let t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){let e=_a(Ba,t),r=t.length-xi;ot(r>=0,"lookup table is invalid"),ot(r%32===0,"lookup table is invalid");let n=r/32,{addresses:i}=m.struct([m.seq(Q(),n,"addresses")]).decode(t.slice(xi));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new C(e.authority[0]):void 0,addresses:i.map(c=>new C(c))}}},Ba={index:1,layout:m.struct([m.u32("typeIndex"),cr("deactivationSlot"),m.nu64("lastExtendedSlot"),m.u8("lastExtendedStartIndex"),m.u8(),m.seq(Q(),m.offset(m.u8(),-1),"authority")])},Aa=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Ea(o){let t=o.match(Aa);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${o}\``);let[e,r,n,i]=t,c=o.startsWith("https:")?"wss:":"ws:",f=n==null?null:parseInt(n.slice(1),10),g=f==null?"":`:${f+1}`;return`${c}//${r}${g}${i}`}var xt=sr(on(C),T(),o=>new C(o)),Yi=an([T(),pt("base64")]),Bs=sr(on(H),Yi,o=>H.from(o[0],"base64")),La=30*1e3;function Ra(o){if(/^https?:/.test(o)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return o}function lt(o){let t,e;if(typeof o=="string")t=o;else if(o){let{commitment:r,...n}=o;t=r,e=n}return{commitment:t,config:e}}function Ii(o){return o.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function Zi(o){return ce([L({jsonrpc:pt("2.0"),id:T(),result:o}),L({jsonrpc:pt("2.0"),id:T(),error:L({code:Fe(),message:T(),data:$(ui())})})])}var Ma=Zi(Fe());function Z(o){return sr(Zi(o),Ma,t=>"error"in t?t:{...t,result:N(t.result,o)})}function Mt(o){return Z(L({context:L({slot:S()}),value:o}))}function xn(o){return L({context:L({slot:S()}),value:o})}function fs(o,t){return o===0?new ze({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new C(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:se.default.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new me(t)}var Pa=L({foundation:S(),foundationTerm:S(),initial:S(),taper:S(),terminal:S()}),Ta=Z(z(K(L({epoch:S(),effectiveSlot:S(),amount:S(),postBalance:S(),commission:$(K(S()))})))),Ca=z(L({slot:S(),prioritizationFee:S()})),Na=L({total:S(),validator:S(),foundation:S(),epoch:S()}),Oa=L({epoch:S(),slotIndex:S(),slotsInEpoch:S(),absoluteSlot:S(),blockHeight:$(S()),transactionCount:$(S())}),za=L({slotsPerEpoch:S(),leaderScheduleSlotOffset:S(),warmup:Se(),firstNormalEpoch:S(),firstNormalSlot:S()}),Ka=as(T(),z(S())),Je=K(ce([L({}),T()])),Wa=L({err:Je}),Ua=pt("receivedSignature"),qa=L({"solana-core":T(),"feature-set":$(S())}),Da=L({program:T(),programId:xt,parsed:Fe()}),Fa=L({programId:xt,accounts:z(xt),data:T()}),_i=Mt(L({err:K(ce([L({}),T()])),logs:K(z(T())),accounts:$(K(z(K(L({executable:Se(),owner:T(),lamports:S(),data:z(T()),rentEpoch:$(S())}))))),unitsConsumed:$(S()),returnData:$(K(L({programId:T(),data:an([T(),pt("base64")])}))),innerInstructions:$(K(z(L({index:S(),instructions:z(ce([Da,Fa]))}))))})),Ha=Mt(L({byIdentity:as(T(),z(S())),range:L({firstSlot:S(),lastSlot:S()})}));function $a(o,t,e,r,n,i){let c=e||Ia,f;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let g;return r&&(g=async(v,A)=>{let M=await new Promise((_,E)=>{try{r(v,A,(B,R)=>_([B,R]))}catch(B){E(B)}});return await c(...M)}),new Di.default(async(v,A)=>{let M={method:"POST",body:v,agent:f,headers:Object.assign({"Content-Type":"application/json"},t||{},Vc)};try{let _=5,E,B=500;for(;g?E=await g(o,M):E=await c(o,M),!(E.status!==429||n===!0||(_-=1,_===0));)console.error(`Server responded with ${E.status} ${E.statusText}.  Retrying after ${B}ms delay...`),await He(B),B*=2;let R=await E.text();E.ok?A(null,R):A(new Error(`${E.status} ${E.statusText}: ${R}`))}catch(_){_ instanceof Error&&A(_)}},{})}function Va(o){return(t,e)=>new Promise((r,n)=>{o.request(t,e,(i,c)=>{if(i){n(i);return}r(c)})})}function Ga(o){return t=>new Promise((e,r)=>{t.length===0&&e([]);let n=t.map(i=>o.request(i.methodName,i.args));o.request(n,(i,c)=>{if(i){r(i);return}e(c)})})}var ja=Z(Pa),Ya=Z(Na),Za=Z(Ca),Ja=Z(Oa),Xa=Z(za),Qa=Z(Ka),tc=Z(S()),ec=Mt(L({total:S(),circulating:S(),nonCirculating:S(),nonCirculatingAccounts:z(xt)})),ws=L({amount:T(),uiAmount:K(S()),decimals:S(),uiAmountString:$(T())}),rc=Mt(z(L({address:xt,amount:T(),uiAmount:K(S()),decimals:S(),uiAmountString:$(T())}))),nc=Mt(z(L({pubkey:xt,account:L({executable:Se(),owner:xt,lamports:S(),data:Bs,rentEpoch:S()})}))),ks=L({program:T(),parsed:Fe(),space:S()}),sc=Mt(z(L({pubkey:xt,account:L({executable:Se(),owner:xt,lamports:S(),data:ks,rentEpoch:S()})}))),ic=Mt(z(L({lamports:S(),address:xt}))),xr=L({executable:Se(),owner:xt,lamports:S(),data:Bs,rentEpoch:S()}),oc=L({pubkey:xt,account:xr}),ac=sr(ce([on(H),ks]),ce([Yi,ks]),o=>Array.isArray(o)?N(o,Bs):o),vs=L({executable:Se(),owner:xt,lamports:S(),data:ac,rentEpoch:S()}),cc=L({pubkey:xt,account:vs}),uc=L({state:ce([pt("active"),pt("inactive"),pt("activating"),pt("deactivating")]),active:S(),inactive:S()}),hc=Z(z(L({signature:T(),slot:S(),err:Je,memo:K(T()),blockTime:$(K(S()))}))),lc=Z(z(L({signature:T(),slot:S(),err:Je,memo:K(T()),blockTime:$(K(S()))}))),fc=L({subscription:S(),result:xn(xr)}),dc=L({pubkey:xt,account:xr}),pc=L({subscription:S(),result:xn(dc)}),yc=L({parent:S(),slot:S(),root:S()}),gc=L({subscription:S(),result:yc}),mc=ce([L({type:ce([pt("firstShredReceived"),pt("completed"),pt("optimisticConfirmation"),pt("root")]),slot:S(),timestamp:S()}),L({type:pt("createdBank"),parent:S(),slot:S(),timestamp:S()}),L({type:pt("frozen"),slot:S(),timestamp:S(),stats:L({numTransactionEntries:S(),numSuccessfulTransactions:S(),numFailedTransactions:S(),maxTransactionsPerEntry:S()})}),L({type:pt("dead"),slot:S(),timestamp:S(),err:T()})]),bc=L({subscription:S(),result:mc}),wc=L({subscription:S(),result:xn(ce([Wa,Ua]))}),kc=L({subscription:S(),result:S()}),vc=L({pubkey:T(),gossip:K(T()),tpu:K(T()),rpc:K(T()),version:K(T())}),Bi=L({votePubkey:T(),nodePubkey:T(),activatedStake:S(),epochVoteAccount:Se(),epochCredits:z(an([S(),S(),S()])),commission:S(),lastVote:S(),rootSlot:K(S())}),Sc=Z(L({current:z(Bi),delinquent:z(Bi)})),xc=ce([pt("processed"),pt("confirmed"),pt("finalized")]),Ic=L({slot:S(),confirmations:K(S()),err:Je,confirmationStatus:$(xc)}),_c=Mt(z(K(Ic))),Bc=Z(S()),Ji=L({accountKey:xt,writableIndexes:z(S()),readonlyIndexes:z(S())}),As=L({signatures:z(T()),message:L({accountKeys:z(T()),header:L({numRequiredSignatures:S(),numReadonlySignedAccounts:S(),numReadonlyUnsignedAccounts:S()}),instructions:z(L({accounts:z(S()),data:T(),programIdIndex:S()})),recentBlockhash:T(),addressTableLookups:$(z(Ji))})}),Xi=L({pubkey:xt,signer:Se(),writable:Se(),source:$(ce([pt("transaction"),pt("lookupTable")]))}),Qi=L({accountKeys:z(Xi),signatures:z(T())}),to=L({parsed:Fe(),program:T(),programId:xt}),eo=L({accounts:z(xt),data:T(),programId:xt}),Ac=ce([eo,to]),Ec=ce([L({parsed:Fe(),program:T(),programId:T()}),L({accounts:z(T()),data:T(),programId:T()})]),ro=sr(Ac,Ec,o=>"accounts"in o?N(o,eo):N(o,to)),no=L({signatures:z(T()),message:L({accountKeys:z(Xi),instructions:z(ro),recentBlockhash:T(),addressTableLookups:$(K(z(Ji)))})}),bn=L({accountIndex:S(),mint:T(),owner:$(T()),uiTokenAmount:ws}),so=L({writable:z(xt),readonly:z(xt)}),In=L({err:Je,fee:S(),innerInstructions:$(K(z(L({index:S(),instructions:z(L({accounts:z(S()),data:T(),programIdIndex:S()}))})))),preBalances:z(S()),postBalances:z(S()),logMessages:$(K(z(T()))),preTokenBalances:$(K(z(bn))),postTokenBalances:$(K(z(bn))),loadedAddresses:$(so),computeUnitsConsumed:$(S())}),Es=L({err:Je,fee:S(),innerInstructions:$(K(z(L({index:S(),instructions:z(ro)})))),preBalances:z(S()),postBalances:z(S()),logMessages:$(K(z(T()))),preTokenBalances:$(K(z(bn))),postTokenBalances:$(K(z(bn))),loadedAddresses:$(so),computeUnitsConsumed:$(S())}),lr=ce([pt(0),pt("legacy")]),Xe=L({pubkey:T(),lamports:S(),postBalance:K(S()),rewardType:K(T()),commission:$(K(S()))}),Lc=Z(K(L({blockhash:T(),previousBlockhash:T(),parentSlot:S(),transactions:z(L({transaction:As,meta:K(In),version:$(lr)})),rewards:$(z(Xe)),blockTime:K(S()),blockHeight:K(S())}))),Rc=Z(K(L({blockhash:T(),previousBlockhash:T(),parentSlot:S(),rewards:$(z(Xe)),blockTime:K(S()),blockHeight:K(S())}))),Mc=Z(K(L({blockhash:T(),previousBlockhash:T(),parentSlot:S(),transactions:z(L({transaction:Qi,meta:K(In),version:$(lr)})),rewards:$(z(Xe)),blockTime:K(S()),blockHeight:K(S())}))),Pc=Z(K(L({blockhash:T(),previousBlockhash:T(),parentSlot:S(),transactions:z(L({transaction:no,meta:K(Es),version:$(lr)})),rewards:$(z(Xe)),blockTime:K(S()),blockHeight:K(S())}))),Tc=Z(K(L({blockhash:T(),previousBlockhash:T(),parentSlot:S(),transactions:z(L({transaction:Qi,meta:K(Es),version:$(lr)})),rewards:$(z(Xe)),blockTime:K(S()),blockHeight:K(S())}))),Cc=Z(K(L({blockhash:T(),previousBlockhash:T(),parentSlot:S(),rewards:$(z(Xe)),blockTime:K(S()),blockHeight:K(S())}))),Nc=Z(K(L({blockhash:T(),previousBlockhash:T(),parentSlot:S(),transactions:z(L({transaction:As,meta:K(In)})),rewards:$(z(Xe)),blockTime:K(S())}))),Ai=Z(K(L({blockhash:T(),previousBlockhash:T(),parentSlot:S(),signatures:z(T()),blockTime:K(S())}))),ds=Z(K(L({slot:S(),meta:K(In),blockTime:$(K(S())),transaction:As,version:$(lr)}))),cn=Z(K(L({slot:S(),transaction:no,meta:K(Es),blockTime:$(K(S())),version:$(lr)}))),Oc=Mt(L({blockhash:T(),feeCalculator:L({lamportsPerSignature:S()})})),zc=Mt(L({blockhash:T(),lastValidBlockHeight:S()})),Kc=Mt(Se()),Wc=L({slot:S(),numTransactions:S(),numSlots:S(),samplePeriodSecs:S()}),Uc=Z(z(Wc)),qc=Mt(K(L({feeCalculator:L({lamportsPerSignature:S()})}))),Dc=Z(T()),Fc=Z(T()),Hc=L({err:Je,logs:z(T()),signature:T()}),$c=L({result:xn(Hc),subscription:S()}),Vc={"solana-client":"js/1.0.0-maintenance"},Ei=class{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{let x={};return async v=>{let{commitment:A,config:M}=lt(v),_=this._buildArgs([],A,void 0,M),E=Si(_);return x[E]=x[E]??(async()=>{try{let B=await this._rpcRequest("getBlockHeight",_),R=N(B,Z(S()));if("error"in R)throw new D(R.error,"failed to get block height information");return R.result}finally{delete x[E]}})(),await x[E]}})();let r,n,i,c,f,g;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,n=e.httpHeaders,i=e.fetch,c=e.fetchMiddleware,f=e.disableRetryOnRateLimit,g=e.httpAgent),this._rpcEndpoint=Ra(t),this._rpcWsEndpoint=r||Ea(t),this._rpcClient=$a(t,n,i,c,f,g),this._rpcRequest=Va(this._rpcClient),this._rpcBatchRequest=Ga(this._rpcClient),this._rpcWebSocket=new bs(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){let{commitment:r,config:n}=lt(e),i=this._buildArgs([t.toBase58()],r,void 0,n),c=await this._rpcRequest("getBalance",i),f=N(c,Mt(S()));if("error"in f)throw new D(f.error,`failed to get balance for ${t.toBase58()}`);return f.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){let e=await this._rpcRequest("getBlockTime",[t]),r=N(e,Z(K(S())));if("error"in r)throw new D(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){let t=await this._rpcRequest("minimumLedgerSlot",[]),e=N(t,Z(S()));if("error"in e)throw new D(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){let t=await this._rpcRequest("getFirstAvailableBlock",[]),e=N(t,tc);if("error"in e)throw new D(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};let r=await this._rpcRequest("getSupply",[e]),n=N(r,ec);if("error"in n)throw new D(n.error,"failed to get supply");return n.result}async getTokenSupply(t,e){let r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenSupply",r),i=N(n,Mt(ws));if("error"in i)throw new D(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){let r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenAccountBalance",r),i=N(n,Mt(ws));if("error"in i)throw new D(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){let{commitment:n,config:i}=lt(r),c=[t.toBase58()];"mint"in e?c.push({mint:e.mint.toBase58()}):c.push({programId:e.programId.toBase58()});let f=this._buildArgs(c,n,"base64",i),g=await this._rpcRequest("getTokenAccountsByOwner",f),x=N(g,nc);if("error"in x)throw new D(x.error,`failed to get token accounts owned by account ${t.toBase58()}`);return x.result}async getParsedTokenAccountsByOwner(t,e,r){let n=[t.toBase58()];"mint"in e?n.push({mint:e.mint.toBase58()}):n.push({programId:e.programId.toBase58()});let i=this._buildArgs(n,r,"jsonParsed"),c=await this._rpcRequest("getTokenAccountsByOwner",i),f=N(c,sc);if("error"in f)throw new D(f.error,`failed to get token accounts owned by account ${t.toBase58()}`);return f.result}async getLargestAccounts(t){let e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],n=await this._rpcRequest("getLargestAccounts",r),i=N(n,ic);if("error"in i)throw new D(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){let r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenLargestAccounts",r),i=N(n,rc);if("error"in i)throw new D(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){let{commitment:r,config:n}=lt(e),i=this._buildArgs([t.toBase58()],r,"base64",n),c=await this._rpcRequest("getAccountInfo",i),f=N(c,Mt(K(xr)));if("error"in f)throw new D(f.error,`failed to get info about account ${t.toBase58()}`);return f.result}async getParsedAccountInfo(t,e){let{commitment:r,config:n}=lt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",n),c=await this._rpcRequest("getAccountInfo",i),f=N(c,Mt(K(vs)));if("error"in f)throw new D(f.error,`failed to get info about account ${t.toBase58()}`);return f.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){let{commitment:r,config:n}=lt(e),i=t.map(x=>x.toBase58()),c=this._buildArgs([i],r,"jsonParsed",n),f=await this._rpcRequest("getMultipleAccounts",c),g=N(f,Mt(z(K(vs))));if("error"in g)throw new D(g.error,`failed to get info for accounts ${i}`);return g.result}async getMultipleAccountsInfoAndContext(t,e){let{commitment:r,config:n}=lt(e),i=t.map(x=>x.toBase58()),c=this._buildArgs([i],r,"base64",n),f=await this._rpcRequest("getMultipleAccounts",c),g=N(f,Mt(z(K(xr))));if("error"in g)throw new D(g.error,`failed to get info for accounts ${i}`);return g.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){let{commitment:n,config:i}=lt(e),c=this._buildArgs([t.toBase58()],n,void 0,{...i,epoch:r??i?.epoch}),f=await this._rpcRequest("getStakeActivation",c),g=N(f,Z(uc));if("error"in g)throw new D(g.error,`failed to get Stake Activation ${t.toBase58()}`);return g.result}async getProgramAccounts(t,e){let{commitment:r,config:n}=lt(e),{encoding:i,...c}=n||{},f=this._buildArgs([t.toBase58()],r,i||"base64",{...c,...c.filters?{filters:Ii(c.filters)}:null}),g=await this._rpcRequest("getProgramAccounts",f),x=z(oc),v=c.withContext===!0?N(g,Mt(x)):N(g,Z(x));if("error"in v)throw new D(v.error,`failed to get accounts owned by program ${t.toBase58()}`);return v.result}async getParsedProgramAccounts(t,e){let{commitment:r,config:n}=lt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",n),c=await this._rpcRequest("getProgramAccounts",i),f=N(c,Z(z(cc)));if("error"in f)throw new D(f.error,`failed to get accounts owned by program ${t.toBase58()}`);return f.result}async confirmTransaction(t,e){let r;if(typeof t=="string")r=t;else{let i=t;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);r=i.signature}let n;try{n=se.default.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return ot(n.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,n,i=!1,c=new Promise((g,x)=>{try{r=this.onSignature(e,(A,M)=>{r=void 0;let _={context:M,value:A};g({__type:Ne.PROCESSED,response:_})},t);let v=new Promise(A=>{r==null?A():n=this._onSubscriptionStateChange(r,M=>{M==="subscribed"&&A()})});(async()=>{if(await v,i)return;let A=await this.getSignatureStatus(e);if(i||A==null)return;let{context:M,value:_}=A;if(_!=null)if(_?.err)x(_.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(_.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(_.confirmationStatus==="processed"||_.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,g({__type:Ne.PROCESSED,response:{context:M,value:_}})}})()}catch(v){x(v)}});return{abortConfirmation:()=>{n&&(n(),n=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:c}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:n}}){let i=!1,c=new Promise(A=>{let M=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let _=await M();if(!i){for(;_<=r;)if(await He(1e3),i||(_=await M(),i))return;A({__type:Ne.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:f,confirmationPromise:g}=this.getTransactionConfirmationPromise({commitment:t,signature:n}),x=this.getCancellationPromise(e),v;try{let A=await Promise.race([x,g,c]);if(A.__type===Ne.PROCESSED)v=A.response;else throw new dn(n)}finally{i=!0,f()}return v}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:n,nonceValue:i,signature:c}}){let f=!1,g=new Promise(_=>{let E=i,B=null,R=async()=>{try{let{context:q,value:G}=await this.getNonceAndContext(n,{commitment:t,minContextSlot:r});return B=q.slot,G?.nonce}catch{return E}};(async()=>{if(E=await R(),!f)for(;;){if(i!==E){_({__type:Ne.NONCE_INVALID,slotInWhichNonceDidAdvance:B});return}if(await He(2e3),f||(E=await R(),f))return}})()}),{abortConfirmation:x,confirmationPromise:v}=this.getTransactionConfirmationPromise({commitment:t,signature:c}),A=this.getCancellationPromise(e),M;try{let _=await Promise.race([A,v,g]);if(_.__type===Ne.PROCESSED)M=_.response;else{let E;for(;;){let B=await this.getSignatureStatus(c);if(B==null)break;if(B.context.slot<(_.slotInWhichNonceDidAdvance??r)){await He(400);continue}E=B;break}if(E?.value){let B=t||"finalized",{confirmationStatus:R}=E.value;switch(B){case"processed":case"recent":if(R!=="processed"&&R!=="confirmed"&&R!=="finalized")throw new $e(c);break;case"confirmed":case"single":case"singleGossip":if(R!=="confirmed"&&R!=="finalized")throw new $e(c);break;case"finalized":case"max":case"root":if(R!=="finalized")throw new $e(c);break;default:(q=>{})(B)}M={context:E.context,value:{err:E.value.err}}}else throw new $e(c)}}finally{f=!0,x()}return M}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r,n=new Promise(g=>{let x=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{x=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>g({__type:Ne.TIMED_OUT,timeoutMs:x}),x)}),{abortConfirmation:i,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:t,signature:e}),f;try{let g=await Promise.race([c,n]);if(g.__type===Ne.PROCESSED)f=g.response;else throw new pn(e,g.timeoutMs/1e3)}finally{clearTimeout(r),i()}return f}async getClusterNodes(){let t=await this._rpcRequest("getClusterNodes",[]),e=N(t,Z(z(vc)));if("error"in e)throw new D(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){let e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),n=N(r,Sc);if("error"in n)throw new D(n.error,"failed to get vote accounts");return n.result}async getSlot(t){let{commitment:e,config:r}=lt(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",n),c=N(i,Z(S()));if("error"in c)throw new D(c.error,"failed to get slot");return c.result}async getSlotLeader(t){let{commitment:e,config:r}=lt(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",n),c=N(i,Z(T()));if("error"in c)throw new D(c.error,"failed to get slot leader");return c.result}async getSlotLeaders(t,e){let r=[t,e],n=await this._rpcRequest("getSlotLeaders",r),i=N(n,Z(z(xt)));if("error"in i)throw new D(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){let{context:r,value:n}=await this.getSignatureStatuses([t],e);ot(n.length===1);let i=n[0];return{context:r,value:i}}async getSignatureStatuses(t,e){let r=[t];e&&r.push(e);let n=await this._rpcRequest("getSignatureStatuses",r),i=N(n,_c);if("error"in i)throw new D(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){let{commitment:e,config:r}=lt(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",n),c=N(i,Z(S()));if("error"in c)throw new D(c.error,"failed to get transaction count");return c.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){let e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),n=N(r,ja);if("error"in n)throw new D(n.error,"failed to get inflation");return n.result}async getInflationReward(t,e,r){let{commitment:n,config:i}=lt(r),c=this._buildArgs([t.map(x=>x.toBase58())],n,void 0,{...i,epoch:e??i?.epoch}),f=await this._rpcRequest("getInflationReward",c),g=N(f,Ta);if("error"in g)throw new D(g.error,"failed to get inflation reward");return g.result}async getInflationRate(){let t=await this._rpcRequest("getInflationRate",[]),e=N(t,Ya);if("error"in e)throw new D(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){let{commitment:e,config:r}=lt(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",n),c=N(i,Ja);if("error"in c)throw new D(c.error,"failed to get epoch info");return c.result}async getEpochSchedule(){let t=await this._rpcRequest("getEpochSchedule",[]),e=N(t,Xa);if("error"in e)throw new D(e.error,"failed to get epoch schedule");let r=e.result;return new ms(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){let t=await this._rpcRequest("getLeaderSchedule",[]),e=N(t,Qa);if("error"in e)throw new D(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){let r=this._buildArgs([t],e),n=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=N(n,Bc);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){let e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),n=N(r,Oc);if("error"in n)throw new D(n.error,"failed to get recent blockhash");return n.result}async getRecentPerformanceSamples(t){let e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=N(e,Uc);if("error"in r)throw new D(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){let r=this._buildArgs([t],e),n=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=N(n,qc);if("error"in i)throw new D(i.error,"failed to get fee calculator");let{context:c,value:f}=i.result;return{context:c,value:f!==null?f.feeCalculator:null}}async getFeeForMessage(t,e){let r=J(t.serialize()).toString("base64"),n=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",n),c=N(i,Mt(K(S())));if("error"in c)throw new D(c.error,"failed to get fee for message");if(c.result===null)throw new Error("invalid blockhash");return c.result}async getRecentPrioritizationFees(t){let e=t?.lockedWritableAccounts?.map(c=>c.toBase58()),r=e?.length?[e]:[],n=await this._rpcRequest("getRecentPrioritizationFees",r),i=N(n,Za);if("error"in i)throw new D(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){let{commitment:e,config:r}=lt(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",n),c=N(i,zc);if("error"in c)throw new D(c.error,"failed to get latest blockhash");return c.result}async isBlockhashValid(t,e){let{commitment:r,config:n}=lt(e),i=this._buildArgs([t],r,void 0,n),c=await this._rpcRequest("isBlockhashValid",i),f=N(c,Kc);if("error"in f)throw new D(f.error,"failed to determine if the blockhash `"+t+"`is valid");return f.result}async getVersion(){let t=await this._rpcRequest("getVersion",[]),e=N(t,Z(qa));if("error"in e)throw new D(e.error,"failed to get version");return e.result}async getGenesisHash(){let t=await this._rpcRequest("getGenesisHash",[]),e=N(t,Z(T()));if("error"in e)throw new D(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){let{commitment:r,config:n}=lt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,n),c=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{let f=N(c,Mc);if("error"in f)throw f.error;return f.result}case"none":{let f=N(c,Rc);if("error"in f)throw f.error;return f.result}default:{let f=N(c,Lc);if("error"in f)throw f.error;let{result:g}=f;return g?{...g,transactions:g.transactions.map(({transaction:x,meta:v,version:A})=>({meta:v,transaction:{...x,message:fs(A,x.message)},version:A}))}:null}}}catch(f){throw new D(f,"failed to get confirmed block")}}async getParsedBlock(t,e){let{commitment:r,config:n}=lt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n),c=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{let f=N(c,Tc);if("error"in f)throw f.error;return f.result}case"none":{let f=N(c,Cc);if("error"in f)throw f.error;return f.result}default:{let f=N(c,Pc);if("error"in f)throw f.error;return f.result}}}catch(f){throw new D(f,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){let{commitment:f,...g}=t;r=f,e=g}let n=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",n),c=N(i,Ha);if("error"in c)throw new D(c.error,"failed to get block production information");return c.result}async getTransaction(t,e){let{commitment:r,config:n}=lt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,n),c=await this._rpcRequest("getTransaction",i),f=N(c,ds);if("error"in f)throw new D(f.error,"failed to get transaction");let g=f.result;return g&&{...g,transaction:{...g.transaction,message:fs(g.version,g.transaction.message)}}}async getParsedTransaction(t,e){let{commitment:r,config:n}=lt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n),c=await this._rpcRequest("getTransaction",i),f=N(c,cn);if("error"in f)throw new D(f.error,"failed to get transaction");return f.result}async getParsedTransactions(t,e){let{commitment:r,config:n}=lt(e),i=t.map(g=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([g],r,"jsonParsed",n)}));return(await this._rpcBatchRequest(i)).map(g=>{let x=N(g,cn);if("error"in x)throw new D(x.error,"failed to get transactions");return x.result})}async getTransactions(t,e){let{commitment:r,config:n}=lt(e),i=t.map(g=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([g],r,void 0,n)}));return(await this._rpcBatchRequest(i)).map(g=>{let x=N(g,ds);if("error"in x)throw new D(x.error,"failed to get transactions");let v=x.result;return v&&{...v,transaction:{...v.transaction,message:fs(v.version,v.transaction.message)}}})}async getConfirmedBlock(t,e){let r=this._buildArgsAtLeastConfirmed([t],e),n=await this._rpcRequest("getConfirmedBlock",r),i=N(n,Nc);if("error"in i)throw new D(i.error,"failed to get confirmed block");let c=i.result;if(!c)throw new Error("Confirmed block "+t+" not found");let f={...c,transactions:c.transactions.map(({transaction:g,meta:x})=>{let v=new me(g.message);return{meta:x,transaction:{...g,message:v}}})};return{...f,transactions:f.transactions.map(({transaction:g,meta:x})=>({meta:x,transaction:it.populate(g.message,g.signatures)}))}}async getBlocks(t,e,r){let n=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",n),c=N(i,Z(z(S())));if("error"in c)throw new D(c.error,"failed to get blocks");return c.result}async getBlockSignatures(t,e){let r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getBlock",r),i=N(n,Ai);if("error"in i)throw new D(i.error,"failed to get block");let c=i.result;if(!c)throw new Error("Block "+t+" not found");return c}async getConfirmedBlockSignatures(t,e){let r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getConfirmedBlock",r),i=N(n,Ai);if("error"in i)throw new D(i.error,"failed to get confirmed block");let c=i.result;if(!c)throw new Error("Confirmed block "+t+" not found");return c}async getConfirmedTransaction(t,e){let r=this._buildArgsAtLeastConfirmed([t],e),n=await this._rpcRequest("getConfirmedTransaction",r),i=N(n,ds);if("error"in i)throw new D(i.error,"failed to get transaction");let c=i.result;if(!c)return c;let f=new me(c.transaction.message),g=c.transaction.signatures;return{...c,transaction:it.populate(f,g)}}async getParsedConfirmedTransaction(t,e){let r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),n=await this._rpcRequest("getConfirmedTransaction",r),i=N(n,cn);if("error"in i)throw new D(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){let r=t.map(c=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([c],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(c=>{let f=N(c,cn);if("error"in f)throw new D(f.error,"failed to get confirmed transactions");return f.result})}async getConfirmedSignaturesForAddress(t,e,r){let n={},i=await this.getFirstAvailableBlock();for(;!("until"in n)&&(e--,!(e<=0||e<i));)try{let g=await this.getConfirmedBlockSignatures(e,"finalized");g.signatures.length>0&&(n.until=g.signatures[g.signatures.length-1].toString())}catch(g){if(g instanceof Error&&g.message.includes("skipped"))continue;throw g}let c=await this.getSlot("finalized");for(;!("before"in n)&&(r++,!(r>c));)try{let g=await this.getConfirmedBlockSignatures(r);g.signatures.length>0&&(n.before=g.signatures[g.signatures.length-1].toString())}catch(g){if(g instanceof Error&&g.message.includes("skipped"))continue;throw g}return(await this.getConfirmedSignaturesForAddress2(t,n)).map(g=>g.signature)}async getConfirmedSignaturesForAddress2(t,e,r){let n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",n),c=N(i,hc);if("error"in c)throw new D(c.error,"failed to get confirmed signatures for address");return c.result}async getSignaturesForAddress(t,e,r){let n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",n),c=N(i,lc);if("error"in c)throw new D(c.error,"failed to get signatures for address");return c.result}async getAddressLookupTable(t,e){let{context:r,value:n}=await this.getAccountInfoAndContext(t,e),i=null;return n!==null&&(i=new mn({key:t,state:mn.deserialize(n.data)})),{context:r,value:i}}async getNonceAndContext(t,e){let{context:r,value:n}=await this.getAccountInfoAndContext(t,e),i=null;return n!==null&&(i=Sr.fromAccountData(n.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){let r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),n=N(r,Dc);if("error"in n)throw new D(n.error,`airdrop to ${t.toBase58()} failed`);return n.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await He(100);let r=Date.now()-this._blockhashInfo.lastFetch>=La;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{let t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let n=0;n<50;n++){let i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await He(Gi/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){let{commitment:e,config:r}=lt(t),n=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",n),c=N(i,Mt(S()));if("error"in c)throw new D(c.error,"failed to get stake minimum delegation");return c.result}async simulateTransaction(t,e,r){if("message"in t){let B=t.serialize(),R=H.from(B).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");let q=e||{};q.encoding="base64","commitment"in q||(q.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(q.innerInstructions=e.innerInstructions);let G=[R,q],W=await this._rpcRequest("simulateTransaction",G),V=N(W,_i);if("error"in V)throw new Error("failed to simulate transaction: "+V.error.message);return V.result}let n;if(t instanceof it){let E=t;n=new it,n.feePayer=E.feePayer,n.instructions=t.instructions,n.nonceInfo=E.nonceInfo,n.signatures=E.signatures}else n=it.populate(t),n._message=n._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");let i=e;if(n.nonceInfo&&i)n.sign(...i);else{let E=this._disableBlockhashCaching;for(;;){let B=await this._blockhashWithExpiryBlockHeight(E);if(n.lastValidBlockHeight=B.lastValidBlockHeight,n.recentBlockhash=B.blockhash,!i)break;if(n.sign(...i),!n.signature)throw new Error("!signature");let R=n.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(R)&&!this._blockhashInfo.transactionSignatures.includes(R)){this._blockhashInfo.simulatedSignatures.push(R);break}else E=!0}}let c=n._compile(),f=c.serialize(),x=n._serialize(f).toString("base64"),v={encoding:"base64",commitment:this.commitment};if(r){let E=(Array.isArray(r)?r:c.nonProgramIds()).map(B=>B.toBase58());v.accounts={encoding:"base64",addresses:E}}i&&(v.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(v.innerInstructions=e.innerInstructions);let A=[x,v],M=await this._rpcRequest("simulateTransaction",A),_=N(M,_i);if("error"in _){let E;if("data"in _.error&&(E=_.error.data.logs,E&&Array.isArray(E))){let B=`
    `,R=B+E.join(B);console.error(_.error.message,R)}throw new ar({action:"simulate",signature:"",transactionMessage:_.error.message,logs:E})}return _.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");let c=t.serialize();return await this.sendRawTransaction(c,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");let n=e;if(t.nonceInfo)t.sign(...n);else{let c=this._disableBlockhashCaching;for(;;){let f=await this._blockhashWithExpiryBlockHeight(c);if(t.lastValidBlockHeight=f.lastValidBlockHeight,t.recentBlockhash=f.blockhash,t.sign(...n),!t.signature)throw new Error("!signature");let g=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(g))c=!0;else{this._blockhashInfo.transactionSignatures.push(g);break}}}let i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){let r=J(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){let r={encoding:"base64"},n=e&&e.skipPreflight,i=n===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),n&&(r.skipPreflight=n),i&&(r.preflightCommitment=i);let c=[t,r],f=await this._rpcRequest("sendTransaction",c),g=N(f,Fc);if("error"in g){let x;throw"data"in g.error&&(x=g.error.data.logs),new ar({action:n?"send":"simulate",signature:"",transactionMessage:g.error.message,logs:x})}return g.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){let r=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,r!==e.state){let n=this._subscriptionStateChangeCallbacksByHash[t];n&&n.forEach(i=>{try{i(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){let r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};let n=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return n.add(e),()=>{n.delete(e),n.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}let t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{let n=this._subscriptionsByHash[r];if(n!==void 0)switch(n.state){case"pending":case"unsubscribed":if(n.callbacks.size===0){delete this._subscriptionsByHash[r],n.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[n.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{let{args:i,method:c}=n;try{this._setSubscription(r,{...n,state:"subscribing"});let f=await this._rpcWebSocket.call(c,i);this._setSubscription(r,{...n,serverSubscriptionId:f,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[f]=n.callbacks,await this._updateSubscriptions()}catch(f){if(console.error(`Received ${f instanceof Error?"":"JSON-RPC "}error calling \`${c}\``,{args:i,error:f}),!e())return;this._setSubscription(r,{...n,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":n.callbacks.size===0&&await(async()=>{let{serverSubscriptionId:i,unsubscribeMethod:c}=n;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...n,state:"unsubscribing"}),this._setSubscription(r,{...n,state:"unsubscribing"});try{await this._rpcWebSocket.call(c,[i])}catch(f){if(f instanceof Error&&console.error(`${c} error:`,f.message),!e())return;this._setSubscription(r,{...n,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...n,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){let r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(n=>{try{n(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){let{result:e,subscription:r}=N(t,fc);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){let r=this._nextClientSubscriptionId++,n=Si([t.method,e]),i=this._subscriptionsByHash[n];return i===void 0?this._subscriptionsByHash[n]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=n,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];let c=this._subscriptionsByHash[n];ot(c!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),c.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){let{commitment:n,config:i}=lt(r),c=this._buildArgs([t.toBase58()],n||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},c)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){let{result:e,subscription:r}=N(t,pc);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,n){let{commitment:i,config:c}=lt(r),f=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",c||(n?{filters:Ii(n)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},f)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){let n=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){let{result:e,subscription:r}=N(t,$c);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){let{result:e,subscription:r}=N(t,gc);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){let{result:e,subscription:r}=N(t,bc);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){let r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,n){let i=e||this._commitment;if(i||r||n){let c={};r&&(c.encoding=r),i&&(c.commitment=i),n&&(c=Object.assign(c,n)),t.push(c)}return t}_buildArgsAtLeastConfirmed(t,e,r,n){let i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,n)}_wsOnSignatureNotification(t){let{result:e,subscription:r}=N(t,wc);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){let n=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(c,f)=>{if(c.type==="status"){e(c.result,f);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return i}onSignatureWithOptions(t,e,r){let{commitment:n,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},c=this._buildArgs([t],n,void 0,i),f=this._makeSubscription({callback:(g,x)=>{e(g,x);try{this.removeSignatureListener(f)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},c);return f}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){let{result:e,subscription:r}=N(t,kc);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}},je=class{constructor(t){this._keypair=void 0,this._keypair=t??fi()}static generate(){return new je(fi())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");let r=t.slice(32,64);if(!e||!e.skipValidation){let n=t.slice(0,32),i=hn(n);for(let c=0;c<32;c++)if(r[c]!==i[c])throw new Error("provided secretKey is invalid")}return new je({publicKey:r,secretKey:t})}static fromSeed(t){let e=hn(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new je({publicKey:e,secretKey:r})}get publicKey(){return new C(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}},Oe=Object.freeze({CreateLookupTable:{index:0,layout:m.struct([m.u32("instruction"),cr("recentSlot"),m.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:m.struct([m.u32("instruction")])},ExtendLookupTable:{index:2,layout:m.struct([m.u32("instruction"),cr(),m.seq(Q(),m.offset(m.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:m.struct([m.u32("instruction")])},CloseLookupTable:{index:4,layout:m.struct([m.u32("instruction")])}}),Li=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let r=m.u32("instruction").decode(t.data),n;for(let[i,c]of Object.entries(Oe))if(c.index==r){n=i;break}if(!n)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return n}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);let{recentSlot:e}=ct(Oe.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);let{addresses:e}=ct(Oe.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(r=>new C(r))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(wn.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},wn=class{constructor(){}static createLookupTable(t){let[e,r]=C.findProgramAddressSync([t.authority.toBuffer(),(0,Br.toBufferLE)(BigInt(t.recentSlot),8)],this.programId),n=Oe.CreateLookupTable,i=et(n,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),c=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:re.programId,isSigner:!1,isWritable:!1}];return[new ht({programId:this.programId,keys:c,data:i}),e]}static freezeLookupTable(t){let e=Oe.FreezeLookupTable,r=et(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new ht({programId:this.programId,keys:n,data:r})}static extendLookupTable(t){let e=Oe.ExtendLookupTable,r=et(e,{addresses:t.addresses.map(i=>i.toBytes())}),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&n.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:re.programId,isSigner:!1,isWritable:!1}),new ht({programId:this.programId,keys:n,data:r})}static deactivateLookupTable(t){let e=Oe.DeactivateLookupTable,r=et(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new ht({programId:this.programId,keys:n,data:r})}static closeLookupTable(t){let e=Oe.CloseLookupTable,r=et(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new ht({programId:this.programId,keys:n,data:r})}};wn.programId=new C("AddressLookupTab1e1111111111111111111111111");var Ri=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let r=m.u8("instruction").decode(t.data),n;for(let[i,c]of Object.entries(Le))if(c.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return n}static decodeRequestUnits(t){this.checkProgramId(t.programId);let{units:e,additionalFee:r}=ct(Le.RequestUnits,t.data);return{units:e,additionalFee:r}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);let{bytes:e}=ct(Le.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);let{units:e}=ct(Le.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);let{microLamports:e}=ct(Le.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(kn.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}},Le=Object.freeze({RequestUnits:{index:0,layout:m.struct([m.u8("instruction"),m.u32("units"),m.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:m.struct([m.u8("instruction"),m.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:m.struct([m.u8("instruction"),m.u32("units")])},SetComputeUnitPrice:{index:3,layout:m.struct([m.u8("instruction"),cr("microLamports")])}}),kn=class{constructor(){}static requestUnits(t){let e=Le.RequestUnits,r=et(e,t);return new ht({keys:[],programId:this.programId,data:r})}static requestHeapFrame(t){let e=Le.RequestHeapFrame,r=et(e,t);return new ht({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(t){let e=Le.SetComputeUnitLimit,r=et(e,t);return new ht({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(t){let e=Le.SetComputeUnitPrice,r=et(e,{microLamports:BigInt(t.microLamports)});return new ht({keys:[],programId:this.programId,data:r})}};kn.programId=new C("ComputeBudget111111111111111111111111111111");var Mi=64,Pi=32,Ti=64,Ci=m.struct([m.u8("numSignatures"),m.u8("padding"),m.u16("signatureOffset"),m.u16("signatureInstructionIndex"),m.u16("publicKeyOffset"),m.u16("publicKeyInstructionIndex"),m.u16("messageDataOffset"),m.u16("messageDataSize"),m.u16("messageInstructionIndex")]),Ir=class{constructor(){}static createInstructionWithPublicKey(t){let{publicKey:e,message:r,signature:n,instructionIndex:i}=t;ot(e.length===Pi,`Public Key must be ${Pi} bytes but received ${e.length} bytes`),ot(n.length===Ti,`Signature must be ${Ti} bytes but received ${n.length} bytes`);let c=Ci.span,f=c+e.length,g=f+n.length,x=1,v=H.alloc(g+r.length),A=i??65535;return Ci.encode({numSignatures:x,padding:0,signatureOffset:f,signatureInstructionIndex:A,publicKeyOffset:c,publicKeyInstructionIndex:A,messageDataOffset:g,messageDataSize:r.length,messageInstructionIndex:A},v),v.fill(e,c),v.fill(n,f),v.fill(r,g),new ht({keys:[],programId:Ir.programId,data:v})}static createInstructionWithPrivateKey(t){let{privateKey:e,message:r,instructionIndex:n}=t;ot(e.length===Mi,`Private key must be ${Mi} bytes but received ${e.length} bytes`);try{let i=je.fromSecretKey(e),c=i.publicKey.toBytes(),f=Is(r,i.secretKey);return this.createInstructionWithPublicKey({publicKey:c,message:r,signature:f,instructionIndex:n})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}};Ir.programId=new C("Ed25519SigVerify111111111111111111111111111");var Gc=(o,t)=>{let e=Nr.sign(o,t);return[e.toCompactRawBytes(),e.recovery]};Nr.utils.isValidPrivateKey;var jc=Nr.getPublicKey,Ni=32,ps=20,Oi=64,Yc=11,ys=m.struct([m.u8("numSignatures"),m.u16("signatureOffset"),m.u8("signatureInstructionIndex"),m.u16("ethAddressOffset"),m.u8("ethAddressInstructionIndex"),m.u16("messageDataOffset"),m.u16("messageDataSize"),m.u8("messageInstructionIndex"),m.blob(20,"ethAddress"),m.blob(64,"signature"),m.u8("recoveryId")]),Ye=class{constructor(){}static publicKeyToEthAddress(t){ot(t.length===Oi,`Public key must be ${Oi} bytes but received ${t.length} bytes`);try{return H.from($n(J(t))).slice(-ps)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(t){let{publicKey:e,message:r,signature:n,recoveryId:i,instructionIndex:c}=t;return Ye.createInstructionWithEthAddress({ethAddress:Ye.publicKeyToEthAddress(e),message:r,signature:n,recoveryId:i,instructionIndex:c})}static createInstructionWithEthAddress(t){let{ethAddress:e,message:r,signature:n,recoveryId:i,instructionIndex:c=0}=t,f;typeof e=="string"?e.startsWith("0x")?f=H.from(e.substr(2),"hex"):f=H.from(e,"hex"):f=e,ot(f.length===ps,`Address must be ${ps} bytes but received ${f.length} bytes`);let g=1+Yc,x=g,v=g+f.length,A=v+n.length+1,M=1,_=H.alloc(ys.span+r.length);return ys.encode({numSignatures:M,signatureOffset:v,signatureInstructionIndex:c,ethAddressOffset:x,ethAddressInstructionIndex:c,messageDataOffset:A,messageDataSize:r.length,messageInstructionIndex:c,signature:J(n),ethAddress:J(f),recoveryId:i},_),_.fill(J(r),ys.span),new ht({keys:[],programId:Ye.programId,data:_})}static createInstructionWithPrivateKey(t){let{privateKey:e,message:r,instructionIndex:n}=t;ot(e.length===Ni,`Private key must be ${Ni} bytes but received ${e.length} bytes`);try{let i=J(e),c=jc(i,!1).slice(1),f=H.from($n(J(r))),[g,x]=Gc(f,i);return this.createInstructionWithPublicKey({publicKey:c,message:r,signature:g,recoveryId:x,instructionIndex:n})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}};Ye.programId=new C("KeccakSecp256k11111111111111111111111111111");var io,Zc=new C("StakeConfig11111111111111111111111111111111"),Ss=class{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}},ur=class{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}};io=ur;ur.default=new io(0,0,C.default);var zi=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let r=m.u32("instruction").decode(t.data),n;for(let[i,c]of Object.entries(oe))if(c.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a StakeInstruction");return n}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{authorized:e,lockup:r}=ct(oe.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new Ss(new C(e.staker),new C(e.withdrawer)),lockup:new ur(r.unixTimestamp,r.epoch,new C(r.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),ct(oe.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{newAuthorized:e,stakeAuthorizationType:r}=ct(oe.Authorize,t.data),n={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new C(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(n.custodianPubkey=t.keys[3].pubkey),n}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{newAuthorized:e,stakeAuthorizationType:r,authoritySeed:n,authorityOwner:i}=ct(oe.AuthorizeWithSeed,t.data),c={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:n,authorityOwner:new C(i),newAuthorizedPubkey:new C(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(c.custodianPubkey=t.keys[3].pubkey),c}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:e}=ct(oe.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),ct(oe.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);let{lamports:e}=ct(oe.Withdraw,t.data),r={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(r.custodianPubkey=t.keys[5].pubkey),r}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),ct(oe.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(_r.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},oe=Object.freeze({Initialize:{index:0,layout:m.struct([m.u32("instruction"),ca(),ua()])},Authorize:{index:1,layout:m.struct([m.u32("instruction"),Q("newAuthorized"),m.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:m.struct([m.u32("instruction")])},Split:{index:3,layout:m.struct([m.u32("instruction"),m.ns64("lamports")])},Withdraw:{index:4,layout:m.struct([m.u32("instruction"),m.ns64("lamports")])},Deactivate:{index:5,layout:m.struct([m.u32("instruction")])},Merge:{index:7,layout:m.struct([m.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:m.struct([m.u32("instruction"),Q("newAuthorized"),m.u32("stakeAuthorizationType"),Ve("authoritySeed"),Q("authorityOwner")])}}),ph=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),_r=class{constructor(){}static initialize(t){let{stakePubkey:e,authorized:r,lockup:n}=t,i=n||ur.default,c=oe.Initialize,f=et(c,{authorized:{staker:J(r.staker.toBuffer()),withdrawer:J(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:J(i.custodian.toBuffer())}}),g={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:vr,isSigner:!1,isWritable:!1}],programId:this.programId,data:f};return new ht(g)}static createAccountWithSeed(t){let e=new it;e.add(re.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:n,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static createAccount(t){let e=new it;e.add(re.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:n,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static delegate(t){let{stakePubkey:e,authorizedPubkey:r,votePubkey:n}=t,i=oe.Delegate,c=et(i);return new it().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:Ee,isSigner:!1,isWritable:!1},{pubkey:us,isSigner:!1,isWritable:!1},{pubkey:Zc,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:c})}static authorize(t){let{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:i,custodianPubkey:c}=t,f=oe.Authorize,g=et(f,{newAuthorized:J(n.toBuffer()),stakeAuthorizationType:i.index}),x=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Ee,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return c&&x.push({pubkey:c,isSigner:!0,isWritable:!1}),new it().add({keys:x,programId:this.programId,data:g})}static authorizeWithSeed(t){let{stakePubkey:e,authorityBase:r,authoritySeed:n,authorityOwner:i,newAuthorizedPubkey:c,stakeAuthorizationType:f,custodianPubkey:g}=t,x=oe.AuthorizeWithSeed,v=et(x,{newAuthorized:J(c.toBuffer()),stakeAuthorizationType:f.index,authoritySeed:n,authorityOwner:J(i.toBuffer())}),A=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:Ee,isSigner:!1,isWritable:!1}];return g&&A.push({pubkey:g,isSigner:!0,isWritable:!1}),new it().add({keys:A,programId:this.programId,data:v})}static splitInstruction(t){let{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,lamports:i}=t,c=oe.Split,f=et(c,{lamports:i});return new ht({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:f})}static split(t,e){let r=new it;return r.add(re.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){let{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:c,seed:f,lamports:g}=t,x=new it;return x.add(re.allocate({accountPubkey:i,basePubkey:c,seed:f,space:this.space,programId:this.programId})),e&&e>0&&x.add(re.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),x.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:g}))}static merge(t){let{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:n}=t,i=oe.Merge,c=et(i);return new it().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Ee,isSigner:!1,isWritable:!1},{pubkey:us,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:c})}static withdraw(t){let{stakePubkey:e,authorizedPubkey:r,toPubkey:n,lamports:i,custodianPubkey:c}=t,f=oe.Withdraw,g=et(f,{lamports:i}),x=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:Ee,isSigner:!1,isWritable:!1},{pubkey:us,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return c&&x.push({pubkey:c,isSigner:!0,isWritable:!1}),new it().add({keys:x,programId:this.programId,data:g})}static deactivate(t){let{stakePubkey:e,authorizedPubkey:r}=t,n=oe.Deactivate,i=et(n);return new it().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Ee,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}};_r.programId=new C("Stake11111111111111111111111111111111111111");_r.space=200;var xs=class{constructor(t,e,r,n){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=r,this.commission=n}},Ki=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let r=m.u32("instruction").decode(t.data),n;for(let[i,c]of Object.entries(_e))if(c.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a VoteInstruction");return n}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);let{voteInit:e}=ct(_e.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new xs(new C(e.nodePubkey),new C(e.authorizedVoter),new C(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{newAuthorized:e,voteAuthorizationType:r}=ct(_e.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new C(e),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:r,newAuthorized:n,voteAuthorizationType:i}}=ct(_e.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new C(e),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new C(n),voteAuthorizationType:{index:i},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:e}=ct(_e.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Ze.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},_e=Object.freeze({InitializeAccount:{index:0,layout:m.struct([m.u32("instruction"),ha()])},Authorize:{index:1,layout:m.struct([m.u32("instruction"),Q("newAuthorized"),m.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:m.struct([m.u32("instruction"),m.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:m.struct([m.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:m.struct([m.u32("instruction"),la()])}}),yh=Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),Ze=class{constructor(){}static initializeAccount(t){let{votePubkey:e,nodePubkey:r,voteInit:n}=t,i=_e.InitializeAccount,c=et(i,{voteInit:{nodePubkey:J(n.nodePubkey.toBuffer()),authorizedVoter:J(n.authorizedVoter.toBuffer()),authorizedWithdrawer:J(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),f={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:vr,isSigner:!1,isWritable:!1},{pubkey:Ee,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:c};return new ht(f)}static createAccount(t){let e=new it;return e.add(re.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){let{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:i}=t,c=_e.Authorize,f=et(c,{newAuthorized:J(n.toBuffer()),voteAuthorizationType:i.index}),g=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Ee,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new it().add({keys:g,programId:this.programId,data:f})}static authorizeWithSeed(t){let{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:i,voteAuthorizationType:c,votePubkey:f}=t,g=_e.AuthorizeWithSeed,x=et(g,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:J(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:J(i.toBuffer()),voteAuthorizationType:c.index}}),v=[{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:Ee,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return new it().add({keys:v,programId:this.programId,data:x})}static withdraw(t){let{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:i}=t,c=_e.Withdraw,f=et(c,{lamports:n}),g=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new it().add({keys:g,programId:this.programId,data:f})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return Ze.withdraw(t)}static updateValidatorIdentity(t){let{votePubkey:e,authorizedWithdrawerPubkey:r,nodePubkey:n}=t,i=_e.UpdateValidatorIdentity,c=et(i),f=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new it().add({keys:f,programId:this.programId,data:c})}};Ze.programId=new C("Vote111111111111111111111111111111111111111");Ze.space=3762;var Jc=new C("Va1idator1nfo111111111111111111111111111111"),Xc=L({name:T(),website:$(T()),details:$(T()),iconUrl:$(T()),keybaseUsername:$(T())}),vn=class{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(fe(e)!==2)return null;let n=[];for(let i=0;i<2;i++){let c=new C(de(e,0,Re)),f=Ie(e)===1;n.push({publicKey:c,isSigner:f})}if(n[0].publicKey.equals(Jc)&&n[1].isSigner){let i=Ve().decode(H.from(e)),c=JSON.parse(i);return os(c,Xc),new vn(n[1].publicKey,c)}return null}},gh=new C("Vote111111111111111111111111111111111111111"),Qc=m.struct([Q("nodePubkey"),Q("authorizedWithdrawer"),m.u8("commission"),m.nu64(),m.seq(m.struct([m.nu64("slot"),m.u32("confirmationCount")]),m.offset(m.u32(),-8),"votes"),m.u8("rootSlotValid"),m.nu64("rootSlot"),m.nu64(),m.seq(m.struct([m.nu64("epoch"),Q("authorizedVoter")]),m.offset(m.u32(),-8),"authorizedVoters"),m.struct([m.seq(m.struct([Q("authorizedPubkey"),m.nu64("epochOfLastAuthorizedSwitch"),m.nu64("targetEpoch")]),32,"buf"),m.nu64("idx"),m.u8("isEmpty")],"priorVoters"),m.nu64(),m.seq(m.struct([m.nu64("epoch"),m.nu64("credits"),m.nu64("prevCredits")]),m.offset(m.u32(),-8),"epochCredits"),m.struct([m.nu64("slot"),m.nu64("timestamp")],"lastTimestamp")]),Sn=class{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){let r=Qc.decode(J(t),4),n=r.rootSlot;return r.rootSlotValid||(n=null),new Sn({nodePubkey:new C(r.nodePubkey),authorizedWithdrawer:new C(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:n,authorizedVoters:r.authorizedVoters.map(tu),priorVoters:eu(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}};function tu({authorizedVoter:o,epoch:t}){return{epoch:t,authorizedVoter:new C(o)}}function Wi({authorizedPubkey:o,epochOfLastAuthorizedSwitch:t,targetEpoch:e}){return{authorizedPubkey:new C(o),epochOfLastAuthorizedSwitch:t,targetEpoch:e}}function eu({buf:o,idx:t,isEmpty:e}){return e?[]:[...o.slice(t+1).map(Wi),...o.slice(0,t).map(Wi)]}var Ui={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function mh(o,t){let e=t===!1?"http":"https";if(!o)return Ui[e].devnet;let r=Ui[e][o];if(!r)throw new Error(`Unknown ${e} cluster: ${o}`);return r}async function bh(o,t,e,r){let n,i;e&&Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")||e&&Object.prototype.hasOwnProperty.call(e,"nonceValue")?(n=e,i=r):i=e;let c=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,minContextSlot:i.minContextSlot},f=await o.sendRawTransaction(t,c),g=i&&i.commitment,v=(await(n?o.confirmTransaction(n,g):o.confirmTransaction(f,g))).value;if(v.err)throw f!=null?new ar({action:c?.skipPreflight?"send":"simulate",signature:f,transactionMessage:`Status: (${JSON.stringify(v)})`}):new Error(`Raw transaction ${f} failed (${JSON.stringify(v)})`);return f}var wh=1e9;export{ln as a,pi as b,un as c,ia as d,Re as e,C as f,gi as g,oh as h,Ge as i,_s as j,fn as k,dn as l,pn as m,$e as n,ir as o,me as p,ze as q,Vi as r,Ne as s,ht as t,it as u,yn as v,gn as w,Ee as x,ah as y,ch as z,cs as A,vr as B,uh as C,hh as D,lh as E,us as F,ar as G,fh as H,D as I,mi as J,ga as K,bi as L,Sr as M,wi as N,ft as O,re as P,Ke as Q,dh as R,ki as S,ms as T,mn as U,La as V,Ei as W,je as X,Oe as Y,Li as Z,wn as _,Ri as $,Le as aa,kn as ba,Ir as ca,Ye as da,Zc as ea,Ss as fa,ur as ga,zi as ha,oe as ia,ph as ja,_r as ka,xs as la,Ki as ma,yh as na,Ze as oa,Jc as pa,vn as qa,gh as ra,Sn as sa,mh as ta,bh as ua,wh as va};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-XTEDROPX.js.map
