import{a as pi,b as yi}from"./chunk-VVPY7ZA7.js";import{x as wn,z as qs}from"./chunk-KUW5VATV.js";import{a as pc}from"./chunk-BNAVWOJ2.js";import{a as dc}from"./chunk-IG2Q5ALZ.js";import{m as di}from"./chunk-XLF4LAH2.js";import{a as $,c as hc,d as li,e as lc}from"./chunk-ZC7Q7LCH.js";import{b as Ie,c as Oe,d as fc,f as Ue,g as hi,h as ue,o as W,p as ht,q}from"./chunk-6KXF36WM.js";var _i=Oe((xi,Zs)=>{W();q();(function(s,t){"use strict";function e(w,i){if(!w)throw new Error(i||"Assertion failed")}function r(w,i){w.super_=i;var u=function(){};u.prototype=i.prototype,w.prototype=new u,w.prototype.constructor=w}function n(w,i,u){if(n.isBN(w))return w;this.negative=0,this.words=null,this.length=0,this.red=null,w!==null&&((i==="le"||i==="be")&&(u=i,i=10),this._init(w||0,i||10,u||"be"))}typeof s=="object"?s.exports=n:t.BN=n,n.BN=n,n.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=li().Buffer}catch{}n.isBN=function(i){return i instanceof n?!0:i!==null&&typeof i=="object"&&i.constructor.wordSize===n.wordSize&&Array.isArray(i.words)},n.max=function(i,u){return i.cmp(u)>0?i:u},n.min=function(i,u){return i.cmp(u)<0?i:u},n.prototype._init=function(i,u,l){if(typeof i=="number")return this._initNumber(i,u,l);if(typeof i=="object")return this._initArray(i,u,l);u==="hex"&&(u=16),e(u===(u|0)&&u>=2&&u<=36),i=i.toString().replace(/\s+/g,"");var d=0;i[0]==="-"&&(d++,this.negative=1),d<i.length&&(u===16?this._parseHex(i,d,l):(this._parseBase(i,u,d),l==="le"&&this._initArray(this.toArray(),u,l)))},n.prototype._initNumber=function(i,u,l){i<0&&(this.negative=1,i=-i),i<67108864?(this.words=[i&67108863],this.length=1):i<4503599627370496?(this.words=[i&67108863,i/67108864&67108863],this.length=2):(e(i<9007199254740992),this.words=[i&67108863,i/67108864&67108863,1],this.length=3),l==="le"&&this._initArray(this.toArray(),u,l)},n.prototype._initArray=function(i,u,l){if(e(typeof i.length=="number"),i.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(i.length/3),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var y,v,S=0;if(l==="be")for(d=i.length-1,y=0;d>=0;d-=3)v=i[d]|i[d-1]<<8|i[d-2]<<16,this.words[y]|=v<<S&67108863,this.words[y+1]=v>>>26-S&67108863,S+=24,S>=26&&(S-=26,y++);else if(l==="le")for(d=0,y=0;d<i.length;d+=3)v=i[d]|i[d+1]<<8|i[d+2]<<16,this.words[y]|=v<<S&67108863,this.words[y+1]=v>>>26-S&67108863,S+=24,S>=26&&(S-=26,y++);return this._strip()};function a(w,i){var u=w.charCodeAt(i);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;e(!1,"Invalid character in "+w)}function f(w,i,u){var l=a(w,u);return u-1>=i&&(l|=a(w,u-1)<<4),l}n.prototype._parseHex=function(i,u,l){this.length=Math.ceil((i.length-u)/6),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var y=0,v=0,S;if(l==="be")for(d=i.length-1;d>=u;d-=2)S=f(i,u,d)<<y,this.words[v]|=S&67108863,y>=18?(y-=18,v+=1,this.words[v]|=S>>>26):y+=8;else{var p=i.length-u;for(d=p%2===0?u+1:u;d<i.length;d+=2)S=f(i,u,d)<<y,this.words[v]|=S&67108863,y>=18?(y-=18,v+=1,this.words[v]|=S>>>26):y+=8}this._strip()};function h(w,i,u,l){for(var d=0,y=0,v=Math.min(w.length,u),S=i;S<v;S++){var p=w.charCodeAt(S)-48;d*=l,p>=49?y=p-49+10:p>=17?y=p-17+10:y=p,e(p>=0&&y<l,"Invalid character"),d+=y}return d}n.prototype._parseBase=function(i,u,l){this.words=[0],this.length=1;for(var d=0,y=1;y<=67108863;y*=u)d++;d--,y=y/u|0;for(var v=i.length-l,S=v%d,p=Math.min(v,v-S)+l,c=0,m=l;m<p;m+=d)c=h(i,m,m+d,u),this.imuln(y),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(S!==0){var U=1;for(c=h(i,m,i.length,u),m=0;m<S;m++)U*=u;this.imuln(U),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},n.prototype.copy=function(i){i.words=new Array(this.length);for(var u=0;u<this.length;u++)i.words[u]=this.words[u];i.length=this.length,i.negative=this.negative,i.red=this.red};function b(w,i){w.words=i.words,w.length=i.length,w.negative=i.negative,w.red=i.red}if(n.prototype._move=function(i){b(i,this)},n.prototype.clone=function(){var i=new n(null);return this.copy(i),i},n.prototype._expand=function(i){for(;this.length<i;)this.words[this.length++]=0;return this},n.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=k}catch{n.prototype.inspect=k}else n.prototype.inspect=k;function k(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var I=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(i,u){i=i||10,u=u|0||1;var l;if(i===16||i==="hex"){l="";for(var d=0,y=0,v=0;v<this.length;v++){var S=this.words[v],p=((S<<d|y)&16777215).toString(16);y=S>>>24-d&16777215,d+=2,d>=26&&(d-=26,v--),y!==0||v!==this.length-1?l=I[6-p.length]+p+l:l=p+l}for(y!==0&&(l=y.toString(16)+l);l.length%u!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}if(i===(i|0)&&i>=2&&i<=36){var c=_[i],m=A[i];l="";var U=this.clone();for(U.negative=0;!U.isZero();){var D=U.modrn(m).toString(i);U=U.idivn(m),U.isZero()?l=D+l:l=I[c-D.length]+D+l}for(this.isZero()&&(l="0"+l);l.length%u!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}e(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var i=this.words[0];return this.length===2?i+=this.words[1]*67108864:this.length===3&&this.words[2]===1?i+=4503599627370496+this.words[1]*67108864:this.length>2&&e(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-i:i},n.prototype.toJSON=function(){return this.toString(16,2)},o&&(n.prototype.toBuffer=function(i,u){return this.toArrayLike(o,i,u)}),n.prototype.toArray=function(i,u){return this.toArrayLike(Array,i,u)};var E=function(i,u){return i.allocUnsafe?i.allocUnsafe(u):new i(u)};n.prototype.toArrayLike=function(i,u,l){this._strip();var d=this.byteLength(),y=l||Math.max(1,d);e(d<=y,"byte array longer than desired length"),e(y>0,"Requested array length <= 0");var v=E(i,y),S=u==="le"?"LE":"BE";return this["_toArrayLike"+S](v,d),v},n.prototype._toArrayLikeLE=function(i,u){for(var l=0,d=0,y=0,v=0;y<this.length;y++){var S=this.words[y]<<v|d;i[l++]=S&255,l<i.length&&(i[l++]=S>>8&255),l<i.length&&(i[l++]=S>>16&255),v===6?(l<i.length&&(i[l++]=S>>24&255),d=0,v=0):(d=S>>>24,v+=2)}if(l<i.length)for(i[l++]=d;l<i.length;)i[l++]=0},n.prototype._toArrayLikeBE=function(i,u){for(var l=i.length-1,d=0,y=0,v=0;y<this.length;y++){var S=this.words[y]<<v|d;i[l--]=S&255,l>=0&&(i[l--]=S>>8&255),l>=0&&(i[l--]=S>>16&255),v===6?(l>=0&&(i[l--]=S>>24&255),d=0,v=0):(d=S>>>24,v+=2)}if(l>=0)for(i[l--]=d;l>=0;)i[l--]=0},Math.clz32?n.prototype._countBits=function(i){return 32-Math.clz32(i)}:n.prototype._countBits=function(i){var u=i,l=0;return u>=4096&&(l+=13,u>>>=13),u>=64&&(l+=7,u>>>=7),u>=8&&(l+=4,u>>>=4),u>=2&&(l+=2,u>>>=2),l+u},n.prototype._zeroBits=function(i){if(i===0)return 26;var u=i,l=0;return(u&8191)===0&&(l+=13,u>>>=13),(u&127)===0&&(l+=7,u>>>=7),(u&15)===0&&(l+=4,u>>>=4),(u&3)===0&&(l+=2,u>>>=2),(u&1)===0&&l++,l},n.prototype.bitLength=function(){var i=this.words[this.length-1],u=this._countBits(i);return(this.length-1)*26+u};function R(w){for(var i=new Array(w.bitLength()),u=0;u<i.length;u++){var l=u/26|0,d=u%26;i[u]=w.words[l]>>>d&1}return i}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var i=0,u=0;u<this.length;u++){var l=this._zeroBits(this.words[u]);if(i+=l,l!==26)break}return i},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(i){return this.negative!==0?this.abs().inotn(i).iaddn(1):this.clone()},n.prototype.fromTwos=function(i){return this.testn(i-1)?this.notn(i).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(i){for(;this.length<i.length;)this.words[this.length++]=0;for(var u=0;u<i.length;u++)this.words[u]=this.words[u]|i.words[u];return this._strip()},n.prototype.ior=function(i){return e((this.negative|i.negative)===0),this.iuor(i)},n.prototype.or=function(i){return this.length>i.length?this.clone().ior(i):i.clone().ior(this)},n.prototype.uor=function(i){return this.length>i.length?this.clone().iuor(i):i.clone().iuor(this)},n.prototype.iuand=function(i){var u;this.length>i.length?u=i:u=this;for(var l=0;l<u.length;l++)this.words[l]=this.words[l]&i.words[l];return this.length=u.length,this._strip()},n.prototype.iand=function(i){return e((this.negative|i.negative)===0),this.iuand(i)},n.prototype.and=function(i){return this.length>i.length?this.clone().iand(i):i.clone().iand(this)},n.prototype.uand=function(i){return this.length>i.length?this.clone().iuand(i):i.clone().iuand(this)},n.prototype.iuxor=function(i){var u,l;this.length>i.length?(u=this,l=i):(u=i,l=this);for(var d=0;d<l.length;d++)this.words[d]=u.words[d]^l.words[d];if(this!==u)for(;d<u.length;d++)this.words[d]=u.words[d];return this.length=u.length,this._strip()},n.prototype.ixor=function(i){return e((this.negative|i.negative)===0),this.iuxor(i)},n.prototype.xor=function(i){return this.length>i.length?this.clone().ixor(i):i.clone().ixor(this)},n.prototype.uxor=function(i){return this.length>i.length?this.clone().iuxor(i):i.clone().iuxor(this)},n.prototype.inotn=function(i){e(typeof i=="number"&&i>=0);var u=Math.ceil(i/26)|0,l=i%26;this._expand(u),l>0&&u--;for(var d=0;d<u;d++)this.words[d]=~this.words[d]&67108863;return l>0&&(this.words[d]=~this.words[d]&67108863>>26-l),this._strip()},n.prototype.notn=function(i){return this.clone().inotn(i)},n.prototype.setn=function(i,u){e(typeof i=="number"&&i>=0);var l=i/26|0,d=i%26;return this._expand(l+1),u?this.words[l]=this.words[l]|1<<d:this.words[l]=this.words[l]&~(1<<d),this._strip()},n.prototype.iadd=function(i){var u;if(this.negative!==0&&i.negative===0)return this.negative=0,u=this.isub(i),this.negative^=1,this._normSign();if(this.negative===0&&i.negative!==0)return i.negative=0,u=this.isub(i),i.negative=1,u._normSign();var l,d;this.length>i.length?(l=this,d=i):(l=i,d=this);for(var y=0,v=0;v<d.length;v++)u=(l.words[v]|0)+(d.words[v]|0)+y,this.words[v]=u&67108863,y=u>>>26;for(;y!==0&&v<l.length;v++)u=(l.words[v]|0)+y,this.words[v]=u&67108863,y=u>>>26;if(this.length=l.length,y!==0)this.words[this.length]=y,this.length++;else if(l!==this)for(;v<l.length;v++)this.words[v]=l.words[v];return this},n.prototype.add=function(i){var u;return i.negative!==0&&this.negative===0?(i.negative=0,u=this.sub(i),i.negative^=1,u):i.negative===0&&this.negative!==0?(this.negative=0,u=i.sub(this),this.negative=1,u):this.length>i.length?this.clone().iadd(i):i.clone().iadd(this)},n.prototype.isub=function(i){if(i.negative!==0){i.negative=0;var u=this.iadd(i);return i.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(i),this.negative=1,this._normSign();var l=this.cmp(i);if(l===0)return this.negative=0,this.length=1,this.words[0]=0,this;var d,y;l>0?(d=this,y=i):(d=i,y=this);for(var v=0,S=0;S<y.length;S++)u=(d.words[S]|0)-(y.words[S]|0)+v,v=u>>26,this.words[S]=u&67108863;for(;v!==0&&S<d.length;S++)u=(d.words[S]|0)+v,v=u>>26,this.words[S]=u&67108863;if(v===0&&S<d.length&&d!==this)for(;S<d.length;S++)this.words[S]=d.words[S];return this.length=Math.max(this.length,S),d!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(i){return this.clone().isub(i)};function T(w,i,u){u.negative=i.negative^w.negative;var l=w.length+i.length|0;u.length=l,l=l-1|0;var d=w.words[0]|0,y=i.words[0]|0,v=d*y,S=v&67108863,p=v/67108864|0;u.words[0]=S;for(var c=1;c<l;c++){for(var m=p>>>26,U=p&67108863,D=Math.min(c,i.length-1),F=Math.max(0,c-w.length+1);F<=D;F++){var Z=c-F|0;d=w.words[Z]|0,y=i.words[F]|0,v=d*y+U,m+=v/67108864|0,U=v&67108863}u.words[c]=U|0,p=m|0}return p!==0?u.words[c]=p|0:u.length--,u._strip()}var O=function(i,u,l){var d=i.words,y=u.words,v=l.words,S=0,p,c,m,U=d[0]|0,D=U&8191,F=U>>>13,Z=d[1]|0,ft=Z&8191,yt=Z>>>13,je=d[2]|0,gt=je&8191,St=je>>>13,jo=d[3]|0,Et=jo&8191,Rt=jo>>>13,Zo=d[4]|0,Lt=Zo&8191,Mt=Zo>>>13,Yo=d[5]|0,Tt=Yo&8191,Pt=Yo>>>13,Xo=d[6]|0,Ct=Xo&8191,Ot=Xo>>>13,Jo=d[7]|0,zt=Jo&8191,Nt=Jo>>>13,Qo=d[8]|0,Kt=Qo&8191,Ut=Qo>>>13,ti=d[9]|0,Wt=ti&8191,qt=ti>>>13,ei=y[0]|0,Dt=ei&8191,Ht=ei>>>13,ri=y[1]|0,Ft=ri&8191,Vt=ri>>>13,ni=y[2]|0,$t=ni&8191,Gt=ni>>>13,si=y[3]|0,jt=si&8191,Zt=si>>>13,oi=y[4]|0,Yt=oi&8191,Xt=oi>>>13,ii=y[5]|0,Jt=ii&8191,Qt=ii>>>13,ai=y[6]|0,te=ai&8191,ee=ai>>>13,ci=y[7]|0,re=ci&8191,ne=ci>>>13,ui=y[8]|0,se=ui&8191,oe=ui>>>13,fi=y[9]|0,ie=fi&8191,ae=fi>>>13;l.negative=i.negative^u.negative,l.length=19,p=Math.imul(D,Dt),c=Math.imul(D,Ht),c=c+Math.imul(F,Dt)|0,m=Math.imul(F,Ht);var Ss=(S+p|0)+((c&8191)<<13)|0;S=(m+(c>>>13)|0)+(Ss>>>26)|0,Ss&=67108863,p=Math.imul(ft,Dt),c=Math.imul(ft,Ht),c=c+Math.imul(yt,Dt)|0,m=Math.imul(yt,Ht),p=p+Math.imul(D,Ft)|0,c=c+Math.imul(D,Vt)|0,c=c+Math.imul(F,Ft)|0,m=m+Math.imul(F,Vt)|0;var Is=(S+p|0)+((c&8191)<<13)|0;S=(m+(c>>>13)|0)+(Is>>>26)|0,Is&=67108863,p=Math.imul(gt,Dt),c=Math.imul(gt,Ht),c=c+Math.imul(St,Dt)|0,m=Math.imul(St,Ht),p=p+Math.imul(ft,Ft)|0,c=c+Math.imul(ft,Vt)|0,c=c+Math.imul(yt,Ft)|0,m=m+Math.imul(yt,Vt)|0,p=p+Math.imul(D,$t)|0,c=c+Math.imul(D,Gt)|0,c=c+Math.imul(F,$t)|0,m=m+Math.imul(F,Gt)|0;var As=(S+p|0)+((c&8191)<<13)|0;S=(m+(c>>>13)|0)+(As>>>26)|0,As&=67108863,p=Math.imul(Et,Dt),c=Math.imul(Et,Ht),c=c+Math.imul(Rt,Dt)|0,m=Math.imul(Rt,Ht),p=p+Math.imul(gt,Ft)|0,c=c+Math.imul(gt,Vt)|0,c=c+Math.imul(St,Ft)|0,m=m+Math.imul(St,Vt)|0,p=p+Math.imul(ft,$t)|0,c=c+Math.imul(ft,Gt)|0,c=c+Math.imul(yt,$t)|0,m=m+Math.imul(yt,Gt)|0,p=p+Math.imul(D,jt)|0,c=c+Math.imul(D,Zt)|0,c=c+Math.imul(F,jt)|0,m=m+Math.imul(F,Zt)|0;var Bs=(S+p|0)+((c&8191)<<13)|0;S=(m+(c>>>13)|0)+(Bs>>>26)|0,Bs&=67108863,p=Math.imul(Lt,Dt),c=Math.imul(Lt,Ht),c=c+Math.imul(Mt,Dt)|0,m=Math.imul(Mt,Ht),p=p+Math.imul(Et,Ft)|0,c=c+Math.imul(Et,Vt)|0,c=c+Math.imul(Rt,Ft)|0,m=m+Math.imul(Rt,Vt)|0,p=p+Math.imul(gt,$t)|0,c=c+Math.imul(gt,Gt)|0,c=c+Math.imul(St,$t)|0,m=m+Math.imul(St,Gt)|0,p=p+Math.imul(ft,jt)|0,c=c+Math.imul(ft,Zt)|0,c=c+Math.imul(yt,jt)|0,m=m+Math.imul(yt,Zt)|0,p=p+Math.imul(D,Yt)|0,c=c+Math.imul(D,Xt)|0,c=c+Math.imul(F,Yt)|0,m=m+Math.imul(F,Xt)|0;var xs=(S+p|0)+((c&8191)<<13)|0;S=(m+(c>>>13)|0)+(xs>>>26)|0,xs&=67108863,p=Math.imul(Tt,Dt),c=Math.imul(Tt,Ht),c=c+Math.imul(Pt,Dt)|0,m=Math.imul(Pt,Ht),p=p+Math.imul(Lt,Ft)|0,c=c+Math.imul(Lt,Vt)|0,c=c+Math.imul(Mt,Ft)|0,m=m+Math.imul(Mt,Vt)|0,p=p+Math.imul(Et,$t)|0,c=c+Math.imul(Et,Gt)|0,c=c+Math.imul(Rt,$t)|0,m=m+Math.imul(Rt,Gt)|0,p=p+Math.imul(gt,jt)|0,c=c+Math.imul(gt,Zt)|0,c=c+Math.imul(St,jt)|0,m=m+Math.imul(St,Zt)|0,p=p+Math.imul(ft,Yt)|0,c=c+Math.imul(ft,Xt)|0,c=c+Math.imul(yt,Yt)|0,m=m+Math.imul(yt,Xt)|0,p=p+Math.imul(D,Jt)|0,c=c+Math.imul(D,Qt)|0,c=c+Math.imul(F,Jt)|0,m=m+Math.imul(F,Qt)|0;var _s=(S+p|0)+((c&8191)<<13)|0;S=(m+(c>>>13)|0)+(_s>>>26)|0,_s&=67108863,p=Math.imul(Ct,Dt),c=Math.imul(Ct,Ht),c=c+Math.imul(Ot,Dt)|0,m=Math.imul(Ot,Ht),p=p+Math.imul(Tt,Ft)|0,c=c+Math.imul(Tt,Vt)|0,c=c+Math.imul(Pt,Ft)|0,m=m+Math.imul(Pt,Vt)|0,p=p+Math.imul(Lt,$t)|0,c=c+Math.imul(Lt,Gt)|0,c=c+Math.imul(Mt,$t)|0,m=m+Math.imul(Mt,Gt)|0,p=p+Math.imul(Et,jt)|0,c=c+Math.imul(Et,Zt)|0,c=c+Math.imul(Rt,jt)|0,m=m+Math.imul(Rt,Zt)|0,p=p+Math.imul(gt,Yt)|0,c=c+Math.imul(gt,Xt)|0,c=c+Math.imul(St,Yt)|0,m=m+Math.imul(St,Xt)|0,p=p+Math.imul(ft,Jt)|0,c=c+Math.imul(ft,Qt)|0,c=c+Math.imul(yt,Jt)|0,m=m+Math.imul(yt,Qt)|0,p=p+Math.imul(D,te)|0,c=c+Math.imul(D,ee)|0,c=c+Math.imul(F,te)|0,m=m+Math.imul(F,ee)|0;var Es=(S+p|0)+((c&8191)<<13)|0;S=(m+(c>>>13)|0)+(Es>>>26)|0,Es&=67108863,p=Math.imul(zt,Dt),c=Math.imul(zt,Ht),c=c+Math.imul(Nt,Dt)|0,m=Math.imul(Nt,Ht),p=p+Math.imul(Ct,Ft)|0,c=c+Math.imul(Ct,Vt)|0,c=c+Math.imul(Ot,Ft)|0,m=m+Math.imul(Ot,Vt)|0,p=p+Math.imul(Tt,$t)|0,c=c+Math.imul(Tt,Gt)|0,c=c+Math.imul(Pt,$t)|0,m=m+Math.imul(Pt,Gt)|0,p=p+Math.imul(Lt,jt)|0,c=c+Math.imul(Lt,Zt)|0,c=c+Math.imul(Mt,jt)|0,m=m+Math.imul(Mt,Zt)|0,p=p+Math.imul(Et,Yt)|0,c=c+Math.imul(Et,Xt)|0,c=c+Math.imul(Rt,Yt)|0,m=m+Math.imul(Rt,Xt)|0,p=p+Math.imul(gt,Jt)|0,c=c+Math.imul(gt,Qt)|0,c=c+Math.imul(St,Jt)|0,m=m+Math.imul(St,Qt)|0,p=p+Math.imul(ft,te)|0,c=c+Math.imul(ft,ee)|0,c=c+Math.imul(yt,te)|0,m=m+Math.imul(yt,ee)|0,p=p+Math.imul(D,re)|0,c=c+Math.imul(D,ne)|0,c=c+Math.imul(F,re)|0,m=m+Math.imul(F,ne)|0;var Rs=(S+p|0)+((c&8191)<<13)|0;S=(m+(c>>>13)|0)+(Rs>>>26)|0,Rs&=67108863,p=Math.imul(Kt,Dt),c=Math.imul(Kt,Ht),c=c+Math.imul(Ut,Dt)|0,m=Math.imul(Ut,Ht),p=p+Math.imul(zt,Ft)|0,c=c+Math.imul(zt,Vt)|0,c=c+Math.imul(Nt,Ft)|0,m=m+Math.imul(Nt,Vt)|0,p=p+Math.imul(Ct,$t)|0,c=c+Math.imul(Ct,Gt)|0,c=c+Math.imul(Ot,$t)|0,m=m+Math.imul(Ot,Gt)|0,p=p+Math.imul(Tt,jt)|0,c=c+Math.imul(Tt,Zt)|0,c=c+Math.imul(Pt,jt)|0,m=m+Math.imul(Pt,Zt)|0,p=p+Math.imul(Lt,Yt)|0,c=c+Math.imul(Lt,Xt)|0,c=c+Math.imul(Mt,Yt)|0,m=m+Math.imul(Mt,Xt)|0,p=p+Math.imul(Et,Jt)|0,c=c+Math.imul(Et,Qt)|0,c=c+Math.imul(Rt,Jt)|0,m=m+Math.imul(Rt,Qt)|0,p=p+Math.imul(gt,te)|0,c=c+Math.imul(gt,ee)|0,c=c+Math.imul(St,te)|0,m=m+Math.imul(St,ee)|0,p=p+Math.imul(ft,re)|0,c=c+Math.imul(ft,ne)|0,c=c+Math.imul(yt,re)|0,m=m+Math.imul(yt,ne)|0,p=p+Math.imul(D,se)|0,c=c+Math.imul(D,oe)|0,c=c+Math.imul(F,se)|0,m=m+Math.imul(F,oe)|0;var Ls=(S+p|0)+((c&8191)<<13)|0;S=(m+(c>>>13)|0)+(Ls>>>26)|0,Ls&=67108863,p=Math.imul(Wt,Dt),c=Math.imul(Wt,Ht),c=c+Math.imul(qt,Dt)|0,m=Math.imul(qt,Ht),p=p+Math.imul(Kt,Ft)|0,c=c+Math.imul(Kt,Vt)|0,c=c+Math.imul(Ut,Ft)|0,m=m+Math.imul(Ut,Vt)|0,p=p+Math.imul(zt,$t)|0,c=c+Math.imul(zt,Gt)|0,c=c+Math.imul(Nt,$t)|0,m=m+Math.imul(Nt,Gt)|0,p=p+Math.imul(Ct,jt)|0,c=c+Math.imul(Ct,Zt)|0,c=c+Math.imul(Ot,jt)|0,m=m+Math.imul(Ot,Zt)|0,p=p+Math.imul(Tt,Yt)|0,c=c+Math.imul(Tt,Xt)|0,c=c+Math.imul(Pt,Yt)|0,m=m+Math.imul(Pt,Xt)|0,p=p+Math.imul(Lt,Jt)|0,c=c+Math.imul(Lt,Qt)|0,c=c+Math.imul(Mt,Jt)|0,m=m+Math.imul(Mt,Qt)|0,p=p+Math.imul(Et,te)|0,c=c+Math.imul(Et,ee)|0,c=c+Math.imul(Rt,te)|0,m=m+Math.imul(Rt,ee)|0,p=p+Math.imul(gt,re)|0,c=c+Math.imul(gt,ne)|0,c=c+Math.imul(St,re)|0,m=m+Math.imul(St,ne)|0,p=p+Math.imul(ft,se)|0,c=c+Math.imul(ft,oe)|0,c=c+Math.imul(yt,se)|0,m=m+Math.imul(yt,oe)|0,p=p+Math.imul(D,ie)|0,c=c+Math.imul(D,ae)|0,c=c+Math.imul(F,ie)|0,m=m+Math.imul(F,ae)|0;var Ms=(S+p|0)+((c&8191)<<13)|0;S=(m+(c>>>13)|0)+(Ms>>>26)|0,Ms&=67108863,p=Math.imul(Wt,Ft),c=Math.imul(Wt,Vt),c=c+Math.imul(qt,Ft)|0,m=Math.imul(qt,Vt),p=p+Math.imul(Kt,$t)|0,c=c+Math.imul(Kt,Gt)|0,c=c+Math.imul(Ut,$t)|0,m=m+Math.imul(Ut,Gt)|0,p=p+Math.imul(zt,jt)|0,c=c+Math.imul(zt,Zt)|0,c=c+Math.imul(Nt,jt)|0,m=m+Math.imul(Nt,Zt)|0,p=p+Math.imul(Ct,Yt)|0,c=c+Math.imul(Ct,Xt)|0,c=c+Math.imul(Ot,Yt)|0,m=m+Math.imul(Ot,Xt)|0,p=p+Math.imul(Tt,Jt)|0,c=c+Math.imul(Tt,Qt)|0,c=c+Math.imul(Pt,Jt)|0,m=m+Math.imul(Pt,Qt)|0,p=p+Math.imul(Lt,te)|0,c=c+Math.imul(Lt,ee)|0,c=c+Math.imul(Mt,te)|0,m=m+Math.imul(Mt,ee)|0,p=p+Math.imul(Et,re)|0,c=c+Math.imul(Et,ne)|0,c=c+Math.imul(Rt,re)|0,m=m+Math.imul(Rt,ne)|0,p=p+Math.imul(gt,se)|0,c=c+Math.imul(gt,oe)|0,c=c+Math.imul(St,se)|0,m=m+Math.imul(St,oe)|0,p=p+Math.imul(ft,ie)|0,c=c+Math.imul(ft,ae)|0,c=c+Math.imul(yt,ie)|0,m=m+Math.imul(yt,ae)|0;var Ts=(S+p|0)+((c&8191)<<13)|0;S=(m+(c>>>13)|0)+(Ts>>>26)|0,Ts&=67108863,p=Math.imul(Wt,$t),c=Math.imul(Wt,Gt),c=c+Math.imul(qt,$t)|0,m=Math.imul(qt,Gt),p=p+Math.imul(Kt,jt)|0,c=c+Math.imul(Kt,Zt)|0,c=c+Math.imul(Ut,jt)|0,m=m+Math.imul(Ut,Zt)|0,p=p+Math.imul(zt,Yt)|0,c=c+Math.imul(zt,Xt)|0,c=c+Math.imul(Nt,Yt)|0,m=m+Math.imul(Nt,Xt)|0,p=p+Math.imul(Ct,Jt)|0,c=c+Math.imul(Ct,Qt)|0,c=c+Math.imul(Ot,Jt)|0,m=m+Math.imul(Ot,Qt)|0,p=p+Math.imul(Tt,te)|0,c=c+Math.imul(Tt,ee)|0,c=c+Math.imul(Pt,te)|0,m=m+Math.imul(Pt,ee)|0,p=p+Math.imul(Lt,re)|0,c=c+Math.imul(Lt,ne)|0,c=c+Math.imul(Mt,re)|0,m=m+Math.imul(Mt,ne)|0,p=p+Math.imul(Et,se)|0,c=c+Math.imul(Et,oe)|0,c=c+Math.imul(Rt,se)|0,m=m+Math.imul(Rt,oe)|0,p=p+Math.imul(gt,ie)|0,c=c+Math.imul(gt,ae)|0,c=c+Math.imul(St,ie)|0,m=m+Math.imul(St,ae)|0;var Ps=(S+p|0)+((c&8191)<<13)|0;S=(m+(c>>>13)|0)+(Ps>>>26)|0,Ps&=67108863,p=Math.imul(Wt,jt),c=Math.imul(Wt,Zt),c=c+Math.imul(qt,jt)|0,m=Math.imul(qt,Zt),p=p+Math.imul(Kt,Yt)|0,c=c+Math.imul(Kt,Xt)|0,c=c+Math.imul(Ut,Yt)|0,m=m+Math.imul(Ut,Xt)|0,p=p+Math.imul(zt,Jt)|0,c=c+Math.imul(zt,Qt)|0,c=c+Math.imul(Nt,Jt)|0,m=m+Math.imul(Nt,Qt)|0,p=p+Math.imul(Ct,te)|0,c=c+Math.imul(Ct,ee)|0,c=c+Math.imul(Ot,te)|0,m=m+Math.imul(Ot,ee)|0,p=p+Math.imul(Tt,re)|0,c=c+Math.imul(Tt,ne)|0,c=c+Math.imul(Pt,re)|0,m=m+Math.imul(Pt,ne)|0,p=p+Math.imul(Lt,se)|0,c=c+Math.imul(Lt,oe)|0,c=c+Math.imul(Mt,se)|0,m=m+Math.imul(Mt,oe)|0,p=p+Math.imul(Et,ie)|0,c=c+Math.imul(Et,ae)|0,c=c+Math.imul(Rt,ie)|0,m=m+Math.imul(Rt,ae)|0;var Cs=(S+p|0)+((c&8191)<<13)|0;S=(m+(c>>>13)|0)+(Cs>>>26)|0,Cs&=67108863,p=Math.imul(Wt,Yt),c=Math.imul(Wt,Xt),c=c+Math.imul(qt,Yt)|0,m=Math.imul(qt,Xt),p=p+Math.imul(Kt,Jt)|0,c=c+Math.imul(Kt,Qt)|0,c=c+Math.imul(Ut,Jt)|0,m=m+Math.imul(Ut,Qt)|0,p=p+Math.imul(zt,te)|0,c=c+Math.imul(zt,ee)|0,c=c+Math.imul(Nt,te)|0,m=m+Math.imul(Nt,ee)|0,p=p+Math.imul(Ct,re)|0,c=c+Math.imul(Ct,ne)|0,c=c+Math.imul(Ot,re)|0,m=m+Math.imul(Ot,ne)|0,p=p+Math.imul(Tt,se)|0,c=c+Math.imul(Tt,oe)|0,c=c+Math.imul(Pt,se)|0,m=m+Math.imul(Pt,oe)|0,p=p+Math.imul(Lt,ie)|0,c=c+Math.imul(Lt,ae)|0,c=c+Math.imul(Mt,ie)|0,m=m+Math.imul(Mt,ae)|0;var Os=(S+p|0)+((c&8191)<<13)|0;S=(m+(c>>>13)|0)+(Os>>>26)|0,Os&=67108863,p=Math.imul(Wt,Jt),c=Math.imul(Wt,Qt),c=c+Math.imul(qt,Jt)|0,m=Math.imul(qt,Qt),p=p+Math.imul(Kt,te)|0,c=c+Math.imul(Kt,ee)|0,c=c+Math.imul(Ut,te)|0,m=m+Math.imul(Ut,ee)|0,p=p+Math.imul(zt,re)|0,c=c+Math.imul(zt,ne)|0,c=c+Math.imul(Nt,re)|0,m=m+Math.imul(Nt,ne)|0,p=p+Math.imul(Ct,se)|0,c=c+Math.imul(Ct,oe)|0,c=c+Math.imul(Ot,se)|0,m=m+Math.imul(Ot,oe)|0,p=p+Math.imul(Tt,ie)|0,c=c+Math.imul(Tt,ae)|0,c=c+Math.imul(Pt,ie)|0,m=m+Math.imul(Pt,ae)|0;var zs=(S+p|0)+((c&8191)<<13)|0;S=(m+(c>>>13)|0)+(zs>>>26)|0,zs&=67108863,p=Math.imul(Wt,te),c=Math.imul(Wt,ee),c=c+Math.imul(qt,te)|0,m=Math.imul(qt,ee),p=p+Math.imul(Kt,re)|0,c=c+Math.imul(Kt,ne)|0,c=c+Math.imul(Ut,re)|0,m=m+Math.imul(Ut,ne)|0,p=p+Math.imul(zt,se)|0,c=c+Math.imul(zt,oe)|0,c=c+Math.imul(Nt,se)|0,m=m+Math.imul(Nt,oe)|0,p=p+Math.imul(Ct,ie)|0,c=c+Math.imul(Ct,ae)|0,c=c+Math.imul(Ot,ie)|0,m=m+Math.imul(Ot,ae)|0;var Ns=(S+p|0)+((c&8191)<<13)|0;S=(m+(c>>>13)|0)+(Ns>>>26)|0,Ns&=67108863,p=Math.imul(Wt,re),c=Math.imul(Wt,ne),c=c+Math.imul(qt,re)|0,m=Math.imul(qt,ne),p=p+Math.imul(Kt,se)|0,c=c+Math.imul(Kt,oe)|0,c=c+Math.imul(Ut,se)|0,m=m+Math.imul(Ut,oe)|0,p=p+Math.imul(zt,ie)|0,c=c+Math.imul(zt,ae)|0,c=c+Math.imul(Nt,ie)|0,m=m+Math.imul(Nt,ae)|0;var Ks=(S+p|0)+((c&8191)<<13)|0;S=(m+(c>>>13)|0)+(Ks>>>26)|0,Ks&=67108863,p=Math.imul(Wt,se),c=Math.imul(Wt,oe),c=c+Math.imul(qt,se)|0,m=Math.imul(qt,oe),p=p+Math.imul(Kt,ie)|0,c=c+Math.imul(Kt,ae)|0,c=c+Math.imul(Ut,ie)|0,m=m+Math.imul(Ut,ae)|0;var Us=(S+p|0)+((c&8191)<<13)|0;S=(m+(c>>>13)|0)+(Us>>>26)|0,Us&=67108863,p=Math.imul(Wt,ie),c=Math.imul(Wt,ae),c=c+Math.imul(qt,ie)|0,m=Math.imul(qt,ae);var Ws=(S+p|0)+((c&8191)<<13)|0;return S=(m+(c>>>13)|0)+(Ws>>>26)|0,Ws&=67108863,v[0]=Ss,v[1]=Is,v[2]=As,v[3]=Bs,v[4]=xs,v[5]=_s,v[6]=Es,v[7]=Rs,v[8]=Ls,v[9]=Ms,v[10]=Ts,v[11]=Ps,v[12]=Cs,v[13]=Os,v[14]=zs,v[15]=Ns,v[16]=Ks,v[17]=Us,v[18]=Ws,S!==0&&(v[19]=S,l.length++),l};Math.imul||(O=T);function G(w,i,u){u.negative=i.negative^w.negative,u.length=w.length+i.length;for(var l=0,d=0,y=0;y<u.length-1;y++){var v=d;d=0;for(var S=l&67108863,p=Math.min(y,i.length-1),c=Math.max(0,y-w.length+1);c<=p;c++){var m=y-c,U=w.words[m]|0,D=i.words[c]|0,F=U*D,Z=F&67108863;v=v+(F/67108864|0)|0,Z=Z+S|0,S=Z&67108863,v=v+(Z>>>26)|0,d+=v>>>26,v&=67108863}u.words[y]=S,l=v,v=d}return l!==0?u.words[y]=l:u.length--,u._strip()}function tt(w,i,u){return G(w,i,u)}n.prototype.mulTo=function(i,u){var l,d=this.length+i.length;return this.length===10&&i.length===10?l=O(this,i,u):d<63?l=T(this,i,u):d<1024?l=G(this,i,u):l=tt(this,i,u),l};function j(w,i){this.x=w,this.y=i}j.prototype.makeRBT=function(i){for(var u=new Array(i),l=n.prototype._countBits(i)-1,d=0;d<i;d++)u[d]=this.revBin(d,l,i);return u},j.prototype.revBin=function(i,u,l){if(i===0||i===l-1)return i;for(var d=0,y=0;y<u;y++)d|=(i&1)<<u-y-1,i>>=1;return d},j.prototype.permute=function(i,u,l,d,y,v){for(var S=0;S<v;S++)d[S]=u[i[S]],y[S]=l[i[S]]},j.prototype.transform=function(i,u,l,d,y,v){this.permute(v,i,u,l,d,y);for(var S=1;S<y;S<<=1)for(var p=S<<1,c=Math.cos(2*Math.PI/p),m=Math.sin(2*Math.PI/p),U=0;U<y;U+=p)for(var D=c,F=m,Z=0;Z<S;Z++){var ft=l[U+Z],yt=d[U+Z],je=l[U+Z+S],gt=d[U+Z+S],St=D*je-F*gt;gt=D*gt+F*je,je=St,l[U+Z]=ft+je,d[U+Z]=yt+gt,l[U+Z+S]=ft-je,d[U+Z+S]=yt-gt,Z!==p&&(St=c*D-m*F,F=c*F+m*D,D=St)}},j.prototype.guessLen13b=function(i,u){var l=Math.max(u,i)|1,d=l&1,y=0;for(l=l/2|0;l;l=l>>>1)y++;return 1<<y+1+d},j.prototype.conjugate=function(i,u,l){if(!(l<=1))for(var d=0;d<l/2;d++){var y=i[d];i[d]=i[l-d-1],i[l-d-1]=y,y=u[d],u[d]=-u[l-d-1],u[l-d-1]=-y}},j.prototype.normalize13b=function(i,u){for(var l=0,d=0;d<u/2;d++){var y=Math.round(i[2*d+1]/u)*8192+Math.round(i[2*d]/u)+l;i[d]=y&67108863,y<67108864?l=0:l=y/67108864|0}return i},j.prototype.convert13b=function(i,u,l,d){for(var y=0,v=0;v<u;v++)y=y+(i[v]|0),l[2*v]=y&8191,y=y>>>13,l[2*v+1]=y&8191,y=y>>>13;for(v=2*u;v<d;++v)l[v]=0;e(y===0),e((y&-8192)===0)},j.prototype.stub=function(i){for(var u=new Array(i),l=0;l<i;l++)u[l]=0;return u},j.prototype.mulp=function(i,u,l){var d=2*this.guessLen13b(i.length,u.length),y=this.makeRBT(d),v=this.stub(d),S=new Array(d),p=new Array(d),c=new Array(d),m=new Array(d),U=new Array(d),D=new Array(d),F=l.words;F.length=d,this.convert13b(i.words,i.length,S,d),this.convert13b(u.words,u.length,m,d),this.transform(S,v,p,c,d,y),this.transform(m,v,U,D,d,y);for(var Z=0;Z<d;Z++){var ft=p[Z]*U[Z]-c[Z]*D[Z];c[Z]=p[Z]*D[Z]+c[Z]*U[Z],p[Z]=ft}return this.conjugate(p,c,d),this.transform(p,c,F,v,d,y),this.conjugate(F,v,d),this.normalize13b(F,d),l.negative=i.negative^u.negative,l.length=i.length+u.length,l._strip()},n.prototype.mul=function(i){var u=new n(null);return u.words=new Array(this.length+i.length),this.mulTo(i,u)},n.prototype.mulf=function(i){var u=new n(null);return u.words=new Array(this.length+i.length),tt(this,i,u)},n.prototype.imul=function(i){return this.clone().mulTo(i,this)},n.prototype.imuln=function(i){var u=i<0;u&&(i=-i),e(typeof i=="number"),e(i<67108864);for(var l=0,d=0;d<this.length;d++){var y=(this.words[d]|0)*i,v=(y&67108863)+(l&67108863);l>>=26,l+=y/67108864|0,l+=v>>>26,this.words[d]=v&67108863}return l!==0&&(this.words[d]=l,this.length++),u?this.ineg():this},n.prototype.muln=function(i){return this.clone().imuln(i)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(i){var u=R(i);if(u.length===0)return new n(1);for(var l=this,d=0;d<u.length&&u[d]===0;d++,l=l.sqr());if(++d<u.length)for(var y=l.sqr();d<u.length;d++,y=y.sqr())u[d]!==0&&(l=l.mul(y));return l},n.prototype.iushln=function(i){e(typeof i=="number"&&i>=0);var u=i%26,l=(i-u)/26,d=67108863>>>26-u<<26-u,y;if(u!==0){var v=0;for(y=0;y<this.length;y++){var S=this.words[y]&d,p=(this.words[y]|0)-S<<u;this.words[y]=p|v,v=S>>>26-u}v&&(this.words[y]=v,this.length++)}if(l!==0){for(y=this.length-1;y>=0;y--)this.words[y+l]=this.words[y];for(y=0;y<l;y++)this.words[y]=0;this.length+=l}return this._strip()},n.prototype.ishln=function(i){return e(this.negative===0),this.iushln(i)},n.prototype.iushrn=function(i,u,l){e(typeof i=="number"&&i>=0);var d;u?d=(u-u%26)/26:d=0;var y=i%26,v=Math.min((i-y)/26,this.length),S=67108863^67108863>>>y<<y,p=l;if(d-=v,d=Math.max(0,d),p){for(var c=0;c<v;c++)p.words[c]=this.words[c];p.length=v}if(v!==0)if(this.length>v)for(this.length-=v,c=0;c<this.length;c++)this.words[c]=this.words[c+v];else this.words[0]=0,this.length=1;var m=0;for(c=this.length-1;c>=0&&(m!==0||c>=d);c--){var U=this.words[c]|0;this.words[c]=m<<26-y|U>>>y,m=U&S}return p&&m!==0&&(p.words[p.length++]=m),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(i,u,l){return e(this.negative===0),this.iushrn(i,u,l)},n.prototype.shln=function(i){return this.clone().ishln(i)},n.prototype.ushln=function(i){return this.clone().iushln(i)},n.prototype.shrn=function(i){return this.clone().ishrn(i)},n.prototype.ushrn=function(i){return this.clone().iushrn(i)},n.prototype.testn=function(i){e(typeof i=="number"&&i>=0);var u=i%26,l=(i-u)/26,d=1<<u;if(this.length<=l)return!1;var y=this.words[l];return!!(y&d)},n.prototype.imaskn=function(i){e(typeof i=="number"&&i>=0);var u=i%26,l=(i-u)/26;if(e(this.negative===0,"imaskn works only with positive numbers"),this.length<=l)return this;if(u!==0&&l++,this.length=Math.min(l,this.length),u!==0){var d=67108863^67108863>>>u<<u;this.words[this.length-1]&=d}return this._strip()},n.prototype.maskn=function(i){return this.clone().imaskn(i)},n.prototype.iaddn=function(i){return e(typeof i=="number"),e(i<67108864),i<0?this.isubn(-i):this.negative!==0?this.length===1&&(this.words[0]|0)<=i?(this.words[0]=i-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(i),this.negative=1,this):this._iaddn(i)},n.prototype._iaddn=function(i){this.words[0]+=i;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},n.prototype.isubn=function(i){if(e(typeof i=="number"),e(i<67108864),i<0)return this.iaddn(-i);if(this.negative!==0)return this.negative=0,this.iaddn(i),this.negative=1,this;if(this.words[0]-=i,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},n.prototype.addn=function(i){return this.clone().iaddn(i)},n.prototype.subn=function(i){return this.clone().isubn(i)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(i,u,l){var d=i.length+l,y;this._expand(d);var v,S=0;for(y=0;y<i.length;y++){v=(this.words[y+l]|0)+S;var p=(i.words[y]|0)*u;v-=p&67108863,S=(v>>26)-(p/67108864|0),this.words[y+l]=v&67108863}for(;y<this.length-l;y++)v=(this.words[y+l]|0)+S,S=v>>26,this.words[y+l]=v&67108863;if(S===0)return this._strip();for(e(S===-1),S=0,y=0;y<this.length;y++)v=-(this.words[y]|0)+S,S=v>>26,this.words[y]=v&67108863;return this.negative=1,this._strip()},n.prototype._wordDiv=function(i,u){var l=this.length-i.length,d=this.clone(),y=i,v=y.words[y.length-1]|0,S=this._countBits(v);l=26-S,l!==0&&(y=y.ushln(l),d.iushln(l),v=y.words[y.length-1]|0);var p=d.length-y.length,c;if(u!=="mod"){c=new n(null),c.length=p+1,c.words=new Array(c.length);for(var m=0;m<c.length;m++)c.words[m]=0}var U=d.clone()._ishlnsubmul(y,1,p);U.negative===0&&(d=U,c&&(c.words[p]=1));for(var D=p-1;D>=0;D--){var F=(d.words[y.length+D]|0)*67108864+(d.words[y.length+D-1]|0);for(F=Math.min(F/v|0,67108863),d._ishlnsubmul(y,F,D);d.negative!==0;)F--,d.negative=0,d._ishlnsubmul(y,1,D),d.isZero()||(d.negative^=1);c&&(c.words[D]=F)}return c&&c._strip(),d._strip(),u!=="div"&&l!==0&&d.iushrn(l),{div:c||null,mod:d}},n.prototype.divmod=function(i,u,l){if(e(!i.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var d,y,v;return this.negative!==0&&i.negative===0?(v=this.neg().divmod(i,u),u!=="mod"&&(d=v.div.neg()),u!=="div"&&(y=v.mod.neg(),l&&y.negative!==0&&y.iadd(i)),{div:d,mod:y}):this.negative===0&&i.negative!==0?(v=this.divmod(i.neg(),u),u!=="mod"&&(d=v.div.neg()),{div:d,mod:v.mod}):(this.negative&i.negative)!==0?(v=this.neg().divmod(i.neg(),u),u!=="div"&&(y=v.mod.neg(),l&&y.negative!==0&&y.isub(i)),{div:v.div,mod:y}):i.length>this.length||this.cmp(i)<0?{div:new n(0),mod:this}:i.length===1?u==="div"?{div:this.divn(i.words[0]),mod:null}:u==="mod"?{div:null,mod:new n(this.modrn(i.words[0]))}:{div:this.divn(i.words[0]),mod:new n(this.modrn(i.words[0]))}:this._wordDiv(i,u)},n.prototype.div=function(i){return this.divmod(i,"div",!1).div},n.prototype.mod=function(i){return this.divmod(i,"mod",!1).mod},n.prototype.umod=function(i){return this.divmod(i,"mod",!0).mod},n.prototype.divRound=function(i){var u=this.divmod(i);if(u.mod.isZero())return u.div;var l=u.div.negative!==0?u.mod.isub(i):u.mod,d=i.ushrn(1),y=i.andln(1),v=l.cmp(d);return v<0||y===1&&v===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},n.prototype.modrn=function(i){var u=i<0;u&&(i=-i),e(i<=67108863);for(var l=(1<<26)%i,d=0,y=this.length-1;y>=0;y--)d=(l*d+(this.words[y]|0))%i;return u?-d:d},n.prototype.modn=function(i){return this.modrn(i)},n.prototype.idivn=function(i){var u=i<0;u&&(i=-i),e(i<=67108863);for(var l=0,d=this.length-1;d>=0;d--){var y=(this.words[d]|0)+l*67108864;this.words[d]=y/i|0,l=y%i}return this._strip(),u?this.ineg():this},n.prototype.divn=function(i){return this.clone().idivn(i)},n.prototype.egcd=function(i){e(i.negative===0),e(!i.isZero());var u=this,l=i.clone();u.negative!==0?u=u.umod(i):u=u.clone();for(var d=new n(1),y=new n(0),v=new n(0),S=new n(1),p=0;u.isEven()&&l.isEven();)u.iushrn(1),l.iushrn(1),++p;for(var c=l.clone(),m=u.clone();!u.isZero();){for(var U=0,D=1;(u.words[0]&D)===0&&U<26;++U,D<<=1);if(U>0)for(u.iushrn(U);U-- >0;)(d.isOdd()||y.isOdd())&&(d.iadd(c),y.isub(m)),d.iushrn(1),y.iushrn(1);for(var F=0,Z=1;(l.words[0]&Z)===0&&F<26;++F,Z<<=1);if(F>0)for(l.iushrn(F);F-- >0;)(v.isOdd()||S.isOdd())&&(v.iadd(c),S.isub(m)),v.iushrn(1),S.iushrn(1);u.cmp(l)>=0?(u.isub(l),d.isub(v),y.isub(S)):(l.isub(u),v.isub(d),S.isub(y))}return{a:v,b:S,gcd:l.iushln(p)}},n.prototype._invmp=function(i){e(i.negative===0),e(!i.isZero());var u=this,l=i.clone();u.negative!==0?u=u.umod(i):u=u.clone();for(var d=new n(1),y=new n(0),v=l.clone();u.cmpn(1)>0&&l.cmpn(1)>0;){for(var S=0,p=1;(u.words[0]&p)===0&&S<26;++S,p<<=1);if(S>0)for(u.iushrn(S);S-- >0;)d.isOdd()&&d.iadd(v),d.iushrn(1);for(var c=0,m=1;(l.words[0]&m)===0&&c<26;++c,m<<=1);if(c>0)for(l.iushrn(c);c-- >0;)y.isOdd()&&y.iadd(v),y.iushrn(1);u.cmp(l)>=0?(u.isub(l),d.isub(y)):(l.isub(u),y.isub(d))}var U;return u.cmpn(1)===0?U=d:U=y,U.cmpn(0)<0&&U.iadd(i),U},n.prototype.gcd=function(i){if(this.isZero())return i.abs();if(i.isZero())return this.abs();var u=this.clone(),l=i.clone();u.negative=0,l.negative=0;for(var d=0;u.isEven()&&l.isEven();d++)u.iushrn(1),l.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;l.isEven();)l.iushrn(1);var y=u.cmp(l);if(y<0){var v=u;u=l,l=v}else if(y===0||l.cmpn(1)===0)break;u.isub(l)}while(!0);return l.iushln(d)},n.prototype.invm=function(i){return this.egcd(i).a.umod(i)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(i){return this.words[0]&i},n.prototype.bincn=function(i){e(typeof i=="number");var u=i%26,l=(i-u)/26,d=1<<u;if(this.length<=l)return this._expand(l+1),this.words[l]|=d,this;for(var y=d,v=l;y!==0&&v<this.length;v++){var S=this.words[v]|0;S+=y,y=S>>>26,S&=67108863,this.words[v]=S}return y!==0&&(this.words[v]=y,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(i){var u=i<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var l;if(this.length>1)l=1;else{u&&(i=-i),e(i<=67108863,"Number is too big");var d=this.words[0]|0;l=d===i?0:d<i?-1:1}return this.negative!==0?-l|0:l},n.prototype.cmp=function(i){if(this.negative!==0&&i.negative===0)return-1;if(this.negative===0&&i.negative!==0)return 1;var u=this.ucmp(i);return this.negative!==0?-u|0:u},n.prototype.ucmp=function(i){if(this.length>i.length)return 1;if(this.length<i.length)return-1;for(var u=0,l=this.length-1;l>=0;l--){var d=this.words[l]|0,y=i.words[l]|0;if(d!==y){d<y?u=-1:d>y&&(u=1);break}}return u},n.prototype.gtn=function(i){return this.cmpn(i)===1},n.prototype.gt=function(i){return this.cmp(i)===1},n.prototype.gten=function(i){return this.cmpn(i)>=0},n.prototype.gte=function(i){return this.cmp(i)>=0},n.prototype.ltn=function(i){return this.cmpn(i)===-1},n.prototype.lt=function(i){return this.cmp(i)===-1},n.prototype.lten=function(i){return this.cmpn(i)<=0},n.prototype.lte=function(i){return this.cmp(i)<=0},n.prototype.eqn=function(i){return this.cmpn(i)===0},n.prototype.eq=function(i){return this.cmp(i)===0},n.red=function(i){return new Bt(i)},n.prototype.toRed=function(i){return e(!this.red,"Already a number in reduction context"),e(this.negative===0,"red works only with positives"),i.convertTo(this)._forceRed(i)},n.prototype.fromRed=function(){return e(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(i){return this.red=i,this},n.prototype.forceRed=function(i){return e(!this.red,"Already a number in reduction context"),this._forceRed(i)},n.prototype.redAdd=function(i){return e(this.red,"redAdd works only with red numbers"),this.red.add(this,i)},n.prototype.redIAdd=function(i){return e(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,i)},n.prototype.redSub=function(i){return e(this.red,"redSub works only with red numbers"),this.red.sub(this,i)},n.prototype.redISub=function(i){return e(this.red,"redISub works only with red numbers"),this.red.isub(this,i)},n.prototype.redShl=function(i){return e(this.red,"redShl works only with red numbers"),this.red.shl(this,i)},n.prototype.redMul=function(i){return e(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.mul(this,i)},n.prototype.redIMul=function(i){return e(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.imul(this,i)},n.prototype.redSqr=function(){return e(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return e(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return e(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return e(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return e(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(i){return e(this.red&&!i.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,i)};var At={k256:null,p224:null,p192:null,p25519:null};function pt(w,i){this.name=w,this.p=new n(i,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}pt.prototype._tmp=function(){var i=new n(null);return i.words=new Array(Math.ceil(this.n/13)),i},pt.prototype.ireduce=function(i){var u=i,l;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),l=u.bitLength();while(l>this.n);var d=l<this.n?-1:u.ucmp(this.p);return d===0?(u.words[0]=0,u.length=1):d>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},pt.prototype.split=function(i,u){i.iushrn(this.n,0,u)},pt.prototype.imulK=function(i){return i.imul(this.k)};function Se(){pt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(Se,pt),Se.prototype.split=function(i,u){for(var l=4194303,d=Math.min(i.length,9),y=0;y<d;y++)u.words[y]=i.words[y];if(u.length=d,i.length<=9){i.words[0]=0,i.length=1;return}var v=i.words[9];for(u.words[u.length++]=v&l,y=10;y<i.length;y++){var S=i.words[y]|0;i.words[y-10]=(S&l)<<4|v>>>22,v=S}v>>>=22,i.words[y-10]=v,v===0&&i.length>10?i.length-=10:i.length-=9},Se.prototype.imulK=function(i){i.words[i.length]=0,i.words[i.length+1]=0,i.length+=2;for(var u=0,l=0;l<i.length;l++){var d=i.words[l]|0;u+=d*977,i.words[l]=u&67108863,u=d*64+(u/67108864|0)}return i.words[i.length-1]===0&&(i.length--,i.words[i.length-1]===0&&i.length--),i};function lr(){pt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(lr,pt);function Go(){pt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(Go,pt);function ks(){pt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(ks,pt),ks.prototype.imulK=function(i){for(var u=0,l=0;l<i.length;l++){var d=(i.words[l]|0)*19+u,y=d&67108863;d>>>=26,i.words[l]=y,u=d}return u!==0&&(i.words[i.length++]=u),i},n._prime=function(i){if(At[i])return At[i];var u;if(i==="k256")u=new Se;else if(i==="p224")u=new lr;else if(i==="p192")u=new Go;else if(i==="p25519")u=new ks;else throw new Error("Unknown prime "+i);return At[i]=u,u};function Bt(w){if(typeof w=="string"){var i=n._prime(w);this.m=i.p,this.prime=i}else e(w.gtn(1),"modulus must be greater than 1"),this.m=w,this.prime=null}Bt.prototype._verify1=function(i){e(i.negative===0,"red works only with positives"),e(i.red,"red works only with red numbers")},Bt.prototype._verify2=function(i,u){e((i.negative|u.negative)===0,"red works only with positives"),e(i.red&&i.red===u.red,"red works only with red numbers")},Bt.prototype.imod=function(i){return this.prime?this.prime.ireduce(i)._forceRed(this):(b(i,i.umod(this.m)._forceRed(this)),i)},Bt.prototype.neg=function(i){return i.isZero()?i.clone():this.m.sub(i)._forceRed(this)},Bt.prototype.add=function(i,u){this._verify2(i,u);var l=i.add(u);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},Bt.prototype.iadd=function(i,u){this._verify2(i,u);var l=i.iadd(u);return l.cmp(this.m)>=0&&l.isub(this.m),l},Bt.prototype.sub=function(i,u){this._verify2(i,u);var l=i.sub(u);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},Bt.prototype.isub=function(i,u){this._verify2(i,u);var l=i.isub(u);return l.cmpn(0)<0&&l.iadd(this.m),l},Bt.prototype.shl=function(i,u){return this._verify1(i),this.imod(i.ushln(u))},Bt.prototype.imul=function(i,u){return this._verify2(i,u),this.imod(i.imul(u))},Bt.prototype.mul=function(i,u){return this._verify2(i,u),this.imod(i.mul(u))},Bt.prototype.isqr=function(i){return this.imul(i,i.clone())},Bt.prototype.sqr=function(i){return this.mul(i,i)},Bt.prototype.sqrt=function(i){if(i.isZero())return i.clone();var u=this.m.andln(3);if(e(u%2===1),u===3){var l=this.m.add(new n(1)).iushrn(2);return this.pow(i,l)}for(var d=this.m.subn(1),y=0;!d.isZero()&&d.andln(1)===0;)y++,d.iushrn(1);e(!d.isZero());var v=new n(1).toRed(this),S=v.redNeg(),p=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new n(2*c*c).toRed(this);this.pow(c,p).cmp(S)!==0;)c.redIAdd(S);for(var m=this.pow(c,d),U=this.pow(i,d.addn(1).iushrn(1)),D=this.pow(i,d),F=y;D.cmp(v)!==0;){for(var Z=D,ft=0;Z.cmp(v)!==0;ft++)Z=Z.redSqr();e(ft<F);var yt=this.pow(m,new n(1).iushln(F-ft-1));U=U.redMul(yt),m=yt.redSqr(),D=D.redMul(m),F=ft}return U},Bt.prototype.invm=function(i){var u=i._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},Bt.prototype.pow=function(i,u){if(u.isZero())return new n(1).toRed(this);if(u.cmpn(1)===0)return i.clone();var l=4,d=new Array(1<<l);d[0]=new n(1).toRed(this),d[1]=i;for(var y=2;y<d.length;y++)d[y]=this.mul(d[y-1],i);var v=d[0],S=0,p=0,c=u.bitLength()%26;for(c===0&&(c=26),y=u.length-1;y>=0;y--){for(var m=u.words[y],U=c-1;U>=0;U--){var D=m>>U&1;if(v!==d[0]&&(v=this.sqr(v)),D===0&&S===0){p=0;continue}S<<=1,S|=D,p++,!(p!==l&&(y!==0||U!==0))&&(v=this.mul(v,d[S]),p=0,S=0)}c=26}return v},Bt.prototype.convertTo=function(i){var u=i.umod(this.m);return u===i?u.clone():u},Bt.prototype.convertFrom=function(i){var u=i.clone();return u.red=null,u},n.mont=function(i){return new dr(i)};function dr(w){Bt.call(this,w),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(dr,Bt),dr.prototype.convertTo=function(i){return this.imod(i.ushln(this.shift))},dr.prototype.convertFrom=function(i){var u=this.imod(i.mul(this.rinv));return u.red=null,u},dr.prototype.imul=function(i,u){if(i.isZero()||u.isZero())return i.words[0]=0,i.length=1,i;var l=i.imul(u),d=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=l.isub(d).iushrn(this.shift),v=y;return y.cmp(this.m)>=0?v=y.isub(this.m):y.cmpn(0)<0&&(v=y.iadd(this.m)),v._forceRed(this)},dr.prototype.mul=function(i,u){if(i.isZero()||u.isZero())return new n(0)._forceRed(this);var l=i.mul(u),d=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=l.isub(d).iushrn(this.shift),v=y;return y.cmp(this.m)>=0?v=y.isub(this.m):y.cmpn(0)<0&&(v=y.iadd(this.m)),v._forceRed(this)},dr.prototype.invm=function(i){var u=this.imod(i._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(typeof Zs>"u"||Zs,xi)});var Ri=Oe((Th,Ei)=>{"use strict";W();q();var An=lc().Buffer;function Pc(s){if(s.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<s.length;r++){var n=s.charAt(r),o=n.charCodeAt(0);if(t[o]!==255)throw new TypeError(n+" is ambiguous");t[o]=r}var a=s.length,f=s.charAt(0),h=Math.log(a)/Math.log(256),b=Math.log(256)/Math.log(a);function k(A){if((Array.isArray(A)||A instanceof Uint8Array)&&(A=An.from(A)),!An.isBuffer(A))throw new TypeError("Expected Buffer");if(A.length===0)return"";for(var E=0,R=0,T=0,O=A.length;T!==O&&A[T]===0;)T++,E++;for(var G=(O-T)*b+1>>>0,tt=new Uint8Array(G);T!==O;){for(var j=A[T],At=0,pt=G-1;(j!==0||At<R)&&pt!==-1;pt--,At++)j+=256*tt[pt]>>>0,tt[pt]=j%a>>>0,j=j/a>>>0;if(j!==0)throw new Error("Non-zero carry");R=At,T++}for(var Se=G-R;Se!==G&&tt[Se]===0;)Se++;for(var lr=f.repeat(E);Se<G;++Se)lr+=s.charAt(tt[Se]);return lr}function I(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return An.alloc(0);var E=0;if(A[E]!==" "){for(var R=0,T=0;A[E]===f;)R++,E++;for(var O=(A.length-E)*h+1>>>0,G=new Uint8Array(O);A[E];){var tt=t[A.charCodeAt(E)];if(tt===255)return;for(var j=0,At=O-1;(tt!==0||j<T)&&At!==-1;At--,j++)tt+=a*G[At]>>>0,G[At]=tt%256>>>0,tt=tt/256>>>0;if(tt!==0)throw new Error("Non-zero carry");T=j,E++}if(A[E]!==" "){for(var pt=O-T;pt!==O&&G[pt]===0;)pt++;var Se=An.allocUnsafe(R+(O-pt));Se.fill(0,0,R);for(var lr=R;pt!==O;)Se[lr++]=G[pt++];return Se}}}function _(A){var E=I(A);if(E)return E;throw new Error("Non-base"+a+" character")}return{encode:k,decodeUnsafe:I,decode:_}}Ei.exports=Pc});var Mi=Oe((Oh,Li)=>{W();q();var Cc=Ri(),Oc="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Li.exports=Cc(Oc)});var Qs=Oe(B=>{"use strict";W();q();Object.defineProperty(B,"__esModule",{value:!0});B.s16=B.s8=B.nu64be=B.u48be=B.u40be=B.u32be=B.u24be=B.u16be=B.nu64=B.u48=B.u40=B.u32=B.u24=B.u16=B.u8=B.offset=B.greedy=B.Constant=B.UTF8=B.CString=B.Blob=B.Boolean=B.BitField=B.BitStructure=B.VariantLayout=B.Union=B.UnionLayoutDiscriminator=B.UnionDiscriminator=B.Structure=B.Sequence=B.DoubleBE=B.Double=B.FloatBE=B.Float=B.NearInt64BE=B.NearInt64=B.NearUInt64BE=B.NearUInt64=B.IntBE=B.Int=B.UIntBE=B.UInt=B.OffsetLayout=B.GreedyCount=B.ExternalLayout=B.bindConstructorLayout=B.nameWithProperty=B.Layout=B.uint8ArrayToBuffer=B.checkUint8Array=void 0;B.constant=B.utf8=B.cstr=B.blob=B.unionLayoutDiscriminator=B.union=B.seq=B.bits=B.struct=B.f64be=B.f64=B.f32be=B.f32=B.ns64be=B.s48be=B.s40be=B.s32be=B.s24be=B.s16be=B.ns64=B.s48=B.s40=B.s32=B.s24=void 0;var Xs=li();function Br(s){if(!(s instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}B.checkUint8Array=Br;function it(s){return Br(s),Xs.Buffer.from(s.buffer,s.byteOffset,s.length)}B.uint8ArrayToBuffer=it;var ct=class{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){let e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}};B.Layout=ct;function Js(s,t){return t.property?s+"["+t.property+"]":s}B.nameWithProperty=Js;function zc(s,t){if(typeof s!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(s,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof ct))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");s.layout_=t,t.boundConstructor_=s,t.makeDestinationObject=()=>new s,Object.defineProperty(s.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(s,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}B.bindConstructorLayout=zc;var ge=class extends ct{isCount(){throw new Error("ExternalLayout is abstract")}};B.ExternalLayout=ge;var Bn=class extends ge{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){Br(t);let r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}};B.GreedyCount=Bn;var Fr=class extends ge{constructor(t,e=0,r){if(!(t instanceof ct))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof _e||this.layout instanceof Re}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}};B.OffsetLayout=Fr;var _e=class extends ct{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return it(t).readUIntLE(e,this.span)}encode(t,e,r=0){return it(e).writeUIntLE(t,r,this.span),this.span}};B.UInt=_e;var Re=class extends ct{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return it(t).readUIntBE(e,this.span)}encode(t,e,r=0){return it(e).writeUIntBE(t,r,this.span),this.span}};B.UIntBE=Re;var Fe=class extends ct{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return it(t).readIntLE(e,this.span)}encode(t,e,r=0){return it(e).writeIntLE(t,r,this.span),this.span}};B.Int=Fe;var tr=class extends ct{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return it(t).readIntBE(e,this.span)}encode(t,e,r=0){return it(e).writeIntBE(t,r,this.span),this.span}};B.IntBE=tr;var Ys=Math.pow(2,32);function Dn(s){let t=Math.floor(s/Ys),e=s-t*Ys;return{hi32:t,lo32:e}}function Hn(s,t){return s*Ys+t}var xn=class extends ct{constructor(t){super(8,t)}decode(t,e=0){let r=it(t),n=r.readUInt32LE(e),o=r.readUInt32LE(e+4);return Hn(o,n)}encode(t,e,r=0){let n=Dn(t),o=it(e);return o.writeUInt32LE(n.lo32,r),o.writeUInt32LE(n.hi32,r+4),8}};B.NearUInt64=xn;var _n=class extends ct{constructor(t){super(8,t)}decode(t,e=0){let r=it(t),n=r.readUInt32BE(e),o=r.readUInt32BE(e+4);return Hn(n,o)}encode(t,e,r=0){let n=Dn(t),o=it(e);return o.writeUInt32BE(n.hi32,r),o.writeUInt32BE(n.lo32,r+4),8}};B.NearUInt64BE=_n;var En=class extends ct{constructor(t){super(8,t)}decode(t,e=0){let r=it(t),n=r.readUInt32LE(e),o=r.readInt32LE(e+4);return Hn(o,n)}encode(t,e,r=0){let n=Dn(t),o=it(e);return o.writeUInt32LE(n.lo32,r),o.writeInt32LE(n.hi32,r+4),8}};B.NearInt64=En;var Rn=class extends ct{constructor(t){super(8,t)}decode(t,e=0){let r=it(t),n=r.readInt32BE(e),o=r.readUInt32BE(e+4);return Hn(n,o)}encode(t,e,r=0){let n=Dn(t),o=it(e);return o.writeInt32BE(n.hi32,r),o.writeUInt32BE(n.lo32,r+4),8}};B.NearInt64BE=Rn;var Ln=class extends ct{constructor(t){super(4,t)}decode(t,e=0){return it(t).readFloatLE(e)}encode(t,e,r=0){return it(e).writeFloatLE(t,r),4}};B.Float=Ln;var Mn=class extends ct{constructor(t){super(4,t)}decode(t,e=0){return it(t).readFloatBE(e)}encode(t,e,r=0){return it(e).writeFloatBE(t,r),4}};B.FloatBE=Mn;var Tn=class extends ct{constructor(t){super(8,t)}decode(t,e=0){return it(t).readDoubleLE(e)}encode(t,e,r=0){return it(e).writeDoubleLE(t,r),8}};B.Double=Tn;var Pn=class extends ct{constructor(t){super(8,t)}decode(t,e=0){return it(t).readDoubleBE(e)}encode(t,e,r=0){return it(e).writeDoubleBE(t,r),8}};B.DoubleBE=Pn;var Cn=class extends ct{constructor(t,e,r){if(!(t instanceof ct))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof ge&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;!(e instanceof ge)&&0<t.span&&(n=e*t.span),super(n,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof ge&&(n=n.decode(t,e)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let o=0;for(;o<n;)r+=this.elementLayout.getSpan(t,e+r),++o}return r}decode(t,e=0){let r=[],n=0,o=this.count;for(o instanceof ge&&(o=o.decode(t,e));n<o;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),n+=1;return r}encode(t,e,r=0){let n=this.elementLayout,o=t.reduce((a,f)=>a+n.encode(f,e,r+a),0);return this.count instanceof ge&&this.count.encode(t.length,e,r),o}};B.Sequence=Cn;var On=class extends ct{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((o,a)=>o&&a instanceof ct,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(let o of t)if(0>o.span&&o.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=t.reduce((o,a)=>o+a.getSpan(),0)}catch{}super(n,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((n,o)=>{let a=o.getSpan(t,e);return e+=a,n+a},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e=0){Br(t);let r=this.makeDestinationObject();for(let n of this.fields)if(n.property!==void 0&&(r[n.property]=n.decode(t,e)),e+=n.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){let n=r,o=0,a=0;for(let f of this.fields){let h=f.span;if(a=0<h?h:0,f.property!==void 0){let b=t[f.property];b!==void 0&&(a=f.encode(b,e,r),0>h&&(h=f.getSpan(e,r)))}o=r,r+=h}return o+a-n}fromArray(t){let e=this.makeDestinationObject();for(let r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(let e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(let r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}};B.Structure=On;var Vr=class{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}};B.UnionDiscriminator=Vr;var Ar=class extends Vr{constructor(t,e){if(!(t instanceof ge&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}};B.UnionLayoutDiscriminator=Ar;var $r=class extends ct{constructor(t,e,r){let n;if(t instanceof _e||t instanceof Re)n=new Ar(new Fr(t));else if(t instanceof ge&&t.isCount())n=new Ar(t);else if(t instanceof Vr)n=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof ct))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let o=-1;e&&(o=e.span,0<=o&&(t instanceof _e||t instanceof Re)&&(o+=n.layout.span)),super(o,r),this.discriminator=n,this.usesPrefixDiscriminator=t instanceof _e||t instanceof Re,this.defaultLayout=e,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(f){return a(f)},this.configGetSourceVariant=function(f){a=f.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;let r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;let e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(let e in this.registry){let r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r,n=this.discriminator,o=n.decode(t,e),a=this.registry[o];if(a===void 0){let f=this.defaultLayout,h=0;this.usesPrefixDiscriminator&&(h=n.layout.span),r=this.makeDestinationObject(),r[n.property]=o,r[f.property]=f.decode(t,e+h)}else r=a.decode(t,e);return r}encode(t,e,r=0){let n=this.getSourceVariant(t);if(n===void 0){let o=this.discriminator,a=this.defaultLayout,f=0;return this.usesPrefixDiscriminator&&(f=o.layout.span),o.encode(t[o.property],e,r),f+a.encode(t[a.property],e,r+f)}return n.encode(t,e,r)}addVariant(t,e,r){let n=new zn(this,t,e,r);return this.registry[t]=n,n}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}};B.Union=$r;var zn=class extends ct{constructor(t,e,r,n){if(!(t instanceof $r))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&n===void 0&&(n=r,r=null),r){if(!(r instanceof ct))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof n!="string")throw new TypeError("variant must have a String property")}let o=t.span;0>t.span&&(o=r?r.span:0,0<=o&&t.usesPrefixDiscriminator&&(o+=t.discriminator.layout.span)),super(o,n),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let n=0;return this.layout&&(n=this.layout.getSpan(t,e+r)),r+n}decode(t,e=0){let r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let o=n;if(this.layout&&(this.layout.encode(t[this.property],e,r+n),o+=this.layout.getSpan(e,r+n),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(t){if(this.layout)return this.layout.fromArray(t)}};B.VariantLayout=zn;function Ir(s){return 0>s&&(s+=4294967296),s}var Gr=class extends ct{constructor(t,e,r){if(!(t instanceof _e||t instanceof Re))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let n=0;this._packedSetValue=function(o){return n=Ir(o),this},this._packedGetValue=function(){return n}}decode(t,e=0){let r=this.makeDestinationObject(),n=this.word.decode(t,e);this._packedSetValue(n);for(let o of this.fields)o.property!==void 0&&(r[o.property]=o.decode(t));return r}encode(t,e,r=0){let n=this.word.decode(e,r);this._packedSetValue(n);for(let o of this.fields)if(o.property!==void 0){let a=t[o.property];a!==void 0&&o.encode(a)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){let r=new jr(this,t,e);return this.fields.push(r),r}addBoolean(t){let e=new Nn(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(let e of this.fields)if(e.property===t)return e}};B.BitStructure=Gr;var jr=class{constructor(t,e,r){if(!(t instanceof Gr))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");let n=8*t.span,o=t.fields.reduce((a,f)=>a+f.bits,0);if(e+o>n)throw new Error("bits too long for span remainder ("+(n-o)+" of "+n+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=n-o-e),this.wordMask=Ir(this.valueMask<<this.start),this.property=r}decode(t,e){let r=this.container._packedGetValue();return Ir(r&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==Ir(t&this.valueMask))throw new TypeError(Js("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let e=this.container._packedGetValue(),r=Ir(t<<this.start);this.container._packedSetValue(Ir(e&~this.wordMask)|r)}};B.BitField=jr;var Nn=class extends jr{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};B.Boolean=Nn;var Kn=class extends ct{constructor(t,e){if(!(t instanceof ge&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof ge||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),it(t).slice(e,e+r)}encode(t,e,r){let n=this.length;if(this.length instanceof ge&&(n=t.length),!(t instanceof Uint8Array&&n===t.length))throw new TypeError(Js("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>e.length)throw new RangeError("encoding overruns Uint8Array");let o=it(t);return it(e).write(o.toString("hex"),r,n,"hex"),this.length instanceof ge&&this.length.encode(n,e,r),n}};B.Blob=Kn;var Un=class extends ct{constructor(t){super(-1,t)}getSpan(t,e=0){Br(t);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e=0){let r=this.getSpan(t,e);return it(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));let n=Xs.Buffer.from(t,"utf8"),o=n.length;if(r+o>e.length)throw new RangeError("encoding overruns Buffer");let a=it(e);return n.copy(a,r),a[r+o]=0,o+1}};B.CString=Un;var Wn=class extends ct{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return Br(t),t.length-e}decode(t,e=0){let r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return it(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));let n=Xs.Buffer.from(t,"utf8"),o=n.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(r+o>e.length)throw new RangeError("encoding overruns Buffer");return n.copy(it(e),r),o}};B.UTF8=Wn;var qn=class extends ct{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}};B.Constant=qn;B.greedy=(s,t)=>new Bn(s,t);B.offset=(s,t,e)=>new Fr(s,t,e);B.u8=s=>new _e(1,s);B.u16=s=>new _e(2,s);B.u24=s=>new _e(3,s);B.u32=s=>new _e(4,s);B.u40=s=>new _e(5,s);B.u48=s=>new _e(6,s);B.nu64=s=>new xn(s);B.u16be=s=>new Re(2,s);B.u24be=s=>new Re(3,s);B.u32be=s=>new Re(4,s);B.u40be=s=>new Re(5,s);B.u48be=s=>new Re(6,s);B.nu64be=s=>new _n(s);B.s8=s=>new Fe(1,s);B.s16=s=>new Fe(2,s);B.s24=s=>new Fe(3,s);B.s32=s=>new Fe(4,s);B.s40=s=>new Fe(5,s);B.s48=s=>new Fe(6,s);B.ns64=s=>new En(s);B.s16be=s=>new tr(2,s);B.s24be=s=>new tr(3,s);B.s32be=s=>new tr(4,s);B.s40be=s=>new tr(5,s);B.s48be=s=>new tr(6,s);B.ns64be=s=>new Rn(s);B.f32=s=>new Ln(s);B.f32be=s=>new Mn(s);B.f64=s=>new Tn(s);B.f64be=s=>new Pn(s);B.struct=(s,t,e)=>new On(s,t,e);B.bits=(s,t,e)=>new Gr(s,t,e);B.seq=(s,t,e)=>new Cn(s,t,e);B.union=(s,t,e)=>new $r(s,t,e);B.unionLayoutDiscriminator=(s,t)=>new Ar(s,t);B.blob=(s,t)=>new Kn(s,t);B.cstr=s=>new Un(s);B.utf8=(s,t)=>new Wn(s,t);B.constant=(s,t)=>new qn(s,t)});var oo=Oe((Fh,so)=>{"use strict";W();q();var Dc=Object.prototype.hasOwnProperty,Be="~";function Yr(){}Object.create&&(Yr.prototype=Object.create(null),new Yr().__proto__||(Be=!1));function Hc(s,t,e){this.fn=s,this.context=t,this.once=e||!1}function Oi(s,t,e,r,n){if(typeof e!="function")throw new TypeError("The listener must be a function");var o=new Hc(e,r||s,n),a=Be?Be+t:t;return s._events[a]?s._events[a].fn?s._events[a]=[s._events[a],o]:s._events[a].push(o):(s._events[a]=o,s._eventsCount++),s}function $n(s,t){--s._eventsCount===0?s._events=new Yr:delete s._events[t]}function me(){this._events=new Yr,this._eventsCount=0}me.prototype.eventNames=function(){var t=[],e,r;if(this._eventsCount===0)return t;for(r in e=this._events)Dc.call(e,r)&&t.push(Be?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(e)):t};me.prototype.listeners=function(t){var e=Be?Be+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,a=new Array(o);n<o;n++)a[n]=r[n].fn;return a};me.prototype.listenerCount=function(t){var e=Be?Be+t:t,r=this._events[e];return r?r.fn?1:r.length:0};me.prototype.emit=function(t,e,r,n,o,a){var f=Be?Be+t:t;if(!this._events[f])return!1;var h=this._events[f],b=arguments.length,k,I;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),b){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,r),!0;case 4:return h.fn.call(h.context,e,r,n),!0;case 5:return h.fn.call(h.context,e,r,n,o),!0;case 6:return h.fn.call(h.context,e,r,n,o,a),!0}for(I=1,k=new Array(b-1);I<b;I++)k[I-1]=arguments[I];h.fn.apply(h.context,k)}else{var _=h.length,A;for(I=0;I<_;I++)switch(h[I].once&&this.removeListener(t,h[I].fn,void 0,!0),b){case 1:h[I].fn.call(h[I].context);break;case 2:h[I].fn.call(h[I].context,e);break;case 3:h[I].fn.call(h[I].context,e,r);break;case 4:h[I].fn.call(h[I].context,e,r,n);break;default:if(!k)for(A=1,k=new Array(b-1);A<b;A++)k[A-1]=arguments[A];h[I].fn.apply(h[I].context,k)}}return!0};me.prototype.on=function(t,e,r){return Oi(this,t,e,r,!1)};me.prototype.once=function(t,e,r){return Oi(this,t,e,r,!0)};me.prototype.removeListener=function(t,e,r,n){var o=Be?Be+t:t;if(!this._events[o])return this;if(!e)return $n(this,o),this;var a=this._events[o];if(a.fn)a.fn===e&&(!n||a.once)&&(!r||a.context===r)&&$n(this,o);else{for(var f=0,h=[],b=a.length;f<b;f++)(a[f].fn!==e||n&&!a[f].once||r&&a[f].context!==r)&&h.push(a[f]);h.length?this._events[o]=h.length===1?h[0]:h:$n(this,o)}return this};me.prototype.removeAllListeners=function(t){var e;return t?(e=Be?Be+t:t,this._events[e]&&$n(this,e)):(this._events=new Yr,this._eventsCount=0),this};me.prototype.off=me.prototype.removeListener;me.prototype.addListener=me.prototype.on;me.prefixed=Be;me.EventEmitter=me;typeof so<"u"&&(so.exports=me)});var zi=Oe(ao=>{"use strict";W();q();Object.defineProperty(ao,"__esModule",{value:!0});var Fc=oo(),io=class extends Fc.EventEmitter{constructor(e,r,n){super();ue(this,"socket");this.socket=new window.WebSocket(e,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=o=>this.emit("message",o.data),this.socket.onerror=o=>this.emit("error",o),this.socket.onclose=o=>{this.emit("close",o.code,o.reason)}}send(e,r,n){let o=n||r;try{this.socket.send(e),o()}catch(a){o(a)}}close(e,r){this.socket.close(e,r)}addEventListener(e,r,n){this.socket.addEventListener(e,r,n)}};function Vc(s,t){return new io(s,t)}ao.default=Vc});var Ni=Oe(Er=>{"use strict";W();q();Object.defineProperty(Er,"__esModule",{value:!0});Er.createError=Er.DefaultDataPack=void 0;var $c=new Map([[-32e3,"Event not provided"],[-32600,"Invalid Request"],[-32601,"Method not found"],[-32602,"Invalid params"],[-32603,"Internal error"],[-32604,"Params not found"],[-32605,"Method forbidden"],[-32606,"Event forbidden"],[-32700,"Parse error"]]),co=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}};Er.DefaultDataPack=co;function Gc(s,t){let e={code:s,message:$c.get(s)||"Internal Server Error"};return t&&(e.data=t),e}Er.createError=Gc});var Ki=Oe(fo=>{"use strict";W();q();Object.defineProperty(fo,"__esModule",{value:!0});var jc=oo(),Zc=Ni(),uo=class extends jc.EventEmitter{constructor(e,r="ws://localhost:8080",{autoconnect:n=!0,reconnect:o=!0,reconnect_interval:a=1e3,max_reconnects:f=5,...h}={},b,k){super();ue(this,"address");ue(this,"rpc_id");ue(this,"queue");ue(this,"options");ue(this,"autoconnect");ue(this,"ready");ue(this,"reconnect");ue(this,"reconnect_timer_id");ue(this,"reconnect_interval");ue(this,"max_reconnects");ue(this,"rest_options");ue(this,"current_reconnects");ue(this,"generate_request_id");ue(this,"socket");ue(this,"webSocketFactory");ue(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=r,this.autoconnect=n,this.ready=!1,this.reconnect=o,this.reconnect_timer_id=void 0,this.reconnect_interval=a,this.max_reconnects=f,this.rest_options=h,this.current_reconnects=0,this.generate_request_id=b||(()=>++this.rpc_id),k?this.dataPack=k:this.dataPack=new Zc.DefaultDataPack,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,r,n,o){return!o&&typeof n=="object"&&(o=n,n=null),new Promise((a,f)=>{if(!this.ready)return f(new Error("socket not ready"));let h=this.generate_request_id(e,r),b={jsonrpc:"2.0",method:e,params:r||void 0,id:h};this.socket.send(this.dataPack.encode(b),o,k=>{if(k)return f(k);this.queue[h]={promise:[a,f]},n&&(this.queue[h].timeout=setTimeout(()=>{delete this.queue[h],f(new Error("reply timeout"))},n))})})}async login(e){let r=await this.call("rpc.login",e);if(!r)throw new Error("authentication failed");return r}async listMethods(){return await this.call("__listMethods")}notify(e,r){return new Promise((n,o)=>{if(!this.ready)return o(new Error("socket not ready"));let a={jsonrpc:"2.0",method:e,params:r};this.socket.send(this.dataPack.encode(a),f=>{if(f)return o(f);n()})})}async subscribe(e){typeof e=="string"&&(e=[e]);let r=await this.call("rpc.on",e);if(typeof e=="string"&&r[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+r[e]);return r}async unsubscribe(e){typeof e=="string"&&(e=[e]);let r=await this.call("rpc.off",e);if(typeof e=="string"&&r[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+r);return r}close(e,r){this.socket.close(e||1e3,r)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,r){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,r),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=ht.Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);let o=[n.notification];if(n.params.constructor===Object)o.push(n.params);else for(let a=0;a<n.params.length;a++)o.push(n.params[a]);return Promise.resolve().then(()=>{this.emit.apply(this,o)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n?.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:o})=>{this.ready&&setTimeout(()=>this.emit("close",n,o),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(e,r),this.reconnect_interval)))})}};fo.default=uo});var Wi=Oe(Rr=>{"use strict";W();q();var Ui=Rr&&Rr.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Rr,"__esModule",{value:!0});Rr.Client=void 0;var Yc=Ui(zi()),Xc=Ui(Ki()),ho=class extends Xc.default{constructor(t="ws://localhost:8080",{autoconnect:e=!0,reconnect:r=!0,reconnect_interval:n=1e3,max_reconnects:o=5}={},a){super(Yc.default,t,{autoconnect:e,reconnect:r,reconnect_interval:n,max_reconnects:o},a)}};Rr.Client=ho});function Xr(){if(!Gn&&(Gn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Gn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Gn(Jc)}var Gn,Jc,lo=Ie(()=>{W();q();Jc=new Uint8Array(16)});var qi,Di=Ie(()=>{W();q();qi=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function Qc(s){return typeof s=="string"&&qi.test(s)}var rr,Jr=Ie(()=>{W();q();Di();rr=Qc});function tu(s){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(pe[s[t+0]]+pe[s[t+1]]+pe[s[t+2]]+pe[s[t+3]]+"-"+pe[s[t+4]]+pe[s[t+5]]+"-"+pe[s[t+6]]+pe[s[t+7]]+"-"+pe[s[t+8]]+pe[s[t+9]]+"-"+pe[s[t+10]]+pe[s[t+11]]+pe[s[t+12]]+pe[s[t+13]]+pe[s[t+14]]+pe[s[t+15]]).toLowerCase();if(!rr(e))throw TypeError("Stringified UUID is invalid");return e}var pe,jn,nr,Qr=Ie(()=>{W();q();Jr();pe=[];for(jn=0;jn<256;++jn)pe.push((jn+256).toString(16).substr(1));nr=tu});function eu(s,t,e){var r=t&&e||0,n=t||new Array(16);s=s||{};var o=s.node||Hi,a=s.clockseq!==void 0?s.clockseq:po;if(o==null||a==null){var f=s.random||(s.rng||Xr)();o==null&&(o=Hi=[f[0]|1,f[1],f[2],f[3],f[4],f[5]]),a==null&&(a=po=(f[6]<<8|f[7])&16383)}var h=s.msecs!==void 0?s.msecs:Date.now(),b=s.nsecs!==void 0?s.nsecs:go+1,k=h-yo+(b-go)/1e4;if(k<0&&s.clockseq===void 0&&(a=a+1&16383),(k<0||h>yo)&&s.nsecs===void 0&&(b=0),b>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");yo=h,go=b,po=a,h+=122192928e5;var I=((h&268435455)*1e4+b)%4294967296;n[r++]=I>>>24&255,n[r++]=I>>>16&255,n[r++]=I>>>8&255,n[r++]=I&255;var _=h/4294967296*1e4&268435455;n[r++]=_>>>8&255,n[r++]=_&255,n[r++]=_>>>24&15|16,n[r++]=_>>>16&255,n[r++]=a>>>8|128,n[r++]=a&255;for(var A=0;A<6;++A)n[r+A]=o[A];return t||nr(n)}var Hi,po,yo,go,Fi,Vi=Ie(()=>{W();q();lo();Qr();yo=0,go=0;Fi=eu});function ru(s){if(!rr(s))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(s.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(s.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(s.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(s.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(s.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}var Zn,mo=Ie(()=>{W();q();Jr();Zn=ru});function nu(s){s=unescape(encodeURIComponent(s));for(var t=[],e=0;e<s.length;++e)t.push(s.charCodeAt(e));return t}function Yn(s,t,e){function r(n,o,a,f){if(typeof n=="string"&&(n=nu(n)),typeof o=="string"&&(o=Zn(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var h=new Uint8Array(16+n.length);if(h.set(o),h.set(n,o.length),h=e(h),h[6]=h[6]&15|t,h[8]=h[8]&63|128,a){f=f||0;for(var b=0;b<16;++b)a[f+b]=h[b];return a}return nr(h)}try{r.name=s}catch{}return r.DNS=su,r.URL=ou,r}var su,ou,wo=Ie(()=>{W();q();Qr();mo();su="6ba7b810-9dad-11d1-80b4-00c04fd430c8",ou="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function iu(s){if(typeof s=="string"){var t=unescape(encodeURIComponent(s));s=new Uint8Array(t.length);for(var e=0;e<t.length;++e)s[e]=t.charCodeAt(e)}return au(cu(uu(s),s.length*8))}function au(s){for(var t=[],e=s.length*32,r="0123456789abcdef",n=0;n<e;n+=8){var o=s[n>>5]>>>n%32&255,a=parseInt(r.charAt(o>>>4&15)+r.charAt(o&15),16);t.push(a)}return t}function $i(s){return(s+64>>>9<<4)+14+1}function cu(s,t){s[t>>5]|=128<<t%32,s[$i(t)-1]=t;for(var e=1732584193,r=-271733879,n=-1732584194,o=271733878,a=0;a<s.length;a+=16){var f=e,h=r,b=n,k=o;e=we(e,r,n,o,s[a],7,-680876936),o=we(o,e,r,n,s[a+1],12,-389564586),n=we(n,o,e,r,s[a+2],17,606105819),r=we(r,n,o,e,s[a+3],22,-1044525330),e=we(e,r,n,o,s[a+4],7,-176418897),o=we(o,e,r,n,s[a+5],12,1200080426),n=we(n,o,e,r,s[a+6],17,-1473231341),r=we(r,n,o,e,s[a+7],22,-45705983),e=we(e,r,n,o,s[a+8],7,1770035416),o=we(o,e,r,n,s[a+9],12,-1958414417),n=we(n,o,e,r,s[a+10],17,-42063),r=we(r,n,o,e,s[a+11],22,-1990404162),e=we(e,r,n,o,s[a+12],7,1804603682),o=we(o,e,r,n,s[a+13],12,-40341101),n=we(n,o,e,r,s[a+14],17,-1502002290),r=we(r,n,o,e,s[a+15],22,1236535329),e=be(e,r,n,o,s[a+1],5,-165796510),o=be(o,e,r,n,s[a+6],9,-1069501632),n=be(n,o,e,r,s[a+11],14,643717713),r=be(r,n,o,e,s[a],20,-373897302),e=be(e,r,n,o,s[a+5],5,-701558691),o=be(o,e,r,n,s[a+10],9,38016083),n=be(n,o,e,r,s[a+15],14,-660478335),r=be(r,n,o,e,s[a+4],20,-405537848),e=be(e,r,n,o,s[a+9],5,568446438),o=be(o,e,r,n,s[a+14],9,-1019803690),n=be(n,o,e,r,s[a+3],14,-187363961),r=be(r,n,o,e,s[a+8],20,1163531501),e=be(e,r,n,o,s[a+13],5,-1444681467),o=be(o,e,r,n,s[a+2],9,-51403784),n=be(n,o,e,r,s[a+7],14,1735328473),r=be(r,n,o,e,s[a+12],20,-1926607734),e=ve(e,r,n,o,s[a+5],4,-378558),o=ve(o,e,r,n,s[a+8],11,-2022574463),n=ve(n,o,e,r,s[a+11],16,1839030562),r=ve(r,n,o,e,s[a+14],23,-35309556),e=ve(e,r,n,o,s[a+1],4,-1530992060),o=ve(o,e,r,n,s[a+4],11,1272893353),n=ve(n,o,e,r,s[a+7],16,-155497632),r=ve(r,n,o,e,s[a+10],23,-1094730640),e=ve(e,r,n,o,s[a+13],4,681279174),o=ve(o,e,r,n,s[a],11,-358537222),n=ve(n,o,e,r,s[a+3],16,-722521979),r=ve(r,n,o,e,s[a+6],23,76029189),e=ve(e,r,n,o,s[a+9],4,-640364487),o=ve(o,e,r,n,s[a+12],11,-421815835),n=ve(n,o,e,r,s[a+15],16,530742520),r=ve(r,n,o,e,s[a+2],23,-995338651),e=ke(e,r,n,o,s[a],6,-198630844),o=ke(o,e,r,n,s[a+7],10,1126891415),n=ke(n,o,e,r,s[a+14],15,-1416354905),r=ke(r,n,o,e,s[a+5],21,-57434055),e=ke(e,r,n,o,s[a+12],6,1700485571),o=ke(o,e,r,n,s[a+3],10,-1894986606),n=ke(n,o,e,r,s[a+10],15,-1051523),r=ke(r,n,o,e,s[a+1],21,-2054922799),e=ke(e,r,n,o,s[a+8],6,1873313359),o=ke(o,e,r,n,s[a+15],10,-30611744),n=ke(n,o,e,r,s[a+6],15,-1560198380),r=ke(r,n,o,e,s[a+13],21,1309151649),e=ke(e,r,n,o,s[a+4],6,-145523070),o=ke(o,e,r,n,s[a+11],10,-1120210379),n=ke(n,o,e,r,s[a+2],15,718787259),r=ke(r,n,o,e,s[a+9],21,-343485551),e=sr(e,f),r=sr(r,h),n=sr(n,b),o=sr(o,k)}return[e,r,n,o]}function uu(s){if(s.length===0)return[];for(var t=s.length*8,e=new Uint32Array($i(t)),r=0;r<t;r+=8)e[r>>5]|=(s[r/8]&255)<<r%32;return e}function sr(s,t){var e=(s&65535)+(t&65535),r=(s>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function fu(s,t){return s<<t|s>>>32-t}function Xn(s,t,e,r,n,o){return sr(fu(sr(sr(t,s),sr(r,o)),n),e)}function we(s,t,e,r,n,o,a){return Xn(t&e|~t&r,s,t,n,o,a)}function be(s,t,e,r,n,o,a){return Xn(t&r|e&~r,s,t,n,o,a)}function ve(s,t,e,r,n,o,a){return Xn(t^e^r,s,t,n,o,a)}function ke(s,t,e,r,n,o,a){return Xn(e^(t|~r),s,t,n,o,a)}var Gi,ji=Ie(()=>{W();q();Gi=iu});var hu,Zi,Yi=Ie(()=>{W();q();wo();ji();hu=Yn("v3",48,Gi),Zi=hu});function lu(s,t,e){s=s||{};var r=s.random||(s.rng||Xr)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var n=0;n<16;++n)t[e+n]=r[n];return t}return nr(r)}var Xi,Ji=Ie(()=>{W();q();lo();Qr();Xi=lu});function du(s,t,e,r){switch(s){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function bo(s,t){return s<<t|s>>>32-t}function pu(s){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof s=="string"){var r=unescape(encodeURIComponent(s));s=[];for(var n=0;n<r.length;++n)s.push(r.charCodeAt(n))}else Array.isArray(s)||(s=Array.prototype.slice.call(s));s.push(128);for(var o=s.length/4+2,a=Math.ceil(o/16),f=new Array(a),h=0;h<a;++h){for(var b=new Uint32Array(16),k=0;k<16;++k)b[k]=s[h*64+k*4]<<24|s[h*64+k*4+1]<<16|s[h*64+k*4+2]<<8|s[h*64+k*4+3];f[h]=b}f[a-1][14]=(s.length-1)*8/Math.pow(2,32),f[a-1][14]=Math.floor(f[a-1][14]),f[a-1][15]=(s.length-1)*8&4294967295;for(var I=0;I<a;++I){for(var _=new Uint32Array(80),A=0;A<16;++A)_[A]=f[I][A];for(var E=16;E<80;++E)_[E]=bo(_[E-3]^_[E-8]^_[E-14]^_[E-16],1);for(var R=e[0],T=e[1],O=e[2],G=e[3],tt=e[4],j=0;j<80;++j){var At=Math.floor(j/20),pt=bo(R,5)+du(At,T,O,G)+tt+t[At]+_[j]>>>0;tt=G,G=O,O=bo(T,30)>>>0,T=R,R=pt}e[0]=e[0]+R>>>0,e[1]=e[1]+T>>>0,e[2]=e[2]+O>>>0,e[3]=e[3]+G>>>0,e[4]=e[4]+tt>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Qi,ta=Ie(()=>{W();q();Qi=pu});var yu,ea,ra=Ie(()=>{W();q();wo();ta();yu=Yn("v5",80,Qi),ea=yu});var na,sa=Ie(()=>{W();q();na="00000000-0000-0000-0000-000000000000"});function gu(s){if(!rr(s))throw TypeError("Invalid UUID");return parseInt(s.substr(14,1),16)}var oa,ia=Ie(()=>{W();q();Jr();oa=gu});var vo={};fc(vo,{NIL:()=>na,parse:()=>Zn,stringify:()=>nr,v1:()=>Fi,v3:()=>Zi,v4:()=>Xi,v5:()=>ea,validate:()=>rr,version:()=>oa});var ko=Ie(()=>{W();q();Vi();Yi();Ji();ra();sa();ia();Jr();Qr();mo()});var ca=Oe((vd,aa)=>{"use strict";W();q();var mu=(ko(),hi(vo)).v4,wu=function(s,t,e,r){if(typeof s!="string")throw new TypeError(s+" must be a string");r=r||{};let n=typeof r.version=="number"?r.version:2;if(n!==1&&n!==2)throw new TypeError(n+" must be 1 or 2");let o={method:s};if(n===2&&(o.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");o.params=t}if(typeof e>"u"){let a=typeof r.generator=="function"?r.generator:function(){return mu()};o.id=a(o,r)}else n===2&&e===null?r.notificationIdNull&&(o.id=null):o.id=e;return o};aa.exports=wu});var fa=Oe((Id,ua)=>{"use strict";W();q();var bu=(ko(),hi(vo)).v4,vu=ca(),tn=function(s,t){if(!(this instanceof tn))return new tn(s,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return bu()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=s};ua.exports=tn;tn.prototype.request=function(s,t,e,r){let n=this,o=null,a=Array.isArray(s)&&typeof t=="function";if(this.options.version===1&&a)throw new TypeError("JSON-RPC 1.0 does not support batching");if(a||!a&&s&&typeof s=="object"&&typeof t=="function")r=t,o=s;else{typeof e=="function"&&(r=e,e=void 0);let b=typeof r=="function";try{o=vu(s,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(k){if(b)return r(k);throw k}if(!b)return o}let h;try{h=JSON.stringify(o,this.options.replacer)}catch(b){return r(b)}return this.callServer(h,function(b,k){n._parseResponse(b,k,r)}),o};tn.prototype._parseResponse=function(s,t,e){if(s){e(s);return}if(!t)return e();let r;try{r=JSON.parse(t,this.options.reviver)}catch(n){return e(n)}if(e.length===3)if(Array.isArray(r)){let n=function(a){return typeof a.error<"u"},o=function(a){return!n(a)};return e(null,r.filter(n),r.filter(o))}else return e(null,r.error,r.result);e(null,r)}});W();q();hc();W();q();var yc=Ue(di(),1);var he=BigInt(0),et=BigInt(1),Xe=BigInt(2),gc=BigInt(8),gi=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),wt=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:gi,n:gi,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")});var ki=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),Ur=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),_h=BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),mc=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),wc=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),bc=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),vc=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),Q=class{constructor(t,e,r,n){this.x=t,this.y=e,this.z=r,this.t=n}static fromAffine(t){if(!(t instanceof mt))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(mt.ZERO)?Q.ZERO:new Q(t.x,t.y,et,L(t.x*t.y))}static toAffineBatch(t){let e=Ic(t.map(r=>r.z));return t.map((r,n)=>r.toAffine(e[n]))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){wi(t);let{x:e,y:r,z:n}=this,{x:o,y:a,z:f}=t,h=L(e*f),b=L(o*n),k=L(r*f),I=L(a*n);return h===b&&k===I}negate(){return new Q(L(-this.x),this.y,this.z,L(-this.t))}double(){let{x:t,y:e,z:r}=this,{a:n}=wt,o=L(t*t),a=L(e*e),f=L(Xe*L(r*r)),h=L(n*o),b=t+e,k=L(L(b*b)-o-a),I=h+a,_=I-f,A=h-a,E=L(k*_),R=L(I*A),T=L(k*A),O=L(_*I);return new Q(E,R,O,T)}add(t){wi(t);let{x:e,y:r,z:n,t:o}=this,{x:a,y:f,z:h,t:b}=t,k=L((r-e)*(f+a)),I=L((r+e)*(f-a)),_=L(I-k);if(_===he)return this.double();let A=L(n*Xe*b),E=L(o*Xe*h),R=E+A,T=I+k,O=E-A,G=L(R*_),tt=L(T*O),j=L(R*O),At=L(_*T);return new Q(G,tt,At,j)}subtract(t){return this.add(t.negate())}precomputeWindow(t){let e=1+256/t,r=[],n=this,o=n;for(let a=0;a<e;a++){o=n,r.push(o);for(let f=1;f<2**(t-1);f++)o=o.add(n),r.push(o);n=o.double()}return r}wNAF(t,e){!e&&this.equals(Q.BASE)&&(e=mt.BASE);let r=e&&e._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=e&&Vs.get(e);n||(n=this.precomputeWindow(r),e&&r!==1&&(n=Q.normalizeZ(n),Vs.set(e,n)));let o=Q.ZERO,a=Q.BASE,f=1+256/r,h=2**(r-1),b=BigInt(2**r-1),k=2**r,I=BigInt(r);for(let _=0;_<f;_++){let A=_*h,E=Number(t&b);t>>=I,E>h&&(E-=k,t+=et);let R=A,T=A+Math.abs(E)-1,O=_%2!==0,G=E<0;E===0?a=a.add(mi(O,n[R])):o=o.add(mi(G,n[T]))}return Q.normalizeZ([o,a])[0]}multiply(t,e){return this.wNAF(vn(t,wt.l),e)}multiplyUnsafe(t){let e=vn(t,wt.l,!1),r=Q.BASE,n=Q.ZERO;if(e===he)return n;if(this.equals(n)||e===et)return this;if(this.equals(r))return this.wNAF(e);let o=n,a=this;for(;e>he;)e&et&&(o=o.add(a)),a=a.double(),e>>=et;return o}isSmallOrder(){return this.multiplyUnsafe(wt.h).equals(Q.ZERO)}isTorsionFree(){let t=this.multiplyUnsafe(wt.l/Xe).double();return wt.l%Xe&&(t=t.add(this)),t.equals(Q.ZERO)}toAffine(t){let{x:e,y:r,z:n}=this,o=this.equals(Q.ZERO);t==null&&(t=o?gc:Sn(n));let a=L(e*t),f=L(r*t),h=L(n*t);if(o)return mt.ZERO;if(h!==et)throw new Error("invZ was invalid");return new mt(a,f)}fromRistrettoBytes(){Hs()}toRistrettoBytes(){Hs()}fromRistrettoHash(){Hs()}};Q.BASE=new Q(wt.Gx,wt.Gy,et,L(wt.Gx*wt.Gy));Q.ZERO=new Q(he,et,et,he);function mi(s,t){let e=t.negate();return s?e:t}function wi(s){if(!(s instanceof Q))throw new TypeError("ExtendedPoint expected")}function Ds(s){if(!(s instanceof xe))throw new TypeError("RistrettoPoint expected")}function Hs(){throw new Error("Legacy method: switch to RistrettoPoint")}var xe=class{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){let{d:e}=wt,r=L(Ur*t*t),n=L((r+et)*bc),o=BigInt(-1),a=L((o-e*r)*L(r+e)),{isValid:f,value:h}=Gs(n,a),b=L(h*t);Ye(b)||(b=L(-b)),f||(h=b),f||(o=r);let k=L(o*(r-et)*vc-a),I=h*h,_=L((h+h)*a),A=L(k*mc),E=L(et-I),R=L(et+I);return new Q(L(_*R),L(E*A),L(A*R),L(_*E))}static hashToCurve(t){t=Je(t,64);let e=Fs(t.slice(0,32)),r=this.calcElligatorRistrettoMap(e),n=Fs(t.slice(32,64)),o=this.calcElligatorRistrettoMap(n);return new xe(r.add(o))}static fromHex(t){t=Je(t,32);let{a:e,d:r}=wt,n="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",o=Fs(t);if(!Bc(qr(o),t)||Ye(o))throw new Error(n);let a=L(o*o),f=L(et+e*a),h=L(et-e*a),b=L(f*f),k=L(h*h),I=L(e*r*b-k),{isValid:_,value:A}=vi(L(I*k)),E=L(A*h),R=L(A*E*I),T=L((o+o)*E);Ye(T)&&(T=L(-T));let O=L(f*R),G=L(T*O);if(!_||Ye(G)||O===he)throw new Error(n);return new xe(new Q(T,O,et,G))}toRawBytes(){let{x:t,y:e,z:r,t:n}=this.ep,o=L(L(r+e)*L(r-e)),a=L(t*e),f=L(a*a),{value:h}=vi(L(o*f)),b=L(h*o),k=L(h*a),I=L(b*k*n),_;if(Ye(n*I)){let E=L(e*Ur),R=L(t*Ur);t=E,e=R,_=L(b*wc)}else _=k;Ye(t*I)&&(e=L(-e));let A=L((r-e)*_);return Ye(A)&&(A=L(-A)),qr(A)}toHex(){return Dr(this.toRawBytes())}toString(){return this.toHex()}equals(t){Ds(t);let e=this.ep,r=t.ep,n=L(e.x*r.y)===L(e.y*r.x),o=L(e.y*r.y)===L(e.x*r.x);return n||o}add(t){return Ds(t),new xe(this.ep.add(t.ep))}subtract(t){return Ds(t),new xe(this.ep.subtract(t.ep))}multiply(t){return new xe(this.ep.multiply(t))}multiplyUnsafe(t){return new xe(this.ep.multiplyUnsafe(t))}};xe.BASE=new xe(Q.BASE);xe.ZERO=new xe(Q.ZERO);var Vs=new WeakMap,mt=class{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,Vs.delete(this)}static fromHex(t,e=!0){let{d:r,P:n}=wt;t=Je(t,32);let o=t.slice();o[31]=t[31]&-129;let a=Hr(o);if(e&&a>=n)throw new Error("Expected 0 < hex < P");if(!e&&a>=ki)throw new Error("Expected 0 < hex < 2**256");let f=L(a*a),h=L(f-et),b=L(r*f+et),{isValid:k,value:I}=Gs(h,b);if(!k)throw new Error("Point.fromHex: invalid y coordinate");let _=(I&et)===et;return(t[31]&128)!==0!==_&&(I=L(-I)),new mt(I,a)}static async fromPrivateKey(t){return(await Bi(t)).point}toRawBytes(){let t=qr(this.y);return t[31]|=this.x&et?128:0,t}toHex(){return Dr(this.toRawBytes())}toX25519(){let{y:t}=this,e=L((et+t)*Sn(et-t));return qr(e)}isTorsionFree(){return Q.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new mt(L(-this.x),this.y)}add(t){return Q.fromAffine(this).add(Q.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return Q.fromAffine(this).multiply(t,this).toAffine()}};mt.BASE=new mt(wt.Gx,wt.Gy);mt.ZERO=new mt(he,et);var pr=class{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromHex(t){let e=Je(t,64),r=mt.fromHex(e.slice(0,32),!1),n=Hr(e.slice(32,64));return new pr(r,n)}assertValidity(){let{r:t,s:e}=this;if(!(t instanceof mt))throw new Error("Expected Point instance");return vn(e,wt.l,!1),this}toRawBytes(){let t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(qr(this.s),32),t}toHex(){return Dr(this.toRawBytes())}};function bi(...s){if(!s.every(r=>r instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(s.length===1)return s[0];let t=s.reduce((r,n)=>r+n.length,0),e=new Uint8Array(t);for(let r=0,n=0;r<s.length;r++){let o=s[r];e.set(o,n),n+=o.length}return e}var kc=Array.from({length:256},(s,t)=>t.toString(16).padStart(2,"0"));function Dr(s){if(!(s instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let e=0;e<s.length;e++)t+=kc[s[e]];return t}function $s(s){if(typeof s!="string")throw new TypeError("hexToBytes: expected string, got "+typeof s);if(s.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(s.length/2);for(let e=0;e<t.length;e++){let r=e*2,n=s.slice(r,r+2),o=Number.parseInt(n,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[e]=o}return t}function Si(s){let e=s.toString(16).padStart(64,"0");return $s(e)}function qr(s){return Si(s).reverse()}function Ye(s){return(L(s)&et)===et}function Hr(s){if(!(s instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+Dr(Uint8Array.from(s).reverse()))}var Sc=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Fs(s){return L(Hr(s)&Sc)}function L(s,t=wt.P){let e=s%t;return e>=he?e:t+e}function Sn(s,t=wt.P){if(s===he||t<=he)throw new Error(`invert: expected positive integers, got n=${s} mod=${t}`);let e=L(s,t),r=t,n=he,o=et,a=et,f=he;for(;e!==he;){let b=r/e,k=r%e,I=n-a*b,_=o-f*b;r=e,e=k,n=a,o=f,a=I,f=_}if(r!==et)throw new Error("invert: does not exist");return L(n,t)}function Ic(s,t=wt.P){let e=new Array(s.length),r=s.reduce((o,a,f)=>a===he?o:(e[f]=o,L(o*a,t)),et),n=Sn(r,t);return s.reduceRight((o,a,f)=>a===he?o:(e[f]=L(o*e[f],t),L(o*a,t)),n),e}function We(s,t){let{P:e}=wt,r=s;for(;t-- >he;)r*=r,r%=e;return r}function Ac(s){let{P:t}=wt,e=BigInt(5),r=BigInt(10),n=BigInt(20),o=BigInt(40),a=BigInt(80),h=s*s%t*s%t,b=We(h,Xe)*h%t,k=We(b,et)*s%t,I=We(k,e)*k%t,_=We(I,r)*I%t,A=We(_,n)*_%t,E=We(A,o)*A%t,R=We(E,a)*E%t,T=We(R,a)*E%t,O=We(T,r)*I%t;return{pow_p_5_8:We(O,Xe)*s%t,b2:h}}function Gs(s,t){let e=L(t*t*t),r=L(e*e*t),n=Ac(s*r).pow_p_5_8,o=L(s*e*n),a=L(t*o*o),f=o,h=L(o*Ur),b=a===s,k=a===L(-s),I=a===L(-s*Ur);return b&&(o=f),(k||I)&&(o=h),Ye(o)&&(o=L(-o)),{isValid:b||k,value:o}}function vi(s){return Gs(et,s)}function bn(s){return L(Hr(s),wt.l)}function Bc(s,t){if(s.length!==t.length)return!1;for(let e=0;e<s.length;e++)if(s[e]!==t[e])return!1;return!0}function Je(s,t){let e=s instanceof Uint8Array?Uint8Array.from(s):$s(s);if(typeof t=="number"&&e.length!==t)throw new Error(`Expected ${t} bytes`);return e}function vn(s,t,e=!0){if(!t)throw new TypeError("Specify max value");if(typeof s=="number"&&Number.isSafeInteger(s)&&(s=BigInt(s)),typeof s=="bigint"&&s<t){if(e){if(he<s)return s}else if(he<=s)return s}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function xc(s){return s[0]&=248,s[31]&=127,s[31]|=64,s}function Ii(s){if(s=typeof s=="bigint"||typeof s=="number"?Si(vn(s,ki)):Je(s),s.length!==32)throw new Error("Expected 32 bytes");return s}function Ai(s){let t=xc(s.slice(0,32)),e=s.slice(32,64),r=bn(t),n=mt.BASE.multiply(r),o=n.toRawBytes();return{head:t,prefix:e,scalar:r,point:n,pointBytes:o}}var Wr;function kn(...s){if(typeof Wr!="function")throw new Error("utils.sha512Sync must be set to use sync methods");return Wr(...s)}async function Bi(s){return Ai(await Qe.sha512(Ii(s)))}function js(s){return Ai(kn(Ii(s)))}function _c(s){return js(s).pointBytes}function Ec(s,t){s=Je(s);let{prefix:e,scalar:r,pointBytes:n}=js(t),o=bn(kn(e,s)),a=mt.BASE.multiply(o),f=bn(kn(a.toRawBytes(),n,s)),h=L(o+f*r,wt.l);return new pr(a,h).toRawBytes()}function Rc(s,t,e){t=Je(t),e instanceof mt||(e=mt.fromHex(e,!1));let{r,s:n}=s instanceof pr?s.assertValidity():pr.fromHex(s),o=Q.BASE.multiplyUnsafe(n);return{r,s:n,SB:o,pub:e,msg:t}}function Lc(s,t,e,r){let n=bn(r),o=Q.fromAffine(s).multiplyUnsafe(n);return Q.fromAffine(t).add(o).subtract(e).multiplyUnsafe(wt.h).equals(Q.ZERO)}function Mc(s,t,e){let{r,SB:n,msg:o,pub:a}=Rc(s,t,e),f=kn(r.toRawBytes(),a.toRawBytes(),o);return Lc(a,r,n,f)}var In={getExtendedPublicKey:js,getPublicKey:_c,sign:Ec,verify:Mc};mt.BASE._setWindowSize(8);var Ze={node:yc,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Qe={bytesToHex:Dr,hexToBytes:$s,concatBytes:bi,getExtendedPublicKey:Bi,mod:L,invert:Sn,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:s=>{if(s=Je(s),s.length<40||s.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return L(Hr(s),wt.l-et)+et},randomBytes:(s=32)=>{if(Ze.web)return Ze.web.getRandomValues(new Uint8Array(s));if(Ze.node){let{randomBytes:t}=Ze.node;return new Uint8Array(t(s).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Qe.randomBytes(32),sha512:async(...s)=>{let t=bi(...s);if(Ze.web){let e=await Ze.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}else{if(Ze.node)return Uint8Array.from(Ze.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(s=8,t=mt.BASE){let e=t.equals(mt.BASE)?t:new mt(t.x,t.y);return e._setWindowSize(s),e.multiply(Xe),e},sha512Sync:void 0};Object.defineProperties(Qe,{sha512Sync:{configurable:!1,get(){return Wr},set(s){Wr||(Wr=s)}}});var Oo=Ue(_i()),le=Ue(Mi());var Kr=Ue(dc()),g=Ue(Qs()),Ya=Ue(Qs()),mn=Ue(pc());W();q();var to=class extends TypeError{constructor(t,e){let r,{message:n,...o}=t,{path:a}=t,f=a.length===0?n:"At path: "+a.join(".")+" -- "+n;super(f),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>{var h;return(h=r)!=null?h:r=[t,...e()]}}};function Nc(s){return er(s)&&typeof s[Symbol.iterator]=="function"}function er(s){return typeof s=="object"&&s!=null}function ze(s){return typeof s=="string"?JSON.stringify(s):""+s}function Kc(s){let{done:t,value:e}=s.next();return t?void 0:e}function Uc(s,t,e,r){if(s===!0)return;s===!1?s={}:typeof s=="string"&&(s={message:s});let{path:n,branch:o}=t,{type:a}=e,{refinement:f,message:h="Expected a value of type `"+a+"`"+(f?" with refinement `"+f+"`":"")+", but received: `"+ze(r)+"`"}=s;return{value:r,type:a,refinement:f,key:n[n.length-1],path:n,branch:o,...s,message:h}}function*Ti(s,t,e,r){Nc(s)||(s=[s]);for(let n of s){let o=Uc(n,t,e,r);o&&(yield o)}}function*eo(s,t,e={}){let{path:r=[],branch:n=[s],coerce:o=!1,mask:a=!1}=e,f={path:r,branch:n};if(o&&(s=t.coercer(s,f),a&&t.type!=="type"&&er(t.schema)&&er(s)&&!Array.isArray(s)))for(let b in s)t.schema[b]===void 0&&delete s[b];let h=!0;for(let b of t.validator(s,f))h=!1,yield[b,void 0];for(let[b,k,I]of t.entries(s,f)){let _=eo(k,I,{path:b===void 0?r:[...r,b],branch:b===void 0?n:[...n,k],coerce:o,mask:a});for(let A of _)A[0]?(h=!1,yield[A[0],void 0]):o&&(k=A[1],b===void 0?s=k:s instanceof Map?s.set(b,k):s instanceof Set?s.add(k):er(s)&&(s[b]=k))}if(h)for(let b of t.refiner(s,f))h=!1,yield[b,void 0];h&&(yield[void 0,s])}var Te=class{constructor(t){let{type:e,schema:r,validator:n,refiner:o,coercer:a=h=>h,entries:f=function*(){}}=t;this.type=e,this.schema=r,this.entries=f,this.coercer=a,n?this.validator=(h,b)=>{let k=n(h,b);return Ti(k,b,this,h)}:this.validator=()=>[],o?this.refiner=(h,b)=>{let k=o(h,b);return Ti(k,b,this,h)}:this.refiner=()=>[]}assert(t){return ro(t,this)}create(t){return z(t,this)}is(t){return Pi(t,this)}mask(t){return Wc(t,this)}validate(t,e={}){return Zr(t,this,e)}};function ro(s,t){let e=Zr(s,t);if(e[0])throw e[0]}function z(s,t){let e=Zr(s,t,{coerce:!0});if(e[0])throw e[0];return e[1]}function Wc(s,t){let e=Zr(s,t,{coerce:!0,mask:!0});if(e[0])throw e[0];return e[1]}function Pi(s,t){return!Zr(s,t)[0]}function Zr(s,t,e={}){let r=eo(s,t,e),n=Kc(r);return n[0]?[new to(n[0],function*(){for(let a of r)a[0]&&(yield a[0])}),void 0]:[void 0,n[1]]}function yr(s,t){return new Te({type:s,schema:null,validator:t})}function Ci(){return yr("any",()=>!0)}function K(s){return new Te({type:"array",schema:s,*entries(t){if(s&&Array.isArray(t))for(let[e,r]of t.entries())yield[e,r,s]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+ze(t)}})}function qe(){return yr("boolean",s=>typeof s=="boolean")}function Fn(s){return yr("instance",t=>t instanceof s||"Expected a `"+s.name+"` instance, but received: "+ze(t))}function It(s){let t=ze(s),e=typeof s;return new Te({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?s:null,validator(r){return r===s||"Expected the literal `"+t+"`, but received: "+ze(r)}})}function qc(){return yr("never",()=>!1)}function V(s){return new Te({...s,validator:(t,e)=>t===null||s.validator(t,e),refiner:(t,e)=>t===null||s.refiner(t,e)})}function x(){return yr("number",s=>typeof s=="number"&&!isNaN(s)||"Expected a number, but received: "+ze(s))}function Y(s){return new Te({...s,validator:(t,e)=>t===void 0||s.validator(t,e),refiner:(t,e)=>t===void 0||s.refiner(t,e)})}function no(s,t){return new Te({type:"record",schema:null,*entries(e){if(er(e))for(let r in e){let n=e[r];yield[r,r,s],yield[r,n,t]}},validator(e){return er(e)||"Expected an object, but received: "+ze(e)}})}function C(){return yr("string",s=>typeof s=="string"||"Expected a string, but received: "+ze(s))}function Vn(s){let t=qc();return new Te({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){let r=Math.max(s.length,e.length);for(let n=0;n<r;n++)yield[n,e[n],s[n]||t]}},validator(e){return Array.isArray(e)||"Expected an array, but received: "+ze(e)}})}function M(s){let t=Object.keys(s);return new Te({type:"type",schema:s,*entries(e){if(er(e))for(let r of t)yield[r,e[r],s[r]]},validator(e){return er(e)||"Expected an object, but received: "+ze(e)}})}function Ae(s){let t=s.map(e=>e.type).join(" | ");return new Te({type:"union",schema:null,validator(e,r){let n=[];for(let o of s){let[...a]=eo(e,o,r),[f]=a;if(f[0])for(let[h]of a)h&&n.push(h);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+ze(e),...n]}})}function xr(){return yr("unknown",()=>!0)}function _r(s,t,e){return new Te({...s,coercer:(r,n)=>Pi(r,t)?s.coercer(e(r,n),n):s.coercer(r,n)})}var Xa=Ue(Wi()),Ja=Ue(fa());W();q();var ku=Ue(di(),1);var rt=BigInt(0),bt=BigInt(1),ir=BigInt(2),rn=BigInt(3),ha=BigInt(8),xt=Object.freeze({a:rt,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:bt,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),la=(s,t)=>(s+t/ir)/t,Jn={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(s){let{n:t}=xt,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-bt*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=e,a=BigInt("0x100000000000000000000000000000000"),f=la(o*s,t),h=la(-r*s,t),b=N(s-f*e-h*n,t),k=N(-f*r-h*o,t),I=b>a,_=k>a;if(I&&(b=t-b),_&&(k=t-k),b>a||k>a)throw new Error("splitScalarEndo: Endomorphism failed, k="+s);return{k1neg:I,k1:b,k2neg:_,k2:k}}},Ne=32,Tr=32,Su=32,da=Ne+1,pa=2*Ne+1;function ya(s){let{a:t,b:e}=xt,r=N(s*s),n=N(r*s);return N(n+t*s+e)}var Qn=xt.a===rt,rs=class extends Error{constructor(t){super(t)}};function ga(s){if(!(s instanceof nt))throw new TypeError("JacobianPoint expected")}var nt=class{constructor(t,e,r){this.x=t,this.y=e,this.z=r}static fromAffine(t){if(!(t instanceof vt))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(vt.ZERO)?nt.ZERO:new nt(t.x,t.y,bt)}static toAffineBatch(t){let e=_u(t.map(r=>r.z));return t.map((r,n)=>r.toAffine(e[n]))}static normalizeZ(t){return nt.toAffineBatch(t).map(nt.fromAffine)}equals(t){ga(t);let{x:e,y:r,z:n}=this,{x:o,y:a,z:f}=t,h=N(n*n),b=N(f*f),k=N(e*b),I=N(o*h),_=N(N(r*f)*b),A=N(N(a*n)*h);return k===I&&_===A}negate(){return new nt(this.x,N(-this.y),this.z)}double(){let{x:t,y:e,z:r}=this,n=N(t*t),o=N(e*e),a=N(o*o),f=t+o,h=N(ir*(N(f*f)-n-a)),b=N(rn*n),k=N(b*b),I=N(k-ir*h),_=N(b*(h-I)-ha*a),A=N(ir*e*r);return new nt(I,_,A)}add(t){ga(t);let{x:e,y:r,z:n}=this,{x:o,y:a,z:f}=t;if(o===rt||a===rt)return this;if(e===rt||r===rt)return t;let h=N(n*n),b=N(f*f),k=N(e*b),I=N(o*h),_=N(N(r*f)*b),A=N(N(a*n)*h),E=N(I-k),R=N(A-_);if(E===rt)return R===rt?this.double():nt.ZERO;let T=N(E*E),O=N(E*T),G=N(k*T),tt=N(R*R-O-ir*G),j=N(R*(G-tt)-_*O),At=N(n*f*E);return new nt(tt,j,At)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){let e=nt.ZERO;if(typeof t=="bigint"&&t===rt)return e;let r=ba(t);if(r===bt)return this;if(!Qn){let I=e,_=this;for(;r>rt;)r&bt&&(I=I.add(_)),_=_.double(),r>>=bt;return I}let{k1neg:n,k1:o,k2neg:a,k2:f}=Jn.splitScalar(r),h=e,b=e,k=this;for(;o>rt||f>rt;)o&bt&&(h=h.add(k)),f&bt&&(b=b.add(k)),k=k.double(),o>>=bt,f>>=bt;return n&&(h=h.negate()),a&&(b=b.negate()),b=new nt(N(b.x*Jn.beta),b.y,b.z),h.add(b)}precomputeWindow(t){let e=Qn?128/t+1:256/t+1,r=[],n=this,o=n;for(let a=0;a<e;a++){o=n,r.push(o);for(let f=1;f<2**(t-1);f++)o=o.add(n),r.push(o);n=o.double()}return r}wNAF(t,e){!e&&this.equals(nt.BASE)&&(e=vt.BASE);let r=e&&e._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=e&&Io.get(e);n||(n=this.precomputeWindow(r),e&&r!==1&&(n=nt.normalizeZ(n),Io.set(e,n)));let o=nt.ZERO,a=nt.BASE,f=1+(Qn?128/r:256/r),h=2**(r-1),b=BigInt(2**r-1),k=2**r,I=BigInt(r);for(let _=0;_<f;_++){let A=_*h,E=Number(t&b);t>>=I,E>h&&(E-=k,t+=bt);let R=A,T=A+Math.abs(E)-1,O=_%2!==0,G=E<0;E===0?a=a.add(ts(O,n[R])):o=o.add(ts(G,n[T]))}return{p:o,f:a}}multiply(t,e){let r=ba(t),n,o;if(Qn){let{k1neg:a,k1:f,k2neg:h,k2:b}=Jn.splitScalar(r),{p:k,f:I}=this.wNAF(f,e),{p:_,f:A}=this.wNAF(b,e);k=ts(a,k),_=ts(h,_),_=new nt(N(_.x*Jn.beta),_.y,_.z),n=k.add(_),o=I.add(A)}else{let{p:a,f}=this.wNAF(r,e);n=a,o=f}return nt.normalizeZ([n,o])[0]}toAffine(t){let{x:e,y:r,z:n}=this,o=this.equals(nt.ZERO);t==null&&(t=o?ha:an(n));let a=t,f=N(a*a),h=N(f*a),b=N(e*f),k=N(r*h),I=N(n*a);if(o)return vt.ZERO;if(I!==bt)throw new Error("invZ was invalid");return new vt(b,k)}};nt.BASE=new nt(xt.Gx,xt.Gy,bt);nt.ZERO=new nt(rt,bt,rt);function ts(s,t){let e=t.negate();return s?e:t}var Io=new WeakMap,vt=class{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,Io.delete(this)}hasEvenY(){return this.y%ir===rt}static fromCompressedHex(t){let e=t.length===32,r=ar(e?t:t.subarray(1));if(!So(r))throw new Error("Point is not on curve");let n=ya(r),o=xu(n),a=(o&bt)===bt;e?a&&(o=N(-o)):(t[0]&1)===1!==a&&(o=N(-o));let f=new vt(r,o);return f.assertValidity(),f}static fromUncompressedHex(t){let e=ar(t.subarray(1,Ne+1)),r=ar(t.subarray(Ne+1,Ne*2+1)),n=new vt(e,r);return n.assertValidity(),n}static fromHex(t){let e=sn(t),r=e.length,n=e[0];if(r===Ne)return this.fromCompressedHex(e);if(r===da&&(n===2||n===3))return this.fromCompressedHex(e);if(r===pa&&n===4)return this.fromUncompressedHex(e);throw new Error(`Point.fromHex: received invalid point. Expected 32-${da} compressed bytes or ${pa} uncompressed bytes, not ${r}`)}static fromPrivateKey(t){return vt.BASE.multiply(ss(t))}static fromSignature(t,e,r){let{r:n,s:o}=Lu(e);if(![0,1,2,3].includes(r))throw new Error("Cannot recover: invalid recovery bit");let a=va(sn(t)),{n:f}=xt,h=r===2||r===3?n+f:n,b=an(h,f),k=N(-a*b,f),I=N(o*b,f),_=r&1?"03":"02",A=vt.fromHex(_+Lr(h)),E=vt.BASE.multiplyAndAddUnsafe(A,k,I);if(!E)throw new Error("Cannot recover signature: point at infinify");return E.assertValidity(),E}toRawBytes(t=!1){return gr(this.toHex(t))}toHex(t=!1){let e=Lr(this.x);return t?`${this.hasEvenY()?"02":"03"}${e}`:`04${e}${Lr(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let t="Point is not on elliptic curve",{x:e,y:r}=this;if(!So(e)||!So(r))throw new Error(t);let n=N(r*r),o=ya(e);if(N(n-o)!==rt)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new vt(this.x,N(-this.y))}double(){return nt.fromAffine(this).double().toAffine()}add(t){return nt.fromAffine(this).add(nt.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return nt.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,e,r){let n=nt.fromAffine(this),o=e===rt||e===bt||this!==vt.BASE?n.multiplyUnsafe(e):n.multiply(e),a=nt.fromAffine(t).multiplyUnsafe(r),f=o.add(a);return f.equals(nt.ZERO)?void 0:f.toAffine()}};vt.BASE=new vt(xt.Gx,xt.Gy);vt.ZERO=new vt(rt,rt);function ma(s){return Number.parseInt(s[0],16)>=8?"00"+s:s}function wa(s){if(s.length<2||s[0]!==2)throw new Error(`Invalid signature integer tag: ${Pr(s)}`);let t=s[1],e=s.subarray(2,t+2);if(!t||e.length!==t)throw new Error("Invalid signature integer: wrong length");if(e[0]===0&&e[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:ar(e),left:s.subarray(t+2)}}function Iu(s){if(s.length<2||s[0]!=48)throw new Error(`Invalid signature tag: ${Pr(s)}`);if(s[1]!==s.length-2)throw new Error("Invalid signature: incorrect length");let{data:t,left:e}=wa(s.subarray(2)),{data:r,left:n}=wa(e);if(n.length)throw new Error(`Invalid signature: left bytes after parsing: ${Pr(n)}`);return{r:t,s:r}}var He=class{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromCompact(t){let e=t instanceof Uint8Array,r="Signature.fromCompact";if(typeof t!="string"&&!e)throw new TypeError(`${r}: Expected string or Uint8Array`);let n=e?Pr(t):t;if(n.length!==128)throw new Error(`${r}: Expected 64-byte hex`);return new He(ns(n.slice(0,64)),ns(n.slice(64,128)))}static fromDER(t){let e=t instanceof Uint8Array;if(typeof t!="string"&&!e)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r,s:n}=Iu(e?t:gr(t));return new He(r,n)}static fromHex(t){return this.fromDER(t)}assertValidity(){let{r:t,s:e}=this;if(!on(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!on(e))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let t=xt.n>>bt;return this.s>t}normalizeS(){return this.hasHighS()?new He(this.r,N(-this.s,xt.n)):this}toDERRawBytes(){return gr(this.toDERHex())}toDERHex(){let t=ma(en(this.s)),e=ma(en(this.r)),r=t.length/2,n=e.length/2,o=en(r),a=en(n);return`30${en(n+r+4)}02${a}${e}02${o}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return gr(this.toCompactHex())}toCompactHex(){return Lr(this.r)+Lr(this.s)}};function or(...s){if(!s.every(r=>r instanceof Uint8Array))throw new Error("Uint8Array list expected");if(s.length===1)return s[0];let t=s.reduce((r,n)=>r+n.length,0),e=new Uint8Array(t);for(let r=0,n=0;r<s.length;r++){let o=s[r];e.set(o,n),n+=o.length}return e}var Au=Array.from({length:256},(s,t)=>t.toString(16).padStart(2,"0"));function Pr(s){if(!(s instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let e=0;e<s.length;e++)t+=Au[s[e]];return t}var Bu=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Lr(s){if(typeof s!="bigint")throw new Error("Expected bigint");if(!(rt<=s&&s<Bu))throw new Error("Expected number 0 <= n < 2^256");return s.toString(16).padStart(64,"0")}function Ao(s){let t=gr(Lr(s));if(t.length!==32)throw new Error("Error: expected 32 bytes");return t}function en(s){let t=s.toString(16);return t.length&1?`0${t}`:t}function ns(s){if(typeof s!="string")throw new TypeError("hexToNumber: expected string, got "+typeof s);return BigInt(`0x${s}`)}function gr(s){if(typeof s!="string")throw new TypeError("hexToBytes: expected string, got "+typeof s);if(s.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+s.length);let t=new Uint8Array(s.length/2);for(let e=0;e<t.length;e++){let r=e*2,n=s.slice(r,r+2),o=Number.parseInt(n,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[e]=o}return t}function ar(s){return ns(Pr(s))}function sn(s){return s instanceof Uint8Array?Uint8Array.from(s):gr(s)}function ba(s){if(typeof s=="number"&&Number.isSafeInteger(s)&&s>0)return BigInt(s);if(typeof s=="bigint"&&on(s))return s;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function N(s,t=xt.P){let e=s%t;return e>=rt?e:t+e}function Pe(s,t){let{P:e}=xt,r=s;for(;t-- >rt;)r*=r,r%=e;return r}function xu(s){let{P:t}=xt,e=BigInt(6),r=BigInt(11),n=BigInt(22),o=BigInt(23),a=BigInt(44),f=BigInt(88),h=s*s*s%t,b=h*h*s%t,k=Pe(b,rn)*b%t,I=Pe(k,rn)*b%t,_=Pe(I,ir)*h%t,A=Pe(_,r)*_%t,E=Pe(A,n)*A%t,R=Pe(E,a)*E%t,T=Pe(R,f)*R%t,O=Pe(T,a)*E%t,G=Pe(O,rn)*b%t,tt=Pe(G,o)*A%t,j=Pe(tt,e)*h%t,At=Pe(j,ir);if(At*At%t!==s)throw new Error("Cannot find square root");return At}function an(s,t=xt.P){if(s===rt||t<=rt)throw new Error(`invert: expected positive integers, got n=${s} mod=${t}`);let e=N(s,t),r=t,n=rt,o=bt,a=bt,f=rt;for(;e!==rt;){let b=r/e,k=r%e,I=n-a*b,_=o-f*b;r=e,e=k,n=a,o=f,a=I,f=_}if(r!==bt)throw new Error("invert: does not exist");return N(n,t)}function _u(s,t=xt.P){let e=new Array(s.length),r=s.reduce((o,a,f)=>a===rt?o:(e[f]=o,N(o*a,t)),bt),n=an(r,t);return s.reduceRight((o,a,f)=>a===rt?o:(e[f]=N(o*e[f],t),N(o*a,t)),n),e}function Eu(s){let t=s.length*8-Tr*8,e=ar(s);return t>0?e>>BigInt(t):e}function va(s,t=!1){let e=Eu(s);if(t)return e;let{n:r}=xt;return e>=r?e-r:e}var Mr,nn,Bo=class{constructor(t,e){if(this.hashLen=t,this.qByteLen=e,typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(t).fill(1),this.k=new Uint8Array(t).fill(0),this.counter=0}hmac(...t){return De.hmacSha256(this.k,...t)}hmacSync(...t){return nn(this.k,...t)}checkSync(){if(typeof nn!="function")throw new rs("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(t=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),t.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(t=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),t.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){this.incr();let t=0,e=[];for(;t<this.qByteLen;){this.v=await this.hmac(this.v);let r=this.v.slice();e.push(r),t+=this.v.length}return or(...e)}generateSync(){this.checkSync(),this.incr();let t=0,e=[];for(;t<this.qByteLen;){this.v=this.hmacSync(this.v);let r=this.v.slice();e.push(r),t+=this.v.length}return or(...e)}};function on(s){return rt<s&&s<xt.n}function So(s){return rt<s&&s<xt.P}function Ru(s,t,e,r=!0){let{n}=xt,o=va(s,!0);if(!on(o))return;let a=an(o,n),f=vt.BASE.multiply(o),h=N(f.x,n);if(h===rt)return;let b=N(a*N(t+e*h,n),n);if(b===rt)return;let k=new He(h,b),I=(f.x===k.r?0:2)|Number(f.y&bt);return r&&k.hasHighS()&&(k=k.normalizeS(),I^=1),{sig:k,recovery:I}}function ss(s){let t;if(typeof s=="bigint")t=s;else if(typeof s=="number"&&Number.isSafeInteger(s)&&s>0)t=BigInt(s);else if(typeof s=="string"){if(s.length!==2*Tr)throw new Error("Expected 32 bytes of private key");t=ns(s)}else if(s instanceof Uint8Array){if(s.length!==Tr)throw new Error("Expected 32 bytes of private key");t=ar(s)}else throw new TypeError("Expected valid private key");if(!on(t))throw new Error("Expected private key: 0 < key < n");return t}function Lu(s){if(s instanceof He)return s.assertValidity(),s;try{return He.fromDER(s)}catch{return He.fromCompact(s)}}function ka(s,t=!1){return vt.fromPrivateKey(s).toRawBytes(t)}function Sa(s){let t=s.length>Ne?s.slice(0,Ne):s;return ar(t)}function Mu(s){let t=Sa(s),e=N(t,xt.n);return Ia(e<rt?t:e)}function Ia(s){return Ao(s)}function Tu(s,t,e){if(s==null)throw new Error(`sign: expected valid message hash, not "${s}"`);let r=sn(s),n=ss(t),o=[Ia(n),Mu(r)];if(e!=null){e===!0&&(e=De.randomBytes(Ne));let h=sn(e);if(h.length!==Ne)throw new Error(`sign: Expected ${Ne} bytes of extra data`);o.push(h)}let a=or(...o),f=Sa(r);return{seed:a,m:f,d:n}}function Pu(s,t){let{sig:e,recovery:r}=s,{der:n,recovered:o}=Object.assign({canonical:!0,der:!0},t),a=n?e.toDERRawBytes():e.toCompactRawBytes();return o?[a,r]:a}function Aa(s,t,e={}){let{seed:r,m:n,d:o}=Tu(s,t,e.extraEntropy),a=new Bo(Su,Tr);a.reseedSync(r);let f;for(;!(f=Ru(a.generateSync(),n,o,e.canonical));)a.reseedSync();return Pu(f,e)}vt.BASE._setWindowSize(8);var Le={node:ku,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var es={},De={bytesToHex:Pr,hexToBytes:gr,concatBytes:or,mod:N,invert:an,isValidPrivateKey(s){try{return ss(s),!0}catch{return!1}},_bigintTo32Bytes:Ao,_normalizePrivateKey:ss,hashToPrivateKey:s=>{s=sn(s);let t=Tr+8;if(s.length<t||s.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");let e=N(ar(s),xt.n-bt)+bt;return Ao(e)},randomBytes:(s=32)=>{if(Le.web)return Le.web.getRandomValues(new Uint8Array(s));if(Le.node){let{randomBytes:t}=Le.node;return Uint8Array.from(t(s))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>De.hashToPrivateKey(De.randomBytes(Tr+8)),precompute(s=8,t=vt.BASE){let e=t===vt.BASE?t:new vt(t.x,t.y);return e._setWindowSize(s),e.multiply(rn),e},sha256:async(...s)=>{if(Le.web){let t=await Le.web.subtle.digest("SHA-256",or(...s));return new Uint8Array(t)}else if(Le.node){let{createHash:t}=Le.node,e=t("sha256");return s.forEach(r=>e.update(r)),Uint8Array.from(e.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(s,...t)=>{if(Le.web){let e=await Le.web.subtle.importKey("raw",s,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),r=or(...t),n=await Le.web.subtle.sign("HMAC",e,r);return new Uint8Array(n)}else if(Le.node){let{createHmac:e}=Le.node,r=e("sha256",s);return t.forEach(n=>r.update(n)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(s,...t)=>{let e=es[s];if(e===void 0){let r=await De.sha256(Uint8Array.from(s,n=>n.charCodeAt(0)));e=or(r,r),es[s]=e}return De.sha256(e,...t)},taggedHashSync:(s,...t)=>{if(typeof Mr!="function")throw new rs("sha256Sync is undefined, you need to set it");let e=es[s];if(e===void 0){let r=Mr(Uint8Array.from(s,n=>n.charCodeAt(0)));e=or(r,r),es[s]=e}return Mr(e,...t)},_JacobianPoint:nt};Object.defineProperties(De,{sha256Sync:{configurable:!1,get(){return Mr},set(s){Mr||(Mr=s)}},hmacSha256Sync:{configurable:!1,get(){return nn},set(s){nn||(nn=s)}}});Qe.sha512Sync=(...s)=>pi(Qe.concatBytes(...s));var Ou=Qe.randomPrivateKey,Ba=()=>{let s=Qe.randomPrivateKey(),t=as(s),e=new Uint8Array(64);return e.set(s),e.set(t,32),{publicKey:t,secretKey:e}},as=In.getPublicKey;function xa(s){try{return mt.fromHex(s,!0),!0}catch{return!1}}var qo=(s,t)=>In.sign(s,t.slice(0,32)),zu=In.verify,X=s=>$.isBuffer(s)?s:s instanceof Uint8Array?$.from(s.buffer,s.byteOffset,s.byteLength):$.from(s),cs=class{constructor(t){Object.assign(this,t)}encode(){return $.from((0,Kr.serialize)(is,this))}static decode(t){return(0,Kr.deserialize)(is,this,t)}static decodeUnchecked(t){return(0,Kr.deserializeUnchecked)(is,this,t)}},_a=class extends cs{constructor(t){if(super(t),this.enum="",Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(e=>{this.enum=e})}},is=new Map,Nu=32,Ke=32;function Ku(s){return s._bn!==void 0}var Ea=1,P=class extends cs{constructor(t){if(super({}),this._bn=void 0,Ku(t))this._bn=t._bn;else{if(typeof t=="string"){let e=le.default.decode(t);if(e.length!=Ke)throw new Error("Invalid public key input");this._bn=new Oo.default(e)}else this._bn=new Oo.default(t);if(this._bn.byteLength()>32)throw new Error("Invalid public key input")}}static unique(){let t=new P(Ea);return Ea+=1,new P(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return le.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){return this.toBuffer()}toBuffer(){let t=this._bn.toArrayLike($);if(t.length===Ke)return t;let e=$.alloc(32);return t.copy(e,32-t.length),e}toString(){return this.toBase58()}static async createWithSeed(t,e,r){let n=$.concat([t.toBuffer(),$.from(e),r.toBuffer()]),o=wn(n);return new P(o)}static createProgramAddressSync(t,e){let r=$.alloc(0);t.forEach(function(o){if(o.length>Nu)throw new TypeError("Max seed length exceeded");r=$.concat([r,X(o)])}),r=$.concat([r,e.toBuffer(),$.from("ProgramDerivedAddress")]);let n=wn(r);if(xa(n))throw new Error("Invalid seeds, address must fall off the curve");return new P(n)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,n;for(;r!=0;){try{let o=t.concat($.from([r]));n=this.createProgramAddressSync(o,e)}catch(o){if(o instanceof TypeError)throw o;r--;continue}return[n,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){let e=new P(t);return xa(e.toBytes())}};P.default=new P("11111111111111111111111111111111");is.set(P,{kind:"struct",fields:[["_bn","u256"]]});var Ra=class{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){let e=X(t);if(t.length!==64)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=X(Ou()),this._publicKey=X(as(this._secretKey))}get publicKey(){return new P(this._publicKey)}get secretKey(){return $.concat([this._secretKey,this._publicKey],64)}},Cd=new P("BPFLoader1111111111111111111111111111111111"),wr=1280-40-8,Do=127,hn=64,us=class extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}};Object.defineProperty(us.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var fs=class extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}};Object.defineProperty(fs.prototype,"name",{value:"TransactionExpiredTimeoutError"});var Cr=class{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){let t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(let e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");let r=new Map;this.keySegments().flat().forEach((o,a)=>{r.set(o.toBase58(),a)});let n=o=>{let a=r.get(o.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return t.map(o=>({programIdIndex:n(o.programId),accountKeyIndexes:o.keys.map(a=>n(a.pubkey)),data:o.data}))}},J=(s="publicKey")=>g.blob(32,s),Uu=(s="signature")=>g.blob(64,s),mr=(s="string")=>{let t=g.struct([g.u32("length"),g.u32("lengthPadding"),g.blob(g.offset(g.u32(),-8),"chars")],s),e=t.decode.bind(t),r=t.encode.bind(t),n=t;return n.decode=(o,a)=>e(o,a).chars.toString(),n.encode=(o,a,f)=>{let h={chars:$.from(o,"utf8")};return r(h,a,f)},n.alloc=o=>g.u32().span+g.u32().span+$.from(o,"utf8").length,n},Wu=(s="authorized")=>g.struct([J("staker"),J("withdrawer")],s),qu=(s="lockup")=>g.struct([g.ns64("unixTimestamp"),g.ns64("epoch"),J("custodian")],s),Du=(s="voteInit")=>g.struct([J("nodePubkey"),J("authorizedVoter"),J("authorizedWithdrawer"),g.u8("commission")],s),Hu=(s="voteAuthorizeWithSeedArgs")=>g.struct([g.u32("voteAuthorizationType"),J("currentAuthorityDerivedKeyOwnerPubkey"),mr("currentAuthorityDerivedKeySeed"),J("newAuthorized")],s);function Qa(s,t){let e=n=>{if(n.span>=0)return n.span;if(typeof n.alloc=="function")return n.alloc(t[n.property]);if("count"in n&&"elementLayout"in n){let o=t[n.property];if(Array.isArray(o))return o.length*e(n.elementLayout)}else if("fields"in n)return Qa({layout:n},t[n.property]);return 0},r=0;return s.layout.fields.forEach(n=>{r+=e(n)}),r}function Ee(s){let t=0,e=0;for(;;){let r=s.shift();if(t|=(r&127)<<e*7,e+=1,(r&128)===0)break}return t}function Me(s,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){s.push(r);break}else r|=128,s.push(r)}}function at(s,t){if(!s)throw new Error(t||"Assertion failed")}var Or=class{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){let r=new Map,n=a=>{let f=a.toBase58(),h=r.get(f);return h===void 0&&(h={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(f,h)),h},o=n(e);o.isSigner=!0,o.isWritable=!0;for(let a of t){n(a.programId).isInvoked=!0;for(let f of a.keys){let h=n(f.pubkey);h.isSigner||(h.isSigner=f.isSigner),h.isWritable||(h.isWritable=f.isWritable)}}return new Or(e,r)}getMessageComponents(){let t=[...this.keyMetaMap.entries()];at(t.length<=256,"Max static account keys length exceeded");let e=t.filter(([,h])=>h.isSigner&&h.isWritable),r=t.filter(([,h])=>h.isSigner&&!h.isWritable),n=t.filter(([,h])=>!h.isSigner&&h.isWritable),o=t.filter(([,h])=>!h.isSigner&&!h.isWritable),a={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:o.length};{at(e.length>0,"Expected at least one writable signer key");let[h]=e[0];at(h===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}let f=[...e.map(([h])=>new P(h)),...r.map(([h])=>new P(h)),...n.map(([h])=>new P(h)),...o.map(([h])=>new P(h))];return[a,f]}extractTableLookup(t){let[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[n,o]=this.drainKeysFoundInLookupTable(t.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(e.length===0&&n.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:n},{writable:r,readonly:o}]}drainKeysFoundInLookupTable(t,e){let r=new Array,n=new Array;for(let[o,a]of this.keyMetaMap.entries())if(e(a)){let f=new P(o),h=t.findIndex(b=>b.equals(f));h>=0&&(at(h<256,"Max lookup table index exceeded"),r.push(h),n.push(f),this.keyMetaMap.delete(o))}return[r,n]}},Ce=class{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new P(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:le.default.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Cr(this.staticAccountKeys)}static compile(t){let e=Or.compile(t.instructions,t.payerKey),[r,n]=e.getMessageComponents(),a=new Cr(n).compileInstructions(t.instructions).map(f=>({programIdIndex:f.programIdIndex,accounts:f.accountKeyIndexes,data:le.default.encode(f.data)}));return new Ce({header:r,accountKeys:n,recentBlockhash:t.recentBlockhash,instructions:a})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){let e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){let r=t-e,o=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<o}else{let r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){let t=this.accountKeys.length,e=[];Me(e,t);let r=this.instructions.map(I=>{let{accounts:_,programIdIndex:A}=I,E=Array.from(le.default.decode(I.data)),R=[];Me(R,_.length);let T=[];return Me(T,E.length),{programIdIndex:A,keyIndicesCount:$.from(R),keyIndices:_,dataLength:$.from(T),data:E}}),n=[];Me(n,r.length);let o=$.alloc(wr);$.from(n).copy(o);let a=n.length;r.forEach(I=>{let A=g.struct([g.u8("programIdIndex"),g.blob(I.keyIndicesCount.length,"keyIndicesCount"),g.seq(g.u8("keyIndex"),I.keyIndices.length,"keyIndices"),g.blob(I.dataLength.length,"dataLength"),g.seq(g.u8("userdatum"),I.data.length,"data")]).encode(I,o,a);a+=A}),o=o.slice(0,a);let f=g.struct([g.blob(1,"numRequiredSignatures"),g.blob(1,"numReadonlySignedAccounts"),g.blob(1,"numReadonlyUnsignedAccounts"),g.blob(e.length,"keyCount"),g.seq(J("key"),t,"keys"),J("recentBlockhash")]),h={numRequiredSignatures:$.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:$.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:$.from([this.header.numReadonlyUnsignedAccounts]),keyCount:$.from(e),keys:this.accountKeys.map(I=>X(I.toBytes())),recentBlockhash:le.default.decode(this.recentBlockhash)},b=$.alloc(2048),k=f.encode(h,b);return o.copy(b,k),b.slice(0,k+o.length)}static from(t){let e=[...t],r=e.shift();if(r!==(r&Do))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let n=e.shift(),o=e.shift(),a=Ee(e),f=[];for(let _=0;_<a;_++){let A=e.slice(0,Ke);e=e.slice(Ke),f.push(new P($.from(A)))}let h=e.slice(0,Ke);e=e.slice(Ke);let b=Ee(e),k=[];for(let _=0;_<b;_++){let A=e.shift(),E=Ee(e),R=e.slice(0,E);e=e.slice(E);let T=Ee(e),O=e.slice(0,T),G=le.default.encode($.from(O));e=e.slice(T),k.push({programIdIndex:A,accounts:R,data:G})}let I={header:{numRequiredSignatures:r,numReadonlySignedAccounts:n,numReadonlyUnsignedAccounts:o},recentBlockhash:le.default.encode($.from(h)),accountKeys:f,instructions:k};return new Ce(I)}},fr=class{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(let e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Cr(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){let e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){let n=t-r,o=this.addressTableLookups.reduce((a,f)=>a+f.writableIndexes.length,0);return n<o}else if(t>=this.header.numRequiredSignatures){let n=t-e,a=r-e-this.header.numReadonlyUnsignedAccounts;return n<a}else{let n=e-this.header.numReadonlySignedAccounts;return t<n}}resolveAddressTableLookups(t){let e={writable:[],readonly:[]};for(let r of this.addressTableLookups){let n=t.find(o=>o.key.equals(r.accountKey));if(!n)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(let o of r.writableIndexes)if(o<n.state.addresses.length)e.writable.push(n.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${r.accountKey.toBase58()}`);for(let o of r.readonlyIndexes)if(o<n.state.addresses.length)e.readonly.push(n.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){let e=Or.compile(t.instructions,t.payerKey),r=new Array,n={writable:new Array,readonly:new Array},o=t.addressLookupTableAccounts||[];for(let k of o){let I=e.extractTableLookup(k);if(I!==void 0){let[_,{writable:A,readonly:E}]=I;r.push(_),n.writable.push(...A),n.readonly.push(...E)}}let[a,f]=e.getMessageComponents(),b=new Cr(f,n).compileInstructions(t.instructions);return new fr({header:a,staticAccountKeys:f,recentBlockhash:t.recentBlockhash,compiledInstructions:b,addressTableLookups:r})}serialize(){let t=Array();Me(t,this.staticAccountKeys.length);let e=this.serializeInstructions(),r=Array();Me(r,this.compiledInstructions.length);let n=this.serializeAddressTableLookups(),o=Array();Me(o,this.addressTableLookups.length);let a=g.struct([g.u8("prefix"),g.struct([g.u8("numRequiredSignatures"),g.u8("numReadonlySignedAccounts"),g.u8("numReadonlyUnsignedAccounts")],"header"),g.blob(t.length,"staticAccountKeysLength"),g.seq(J(),this.staticAccountKeys.length,"staticAccountKeys"),J("recentBlockhash"),g.blob(r.length,"instructionsLength"),g.blob(e.length,"serializedInstructions"),g.blob(o.length,"addressTableLookupsLength"),g.blob(n.length,"serializedAddressTableLookups")]),f=new Uint8Array(wr),h=1<<7,b=a.encode({prefix:h,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(k=>k.toBytes()),recentBlockhash:le.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(o),serializedAddressTableLookups:n},f);return f.slice(0,b)}serializeInstructions(){let t=0,e=new Uint8Array(wr);for(let r of this.compiledInstructions){let n=Array();Me(n,r.accountKeyIndexes.length);let o=Array();Me(o,r.data.length);let a=g.struct([g.u8("programIdIndex"),g.blob(n.length,"encodedAccountKeyIndexesLength"),g.seq(g.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),g.blob(o.length,"encodedDataLength"),g.blob(r.data.length,"data")]);t+=a.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(o),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0,e=new Uint8Array(wr);for(let r of this.addressTableLookups){let n=Array();Me(n,r.writableIndexes.length);let o=Array();Me(o,r.readonlyIndexes.length);let a=g.struct([J("accountKey"),g.blob(n.length,"encodedWritableIndexesLength"),g.seq(g.u8(),r.writableIndexes.length,"writableIndexes"),g.blob(o.length,"encodedReadonlyIndexesLength"),g.seq(g.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=a.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(o),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t],r=e.shift(),n=r&Do;at(r!==n,"Expected versioned message but received legacy message");let o=n;at(o===0,`Expected versioned message with version 0 but found version ${o}`);let a={numRequiredSignatures:e.shift(),numReadonlySignedAccounts:e.shift(),numReadonlyUnsignedAccounts:e.shift()},f=[],h=Ee(e);for(let E=0;E<h;E++)f.push(new P(e.splice(0,Ke)));let b=le.default.encode(e.splice(0,Ke)),k=Ee(e),I=[];for(let E=0;E<k;E++){let R=e.shift(),T=Ee(e),O=e.splice(0,T),G=Ee(e),tt=new Uint8Array(e.splice(0,G));I.push({programIdIndex:R,accountKeyIndexes:O,data:tt})}let _=Ee(e),A=[];for(let E=0;E<_;E++){let R=new P(e.splice(0,Ke)),T=Ee(e),O=e.splice(0,T),G=Ee(e),tt=e.splice(0,G);A.push({accountKey:R,writableIndexes:O,readonlyIndexes:tt})}return new fr({header:a,staticAccountKeys:f,recentBlockhash:b,compiledInstructions:I,addressTableLookups:A})}},tc={deserializeMessageVersion(s){let t=s[0],e=t&Do;return e===t?"legacy":e},deserialize:s=>{let t=tc.deserializeMessageVersion(s);if(t==="legacy")return Ce.from(s);if(t===0)return fr.deserialize(s);throw new Error(`Transaction message version ${t} deserialization is not supported`)}},cr;(function(s){s[s.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",s[s.PROCESSED=1]="PROCESSED",s[s.TIMED_OUT=2]="TIMED_OUT"})(cr||(cr={}));var Fu=$.alloc(hn).fill(0),dt=class{constructor(t){this.keys=void 0,this.programId=void 0,this.data=$.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}},ut=class{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){let{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{let{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new dt(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let R=0;R<e.length;R++)if(e[R].programId===void 0)throw new Error(`Transaction instruction index ${R} has undefined program id`);let n=[],o=[];e.forEach(R=>{R.keys.forEach(O=>{o.push({...O})});let T=R.programId.toString();n.includes(T)||n.push(T)}),n.forEach(R=>{o.push({pubkey:new P(R),isSigner:!1,isWritable:!1})});let a=[];o.forEach(R=>{let T=R.pubkey.toString(),O=a.findIndex(G=>G.pubkey.toString()===T);O>-1?(a[O].isWritable=a[O].isWritable||R.isWritable,a[O].isSigner=a[O].isSigner||R.isSigner):a.push(R)}),a.sort(function(R,T){return R.isSigner!==T.isSigner?R.isSigner?-1:1:R.isWritable!==T.isWritable?R.isWritable?-1:1:R.pubkey.toBase58().localeCompare(T.pubkey.toBase58())});let f=a.findIndex(R=>R.pubkey.equals(r));if(f>-1){let[R]=a.splice(f,1);R.isSigner=!0,R.isWritable=!0,a.unshift(R)}else a.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(let R of this.signatures){let T=a.findIndex(O=>O.pubkey.equals(R.publicKey));if(T>-1)a[T].isSigner||(a[T].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${R.publicKey.toString()}`)}let h=0,b=0,k=0,I=[],_=[];a.forEach(({pubkey:R,isSigner:T,isWritable:O})=>{T?(I.push(R.toString()),h+=1,O||(b+=1)):(_.push(R.toString()),O||(k+=1))});let A=I.concat(_),E=e.map(R=>{let{data:T,programId:O}=R;return{programIdIndex:A.indexOf(O.toString()),accounts:R.keys.map(G=>A.indexOf(G.pubkey.toString())),data:le.default.encode(T)}});return E.forEach(R=>{at(R.programIdIndex>=0),R.accounts.forEach(T=>at(T>=0))}),new Ce({header:{numRequiredSignatures:h,numReadonlySignedAccounts:b,numReadonlyUnsignedAccounts:k},accountKeys:A,recentBlockhash:t,instructions:E})}_compile(){let t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((n,o)=>e[o].equals(n.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");let e=new Set;this.signatures=t.filter(r=>{let n=r.toString();return e.has(n)?!1:(e.add(n),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");let e=new Set,r=[];for(let o of t){let a=o.publicKey.toString();e.has(a)||(e.add(a),r.push(o))}this.signatures=r.map(o=>({signature:null,publicKey:o.publicKey}));let n=this._compile();this._partialSign(n,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");let e=new Set,r=[];for(let o of t){let a=o.publicKey.toString();e.has(a)||(e.add(a),r.push(o))}let n=this._compile();this._partialSign(n,...r)}_partialSign(t,...e){let r=t.serialize();e.forEach(n=>{let o=qo(r,n.secretKey);this._addSignature(n.publicKey,X(o))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){at(e.length===64);let r=this.signatures.findIndex(n=>t.equals(n.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=$.from(e)}verifySignatures(){return this._verifySignatures(this.serializeMessage(),!0)}_verifySignatures(t,e){for(let{signature:r,publicKey:n}of this.signatures)if(r===null){if(e)return!1}else if(!zu(r,t,n.toBuffer()))return!1;return!0}serialize(t){let{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),n=this.serializeMessage();if(r&&!this._verifySignatures(n,e))throw new Error("Signature verification failed");return this._serialize(n)}_serialize(t){let{signatures:e}=this,r=[];Me(r,e.length);let n=r.length+e.length*64+t.length,o=$.alloc(n);return at(e.length<256),$.from(r).copy(o,0),e.forEach(({signature:a},f)=>{a!==null&&(at(a.length===64,"signature has invalid length"),$.from(a).copy(o,r.length+f*64))}),t.copy(o,r.length+e.length*64),at(o.length<=wr,`Transaction too large: ${o.length} > ${wr}`),o}get keys(){return at(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return at(this.instructions.length===1),this.instructions[0].programId}get data(){return at(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t],r=Ee(e),n=[];for(let o=0;o<r;o++){let a=e.slice(0,hn);e=e.slice(hn),n.push(le.default.encode($.from(a)))}return ut.populate(Ce.from(e),n)}static populate(t,e=[]){let r=new ut;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((n,o)=>{let a={signature:n==le.default.encode(Fu)?null:le.default.decode(n),publicKey:t.accountKeys[o]};r.signatures.push(a)}),t.instructions.forEach(n=>{let o=n.accounts.map(a=>{let f=t.accountKeys[a];return{pubkey:f,isSigner:r.signatures.some(h=>h.publicKey.toString()===f.toString())||t.isAccountSigner(a),isWritable:t.isAccountWritable(a)}});r.instructions.push(new dt({keys:o,programId:t.accountKeys[n.programIdIndex],data:le.default.decode(n.data)}))}),r._message=t,r._json=r.toJSON(),r}},hs=class{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){let{header:r,compiledInstructions:n,recentBlockhash:o}=t,{numRequiredSignatures:a,numReadonlySignedAccounts:f,numReadonlyUnsignedAccounts:h}=r,b=a-f;at(b>0,"Message header is invalid");let k=t.staticAccountKeys.length-h;at(k>=0,"Message header is invalid");let I=t.getAccountKeys(e),_=I.get(0);if(_===void 0)throw new Error("Failed to decompile message because no account keys were found");let A=[];for(let E of n){let R=[];for(let O of E.accountKeyIndexes){let G=I.get(O);if(G===void 0)throw new Error(`Failed to find key for account key index ${O}`);let tt=O<a,j;tt?j=O<b:O<I.staticAccountKeys.length?j=O-a<k:j=O-I.staticAccountKeys.length<I.accountKeysFromLookups.writable.length,R.push({pubkey:G,isSigner:O<r.numRequiredSignatures,isWritable:j})}let T=I.get(E.programIdIndex);if(T===void 0)throw new Error(`Failed to find program id for program id index ${E.programIdIndex}`);A.push(new dt({programId:T,data:X(E.data),keys:R}))}return new hs({payerKey:_,instructions:A,recentBlockhash:o})}compileToLegacyMessage(){return Ce.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return fr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}},ls=class{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)at(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{let r=[];for(let n=0;n<t.header.numRequiredSignatures;n++)r.push(new Uint8Array(hn));this.signatures=r}this.message=t}serialize(){let t=this.message.serialize(),e=Array();Me(e,this.signatures.length);let r=g.struct([g.blob(e.length,"encodedSignaturesLength"),g.seq(Uu(),this.signatures.length,"signatures"),g.blob(t.length,"serializedMessage")]),n=new Uint8Array(2048),o=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},n);return n.slice(0,o)}static deserialize(t){let e=[...t],r=[],n=Ee(e);for(let a=0;a<n;a++)r.push(new Uint8Array(e.splice(0,hn)));let o=tc.deserialize(new Uint8Array(e));return new ls(o,r)}sign(t){let e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(let n of t){let o=r.findIndex(a=>a.equals(n.publicKey));at(o>=0,`Cannot sign with non signer key ${n.publicKey.toBase58()}`),this.signatures[o]=qo(e,n.secretKey)}}addSignature(t,e){at(e.byteLength===64,"Signature must be 64 bytes long");let n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(o=>o.equals(t));at(n>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[n]=e}},Ve=new P("SysvarC1ock11111111111111111111111111111111"),Od=new P("SysvarEpochSchedu1e111111111111111111111111"),zd=new P("Sysvar1nstructions1111111111111111111111111"),xo=new P("SysvarRecentB1ockHashes11111111111111111111"),ln=new P("SysvarRent111111111111111111111111111111111"),Nd=new P("SysvarRewards111111111111111111111111111111"),Kd=new P("SysvarS1otHashes111111111111111111111111111"),Ud=new P("SysvarS1otHistory11111111111111111111111111"),_o=new P("SysvarStakeHistory1111111111111111111111111");async function Eo(s,t,e,r){let n=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},o=await s.sendTransaction(t,e,n),a=t.recentBlockhash!=null&&t.lastValidBlockHeight!=null?(await s.confirmTransaction({signature:o,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},r&&r.commitment)).value:(await s.confirmTransaction(o,r&&r.commitment)).value;if(a.err)throw new Error(`Transaction ${o} failed (${JSON.stringify(a)})`);return o}function fn(s){return new Promise(t=>setTimeout(t,s))}function ot(s,t){let e=s.layout.span>=0?s.layout.span:Qa(s,t),r=$.alloc(e),n=Object.assign({instruction:s.index},t);return s.layout.encode(n,r),r}function lt(s,t){let e;try{e=s.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.instruction!==s.index)throw new Error(`invalid instruction; instruction index mismatch ${e.instruction} != ${s.index}`);return e}var Vu=g.nu64("lamportsPerSignature"),ec=g.struct([g.u32("version"),g.u32("state"),J("authorizedPubkey"),J("nonce"),g.struct([Vu],"feeCalculator")]),La=ec.span,dn=class{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){let e=ec.decode(X(t),0);return new dn({authorizedPubkey:new P(e.authorizedPubkey),nonce:new P(e.nonce).toString(),feeCalculator:e.feeCalculator})}},$u=s=>{let t=s.decode.bind(s),e=s.encode.bind(s);return{decode:t,encode:e}},Gu=s=>t=>{let e=(0,Ya.blob)(s,t),{encode:r,decode:n}=$u(e),o=e;return o.decode=(a,f)=>{let h=n(a,f);return(0,mn.toBigIntLE)($.from(h))},o.encode=(a,f,h)=>{let b=(0,mn.toBufferLE)(a,s);return r(b,f,h)},o},zr=Gu(8),Ma=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let r=g.u32("instruction").decode(t.data),n;for(let[o,a]of Object.entries(kt))if(a.index==r){n=o;break}if(!n)throw new Error("Instruction type incorrect; not a SystemInstruction");return n}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{lamports:e,space:r,programId:n}=lt(kt.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:r,programId:new P(n)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{lamports:e}=lt(kt.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:e,seed:r,programId:n}=lt(kt.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:r,programId:new P(n)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{space:e}=lt(kt.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{base:e,seed:r,space:n,programId:o}=lt(kt.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new P(e),seed:r,space:n,programId:new P(o)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{programId:e}=lt(kt.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new P(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{base:e,seed:r,programId:n}=lt(kt.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new P(e),seed:r,programId:new P(n)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{base:e,seed:r,lamports:n,space:o,programId:a}=lt(kt.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new P(e),seed:r,lamports:n,space:o,programId:new P(a)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{authorized:e}=lt(kt.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new P(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),lt(kt.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);let{lamports:e}=lt(kt.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{authorized:e}=lt(kt.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new P(e)}}static checkProgramId(t){if(!t.equals(de.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},kt=Object.freeze({Create:{index:0,layout:g.struct([g.u32("instruction"),g.ns64("lamports"),g.ns64("space"),J("programId")])},Assign:{index:1,layout:g.struct([g.u32("instruction"),J("programId")])},Transfer:{index:2,layout:g.struct([g.u32("instruction"),zr("lamports")])},CreateWithSeed:{index:3,layout:g.struct([g.u32("instruction"),J("base"),mr("seed"),g.ns64("lamports"),g.ns64("space"),J("programId")])},AdvanceNonceAccount:{index:4,layout:g.struct([g.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:g.struct([g.u32("instruction"),g.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:g.struct([g.u32("instruction"),J("authorized")])},AuthorizeNonceAccount:{index:7,layout:g.struct([g.u32("instruction"),J("authorized")])},Allocate:{index:8,layout:g.struct([g.u32("instruction"),g.ns64("space")])},AllocateWithSeed:{index:9,layout:g.struct([g.u32("instruction"),J("base"),mr("seed"),g.ns64("space"),J("programId")])},AssignWithSeed:{index:10,layout:g.struct([g.u32("instruction"),J("base"),mr("seed"),J("programId")])},TransferWithSeed:{index:11,layout:g.struct([g.u32("instruction"),zr("lamports"),mr("seed"),J("programId")])},UpgradeNonceAccount:{index:12,layout:g.struct([g.u32("instruction")])}}),de=class{constructor(){}static createAccount(t){let e=kt.Create,r=ot(e,{lamports:t.lamports,space:t.space,programId:X(t.programId.toBuffer())});return new dt({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){let n=kt.TransferWithSeed;e=ot(n,{lamports:BigInt(t.lamports),seed:t.seed,programId:X(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{let n=kt.Transfer;e=ot(n,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new dt({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){let n=kt.AssignWithSeed;e=ot(n,{base:X(t.basePubkey.toBuffer()),seed:t.seed,programId:X(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{let n=kt.Assign;e=ot(n,{programId:X(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new dt({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){let e=kt.CreateWithSeed,r=ot(e,{base:X(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:X(t.programId.toBuffer())}),n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey!=t.fromPubkey&&n.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new dt({keys:n,programId:this.programId,data:r})}static createNonceAccount(t){let e=new ut;"basePubkey"in t&&"seed"in t?e.add(de.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:La,programId:this.programId})):e.add(de.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:La,programId:this.programId}));let r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){let e=kt.InitializeNonceAccount,r=ot(e,{authorized:X(t.authorizedPubkey.toBuffer())}),n={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:xo,isSigner:!1,isWritable:!1},{pubkey:ln,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new dt(n)}static nonceAdvance(t){let e=kt.AdvanceNonceAccount,r=ot(e),n={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:xo,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new dt(n)}static nonceWithdraw(t){let e=kt.WithdrawNonceAccount,r=ot(e,{lamports:t.lamports});return new dt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:xo,isSigner:!1,isWritable:!1},{pubkey:ln,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){let e=kt.AuthorizeNonceAccount,r=ot(e,{authorized:X(t.newAuthorizedPubkey.toBuffer())});return new dt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){let n=kt.AllocateWithSeed;e=ot(n,{base:X(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:X(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{let n=kt.Allocate;e=ot(n,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new dt({keys:r,programId:this.programId,data:e})}};de.programId=new P("11111111111111111111111111111111");var ju=wr-300,hr=class{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/hr.chunkSize)+1+1)}static async load(t,e,r,n,o){{let I=await t.getMinimumBalanceForRentExemption(o.length),_=await t.getAccountInfo(r.publicKey,"confirmed"),A=null;if(_!==null){if(_.executable)return console.error("Program load failed, account is already executable"),!1;_.data.length!==o.length&&(A=A||new ut,A.add(de.allocate({accountPubkey:r.publicKey,space:o.length}))),_.owner.equals(n)||(A=A||new ut,A.add(de.assign({accountPubkey:r.publicKey,programId:n}))),_.lamports<I&&(A=A||new ut,A.add(de.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:I-_.lamports})))}else A=new ut().add(de.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:I>0?I:1,space:o.length,programId:n}));A!==null&&await Eo(t,A,[e,r],{commitment:"confirmed"})}let a=g.struct([g.u32("instruction"),g.u32("offset"),g.u32("bytesLength"),g.u32("bytesLengthPadding"),g.seq(g.u8("byte"),g.offset(g.u32(),-8),"bytes")]),f=hr.chunkSize,h=0,b=o,k=[];for(;b.length>0;){let I=b.slice(0,f),_=$.alloc(f+16);a.encode({instruction:0,offset:h,bytes:I,bytesLength:0,bytesLengthPadding:0},_);let A=new ut().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:n,data:_});k.push(Eo(t,A,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await fn(1e3/4),h+=f,b=b.slice(f)}await Promise.all(k);{let I=g.struct([g.u32("instruction")]),_=$.alloc(I.span);I.encode({instruction:1},_);let A=new ut().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:ln,isSigner:!1,isWritable:!1}],programId:n,data:_});await Eo(t,A,[e,r],{commitment:"confirmed"})}return!0}};hr.chunkSize=ju;var Wd=new P("BPFLoader2111111111111111111111111111111111"),Ta=class{static getMinNumSignatures(t){return hr.getMinNumSignatures(t)}static load(t,e,r,n,o){return hr.load(t,e,r,o,n)}},Zu=Object.prototype.toString,Yu=Object.keys||function(s){var t=[];for(var e in s)t.push(e);return t};function un(s,t){var e,r,n,o,a,f,h;if(s===!0)return"true";if(s===!1)return"false";switch(typeof s){case"object":if(s===null)return null;if(s.toJSON&&typeof s.toJSON=="function")return un(s.toJSON(),t);if(h=Zu.call(s),h==="[object Array]"){for(n="[",r=s.length-1,e=0;e<r;e++)n+=un(s[e],!0)+",";return r>-1&&(n+=un(s[e],!0)),n+"]"}else if(h==="[object Object]"){for(o=Yu(s).sort(),r=o.length,n="",e=0;e<r;)a=o[e],f=un(s[a],!1),f!==void 0&&(n&&(n+=","),n+=JSON.stringify(a)+":"+f),e++;return"{"+n+"}"}else return JSON.stringify(s);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(s);default:return isFinite(s)?s:null}}var Xu=function(s){var t=un(s,!1);if(t!==void 0)return""+t},Ju=Xu,cn=32;function Ro(s){let t=0;for(;s>1;)s/=2,t++;return t}function Qu(s){return s===0?1:(s--,s|=s>>1,s|=s>>2,s|=s>>4,s|=s>>8,s|=s>>16,s|=s>>32,s+1)}var zo=class{constructor(t,e,r,n,o){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=o}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){let e=Ro(Qu(t+cn+1))-Ro(cn)-1,r=this.getSlotsInEpoch(e),n=t-(r-cn);return[e,n]}else{let e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),n=this.firstNormalEpoch+r,o=e%this.slotsPerEpoch;return[n,o]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*cn:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Ro(cn)):this.slotsPerEpoch}},ds=class extends Error{constructor(t,e){super(t),this.logs=void 0,this.logs=e}},qd={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016},H=class extends Error{constructor({code:t,message:e,data:r},n){super(n!=null?`${n}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}},tf=globalThis.fetch,ef=160,rf=64,nf=ef/rf,sf=1e3/nf;function of(s,t){let e;try{e=s.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==s.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${s.index}`);return e}var Pa=56,ps=class{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){let t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){let e=of(af,t),r=t.length-Pa;at(r>=0,"lookup table is invalid"),at(r%32===0,"lookup table is invalid");let n=r/32,{addresses:o}=g.struct([g.seq(J(),n,"addresses")]).decode(t.slice(Pa));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new P(e.authority[0]):void 0,addresses:o.map(a=>new P(a))}}},af={index:1,layout:g.struct([g.u32("typeIndex"),zr("deactivationSlot"),g.nu64("lastExtendedSlot"),g.u8("lastExtendedStartIndex"),g.u8(),g.seq(J(),g.offset(g.u8(),-1),"authority")])},cf=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function uf(s){let t=s.match(cf);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${s}\``);let[e,r,n,o]=t,a=s.startsWith("https:")?"wss:":"ws:",f=n==null?null:parseInt(n.slice(1),10),h=f==null?"":`:${f+1}`;return`${a}//${r}${h}${o}`}var Lo,ce=_r(Fn(P),C(),s=>new P(s)),rc=Vn([C(),It("base64")]),Ho=_r(Fn($),rc,s=>$.from(s[0],"base64")),ff=30*1e3;function hf(s){if(/^https?:/.test(s)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return s}function _t(s){let t,e;if(typeof s=="string")t=s;else if(s){let{commitment:r,...n}=s;t=r,e=n}return{commitment:t,config:e}}function nc(s){return Ae([M({jsonrpc:It("2.0"),id:C(),result:s}),M({jsonrpc:It("2.0"),id:C(),error:M({code:xr(),message:C(),data:Y(Ci())})})])}var lf=nc(xr());function st(s){return _r(nc(s),lf,t=>"error"in t?t:{...t,result:z(t.result,s)})}function fe(s){return st(M({context:M({slot:x()}),value:s}))}function vs(s){return M({context:M({slot:x()}),value:s})}function Mo(s,t){return s===0?new fr({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new P(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:le.default.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new Ce(t)}var df=M({foundation:x(),foundationTerm:x(),initial:x(),taper:x(),terminal:x()}),pf=st(K(V(M({epoch:x(),effectiveSlot:x(),amount:x(),postBalance:x()})))),yf=M({epoch:x(),slotIndex:x(),slotsInEpoch:x(),absoluteSlot:x(),blockHeight:Y(x()),transactionCount:Y(x())}),gf=M({slotsPerEpoch:x(),leaderScheduleSlotOffset:x(),warmup:qe(),firstNormalEpoch:x(),firstNormalSlot:x()}),mf=no(C(),K(x())),Sr=V(Ae([M({}),C()])),wf=M({err:Sr}),bf=It("receivedSignature"),vf=M({"solana-core":C(),"feature-set":Y(x())}),Ca=fe(M({err:V(Ae([M({}),C()])),logs:V(K(C())),accounts:Y(V(K(V(M({executable:qe(),owner:C(),lamports:x(),data:K(C()),rentEpoch:Y(x())}))))),unitsConsumed:Y(x()),returnData:Y(V(M({programId:C(),data:Vn([C(),It("base64")])})))})),kf=fe(M({byIdentity:no(C(),K(x())),range:M({firstSlot:x(),lastSlot:x()})}));function Sf(s,t,e,r,n){let o=e||tf,a;return r&&(a=async(h,b)=>{let k=await new Promise((I,_)=>{try{r(h,b,(A,E)=>I([A,E]))}catch(A){_(A)}});return await o(...k)}),new Ja.default(async(h,b)=>{let I={method:"POST",body:h,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},t||{},mh)};try{let _=5,A,E=500;for(;a?A=await a(s,I):A=await o(s,I),!(A.status!==429||n===!0||(_-=1,_===0));)console.log(`Server responded with ${A.status} ${A.statusText}.  Retrying after ${E}ms delay...`),await fn(E),E*=2;let R=await A.text();A.ok?b(null,R):b(new Error(`${A.status} ${A.statusText}: ${R}`))}catch(_){_ instanceof Error&&b(_)}finally{}},{})}function If(s){return(t,e)=>new Promise((r,n)=>{s.request(t,e,(o,a)=>{if(o){n(o);return}r(a)})})}function Af(s){return t=>new Promise((e,r)=>{t.length===0&&e([]);let n=t.map(o=>s.request(o.methodName,o.args));s.request(n,(o,a)=>{if(o){r(o);return}e(a)})})}var Bf=st(df),xf=st(yf),_f=st(gf),Ef=st(mf),Rf=st(x()),Lf=fe(M({total:x(),circulating:x(),nonCirculating:x(),nonCirculatingAccounts:K(ce)})),No=M({amount:C(),uiAmount:V(x()),decimals:x(),uiAmountString:Y(C())}),Mf=fe(K(M({address:ce,amount:C(),uiAmount:V(x()),decimals:x(),uiAmountString:Y(C())}))),Tf=fe(K(M({pubkey:ce,account:M({executable:qe(),owner:ce,lamports:x(),data:Ho,rentEpoch:x()})}))),Ko=M({program:C(),parsed:xr(),space:x()}),Pf=fe(K(M({pubkey:ce,account:M({executable:qe(),owner:ce,lamports:x(),data:Ko,rentEpoch:x()})}))),Cf=fe(K(M({lamports:x(),address:ce}))),pn=M({executable:qe(),owner:ce,lamports:x(),data:Ho,rentEpoch:x()}),Of=M({pubkey:ce,account:pn}),zf=_r(Ae([Fn($),Ko]),Ae([rc,Ko]),s=>Array.isArray(s)?z(s,Ho):s),sc=M({executable:qe(),owner:ce,lamports:x(),data:zf,rentEpoch:x()}),Nf=M({pubkey:ce,account:sc}),Kf=M({state:Ae([It("active"),It("inactive"),It("activating"),It("deactivating")]),active:x(),inactive:x()}),Uf=st(K(M({signature:C(),slot:x(),err:Sr,memo:V(C()),blockTime:Y(V(x()))}))),Wf=st(K(M({signature:C(),slot:x(),err:Sr,memo:V(C()),blockTime:Y(V(x()))}))),qf=M({subscription:x(),result:vs(pn)}),Df=M({pubkey:ce,account:pn}),Hf=M({subscription:x(),result:vs(Df)}),Ff=M({parent:x(),slot:x(),root:x()}),Vf=M({subscription:x(),result:Ff}),$f=Ae([M({type:Ae([It("firstShredReceived"),It("completed"),It("optimisticConfirmation"),It("root")]),slot:x(),timestamp:x()}),M({type:It("createdBank"),parent:x(),slot:x(),timestamp:x()}),M({type:It("frozen"),slot:x(),timestamp:x(),stats:M({numTransactionEntries:x(),numSuccessfulTransactions:x(),numFailedTransactions:x(),maxTransactionsPerEntry:x()})}),M({type:It("dead"),slot:x(),timestamp:x(),err:C()})]),Gf=M({subscription:x(),result:$f}),jf=M({subscription:x(),result:vs(Ae([wf,bf]))}),Zf=M({subscription:x(),result:x()}),Yf=M({pubkey:C(),gossip:V(C()),tpu:V(C()),rpc:V(C()),version:V(C())}),Oa=M({votePubkey:C(),nodePubkey:C(),activatedStake:x(),epochVoteAccount:qe(),epochCredits:K(Vn([x(),x(),x()])),commission:x(),lastVote:x(),rootSlot:V(x())}),Xf=st(M({current:K(Oa),delinquent:K(Oa)})),Jf=Ae([It("processed"),It("confirmed"),It("finalized")]),Qf=M({slot:x(),confirmations:V(x()),err:Sr,confirmationStatus:Y(Jf)}),th=fe(K(V(Qf))),eh=st(x()),oc=M({accountKey:ce,writableIndexes:K(x()),readonlyIndexes:K(x())}),Fo=M({signatures:K(C()),message:M({accountKeys:K(C()),header:M({numRequiredSignatures:x(),numReadonlySignedAccounts:x(),numReadonlyUnsignedAccounts:x()}),instructions:K(M({accounts:K(x()),data:C(),programIdIndex:x()})),recentBlockhash:C(),addressTableLookups:Y(K(oc))})}),ic=M({parsed:xr(),program:C(),programId:ce}),ac=M({accounts:K(ce),data:C(),programId:ce}),rh=Ae([ac,ic]),nh=Ae([M({parsed:xr(),program:C(),programId:C()}),M({accounts:K(C()),data:C(),programId:C()})]),cc=_r(rh,nh,s=>"accounts"in s?z(s,ac):z(s,ic)),sh=M({signatures:K(C()),message:M({accountKeys:K(M({pubkey:ce,signer:qe(),writable:qe(),source:Y(Ae([It("transaction"),It("lookupTable")]))})),instructions:K(cc),recentBlockhash:C(),addressTableLookups:Y(V(K(oc)))})}),ys=M({accountIndex:x(),mint:C(),owner:Y(C()),uiTokenAmount:No}),uc=M({writable:K(ce),readonly:K(ce)}),Vo=M({err:Sr,fee:x(),innerInstructions:Y(V(K(M({index:x(),instructions:K(M({accounts:K(x()),data:C(),programIdIndex:x()}))})))),preBalances:K(x()),postBalances:K(x()),logMessages:Y(V(K(C()))),preTokenBalances:Y(V(K(ys))),postTokenBalances:Y(V(K(ys))),loadedAddresses:Y(uc),computeUnitsConsumed:Y(x())}),oh=M({err:Sr,fee:x(),innerInstructions:Y(V(K(M({index:x(),instructions:K(cc)})))),preBalances:K(x()),postBalances:K(x()),logMessages:Y(V(K(C()))),preTokenBalances:Y(V(K(ys))),postTokenBalances:Y(V(K(ys))),loadedAddresses:Y(uc),computeUnitsConsumed:Y(x())}),$o=Ae([It(0),It("legacy")]),ih=st(V(M({blockhash:C(),previousBlockhash:C(),parentSlot:x(),transactions:K(M({transaction:Fo,meta:V(Vo),version:Y($o)})),rewards:Y(K(M({pubkey:C(),lamports:x(),postBalance:V(x()),rewardType:V(C())}))),blockTime:V(x()),blockHeight:V(x())}))),ah=st(V(M({blockhash:C(),previousBlockhash:C(),parentSlot:x(),transactions:K(M({transaction:Fo,meta:V(Vo)})),rewards:Y(K(M({pubkey:C(),lamports:x(),postBalance:V(x()),rewardType:V(C())}))),blockTime:V(x())}))),za=st(V(M({blockhash:C(),previousBlockhash:C(),parentSlot:x(),signatures:K(C()),blockTime:V(x())}))),To=st(V(M({slot:x(),meta:Vo,blockTime:Y(V(x())),transaction:Fo,version:Y($o)}))),os=st(V(M({slot:x(),transaction:sh,meta:V(oh),blockTime:Y(V(x())),version:Y($o)}))),ch=fe(M({blockhash:C(),feeCalculator:M({lamportsPerSignature:x()})})),uh=fe(M({blockhash:C(),lastValidBlockHeight:x()})),fh=M({slot:x(),numTransactions:x(),numSlots:x(),samplePeriodSecs:x()}),hh=st(K(fh)),lh=fe(V(M({feeCalculator:M({lamportsPerSignature:x()})}))),dh=st(C()),ph=st(C()),yh=M({err:Sr,logs:K(C()),signature:C()}),gh=M({result:vs(yh),subscription:x()}),mh={"solana-client":`js/${(Lo="0.0.0-development")!==null&&Lo!==void 0?Lo:"UNKNOWN"}`},Na=class{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set;let r,n,o,a,f;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,n=e.httpHeaders,o=e.fetch,a=e.fetchMiddleware,f=e.disableRetryOnRateLimit),this._rpcEndpoint=hf(t),this._rpcWsEndpoint=r||uf(t),this._rpcClient=Sf(t,n,o,a,f),this._rpcRequest=If(this._rpcClient),this._rpcBatchRequest=Af(this._rpcClient),this._rpcWebSocket=new Xa.Client(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){let{commitment:r,config:n}=_t(e),o=this._buildArgs([t.toBase58()],r,void 0,n),a=await this._rpcRequest("getBalance",o),f=z(a,fe(x()));if("error"in f)throw new H(f.error,`failed to get balance for ${t.toBase58()}`);return f.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){let e=await this._rpcRequest("getBlockTime",[t]),r=z(e,st(V(x())));if("error"in r)throw new H(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){let t=await this._rpcRequest("minimumLedgerSlot",[]),e=z(t,st(x()));if("error"in e)throw new H(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){let t=await this._rpcRequest("getFirstAvailableBlock",[]),e=z(t,Rf);if("error"in e)throw new H(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};let r=await this._rpcRequest("getSupply",[e]),n=z(r,Lf);if("error"in n)throw new H(n.error,"failed to get supply");return n.result}async getTokenSupply(t,e){let r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenSupply",r),o=z(n,fe(No));if("error"in o)throw new H(o.error,"failed to get token supply");return o.result}async getTokenAccountBalance(t,e){let r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenAccountBalance",r),o=z(n,fe(No));if("error"in o)throw new H(o.error,"failed to get token account balance");return o.result}async getTokenAccountsByOwner(t,e,r){let{commitment:n,config:o}=_t(r),a=[t.toBase58()];"mint"in e?a.push({mint:e.mint.toBase58()}):a.push({programId:e.programId.toBase58()});let f=this._buildArgs(a,n,"base64",o),h=await this._rpcRequest("getTokenAccountsByOwner",f),b=z(h,Tf);if("error"in b)throw new H(b.error,`failed to get token accounts owned by account ${t.toBase58()}`);return b.result}async getParsedTokenAccountsByOwner(t,e,r){let n=[t.toBase58()];"mint"in e?n.push({mint:e.mint.toBase58()}):n.push({programId:e.programId.toBase58()});let o=this._buildArgs(n,r,"jsonParsed"),a=await this._rpcRequest("getTokenAccountsByOwner",o),f=z(a,Pf);if("error"in f)throw new H(f.error,`failed to get token accounts owned by account ${t.toBase58()}`);return f.result}async getLargestAccounts(t){let e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],n=await this._rpcRequest("getLargestAccounts",r),o=z(n,Cf);if("error"in o)throw new H(o.error,"failed to get largest accounts");return o.result}async getTokenLargestAccounts(t,e){let r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenLargestAccounts",r),o=z(n,Mf);if("error"in o)throw new H(o.error,"failed to get token largest accounts");return o.result}async getAccountInfoAndContext(t,e){let{commitment:r,config:n}=_t(e),o=this._buildArgs([t.toBase58()],r,"base64",n),a=await this._rpcRequest("getAccountInfo",o),f=z(a,fe(V(pn)));if("error"in f)throw new H(f.error,`failed to get info about account ${t.toBase58()}`);return f.result}async getParsedAccountInfo(t,e){let{commitment:r,config:n}=_t(e),o=this._buildArgs([t.toBase58()],r,"jsonParsed",n),a=await this._rpcRequest("getAccountInfo",o),f=z(a,fe(V(sc)));if("error"in f)throw new H(f.error,`failed to get info about account ${t.toBase58()}`);return f.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleAccountsInfoAndContext(t,e){let{commitment:r,config:n}=_t(e),o=t.map(b=>b.toBase58()),a=this._buildArgs([o],r,"base64",n),f=await this._rpcRequest("getMultipleAccounts",a),h=z(f,fe(K(V(pn))));if("error"in h)throw new H(h.error,`failed to get info for accounts ${o}`);return h.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){let{commitment:n,config:o}=_t(e),a=this._buildArgs([t.toBase58()],n,void 0,{...o,epoch:r??o?.epoch}),f=await this._rpcRequest("getStakeActivation",a),h=z(f,st(Kf));if("error"in h)throw new H(h.error,`failed to get Stake Activation ${t.toBase58()}`);return h.result}async getProgramAccounts(t,e){let{commitment:r,config:n}=_t(e),{encoding:o,...a}=n||{},f=this._buildArgs([t.toBase58()],r,o||"base64",a),h=await this._rpcRequest("getProgramAccounts",f),b=z(h,st(K(Of)));if("error"in b)throw new H(b.error,`failed to get accounts owned by program ${t.toBase58()}`);return b.result}async getParsedProgramAccounts(t,e){let{commitment:r,config:n}=_t(e),o=this._buildArgs([t.toBase58()],r,"jsonParsed",n),a=await this._rpcRequest("getProgramAccounts",o),f=z(a,st(K(Nf)));if("error"in f)throw new H(f.error,`failed to get accounts owned by program ${t.toBase58()}`);return f.result}async confirmTransaction(t,e){let r;typeof t=="string"?r=t:r=t.signature;let n;try{n=le.default.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}at(n.length===64,"signature has invalid length");let o=e||this.commitment,a,f,h=!1,b=new Promise((_,A)=>{try{f=this.onSignature(r,(E,R)=>{f=void 0;let T={context:R,value:E};h=!0,_({__type:cr.PROCESSED,response:T})},o)}catch(E){A(E)}}),k=new Promise(_=>{if(typeof t=="string"){let A=this._confirmTransactionInitialTimeout||6e4;switch(o){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{A=this._confirmTransactionInitialTimeout||30*1e3;break}}a=setTimeout(()=>_({__type:cr.TIMED_OUT,timeoutMs:A}),A)}else{let A=t,E=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let R=await E();if(!h){for(;R<=A.lastValidBlockHeight;)if(await fn(1e3),h||(R=await E(),h))return;_({__type:cr.BLOCKHEIGHT_EXCEEDED})}})()}}),I;try{let _=await Promise.race([b,k]);switch(_.__type){case cr.BLOCKHEIGHT_EXCEEDED:throw new us(r);case cr.PROCESSED:I=_.response;break;case cr.TIMED_OUT:throw new fs(r,_.timeoutMs/1e3)}}finally{clearTimeout(a),f&&this.removeSignatureListener(f)}return I}async getClusterNodes(){let t=await this._rpcRequest("getClusterNodes",[]),e=z(t,st(K(Yf)));if("error"in e)throw new H(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){let e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),n=z(r,Xf);if("error"in n)throw new H(n.error,"failed to get vote accounts");return n.result}async getSlot(t){let{commitment:e,config:r}=_t(t),n=this._buildArgs([],e,void 0,r),o=await this._rpcRequest("getSlot",n),a=z(o,st(x()));if("error"in a)throw new H(a.error,"failed to get slot");return a.result}async getSlotLeader(t){let{commitment:e,config:r}=_t(t),n=this._buildArgs([],e,void 0,r),o=await this._rpcRequest("getSlotLeader",n),a=z(o,st(C()));if("error"in a)throw new H(a.error,"failed to get slot leader");return a.result}async getSlotLeaders(t,e){let r=[t,e],n=await this._rpcRequest("getSlotLeaders",r),o=z(n,st(K(ce)));if("error"in o)throw new H(o.error,"failed to get slot leaders");return o.result}async getSignatureStatus(t,e){let{context:r,value:n}=await this.getSignatureStatuses([t],e);at(n.length===1);let o=n[0];return{context:r,value:o}}async getSignatureStatuses(t,e){let r=[t];e&&r.push(e);let n=await this._rpcRequest("getSignatureStatuses",r),o=z(n,th);if("error"in o)throw new H(o.error,"failed to get signature status");return o.result}async getTransactionCount(t){let{commitment:e,config:r}=_t(t),n=this._buildArgs([],e,void 0,r),o=await this._rpcRequest("getTransactionCount",n),a=z(o,st(x()));if("error"in a)throw new H(a.error,"failed to get transaction count");return a.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){let e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),n=z(r,Bf);if("error"in n)throw new H(n.error,"failed to get inflation");return n.result}async getInflationReward(t,e,r){let{commitment:n,config:o}=_t(r),a=this._buildArgs([t.map(b=>b.toBase58())],n,void 0,{...o,epoch:e??o?.epoch}),f=await this._rpcRequest("getInflationReward",a),h=z(f,pf);if("error"in h)throw new H(h.error,"failed to get inflation reward");return h.result}async getEpochInfo(t){let{commitment:e,config:r}=_t(t),n=this._buildArgs([],e,void 0,r),o=await this._rpcRequest("getEpochInfo",n),a=z(o,xf);if("error"in a)throw new H(a.error,"failed to get epoch info");return a.result}async getEpochSchedule(){let t=await this._rpcRequest("getEpochSchedule",[]),e=z(t,_f);if("error"in e)throw new H(e.error,"failed to get epoch schedule");let r=e.result;return new zo(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){let t=await this._rpcRequest("getLeaderSchedule",[]),e=z(t,Ef);if("error"in e)throw new H(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){let r=this._buildArgs([t],e),n=await this._rpcRequest("getMinimumBalanceForRentExemption",r),o=z(n,eh);return"error"in o?(console.warn("Unable to fetch minimum balance for rent exemption"),0):o.result}async getRecentBlockhashAndContext(t){let e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),n=z(r,ch);if("error"in n)throw new H(n.error,"failed to get recent blockhash");return n.result}async getRecentPerformanceSamples(t){let e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=z(e,hh);if("error"in r)throw new H(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){let r=this._buildArgs([t],e),n=await this._rpcRequest("getFeeCalculatorForBlockhash",r),o=z(n,lh);if("error"in o)throw new H(o.error,"failed to get fee calculator");let{context:a,value:f}=o.result;return{context:a,value:f!==null?f.feeCalculator:null}}async getFeeForMessage(t,e){let r=t.serialize().toString("base64"),n=this._buildArgs([r],e),o=await this._rpcRequest("getFeeForMessage",n),a=z(o,fe(V(x())));if("error"in a)throw new H(a.error,"failed to get slot");if(a.result===null)throw new Error("invalid blockhash");return a.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){let{commitment:e,config:r}=_t(t),n=this._buildArgs([],e,void 0,r),o=await this._rpcRequest("getLatestBlockhash",n),a=z(o,uh);if("error"in a)throw new H(a.error,"failed to get latest blockhash");return a.result}async getVersion(){let t=await this._rpcRequest("getVersion",[]),e=z(t,st(vf));if("error"in e)throw new H(e.error,"failed to get version");return e.result}async getGenesisHash(){let t=await this._rpcRequest("getGenesisHash",[]),e=z(t,st(C()));if("error"in e)throw new H(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){let{commitment:r,config:n}=_t(e),o=this._buildArgsAtLeastConfirmed([t],r,void 0,n),a=await this._rpcRequest("getBlock",o),f=z(a,ih);if("error"in f)throw new H(f.error,"failed to get confirmed block");let h=f.result;return h&&{...h,transactions:h.transactions.map(({transaction:b,meta:k,version:I})=>({meta:k,transaction:{...b,message:Mo(I,b.message)},version:I}))}}async getBlockHeight(t){let{commitment:e,config:r}=_t(t),n=this._buildArgs([],e,void 0,r),o=await this._rpcRequest("getBlockHeight",n),a=z(o,st(x()));if("error"in a)throw new H(a.error,"failed to get block height information");return a.result}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){let{commitment:f,...h}=t;r=f,e=h}let n=this._buildArgs([],r,"base64",e),o=await this._rpcRequest("getBlockProduction",n),a=z(o,kf);if("error"in a)throw new H(a.error,"failed to get block production information");return a.result}async getTransaction(t,e){let{commitment:r,config:n}=_t(e),o=this._buildArgsAtLeastConfirmed([t],r,void 0,n),a=await this._rpcRequest("getTransaction",o),f=z(a,To);if("error"in f)throw new H(f.error,"failed to get transaction");let h=f.result;return h&&{...h,transaction:{...h.transaction,message:Mo(h.version,h.transaction.message)}}}async getParsedTransaction(t,e){let{commitment:r,config:n}=_t(e),o=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n),a=await this._rpcRequest("getTransaction",o),f=z(a,os);if("error"in f)throw new H(f.error,"failed to get transaction");return f.result}async getParsedTransactions(t,e){let{commitment:r,config:n}=_t(e),o=t.map(h=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([h],r,"jsonParsed",n)}));return(await this._rpcBatchRequest(o)).map(h=>{let b=z(h,os);if("error"in b)throw new H(b.error,"failed to get transactions");return b.result})}async getTransactions(t,e){let{commitment:r,config:n}=_t(e),o=t.map(h=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([h],r,void 0,n)}));return(await this._rpcBatchRequest(o)).map(h=>{let b=z(h,To);if("error"in b)throw new H(b.error,"failed to get transactions");let k=b.result;return k&&{...k,transaction:{...k.transaction,message:Mo(k.version,k.transaction.message)}}})}async getConfirmedBlock(t,e){let r=this._buildArgsAtLeastConfirmed([t],e),n=await this._rpcRequest("getConfirmedBlock",r),o=z(n,ah);if("error"in o)throw new H(o.error,"failed to get confirmed block");let a=o.result;if(!a)throw new Error("Confirmed block "+t+" not found");let f={...a,transactions:a.transactions.map(({transaction:h,meta:b})=>{let k=new Ce(h.message);return{meta:b,transaction:{...h,message:k}}})};return{...f,transactions:f.transactions.map(({transaction:h,meta:b})=>({meta:b,transaction:ut.populate(h.message,h.signatures)}))}}async getBlocks(t,e,r){let n=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),o=await this._rpcRequest("getBlocks",n),a=z(o,st(K(x())));if("error"in a)throw new H(a.error,"failed to get blocks");return a.result}async getBlockSignatures(t,e){let r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getBlock",r),o=z(n,za);if("error"in o)throw new H(o.error,"failed to get block");let a=o.result;if(!a)throw new Error("Block "+t+" not found");return a}async getConfirmedBlockSignatures(t,e){let r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getConfirmedBlock",r),o=z(n,za);if("error"in o)throw new H(o.error,"failed to get confirmed block");let a=o.result;if(!a)throw new Error("Confirmed block "+t+" not found");return a}async getConfirmedTransaction(t,e){let r=this._buildArgsAtLeastConfirmed([t],e),n=await this._rpcRequest("getConfirmedTransaction",r),o=z(n,To);if("error"in o)throw new H(o.error,"failed to get transaction");let a=o.result;if(!a)return a;let f=new Ce(a.transaction.message),h=a.transaction.signatures;return{...a,transaction:ut.populate(f,h)}}async getParsedConfirmedTransaction(t,e){let r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),n=await this._rpcRequest("getConfirmedTransaction",r),o=z(n,os);if("error"in o)throw new H(o.error,"failed to get confirmed transaction");return o.result}async getParsedConfirmedTransactions(t,e){let r=t.map(a=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([a],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(a=>{let f=z(a,os);if("error"in f)throw new H(f.error,"failed to get confirmed transactions");return f.result})}async getConfirmedSignaturesForAddress(t,e,r){let n={},o=await this.getFirstAvailableBlock();for(;!("until"in n)&&(e--,!(e<=0||e<o));)try{let h=await this.getConfirmedBlockSignatures(e,"finalized");h.signatures.length>0&&(n.until=h.signatures[h.signatures.length-1].toString())}catch(h){if(h instanceof Error&&h.message.includes("skipped"))continue;throw h}let a=await this.getSlot("finalized");for(;!("before"in n)&&(r++,!(r>a));)try{let h=await this.getConfirmedBlockSignatures(r);h.signatures.length>0&&(n.before=h.signatures[h.signatures.length-1].toString())}catch(h){if(h instanceof Error&&h.message.includes("skipped"))continue;throw h}return(await this.getConfirmedSignaturesForAddress2(t,n)).map(h=>h.signature)}async getConfirmedSignaturesForAddress2(t,e,r){let n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),o=await this._rpcRequest("getConfirmedSignaturesForAddress2",n),a=z(o,Uf);if("error"in a)throw new H(a.error,"failed to get confirmed signatures for address");return a.result}async getSignaturesForAddress(t,e,r){let n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),o=await this._rpcRequest("getSignaturesForAddress",n),a=z(o,Wf);if("error"in a)throw new H(a.error,"failed to get signatures for address");return a.result}async getAddressLookupTable(t,e){let{context:r,value:n}=await this.getAccountInfoAndContext(t,e),o=null;return n!==null&&(o=new ps({key:t,state:ps.deserialize(n.data)})),{context:r,value:o}}async getNonceAndContext(t,e){let{context:r,value:n}=await this.getAccountInfoAndContext(t,e),o=null;return n!==null&&(o=dn.fromAccountData(n.data)),{context:r,value:o}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){let r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),n=z(r,dh);if("error"in n)throw new H(n.error,`airdrop to ${t.toBase58()} failed`);return n.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await fn(100);let r=Date.now()-this._blockhashInfo.lastFetch>=ff;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{let t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let n=0;n<50;n++){let o=await this.getLatestBlockhash("finalized");if(r!==o.blockhash)return this._blockhashInfo={latestBlockhash:o,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},o;await fn(sf/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){let{commitment:e,config:r}=_t(t),n=this._buildArgs([],e,"base64",r),o=await this._rpcRequest("getStakeMinimumDelegation",n),a=z(o,fe(x()));if("error"in a)throw new H(a.error,"failed to get stake minimum delegation");return a.result}async simulateTransaction(t,e,r){if("message"in t){let R=t.serialize(),T=$.from(R).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");let O=e||{};O.encoding="base64","commitment"in O||(O.commitment=this.commitment);let G=[T,O],tt=await this._rpcRequest("simulateTransaction",G),j=z(tt,Ca);if("error"in j)throw new Error("failed to simulate transaction: "+j.error.message);return j.result}let n;if(t instanceof ut){let E=t;n=new ut,n.feePayer=E.feePayer,n.instructions=t.instructions,n.nonceInfo=E.nonceInfo,n.signatures=E.signatures}else n=ut.populate(t),n._message=n._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");let o=e;if(n.nonceInfo&&o)n.sign(...o);else{let E=this._disableBlockhashCaching;for(;;){let R=await this._blockhashWithExpiryBlockHeight(E);if(n.lastValidBlockHeight=R.lastValidBlockHeight,n.recentBlockhash=R.blockhash,!o)break;if(n.sign(...o),!n.signature)throw new Error("!signature");let T=n.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(T)&&!this._blockhashInfo.transactionSignatures.includes(T)){this._blockhashInfo.simulatedSignatures.push(T);break}else E=!0}}let a=n._compile(),f=a.serialize(),b=n._serialize(f).toString("base64"),k={encoding:"base64",commitment:this.commitment};if(r){let E=(Array.isArray(r)?r:a.nonProgramIds()).map(R=>R.toBase58());k.accounts={encoding:"base64",addresses:E}}o&&(k.sigVerify=!0);let I=[b,k],_=await this._rpcRequest("simulateTransaction",I),A=z(_,Ca);if("error"in A){let E;if("data"in A.error&&(E=A.error.data.logs,E&&Array.isArray(E))){let R=`
    `,T=R+E.join(R);console.error(A.error.message,T)}throw new ds("failed to simulate transaction: "+A.error.message,E)}return A.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");let a=t.serialize();return await this.sendRawTransaction(a,r)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");let n=e;if(t.nonceInfo)t.sign(...n);else{let a=this._disableBlockhashCaching;for(;;){let f=await this._blockhashWithExpiryBlockHeight(a);if(t.lastValidBlockHeight=f.lastValidBlockHeight,t.recentBlockhash=f.blockhash,t.sign(...n),!t.signature)throw new Error("!signature");let h=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(h))a=!0;else{this._blockhashInfo.transactionSignatures.push(h);break}}}let o=t.serialize();return await this.sendRawTransaction(o,r)}async sendRawTransaction(t,e){let r=X(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){let r={encoding:"base64"},n=e&&e.skipPreflight,o=e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),n&&(r.skipPreflight=n),o&&(r.preflightCommitment=o);let a=[t,r],f=await this._rpcRequest("sendTransaction",a),h=z(f,ph);if("error"in h){let b;throw"data"in h.error&&(b=h.error.data.logs),new ds("failed to send transaction: "+h.error.message,b)}return h.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{this._rpcWebSocket.notify("ping").catch(()=>{})},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration++,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._subscriptionsByHash[e]={...r,state:"pending"}})}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}let t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{let n=this._subscriptionsByHash[r];if(n!==void 0)switch(n.state){case"pending":case"unsubscribed":if(n.callbacks.size===0){delete this._subscriptionsByHash[r],n.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[n.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{let{args:o,method:a}=n;try{this._subscriptionsByHash[r]={...n,state:"subscribing"};let f=await this._rpcWebSocket.call(a,o);this._subscriptionsByHash[r]={...n,serverSubscriptionId:f,state:"subscribed"},this._subscriptionCallbacksByServerSubscriptionId[f]=n.callbacks,await this._updateSubscriptions()}catch(f){if(f instanceof Error&&console.error(`${a} error for argument`,o,f.message),!e())return;this._subscriptionsByHash[r]={...n,state:"pending"},await this._updateSubscriptions()}})();break;case"subscribed":n.callbacks.size===0&&await(async()=>{let{serverSubscriptionId:o,unsubscribeMethod:a}=n;if(this._subscriptionsAutoDisposedByRpc.has(o))this._subscriptionsAutoDisposedByRpc.delete(o);else{this._subscriptionsByHash[r]={...n,state:"unsubscribing"};try{await this._rpcWebSocket.call(a,[o])}catch(f){if(f instanceof Error&&console.error(`${a} error:`,f.message),!e())return;this._subscriptionsByHash[r]={...n,state:"subscribed"},await this._updateSubscriptions();return}}this._subscriptionsByHash[r]={...n,state:"unsubscribed"},await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){let r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(n=>{try{n(...e)}catch(o){console.error(o)}})}_wsOnAccountNotification(t){let{result:e,subscription:r}=z(t,qf);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){let r=this._nextClientSubscriptionId++,n=Ju([t.method,e],!0),o=this._subscriptionsByHash[n];return o===void 0?this._subscriptionsByHash[n]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:o.callbacks.add(t.callback),this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r];let a=this._subscriptionsByHash[n];at(a!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),a.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){let n=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},n)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){let{result:e,subscription:r}=z(t,Hf);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,n){let o=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",n?{filters:n}:void 0);return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},o)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){let n=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){let{result:e,subscription:r}=z(t,gh);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){let{result:e,subscription:r}=z(t,Vf);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){let{result:e,subscription:r}=z(t,Gf);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){let r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,n){let o=e||this._commitment;if(o||r||n){let a={};r&&(a.encoding=r),o&&(a.commitment=o),n&&(a=Object.assign(a,n)),t.push(a)}return t}_buildArgsAtLeastConfirmed(t,e,r,n){let o=e||this._commitment;if(o&&!["confirmed","finalized"].includes(o))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,n)}_wsOnSignatureNotification(t){let{result:e,subscription:r}=z(t,jf);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){let n=this._buildArgs([t],r||this._commitment||"finalized"),o=this._makeSubscription({callback:(a,f)=>{if(a.type==="status"){e(a.result,f);try{this.removeSignatureListener(o)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return o}onSignatureWithOptions(t,e,r){let{commitment:n,...o}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},a=this._buildArgs([t],n,void 0,o),f=this._makeSubscription({callback:(h,b)=>{e(h,b);try{this.removeSignatureListener(f)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return f}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){let{result:e,subscription:r}=z(t,Zf);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}},br=class{constructor(t){this._keypair=void 0,this._keypair=t??Ba()}static generate(){return new br(Ba())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");let r=t.slice(32,64);if(!e||!e.skipValidation){let n=t.slice(0,32),o=as(n);for(let a=0;a<32;a++)if(r[a]!==o[a])throw new Error("provided secretKey is invalid")}return new br({publicKey:r,secretKey:t})}static fromSeed(t){let e=as(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new br({publicKey:e,secretKey:r})}get publicKey(){return new P(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}},ur=Object.freeze({CreateLookupTable:{index:0,layout:g.struct([g.u32("instruction"),zr("recentSlot"),g.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:g.struct([g.u32("instruction")])},ExtendLookupTable:{index:2,layout:g.struct([g.u32("instruction"),zr(),g.seq(J(),g.offset(g.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:g.struct([g.u32("instruction")])},CloseLookupTable:{index:4,layout:g.struct([g.u32("instruction")])}}),Ka=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let r=g.u32("instruction").decode(t.data),n;for(let[o,a]of Object.entries(ur))if(a.index==r){n=o;break}if(!n)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return n}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);let{recentSlot:e}=lt(ur.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);let{addresses:e}=lt(ur.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(r=>new P(r))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(gs.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},gs=class{constructor(){}static createLookupTable(t){let[e,r]=P.findProgramAddressSync([t.authority.toBuffer(),(0,mn.toBufferLE)(BigInt(t.recentSlot),8)],this.programId),n=ur.CreateLookupTable,o=ot(n,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:de.programId,isSigner:!1,isWritable:!1}];return[new dt({programId:this.programId,keys:a,data:o}),e]}static freezeLookupTable(t){let e=ur.FreezeLookupTable,r=ot(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new dt({programId:this.programId,keys:n,data:r})}static extendLookupTable(t){let e=ur.ExtendLookupTable,r=ot(e,{addresses:t.addresses.map(o=>o.toBytes())}),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&n.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:de.programId,isSigner:!1,isWritable:!1}),new dt({programId:this.programId,keys:n,data:r})}static deactivateLookupTable(t){let e=ur.DeactivateLookupTable,r=ot(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new dt({programId:this.programId,keys:n,data:r})}static closeLookupTable(t){let e=ur.CloseLookupTable,r=ot(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new dt({programId:this.programId,keys:n,data:r})}};gs.programId=new P("AddressLookupTab1e1111111111111111111111111");var Ua=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let r=g.u8("instruction").decode(t.data),n;for(let[o,a]of Object.entries($e))if(a.index==r){n=o;break}if(!n)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return n}static decodeRequestUnits(t){this.checkProgramId(t.programId);let{units:e,additionalFee:r}=lt($e.RequestUnits,t.data);return{units:e,additionalFee:r}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);let{bytes:e}=lt($e.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);let{units:e}=lt($e.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);let{microLamports:e}=lt($e.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(ms.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}},$e=Object.freeze({RequestUnits:{index:0,layout:g.struct([g.u8("instruction"),g.u32("units"),g.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:g.struct([g.u8("instruction"),g.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:g.struct([g.u8("instruction"),g.u32("units")])},SetComputeUnitPrice:{index:3,layout:g.struct([g.u8("instruction"),zr("microLamports")])}}),ms=class{constructor(){}static requestUnits(t){let e=$e.RequestUnits,r=ot(e,t);return new dt({keys:[],programId:this.programId,data:r})}static requestHeapFrame(t){let e=$e.RequestHeapFrame,r=ot(e,t);return new dt({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(t){let e=$e.SetComputeUnitLimit,r=ot(e,t);return new dt({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(t){let e=$e.SetComputeUnitPrice,r=ot(e,{microLamports:BigInt(t.microLamports)});return new dt({keys:[],programId:this.programId,data:r})}};ms.programId=new P("ComputeBudget111111111111111111111111111111");var Wa=64,qa=32,Da=64,Ha=g.struct([g.u8("numSignatures"),g.u8("padding"),g.u16("signatureOffset"),g.u16("signatureInstructionIndex"),g.u16("publicKeyOffset"),g.u16("publicKeyInstructionIndex"),g.u16("messageDataOffset"),g.u16("messageDataSize"),g.u16("messageInstructionIndex")]),yn=class{constructor(){}static createInstructionWithPublicKey(t){let{publicKey:e,message:r,signature:n,instructionIndex:o}=t;at(e.length===qa,`Public Key must be ${qa} bytes but received ${e.length} bytes`),at(n.length===Da,`Signature must be ${Da} bytes but received ${n.length} bytes`);let a=Ha.span,f=a+e.length,h=f+n.length,b=1,k=$.alloc(h+r.length),I=o??65535;return Ha.encode({numSignatures:b,padding:0,signatureOffset:f,signatureInstructionIndex:I,publicKeyOffset:a,publicKeyInstructionIndex:I,messageDataOffset:h,messageDataSize:r.length,messageInstructionIndex:I},k),k.fill(e,a),k.fill(n,f),k.fill(r,h),new dt({keys:[],programId:yn.programId,data:k})}static createInstructionWithPrivateKey(t){let{privateKey:e,message:r,instructionIndex:n}=t;at(e.length===Wa,`Private key must be ${Wa} bytes but received ${e.length} bytes`);try{let o=br.fromSecretKey(e),a=o.publicKey.toBytes(),f=qo(r,o.secretKey);return this.createInstructionWithPublicKey({publicKey:a,message:r,signature:f,instructionIndex:n})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};yn.programId=new P("Ed25519SigVerify111111111111111111111111111");De.hmacSha256Sync=(s,...t)=>{let e=yi.create(wn,s);return t.forEach(r=>e.update(r)),e.digest()};var wh=(s,t)=>Aa(s,t,{der:!1,recovered:!0});De.isValidPrivateKey;var bh=ka,Fa=32,Po=20,Va=64,vh=11,Co=g.struct([g.u8("numSignatures"),g.u16("signatureOffset"),g.u8("signatureInstructionIndex"),g.u16("ethAddressOffset"),g.u8("ethAddressInstructionIndex"),g.u16("messageDataOffset"),g.u16("messageDataSize"),g.u8("messageInstructionIndex"),g.blob(20,"ethAddress"),g.blob(64,"signature"),g.u8("recoveryId")]),vr=class{constructor(){}static publicKeyToEthAddress(t){at(t.length===Va,`Public key must be ${Va} bytes but received ${t.length} bytes`);try{return $.from(qs(X(t))).slice(-Po)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(t){let{publicKey:e,message:r,signature:n,recoveryId:o,instructionIndex:a}=t;return vr.createInstructionWithEthAddress({ethAddress:vr.publicKeyToEthAddress(e),message:r,signature:n,recoveryId:o,instructionIndex:a})}static createInstructionWithEthAddress(t){let{ethAddress:e,message:r,signature:n,recoveryId:o,instructionIndex:a=0}=t,f;typeof e=="string"?e.startsWith("0x")?f=$.from(e.substr(2),"hex"):f=$.from(e,"hex"):f=e,at(f.length===Po,`Address must be ${Po} bytes but received ${f.length} bytes`);let h=1+vh,b=h,k=h+f.length,I=k+n.length+1,_=1,A=$.alloc(Co.span+r.length);return Co.encode({numSignatures:_,signatureOffset:k,signatureInstructionIndex:a,ethAddressOffset:b,ethAddressInstructionIndex:a,messageDataOffset:I,messageDataSize:r.length,messageInstructionIndex:a,signature:X(n),ethAddress:X(f),recoveryId:o},A),A.fill(X(r),Co.span),new dt({keys:[],programId:vr.programId,data:A})}static createInstructionWithPrivateKey(t){let{privateKey:e,message:r,instructionIndex:n}=t;at(e.length===Fa,`Private key must be ${Fa} bytes but received ${e.length} bytes`);try{let o=X(e),a=bh(o,!1).slice(1),f=$.from(qs(X(r))),[h,b]=wh(f,o);return this.createInstructionWithPublicKey({publicKey:a,message:r,signature:h,recoveryId:b,instructionIndex:n})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};vr.programId=new P("KeccakSecp256k11111111111111111111111111111");var kh=new P("StakeConfig11111111111111111111111111111111"),Uo=class{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}},Nr=class{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}};Nr.default=new Nr(0,0,P.default);var $a=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let r=g.u32("instruction").decode(t.data),n;for(let[o,a]of Object.entries(ye))if(a.index==r){n=o;break}if(!n)throw new Error("Instruction type incorrect; not a StakeInstruction");return n}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{authorized:e,lockup:r}=lt(ye.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new Uo(new P(e.staker),new P(e.withdrawer)),lockup:new Nr(r.unixTimestamp,r.epoch,new P(r.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),lt(ye.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{newAuthorized:e,stakeAuthorizationType:r}=lt(ye.Authorize,t.data),n={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new P(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(n.custodianPubkey=t.keys[3].pubkey),n}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{newAuthorized:e,stakeAuthorizationType:r,authoritySeed:n,authorityOwner:o}=lt(ye.AuthorizeWithSeed,t.data),a={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:n,authorityOwner:new P(o),newAuthorizedPubkey:new P(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(a.custodianPubkey=t.keys[3].pubkey),a}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:e}=lt(ye.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),lt(ye.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);let{lamports:e}=lt(ye.Withdraw,t.data),r={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(r.custodianPubkey=t.keys[5].pubkey),r}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),lt(ye.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(gn.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},ye=Object.freeze({Initialize:{index:0,layout:g.struct([g.u32("instruction"),Wu(),qu()])},Authorize:{index:1,layout:g.struct([g.u32("instruction"),J("newAuthorized"),g.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:g.struct([g.u32("instruction")])},Split:{index:3,layout:g.struct([g.u32("instruction"),g.ns64("lamports")])},Withdraw:{index:4,layout:g.struct([g.u32("instruction"),g.ns64("lamports")])},Deactivate:{index:5,layout:g.struct([g.u32("instruction")])},Merge:{index:7,layout:g.struct([g.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:g.struct([g.u32("instruction"),J("newAuthorized"),g.u32("stakeAuthorizationType"),mr("authoritySeed"),J("authorityOwner")])}}),Dd=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),gn=class{constructor(){}static initialize(t){let{stakePubkey:e,authorized:r,lockup:n}=t,o=n||Nr.default,a=ye.Initialize,f=ot(a,{authorized:{staker:X(r.staker.toBuffer()),withdrawer:X(r.withdrawer.toBuffer())},lockup:{unixTimestamp:o.unixTimestamp,epoch:o.epoch,custodian:X(o.custodian.toBuffer())}}),h={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ln,isSigner:!1,isWritable:!1}],programId:this.programId,data:f};return new dt(h)}static createAccountWithSeed(t){let e=new ut;e.add(de.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:n,lockup:o}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:o}))}static createAccount(t){let e=new ut;e.add(de.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:n,lockup:o}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:o}))}static delegate(t){let{stakePubkey:e,authorizedPubkey:r,votePubkey:n}=t,o=ye.Delegate,a=ot(o);return new ut().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:Ve,isSigner:!1,isWritable:!1},{pubkey:_o,isSigner:!1,isWritable:!1},{pubkey:kh,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static authorize(t){let{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:o,custodianPubkey:a}=t,f=ye.Authorize,h=ot(f,{newAuthorized:X(n.toBuffer()),stakeAuthorizationType:o.index}),b=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Ve,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return a&&b.push({pubkey:a,isSigner:!1,isWritable:!1}),new ut().add({keys:b,programId:this.programId,data:h})}static authorizeWithSeed(t){let{stakePubkey:e,authorityBase:r,authoritySeed:n,authorityOwner:o,newAuthorizedPubkey:a,stakeAuthorizationType:f,custodianPubkey:h}=t,b=ye.AuthorizeWithSeed,k=ot(b,{newAuthorized:X(a.toBuffer()),stakeAuthorizationType:f.index,authoritySeed:n,authorityOwner:X(o.toBuffer())}),I=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:Ve,isSigner:!1,isWritable:!1}];return h&&I.push({pubkey:h,isSigner:!1,isWritable:!1}),new ut().add({keys:I,programId:this.programId,data:k})}static splitInstruction(t){let{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,lamports:o}=t,a=ye.Split,f=ot(a,{lamports:o});return new dt({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:f})}static split(t){let e=new ut;return e.add(de.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),e.add(this.splitInstruction(t))}static splitWithSeed(t){let{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,basePubkey:o,seed:a,lamports:f}=t,h=new ut;return h.add(de.allocate({accountPubkey:n,basePubkey:o,seed:a,space:this.space,programId:this.programId})),h.add(this.splitInstruction({stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,lamports:f}))}static merge(t){let{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:n}=t,o=ye.Merge,a=ot(o);return new ut().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Ve,isSigner:!1,isWritable:!1},{pubkey:_o,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static withdraw(t){let{stakePubkey:e,authorizedPubkey:r,toPubkey:n,lamports:o,custodianPubkey:a}=t,f=ye.Withdraw,h=ot(f,{lamports:o}),b=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:Ve,isSigner:!1,isWritable:!1},{pubkey:_o,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return a&&b.push({pubkey:a,isSigner:!1,isWritable:!1}),new ut().add({keys:b,programId:this.programId,data:h})}static deactivate(t){let{stakePubkey:e,authorizedPubkey:r}=t,n=ye.Deactivate,o=ot(n);return new ut().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Ve,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}};gn.programId=new P("Stake11111111111111111111111111111111111111");gn.space=200;var Wo=class{constructor(t,e,r,n){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=r,this.commission=n}},Ga=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let r=g.u32("instruction").decode(t.data),n;for(let[o,a]of Object.entries(Ge))if(a.index==r){n=o;break}if(!n)throw new Error("Instruction type incorrect; not a VoteInstruction");return n}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);let{voteInit:e}=lt(Ge.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new Wo(new P(e.nodePubkey),new P(e.authorizedVoter),new P(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{newAuthorized:e,voteAuthorizationType:r}=lt(Ge.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new P(e),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:r,newAuthorized:n,voteAuthorizationType:o}}=lt(Ge.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new P(e),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new P(n),voteAuthorizationType:{index:o},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:e}=lt(Ge.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(kr.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},Ge=Object.freeze({InitializeAccount:{index:0,layout:g.struct([g.u32("instruction"),Du()])},Authorize:{index:1,layout:g.struct([g.u32("instruction"),J("newAuthorized"),g.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:g.struct([g.u32("instruction"),g.ns64("lamports")])},AuthorizeWithSeed:{index:10,layout:g.struct([g.u32("instruction"),Hu()])}}),Hd=Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),kr=class{constructor(){}static initializeAccount(t){let{votePubkey:e,nodePubkey:r,voteInit:n}=t,o=Ge.InitializeAccount,a=ot(o,{voteInit:{nodePubkey:X(n.nodePubkey.toBuffer()),authorizedVoter:X(n.authorizedVoter.toBuffer()),authorizedWithdrawer:X(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),f={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ln,isSigner:!1,isWritable:!1},{pubkey:Ve,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a};return new dt(f)}static createAccount(t){let e=new ut;return e.add(de.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){let{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:o}=t,a=Ge.Authorize,f=ot(a,{newAuthorized:X(n.toBuffer()),voteAuthorizationType:o.index}),h=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Ve,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new ut().add({keys:h,programId:this.programId,data:f})}static authorizeWithSeed(t){let{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:o,voteAuthorizationType:a,votePubkey:f}=t,h=Ge.AuthorizeWithSeed,b=ot(h,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:X(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:X(o.toBuffer()),voteAuthorizationType:a.index}}),k=[{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:Ve,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return new ut().add({keys:k,programId:this.programId,data:b})}static withdraw(t){let{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:o}=t,a=Ge.Withdraw,f=ot(a,{lamports:n}),h=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new ut().add({keys:h,programId:this.programId,data:f})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insuffcient funds.");return kr.withdraw(t)}};kr.programId=new P("Vote111111111111111111111111111111111111111");kr.space=3731;var Sh=new P("Va1idator1nfo111111111111111111111111111111"),Ih=M({name:C(),website:Y(C()),details:Y(C()),keybaseUsername:Y(C())}),ws=class{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(Ee(e)!==2)return null;let n=[];for(let o=0;o<2;o++){let a=new P(e.slice(0,Ke));e=e.slice(Ke);let f=e.slice(0,1)[0]===1;e=e.slice(1),n.push({publicKey:a,isSigner:f})}if(n[0].publicKey.equals(Sh)&&n[1].isSigner){let o=mr().decode($.from(e)),a=JSON.parse(o);return ro(a,Ih),new ws(n[1].publicKey,a)}return null}},Fd=new P("Vote111111111111111111111111111111111111111"),Ah=g.struct([J("nodePubkey"),J("authorizedWithdrawer"),g.u8("commission"),g.nu64(),g.seq(g.struct([g.nu64("slot"),g.u32("confirmationCount")]),g.offset(g.u32(),-8),"votes"),g.u8("rootSlotValid"),g.nu64("rootSlot"),g.nu64(),g.seq(g.struct([g.nu64("epoch"),J("authorizedVoter")]),g.offset(g.u32(),-8),"authorizedVoters"),g.struct([g.seq(g.struct([J("authorizedPubkey"),g.nu64("epochOfLastAuthorizedSwitch"),g.nu64("targetEpoch")]),32,"buf"),g.nu64("idx"),g.u8("isEmpty")],"priorVoters"),g.nu64(),g.seq(g.struct([g.nu64("epoch"),g.nu64("credits"),g.nu64("prevCredits")]),g.offset(g.u32(),-8),"epochCredits"),g.struct([g.nu64("slot"),g.nu64("timestamp")],"lastTimestamp")]),bs=class{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){let r=Ah.decode(X(t),4),n=r.rootSlot;return r.rootSlotValid||(n=null),new bs({nodePubkey:new P(r.nodePubkey),authorizedWithdrawer:new P(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:n,authorizedVoters:r.authorizedVoters.map(Bh),priorVoters:xh(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}};function Bh({authorizedVoter:s,epoch:t}){return{epoch:t,authorizedVoter:new P(s)}}function ja({authorizedPubkey:s,epochOfLastAuthorizedSwitch:t,targetEpoch:e}){return{authorizedPubkey:new P(s),epochOfLastAuthorizedSwitch:t,targetEpoch:e}}function xh({buf:s,idx:t,isEmpty:e}){return e?[]:[...s.slice(t+1).map(ja),...s.slice(0,t).map(ja)]}var Za={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Vd(s,t){let e=t===!1?"http":"https";if(!s)return Za[e].devnet;let r=Za[e][s];if(!r)throw new Error(`Unknown ${e} cluster: ${s}`);return r}async function $d(s,t,e,r){let n,o;e&&Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")?(n=e,o=r):o=e;let a=o&&{skipPreflight:o.skipPreflight,preflightCommitment:o.preflightCommitment||o.commitment,minContextSlot:o.minContextSlot},f=await s.sendRawTransaction(t,a),h=o&&o.commitment,k=(await(n?s.confirmTransaction(n,h):s.confirmTransaction(f,h))).value;if(k.err)throw new Error(`Raw transaction ${f} failed (${JSON.stringify(k)})`);return f}var Gd=1e9;export{cs as a,_a as b,is as c,Nu as d,Ke as e,P as f,Ra as g,Cd as h,wr as i,Do as j,hn as k,us as l,fs as m,Cr as n,Ce as o,fr as p,tc as q,cr as r,dt as s,ut as t,hs as u,ls as v,Ve as w,Od as x,zd as y,xo as z,ln as A,Nd as B,Kd as C,Ud as D,_o as E,Eo as F,Vu as G,La as H,dn as I,Ma as J,kt as K,de as L,hr as M,Wd as N,Ta as O,zo as P,ds as Q,qd as R,H as S,ps as T,ff as U,Na as V,br as W,ur as X,Ka as Y,gs as Z,Ua as _,$e as $,ms as aa,yn as ba,vr as ca,kh as da,Uo as ea,Nr as fa,$a as ga,ye as ha,Dd as ia,gn as ja,Wo as ka,Ga as la,Hd as ma,kr as na,Sh as oa,ws as pa,Fd as qa,bs as ra,Vd as sa,$d as ta,Gd as ua};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-AFZ6A2B3.js.map
