import{b as G}from"./chunk-BARA7AIG.js";import{p as D}from"./chunk-3XTUMVWB.js";import{a as M}from"./chunk-FK5ARFJK.js";import{d as N}from"./chunk-MNZIO3NP.js";import{a as A}from"./chunk-HTLOGWI7.js";import{b as k}from"./chunk-MRB2XFLQ.js";import{o as J}from"./chunk-5QMHGZLF.js";import{S as C,T as P}from"./chunk-HPWCPLRR.js";import{d as L,f as z}from"./chunk-DEOJU4Z3.js";import{t as u}from"./chunk-N2BCRNDB.js";import{Db as l,bc as c,rc as H}from"./chunk-TM67VPZU.js";import{R as j,z as m}from"./chunk-UWJLNJLY.js";import{b as K}from"./chunk-JWYCKY2V.js";import{f as F,o as y,q as w}from"./chunk-6KXF36WM.js";y();w();var t=F(K()),v=F(J());j();z();H();var U="0";function ft(d){let s=N(c)||{},n=A(l,d),[g,r]=(0,t.useState)(!0),[S,i]=(0,t.useState)(""),[p,E]=(0,t.useState)(""),f=async()=>{try{let{status:o}=await M({chainId:s?.chainId,coinId:c,address:n});E(o),o===u.NOT_STARTED?i(m("wallet_dialog_modal_not_registered")):o===u.PROCESSING?i(m("wallet_extension_transaction_notif_address_registering",{net:s?.chainName})):i("")}catch{i(m("wallet_extension_transaction_notif_address_register_fail",{net:s?.chainName}))}finally{r(!1)}},I=k("wallet-tx-status-toast",{onError:f,pollingInterval:10*1e3});return(0,t.useEffect)(()=>{f()},[I]),{loading:g,registerError:S,registerStatus:p}}function ut(d,s){let{transactions:n}=d?.params||{},g=(0,v.usePrevious)(s),r=A(l,d?.walletId),[S,i]=(0,t.useState)(),{preExecuteRet:p,updateAndExecute:E}=G({coinId:c}),f=(0,t.useRef)(0),[I,o]=(0,t.useState)(!1),[O,_]=(0,t.useState)(!1),[q,W]=(0,t.useState)(null),X=async()=>{let e=await C({coinId:c,address:r},{fromAddr:r,toAddr:""});return W(e),e},h=async e=>{let a={type:"multi_contract_call",nonce:e?.info?.nonce,maxFee:f.current||U,chainId:D.StarknetChainId.SN_MAIN,multiContractCallData:{from:r,calls:n}};return(await L().signTransaction(a,r,l))?.signature},b=async e=>{let{data:a}=await P({coinId:c,address:r,inputData:e});return o(a?.queryGasLimitErrorUseDefault),a?.queryGasLimitErrorUseDefault?U:a?.gasLimit},T=async()=>{try{let e=await X(),a=await h(e),x=await b(a);f.current=x;let B=await h(e),R=n?.[0]?.contractAddress||n?.[0]?.contract_address;E({value:0,from:r,to:R,txType:3,tokenAddress:R,data:B}),i(x)}catch{o(!0)}finally{_(!1)}};return(0,t.useEffect)(()=>{n&&(_(!0),T())},[n]),(0,t.useEffect)(()=>{g===u.PROCESSING&&s===u.COMPLETED&&(_(!0),T())},[s]),{feeInt:S,feeLoading:O,feeError:I,signInfo:q,preExecuteRet:p?.[0]}}export{ft as a,ut as b};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-R6YCEOUY.js.map
