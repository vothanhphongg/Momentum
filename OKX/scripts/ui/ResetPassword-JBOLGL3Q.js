import{a as w,b as Z,c as O}from"./chunk-4EEXXMXA.js";import{a as y,b as L}from"./chunk-X4AGSDQV.js";import"./chunk-KBS3PMLQ.js";import"./chunk-7GKX3YKG.js";import"./chunk-3NWEQ7OH.js";import{n as v}from"./chunk-XKL64FTO.js";import"./chunk-PTD7UCOR.js";import"./chunk-ETJEH7T4.js";import{a as A}from"./chunk-V3IFYKWM.js";import"./chunk-EWTTD4DL.js";import{h as U}from"./chunk-ITY22AD4.js";import"./chunk-B3JSNQIV.js";import{a as z}from"./chunk-YALUYHLV.js";import"./chunk-I3CPAVOC.js";import"./chunk-ARWSGU73.js";import"./chunk-CZ2ZBAZV.js";import{o as X}from"./chunk-5QMHGZLF.js";import{ec as $}from"./chunk-HPWCPLRR.js";import"./chunk-TSTPZ3JM.js";import"./chunk-D2LKUI4F.js";import"./chunk-ON6S2DB7.js";import"./chunk-SZD6WTBQ.js";import"./chunk-ASR4HLU7.js";import"./chunk-ANIUN6US.js";import"./chunk-3DZ7WRLL.js";import{d as N,f as W}from"./chunk-DEOJU4Z3.js";import"./chunk-XV444F26.js";import"./chunk-N2BCRNDB.js";import"./chunk-43VURGIT.js";import"./chunk-TM67VPZU.js";import"./chunk-VW6OQNWT.js";import{D as d,H as B,q as n}from"./chunk-PUSMMCUD.js";import{G as S,R as Q,z as e}from"./chunk-UWJLNJLY.js";import"./chunk-VRY2ADKE.js";import"./chunk-5U7FO2PW.js";import"./chunk-PDUOSATP.js";import"./chunk-XDY6V34Y.js";import"./chunk-YJFNO57I.js";import"./chunk-DZ6CTC22.js";import{ea as _}from"./chunk-JT3LNHPY.js";import"./chunk-47UWF72W.js";import{b as K}from"./chunk-JWYCKY2V.js";import"./chunk-G2266BV2.js";import"./chunk-L4PAIYPH.js";import"./chunk-UT7LJPKF.js";import"./chunk-AFZ6A2B3.js";import"./chunk-VVPY7ZA7.js";import"./chunk-KUW5VATV.js";import"./chunk-BNAVWOJ2.js";import"./chunk-IG2Q5ALZ.js";import"./chunk-WOMUNWBT.js";import"./chunk-7U3DN5ZD.js";import"./chunk-QYVQBXDG.js";import"./chunk-7D4PUIEN.js";import"./chunk-7QO4TZYQ.js";import"./chunk-FF4LY6PE.js";import"./chunk-76KCDJDG.js";import"./chunk-YDUDQP2P.js";import"./chunk-PGPFV4JQ.js";import"./chunk-MIBHDVGP.js";import"./chunk-7VFUX7IX.js";import"./chunk-XLF4LAH2.js";import"./chunk-ONKZ57T6.js";import"./chunk-ZC7Q7LCH.js";import{f as g,o as t,q as a}from"./chunk-6KXF36WM.js";t();a();var s=g(K()),M=g($()),i=g(X());Q();W();t();a();var V={root:"_root_1r48s_1"};t();a();t();a();function R(){return{updatePasskey:async I=>{}}}var D=R;var G=D;var Fs=({history:E})=>{let I=(0,M.useDispatch)(),p=d.useForm(),[r,Y]=s.default.useState({}),[j,b]=s.default.useState(null),[k,{setTrue:q,setFalse:x}]=(0,i.useBoolean)(!1),c=(0,s.useRef)(),C=(0,i.useMemoizedFn)(()=>{c.current=v(r.oldPassword).then(()=>(b(null),p.cleanErrors("oldPassword"),!0)).catch(()=>{let o=e("wallet_set_password_errortip_password_wrong");return b(o),p.setErrors({oldPassword:o}),!1})}),{updatePasskey:H}=G();(0,i.useThrottleEffect)(()=>{!r.oldPassword||C()},[r.oldPassword],{wait:500});let P=!!j||!r.oldPassword||!r.password||!r.confirm||r.password?.length<y||r.confirm?.length<y,T=(0,i.useMemoizedFn)(async()=>{let{password:o,confirm:m}=r;if(P||k)return;if(o!==m){p.setErrors({confirm:e("wallet_settings_reset_passord_errortip_input_error")});return}if(q(),c.current||C(),!await c.current){x();return}if(await N().modifyPassword(m)){let[l]=await S(H(m));l&&I(U(1)),B.success(e("wallet_edit_wallet_toast_renamed_success")),E.push(z)}x()},[P,r]),F=(0,s.useCallback)(async o=>{(o?.key==="Enter"||o?.keyCode===13)&&await T()},[]),J=O();return(0,s.useEffect)(()=>(document.addEventListener("keydown",F),()=>{document.removeEventListener("keydown",F)}),[]),s.default.createElement(Z,{className:V.root,title:e("wallet_settings_reset_passord_maintitle_reset_password"),desc:e("wallet_extension_subtitle_password_unlock")},({formClass:o,formErrorClass:m,itemClass:f})=>s.default.createElement(d,{form:p,size:n.SIZE.lg,validateTrigger:["onChange","onBlur"],className:o,errorClassName:m,onValuesChange:(u,l)=>{Y(l)}},s.default.createElement(d.Item,{name:"oldPassword",style:{marginBottom:0},label:e("wallet_settings_reset_passord_subtitle_old_password"),className:f},s.default.createElement(n.Password,{autoFocus:!0,autoComplete:"off",size:n.SIZE.xl,inputClassName:w.passwordInput,placeholder:e("wallet_settings_reset_passord_placeholder_input_old_password",void 0,{useBr:!1})})),s.default.createElement(d.Item,{name:"password",style:{marginBottom:0,marginTop:"32px"},className:f,label:e("wallet_settings_reset_passord_subtitle_new_password")},s.default.createElement(n.Password,{autoComplete:"off",size:n.SIZE.xl,inputClassName:w.passwordInput,placeholder:e("wallet_settings_reset_passord_placeholder_input_desc",void 0,{useBr:!1})})),s.default.createElement(d.Item,{noStyle:!0,shouldUpdate:(u,l)=>u.password!==l.password},({getFieldValue:u})=>{let l=u("password");return s.default.createElement(L,{password:l})}),s.default.createElement(d.Item,{name:"confirm",className:f,label:e("wallet_settings_reset_passord_subtitle_password_confirmation"),style:{flex:1,marginTop:"32px"}},s.default.createElement(n.Password,{autoComplete:"off",size:n.SIZE.xl,inputClassName:w.passwordInput,placeholder:e("wallet_settings_reset_passord_placeholder_input_password_confirmation",void 0,{useBr:!1}),onChange:()=>{p.cleanErrors("confirm")}})),s.default.createElement(A.FooterActions,{usePortal:!0,renderNative:!0,affixStyle:J,buttonGroup:[{loading:k,disabled:P,block:!0,type:_.TYPE.highlight,category:_.CATEGORY.fill,size:_.SIZE.lg,onClick:T,btnText:e("wallet_set_password_btn_confirm")}]})))};export{Fs as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=ResetPassword-JBOLGL3Q.js.map
