import{a as Re,b as Ye}from"./chunk-V4UEXA3W.js";import{a as q}from"./chunk-67MFCNYA.js";import{a as Oe}from"./chunk-E6D4MUZI.js";import"./chunk-XPBGCEDJ.js";import{a as Ne}from"./chunk-QSL2SH2P.js";import{a as Ie}from"./chunk-2MXPW7CS.js";import{a as ke}from"./chunk-Q5NFQSZP.js";import{a as he}from"./chunk-PH4IFPBJ.js";import{a as De,b as Ae,c as Le,d as we}from"./chunk-3USV7RH4.js";import{b as be}from"./chunk-W4FUIZTR.js";import{c as Ue,e as Ce}from"./chunk-V7L2VEJW.js";import"./chunk-E4DNCCNP.js";import"./chunk-HDSEENZ7.js";import{a as L,i as Ee,k as Pe}from"./chunk-ZE7UTNU6.js";import{f as i,g as ae}from"./chunk-5QJIR6ZJ.js";import{b as ie}from"./chunk-H6SNSZIS.js";import"./chunk-J4ZKBKEJ.js";import{g as ve,h as Fe}from"./chunk-RH4ISAHA.js";import{m as xe}from"./chunk-ECQND2NK.js";import"./chunk-M5NI6HPE.js";import"./chunk-YQHUKBMA.js";import"./chunk-VM2NMLPX.js";import{a as K}from"./chunk-PQK3LXXN.js";import{$c as ho,Zc as A}from"./chunk-FTRHGHDS.js";import{m as Te}from"./chunk-A6Z53EN6.js";import"./chunk-LL63GZNI.js";import"./chunk-M7CL2K7X.js";import"./chunk-W2CTJYFJ.js";import"./chunk-XUKVTAH5.js";import"./chunk-5OJTPISL.js";import"./chunk-7UPVX2FL.js";import"./chunk-BSFXZ46S.js";import"./chunk-ZMCTBWUY.js";import"./chunk-TSTPZ3JM.js";import{a as bo}from"./chunk-ON6S2DB7.js";import"./chunk-VW6OQNWT.js";import"./chunk-PUSMMCUD.js";import{C as H,R as Co}from"./chunk-UWJLNJLY.js";import{I as p,K as Me,L as ye,R as G,T as _e,j as se,ra as ge}from"./chunk-XDY6V34Y.js";import{ea as y}from"./chunk-JT3LNHPY.js";import"./chunk-47UWF72W.js";import{b as Se}from"./chunk-JWYCKY2V.js";import"./chunk-G2266BV2.js";import"./chunk-NM2PDVBD.js";import"./chunk-7VFUX7IX.js";import{f as B,o as N,q as D}from"./chunk-6KXF36WM.js";N();D();var e=B(Se()),Qe=B(ho());ge();Co();N();D();var T=B(Se()),Be=B(bo());ge();function Ge({currentMode:t,computeBuyDefaultPresetList:r,computedSellDefaultPresetList:s}){return{defaultPresetList:(0,T.useMemo)(()=>t==="buy"?r:s,[t,r,s])}}function He({tradeScene:t,computedQuoteSafemoon:r}){return{safeMoonToken:(0,T.useMemo)(()=>t===0?r:"",[t,r])}}function Ke(){let{getUsd:t}=q();return{formatUSD:s=>ye(s)||Me(s)?"--":t(s)}}function qe({priorityFeeState:t,priorityFee:r,tradeScene:s,solSinglePrice:l}){let[u,c]=(0,T.useMemo)(()=>[t.baseFee||0,t.baseFeeUsd||0],[t]),n=(0,T.useMemo)(()=>parseFloat(r)||0,[r]),[v,F]=(0,T.useMemo)(()=>{let f=n;s===0&&(f=K.add(n,u));let _=K.mul(l||0,f);return[K.mul(l||0,n),_]},[n,u,l,s]);return{baseFeeValue:u,baseFeeUsd:c,priorityFeeForShow:n,priorityFeeUSD:v,totalFeeUSD:F}}function je({defaultPresetList:t,id:r,setPriorityFee:s,priorityFeeType:l,setPriorityFeeType:u,setPriorityFeeError:c,slippage:n,setSlippage:v,setSlippageError:F,slippageType:f,setSlippageType:_,feeMap:C,slippageMode:x,setSlippageMode:w,customMax:g,setCustomMax:b,setCustomMaxError:o,priorityMode:E,setPriorityMode:P,setManualType:h}){let a=(0,T.useMemo)(()=>t.find(S=>S.id===r)||null,[t,r]);return{resetDisabled:(0,T.useMemo)(()=>a?p(i(a.slippage.value),n)&&p(a.slippage.type,f)&&p(a.priorityFee.type,l)&&p(a.slippage.mode,x)&&p(i(a.slippage.customMax),g)&&p(a.priorityMode,E):!0,[a,n,f,l,x,g,E]),handleReset:()=>{u(a.priorityFee.type),v(i(a.slippage.value)),_(a.slippage.type),s(C[a.priorityFee.type].amount),w(a.slippage.mode),b(i(a.slippage.customMax)),P(a.priorityMode),h(a.manualType),F(!1),c(!1),o(!1)}}}var Ao=({priorityMode:t,manualType:r},s)=>s.priorityMode===t&&t==="auto"?!0:s.priorityMode===t&&t==="manual"&&s.manualType===r;function ze({slippageType:t,initState:r,slippage:s,priorityFee:l,priorityFeeType:u,slippageMode:c,customMax:n,currentPreset:v,slippageState:F,presetPriorityFee:f,currentPresetList:_,currentPresetId:C,setCurrentPresetList:x,currentMode:w,onClose:g,priorityMode:b,manualType:o}){let E=(0,Be.useHistory)(),P=Oe(xe);return{handleConfirm:()=>{if(P({custom_or_auto:t}),!(p(r.mode,c)&&p(r.slippage,s)&&p(r.slippageType,t)&&p(r.priorityFee,l)&&p(r.priorityFeeType,u)&&p(r.customMax,n)&&Ao({priorityMode:b,manualType:o},r))){let I=G({},v,{slippage:G({},F,{value:s?ae(s):"",type:t,mode:c,customMax:n?ae(n):""}),priorityFee:G({},f,{value:u===L.CUSTOM?l:"",type:u}),priorityMode:b,manualType:o}),U=_.map(S=>S.id===C?I:S);x(U),Fe.info(ve.MEME_SWAP_CUSTOM_PRESET,{data:{customPreset:I,currentMode:w}})}g?g():E.goBack()}}}N();D();var d={root:"_root_11mr5_1",name:"_name_11mr5_8",mev:"_mev_11mr5_9",slippage:"_slippage_11mr5_10",priority:"_priority_11mr5_11",btns:"_btns_11mr5_14",notice:"_notice_11mr5_23","notice-title":"_notice-title_11mr5_29",noticeTitle:"_notice-title_11mr5_29","notice-text":"_notice-text_11mr5_32",noticeText:"_notice-text_11mr5_32"};var Lo=Te(({onClose:t})=>{let{useMemeStore:r}=be().hooks,{quoteStore:s,configStore:l}=r(),{currentMode:u,tradeScene:c,computedConfig:n}=l,v=se(n,"mevPriceThreshold"),F=se(n,"nativeTokenInfo.chainName"),{computedQuoteSafemoon:f,jitoIsSuccess:_,computedAutoSlippage:C,mevUnstableShowLevel:x}=s,{chainSymbol:w}=Ie(),{currentPreset:g}=De(),b=_e(Pe,["name","amountList"]),{slippage:o,priorityFee:E,id:P,priorityMode:h,manualType:a}={...b,...g},I=(0,e.useMemo)(()=>P?.includes(Ee),[P]),[U,S]=(0,e.useState)("auto"),[j,z]=(0,e.useState)(0);(0,e.useEffect)(()=>{S(h),z(a)},[h,a]);let ne=he({priorityMode:U,manualType:j,jitoIsSuccess:_,mevUnstableShowLevel:x}),We=Ne(ne),{formatPriorityFee:m}=Ae({priorityFee:E,isEnableMev:We}),[O,Q]=(0,e.useState)(o.mode);(0,e.useEffect)(()=>{Q(o.mode)},[o.mode]);let[W,X]=(0,e.useState)(i(o.customMax));(0,e.useEffect)(()=>{X(i(o.customMax))},[o.customMax]);let[Xe,me]=(0,e.useState)(!1),[Z,J]=(0,e.useState)(i(o.value)),[Y,$]=(0,e.useState)(o.type),[Ze,pe]=(0,e.useState)(!1);(0,e.useEffect)(()=>{J(i(o.value)),$(o.type)},[o.value,o.type]);let[ee,oe]=(0,e.useState)(m.value),[k,le]=(0,e.useState)(m.type),[Je,ue]=(0,e.useState)(!1),[$e,eo]=(0,e.useState)(m.type!==L.CUSTOM?m.type:L.MARKET);(0,e.useEffect)(()=>{k!==L.CUSTOM&&oe(m.value)},[m.value,k]);let oo=O==="fixed"&&Ze||O==="dynamic"&&Xe||Je||ne===6,to={mode:o.mode,customMax:i(o.customMax),slippage:i(o.value),slippageType:o.type,priorityFee:m.value,priorityFeeType:m.type,priorityMode:h,manualType:a},ro={low:i(o.config.low),medium:i(o.config.medium),high:i(o.config.high)},ce=i(o.min),de=i(o.max),te=i(C),so=i(o.dynamicMax),io=i(o.dynamicMin),ao=i(o.recommendMax),no=i(o.recommendMin),{computeBuyDefaultPresetList:mo,computedSellDefaultPresetList:po}=ke(),{defaultPresetList:lo}=Ge({currentMode:u,computeBuyDefaultPresetList:mo,computedSellDefaultPresetList:po}),{setCurrentPresetList:uo,currentPresetId:co,currentPresetList:fo}=we(),{handleReset:Mo,resetDisabled:yo}=je({defaultPresetList:lo,id:P,setPriorityFee:oe,priorityFeeType:k,setPriorityFeeType:le,slippage:Z,setSlippage:J,slippageType:Y,setSlippageType:$,slippageMode:O,setSlippageMode:Q,customMax:W,setCustomMax:X,setPriorityFeeError:ue,setSlippageError:pe,setCustomMaxError:me,feeMap:m.config,priorityMode:U,setPriorityMode:S,setManualType:z}),{handleConfirm:_o}=ze({slippageType:Y,initState:to,slippage:Z,priorityFee:ee,priorityFeeType:k,slippageMode:O,customMax:W,currentPreset:g,slippageState:o,presetPriorityFee:E,currentPresetList:fo,currentPresetId:co,setCurrentPresetList:uo,currentMode:u,onClose:t,priorityMode:U,manualType:j}),{solSinglePrice:go}=Le(),{baseFeeValue:So,baseFeeUsd:To,totalFeeUSD:vo,priorityFeeUSD:Fo,priorityFeeForShow:xo}=qe({priorityFeeState:m,priorityFee:ee,tradeScene:c,solSinglePrice:go}),{formatUSD:re}=Ke(),{safeMoonToken:fe}=He({tradeScene:c,computedQuoteSafemoon:f}),Eo=M=>Ye({value:M,min:ce,max:de,level:Y,auto:te,safemoon:fe}),{getTokenAmount:Po,getUsd:Uo}=q();return e.default.createElement("div",{className:d.root},c===0&&e.default.createElement(Re,{className:d.mev,setMode:S,priorityMode:U,setManualType:z,manualType:j,mevUnstableShowLevel:x,jitoIsSuccess:_,mevPriceThreshold:v,chainName:F}),e.default.createElement(Ce,{className:d.slippage,mode:O,fixedData:{value:Z,level:Y,levelMap:ro,min:ce,max:de,validator:Eo,auto:te},dynamicData:{showDynamicSlippage:!0,dynamicSlippage:te,supportCustomMax:o.supportCustomMax,customMax:W,dynamicMax:so,dynamicMin:io,recommendMax:ao,recommendMin:no,safemoon:fe},onChange:({mode:M,fixedData:R,dynamicData:V})=>{Q(M),M===ie.FIXED&&(J(R.value),$(R.level),pe(R.error)),M===ie.DYNAMIC&&(X(V.customMax),me(V.error))}}),e.default.createElement(Ue.DetailMode,{className:d.priority,fee:ee,type:k,latestSelectType:$e,feeMap:m.config,max:m.max,recommendMaxValue:m?.recommendMaxValue,recommendMinValue:m?.recommendMinValue,currency:w,onChange:(M,R,V)=>{oe(R),le(M),ue(V),M!=="custom"&&eo(M)},getTokenAmount:Po,getUsd:Uo,tradeScene:c}),c===0&&e.default.createElement("div",{className:d.notice},e.default.createElement("div",{className:d.noticeTitle},H(A("swaptrade_trade_label_total_fees",{price:re(vo)}))),e.default.createElement("div",{className:d.noticeText},H(A("swaptrade_trade_label_base_fee_value",{value:So,price:re(To)}))),e.default.createElement("div",{className:d.noticeText},H(A("swaptrade_trade_label_priority_fee_value",{value:xo,price:re(Fo)})))),e.default.createElement("div",{className:(0,Qe.default)("flex justify-between",d.btns)},I&&e.default.createElement(y,{className:"flex-1",category:y.CATEGORY.outline,type:y.TYPE.primary,size:y.SIZE.lg,block:!0,onClick:Mo,disabled:yo},A("swaptrade_general_btn_reset")),e.default.createElement(y,{className:"flex-1",category:y.CATEGORY.fill,type:y.TYPE.primary,disabled:oo,size:y.SIZE.lg,block:!0,onClick:_o},A("swaptrade_dialog_btn_confirm"))))}),Et=Lo;export{Et as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=Configure-TS2XPUME.js.map
