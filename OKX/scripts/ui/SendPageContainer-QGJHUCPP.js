import{b as Wt}from"./chunk-VQLHLWTV.js";import{a as Ls,b as xd,c as ia,d as hd}from"./chunk-QPAOESCV.js";import{a as Gt,b as ld,c as pd,d as ko}from"./chunk-4PTZBAKC.js";import{a as ws,b as md,c as ud,d as ge,e as dd,f as X,g as Ns,h as Ad,l as Cd,m as Td,n as bo}from"./chunk-APDYOFZ2.js";import{a as vs,b as gd}from"./chunk-MFSCVDJN.js";import{a as Sd}from"./chunk-FBDSUED7.js";import{a as ee}from"./chunk-MOWMAO7P.js";import{a as fd}from"./chunk-LLMTEPQU.js";import{a as Id}from"./chunk-PH7PPPGO.js";import{a as Bs}from"./chunk-LUD6HZM6.js";import"./chunk-TQFMB6UY.js";import{a as rd}from"./chunk-5DA5BVK3.js";import"./chunk-LIPTYF3E.js";import{a as pe,b as ad}from"./chunk-LXC7O5XO.js";import{a as sd,b as id}from"./chunk-7RP5AG3D.js";import{a as cd}from"./chunk-DJ522E4U.js";import"./chunk-F6DRZBXE.js";import"./chunk-JAJGR5PD.js";import{a as Qu,b as td,c as Ps,e as ed}from"./chunk-F53ZSIN7.js";import"./chunk-RJWOTEDA.js";import{a as Ku,c as Fn,d as Ju,f as Yu}from"./chunk-66H5QE4F.js";import"./chunk-GPDETZNQ.js";import"./chunk-M2Q6VTQI.js";import"./chunk-3YGJNBCZ.js";import{a as od}from"./chunk-U7LFLL6J.js";import{a as jn,b as ks}from"./chunk-ZJVF5RSO.js";import{a as nd}from"./chunk-FEDG7HWP.js";import{b as rt,c as ys,d as Uu,f as Wu,h as Gu,i as Zn,j as Fs,k as $n,m as yn,p as Vu,q as bs,r as Hu,s as qu}from"./chunk-3CVTSTBR.js";import{a as Tu}from"./chunk-EVRKRU7I.js";import"./chunk-KQDMYE3F.js";import"./chunk-SQ2BNI3O.js";import"./chunk-PWLZXA4M.js";import"./chunk-BLGJS4OD.js";import"./chunk-IGYAABP7.js";import{c as Co}from"./chunk-RYRQK4MH.js";import{e as ju}from"./chunk-EHKSYXXT.js";import{a as te}from"./chunk-TOV4UWR3.js";import"./chunk-BDM6XPIF.js";import"./chunk-ZE645RND.js";import{a as ra}from"./chunk-MDL52WR7.js";import"./chunk-PSDESO5W.js";import"./chunk-VOOXQWRX.js";import{a as Lo}from"./chunk-7YEZFHTW.js";import{a as bt,d as Xu}from"./chunk-HOU3VS5H.js";import{a as Es}from"./chunk-SQDIO2NL.js";import{c as tu,e as eu}from"./chunk-TISF4HQJ.js";import"./chunk-IP7VSGCS.js";import{a as Xn,b as sa}from"./chunk-XYDICNP3.js";import{$ as Ru,A as Ts,B as Sn,C as Ut,D as Eu,E as Pu,F as Ss,G as xs,H as ku,I as oo,J as Oe,K as wu,L as Bu,M as Nu,N as to,P as hs,Q as xn,S as Du,U as Uo,V as le,W as hn,X as Mu,Y as uo,Z as _s,_ as Ou,a as Iu,b as Tn,e as Ro,f as T,g as Mt,h as k,i as Ot,j as Su,k as q,l as Rt,m as z,n as xu,o as hu,p as gs,q as vo,r as de,s as As,t as In,u as _u,v as h,w as yu,x as Fu,y as Cs,z as tt}from"./chunk-ALLM2Z34.js";import"./chunk-QXPTHK7Q.js";import{A as Fo,B as ot,C as Au,D as Cu,a as So,k as du,l as ps,t as fu,u as lu,v as pu,w as gu,x as Tt}from"./chunk-2LCPVMSO.js";import"./chunk-Q57GWOMY.js";import{d as fe,h as Is,i as bu,m as vu,n as Lu}from"./chunk-7C3BTQYU.js";import{b as nu,k as ru,l as su,n as iu,o as au,u as cu}from"./chunk-3XTUMVWB.js";import"./chunk-MGYCOFIC.js";import{c as uu}from"./chunk-6THUPAMO.js";import{a as mu}from"./chunk-FK5ARFJK.js";import"./chunk-6Y7SZIB7.js";import"./chunk-VVYJA72I.js";import{a as ds}from"./chunk-OWWFH26C.js";import{d as Xo,f as jo,g as Qm,j as ou}from"./chunk-MNZIO3NP.js";import"./chunk-HEFTA5OH.js";import"./chunk-S7NLB5XS.js";import{a as Qo}from"./chunk-UUWJWUOY.js";import{b as zu,d as Zu,e as $u}from"./chunk-YAQ2CLWQ.js";import{a as _n}from"./chunk-7CC6X6YX.js";import"./chunk-JAGKSBYF.js";import"./chunk-CR2CPF4X.js";import"./chunk-HKZGONPS.js";import"./chunk-IIAVVYHZ.js";import{a as fs,c as ls}from"./chunk-TSTKPLAO.js";import{a as jm}from"./chunk-52XLG23J.js";import"./chunk-EEFD5KZC.js";import"./chunk-73ZHJYCP.js";import"./chunk-3NSLXJYR.js";import"./chunk-ENPNPH37.js";import"./chunk-5QJIR6ZJ.js";import"./chunk-H6SNSZIS.js";import"./chunk-YWECPG37.js";import"./chunk-AXJECT36.js";import"./chunk-5BIOTNBS.js";import"./chunk-R5SMHBLJ.js";import"./chunk-IY4RYRL6.js";import"./chunk-4OAEJJK5.js";import"./chunk-34VLVCKN.js";import"./chunk-J4ZKBKEJ.js";import"./chunk-TFJRUJHH.js";import"./chunk-7NMUCCUG.js";import"./chunk-YF3DWJDS.js";import"./chunk-RH4ISAHA.js";import"./chunk-ECQND2NK.js";import"./chunk-W3L3YTJO.js";import"./chunk-M5NI6HPE.js";import"./chunk-YQHUKBMA.js";import"./chunk-VM2NMLPX.js";import"./chunk-YP7CHBKG.js";import"./chunk-FNXLAYUB.js";import"./chunk-PQK3LXXN.js";import"./chunk-FTRHGHDS.js";import"./chunk-XT3EOPTE.js";import"./chunk-A6Z53EN6.js";import"./chunk-LL63GZNI.js";import"./chunk-M7CL2K7X.js";import"./chunk-W2CTJYFJ.js";import"./chunk-XUKVTAH5.js";import"./chunk-5OJTPISL.js";import"./chunk-7UPVX2FL.js";import"./chunk-BSFXZ46S.js";import"./chunk-ZMCTBWUY.js";import"./chunk-UMGTYP2Z.js";import"./chunk-DTLEDHZZ.js";import"./chunk-5F6JALEN.js";import"./chunk-HWGRDY67.js";import{a as dI}from"./chunk-FXOJKRCA.js";import{$ as oa,B as ln,C as os,D as ts,E as pn,F as ue,G as gt,H as ym,I as gn,J as Fm,K as bm,L as At,M as Em,N as Pm,O as es,P as Qi,Q as km,R as wm,S as Bm,T as ns,U as Nm,V as vm,W as Lm,X as An,Y as rs,Z as zn,_ as ss,aa as Dm,b as pm,ba as Mm,c as mn,ca as Ft,d as gm,e as Am,ea as is,f as Cm,fa as Om,g as un,ga as as,h as zr,ha as Rm,i as dn,ia as cs,j as fn,ja as jt,k as Tm,ka as ta,l as lt,la as ea,m as Im,ma as Um,n as Zr,o as $r,p as Xr,q as me,r as jr,s as Dt,t as Yn,u as Sm,v as xm,w as hm,x as pt,y as _m,z as Qr}from"./chunk-KQIRXTC7.js";import"./chunk-V7MKKAGW.js";import"./chunk-SKMCCAGC.js";import"./chunk-O3O4HNQA.js";import"./chunk-LR7KSTP2.js";import"./chunk-QCP7SXMX.js";import"./chunk-W23ABSXX.js";import{A as ji,B as Jr,C as Jn,D as um,E as dm,H as ce,I as K,J as R,K as fo,L as fm,N as lm,P as To,Q as $o,R as Yr,b as Vr,c as em,f as mo,g as Hr,h as qr,k as nm,l as rm,m as ft,n as sm,o as Kr,p as Lt,q as im,s as am,w as cm,x as cn,z as mm}from"./chunk-FOF22X4F.js";import"./chunk-P4EMG7RN.js";import"./chunk-BVDJNUOM.js";import"./chunk-7B5UI77E.js";import{d as qm}from"./chunk-R6X7EOIE.js";import"./chunk-MKEYCSLA.js";import"./chunk-4EFZXPDV.js";import"./chunk-4KODREVA.js";import"./chunk-6UWGBJGT.js";import"./chunk-G4AVWXHJ.js";import"./chunk-76CRIMII.js";import"./chunk-F7VSWGDW.js";import{a as Me}from"./chunk-MKSCYWSV.js";import{G as Xi,oa as qc}from"./chunk-KLLSVAFY.js";import"./chunk-MBHGLWZJ.js";import"./chunk-QZO7W5WD.js";import{f as na}from"./chunk-AKE54ZCC.js";import"./chunk-EHZWM44P.js";import"./chunk-K6STDTUY.js";import{a as Ct,b as Zm,j as $m}from"./chunk-A57OTXBP.js";import"./chunk-YJQGXXOQ.js";import{e as oe}from"./chunk-HTLOGWI7.js";import"./chunk-6SEP5B7P.js";import"./chunk-FHKOH5E6.js";import"./chunk-NTQ2YVDA.js";import{c as zm}from"./chunk-KKG4PJ6O.js";import"./chunk-DZLXEJHX.js";import"./chunk-7SRLIN7D.js";import"./chunk-AW5NL3JM.js";import"./chunk-RI2WZ5PA.js";import"./chunk-YIAOHVF5.js";import{a as Km}from"./chunk-KBS3PMLQ.js";import"./chunk-7GKX3YKG.js";import"./chunk-7HFBMBFB.js";import"./chunk-TJCPJQIM.js";import"./chunk-ZTAZ2272.js";import{a as Jm,e as Ym,g as so,h as Cn,l as us}from"./chunk-IRMYAC6R.js";import"./chunk-Q76QXAWY.js";import"./chunk-THSNJ5WU.js";import"./chunk-MRB2XFLQ.js";import"./chunk-65AJJVJY.js";import"./chunk-PDC447BO.js";import"./chunk-JI6FOZGR.js";import{c as Vm,f as Hm}from"./chunk-JCM7SRK2.js";import{m as ro}from"./chunk-UBFC7TLG.js";import{a as Xm}from"./chunk-PTD7UCOR.js";import"./chunk-Q4YTGP2G.js";import{b as Qt}from"./chunk-ETJEH7T4.js";import"./chunk-LLZAOPDB.js";import{a as ms}from"./chunk-V3IFYKWM.js";import"./chunk-EWTTD4DL.js";import"./chunk-Y2TPPS4H.js";import"./chunk-ITY22AD4.js";import"./chunk-E2JYOUYE.js";import"./chunk-B3JSNQIV.js";import{a as tm,f as Zo,fb as Gr,ra as Wr,sa as sn,ta as an}from"./chunk-YALUYHLV.js";import{e as De,f as Hn,q as Y}from"./chunk-I3CPAVOC.js";import"./chunk-ARWSGU73.js";import"./chunk-CZ2ZBAZV.js";import{o as G}from"./chunk-5QMHGZLF.js";import{C as $i,F as Or,H as dt,Ia as Vc,R as tn,S as en,T as Rr,Ta as nn,_ as Nc,ca as vc,cb as Hc,da as Lc,ec as E,ga as Dc,ha as Mc,ia as Oc,ja as Rc,la as Uc,p as Lr,qa as Wc,ra as Gc,vb as Nt,w as Bc}from"./chunk-HPWCPLRR.js";import"./chunk-O6ZBO5JF.js";import"./chunk-TSTPZ3JM.js";import{a as Wm}from"./chunk-D2LKUI4F.js";import{a as No}from"./chunk-ON6S2DB7.js";import"./chunk-SZD6WTBQ.js";import"./chunk-ASR4HLU7.js";import"./chunk-ANIUN6US.js";import"./chunk-3DZ7WRLL.js";import{d as co,f as Oo}from"./chunk-DEOJU4Z3.js";import"./chunk-PLIIQKFY.js";import{a as Kn}from"./chunk-6BXYJZHH.js";import{b as yt}from"./chunk-CCEMKRO6.js";import{a as rn,b as vt}from"./chunk-2HSCH6R3.js";import{b as Yc,d as zc,f as Zc,g as $c,h as Xc,i as jc,j as Qc,n as om}from"./chunk-CWNIM6RS.js";import"./chunk-NNAD25BL.js";import{e as Ur}from"./chunk-XV444F26.js";import{A as Mr,aa as zo,da as kc,f as Po,fa as $t,ga as wc,h as bc,ja as Xt,ka as eo,q as Ec,r as Zi,sa as uI,t as Pc,v as Dr,w as ie,x as ae,y as Qe,z as on}from"./chunk-N2BCRNDB.js";import"./chunk-RTFE54S3.js";import"./chunk-GCQ4H2BA.js";import{a as Kc,b as qn,h as Jc}from"./chunk-JGEHAFTO.js";import"./chunk-UVFOW4HH.js";import{g as Gm}from"./chunk-LNOPECCQ.js";import"./chunk-CB7FOZNP.js";import{c as V}from"./chunk-43VURGIT.js";import{$b as lc,Ab as Yi,Cc as Gn,Ea as ic,Hb as uc,I as Mo,Ia as mt,Ib as Pr,J as yo,K as lo,L as nt,Lc as _c,M as hr,Mb as kr,N as Ko,Na as ve,O as Be,P as Jo,Pc as Br,R as _r,Sc as Le,Wc as Nr,Yb as dc,Zb as fc,_c as yc,a as qa,ac as pc,ad as Fc,b as aI,ba as Qa,bc as gc,bd as ut,cc as Ac,dc as Cc,ec as Tc,fc as Ic,gc as wr,ha as po,hc as Sc,hd as U,ic as xc,jd as Vn,la as oc,mb as br,na as tc,nd as vr,qa as cI,qb as Er,rc as Ao,rd as Eo,sb as ac,uc as hc,vc as zi,ya as Yo,yb as cc,za as Ne,zb as mc}from"./chunk-TM67VPZU.js";import"./chunk-VW6OQNWT.js";import{E as Fr,G as sc,H as Xe,N as je,e as ec,g as yr,o as ct,q as Zt,r as nc,s as rc}from"./chunk-PUSMMCUD.js";import{R as H,o as v,y as ze,z as b}from"./chunk-UWJLNJLY.js";import{a as mI}from"./chunk-VRY2ADKE.js";import"./chunk-VWEB6W6G.js";import"./chunk-5U7FO2PW.js";import"./chunk-B7EGZO4E.js";import"./chunk-PDUOSATP.js";import{A as $a,H as Ye,L as xr,d as Ka,e as Ji,ea as Xa,f as Ja,ga as Wn,j as Ya,la as ja,ra as et,s as za,x as Za}from"./chunk-XDY6V34Y.js";import"./chunk-YJFNO57I.js";import"./chunk-DZ6CTC22.js";import{$ as $e,W as Ze,c as Bt,ea as go}from"./chunk-JT3LNHPY.js";import"./chunk-47UWF72W.js";import{b as x}from"./chunk-JWYCKY2V.js";import"./chunk-G2266BV2.js";import"./chunk-L4PAIYPH.js";import"./chunk-UT7LJPKF.js";import"./chunk-AFZ6A2B3.js";import"./chunk-VVPY7ZA7.js";import"./chunk-KUW5VATV.js";import"./chunk-BNAVWOJ2.js";import"./chunk-IG2Q5ALZ.js";import"./chunk-WOMUNWBT.js";import"./chunk-QNGB57GN.js";import"./chunk-NM2PDVBD.js";import"./chunk-F6PXOVYL.js";import"./chunk-324EPGNQ.js";import"./chunk-5GFHI4AK.js";import"./chunk-QYVQBXDG.js";import"./chunk-7D4PUIEN.js";import"./chunk-IWVM7XL6.js";import"./chunk-7QO4TZYQ.js";import"./chunk-FF4LY6PE.js";import"./chunk-76KCDJDG.js";import"./chunk-YDUDQP2P.js";import"./chunk-PGPFV4JQ.js";import"./chunk-MIBHDVGP.js";import"./chunk-7VFUX7IX.js";import"./chunk-XLF4LAH2.js";import"./chunk-ONKZ57T6.js";import"./chunk-ZC7Q7LCH.js";import{f as u,o as s,p,q as i}from"./chunk-6KXF36WM.js";s();i();var qo=u(x()),Ee=u(No());et();s();i();var bn=u(x()),Ds=u(E()),_d=u(No());var fI=()=>{let o=(0,_d.useHistory)(),t=(0,Ds.useDispatch)(),e=(0,Ds.useSelector)(em),n=(0,bn.useRef)(e);return n.current=e,(0,bn.useEffect)(()=>{let{fromPage:r}=o.location?.state||{};return r&&t(cm(r)),t(cn(!0)),()=>{n.current&&(t(Yr()),t(cs()))}},[]),null},yd=(0,bn.memo)(fI);s();i();s();i();s();i();var vd=u(x());s();i();var Ue=u(x());H();s();i();var Fd=u(x()),bd=u(G());H();Oo();var lI=()=>{let o=Ct(),[t,e]=(0,Fd.useState)(!1);return[(0,bd.useMemoizedFn)(async r=>{try{e(!0);let a=await co().getRequestHeaders({currency:"usd",walletId:o,needSign:!0}),{data:c}=await Vc(r,{txSource:1},{headers:a}),m="";if(c?.canRecharge||(m=c.rechargeMsg),c?.canWithdraw||(m=c.withdrawMsg),m){let d=ct.warn({text:m,confirmText:b("commonall_text_btn_ok_passive"),alignBottom:!1,onConfirm:()=>{d.destroy()}});return!1}return!0}catch{return Xe.error(b("wallet_home_toast_network_error")),!1}finally{e(!1)}}),t]},Ed=lI;s();i();s();i();var Ae=u(x());H();function pI({loading:o,tag:t,customRender:e,focus:n,noMargin:r,noPadding:a,onChange:c,onRef:m,...d}){let l=(0,Ae.useRef)(null);(0,Ae.useLayoutEffect)(()=>{n&&l.current?.focus()},[]);let g=b("wallet_extension_transaction_placeholder_input_address");return Ae.default.createElement(ee.Row,{noMargin:r,noPadding:a},Ae.default.createElement(Zt.TextArea,{placeholder:g,errorType:Zt.TIP_TYPE.always,size:Zt.SIZE.xl,autoResize:!0,...d,onRef:f=>{l.current=f,m&&m(f)},onChange:f=>{c&&c(f.target.value)},customRender:({inputComponent:f})=>{let A=Ae.default.createElement(ee.InputCustomRender,{inputComponent:f,loading:o,tag:t});return e?e({inputComponent:f,customInputComponent:A}):A}}))}var aa=pI;s();i();var ho=u(x()),Re=u(E()),Ms=u(G()),Bd=u(Bt());et();H();s();i();s();i();var gI=()=>84,Pd=gI;var kd=Pd;s();i();var wd={selected:"_selected_lvccx_1"};function AI({value:o,network:t}){let e=(0,Re.useDispatch)(),n=(0,Re.useSelector)(Vr),[r,a]=(0,ho.useState)(!1),[c,m]=(0,ho.useState)({}),[d,l]=(0,ho.useState)(""),g=$u(()=>{l(Bs.TYPE.ADD),m({address:o,network:t}),a(!0)}),f=(I={})=>{a(!1),m({}),l(""),I.name&&e(Jn({name:I.name,type:Zi.ADDRESS_BOOK}))},A=I=>{a(!1),setTimeout(()=>{l(Bs.TYPE.EDIT),m({...I,network:t}),a(!0)})};return ho.default.createElement(ho.default.Fragment,null,ho.default.createElement(ee.InputBottomBar,{title:b("wallet_extension_send_errortip_not_in_address_book"),buttonTitle:b("wallet_extension_send_anchor_add_now"),buttonClick:g}),ho.default.createElement(Bs,{visible:r,type:d,data:c,onClose:f,onChangeToEdit:A,onBackToHome:()=>n}))}function CI({visible:o,options:t,onSelect:e,onChange:n}){let r=(0,Re.useDispatch)();if(!o)return null;let a=({walletId:c,address:m,name:d,type:l,group:g,addressType:f})=>{if(e(),n(m),d){let A=g?`${g} - ${d}`:d;r(Jn({name:A,type:l,extra:{walletId:c,group:g,name:d,addressType:f}}))}};return ho.default.createElement(ee.SelectAddress,{options:t,onSelect:a})}function TI(o,t,e){let n=e?.matchAddress||((r,a)=>Wn(a.address).includes(Wn(r))||a.name&&Wn(a.name).includes(Wn(r)));return(0,ho.useMemo)(()=>{if(!o?.length)return[];if(!t)return o;let r=[];return o.forEach(({group:a,list:c})=>{let m=[];c.forEach(d=>{n(t,d)&&m.push(d)}),m.length&&r.push({group:a,list:m})}),r},[o,t])}function II({value:o,error:t,onChange:e,isCheckingError:n,extraProps:r,onBlur:a,onFocus:c,...m}){let d=(0,Re.useDispatch)(),l=Ro(),{coin:g}=T(),{localType:f}=g,A=(0,Re.useSelector)(qr),I=h(),{filterAddress:S,disableRequestDomain:C}=r||{},_=!o,y=!!o&&!t&&!A?.name&&!n,F=Zu(f,I),P=(0,ho.useMemo)(()=>S?S(F):F,[F,S]),[L,B]=(0,ho.useState)((!o||!!t)&&!y&&P?.length>0),w=TI(P,o,r),D=zu(f),O=M=>{e(M);let $=D(M),io=Boolean(M&&$);d(Jn(io?$:null))},{loading:Z,abort:N}=Iu({domainInputValue:o,coinId:l},({address:M,domain:$})=>{d(Jr({key:"",args:{}})),e(M),d(Jn({name:$,type:Zi.ENS}))},C),W=(0,Ms.useDebounce)(!!Z||!!m.loading||!!n,{wait:200});(0,Ms.useThrottleEffect)(()=>{n||(!!o&&!t&&w.length===0?B(!1):!!t&&w?.length>0&&B(!0))},[o,t,n,w?.length],{wait:100});let J=kd();return ho.default.createElement("div",{className:(0,Bd.default)({[wd.selected]:L}),style:{bottom:J}},ho.default.createElement(ee.Row,{noMargin:L},ho.default.createElement(aa,{...m,noMargin:!0,noPadding:!0,loading:W,tag:A?.name,focus:_,value:o,error:!W&&t,onChange:O,onBlur:M=>{o&&!t&&setTimeout(()=>{B(!1)},100),a&&a(M)},onFocus:M=>{w?.length>0&&B(!0),c&&c(M)}}),y&&ho.default.createElement(AI,{network:f,value:o})),ho.default.createElement(CI,{visible:L,extraProps:r,value:o,options:w,onSelect:()=>{N(),B(!1)},onChange:e}))}var ca=II;s();i();var Qn=u(x()),or=u(E());H();function SI({Component:o=ca,loading:t=!1,extraProps:e,errorFns:n={fns:[],override:!1}}){let r=(0,or.useDispatch)(),c=Qo().get("address"),m=(0,or.useSelector)(mo),d=(0,or.useSelector)(Hr),l=Pu(),{isCheckingError:g,runErrorFns:f}=Sn(l,n),A=S=>{f(S,C=>{r(Jr(C))})},I=S=>{A(S),r(ji(S))};return(0,Qn.useEffect)(()=>{c&&r(ji(c))},[]),(0,Qn.useEffect)(()=>{r(mm(g))},[g]),Qn.default.createElement(o,{value:m,onChange:I,loading:t,isCheckingError:g,error:d?.key?b(d?.key,d?.args):null,extraProps:e||{}})}var ma=SI;s();i();var Nd={content:"_content_12kl2_1"};function xI({headerProps:o={},addressProps:t={},confirmButtonProps:e={}}){let n=Ro(),r=Cs(),a=Fu(),c=tt(),[m,d]=Ed(),l=(0,Ue.useMemo)(()=>{let{disabled:g,loading:f,onClick:A,...I}=e||{},S=g||r,C=async()=>{let _=A||c;await m(n)&&await _()};return[{disabled:S,size:go.SIZE.lg,type:go.TYPE.highlight,category:go.CATEGORY.fill,btnText:b("wallet_extension_send_btn_next_step"),loading:!S&&(f||a||d),onClick:C,...I}]},[e,r,a,c,m,d,n]);return Ue.default.createElement(ws,{footerActions:l,slot:{header:Ue.default.createElement(md,{...o,title:b("wallet_extension_send_title_recipient_address"),pageIndex:1})}},Ue.default.createElement("div",{className:Nd.content},Ue.default.createElement(ma,{...t})))}var j=xI;var hI=()=>vd.default.createElement(j,null),Ld=hI;s();i();var Hd=u(x());s();i();var Ud=u(x()),Wd=u(E()),Gd=u(G());s();i();var Od=u(x());Oo();s();i();var Dd=u(x()),Md=u(E());Eo();function _I({transferType:o,fungibleAssetTransferType:t,tokenTransferType:e}){let{coin:n}=T(),r=(0,Md.useSelector)(mo),a=uo(),{baseCoinId:c,protocolType:m,address:d}=n||{};return(0,Dd.useCallback)(l=>{let{sequenceNumber:g,chainId:f,expirationTimestampSecs:A,tyArg:I,maxGasAmount:S,gasUnitPrice:C}=l||{},_={recipientAddress:r,amount:a},y={base:{sequenceNumber:g,chainId:f,maxGasAmount:S,gasUnitPrice:C,expirationTimestampSecs:A}};return c===0&&(y.type=o,y.data={..._}),c!==0&&m===Vn.APTOS_FUNGIBLE_TOKEN&&(y.type=t,y.data={..._,fungibleAssetMetadataAddress:d}),c!==0&&m===Vn.APTOS_TOKEN&&(y.type=e,y.data={..._,tyArg:I}),y},[r,a,c,m,d])}var Os=_I;Le();function yI(){let o=Os({transferType:ae.SIMULATE_TRANSFER,fungibleAssetTransferType:ae.SIMULATE_FUNGIBLE_ASSET_TRANSFER,tokenTransferType:ae.SIMULATE_TOKEN_TRANSFER_V2}),t=so(),e=h();return(0,Od.useCallback)(async n=>{let{info:r={}}=n||{},a=o(r),{AptosWallet:c}=await Jc(),m=new c,d=await co().getPublicKey(e,Gn,t);return m.buildSimulateTx({publicKey:d,data:a})},[o,e,t])}var Rd=yI;var FI=()=>{let[o,{setFalse:t}]=(0,Gd.useBoolean)(!0),{coin:e}=T(),n=h(),r=(0,Wd.useDispatch)(),a=Rd(),{chainId:c,coinId:m}=e;return(0,Ud.useEffect)(()=>{c&&n&&(async()=>{try{let l={coinId:m,chainId:c,address:n},g={fromAddr:n},{maxGasAmount:f,gasUnitPrice:A,fee:I}=await Uc(l,g,a);r(K(I)),r(Fm({maxGasAmount:f,gasUnitPrice:A})),r(R(!1))}catch{r(R(!0))}finally{t()}})()},[c,n,a]),o},Vd=FI;function bI(){let o=Vd();return oo(),Hd.default.createElement(X,{confirmButtonProps:{loading:o},totalAmountProps:{type:"amount"}})}var qd=bI;s();i();var rf=u(x());s();i();var Wo=u(x()),tr=u(E());et();H();s();i();var Kd=u(x()),Jd=u(E());po();function Yd(){let o=(0,Jd.useDispatch)(),t=Rt(),e=Uo();(0,Kd.useEffect)(()=>{if(t){let n=e;Ko(n,0)&&(n="0"),o(um(n))}},[t,e])}s();i();s();i();var ua=u(x()),zd=u(No());var Zd=u(G()),EI=({disabled:o,onSubmit:t,feeLoading:e,loading:n,onClick:r,networkFee:a,renderActions:c,...m},d)=>{let l=(0,zd.useHistory)(),g=Mt(),{coin:f}=T(),A=h(),{loading:I,onClick:S}=Ru(t),C=Ou(),_=(0,Zd.useCreation)(()=>{if(c&&typeof c=="function"){let y=c(d);if(y)return y}return[{actionType:ps.ACTION_TYPE.CANCEL,onClick:()=>{l.goBack()}},{loading:n||I,disabled:o||C||e,actionType:ps.ACTION_TYPE.CONFIRM,onClick:r||S,...m}]},[e,n,f?.coinId,C,S,o,d,g?.coinId,A,I,r,m]);return ua.default.createElement(ms,{usePortal:!0,offsetBottom:0,placeholder:!0},ua.default.createElement(ps,{buttonGroup:_}))},$d=EI;var Xd=$d;s();i();var jd=u(x());var PI=({loading:o,chainName:t,feeLevel:e,onClick:n,...r},a)=>{let c=z(),m=de(),d=vo(),l=hu(),g=gs(),f=pe(),A=n?()=>{n(),a({trade:"send",network:t,all_confirmation:"network_fee"})}:void 0,I=(0,jd.useMemo)(()=>e!==void 0?e:zo?.STANDARD,[e]);return{gasReturn:f,currencyId:d,networkFee:l&&c==="0"?void 0:c,loading:o||l,level:I,coinId:m,estimateFailed:!!g,onClick:A,...r}},Qd=PI;s();i();var da=u(E()),of=u(G());H();var kI=()=>{let o=Rt(),t=T(),e=(0,da.useSelector)(im),n=vo(),r=t?.coin?.coinId,a=q(),c=ou(r,a,{currencyId:n,formatted:!1}),m=(0,da.useSelector)(nm);return(0,of.useCreation)(()=>{let d=0,l=0;return e===uu?o?(l=v.mul(c,-1),d=v.mul(a,-1)):(d=void 0,l=v.mul(m,-1)):(d=v.mul(a,-1),l=void 0),{currencyId:n,coinId:r,assetChange:d,useMinPrecision:!0,currencyAssetChange:l}},[e,n,r,o,c,m,a])},tf=kI;s();i();var ef={coinSummaryItem:"_coinSummaryItem_12y02_1",coinSummaryItemTitle:"_coinSummaryItemTitle_12y02_1"};function wI({loading:o,networkFeeProps:t={},confirmButtonProps:e={},containerProps:n={},tipMessageProps:r={},slot:a={},checkEmpty:c=!0,addressType:m,renderMessage:d,renderTipActions:l,defaultMessage:g,canTransferAmount:f,tipActions:A=[]}){let I=(0,tr.useSelector)(mo),S=(0,tr.useSelector)(qr),C=Ct(),_=od(C),y=(0,tr.useSelector)(am),F=(0,tr.useSelector)(gm),P=h(),L=tf(),{coin:B,baseCoin:w}=T(),D=Qd({...t,chainName:B?.chainName},_),{loading:O,estimateFailed:Z}=D,W=D?.gasReturn?.activity?.errorCode,{bottom:J,networkFee:M,footer:$}=a,io=Wo.default.createElement(bt,{bordered:!1,verticalPadding:!1},Wo.default.createElement(Es,{...D}));M&&Ji(M)&&(io=M(D)),M&&!Ji(M)&&(io=M),ud(c),Yd(),(0,Wo.useEffect)(()=>{W===0&&qc({wallet_address:P,chain_id:w.chainId,transaction_type:"transfer"})},[W]);let no=Xd({...e,feeLoading:O},y?.type||F);return Wo.default.createElement(ws,{...n,loading:o,className:ef.root,slot:{header:Wo.default.createElement(Ju,{...r,address:P,coinId:B?.coinId,actions:A,renderActions:l,renderMessage:d,type:y?.type||F||Z&&Xu.TIP_TYPE.FEE_ERROR,message:y?.text||!!y?.key&&b(y.key,y?.args)||!Z&&g}),footer:$||no}},Wo.default.createElement(V.Space,{space:24,direction:V.DIRECTION.vertical},Wo.default.createElement(Yu,{txType:Po.TRANS_OUT},Wo.default.createElement(V.FlexBox,{justify:"center"},Wo.default.createElement(Ku,{...L}))),io,Wo.default.createElement(bt,{bordered:!1,verticalPadding:!1},Wo.default.createElement(sa,{address:P,addressType:m,title:b("extension_send_mid_text_from"),walletId:C,onCopyCallback:()=>{_({trade:"send",network:B?.chainName,all_confirmation:"wallet_used_address"})}},!!f&&Wo.default.createElement(sd,{coinBalance:f,coinId:w.coinId})),Wo.default.createElement(sa,{tags:S?.name?[S?.name]:null,address:I,title:b("extension_send_mid_text_to"),onCopyCallback:()=>{_({trade:"send",all_confirmation:"to_address",network:B?.chainName})}})),J))}var Q=wI;s();i();var fa=u(E());Le();po();var nf=()=>{let{coin:o}=T(),t=h(),e=uo(),n=(0,fa.useSelector)(mo),r=(0,fa.useSelector)(pm),a=so(),{gasUnitPrice:c,maxGasAmount:m}=r,d=Os({transferType:ae.TRANSFER,fungibleAssetTransferType:ae.FUNGIBLE_ASSET_TRANSFER,tokenTransferType:ae.TOKEN_TRANSFER_V2}),l=Tt(),g=Fo({fromAddr:t,walletId:a,localType:Gn}),f=ot({coinAmount:e,coinId:o.coinId,fromAddr:t,toAddr:n,networkFee:Mo(c,m),localType:Gn});return Co(async()=>await l({coinId:o.coinId,address:t,fromAddr:t,toAddr:n}),async(y={})=>{let F=d({...y,gasUnitPrice:c,maxGasAmount:m}),P=await g({params:F});return{signInfo:y,signedTx:P}},async({signInfo:y,signedTx:F})=>{let{sequenceNumber:P}=y,L={nonce:P},B={extJson:JSON.stringify(L)};return await f(F,B)},y=>(ro({tx_id:y}),y))};function BI(){let o=nf(),t=async()=>{await o()};return to(),rf.default.createElement(Q,{confirmButtonProps:{onSubmit:t}})}var sf=BI;s();i();s();i();var af=u(x()),cf=u(E());po();var NI=()=>{let o=(0,cf.useDispatch)(),{coin:t,baseCoin:e}=T(),{baseCoinId:n}=t,r=z(),a=so(),c=fd({accountId:a,chainIndex:e?.chainId}),m=jo(t.coinId,a),d=c?.coinAmountInt,l=m?.coinAmountInt;(0,af.useEffect)(()=>{if(!!d){if(n===0){let g=hr([0,nt(d,r)]);o(To(g))}else o(To(l));o($o(d))}},[o,n,d,l,r])},mf=NI;var vI=({children:o})=>(mf(),o),uf=vI;var LI={match:o=>Xc(o),Container:uf,pages:{AddressPage:Ld,AmountPage:qd,ConfirmPage:sf}},df=LI;s();i();Eo();s();i();var Af=u(x());s();i();var er=u(x()),ff=u(No());Eo();Ao();var DI=()=>{let{coinId:o}=(0,ff.useParams)(),e=Xo(o)?.protocolId,n=Object.values(U),r=Ym(),a=r.filter(({keyringIdentityType:f})=>Hm(f)),c=r.filter(({keyringIdentityType:f})=>f===Fc.MPC),m=(f,A)=>!f.some(({walletIdentities:I})=>I.some(({addressType:S={}})=>{let C=S[br];return C?C.some(({address:_})=>A.address===_):!1})),d=(0,er.useCallback)(f=>n.includes(e)?m(a,f):!0,[a,e,n]),l=(0,er.useCallback)(f=>[U.BRC_20,U.FRACTAL_BRC20].includes(e)?!0:n.includes(e)?m(c,f):!0,[c,e,n]),g=(0,er.useCallback)((f=[])=>f.filter(A=>d(A)&&l(A)),[d,l]);return(0,er.useCallback)(f=>f.map(A=>({...A,list:g(A?.list)})).filter(A=>A?.list?.length),[g])},En=DI;s();i();function MI(){let o=Ut(),t=Eu();return[o,t]}var lf=MI;s();i();var Rs=u(No()),pf=u(G());s();i();function Vt(){return Qo().get("type")||Gt.SEND}var OI=()=>{let[o,{setTrue:t,setFalse:e}]=(0,pf.useBoolean)(!1),n=h(),r=k(),{coin:a,baseCoin:c}=T(),m=Wt(),{coinId:d}=(0,Rs.useParams)(),l=(0,Rs.useHistory)(),g=Vt();return{onClick:async()=>{try{t(),await m({from:n,to:r,method:"wallet_inner_transfer",chainIndex:c?.chainId??a.chainId}),l.push(`${Zo}/${d}${an}?type=${g}&from=${n}`)}catch{}finally{e()}},loading:o}},gf=OI;function RI(){let o=lf(),t=En(),{onClick:e,loading:n}=gf();return Af.default.createElement(j,{confirmButtonProps:{onClick:e,loading:n},addressProps:{errorFns:{fns:o,override:!0},extraProps:{filterAddress:t}}})}var Cf=RI;s();i();var Zf=u(x());s();i();var st=u(x()),Gs=u(E()),qf=u(No()),Kf=u(Bt());H();po();s();i();var ao=u(x()),We=u(Bt());H();s();i();var It={container:"_container_c35iq_1",link:"_link_c35iq_6","pending-assets":"_pending-assets_c35iq_11",pendingAssets:"_pending-assets_c35iq_11",amount:"_amount_c35iq_14"};var UI=({lockedAmount:o,lockedAmountDisplay:t,catTotalAmount:e,pendingXrc:n,pendingXrcDisplay:r,availableWithoutSpending:a,availableWithoutSpendingDisplay:c,availableReceiving:m,availableReceivingDisplay:d,goToInscribe:l,addressType:g,coinId:f})=>{let{handleClick:A}=ld(g,f);return ao.default.createElement(ao.default.Fragment,null,ao.default.createElement(V.Box,{className:(0,We.default)(It.container)},Number(o)>0&&ao.default.createElement(V.FlexBox,{justify:"space-between"},ao.default.createElement(V.Box,null,ao.default.createElement(Y.Text,{type:Y.TYPE.secondary,size:Y.SIZE.xs},b("extension_wallet_btc_in_use"))),ao.default.createElement(V.Box,null,ao.default.createElement(Y.Text,{className:It.amount},t),ao.default.createElement(Y.Text,{size:Y.SIZE.xs,className:(0,We.default)(It.link),onClick:A},b("extension_wallet_btc_btn_unlock_use")))),Number(n)>0&&ao.default.createElement(V.FlexBox,{justify:"space-between",className:(0,We.default)(It.pendingAssets)},ao.default.createElement(V.Box,null,ao.default.createElement(Y.Text,{type:Y.TYPE.secondary,size:Y.SIZE.xs},b("extension_wallet_btc_select_receiving"))),ao.default.createElement(V.Box,null,ao.default.createElement(Y.Text,{className:It.amount},r))),Number(a)>0&&ao.default.createElement(V.FlexBox,{justify:"space-between"},ao.default.createElement(V.Box,null,ao.default.createElement(Y.Text,{className:It.amount},b("extension_wallet_btc_to_be_inscribed"))),ao.default.createElement(V.Box,null,ao.default.createElement(Y.Text,{type:Y.TYPE.secondary,size:Y.SIZE.xs},c),ao.default.createElement(Y.Text,{size:Y.SIZE.xs,className:(0,We.default)(It.link),onClick:l},b("extension_wallet_btc_btn_inscribe")))),Number(m)>0&&ao.default.createElement(V.FlexBox,{justify:"space-between",className:(0,We.default)(It.pendingAssets)},ao.default.createElement(V.Box,null,ao.default.createElement(Y.Text,{type:Y.TYPE.secondary,size:Y.SIZE.xs},b("extension_wallet_btc_select_receiving"))),ao.default.createElement(V.Box,null,ao.default.createElement(Y.Text,{className:It.amount},d))),Number(e)>0&&ao.default.createElement(V.FlexBox,{justify:"space-between",className:(0,We.default)(It.pendingAssets)},ao.default.createElement(V.Box,null,ao.default.createElement(Y.Text,{type:Y.TYPE.secondary,size:Y.SIZE.xs},b("wallet_extension_cat_desc_total_amount"))),ao.default.createElement(V.Box,null,ao.default.createElement(Y.Text,{className:It.amount},e)))))},Pn=UI;s();i();function WI(){let o=h(),{coin:t}=T();return pd(t,o)}var Ce=WI;s();i();var xo=u(x()),xf=u(E()),hf=u(Bt());H();s();i();var Et=u(x()),la=u(Bt());H();s();i();var GI="md",VI="lg",Tf=o=>{let{className:t,size:e,disabled:n,checked:r,coinImage:a,coinAmountText:c,inscriptionId:m,onChange:d}=o,l=`inscription-select-container-${e}`,g=n?"inscription-select-disabled":null;return Et.default.createElement("div",{className:(0,la.default)("inscription-select-container",l),onClick:d},n?Et.default.createElement("div",{className:"inscription-select-confirm"},b("extension_wallet_send_tag_confirming")):null,Et.default.createElement("div",{className:(0,la.default)("inscription-select",g,t)},n?null:Et.default.createElement("div",{className:"inscription-select-radio-container"},Et.default.createElement(nc.Circle,{checked:r})),Et.default.createElement("div",{className:"inscription-select-coin"},Et.default.createElement(Fr,{className:"inscription-select-coin-image",src:a,errorImg:Ur,width:14,height:14}),Et.default.createElement(ra,{text:c,tooltipProps:{className:"inscription-select-coin-text-tooltip"}})),Et.default.createElement("div",{className:"inscription-select-id"},Et.default.createElement(ra,{text:m,tooltipProps:{className:"inscription-select-id-tooltip"}}))))};Tf.size={md:GI,lg:VI};var kn=Tf;s();i();var wo=u(x()),If=u(G());H();s();i();var Te={header:"_header_144xr_1",amount:"_amount_144xr_7",logo:"_logo_144xr_13",max:"_max_144xr_18",scrollContent:"_scrollContent_144xr_26",content:"_content_144xr_31",cell:"_cell_144xr_38",loading:"_loading_144xr_41"};function HI(){let{coin:o}=T(),t=Ce();return wo.default.createElement("div",{className:Te.header},wo.default.createElement("div",{className:Te.amount},wo.default.createElement(Fr,{className:Te.logo,src:o.image,errorImg:Ur,width:20,height:20}),t?.transferableWithoutSpendingDisplay))}function qI({loading:o,list:t,visible:e,onClose:n,value:r,onSelected:a,request:c}){let{coin:m}=T(),[d,l]=(0,wo.useState)({}),{run:g}=(0,If.useThrottleFn)(f=>{o||f.target.scrollHeight-f.target.scrollTop-f.target.offsetHeight<=150&&c&&c()},{wait:300});return(0,wo.useEffect)(()=>{e&&l(r)},[e]),wo.default.createElement(ct,{isFull:!0,topContent:wo.default.createElement(HI,{list:t,value:d,onMax:f=>{l(t.reduce((A,I)=>({...A,[I.inscriptionId]:!f}),{}))}}),footer:wo.default.createElement(ee.ConfirmButton,{onClick:()=>{a(d)}},b("wallet_set_password_btn_confirm")),noMargin:!0,noContentPadding:!0,visible:e,onClose:n,renderContent:()=>wo.default.createElement("div",{className:Te.scrollContent,onScroll:g},wo.default.createElement("div",{className:Te.content},t.map((f,A)=>wo.default.createElement("div",{className:Te.cell},wo.default.createElement(kn,{key:A,size:kn.size.lg,coinImage:m.image,coinAmountText:`${f.tokenAmount} ${f.tick}`,inscriptionId:f.inscriptionId,checked:d[f.inscriptionId],onChange:()=>{l(I=>({...I,[f.inscriptionId]:!I[f.inscriptionId]}))}})))),o&&wo.default.createElement("div",{className:Te.loading},wo.default.createElement($e.Circle,{size:$e.SIZE.sm})))})}var Sf=qI;s();i();var wn={root:"_root_r3y60_1",title:"_title_r3y60_5",arrow:"_arrow_r3y60_14",content:"_content_r3y60_17",cell:"_cell_r3y60_22"};function KI({loading:o,list:t,request:e,onSelected:n},r){let{coin:a}=T(),[c,m]=(0,xo.useState)(!1),d=(0,xf.useSelector)(pt),[l,g]=(0,xo.useState)(d.reduce((I,S)=>({...I,[S.inscriptionId]:!0}),{})),{selected:f,showed:A}=(0,xo.useMemo)(()=>{let I=t.filter(C=>!!l[C.inscriptionId]),S=t.filter(C=>!l[C.inscriptionId]);return{selected:I,unselected:S,showed:t.map(C=>I.includes(C)?{...C,checked:!0}:C)}},[t,l]);return(0,xo.useEffect)(()=>{n(f)},[f]),(0,xo.useImperativeHandle)(r,()=>({onMax:()=>{g(t.reduce((I,S)=>({...I,[S.inscriptionId]:!0}),{}))}})),xo.default.createElement(xo.default.Fragment,null,xo.default.createElement("div",{className:wn.root},xo.default.createElement("div",{className:wn.title,onClick:()=>{m(!0)}},b("extension_wallet_send_text_select_transferable"),xo.default.createElement(Ze,{className:(0,hf.default)(wn.arrow,"okds-arrow-chevron-right-centered-md")})),xo.default.createElement("div",{className:wn.content},A.map((I,S)=>xo.default.createElement("div",{className:wn.cell},xo.default.createElement(kn,{key:S,coinImage:a.image,size:kn.size.md,coinAmountText:`${I.tokenAmount} ${I.tick}`,inscriptionId:I.inscriptionId,checked:I.checked,onChange:C=>{C.stopPropagation(),g(_=>({..._,[I.inscriptionId]:!_[I.inscriptionId]}))}}))))),xo.default.createElement(Sf,{visible:c,value:l,loading:o,list:t,request:e,onSelected:I=>{g(I),m(!1)},onClose:()=>{m(!1)}}))}var _f=(0,xo.forwardRef)(KI);s();i();var Ie=u(x()),yf=u(E());H();function JI(o){let{coin:t}=T();return(0,Ie.useCallback)(()=>o.length===0?{key:"extension_wallet_send_text_noresults_crypto",args:{crypto:t.symbol},type:"inscribe"}:null,[o])}function Ff(){let o=Mt();return t=>{let e="";return t.key&&(e=b(t?.key,t?.args)),t?.type===eo.FEE_BALANCE_INSUFFICIENT?Ie.default.createElement(Ie.default.Fragment,null,e," ",Ie.default.createElement(ge,{coin:o})):t?.type==="inscribe"?Ie.default.createElement(Ie.default.Fragment,null,e):e}}function YI(o,t){let e=(0,yf.useDispatch)(),n=Ss(),r=JI(t),a=[n,r],{runErrorFns:c}=Sn(a);Ts(c,m=>{e(dm(m))},o)}var bf=YI;s();i();var Ef=u(No());var Pf=u(E());function zI(){let o=(0,Pf.useDispatch)(),t=(0,Ef.useHistory)(),{coin:e}=T(),n=h();return()=>{o(cs()),o(Yr()),t.push(`${Zo}/${e.coinId}${Wr}?type=${Gt.INSCRIBE}&from=${n}`)}}var kf=zI;s();i();var Nf=u(x()),vf=u(E());s();i();var nr=u(x()),wf=u(E());po();function pa(){let{baseCoin:o}=T(),t=h(),[,e]=te({coinId:o.coinId,address:t,chainId:o.chainId},{pollingInterval:20*1e3});return e||{}}function ZI(o,t){let r=(()=>255)(),a=o||t?.normal||"0",[c,m]=(0,nr.useState)("0");return(0,nr.useEffect)(()=>{if(r&&a){let d=Mo(r,a);m(d)}},[r,a]),{fee:c,satBytes:a,bytes:r}}function $I(o){let t=(0,wf.useDispatch)(),e=pa(),n=ZI(o,e);return(0,nr.useEffect)(()=>{t(Ft({name:"signInfo",value:e}))},[e]),{...n,signInfo:e}}var Bf=$I;function XI(){let o=(0,vf.useDispatch)(),{fee:t}=Bf();(0,Nf.useEffect)(()=>{o(K(t))},[t])}var Lf=XI;s();i();var Rf=u(x()),Uf=u(E());s();i();var Us=u(x()),Mf=u(E());s();i();var Df=u(E());function jI(){let{selectedSat:o,signInfo:t}=(0,Df.useSelector)(Qr),e;return o.type===zo.CUSTOM?e=o.satBytes:e=t?.[kc[o.type]],e||0}var Ht=jI;function QI({coinId:o}){let[t,e]=(0,Us.useState)(!0),n=(0,Mf.useDispatch)(),r=h(),a=Ns({coinId:o}),c=Ht();return(0,Us.useEffect)(()=>{(async()=>{let d;try{d=(await a({from:r,coinAmount:0,serviceCharge:0,feeRate:c})).canTransferAmount||"0"}catch{d="0"}e(!1),n($o(d))})()},[r,c]),t}var Of=QI;function oS({coinId:o}={}){let t=(0,Uf.useDispatch)(),e=Ce(),n=Of({coinId:o});return(0,Rf.useEffect)(()=>{t(To(e?.transferableWithoutSpending))},[e?.transferableWithoutSpending]),n}var Wf=oS;s();i();var Bn=u(x()),Gf=u(E()),Vf=u(G());Oo();Eo();Ne();ve();po();function tS(){let{coin:o,baseCoin:t}=T(),e=h(),n=(0,Gf.useSelector)(Nt),[r,a]=(0,Bn.useState)({from:1,size:10});return async()=>{let c=await co().getRequestHeaders({walletId:n,needSign:!0,currency:"usd"}),m={utxoType:rt.BRC20_CONVERTIBLE,address:e,tick:o.symbol,protocolId:vr(o.chainId)},d={coinId:t.coinId,utxoRequests:[{...m,...r}]},{data:l}=await mt(Yo.getBTCUTXO,d,{headers:c}),g=(l?.[0]?.utxoList||[]).map(A=>({...A,tokenAmountInt:A.tokenAmount,tokenAmount:yo(A.tokenAmount,10**o.decimals)})),f=g.length===r.size;return f&&a(A=>({...A,from:A.from+1})),{list:g,more:f}}}function eS(){let o=(0,Bn.useRef)(!0),[t,e]=(0,Bn.useState)(!0),[n,r]=(0,Bn.useState)([]),a=tS(),c=async()=>{if(!!o.current){e(!0);try{let{more:m,list:d}=await a();r(l=>[...l,...d]),o.current=m}finally{e(!1)}}};return(0,Vf.useMount)(()=>{c()}),{list:n,loading:t,request:c}}var Hf=eS;s();i();var Ws={loading:"_loading_19h4i_1",content:"_content_19h4i_6","inscribe-footer":"_inscribe-footer_19h4i_9",inscribeFooter:"_inscribe-footer_19h4i_9"};function nS(){let o=(0,qf.useHistory)(),t=(0,Gs.useDispatch)(),{coin:e,baseCoin:n}=T(),r=(0,Gs.useSelector)(pt),a=kf(),c=Ff(),m=Vt(),d=h(),l=(0,st.useMemo)(()=>r.reduce((B,{tokenAmount:w})=>lo(B,w),0),[r]),{loading:g,list:f,request:A}=Hf(),I=Wf({coinId:n.coinId}),S=f.length>0,C=g||I;Lf(),bf(C,f);let{availableWithoutSpending:_,availableWithoutSpendingDisplay:y,availableReceiving:F,availableReceivingDisplay:P}=Ce();if(f.length===0&&C)return st.default.createElement("div",{className:Ws.loading},st.default.createElement($e.Circle,{size:$e.SIZE.xl}));let L=st.default.createElement(ms.FooterActions,{usePortal:!0,className:(0,Kf.default)(Ws.inscribeFooter)},st.default.createElement(go,{block:!0,type:go.TYPE.highlight,size:go.SIZE.lg,onClick:a},b("extension_wallet_btc_btn_inscribe")),st.default.createElement(go,{block:!0,type:go.TYPE.highlight,size:go.SIZE.lg,disabled:!0},b("wallet_extension_send_btn_continue")));return st.default.createElement(X,{checkEmpty:!1,inputAmount:l,renderError:c,classes:{content:S?Ws.content:""},slot:{bottom:S?st.default.createElement(_f,{loading:C,list:f,request:A,onSelected:B=>{t(Ft({name:"brc20UtxoList",value:B}))}}):null,footer:f.length===0&&Number(_)>0?L:null},inputProps:{disabled:!0},confirmButtonProps:{disabled:r.length===0,onClick:()=>{o.push(`${Zo}/${e.coinId}${sn}?type=${m}&from=${d}`)}},totalAmountProps:{fixBottom:!0,type:"amount",title:b("extension_wallet_send_text_transfer_available"),hiddenMaxButton:!0,slot:{bottom:st.default.createElement(st.default.Fragment,null,(Number(_)>0||Number(F)>0)&&st.default.createElement(Pn,{lockedAmount:0,pendingXrc:0,availableWithoutSpending:_,availableWithoutSpendingDisplay:y,availableReceiving:F,availableReceivingDisplay:P,goToInscribe:a}))}}})}var Jf=nS;s();i();var Yf=u(x()),Vs=u(No());function rS(){let{coinId:o}=(0,Vs.useParams)(),t=(0,Vs.useHistory)(),e=Vt(),n=h();return Yf.default.createElement(Cd,{onConfirm:()=>{t.push(`${Zo}/${o}${an}?type=${e}&from=${n}`)}})}var zf=rS;var sS={[Gt.SEND]:Jf,[Gt.INSCRIBE]:zf};function iS(){let o=Vt(),t=sS[o];return t?Zf.default.createElement(t,null):null}var $f=iS;s();i();var Al=u(x());s();i();var Do=u(x()),Ve=u(E()),fl=u(No());H();s();i();var rr=u(x());s();i();var qt=u(x()),Xf=u(Bt());H();s();i();var Ge={"retina-border-basic":"_retina-border-basic_15g95_1",retinaBorderBasic:"_retina-border-basic_15g95_1",utxoTextWrap:"_utxoTextWrap_15g95_29",utxoText:"_utxoText_15g95_29",utxoTextSymbol:"_utxoTextSymbol_15g95_72",utxoTextAmount:"_utxoTextAmount_15g95_75",badge:"_badge_15g95_79"};var aS=(o={})=>{let{address:t,isNeedToSign:e,coinAmount:n,symbol:r}=o;return qt.default.createElement(V.FlexBox,{justify:"space-between",align:V.ALIGN.center,className:Ge.utxoTextWrap},qt.default.createElement(V.FlexBox,{align:V.ALIGN.center},qt.default.createElement(Y.Text,{className:Ge.utxoText,ellipsis:{tooltip:!0}},t),e&&qt.default.createElement(yr,{className:Ge.badge,color:yr.COLOR.green,type:yr.TYPE.rect},b("extension_wallet_transaction_label_signature"))),qt.default.createElement(V.FlexBox,{align:V.ALIGN.center,className:(0,Xf.default)(Ge.utxoText,Ge.utxoTextAmount)},qt.default.createElement(Y.Text,{inherit:!0,strong:!0,ellipsis:{tooltip:!0}},n),qt.default.createElement(Y.Text,{inherit:!0,strong:!0,className:Ge.utxoTextSymbol},r)))},jf=(0,qt.memo)(aS);s();i();var Qf={"retina-border-basic":"_retina-border-basic_7g9ny_1",retinaBorderBasic:"_retina-border-basic_7g9ny_1",utxosBlock:"_utxosBlock_7g9ny_29",utxoBorder:"_utxoBorder_7g9ny_34"};var cS=({utxos:o})=>rr.default.createElement(V.Box,{className:Qf.utxosBlock},o.map((t={},e)=>{let{address:n,coinAmount:r,isNeedToSign:a,symbol:c}=t;return rr.default.createElement(jf,{key:e,address:n,coinAmount:r,isNeedToSign:a,symbol:c})})),ga=(0,rr.memo)(cS);po();s();i();var sr=u(E());et();s();i();po();Oo();ve();Ne();Eo();var Hs=async({walletId:o,signedTx:t,coinId:e,coinAmount:n,fromAdr:r,toAdr:a,serviceCharge:c,txHash:m,walletType:d,txType:l,extJson:g})=>{let f=Yo.postTx,A=await co().getRequestHeaders({walletId:o,needSign:!0,currency:"usd"}),I={};e==1&&(I.btcSpeedUpInfo=JSON.stringify({sequence:1}));let{data:S}=await mt(f,{signedTx:t,coinId:e,coinAmount:n,fromAdr:r,toAdr:a,serviceCharge:c,txSource:ut.NORMAL,txHash:m,accountId:o,walletType:d,...I,extJson:g,txType:l},{headers:A});return S};var ol=(o,t)=>!o||!o.length?"0":o.reduce((n,r)=>{let c=(r.nftLocaltionVOs||[]).reduce((m,d)=>d.nftId===t?lo(m,d.value):m,"0");return lo(n,c)},"0"),Aa=({address:o,amount:t="0",satAmount:e="0",tokenType:n="FT",atomicalId:r},a=546)=>(e=Jo(e,0)?e:t,{address:o,amount:Be(e,a)?a:Number(e),data:[{atomicalId:r,type:n,amount:Number(t)}]}),tl=(o,t=546)=>!o||o.length===0?!1:o.some(e=>{let n=e?.data?.[0]?.amount;return n===void 0?!1:Ko(n,t)}),el=(o,t=546)=>!o||o.length===0?!1:o.every(e=>{let n=e?.data?.[0]?.amount;return n===void 0?!1:Ko(n,t)});Eo();s();i();var nl=u(x()),Ca=u(E());Ao();function mS(o){let t=(0,Ca.useSelector)(Nt),e=h(),n=(0,Ca.useSelector)(pt),r=Ht(),a=k(),c=us(t);return(0,nl.useCallback)(async m=>{if(!m.length)return null;let d={address:e,feePerB:r,inputs:[...n.map(({txHash:g,vout:f,coinAmount:A})=>({vOut:f,txId:g,amount:A})),...m.map(({txHash:g,vout:f,coinAmount:A})=>({vOut:f,txId:g,amount:A}))],outputs:[...n.map(({coinAmount:g})=>({amount:g,address:a}))]};return await qm(d,e,br,t,{fake:o===ys.CAL_FEE&&c})},[n,r])}var rl=mS;function uS(){let o=(0,sr.useDispatch)(),{coin:t,baseCoin:e}=T(),n=(0,sr.useSelector)(pt),r=h(),a=k(),c=z(),m=q(),d=(0,sr.useSelector)(Nt),l=$m(d),g=vo(),A=Bc(t)?Po.BRC20_SEND:Po.BRC30_SEND,I=rl(ys.CONFIRM),S=Ns({coinId:e?.coinId}),C=Ht(),_=yn({address:r,coinId:t.coinId,currencyId:g,txType:A,protocolId:vr(t.chainId)}),y=Cu(d),F=async L=>{try{await y();let B=await I(L.utxoList||[]),w=await So(t.localType,B),D=l?.serverWalletType,O={txSource:ut.NORMAL,toAdr:a,coinId:t.coinId,txHash:w,signedTx:B,walletId:d,serviceCharge:c,fromAdr:r,coinAmount:m,walletType:D,txType:A,extJson:JSON.stringify({nftIds:n.reduce((N,W)=>[...N,...(W.nftLocaltionVOs||[]).map(({nftId:J})=>J)],[])})},Z=await Hs(O);ro({tx_id:Z})}catch(B){B?.error_message&&Xe.error(B?.error_message)}};return async()=>{let L=await S({from:r,coinAmount:0,serviceCharge:c,feeRate:C}),B=L.utxoList||[];return o(Ft({name:"feeUtxoList",value:B||[]})),await _([...n||[],...B||[]],Ja),await F(L)}}var sl=uS;s();i();var il=u(E());function dS(){let o=(0,il.useDispatch)(),e=[wu()],{runErrorFns:n}=Sn(e);Ts(n,r=>{o(lm(r))})}var al=dS;s();i();var cl=u(x()),ir=u(E());function ml(){let o=(0,ir.useDispatch)(),t=pa();(0,cl.useEffect)(()=>{o(Ft({name:"signInfo",value:t}))},[t])}function ul(){let o=Ro(),t=(0,ir.useDispatch)(),e=h(),n=k(),r=so(),a=Ht(),c=(0,ir.useSelector)(pt),[m,d,l]=bs({coinId:o,toAddr:n,walletId:r,fromAddr:e,satBytes:a,coinAmount:"0",utxoParams:{satBytes:a},inputs:c},{onSuccess:(g,f)=>{t(K(g)),t(Ft({name:"feeUtxoList",value:f||[]}))}});return{feeLoading:m,fee:d,feeError:l}}s();i();var dl={network:"_network_1zgil_1",data:"_data_1zgil_6",dataTitle:"_dataTitle_1zgil_12"};function fS(){let o=Tn(),t=h(),e=k(),n=z(),r=(0,Ve.useSelector)(pt),a=(0,Ve.useSelector)(hm),{baseCoin:c}=T(),m=(g,f)=>g.map(({coinAmount:A})=>{let I=yo(A,10**c.decimals);return{address:$i(f),coinAmount:o(I,c,{useApproximate:!1}),symbol:c.symbol}}),d=(0,Do.useMemo)(()=>m([...r,...a],t),[r,a]),l=(0,Do.useMemo)(()=>{let g=m(r,e),f=a.reduce((A,{coinAmount:I})=>lo(A,I),"0");if(Jo(f,n)){let A=yo(nt(f,n),10**c.decimals);g.push({address:$i(t),coinAmount:o(A,c,{useApproximate:!1}),symbol:c.symbol})}return g},[r,a,n]);return Do.default.createElement(bt,{space:32},Do.default.createElement(Xn,{title:b("extension_wallet_transaction_text_input")},Do.default.createElement(ga,{utxos:d})),Do.default.createElement(Xn,{title:b("extension_wallet_transaction_text_output")},Do.default.createElement(ga,{utxos:l})))}function lS(){let o=(0,Ve.useDispatch)(),[t,e]=(0,Do.useState)(!1),{coinId:n}=(0,fl.useParams)(),r=vo(),a=(0,Ve.useSelector)(_m),c=sl(),{signInfo:m}=(0,Ve.useSelector)(Qr),d=In(),l=Ht(),{feeLoading:g,fee:f,feeError:A}=ul(),I=yo(f,l),S=_=>{o(Ft({name:"selectedSat",value:_}))};ml(),al();let C=m?.transferReminder;return Do.default.createElement(Do.default.Fragment,null,Do.default.createElement(Q,{classes:{network:dl.network},slot:{bottom:Do.default.createElement(fS,null)},defaultMessage:C,networkFeeProps:{loading:g,estimateFailed:A,feeLevel:a.type,onClick:()=>{e(!0)}},confirmButtonProps:{onSubmit:c},canTransferAmount:d}),Do.default.createElement(Ad,{currencyId:r,bytes:I,value:a,coinId:n,signInfo:m,onChange:S,visible:t,onClose:()=>{e(!1)},supportDecimal:!0}))}var ll=lS;s();i();var qs=u(x()),pl=u(No());po();function pS(){let o=(0,pl.useHistory)(),t=Ot();return(0,qs.useEffect)(()=>{_r(t,"0")&&o.go(-1)},[t]),qs.default.createElement(Td,{onConfirm:()=>{o.replace(tm)}})}var gl=pS;var gS={[Gt.SEND]:ll,[Gt.INSCRIBE]:gl};function AS(){let o=Vt(),t=gS[o];return t?Al.default.createElement(t,null):null}var Cl=AS;s();i();var Tl=u(x());function CS({children:o}){let e=Qo().get("from");return Tl.default.createElement(bo,{fromAddress:e},o)}var Il=CS;var TS={match:(o,t,e)=>dt({coinId:o})&&[U.BRC_20,U.FRACTAL_BRC20].includes(e),Container:Il,pages:{AddressPage:$f,AmountPage:Cf,ConfirmPage:Cl}},Sl=TS;s();i();s();i();var _l=u(x());s();i();var IS=()=>{let{initialType:o}=Zm();return async t=>{let{isValid:e}=await Is(t);return e&&Vm(o)?{key:"wallet_extensions_hardware_alert_taproot_unsupported",args:{}}:null}},SS=()=>[IS()],Ks=SS;s();i();var xl=u(G());var xS=()=>{let[o,{setTrue:t,setFalse:e}]=(0,xl.useBoolean)(!1),n=h(),r=k(),{coin:a,baseCoin:c}=T(),m=tt(),d=Wt();return{onClick:async()=>{try{t(),await d({from:n,to:r,method:"wallet_inner_transfer",chainIndex:c?.chainId??a.chainId}),m()}catch{}finally{e()}},loading:o}},hl=xS;var hS=()=>{let o=Ks(),t=En(),{onClick:e,loading:n}=hl();return _l.default.createElement(j,{confirmButtonProps:{onClick:e,loading:n},addressProps:{errorFns:o,extraProps:{filterAddress:t}}})},yl=hS;s();i();var xe=u(x());H();Eo();s();i();var Go=u(x()),Se=u(E());et();H();Eo();Ao();s();i();var yS=()=>{let o=(0,Se.useDispatch)(),t=(0,Se.useSelector)(un),e=(0,Go.useCallback)(n=>{o(es({selectedNetworkFeeLevel:n}))},[]);return[t?.selectedNetworkFeeLevel,e]},FS=({fromAddr:o,toAddr:t,protocolId:e,minOutput:n,sendAmountInt:r,transferInputs:a})=>{let c=(0,Se.useDispatch)();return(0,Go.useMemo)(()=>{if(U.ARC_20!==e)return null;if(!a||a.length===0||v.eq(r,0))return c(Qi([])),null;let m=a[0]?.nftLocaltionVOs[0]?.tokenType,d=a[0]?.nftLocaltionVOs[0]?.nftId,l=Aa({address:t,amount:r,tokenType:m,atomicalId:d},n),g=ol(a,d),f=v.sub(g,r),A=Aa({address:o,amount:f,tokenType:m,atomicalId:d},n),I=[];return v.lte(f,0)?I.push(l):v.lt(f,n)?I.push(l,A):v.gte(f,n)&&I.push(A,l),c(Qi(I)),I},[e,a,r,t,n,o,c])},bS=({fromAddr:o,toAddr:t,coinTick:e,transferInputs:n,minOutput:r,isXrc20Token:a,protocolId:c,sendAmountInt:m})=>{let d=FS({fromAddr:o,minOutput:r,protocolId:c,sendAmountInt:m,toAddr:t,transferInputs:n});return(0,Go.useMemo)(()=>!a||U.SRC_20===c||!n?.length?null:U.ARC_20===c&&d?d:U.RUNES===c?[{address:t,amount:r,data:{id:e,amount:m}}]:U.RUNEMAIN===c||U.FRACTAL_RUNES?[{address:t,amount:r,data:{id:e,amount:m}}]:[{address:t,amount:Number(m),...Wu(n[0],c)}],[e,a,r,c,m,t,n,d])},ES=({coin:o,coinId:t,walletId:e,protocolId:n,tick:r,address:a,coinAmount:c,isXrc20Token:m})=>{let[,d]=Fs({coinId:t,walletId:e,protocolId:n,tick:r,address:a,coinAmount:c,utxoType:rt.BRC20_CONVERTIBLE},{ready:o&&m&&n!==U.SRC_20});return[null,d]},PS=({coinId:o,isXrc20Token:t,sendAmountInt:e,protocolId:n,inscriptionOutput:r})=>(0,Go.useMemo)(()=>o===22?546:t?n===U.SRC_20?r||790:"0":e,[o,t,e,n,r]),kS=({coin:o,isXrc20Token:t,protocolId:e,satBytes:n,transferInputs:r})=>(0,Go.useMemo)(()=>!o||!n?!1:!(e&&t&&e!==U.SRC_20&&!r?.length),[o,t,e,n,r?.length]),wS=({coin:o,protocolId:t})=>(0,Go.useMemo)(()=>{if(o?.address&&[U.RUNES,U.ARC_20,U.RUNEMAIN,U.FRACTAL_RUNES].includes(t))return za(o?.address?.split("-"))},[o?.address,t]),BS=({coin:o,isXrc20Token:t,protocolId:e,sendAmount:n})=>(0,Go.useMemo)(()=>{if(t&&e===U.SRC_20)return{body:JSON.stringify({p:"src-20",op:"transfer",tick:o?.name,amt:n})}},[o?.name,t,e,n]),NS=({coinId:o,walletId:t,satBytes:e,address:n,isXrc20Token:r,coinBalance:a})=>{let c=(0,Se.useDispatch)(),[m,d]=$n({coinId:o,walletId:t,satBytes:e,address:n},{onSuccess:l=>{c(o!==22&&!r?To(l):To(a?.coinAmountInt)),c($o(l))}});return[m,d]},vS=({coinId:o,walletId:t,protocolId:e,tick:n,address:r})=>{let a=(0,Se.useDispatch)(),[c,m]=$n({coinId:o,walletId:t,protocolId:e,tick:n,address:r,coinAmount:"0",utxoType:rt.BRC20_CONVERTIBLE},{ready:[U.RUNES,U.ARC_20,U.RUNEMAIN,U.FRACTAL_RUNES].includes(e),onSuccess:d=>{a(To(d))}});return[c,m]},LS=({coinId:o,toAddr:t,walletId:e,fromAddr:n,satBytes:r,inputs:a,outputs:c,networkFee:m,revealOutValue:d,coinAmount:l,utxoParams:g,inscriptionData:f,isXrc20Token:A,availableFeeCoinAmountInt:I,availableSendCoinAmountInt:S,sendAmountInt:C},{ready:_,networkFeeInt:y})=>{let F=(0,Se.useDispatch)(),[P,L,B]=bs({coinId:o,toAddr:t,walletId:e,fromAddr:n,satBytes:r,inputs:a,outputs:c,networkFee:m,revealOutValue:d,coinAmount:l,utxoParams:g,inscriptionData:f,canTransferAmount:o===22||A?I:S,...o===22?{omni:{coinType:31,amount:C}}:{}},{ready:_,onSuccess:w=>{Math.abs(Number(v.sub(w,y)))!==parseInt(r,10)&&(F(K(w)),F(R(!1)))},onError:w=>{F(R(w))}});return[P,L,B]},DS=()=>{let o=Ro(),t=h(),e=k(),n=so(),r=Xo(o),a=r?.protocolId,c=Gu(a),m=r?.baseCoinId||o,d=oe(t,n,r?.localType),l=Ot(),g=z(),f=q(),A=In(),I=Uo(),S=As(),[,C]=te({protocolId:a,coinId:o,address:t,chainId:r?.chainId}),{inscriptionOutput:_,minOutput:y}=C||{},[F,P]=yS(),L=F?.satBytes;(0,Go.useEffect)(()=>{if(!L&&C?.normal&&P({level:zo.STANDARD,satBytes:C?.normal}),L&&F?.level!==zo.CUSTOM){let we=C[jn[F?.level]?.satBytes];P({...F,satBytes:we})}},[C]);let B=jo(o,void 0,{addressType:d}),w=PS({coinId:o,isXrc20Token:c,sendAmountInt:f,protocolId:a,inscriptionOutput:_}),D=wS({coin:r,protocolId:a}),[,O]=ES({coin:r,coinId:o,walletId:n,protocolId:a,tick:D,address:t,coinAmount:f,isXrc20Token:c}),Z=bS({fromAddr:t,toAddr:e,coinTick:D,transferInputs:O,minOutput:y,isXrc20Token:c,protocolId:a,sendAmountInt:f}),N=(0,Go.useMemo)(()=>{if(O?.length)return O.map(({txHash:we,vout:Un})=>`${we}-${Un}`)},[O]),W=kS({coin:r,isXrc20Token:c,protocolId:a,satBytes:L,transferInputs:O}),J=BS({coin:r,isXrc20Token:c,protocolId:a,sendAmount:l}),M=(0,Go.useMemo)(()=>a===U.SRC_20?{protocolId:a,utxoType:rt.BRC20_CONVERTIBLE}:{utxoType:rt.TRANSFER,needFilteredUtxo:[U.RUNES,U.ARC_20,U.RUNEMAIN,U.FRACTAL_RUNES].includes(a)?N:void 0},[N,a]),[$,io]=NS({coinId:o,walletId:n,satBytes:L,address:t,isXrc20Token:c,coinBalance:B}),[no,Bo]=vS({coinId:o,walletId:n,protocolId:a,tick:D,address:t}),[ht,,_t]=LS({coinId:o,toAddr:e,walletId:n,fromAddr:t,satBytes:L,inputs:O,outputs:Z,networkFee:g,revealOutValue:_,coinAmount:w,utxoParams:M,inscriptionData:J,isXrc20Token:c,availableFeeCoinAmountInt:A,availableSendCoinAmountInt:S,sendAmountInt:f},{ready:W,networkFeeInt:g}),Pe=(0,Go.useMemo)(()=>[U.RUNES,U.ARC_20,U.RUNEMAIN,U.FRACTAL_RUNES].includes(a)?io===void 0||Bo===void 0:io===void 0,[io,a,Bo]),ke=(0,Go.useMemo)(()=>r?.chainId!==Sc&&r?.chainId!==xc||o===22?!1:r&&!a?!0:U.RUNEMAIN===a,[r,o,a]);return{coin:r,toAddr:e,coinId:o,walletId:n,signInfo:C,feeError:_t,fromAddr:t,protocolId:a,baseCoinId:m,feeLoading:ht,addressType:d,sendAmountInt:f,networkFeeInt:g,transferInputs:O,transferOutputs:Z,isXrc20Token:c,utxoParams:M,initLoading:Pe,mergedCoinAmount:w,src20InscriptionData:J,sendCoinAvailableAmount:I,availableSendCoinAmountInt:S,availableFeeCoinAmountInt:A,selectedNetworkFeeLevel:F,setSelectedNetworkFeeLevel:P,loading:$||ht||no,supportDecimal:ke}},Js=DS;s();i();var kl=u(x());H();Eo();s();i();var El=u(x());H();s();i();s();i();var Fl=u(E());var bl=()=>(0,Fl.useSelector)(un).transferOutputs;var Pl=({isArc20Token:o,sendCoinBalance:t,doubleMinOutput:e,minOutput:n,coin:r})=>{let a=bl();return(0,El.useCallback)(c=>o?v.lte(t,e)&&c!==t?{key:"wallet_extension_error_dust_limit_full_amount",args:{amount:t,token:r?.symbol},type:eo.COMMON_ERROR}:el(a,n)?{key:"wallet_extension_error_dust_limit_transaction",type:eo.COMMON_ERROR}:tl(a,n)?{key:"wallet_extension_error_dust_asset_continue",type:eo.COMMON_TIP}:null:null,[o,t,e,n,r,a])};var wl=o=>{let t=Ro(),e=Xo(t),n=e?.baseCoinId===0,a=e?.protocolId===U.ARC_20,c=v.div(o,10**e?.decimals),m=Uo(),d=v.mul(c,2),l=Pl({isArc20Token:a,sendCoinBalance:m,doubleMinOutput:d,minOutputFloat:c,minOutput:o,coin:e});return(0,kl.useCallback)(g=>{if(!o)return null;let f=l(g);return f||(n&&v.lt(g,c)?{key:"wallet_extension_send_transfer_at_least",args:{amount:`${c} ${e?.symbol}`},type:eo.COMMON_ERROR}:null)},[o,l,n,c,e?.symbol])},Bl=o=>{let t=wl(o);oo([t])},Nl=o=>{let t=wl(o);to([t])};s();i();var it=u(x());H();var MS=()=>{let o=Mt(),{coin:t}=T();return(0,it.useCallback)(n=>{let r="";return n.key&&(r=b(n?.key,n?.args)),n?.type===eo.BALANCE_INSUFFICIENT?it.default.createElement(it.default.Fragment,null,it.default.createElement(V.Box,{className:ko.wrap},r),it.default.createElement(V.Box,{className:ko.wrap},it.default.createElement(ge,{coin:t,receiveOnly:!0}))):n?.type===eo.FEE_BALANCE_INSUFFICIENT?it.default.createElement(it.default.Fragment,null,it.default.createElement(V.Box,{className:ko.wrap},r),it.default.createElement(V.Box,{className:ko.wrap},it.default.createElement(ge,{coin:o}))):r},[t,o])},vl=MS;s();i();var Ll={"amount-page__available_balance__icon":"_amount-page__available_balance__icon_69wv8_1",amountPageAvailableBalanceIcon:"_amount-page__available_balance__icon_69wv8_1"};function OS(){let{coin:o,coinId:t,signInfo:e,initLoading:n,addressType:r,fromAddr:a}=Js(),{receivedPendingBalance:c,receivedPendingBalanceDisplay:m}=Ce(),{lockedAmount:d}=gd(a,o),l=De(d,{decimals:o.decimals});Bl(e?.minOutput);let g=vl(),f=(0,xe.useMemo)(()=>dt({coinId:t})?b("extension_defi_bot_popuptext_current_balance_coverage_icu",{chainName:o?.symbol}):o?.protocolId===U.SRC_20?b("extension_defi_tooltip_text_balance_udpate"):o?.protocolId===U.ARC_20?b("extension_defi_tooltip_text_utxo_exclude"):o?.protocolId===U.RUNEMAIN||o?.protocolId===U.FRACTAL_RUNES?b("extension_defi_hover_text_avail_balance"):null,[o?.protocolId,o?.symbol,t]);return xe.default.createElement(X,{isGlobalLoading:n,renderError:g,totalAmountProps:{type:"amount",title:xe.default.createElement(xe.default.Fragment,null,b("extension_defi_text_available_balance"),!!f&&xe.default.createElement(Qt,{size:Qt.SIZE.xxs,tooltip:f,icon:"okx-wallet-plugin-information-circle",className:Ll["amount-page__available_balance__icon"]})),slot:{bottom:Number(d)>0||Number(c)>0?xe.default.createElement(Pn,{lockedAmount:d,lockedAmountDisplay:l,pendingXrc:c,pendingXrcDisplay:m,addressType:r,coinId:t}):void 0}}})}var Dl=OS;s();i();var St=u(x()),Ys=u(E()),Ml=u(No()),zs=u(G()),Ol=u(Jm());H();Eo();yc();var RS=546;function US(){let o=(0,Ml.useHistory)(),t=(0,Ys.useDispatch)(),[e,{toggle:n}]=(0,zs.useBoolean)(!1),{coin:r,coinId:a,toAddr:c,loading:m,walletId:d,fromAddr:l,signInfo:g,utxoParams:f,protocolId:A,baseCoinId:I,feeLoading:S,addressType:C,isXrc20Token:_,networkFeeInt:y,sendAmountInt:F,transferInputs:P,transferOutputs:L,mergedCoinAmount:B,availableFeeCoinAmountInt:w,selectedNetworkFeeLevel:D,setSelectedNetworkFeeLevel:O,src20InscriptionData:Z,supportDecimal:N}=Js(),W=vo(),J=(0,Ys.useSelector)(Vr),M=Nr[r?.localType]?.[C],{showManageUTXO:$}=vs(r,M,!0);Nl(g?.minOutput,a);let io=us(d),[no,Bo]=(0,St.useState)(!1),ht=(0,zs.useMemoizedFn)(Sr=>$&&[Fn.BALANCE_INSUFFICIENT,Fn.FEE_BALANCE_INSUFFICIENT].includes(Sr)?[{onClick:async()=>{await t(cn(!1));let zt=Ol.default.stringify({addressType:C,coinId:I},{skipEmptyString:!0,skipNull:!0}),Je=zt?`?${zt}`:"";o.push(Gr+Je)},btnText:b("wallet_extension_mid_textbtn_manage_utxo")}]:[]),_t=Zn({coinId:a,walletId:d,address:l,utxoType:rt.TRANSFER,satBytes:D?.satBytes,...f}),Pe=qu({coinId:a,toAddr:c,walletId:d,fromAddr:l,protocolId:A,networkFee:y,localType:r?.localType,outputs:L,inscriptionData:Z,dustSize:_?void 0:g?.minOutput,satBytes:D?.satBytes,coinAmount:a===22?RS:F,...a===22?{omni:{coinType:31,amount:F}}:{},extraPublishParams:{coinAmount:F,txType:_?Po.BRC20_SEND:Po.TRANS_OUT}}),ke=yn({coinId:a,currencyId:W,txType:_?Po.BRC20_SEND:Po.TRANS_OUT,protocolId:A,address:l}),we=(0,St.useCallback)(async()=>{if(await _n()){let zt=[];zt=await _t(B,y),zt=[...P||[],...zt],await ke(zt,()=>{o.goBack()}),Bo(!0);let Je=await Pe({utxoList:zt});return ro({tx_id:Je}),Je}return Bo(!1),Promise.reject()},[_t,B,y,P,ke,Pe,o,J]),Un=(0,St.useMemo)(()=>[U.RUNES,U.ARC_20,U.RUNEMAIN,U.FRACTAL_RUNES].includes(A)&&!P?.length?!0:m,[m,A,P?.length]);return St.default.createElement(St.default.Fragment,null,St.default.createElement(Q,{addressType:C,confirmButtonProps:{disabled:Un,onSubmit:we},networkFeeProps:{onClick:n,loading:S,feeLevel:D?.level},renderTipActions:ht,defaultMessage:dt({coinId:I})&&g?.transferReminder,canTransferAmount:dt({coinId:I})&&w}),St.default.createElement(ks,{visible:e,coinId:I,signInfo:g,currencyId:W,estimatedFee:y,value:D,onChange:O,onToggleVisible:n,supportDecimal:N}),St.default.createElement(id,{visible:io&&no}))}var Rl=US;s();i();var Ul=u(x());function WS({children:o}){let e=Qo().get("from");return Ul.default.createElement(bo,{fromAddress:e},o)}var Wl=WS;var GS={match:o=>Zc(o),Container:Wl,pages:{AddressPage:yl,AmountPage:Dl,ConfirmPage:Rl}},Gl=GS;s();i();Eo();s();i();var Jl=u(x());s();i();var Vl=u(x());var VS=()=>{let o=En(),t=e=>e.filter(r=>/^(bc1p)/.test(r.address));return(0,Vl.useCallback)(e=>o(e).map(a=>({...a,list:t(a?.list)})).filter(a=>a?.list?.length),[o])},Hl=VS;s();i();var Zs=u(No()),ql=u(G());H();var HS=()=>{let[o,{setTrue:t,setFalse:e}]=(0,ql.useBoolean)(!1),n=h(),r=k(),{coin:a,baseCoin:c}=T(),m=Wt(),{coinId:d}=(0,Zs.useParams)(),l=(0,Zs.useHistory)();return{onClick:async()=>{try{t(),await m({from:n,to:r,method:"wallet_inner_transfer",chainIndex:c?.chainId??a.chainId});let{isValid:f}=await Is(r);if(f)l.push(`${Zo}/${d}${sn}?from=${n}`);else{let A=ct.warn({alignBottom:!1,title:b("wallet_extension_cat_dialog_title_risk_non_taproot"),text:b("wallet_extension_cat_dialog_subtitle_risk_non_taproot",{contractType:b("wallet_extension_cat_icu_taproot")}),confirmText:b("wallet_extension_cat_dialog_btn_cancal_transaction"),onConfirm:()=>{A.destroy()}})}}catch{}finally{e()}},loading:o}},Kl=HS;var qS=()=>{let{onClick:o,loading:t}=Kl(),e=Hl(),n=Ks();return Jl.default.createElement(j,{addressProps:{errorFns:n,extraProps:{filterAddress:e}},confirmButtonProps:{onClick:o,loading:t}})},Yl=qS;s();i();var Pt=u(x()),ap=u(E()),Ia=u(Bt());H();s();i();var zl=u(x());H();var KS=o=>{let t=Ro(),e=Xo(t),n=Ot();return(0,zl.useCallback)(()=>v.gt(n,o)?{key:"wallet_extension_cat_max_send_utxo",args:{num:o,token:e?.symbol},type:eo.COMMON_ERROR}:null,[e?.symbol,o,n])},Zl=o=>{let t=KS(o);oo([t])},$l=()=>{to()};s();i();var at=u(x()),he=u(E()),Ta=u(G());H();Oo();Eo();Ne();ve();var Xl=()=>{let o=(0,he.useDispatch)(),t=(0,he.useSelector)(un),e=(0,at.useCallback)(n=>{o(es({selectedNetworkFeeLevel:n}))},[]);return[t?.selectedNetworkFeeLevel,e]},jl=({coin:o,coinId:t,walletId:e,protocolId:n,tick:r,address:a})=>{let[,c]=Fs({coinId:t,walletId:e,protocolId:n,tick:r,address:a,coinAmount:"0",utxoType:rt.BRC20_CONVERTIBLE},{ready:o?.coinId});return[null,c]},Ql=({coin:o})=>(0,at.useMemo)(()=>{if(!o?.address)return;let t=o.address.indexOf("_"),e=o.address.indexOf("_",t+1);return o.address.slice(e+1)},[o?.address]),op=({coinId:o,walletId:t,satBytes:e,address:n,coinBalance:r})=>{let a=(0,he.useDispatch)(),[c,m]=$n({coinId:o,walletId:t,satBytes:e,address:n},{onSuccess:d=>{a(To(r?.coinAmountInt)),a($o(d))}});return[c,m]},tp=({UTXOList:o,coin:t})=>{if(!o||o.length===0)return"0";let e=o.slice(0,4).reduce((n,r)=>{let a=r?.tokenAmount;return v.add(n,a)},"0");return v.div(e,10**t?.decimals)},JS=({sendAmountInt:o,UTXOList:t})=>(0,at.useMemo)(()=>{if(!t||!Number(o))return[];let e=[],n="0";for(let r=0;r<t.length;r++){let a=t[r],c=a?.tokenAmount;if(n=v.add(n,c),e.push(a),v.gte(n,o))break}return e},[t,o]),YS=({selectedUtxo:o,signInfo:t,chainIndex:e,walletId:n})=>{let r=t?.extInfo?.tokenAddr,a=t?.extInfo?.minterAddr,c=(0,he.useDispatch)(),{error:m,loading:d,data:l}=(0,Ta.useRequest)(async()=>{if(!o||o.length===0)return[];if(!r||!a)return[];let g=o.map(S=>({txHash:S.txHash,tokenAddress:r,minterAddress:a,chainIndex:e})),f=await co().getRequestHeaders({walletId:n,needSign:!0,currency:"usd"}),I=(await mt(Yo.getCat20GrandFatherRawTx,{rawTxRequestList:g},{headers:f}))?.data;if(I&&!I.find(S=>S.txStatus!==0))return I;throw c(R(!0)),sc.error({title:b("wallet_extension_cat_toast_error_service")}),new Error},{debounceWait:500,refreshDeps:[o]});return[m,d,l]},zS=({signInfo:o,selectedUtxo:t,grandFatherRawTxs:e,address:n})=>(0,at.useMemo)(()=>{if(!o||!e||!e.length)return null;let r=o?.extInfo,a={minterAddr:r?.minterAddr,tokenAddr:r?.tokenAddr,info:{max:r?.max,name:r?.name,limit:r?.limit,symbol:r?.symbol,premine:"0",decimals:r?.decimals,minterMd5:r?.minterMd5},tokenId:r?.tokenId,revealTxid:r?.revealTxid,revealHeight:r?.revealHeight,genesisTxid:r?.genesisTxid,name:r?.name,symbol:r?.symbol,decimals:r?.decimals,minterPubKey:r?.minterPubKey,tokenPubKey:r?.tokenPubKey},c=t.map(d=>({utxo:{txId:d.txHash,outputIndex:d.vout,script:r?.script,satoshis:String(d.coinAmount)},txoStateHashes:d.stateHashArray,state:{address:n,amount:d.tokenAmount}})),m=e.map(d=>({prevTx:d?.rawTx,prevPrevTx:d?.parentRawTx}));return{tokenMetadata:a,tokens:c,tokenPrevTxs:m}},[o,e,t,n]),ZS=({coinId:o,fromAddr:t,toAddr:e,satBytes:n,coinAmount:r,protocolId:a,CAT20TxParam:c,networkFeeInt:m,...d})=>{let l=(0,he.useDispatch)(),g=Vu({coinId:o,fromAddr:t,toAddr:e,satBytes:n,coinAmount:r,protocolId:a,...d}),f=Zn({coinId:o,address:t,utxoType:rt.TRANSFER}),A=async()=>{l(fo(!0));let C=[{txId:"18de3566d7f150873ac90244dfc4234e9afbefd53e2017af71b941f17b3cf809",vOut:0,amount:10*10**8},{txId:"18de3566d7f150873ac90244dfc4234e9afbefd53e2017af71b941f17b3cf809",vOut:1,amount:3e5}],_=JSON.stringify(c?.tokenMetadata),y=JSON.stringify(c?.tokens),F=c?.tokenPrevTxs,{commitTx:P,revealTx:L}=await g({feeInputs:C,tokenMetadata:_,tokens:y,tokenPrevTxs:F}),B=v.add(P,L);if(C=await f(B),C=C.map(N=>({txId:N.txHash,vOut:N.vout,amount:N.coinAmount})),C.length===1)return l(fo(!1)),{mergeTx:"0",commitTx:P,revealTx:L};let w=await g({feeInputs:C,tokenMetadata:_,tokens:y,tokenPrevTxs:F}),D=w.mergeTx,O=v.add(D,B),Z=C.reduce((N,W)=>{let J=W?.amount;return v.add(N,J)},"0");for(;v.lt(Z,O);)C=await f(O),C=C.map(N=>({txId:N.txHash,vOut:N.vout,amount:N.coinAmount})),Z=C.reduce((N,W)=>{let J=W?.amount;return v.add(N,J)},"0"),w=await g({feeInputs:C,tokenMetadata:_,tokens:y,tokenPrevTxs:F}),D=w.mergeTx,O=v.add(D,B);return l(fo(!1)),{mergeTx:D,commitTx:P,revealTx:L}},{error:I,data:S}=(0,Ta.useRequest)(async()=>await A(),{debounceWait:500,ready:!!n&&!!c,refreshDeps:[n],onSuccess:C=>{let _=v.add(v.add(C.mergeTx,C.commitTx),C.revealTx);Math.abs(Number(v.sub(_,m)))!==parseInt(n,10)&&(l(K(_)),l(R(!1)))},onError:C=>{l(R(C))}});return[I,S]},ep=()=>{let o=Ro(),t=h(),e=so(),n=Xo(o),r=n?.protocolId,a=oe(t,e,n?.localType),c=q(),m=Uo(),[,d]=te({protocolId:r,coinId:o,address:t,chainId:n?.chainId}),[l,g]=Xl(),f=l?.satBytes;(0,at.useEffect)(()=>{if(!f&&d?.normal&&g({level:zo.STANDARD,satBytes:d?.normal}),f&&l?.level!==zo.CUSTOM){let P=d[jn[l?.level]?.satBytes];g({...l,satBytes:P})}},[d]);let A=jo(o,void 0,{addressType:a}),I=Ql({coin:n}),[,S]=jl({coin:n,coinId:o,walletId:e,protocolId:r,tick:I,address:t,coinAmount:c}),C=tp({coin:n,UTXOList:S}),[_,y]=op({coinId:o,walletId:e,satBytes:f,address:t,coinBalance:A}),F=(0,at.useMemo)(()=>y===void 0,[y]);return{initLoading:F,loading:_||F,sendCoinAvailableAmount:m,CAT20CanTransferAmount:C}},np=()=>{let o=Ro(),t=h(),e=k(),n=so(),r=Xo(o),a=r?.protocolId,c=r?.baseCoinId||o,m=oe(t,n,r?.localType),d=Ot(),l=z(),g=q(),f=In(),A=Uo(),I=As(),[,S]=te({protocolId:a,coinId:o,address:t,chainId:r?.chainId}),[C,_]=Xl(),y=C?.satBytes,F=(0,he.useDispatch)();(0,at.useEffect)(()=>{F(fo(!0))},[F]),(0,at.useEffect)(()=>{if(!y&&S?.normal&&_({level:zo.STANDARD,satBytes:S?.normal}),y&&C?.level!==zo.CUSTOM){let no=S[jn[C?.level]?.satBytes];_({...C,satBytes:no})}},[S]);let P=jo(o,void 0,{addressType:m}),L=Ql({coin:r}),[,B]=jl({coin:r,coinId:o,walletId:n,protocolId:a,tick:L,address:t,coinAmount:g}),w=tp({coin:r,UTXOList:B}),D=JS({sendAmountInt:g,UTXOList:B}),[O,Z,N]=YS({selectedUtxo:D,signInfo:S,chainIndex:r?.chainId,walletId:n}),W=zS({signInfo:S,selectedUtxo:D,grandFatherRawTxs:N,address:t}),[,J]=ZS({coinId:o,fromAddr:t,toAddr:e,satBytes:y,coinAmount:g,protocolId:a,CAT20TxParam:W,networkFeeInt:l}),[M,$]=op({coinId:o,walletId:n,satBytes:y,address:t,coinBalance:P}),io=(0,at.useMemo)(()=>$===void 0,[$]);return{coin:r,toAddr:e,coinId:o,walletId:n,signInfo:S,satBytes:y,fromAddr:t,protocolId:a,baseCoinId:c,addressType:m,sendAmount:d,sendAmountInt:g,networkFeeInt:l,feeData:J,selectedUtxo:D,initLoading:io,rawTxError:O,sendCoinAvailableAmount:A,availableSendCoinAmountInt:I,availableFeeCoinAmountInt:f,selectedNetworkFeeLevel:C,setSelectedNetworkFeeLevel:_,CAT20CanTransferAmount:w,CAT20GrandFatherRawTxs:N,CAT20TxParam:W,loading:M||Z}},rp=({coinId:o,toAddr:t,fromAddr:e,satBytes:n,walletId:r,localType:a,networkFee:c,coinAmount:m,coinAmountInt:d,protocolId:l,dustSize:g=Uu,feeData:f,CAT20TxParam:A,history:I,...S})=>{let C=Xo(o),_=vo(),y=so(),F=r||y,P=Yc(a),L=Zn({coinId:o,address:e,utxoType:rt.TRANSFER}),B=yn({coinId:o,currencyId:_,txType:Po.BRC20_SEND,protocolId:l,address:e}),w=Hu({coinId:o,toAddr:t,walletId:r,fromAddr:e,satBytes:n,localType:P,coinAmount:d,networkFee:c,dustSize:g,protocolId:l,...S}),D=Au({walletId:F});return(0,at.useCallback)(async()=>{let O=await L(c),Z=O.map(Ki=>({txId:Ki.txHash,vOut:Ki.vout,amount:Ki.coinAmount}));await B(O,()=>{I.goBack()});let N=JSON.stringify(A?.tokenMetadata),W=JSON.stringify(A?.tokens),J=A?.tokenPrevTxs,M=await w({feeInputs:Z,tokenMetadata:N,tokens:W,tokenPrevTxs:J}),{mergeTx:$,commitTx:io,revealTx:no}=M,Bo=[],ht=JSON.stringify({protocolId:U.CAT20,broadcastType:1,nftIds:[]}),_t,Pe=await So(a,io),ke=await So(a,no);$&&(_t=await So(a,$));let we={signedTx:$,fromAdr:e,toAdr:e,serviceCharge:f.mergeTx,coinAmount:"0",coinId:C?.baseCoinId,txHash:_t,txType:Po.CAT20_NOT_SHOWN,dependTx:[],itemId:"mergeTx",extJson:ht},Un={signedTx:io,fromAdr:e,toAdr:"bc1p2t67cfrgz5fg38mktge38d6x5r5jkqwl8a8ysszzx6gx58l5vtlqj3zpvh",serviceCharge:f.commitTx,coinAmount:"332",coinId:C?.baseCoinId,txHash:Pe,txType:Po.CAT20_NOT_SHOWN,dependTx:_t?[_t]:[],itemId:"commitTx",extJson:ht},Sr={signedTx:no,fromAdr:e,toAdr:t,serviceCharge:f.revealTx,coinAmount:d,coinId:o,txHash:ke,txType:Po.BRC20_SEND,dependTx:[Pe],itemId:"revealTx0",extJson:ht};$&&Bo.push(we),Bo.push(Un,Sr);let Je=(await D(Bo))[ke];ro({tx_id:Je})},[L,c,B,A?.tokenMetadata,A?.tokens,A?.tokenPrevTxs,w,a,e,f,C?.baseCoinId,t,d,o,D,I])};s();i();var Io=u(x());H();var sp=u(Bt()),$S=()=>{let o=Mt(),{coin:t}=T();return(0,Io.useCallback)(n=>{let r="";if(n.key&&(r=b(n?.key,n?.args)),n?.type===eo.BALANCE_INSUFFICIENT)return Io.default.createElement(Io.default.Fragment,null,Io.default.createElement(V.Box,{className:ko.wrap},r),Io.default.createElement(V.Box,{className:ko.wrap},Io.default.createElement(ge,{coin:t,receiveOnly:!0})));if(n?.type===eo.FEE_BALANCE_INSUFFICIENT)return Io.default.createElement(Io.default.Fragment,null,Io.default.createElement(V.Box,{className:ko.wrap},r),Io.default.createElement(V.Box,{className:ko.wrap},Io.default.createElement(ge,{coin:o})));let a=()=>{ct.action({title:" ",children:Io.default.createElement("div",{className:ko.dlgContainer},Io.default.createElement("div",{className:ko.dlgTitle},b("wallet_extension_cat_drawer_title_utxo_meaning")),Io.default.createElement("div",{className:ko.dlgContent},b("wallet_extension_cat_drawer_subtitle_utxo_meaning")),Io.default.createElement("div",{className:(0,sp.default)(ko.dlgTitle,ko.dlgGap)},b("wallet_extension_cat_drawer_title_cat_contract")),Io.default.createElement("div",{className:ko.dlgContent},b("wallet_extension_cat_drawer_subtitle_cat_contract"))),confirmText:b("commonall_button_text_next"),onConfirm:c=>{c.destroy()}})};return n?.key==="wallet_extension_cat_max_send_utxo"?Io.default.createElement(Io.default.Fragment,null,Io.default.createElement(V.Box,{className:ko.wrap},r,Io.default.createElement(Ze,{className:"okx-wallet-plugin-information-circle",onClick:a}))):r},[t,o])},ip=$S;s();i();var Kt={"can-transfer-container":"_can-transfer-container_1cknb_1",canTransferContainer:"_can-transfer-container_1cknb_1","can-transfer-icon":"_can-transfer-icon_1cknb_5",canTransferIcon:"_can-transfer-icon_1cknb_5","dlg-container":"_dlg-container_1cknb_10",dlgContainer:"_dlg-container_1cknb_10","dlg-title":"_dlg-title_1cknb_13",dlgTitle:"_dlg-title_1cknb_13","dlg-content":"_dlg-content_1cknb_20",dlgContent:"_dlg-content_1cknb_20","dlg-gap":"_dlg-gap_1cknb_26",dlgGap:"_dlg-gap_1cknb_26"};function XS(){let{initLoading:o,loading:t,sendCoinAvailableAmount:e,CAT20CanTransferAmount:n}=ep();Zl(n);let r=ip(),a=(0,ap.useDispatch)(),c=hs(),m=()=>{a(fm(!1)),c()},d=()=>{ct.action({title:" ",children:Pt.default.createElement("div",{className:Kt.dlgContainer},Pt.default.createElement("div",{className:Kt.dlgTitle},b("wallet_extension_cat_drawer_title_utxo_meaning")),Pt.default.createElement("div",{className:Kt.dlgContent},b("wallet_extension_cat_drawer_subtitle_utxo_meaning")),Pt.default.createElement("div",{className:(0,Ia.default)(Kt.dlgTitle,Kt.dlgGap)},b("wallet_extension_cat_drawer_title_cat_contract")),Pt.default.createElement("div",{className:Kt.dlgContent},b("wallet_extension_cat_drawer_subtitle_cat_contract"))),confirmText:b("commonall_button_text_next"),onConfirm:l=>{l.destroy()}})};return Pt.default.createElement(X,{isGlobalLoading:o,renderError:r,customMaxAmount:n,confirmButtonProps:{loading:t,onClick:m},totalAmountProps:{maxAmount:n,type:"amount",title:Pt.default.createElement("div",{className:Kt.canTransferContainer},Pt.default.createElement("div",{className:Kt.canTransferText},b("wallet_extension_cat_desc_available_utxo")),Pt.default.createElement(Ze,{className:(0,Ia.default)(Kt.canTransferIcon,"okx-wallet-plugin-information-circle"),onClick:d})),slot:{bottom:Pt.default.createElement(Pn,{catTotalAmount:e})}}})}var cp=XS;s();i();var ne=u(x()),mp=u(E()),up=u(No()),$s=u(G()),dp=u(Jm());H();yc();function jS(){let o=(0,up.useHistory)(),t=(0,mp.useDispatch)(),[e,{toggle:n}]=(0,$s.useBoolean)(!1),{coin:r,coinId:a,toAddr:c,loading:m,walletId:d,fromAddr:l,signInfo:g,satBytes:f,sendAmount:A,sendAmountInt:I,protocolId:S,baseCoinId:C,addressType:_,networkFeeInt:y,feeData:F,selectedUtxo:P,availableFeeCoinAmountInt:L,selectedNetworkFeeLevel:B,setSelectedNetworkFeeLevel:w,CAT20TxParam:D}=np(),O=rp({coinId:a,toAddr:c,fromAddr:l,satBytes:f,walletId:d,feeData:F,localType:r?.localType,networkFee:y,coinAmount:A,coinAmountInt:I,protocolId:S,CAT20TxParam:D,history:o}),Z=vo(),N=Nr[r?.localType]?.[_],{showManageUTXO:W}=vs(r,N,!0);$l();let J=(0,$s.useMemoizedFn)(io=>W&&[Fn.BALANCE_INSUFFICIENT,Fn.FEE_BALANCE_INSUFFICIENT].includes(io)?[{onClick:async()=>{await t(cn(!1));let no=dp.default.stringify({addressType:_,coinId:C},{skipEmptyString:!0,skipNull:!0}),Bo=no?`?${no}`:"";o.push(Gr+Bo)},btnText:b("wallet_extension_mid_textbtn_manage_utxo")}]:[]),M=(0,ne.useCallback)(async()=>{await O()},[O]),$=(0,ne.useMemo)(()=>!P?.length||m,[m,P?.length]);return ne.default.createElement(ne.default.Fragment,null,ne.default.createElement(Q,{addressType:_,confirmButtonProps:{disabled:$,onSubmit:M},networkFeeProps:{onClick:n,feeLevel:B?.level},renderTipActions:J,defaultMessage:dt({coinId:C})&&g?.transferReminder,canTransferAmount:dt({coinId:C})&&L}),ne.default.createElement(ks,{visible:e,coinId:C,signInfo:g,currencyId:Z,estimatedFee:y,value:B,onChange:w,onToggleVisible:n}))}var fp=jS;s();i();var lp=u(x());function QS({children:o}){let e=Qo().get("from");return lp.default.createElement(bo,{fromAddress:e},o)}var pp=QS;var ox={match:(o,t,e)=>dt({coinId:o})&&[U.CAT_20].includes(e),Container:pp,pages:{AddressPage:Yl,AmountPage:cp,ConfirmPage:fp}},gp=ox;s();i();Ao();s();i();var Pp=u(x());var Qs=u(E());var xa=u(G());H();s();i();var Ip=u(x()),Sp=u(G());s();i();H();et();var Ap=(o,t)=>{let[e,n]=o?.split("-");return[{policyId:e,assets:[{amount:t,assetName:n}]}]},tx=(o,t)=>ja($a([...o,...t],"assetName")).map(n=>{let r=o.find(c=>c?.assetName===n),a=t.find(c=>c?.assetName===n);return{assetName:n,amount:v.add(r?.amount||0,a?.amount||0)}}),ex=o=>{let t=o.reduce((n,r)=>{let{multiAsset:a}=r;return a?.length?[...n,...a]:n},[]),e=[];return t.forEach(n=>{let{policyId:r,assets:a}=n,c=Za(e,{policyId:r});if(c!==-1){let{assets:m}=e[c];e[c]={policyId:r,assets:tx(a,m)}}else e=[...e,n]}),e},Cp=async({toAddr:o,utxoList:t,baseCoinId:e,sendAmountInt:n,contractAddress:r})=>{let{AdaWallet:a}=await qn(),c;return e===0&&t?.some(({multiAsset:m})=>!!m?.length)?c=ex(t):e!==0&&(c=Ap(r,n)),a.minAda(o,c)},Tp=async o=>{let{AdaWallet:t}=await qn();return t.minFee(o)},nx="999999999",rx="transfer",Xs=({toAddr:o,utxoList:t,fromAddr:e,sendAmount:n,baseCoinId:r,contractAddress:a,minTransferAmountInt:c})=>{let m={address:o,inputs:t,ttl:nx,type:rx,changeAddress:e};return r===0?m={...m,amount:n}:m={...m,amount:c,multiAsset:Ap(a,n)},m};var sx=({utxoList:o,toAddr:t,fromAddr:e,coinId:n,sendAmount:r,minTransferAmountInt:a},c)=>{let m=Xo(n),[d,l]=(0,Ip.useState)("0");return(0,Sp.useDeepCompareEffect)(()=>{(async()=>{if(!o?.length)return;let g=Xs({toAddr:t,fromAddr:e,utxoList:o,contractAddress:m?.address,baseCoinId:m?.baseCoinId,sendAmount:r,minTransferAmountInt:a});try{let f=await Tp({data:g});c?.(f),l(f)}catch(f){console.log(f)}})()},[m,t,e,r,a,o]),d},xp=sx;s();i();var yp=u(x()),Fp=u(G());s();i();var _p=u(G());ve();Ne();Oo();H();s();i();var hp=u(No());var ix=()=>{let{coinId:o}=(0,hp.useParams)(),t=h(),e=so(),[n,r]=Qm(o);return{address:t,walletId:e,coin:n||{},coinId:Number(o),baseCoin:r||{},baseCoinId:n?.baseCoinId}},Nn=ix;var ax=()=>{let o=le(),{coin:t,coinId:e,walletId:n,address:r}=Nn(),a=t?.baseCoinId;return(0,_p.useMemoizedFn)(async(c,m,d)=>{let l=await co().getRequestHeaders({walletId:n,needSign:!0,currency:"usd"}),g=m,f=c,A=v.add(v.add(a===0?c:d,m),d);a===0&&v.gte(A,o)&&(f=o,g="0"),a!==0&&(g=v.add(m,v.add(d,d)));let I={coinId:e,address:r,fee:g,amount:f},{data:S}=await mt(Yo.getSpecialUtxoList,I,{headers:l});return S},[e,n,r,a,o])},js=ax;var cx=(o,t,e)=>{let[n,r]=(0,yp.useState)([]),a=js();return(0,Fp.useDeepCompareEffect)(()=>{(async()=>{let c=await a(o,t,e);r(c)})()},[o,t,e,a]),n},bp=cx;s();i();var Sa=u(G());H();var mx=o=>{let t=T(),{coin:{symbol:e,baseCoinId:n,decimals:r}}=t,a=v.div(o,10**r);return(0,Sa.useMemoizedFn)(c=>n===0&&v.gt(a,0)&&v.lt(c,a)?{key:"wallet_extension_send_transfer_at_least",args:{amount:De(a,{symbol:e})},type:eo.COMMON_ERROR}:null,[a,e,n])},ux=o=>{let t=Mt(),{coin:e}=T(),n=z(),r=le(),{baseCoinId:a}=e;return(0,Sa.useMemoizedFn)(c=>{let m=v.mul(c,10**e?.decimals),d,l;a===0?(l=v.add(v.add(m,n),o),d=v.add(m,n)):(l=v.add(v.add(n,o),o),d=v.add(n,o));let g=v.sub(r,d);return Number(g)!==0&&v.lt(g,o)?{key:"extension_wallet_cardano_text_token_atleast",args:{amount:De(l,{decimals:t?.decimals})},type:eo.COMMON_ERROR}:null},[a,n,r,t?.decimals,e?.decimals])},dx=o=>{let t=mx(o),e=ux(o);oo([t,e])},Ep=dx;function fx(){let o=(0,Qs.useDispatch)(),t=z(),n=(0,Qs.useSelector)(zr)?.minTransferInt,r=q(),a=k(),c=le(),{coin:m,coinId:d,baseCoinId:l,address:g}=Nn(),f=bp(r,t,n);return(0,xa.useDeepCompareEffect)(()=>{(async()=>{let A=await Cp({contractAddress:m?.address,baseCoinId:l,utxoList:f,toAddr:a,sendAmountInt:r});o(km({minTransferInt:A}))})()},[f,l,a,r,m?.address]),(0,xa.useDeepCompareEffect)(()=>{l===0&&f?.some(({multiAsset:A})=>!!A?.length)&&o(To(v.sub(c,n)))},[f,c,n]),Ep(n),xp({coinId:d,toAddr:a,utxoList:f,fromAddr:g,minTransferAmountInt:n,sendAmount:r},A=>{o(K(A))}),Pp.default.createElement(X,null)}var kp=fx;s();i();var vp=u(x());s();i();var wp=u(E()),Bp=u(G());H();var lx=()=>{let t=(0,wp.useSelector)(zr)?.minTransferInt,{coin:e,coinId:n,address:r,walletId:a}=Nn(),c=Cn(a),m=q(),d=k(),l=z(),g=js(),f=Fo({fromAddr:r,walletId:a,localType:e?.localType});return(0,Bp.useMemoizedFn)(async()=>{try{let I=await g(m,l,t),S=Xs({toAddr:d,fromAddr:r,utxoList:I,minTransferAmountInt:t,sendAmount:m,baseCoinId:e?.baseCoinId,contractAddress:e?.address}),C=await f({params:S}),_=await So(e?.localType,C),y={coinId:n,txHash:_,signedTx:C,walletId:a,toAdr:d,serviceCharge:l,fromAdr:r,coinAmount:m,walletType:c?.serverWalletType},F=await Hs(y);ro({tx_id:F})}catch(I){Xe.error(I?.error_message||b("wallet_home_toast_network_error"))}},[e,m,d,t,l,c?.serverWalletType,g])},Np=lx;function px(){let o=Np();return to(),vp.default.createElement(Q,{confirmButtonProps:{onSubmit:o}})}var Lp=px;var gx={match:o=>o===Ac,pages:{AmountPage:kp,ConfirmPage:Lp,AddressPage:j}},Dp=gx;s();i();s();i();var Op=u(x());s();i();et();Ao();var Ax=()=>{let o=Ut(),t=jc(),e=fs({factionType:kr});return[o,async n=>(await Promise.all(t.map(c=>{let m=Lr(e,c);return fe(n,c,m)}))).some(Ka)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}]},Mp=Ax;var Cx=()=>{let o=Mp();return Op.default.createElement(j,{addressProps:{errorFns:{fns:o,override:!0}}})},Rp=Cx;s();i();var Vp=u(x());s();i();var Wp=u(E()),ti=u(G());po();s();i();Oo();po();var Tx=async({memo:o,fromAddress:t,toAddress:e,amountInt:n,isIBCTransfer:r,chain:a,signInfo:c,walletId:m})=>{let{chainId:d,sequence:l,accountNumber:g,feeDemon:f,demon:A,sourceChannel:I,normal:S,gasLimit:C}=c,_={chainId:d,sequence:l,accountNumber:g,feeDemon:f,feeAmount:Mo(S,C),gasLimit:C,memo:o,fake:!0},y={fromAddress:t,toAddress:e,demon:A,amount:n},F={};if(r){let L=lo(Math.round(Date.now()/1e3),300);F={..._,type:Qe.IBC_TRANSFER,data:{...y,sourcePort:"transfer",sourceChannel:I,ibcTimeoutTimestamp:L}}}else F={..._,type:Qe.TRANSFER,data:{...y}};return await co().signTransaction(F,t,a?.baseChain,m,{chain:a.localType})},Up=Tx;s();i();var oi=u(x());Ao();function ha(){let{baseCoin:o}=T(),t=k(),[e,n]=(0,oi.useState)(!1),r=fs({factionType:kr});return(0,oi.useEffect)(()=>{(async()=>{let c=Lr(r,o.coinId),m=await fe(t,o?.coinId,c);n(!m)})()},[o,t]),e}var Ix=()=>{let o=(0,Wp.useDispatch)(),[t,{setFalse:e}]=(0,ti.useBoolean)(!0),{coin:n}=T(),{coinId:r}=n,a=h(),c=k(),m=uo(),d=ha(),l=ls({localType:n?.localType}),g=so(),f=Rt();return(0,ti.useDebounceEffect)(()=>{r&&c&&m!=="0"&&l?.localType&&(async()=>{try{let I=await Wc({coinId:r,from:a,to:c}),S=await Up({memo:"",fromAddress:a,toAddress:c,amountInt:f?"0":m,isIBCTransfer:d,chain:l,signInfo:I,walletId:g}),C=await Gc({coinId:r,from:a,inputData:S}),_=Math.ceil(Mo(I.normal,C));o(K(_)),o(as({inputData:S,signInfo:I,gasLimit:C,isIBCTransfer:d})),o(R(!1))}catch{o(R(!0))}finally{e()}})()},[r,a,c,m,d,l?.localType,f]),t},Gp=Ix;function Sx(){let o=Gp();return oo(),Vp.default.createElement(X,{confirmButtonProps:{loading:o}})}var Hp=Sx;s();i();var kt=u(x()),ni=u(E()),Jp=u(G());s();i();var _e=u(x()),qp=u(Bt());H();s();i();var vn={"retina-border-basic":"_retina-border-basic_13q86_1",retinaBorderBasic:"_retina-border-basic_13q86_1","memo-input":"_memo-input_13q86_29",memoInput:"_memo-input_13q86_29","memo-input-box":"_memo-input-box_13q86_29",memoInputBox:"_memo-input-box_13q86_29","memo-input-core":"_memo-input-core_13q86_32",memoInputCore:"_memo-input-core_13q86_32","memo-title__link":"_memo-title__link_13q86_35",memoTitleLink:"_memo-title__link_13q86_35","memo-title__link__dashed":"_memo-title__link__dashed_13q86_39",memoTitleLinkDashed:"_memo-title__link__dashed_13q86_39"};var xx=({value:o,onChange:t,placeholder:e,title:n=b("wallet_extension_title_memo_optional"),dashed:r=!0,error:a,errorType:c,maxLength:m=256})=>{let d=Km();return _e.default.createElement(bt,{bordered:!1},_e.default.createElement(Xn,{title:_e.default.createElement(Wm,{href:d?.sendMemoInput,className:(0,qp.default)(vn["memo-title__link"],{[vn["memo-title__link__dashed"]]:r})},_e.default.createElement(Y.Text,{inherit:!0},n))},_e.default.createElement(Zt.TextArea,{placeholder:e||b("wallet_extension_input_memoinfro"),size:Zt.SIZE.xl,autoResize:!0,value:o,onChange:t,maxLength:m,error:a,errorType:c,className:vn["memo-input"],inputClassName:vn["memo-input-core"],innerClassName:vn["memo-input-box"]})))},Jt=(0,_e.memo)(xx);s();i();var ei=u(E());po();Oo();var hx=o=>{let{coin:t}=T(),e=h(),n=uo(),r=(0,ei.useSelector)(mo),a=(0,ei.useSelector)(ft),{gasLimit:c,signInfo:m,isIBCTransfer:d,gasPrice:l}=(0,ei.useSelector)(ts),g=ls({localType:t.localType}),f=Lo(),A=so();return Co(async()=>{if(!await _n())throw new Error("mpc error")},async()=>{let{chainId:y,sequence:F,accountNumber:P,feeDemon:L,demon:B,sourceChannel:w}=m,D={chainId:y,sequence:F,accountNumber:P,feeDemon:L,feeAmount:a,gasLimit:c,memo:o},O={fromAddress:e,toAddress:r,demon:B,amount:n},Z={};if(d){let W=lo(Math.round(Date.now()/1e3),300);Z={...D,type:Qe.IBC_TRANSFER,data:{...O,sourcePort:"transfer",sourceChannel:w,ibcTimeoutTimestamp:W}}}else Z={...D,type:Qe.TRANSFER,data:{...O}};return await co().signTransaction(Z,e,g?.baseChain,A,{chain:g.localType})},async y=>{let F={memo:o,gasPrice:l,gasLimit:c},P=await So(t.localType,y),L={signedTx:y,coinAmount:n,coinId:t.coinId,fromAdr:e,toAdr:r,serviceCharge:a,extJson:JSON.stringify(F),txHash:P};return await f(L)},y=>(ro({tx_id:y}),y))},Kp=hx;s();i();function _a({feeInfo:o,callback:t}){let e=gs();return{level:o.gasType,loading:!e&&o.initLoading,networkFee:!e&&o.initLoading?void 0:o.gasFee,estimateFailed:e||o.error,onClick:()=>{t()}}}function _x(){let o=(0,ni.useDispatch)(),[t,e]=(0,kt.useState)({}),[n,{toggle:r}]=(0,Jp.useToggle)(!1),{coin:a}=T(),{coinId:c}=a,m=h(),d=k(),l=uo(),g=(0,ni.useSelector)(ts),f=_a({feeInfo:t,callback:r}),[A,I]=(0,kt.useState)(""),S=Kp(A),C=async()=>{await S()},_=F=>{I(F.target.value)},y=F=>{e(F),o(K(F.gasFee)),o(R(f.estimateFailed)),o(as({...g,gasLimit:F.gasAmount,gasPrice:F.gasPriceStep}))};return to(),kt.default.createElement(kt.default.Fragment,null,kt.default.createElement(Q,{confirmButtonProps:{onSubmit:C},slot:{bottom:kt.default.createElement(kt.default.Fragment,null,kt.default.createElement(Jt,{value:A,onChange:_}),kt.default.createElement(Id,{visible:n,coinId:String(c),address:m,inputData:g.inputData,to:d,value:l,onBack:r,onClose:r,onChange:y}))},networkFeeProps:f}))}var Yp=_x;var yx={match:o=>$c(o),pages:{AddressPage:Rp,AmountPage:Hp,ConfirmPage:Yp}},zp=yx;s();i();s();i();var og=u(x());s();i();var Zp=u(G()),Fx=()=>{let{baseCoin:o}=T();return(0,Zp.useMemoizedFn)(async t=>{let e=yt(t,o.localType);return await fe(e,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})},bx=()=>{let o=Ut(),t=Fx();return[o,t]},$p=bx;s();i();var Xp=u(E()),jp=u(G());et();var Ex=10,Px=()=>{let o=(0,Xp.useDispatch)(),[t,{setTrue:e,setFalse:n}]=(0,jp.useBoolean)(!1),{coin:r,baseCoin:a}=T(),c=h(),m=k(),d=tt(),l=Wt(Nc);return{onClick:async()=>{try{e();let f=await l({from:c,to:m,method:"wallet_inner_transfer",chainIndex:a?.chainId??r.chainId}),A=Ya(f,"0.templeteId");o(vm(A===Ex)),d()}catch{}finally{n()}},loading:t}},Qp=Px;var kx=()=>{let o=$p(),{onClick:t,loading:e}=Qp();return og.default.createElement(j,{addressProps:{errorFns:{fns:o,override:!0}},confirmButtonProps:{onClick:t,loading:e}})},tg=kx;s();i();var sg=u(x());et();s();i();var eg=u(x()),ng=u(E());function wx(){let o=(0,ng.useDispatch)(),{coin:t}=T();(0,eg.useEffect)(()=>{t.systemToken&&o(ce(t.coinId))},[t.coinId])}var rg=wx;var Bx=()=>{let o=Ot(),e=!!Su().key||xr(o)||o==="",n=hs(),r=dd({disabled:e,onClick:n});return oo(),rg(),sg.default.createElement(X,{footerActions:r})},ig=Bx;s();i();var Yt=u(x()),Dn=u(E());s();i();var ag=u(x()),cg=u(E()),mg=u(No());function Nx(){let o=(0,mg.useHistory)(),{baseCoin:t}=T(),e=Ct(),n=h(),r=k(),a=q(),c=(0,cg.useSelector)(lt),m=yu(),d=Or({from:n,to:r,value:vt(a),data:c}),l=()=>{o.go(-3)};return ag.default.createElement(ed,{needMev:!0,chainId:t.chainId,walletId:e,txParams:d,showDappInfo:!1,coinId:t.coinId,onConfirm:m,onCancel:l})}var ug=Nx;s();i();var re=u(x());H();s();i();var Ln={content:"_content_19dst_1",img:"_img_19dst_6",title:"_title_19dst_11",tip:"_tip_19dst_19",btns:"_btns_19dst_26"};function vx({visible:o,onClose:t,onConfirm:e}){let n=Gm({light:"/cdn/assets/imgs/2412/59283F63358F1706.png",dark:"/cdn/assets/imgs/2412/E8B18B49F2D1B597.png"});return re.default.createElement(ct.Confirmation,{visible:o,noMargin:!0,hideCloseBtn:!1,maskClosable:!1,onClose:t},re.default.createElement("div",{className:Ln.content},re.default.createElement(ec,{src:n,className:Ln.img}),re.default.createElement("div",{className:Ln.title},b("wallet_extension_transaction_dialog_title_change_type")),re.default.createElement("div",{className:Ln.tip},b("wallet_extension_transaction_dialog_desc_change_type")),re.default.createElement("div",{className:Ln.btns},re.default.createElement(go,{category:go.CATEGORY.fill,type:go.TYPE.highlight,size:go.SIZE.lg,onClick:t},b("commonall_text_btn_cancel")),re.default.createElement(go,{category:go.CATEGORY.outline,type:go.TYPE.primary,size:go.SIZE.lg,onClick:e},b("commonall_modal_btn_continue")))))}var dg=vx;s();i();var ya=u(x()),ri=u(E());s();i();var ar={wrapper:"_wrapper_17089_1",root:"_root_17089_4",titleClass:"_titleClass_17089_7",headerClassName:"_headerClassName_17089_10",contentClassName:"_contentClassName_17089_13"};function Lx({errorMsg:o}){let t=(0,ri.useDispatch)(),{coin:e}=T(),n=(0,ri.useSelector)(lt),r=a=>{t(Nm(a))};return e.baseCoinId!==0?null:ya.default.createElement(bt,{verticalPadding:!1},ya.default.createElement(td,{className:ar.root,titleClass:ar.titleClass,headerClassName:ar.headerClassName,contentClassName:ar.contentClassName,value:n,onChange:r,error:o,autoResize:!0}))}var fg=Lx;s();i();var Fa=u(E());function Dx(){let{coin:o}=T(),t=(0,Fa.useSelector)(Im),e=(0,Fa.useSelector)(lt);return o.baseCoinId===0&&t&&e}var lg=Dx;s();i();var pg=u(E());var Mx=()=>{let o=(0,pg.useSelector)(fn),{coin:t}=T(),e=uo(),n=h(),r=k();return{fetchParams:{coinId:t.coinId,from:n,to:r,amount:e,gasPrice:o.gasPrice},userGasInfo:o,baseCoinAmountUse:t.baseCoinId===0?e:"0"}},gg=Mx;s();i();var ba=u(E());cI();Eo();Le();po();s();i();var Ag=u(x());var Ox=()=>(0,Ag.useCallback)(o=>{try{typeof o=="string"&&!!o&&ro({tx_id:o})}catch(t){console.log(t)}},[]),si=Ox;s();i();var Tg=u(x()),Ig=u(E());s();i();var Cg=({contractAddress:o,toAddress:t,amount:e})=>{try{let n=`data:application/vnd.facet.tx+json;rule=esip6,{"op":"call","data":{"to":"${o}","function":"transfer","args":{"to":"${t}","amount":"${e}"}}}`;return p.Buffer.from(n).toString("hex")}catch{return""}};var Rx=()=>{let{coin:o}=T(),t=yt(k(),o.localType),e=uo(),n=(0,Ig.useSelector)(dn),{isFacet:r,facetContractAddress:a}=n||{};return(0,Tg.useMemo)(()=>!o.address||!bu(t)?"":r?Cg({contractAddress:a,toAddress:t,amount:e}):Me(t,e),[o,t,e,r,a])},ii=Rx;var Ux=()=>{let{coin:o}=T(),t=Du(),e=hn(),n=q(),r=Rt(),a=h(),c=k(),m=yt(a,o.localType),d=yt(c,o.localType),l=Ct(),{activityId:g,activity:f,status:A,tip:I}=pe(),S=ii(),C=(0,ba.useSelector)(lt),_=(0,ba.useSelector)(dn),y=si(),F=ju({walletId:l,fromAddr:m,coinId:o.coinId}),P=ot({coinId:o.coinId,fromAddr:m,toAddr:d,localType:o.localType}),L=(N,W)=>{let{userGasInfo:J}=W,{updateGasInfo:M}=N;return M?{...M,gasLimit:J.gasLimit,supportEip1559:J.supportEip1559,networkFee:J.networkFee}:{...J}},B=N=>{let W=N.supportEip1559?N.maxFeePerGas:N.gasPrice,J=N?.networkFee||Mo(W,N.gasLimit),M=nt(e,J);if(Ko(M,0))return[!1,n];if(o.baseCoinId===0)return r?[Jo(M,0),M]:[Be(n,M),n];let $=t;o.systemToken&&($=nt($,J));let io=r?$:n;return[Be(io,$),io]},w=({updateData:N,finallyGasInfo:W,publishAmountInt:J})=>{let{nonce:M}=N,$=J,io=_c(o.localType)?.realChainIdHex,no={from:m,gasLimit:vt(W.gasLimit),nonce:vt(M),chainId:io};return W.supportEip1559?(no.maxFeePerGas=vt(W.maxFeePerGas),no.maxPriorityFeePerGas=vt(W.maxPriorityFeePerGas),no.type=Ec.FEE_MARKET):no.gasPrice=vt(W.gasPrice),_?.isFacet?(no.value="0",no.to=_?.facetBlackHoleAddress,no.data=S):o.address?(no.value="0",no.to=yt(o.address,o.localType),no.data=S):(no.value=vt($),no.to=d,C&&(no.data=C)),Or(no)},D=({txParams:N,publishAmountInt:W,finallyGasInfo:J})=>{let M={...N};return o.systemToken&&(M.value=oc(vt(W))),M.walletId=l,M.supportEip1559=J.supportEip1559,M},O=({txParams:N,publishAmountInt:W,dataForCheck:J={}})=>{let{userGasInfo:M={}}=J,$=rn(N.value),io=rn(N.gasLimit),no=rn(M.supportEip1559?N.maxFeePerGas:N.gasPrice),Bo={...N,value:$,from:a,to:c,gas:io,gasPrice:no,priorityFee:rn(M.supportEip1559?N.maxPriorityFeePerGas:0),nonce:rn(N.nonce),repeatTxType:bc.CONFIRMING,oldTxHash:"",gasType:M?.gasType};return{coinId:o.coinId,coinAmount:W,fromAdr:a,toAdr:c,serviceCharge:Mo(io,no),extJson:JSON.stringify(Bo),txSource:ut.NORMAL,inputData:N.data?N.data:"",activityId:g}};return async(N,W={})=>{let J=L(N,W),[M,$]=B(J);if(!M)throw new Error("balance check error");let io=w({updateData:N,finallyGasInfo:J,publishAmountInt:$}),no=D({txParams:io,publishAmountInt:$,finallyGasInfo:J}),Bo=O({txParams:io,publishAmountInt:$,dataForCheck:W});tc({activityId:g,activity:f,status:A,tip:I,walletId:l,address:m});let ht=await F(no),_t=await P(ht,Bo);y(_t)}},Sg=Ux;s();i();var ai=u(E());var Wx=()=>{let o=(0,ai.useDispatch)(),t=z(),e=(0,ai.useSelector)(fn),{gasLimit:n,gasPrice:r,maxPriorityFeePerGas:a,maxFeePerGas:c,supportEip1559:m,extFee:d,gasPriceInfo:l,gasLimitInfo:g,gasType:f}=e,{minGasFee:A}=su({gasLimit:n,gasPrice:r,maxPriorityFeePerGas:a,maxFeePerGas:c,supportEip1559:m,extFee:d,gasPriceInfo:l,gasLimitInfo:g,gasType:f});return{feeLevel:f,networkFee:A,maxNetworkFee:t,onClick:()=>{o(ns(!0))}}},xg=Wx;var Gx=()=>{let o=(0,Dn.useDispatch)(),t=xg(),e=gg(),n=_u(),r=Qu(),a=Sg(),{clear:c}=pe(),m=(0,Dn.useSelector)(lt),d=Ps(m),l=lg(),[g,f]=(0,Yt.useState)(!1),A=async()=>{if(l)return f(!0),{pause:!0};try{let S=await r({...e.fetchParams,userGasInfo:e.userGasInfo,baseCoinAmountUse:e.baseCoinAmountUse,whetherCheckRepeat:!0,onRepeatCancel:n});return await a(S,e),null}catch(S){if(S?.message===cu)throw new Error(_s);{let C=S?.data?.originalError;throw cd(C?.code)&&c?(c(),C):S}}},I=(0,Dn.useSelector)(ue);return to(),Yt.default.createElement(Yt.default.Fragment,null,Yt.default.createElement(Q,{slot:{bottom:Yt.default.createElement(fg,{errorMsg:d})},networkFeeProps:t,confirmButtonProps:{disabled:!!d,onSubmit:A},tipMessageProps:{blockAddressInfo:I}}),Yt.default.createElement(dg,{visible:g,onClose:()=>{f(!1),Xi({action_after_pop_up:"cancel"})},onConfirm:()=>{o(Lm(!0)),f(!1),Xi({action_after_pop_up:"confirm"})}}))};function Vx(o){return(0,Dn.useSelector)(Zr)?Yt.default.createElement(ug,null):Yt.default.createElement(Gx,{...o||{}})}var hg=Vx;s();i();var xt=u(x()),ye=u(E()),Ea=u(G());s();i();var _g=u(E());function Hx(){let{coin:o}=T(),t=h(),e=xu(),n=(0,_g.useSelector)(fn);return eu({txType:tu.transfer,coinId:o.coinId,fromAddress:t,unavailable:n.gasType===zo.CUSTOM,fee:e})}var yg=Hx;var qx=(0,xt.memo)(()=>{let o=(0,ye.useDispatch)(),t=(0,xt.useRef)(!1),e=(0,xt.useRef)(!1),n=(0,ye.useSelector)(Lt),r=(0,ye.useSelector)(Tm),{coin:a}=T(),c=h(),m=k(),d=yt(c,a.localType),l=yt(m,a.localType),g=ii(),f=(0,ye.useSelector)(lt),A=a.baseCoinId===0?f:g,I=q(),S=vo(),C=Cs(),_=(0,ye.useSelector)(dn),{isFacet:y,facetBlackHoleAddress:F}=_||{},{disabled:P,fetchOnce:L}=(0,xt.useMemo)(()=>{let M=null,$=a.baseCoinId===0&&Ps(f);return n&&(a.baseCoinId!==0||!$)&&(M=+new Date),{disabled:$||C,fetchOnce:M}},[a.baseCoinId,f,C,n]),B=pe(),w=(0,xt.useMemo)(()=>y?F:a.baseCoinId===0?l:a.address,[a.baseCoinId,a.address,l,y,F]),D=()=>{t.current||e.current?o(R(!0)):o(R(!1))},O=(0,Ea.useMemoizedFn)(M=>{o(wm(M?.signInfo||{}))}),Z=(0,Ea.useMemoizedFn)(M=>{o(Bm(M)),o(fo(M?.isNetworkFeeLoading));let $=M.supportEip1559?M.maxFeePerGas:M.gasPrice,io=M.networkFee;$==="0"?e.current=!0:e.current=!1,M?.gasLimitInfo?.queryGasLimitErrorUseDefault?t.current=!0:t.current=!1,o(K(io)),D()}),N=()=>{o(ns(!1))},W=()=>{t.current=!1},J=()=>{t.current=!0};return xt.default.createElement(Tu,{currencyId:S,visible:r,coinId:a.coinId,address:d,inputData:A,tokenAddress:w,value:a.address?"0":I,gasLimitOptions:{fetchOnce:L,disabled:P,onFetchSuccess:W,onFetchError:J},estimatedL1FeeOptions:{fetchOnce:L,disabled:P},onBack:N,onServerDataChange:O,onGasChange:Z,gasReturn:B})}),Kx=({children:o})=>{let t=yg(),e=(0,ye.useSelector)(Zr);return xt.default.createElement(ad,{gasReturn:t},o,!e&&xt.default.createElement(qx,null))},Fg=Kx;var Jx={match:o=>zc(o),Container:Fg,pages:{AddressPage:tg,AmountPage:ig,ConfirmPage:hg}},bg=Jx;s();i();Ao();s();i();s();i();var ci=u(x()),Eg=u(E()),Pg=u(G());var Yx=()=>{let o=(0,Eg.useDispatch)(),{coin:t}=T(),e=h(),n=(0,ci.useCallback)(async()=>{try{let{data:a={}}=await tn({coinId:t.coinId,address:e});a?.info?.normal?o(K(a.info.normal)):o(R(!0))}catch{o(R(!0))}finally{o(fo(!1))}},[o,e,t.coinId]),{run:r}=(0,Pg.useDebounceFn)(n,{wait:500});(0,ci.useEffect)(()=>{o(fo(!0)),r()},[e,t.coinId,r,o])},kg=Yx;var zx=({children:o})=>(kg(),o),wg=zx;s();i();var Bg=u(x());var Zx=()=>(oo(),Bg.default.createElement(X,null)),Ng=Zx;s();i();var Lg=u(x());s();i();Ne();ve();Oo();var $x=()=>{let{coin:o}=T(),t=h(),e=uo(),n=z(),r=so(),a=k(),c=Fo({fromAddr:t,localType:o.localType,walletId:r}),m=ot({coinAmount:e,coinId:o.coinId,fromAddr:t,toAddr:a,networkFee:n,localType:o.localType});return Co(async()=>{let S=await co().getRequestHeaders({walletId:r,needSign:!0,currency:"usd"}),C={coinId:o.coinId,address:t,amount:e,fee:n,accountId:r},{data:_}=await mt(Yo.getSpecialUtxoList,C,{headers:S});return _},S=>({inputs:S.map(F=>({txId:F.txId,vOut:F.index,address:F.address,amount:F.amount})),outputs:[{address:a,amount:e}],address:t,fee:n}),async S=>await c({params:S}),async S=>await m(S),S=>(ro({tx_id:S}),S))},vg=$x;var Xx=()=>{let o=vg();return to(),Lg.default.createElement(Q,{confirmButtonProps:{onSubmit:o}})},Dg=Xx;var jx={match:o=>o===Cc,Container:wg,pages:{AddressPage:j,AmountPage:Ng,ConfirmPage:Dg}},Mg=jx;s();i();Ao();s();i();var Og=u(x());var Qx=({children:o})=>{let e=Qo().get("from");return Og.default.createElement(bo,{fromAddress:e},o)},Rg=Qx;s();i();var Jg=u(x());s();i();var Ug=u(G());Ne();ve();var oh=()=>{let{baseCoin:o}=T();return(0,Ug.useMemoizedFn)(async t=>{let e={address:t,coinId:o.coinId};try{let{data:r}=await mt(Yo.postCheckAddress,e);if(r?.res)return null}catch(r){console.log(r)}return await fe(t,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})},Wg=()=>{let o=Ut(),t=oh();return[o,t]};s();i();var mi=u(x()),Gg=u(E()),Vg=u(G());po();var th=()=>{let o=(0,Gg.useDispatch)(),{coin:t}=T(),e=h(),n=k(),r=Tt(),a=(0,mi.useCallback)(async()=>{try{let m=await r({coinId:t.coinId,address:e,fromAddr:e,toAddr:n});o(Rm({name:"signInfo",value:m}));let d=[],{fee:l,depositMinAmount:g,minTransferTokenValue:f,depositGasFee:A,toAddressCheck:I}=m;t.baseCoinId===0?d.push(l):I===0?d.push(l,f,g,A):d.push(l,f);let S=d.reduce((C,_)=>lo(C,_),0);o(K(S))}catch{o(R(!0))}finally{o(fo(!1))}},[o,r,t.coinId,t.baseCoinId,e,n]),{run:c}=(0,Vg.useDebounceFn)(a,{wait:500});(0,mi.useEffect)(()=>{o(fo(!0)),o(R(!1)),c()},[o,a,c])},Hg=th;s();i();var qg=u(x()),ui=u(E());po();Ao();var eh=()=>{let o=(0,ui.useDispatch)(),{coin:t,baseCoin:e}=T(),{baseCoinId:n}=t,r=h(),a=so(),c=oe(r,a,uc),d=jo(e.coinId,a,{addressType:c})?.coinAmountInt,f=(0,ui.useSelector)(pn)?.signInfo?.storageUsedAmount;(0,qg.useEffect)(()=>{if(!d||!f)return;let A=nt(d,f);o(n===0?To(A):$o(A))},[o,n,f,d])},Kg=eh;var nh=()=>{Hg(),Kg();let o=Wg();return Jg.default.createElement(j,{addressProps:{errorFns:{override:!0,fns:o},extraProps:{disableRequestDomain:!0}}})},Yg=nh;s();i();var jg=u(x());s();i();var zg=u(E()),Pa=u(G());po();var Zg=()=>{let o=Uo(),t=Mu(),e=(0,zg.useSelector)(pn),{coin:n,baseCoin:r}=T(),a=z(),c=Tn();return(0,Pa.useMemoizedFn)(m=>{let d=lo(e?.signInfo?.storageUsedAmount,a),l=yo(d,10**r.decimals);return(n.baseCoinId===0?Ko(o,m):Ko(t,"0"))?{key:"wallet_extension_transfer_tip_continue_using_address",args:{num:c(l,r,{useApproximate:!1,isFee:!0})},type:eo.FEE_BALANCE_INSUFFICIENT}:null})},$g=()=>{let o=xs(),t=Zg();oo({fns:[o,t],override:!0})},rh=()=>{let o=Zg();return(0,Pa.useMemoizedFn)(t=>{let e=o(t);return e?{...e,highlight:Oe.AMOUNT}:null})},Xg=()=>{let o=Bu(),t=rh();to({fns:[o,t],override:!0})};var sh=()=>($g(),jg.default.createElement(X,{totalAmountProps:{type:"amount"}})),Qg=sh;s();i();var eA=u(x());s();i();var oA=u(E()),ka=u(dI());var ih=()=>{let{coin:o}=T(),t=h(),e=k(),n=uo(),r=z(),a=so(),c=(0,oA.useSelector)(pn),m=Tt(),d=si(),l=Fo({fromAddr:t,localType:o.localType,walletId:a}),g=ot({coinId:o.coinId,coinAmount:n,fromAddr:t,toAddr:e,localType:o.localType,networkFee:r,walletId:a}),f=async()=>await m({coinId:o.coinId,address:t,fromAddr:t,toAddr:e}),A=_=>{let{blockHash:y,nonce:F}=_;return{from:t,blockHash:y,type:ka.NearTypes.TransferNear,nonce:F,receiverId:e,amount:n}},I=_=>{let{blockHash:y,nonce:F}=_,{signInfo:P}=c,{toAddressCheck:L,minTransferTokenValue:B,depositGasFee:w,fee:D,depositMinAmount:O}=P;return{from:t,blockHash:y,type:ka.NearTypes.TransferToken,nonce:F,receiverId:e,amount:n,contract:o.address,depositGas:w,transferGas:D,depositValue:O,minTransferTokenValue:B,shouldDeposit:Boolean(L===0)}};return Co(f,_=>o.baseCoinId===0?{params:A(_)}:{params:I(_)},l,g,d)},tA=ih;var ah=()=>{let o=tA();return Xg(),eA.default.createElement(Q,{confirmButtonProps:{onSubmit:o}})},nA=ah;var ch={match:o=>o===Tc,Container:Rg,pages:{AddressPage:Yg,AmountPage:Qg,ConfirmPage:nA}},rA=ch;s();i();s();i();var aA=u(x());s();i();var sA=u(G());var mh=()=>{let[o,{setTrue:t,setFalse:e}]=(0,sA.useBoolean)(!1),{coin:n,baseCoin:r}=T(),a=h(),c=k(),m=tt(),d=Wt();return{onClick:async()=>{try{t(),await d({from:a,to:c,method:"wallet_inner_transfer",chainIndex:r?.chainId??n.chainId}),m()}catch{}finally{e()}},loading:o}},iA=mh;var uh=()=>{let{onClick:o,loading:t}=iA();return aA.default.createElement(j,{confirmButtonProps:{onClick:o,loading:t}})},cA=uh;s();i();var lA=u(x()),pA=u(E());H();s();i();var cr=u(x()),di=u(E());po();var mA=()=>{let{toRent:o}=(0,di.useSelector)(Yn),{coin:t,baseCoin:e}=T(),n=Uo();return(0,cr.useCallback)(r=>{if(t.baseCoinId!==0)return null;let a=yo(o,10**t.decimals);return Ko(r,a)?{key:"wallet_extension_toast_minimum_rent_fee",args:{num:a,token:e.symbol},type:eo.COMMON_ERROR}:null},[n,o,e.symbol])},uA=()=>{let{selfRent:o,toRent:t}=(0,di.useSelector)(Yn),{coin:e,baseCoin:n}=T(),r=(0,di.useSelector)(ft),a=hn();return(0,cr.useCallback)(()=>{if(e.baseCoinId===0)return null;let c=lo(r,o);return Ko(a,c)?{key:"wallet_extension_toast_insufficient_balance_initiate_txn",args:{token:n.symbol,num:yo(c,10**n.decimals)},type:eo.FEE_BALANCE_INSUFFICIENT}:Ko(a,lo(c,t))?{key:"wallet_extension_loading_text_minimum_reserve_rent",args:{num:yo(lo(c,t),10**n.decimals),token:n.symbol},type:eo.FEE_BALANCE_INSUFFICIENT}:null},[a,r,o])},dA=()=>{let o=mA(),t=uA();oo([o,t])},dh=()=>{let o=mA();return(0,cr.useCallback)(t=>{let e=o(t);return e?{...e,highlight:Oe.AMOUNT}:null},[o])},fh=()=>{let o=uA();return(0,cr.useCallback)(t=>{let e=o(t);return e?{...e,highlight:Oe.AMOUNT}:null},[o])},fA=()=>{let o=dh(),t=fh();to([o,t])};function lh(){let o=(0,pA.useSelector)($r);return dA(),lA.default.createElement(X,{totalAmountProps:{title:b("extension_wallet_send_text_transfer_available"),type:"amount"},confirmButtonProps:{loading:o}})}var gA=lh;s();i();var Fe=u(x()),Na=u(E()),_A=u(G());s();i();H();Le();var Vo={JITO:"jito",PRIORITY_FEE:"priorityFee"},wa="speedUpMode";function AA(o){let t=ze.get(wa);return t?typeof t=="string"&&(t={[hc]:t}):t={},t[o]||Vo.PRIORITY_FEE}function CA(o,t){let e=ze.get(wa);ze.set(wa,{...e||{},[o]:t})}var TA="jitoGuide";function IA(){return!!ze.get(TA)}function SA(){ze.set(TA,"1")}s();i();var _o=u(x()),wt=u(E());H();s();i();var mr={title:"_title_1eu6y_1",tip:"_tip_1eu6y_4",tipDetail:"_tipDetail_1eu6y_11"};var ph=_o.default.memo(({jitoGuide:o})=>{let t=(0,wt.useDispatch)(),e=(0,wt.useSelector)(me),n=r=>{t(zn(r))};return _o.default.createElement(rc,{mask:!0,show:!o,title:b("wallet_extension_transfer_tooltips_title_express_mode"),description:b("wallet_extension_transfer_tooltips_tips_express_mode"),autoEdgeSpacing:16},_o.default.createElement(je.Segmented,{className:mr.modeSwitch,color:je.COLOR.grey,size:je.SIZE.xs,average:!0,hideContent:!0,activeId:e,onChange:n},_o.default.createElement(je.TabPane,{tab:b("wallet_extension_transfer_tab_standard"),id:Vo.PRIORITY_FEE}),_o.default.createElement(je.TabPane,{tab:b("wallet_extension_transfer_tab_express"),id:Vo.JITO})))}),gh=()=>{let{baseCoin:o}=T(),t=(0,wt.useSelector)(Dt),e=(0,wt.useSelector)(Xr),{fee:n="0"}=t||{},{priorityFee:r}=e,a=Hn(n,{decimals:o.decimals,type:Y.CRYPTO}),c=Hn(r||"0",{decimals:o.decimals,type:Y.CRYPTO});return _o.default.createElement(_o.default.Fragment,null,b("wallet_extension_gas_base_priority_fee",{gas:a,gasfee:c}))},Ah=()=>{let{baseCoin:o}=T(),t=(0,wt.useSelector)(Dt),e=(0,wt.useSelector)(jr),{fee:n}=t||{},{totalJitoFee:r}=e||{},a=Hn(n||"0",{decimals:o.decimals,type:Y.CRYPTO}),c=Hn(r||"0",{decimals:o.decimals,type:Y.CRYPTO});return _o.default.createElement(_o.default.Fragment,null,b("wallet_extension_transfer_tooltips_desc_plus",{amount:a,num:c}),_o.default.createElement("div",{className:mr.tipDetail},b("wallet_extension_transfer_tooltips_desc_express_mode")))},Ch=_o.default.memo(()=>{let o=(0,wt.useSelector)(me);return _o.default.createElement("div",{className:mr.tip},o===Vo.JITO?_o.default.createElement(Ah,null):_o.default.createElement(gh,null))});function Th({jitoGuide:o,...t}){let e=(0,wt.useSelector)(me),n=(0,wt.useSelector)(Dt),r=e===Vo.JITO?b("wallet_extension_transfer_express_mode"):b("wallet_extension_transfer_standard_mode");return _o.default.createElement(bt,{bordered:!1,verticalPadding:!1},_o.default.createElement(Es,{...t,titleClassName:mr.title,titleAction:n?.supportJito&&_o.default.createElement(ph,{jitoGuide:o}),level:r},_o.default.createElement(Ch,null)))}var xA=Th;s();i();var He=u(E());Eo();Ao();var Ih=()=>{let o=Lo(),{coin:t}=T(),e=h(),n=(0,He.useSelector)(Nt),r=(0,He.useSelector)(mo),a=uo(),c=(0,He.useSelector)(ft),{computeUnitPrice:m,computeUnitLimit:d}=(0,He.useSelector)(Xr),l=(0,He.useSelector)(me),g=(0,He.useSelector)(jr),f=Fo({fromAddr:e,localType:Er,walletId:n}),{coinId:A}=t,I=async()=>await vc({coinId:A,address:e},{fromAddr:e,toAddr:r}),S=async()=>{if(t.baseCoinId===0||!r)return{haveTokenAccountAddress:!1,tokenAccountAddress:""};let w={coinId:A,address:r},{data:D={}}=await Lc(w),{legal:O,tokenAccountAddress:Z}=D;return{haveTokenAccountAddress:O,tokenAccountAddress:Z}},C=async()=>{let[w,{haveTokenAccountAddress:D,tokenAccountAddress:O}]=await Promise.all([I(),S()]);return{recentBlockHash:w,haveTokenAccountAddress:D,tokenAccountAddress:O}},_=async w=>{let{recentBlockHash:D,haveTokenAccountAddress:O}=w,Z={from:e,to:r,amount:a,blockHash:D,payer:e};l===Vo.PRIORITY_FEE&&(Z={...Z,computeUnitPrice:m,computeUnitLimit:d});let N;return t.baseCoinId===0?N={...Z,type:Dr.TRANSFER}:N={...Z,type:Dr.TOKEN_TRANSFER,createAssociatedAddress:!O,mint:t.address},t.protocolType===Vn.SPL_TOKEN_2022&&(N.token2022=!0,N.decimal=t.decimals),await f({params:N})},y=async w=>{if(l!==Vo.JITO||!g)return null;let{recentBlockHash:D}=w,{tipAccountAddress:O,clientGasPrice:Z}=g,N={from:e,to:O,amount:Z,blockHash:D,payer:e,type:Dr.TRANSFER};return await f({params:N})};return Co(C,async(w={})=>{let D=await _(w),O=await y(w);return{rawSignedTx:D,jitoSignedTx:O}},async({rawSignedTx:w,jitoSignedTx:D})=>{let O=await So(Er,w),Z=w,N;l===Vo.JITO&&D&&(Z=JSON.stringify([w,D]),N=JSON.stringify({mev:"Jito",jitoHash:await So(Er,D)}));let W={signedTx:Z,coinAmount:a,coinId:t.coinId,fromAdr:e,toAdr:r,serviceCharge:c,txHash:O,extJson:N},J=await o(W);return CA(t.localType,l),J},w=>(ro({tx_id:w}),w))},hA=Ih;s();i();var Ba={root:"_root_6mjwc_1",contentJitoGuide:"_contentJitoGuide_6mjwc_4"};function Sh(){let o=(0,Na.useSelector)($r),t=(0,_A.useDebounce)(o,{wait:200}),e=(0,Na.useSelector)(Dt),[n,r]=(0,Fe.useState)(!0),a=hA(),c=async()=>{o||await a()};return fA(),(0,Fe.useEffect)(()=>{if(e?.supportJito){let m=IA();r(m),m||SA()}},[e?.supportJito]),Fe.default.createElement("div",{className:Ba.root,onClick:()=>{r(!0)}},Fe.default.createElement(Q,{tipMessageProps:{hidden:o},containerProps:{contentClassName:n?"":Ba.contentJitoGuide},slot:{networkFee:m=>Fe.default.createElement(xA,{...m,jitoGuide:n})},confirmButtonProps:{disabled:t,onSubmit:c}}))}var yA=Sh;s();i();s();i();var FA=u(x()),fi=u(E());function xh(){let o=(0,fi.useDispatch)(),{coin:t}=T(),e=(0,fi.useSelector)(Dt);(0,FA.useEffect)(()=>{!e||(e.supportJito?o(zn(AA(t.localType))):o(zn(Vo.PRIORITY_FEE)))},[e,t.localType])}var bA=xh;s();i();var BA=u(x()),NA=u(E());po();s();i();var ur=u(x()),EA=u(E());function hh(){let o=(0,EA.useDispatch)(),[t,e]=(0,ur.useState)(null),[n,r]=(0,ur.useState)(!1),{coin:a}=T(),c=h(),m=k(),{coinId:d}=a;return(0,ur.useEffect)(()=>{d&&c&&m&&(async()=>{try{let{data:g}=await tn({coinId:d,address:c},{fromAddr:c,toAddr:m}),{info:f}=g||{},{fee:A}=f||{};o(R(!A)),o(oa(f)),e(f),r(!1)}catch{o(R(!0)),o(oa(null)),e(null),r(!0)}})()},[d,c,m]),{baseFee:t?.fee||"0",signInfoError:n}}var PA=hh;s();i();var se=u(x()),be=u(E()),kA=u(G());et();po();function _h(){let o=(0,be.useDispatch)(),t=h(),{baseCoin:e}=T(),n=(0,se.useRef)(null),r=(0,se.useRef)(!1),[a,c]=(0,se.useState)("0"),m=async g=>{if(!r.current){try{let f=await Dc({from:t,chainId:e.chainId}),{clientGasPrice:A}=f||{},I=lo(A||"0",g?.fee||"0");c(I),o(ss({...f,totalJitoFee:I})),o(R(!1))}catch{c("0"),o(ss(null)),o(R(!0))}finally{o(An(!1))}n.current=setTimeout(()=>{m(g)},7e3)}};return[a,g=>{r.current=!1,m(g)},()=>{clearTimeout(n.current),r.current=!0,n.current=null,c("0"),o(ss(null))}]}function yh(){let o=(0,be.useDispatch)(),t=nd(),e=h(),{coin:n,baseCoin:r}=T(),{coinId:a}=n,[c,m]=(0,se.useState)("0"),d=()=>{m("0"),o(rs({priorityFee:"",computeUnitPrice:"",computeUnitLimit:""})),o(R(!0))};return[c,async f=>{try{let{firstUnitLimit:A}=await t({coinId:a,from:e,chainId:r.chainId});if(xr(A)){d();return}let{computeUnitPrice:I,feelimit:S}=f,{priorityFee:C,priorityGasPrice:_,priorityGasLimit:y}=Hc(S,I,A);m(C),o(rs({priorityFee:C,computeUnitPrice:_||"",computeUnitLimit:y||""})),o(R(!1))}catch{d()}finally{o(An(!1))}},()=>{m("0"),o(rs({priorityFee:"",computeUnitPrice:"",computeUnitLimit:""}))}]}function Fh({signInfoError:o}){let t=(0,be.useDispatch)(),e=(0,be.useSelector)(me),n=(0,be.useSelector)(Dt),r=(0,be.useSelector)(sm),a=(0,kA.useLatest)(r),[c,m,d]=_h(),[l,g,f]=yh();return(0,se.useEffect)(()=>{a.current?t(An(!1)):t(An(!0))},[e]),(0,se.useEffect)(()=>((()=>{if(o){t(An(!1));return}!n||!e||(e===Vo.PRIORITY_FEE?g(n):m(n))})(),()=>{d(),f()}),[o,n,e]),{speedUpFee:e===Vo.PRIORITY_FEE?l:c}}var wA=Fh;function bh(){let o=(0,NA.useDispatch)(),{baseFee:t,signInfoError:e}=PA(),{speedUpFee:n}=wA({signInfoError:e});(0,BA.useEffect)(()=>{o(K(lo(t,n)))},[t,n])}var vA=bh;s();i();var li=u(E());var LA=u(x());po();function Eh(){let o=(0,li.useDispatch)(),{coin:t}=T(),{selfRent:e}=(0,li.useSelector)(Yn),n=xn();(0,LA.useEffect)(()=>{(()=>{if(!!t)if(t.baseCoinId===0){let r=nt(n||"0",e||"0");o(To(Jo(r,"0")?r:"0"))}else o(To(null))})()},[t,e,n])}var DA=Eh;function Ph({children:o}){return bA(),vA(),DA(),o}var MA=Ph;var kh={match:o=>om(o),SubContainer:MA,pages:{AddressPage:cA,AmountPage:gA,ConfirmPage:yA}},OA=kh;s();i();Ao();s();i();s();i();var va=u(x()),dr=u(E());et();var pi=u(G());s();i();mI();var wh=async({coin:o,fromAddress:t,toAddress:e,value:n,memo:r="",signInfo:a={}})=>{let{getRawTransaction:c}=await Kc(),m={};if(o.baseCoinId===0)m={data:{type:on.TRANSFER,data:{to:e,amount:n,memo:r}}};else{let{info:l={}}=a,{contractAddress:g,contractName:f,tokenName:A}=l;m={data:{type:on.TOKEN_TRANSFER,data:{from:t,to:e,memo:r,contract:g,contractName:f,functionName:Mr.TRANSFER,tokenName:A,amount:n}}}}return await c(5757,m)},RA=async({coin:o,fromAddress:t,toAddress:e,value:n,memo:r="",signInfo:a={}})=>{let c=await wh({coin:o,fromAddress:t,toAddress:e,value:n,memo:r,signInfo:a});return(await iu({coinId:o.coinId,fromAddress:t,value:n,inputData:c}))?.gasLimit||"0"};var Bh=()=>{let o=(0,dr.useDispatch)(),t=h(),e=k(),n=(0,dr.useSelector)(Lt),r=q(),a=(0,pi.usePrevious)(r),{coin:c,baseCoin:m}=T(),{signInfo:d,memo:l}=(0,dr.useSelector)(ln),g=async()=>{try{o(R(!1));let A;c.baseCoinId!==0&&Ye(d)?(A=await au({coinId:c.coinId,fromAddress:t,toAddress:e,value:r}),o(is({name:"signInfo",value:A}))):A=d;let I=await RA({coin:c,baseCoin:m,fromAddress:t,toAddress:e,value:r,signInfo:A,memo:l});o(K(I))}catch{o(R(!0))}finally{o(fo(!1))}},{run:f}=(0,pi.useDebounceFn)(g,{wait:500});(0,va.useEffect)(()=>{n&&(o(fo(!0)),f())},[n]),(0,va.useEffect)(()=>{n&&r!==a||(o(fo(!0)),f())},[r,e,n,l])},UA=Bh;var Nh=({children:o})=>(UA(),o),WA=Nh;s();i();var GA=u(x());var vh=()=>(oo(),GA.default.createElement(X,null)),VA=vh;s();i();var La=u(x()),Ai=u(E());H();s();i();var gi=u(E());var Lh=()=>{let{coin:o,baseCoin:t}=T(),e=h(),n=(0,gi.useSelector)(mo),r=q(),a=(0,gi.useSelector)(ft),{memo:c}=(0,gi.useSelector)(ln),m=Tt(),d=Fo({fromAddr:e,localType:t.localType}),l=ot({coinAmount:r,coinId:o.coinId,fromAddr:e,toAddr:n,networkFee:a}),g=async()=>await m({coinId:o.coinId,address:e,fromAddr:e,toAddr:n,value:r}),f=F=>{let{nonce:P}=F;return{type:on.TRANSFER,data:{to:n,amount:r,nonce:P,fee:a,memo:c}}},A=F=>{let{nonce:P,contractAddress:L,contractName:B,tokenName:w}=F;return{type:on.TOKEN_TRANSFER,data:{from:e,to:n,amount:r,nonce:P,fee:a,memo:c,contract:L,contractName:B,functionName:Mr.TRANSFER,tokenName:w}}};return Co(g,F=>o.baseCoinId===0?f(F):A(F),async F=>{let{data:P}=F,{nonce:L}=P,{txId:B,txSerializedHexString:w}=await d({params:F,needCapture:!0});return{txId:B,txSerializedHexString:w,nonce:L}},async({txId:F,txSerializedHexString:P,nonce:L})=>{let B={nonce:L},w=JSON.stringify(B);return await l(P,{txHash:F,memo:c,extJson:w})},F=>(ro({tx_id:F}),F))},HA=Lh;var qA=34,Dh=()=>{let o=(0,Ai.useDispatch)(),{memo:t}=(0,Ai.useSelector)(ln),e=HA(),n=r=>{let a=r.target.value;new TextEncoder().encode(a).length<=qA&&o(is({name:"memo",value:r.target.value}))};return to(),La.default.createElement(Q,{confirmButtonProps:{onSubmit:e},slot:{bottom:La.default.createElement(Jt,{value:t,placeholder:b("extension_wallet_transaction_input_entermemo_max",{num:qA}),onChange:n})}})},KA=Dh;var Mh={match:o=>o===lc,Container:WA,pages:{AddressPage:j,AmountPage:VA,ConfirmPage:KA}},JA=Mh;s();i();Ao();s();i();s();i();var Da=u(x()),Ci=u(E());et();Oo();var Ti=u(G());var Oh=({fromAddress:o,toAddress:t,amountInputValueInt:e,sendCoinBalanceInt:n,feeInt:r,coin:a,isMax:c})=>{let m=(0,Ci.useDispatch)(),{signInfo:d}=(0,Ci.useSelector)(os),l=(0,Ti.usePrevious)(e),g=async()=>{let C=await en({coinId:a.coinId,address:o},{fromAddr:o,toAddr:t});return m(Om({name:"signInfo",value:C})),C},f=async C=>{let _={type:"transfer",nonce:C?.info?.nonce,maxFee:r||"0",transferData:{contractAddress:C?.info?.contractAddress,from:o,to:t,amount:e}};return(await co().signTransaction(_,o,a.localType))?.signature},A=async C=>{let{data:_}=await Rr({coinId:a.coinId,address:o,inputData:C});if(_?.queryGasLimitErrorUseDefault)throw new Error("fetch maxFee error");return _?.gasLimit},I=async()=>{try{let C;Ye(d)?C=await g():C=d;let _=await f(C),y=await A(_);m(K(y)),m(R(!1))}catch{m(R(!0))}finally{m(fo(!1))}},{run:S}=(0,Ti.useDebounceFn)(I,{wait:500});(0,Da.useEffect)(()=>{c&&(m(fo(!0)),S())},[c,n]),(0,Da.useEffect)(()=>{c&&e!==l||(m(fo(!0)),S())},[t,e,c])},YA=Oh;var Rh=({children:o})=>{let t=h(),e=k(),n=q(),r=xn(),a=z(),{coin:c}=T(),m=Rt();return YA({fromAddress:t,toAddress:e,amountInputValueInt:n,sendCoinBalanceInt:r,feeInt:a,coin:c,isMax:m}),o},zA=Rh;s();i();var ZA=u(x());var Uh=()=>(oo(),ZA.default.createElement(X,null)),$A=Uh;s();i();var jA=u(x()),QA=u(E());s();i();Oo();var Wh=({coin:o,baseCoin:t,fromAddress:e,toAddress:n,amountInt:r,feeInt:a,nonce:c,contractAddress:m})=>{let d=Lo();return Co(async()=>{let I={type:"transfer",nonce:c,maxFee:a,transferData:{contractAddress:m,from:e,to:n,amount:r}},{txId:S,signature:C}=await co().signTransaction(I,e,t.localType);return{txId:S,signature:C}},async({txId:I,signature:S})=>{let C={serviceChargeCoinId:t.coinId,nonce:c},_=JSON.stringify(C),y={signedTx:S,coinAmount:r,coinId:o.coinId,fromAdr:e,toAdr:n,serviceCharge:a,txType:Po.TRANS_OUT,txHash:I,extJson:_};return await d(y)},I=>(ro({tx_id:I}),I))},XA=Wh;var Gh=()=>{let o=h(),t=k(),e=uo(),n=z(),{coin:r,baseCoin:a}=T(),{signInfo:c}=(0,QA.useSelector)(os),m=XA({coin:r,baseCoin:a,fromAddress:o,toAddress:t,amountInt:e,feeInt:n,nonce:c?.info?.nonce,contractAddress:c?.info?.contractAddress});return to(),jA.default.createElement(Q,{confirmButtonProps:{onSubmit:m}})},oC=Gh;var Vh={match:o=>o===gc,Container:zA,pages:{AddressPage:j,AmountPage:$A,ConfirmPage:oC}},tC=Vh;s();i();Ao();s();i();var sC=u(x());s();i();var eC=u(E()),nC=u(G());s();i();Ao();var Hh=()=>{let o=fu(),t=pu(),e=lu(),n=gu();return async({coinId:a,from:c,to:m,amount:d,inputData:l,localType:g,chainId:f})=>{let A=[$t.SAFE_ADDRESS,$t.CONTRACT_ADDRESS];g===ac&&(A.push($t.TRON_PERMISSTION),A.push($t.KYS));let I=await o({checkTypes:A,coinId:a,from:c,to:m,amount:d,txType:wc.TRANSFER,inputData:l||"0x",chainId:f}),{result:S,msg:C}=I[$t.TRON_PERMISSTION]||{},_=I[$t.SAFE_ADDRESS],y=I[$t.KYS]?.causeRiskItem||[],F={..._,...I[$t.CONTRACT_ADDRESS],causeRiskItem:y,tronPermission:{msg:C,wrongPermission:!S},address:m};return await n(F),await e({..._,..._?.blackAddressWarning}),await t(F),F}},Mn=Hh;var qh=()=>{let o=(0,eC.useDispatch)(),[t,{setTrue:e,setFalse:n}]=(0,nC.useBoolean)(!1),{coin:r}=T(),a=h(),c=k(),m=q(),{coinId:d,localType:l,chainId:g}=r,f=tt(),A=Mn();return{onClick:async()=>{try{e();let S=await A({coinId:d,from:a,to:c,amount:m,inputData:"",localType:l,chainId:g}),{isDefraud:C,isSimilar:_,blackAddressWarning:y}=S;C?(o(At(Xt.DEFRAUD)),o(jt(y))):_?(o(At(Xt.SIMILAR)),o(jt(y))):o(At("")),f()}catch(S){console.log(S)}finally{n()}},loading:t}},rC=qh;var Kh=()=>{let{onClick:o,loading:t}=rC();return sC.default.createElement(j,{confirmButtonProps:{onClick:o,loading:t}})},iC=Kh;s();i();var mC=u(x());s();i();var qe=u(x()),Si=u(E()),xi=u(G());s();i();aI();function Jh({from:o,to:t,coin:e,error:n}){qa.captureEvent({tags:{address:o},message:"API_ERROR_build_sui_tx",contexts:{report:{info:JSON.stringify({from:o,coinId:e?.coinId,to:t})}},exception:{values:[{type:"API_ERROR_build_sui_tx",value:n?.message}]},level:"info"})}function Yh(){let{coin:o}=T(),t=h();return async({value:e,to:n,signInfo:r})=>{try{let{gasPrice:a,inputCoins:c=[],tokenInputCoins:m=[],budget:d}=r||{},l=c.map((A={})=>{let{digest:I,version:S,objectId:C}=A;return{digest:I,version:S,objectId:C}}),g=new ru;if(g.setGasPrice(a),g.setGasPayment(l||[]),g.setSender(t),d&&g.setGasBudget(d),o.baseCoinId===0){let A=g.splitCoins(g.gas,[e]);g.transferObjects([A],g.pure.address(n))}else if(m.length>1){let A=m.slice(1).map(C=>g.object(C.objectId)),I=g.object(m[0].objectId);g.mergeCoins(I,A);let S=g.splitCoins(I,[e]);g.transferObjects([S],g.pure.address(n))}else{let A=g.splitCoins(g.object(m[0].objectId),[e]);g.transferObjects([A],g.pure.address(n))}let f=nu(await g.build({client:Sd}));return{tx:g,txBytes:f}}catch(a){throw Jh({from:t,to:n,coin:o,error:a}),a}}}var Ii=Yh;s();i();function zh(){let{coin:o}=T(),t=h(),e=o.coinId;return async({to:n,value:r})=>(await en({address:t,coinId:e},{fromAddr:t,toAddr:n,value:r})).info||{}}var aC=zh;function cC(){let o=(0,Si.useDispatch)(),t=(0,Si.useSelector)(Lt),{coin:e}=T(),n=h(),r=q(),a=k(),{coinId:c}=e,[m,d]=(0,qe.useState)(!1),l=(0,qe.useRef)(0),g=aC(),f=Ii(),A=(0,xi.usePrevious)(r),{run:I}=(0,xi.useDebounceFn)(async()=>{l.current++;try{o(R(!1));let S={value:r,to:a},C=await g(S),y=(await f({...S,signInfo:C}))?.tx?.blockData?.gasConfig?.budget||"0";o(Mm(C)),o(K(y))}catch{o(R(!0))}finally{l.current--,l.current===0&&d(!1)}},{wait:300});return(0,qe.useEffect)(()=>{t&&(d(!0),I())},[t]),(0,qe.useEffect)(()=>{t&&r!==A||(d(!0),I())},[c,n,a,r,t]),m}function Zh(){let o=cC();return oo(),mC.default.createElement(X,{confirmButtonProps:{loading:o}})}var uC=Zh;s();i();var fC=u(x()),Oa=u(E());s();i();var Ma=u(E());Ao();var dC=()=>{let{coin:o}=T(),t=h(),e=uo(),n=(0,Ma.useSelector)(mo),r=(0,Ma.useSelector)(xm),a=z(),c=Fo({fromAddr:t,localType:Yi}),m=ot({coinAmount:e,coinId:o.coinId,fromAddr:t,toAddr:n,localType:Yi}),d=Ii();return Co(async()=>await d({value:e,to:n,signInfo:{...r||{},budget:a}}),async({tx:S,txBytes:C})=>{let y=await c({params:{type:"raw",data:C}});return{tx:S,txBytes:C,signedTx:y}},async({tx:S,txBytes:C,signedTx:_}={})=>{let{signature:y,hash:F}=_||{};return await m({request_type:"WaitForEffectsCert",tx_bytes:C,signatures:[y]},{txHash:F,serviceCharge:S?.blockData?.gasConfig?.budget||"0"})},S=>(ro({tx_id:S}),S))};function $h(){let o=dC(),t=async()=>{await o()};to();let e=(0,Oa.useSelector)(ue),n=(0,Oa.useSelector)(Kr);return fC.default.createElement(Q,{tipMessageProps:{hidden:n,blockAddressInfo:e},confirmButtonProps:{onSubmit:t}})}var lC=$h;var Xh={match:o=>o===fc,pages:{AddressPage:iC,AmountPage:uC,ConfirmPage:lC}},pC=Xh;s();i();Ao();s();i();var TC=u(x());s();i();var gC=u(E()),AC=u(G());s();i();var Fi=u(x()),bi=u(E());s();i();var _i=u(x()),hi=u(E());Ao();function jh({messageAttachedTons:o,invokeNotificationFee:t}){let{coin:e}=T(),n=k(),r=xn(),a=q(),c=(0,hi.useSelector)(gt),m=h(),d=(0,hi.useSelector)(gn),l=(0,hi.useSelector)(Lt),A=(Cn()?.addressType?.[Pr]||[]).find(y=>y.address===m),I=!!c,{fromJettonAccount:S,nonce:C}=c||{},_=(0,_i.useCallback)((y,F)=>{if(!I)return null;let P={to:n,seqno:C,decimal:e.decimals,amount:y,memo:d,walletVersion:A?.addressType};return e.baseCoinId===0?P={...P,type:ia.TRANSFER,sendMode:F}:(P={...P,type:ia.JETTON_TRANSFER,fromJettonAccount:S,messageAttachedTons:o,invokeNotificationFee:t,sendMode:nn.PAY_GAS_SEPARATELY+nn.IGNORE_ERRORS},c.customPayload&&(P={...P,customPayload:c.customPayload,stateInit:c.stateInit})),P},[n,I,S,d,o,t]);return(0,_i.useMemo)(()=>l?_(r,nn.CARRY_ALL_REMAINING_BALANCE):_(a,nn.PAY_GAS_SEPARATELY+nn.IGNORE_ERRORS),[l,r,a,_])}var yi=jh;function Qh({messageAttachedTons:o,invokeNotificationFee:t}={}){let e=(0,bi.useDispatch)(),n=Ct(),r=h(),a=(0,bi.useSelector)(gt),{ttl:c}=a||{},m=yi({messageAttachedTons:o,invokeNotificationFee:t}),[d,l]=(0,Fi.useState)(null);return(0,Fi.useEffect)(()=>{(async()=>{if(!!m)try{m.expireAt=Ls(c);let g=await xd({fromAddress:r,body:m,walletId:n});l(JSON.stringify(g))}catch{l(null),e(R(!0)),e(fo(!1))}})()},[m,c]),d}var Ei=Qh;var o_=()=>{let o=(0,gC.useDispatch)(),[t,{setTrue:e,setFalse:n}]=(0,AC.useBoolean)(!1),{coin:r}=T(),a=h(),c=k(),m=q(),d=Ei(),{coinId:l,localType:g,chainId:f}=r,A=tt(),I=Mn();return{onClick:async()=>{try{e();let C=await I({coinId:l,from:a,to:c,amount:m,inputData:d,localType:g,chainId:f}),{isDefraud:_,isSimilar:y,blackAddressWarning:F}=C;_?(o(At(Xt.DEFRAUD)),o(jt(F))):y?(o(At(Xt.SIMILAR)),o(jt(F))):o(At("")),A()}catch(C){console.log(C)}finally{n()}},loading:t}},CC=o_;var t_=()=>{let{onClick:o,loading:t}=CC();return TC.default.createElement(j,{confirmButtonProps:{onClick:o,loading:t}})},IC=t_;s();i();var _C=u(x());s();i();var SC=u(x()),xC=u(E());po();function Ra(){let{coin:o,baseCoin:t}=T(),e=(0,xC.useSelector)(gt),n=z(),r=e?.minTonLimit,a=lo(r||"0",n||"0"),c=hn();return(0,SC.useCallback)(()=>o.baseCoinId!==0&&Jo(a,c)?{key:"wallet_extension_ton_errormessage_insufficient_balance_gas2",args:{amount:yo(a,10**t.decimals)}}:null,[a,c,o.baseCoinId,t.decimals])}function e_(){let o=Ra();oo([o])}var hC=e_;function n_(){return hC(),_C.default.createElement(X,{totalAmountProps:{type:"amount"}})}var yC=n_;s();i();var pr=u(x()),lr=u(E());s();i();var bC=u(x());var fr=u(E());H();var FC=250;function r_({error:o,onChange:t}){let e=(0,fr.useDispatch)(),n=(0,fr.useSelector)(gt),r=(0,fr.useSelector)(gn),c=n?.checkMemo?b("wallet_extension_import_desc_comment_required"):b("wallet_extension_import_desc_comment_optional");return bC.default.createElement(Jt,{value:r,placeholder:b("wallet_extension_ton_placeholder_comment_max_character2",{amount:FC}),dashed:!1,title:c,error:o,errorType:Zt.TIP_TYPE.always,maxLength:FC,onChange:m=>{let d=m.target.value;e(Um(d)),t()}})}var EC=r_;s();i();var Pi=u(E());Oo();Eo();function s_(){let o=so(),t=Cn(o),e=Tt(),{coin:n,baseCoin:r}=T(),a=h(),c=k(),m=(0,Pi.useSelector)(ft),d=(0,Pi.useSelector)(gt),l=(0,Pi.useSelector)(ym),g=q(),f=yi({messageAttachedTons:d?.minTonLimit,invokeNotificationFee:l?.invokeNotificationFee}),A=Lo();return Co(async()=>(await e({coinId:n.coinId,address:a,fromAddr:a,toAddr:c,value:"0"}))?.nonce,async F=>(f.seqno=F,f.expireAt=Ls(d?.ttl),(await co().signTransaction(f,a,r.localType))?.boc),async F=>{let P=await So(r.localType,F),L={signedTx:F,coinId:n.coinId,coinAmount:g,fromAdr:a,toAdr:f.to,serviceCharge:m,txHash:P,extJson:JSON.stringify({nonce:f.seqno,isClaim:!!f.customPayload}),txSource:ut.NORMAL,accountId:o,walletType:t?.serverWalletType,memo:f.memo};return await A(L)},F=>(ro({tx_id:F}),F))}var PC=s_;s();i();var ki=u(x());function i_(o){return(0,ki.useCallback)(()=>o?{key:"wallet_extension_import_alert_fillin_comment",type:eo.COMMON_ERROR}:null,[o])}function a_(o){return(0,ki.useCallback)(()=>o?{key:"wallet_extension_multisender_notice_failed_try_again",type:eo.COMMON_ERROR}:null,[o])}function c_(){let o=Ra();return(0,ki.useCallback)(()=>{let t=o();return t?{...t,highlight:eo.FEE_BALANCE_INSUFFICIENT}:null},[o])}function m_(o,t){let e=i_(o),n=a_(t),r=c_();to([n,e,r])}var kC=m_;function u_(){let o=(0,lr.useSelector)(gt),t=o?.checkMemo,e=o?.getCustomPayloadInfoRpcError,n=(0,lr.useSelector)(gn),r=(0,lr.useSelector)(Kr),[a,c]=(0,pr.useState)(!1),m=PC(),d=async()=>t&&(!n||n.trim()==="")?(c(!0),{pause:!0}):(await m(),null);kC(a,e);let l=(0,lr.useSelector)(ue);return pr.default.createElement(Q,{tipMessageProps:{hidden:r,blockAddressInfo:l},slot:{bottom:pr.default.createElement(EC,{error:a,onChange:()=>{c(!1)}})},confirmButtonProps:{onSubmit:d}})}var wC=u_;s();i();var Ua=u(x());s();i();var BC=u(x()),NC=u(E());Ao();po();var d_=()=>{let o=(0,NC.useDispatch)(),{coin:t,baseCoin:e}=T(),{baseCoinId:n}=t,r=h(),a=z(),c=so(),m=oe(r,c,Pr),d=jo(e.coinId,c,{addressType:m}),l=jo(t.coinId,c,{addressType:m}),g=d?.coinAmountInt,f=l?.coinAmountInt;(0,BC.useEffect)(()=>{if(!!g){if(n===0){let A=hr([0,nt(g,a)]);o(To(A))}else o(To(f));o($o(g))}},[o,n,g,f,a])},vC=d_;s();i();var wi=u(x());var LC=u(E());var Bi=u(G());po();function f_(){let o=(0,LC.useDispatch)(),t=h(),{coin:e,baseCoin:n}=T(),r=(0,wi.useRef)(null),a=(0,Bi.useDebounce)(Ei(),{wait:500});(0,Bi.useMount)(()=>{o(fo(!0))}),(0,wi.useEffect)(()=>{let c=()=>{o(R(!0)),o(ea(null)),o(K("0"))},m=async()=>{try{let{code:l,data:g}=await Rr({address:t,tokenAddress:e.address,chainId:n.chainId,coinId:n.coinId,value:"0",inputData:a});if(l!==0||!g||g?.queryGasLimitErrorUseDefault)c();else{o(R(!1)),o(ea(g));let{invokeNotificationFee:f="0",gasLimit:A="0"}=g;o(K(e.baseCoinId===0?A:lo(A,f)))}}catch{c()}finally{o(fo(!1))}};return(()=>{!a||(r.current=setInterval(m,7e3),m())})(),()=>{clearInterval(r.current)}},[a])}var DC=f_;s();i();var MC=u(x()),OC=u(E()),RC=u(G());function l_(){let o=(0,OC.useDispatch)(),t=Tt(),e=hd(),{coin:n}=T(),r=h(),a=(0,RC.useDebounce)(k(),{wait:500}),{coinId:c,baseCoinId:m}=n;(0,MC.useEffect)(()=>{c&&r&&a&&(async()=>{try{let l=await t({coinId:c,address:r,fromAddr:r,toAddr:a,value:"0"}),g=await e(l,m);o(R(!g)),o(ta(g))}catch{o(R(!0)),o(ta(null)),o(fo(!1))}})()},[a])}var UC=l_;var p_=({children:o})=>(UC(),DC(),vC(),o);function g_({children:o}){let e=Qo().get("from");return Ua.default.createElement(bo,{fromAddress:e},Ua.default.createElement(p_,null,o))}var WC=g_;var A_={match:o=>o===Ic,Container:WC,pages:{AddressPage:IC,AmountPage:yC,ConfirmPage:wC}},GC=A_;s();i();Le();s();i();var XC=u(x());s();i();var VC=u(E()),HC=u(G());s();i();var vi=u(x()),Ni=u(E());var C_=()=>{let o=(0,Ni.useSelector)(mn),t=(0,Ni.useSelector)(mo),e=q(),n=(0,Ni.useSelector)(Hr),r=!t||!!n.key,[a,c]=(0,vi.useState)("");return(0,vi.useEffect)(()=>{(async()=>{if(!r)try{let d=await Kn(t);c(o?Me(d,e):"")}catch(d){console.log(d)}})()},[o,r,t,e]),a},Li=C_;var T_=()=>{let o=(0,VC.useDispatch)(),[t,{setTrue:e,setFalse:n}]=(0,HC.useBoolean)(!1),{coin:r}=T(),a=h(),c=k(),m=q(),d=Li(),{coinId:l,localType:g,chainId:f}=r,A=tt(),I=Mn();return{onClick:async()=>{try{e();let C=await I({coinId:l,from:a,to:c,amount:m,inputData:d,localType:g,chainId:f}),{isDefraud:_,isSimilar:y,tronPermission:F,blackAddressWarning:P}=C;F&&F.wrongPermission?o(Pm({wrongPermission:F.wrongPermission,msg:F.msg})):_?(o(At(Xt.DEFRAUD)),o(jt(P))):y?(o(At(Xt.SIMILAR)),o(jt(P))):o(At("")),A()}catch(C){console.log(C)}finally{n()}},loading:t}},qC=T_;s();i();var KC=u(x()),JC=u(E());var YC=u(G());Le();var I_=()=>{let[o,{setFalse:t}]=(0,YC.useBoolean)(!0),{coin:e}=T(),n=h(),r=(0,JC.useDispatch)(),{coinId:a}=e;return(0,KC.useEffect)(()=>{(async()=>{if(Number(a)!==Br){let d=await Mc({coinId:a,address:n});r(bm(d))}t()})()},[a,n]),o},zC=I_;s();i();var ZC=u(x());function S_(){let o=h();return(0,ZC.useCallback)(t=>t===o?{key:"wallet_extension_send_error_receive_equal_send_address",args:{}}:null,[o])}function x_(){return[S_()]}var $C=x_;var h_=()=>{let o=zC(),{onClick:t,loading:e}=qC(),n=$C();return XC.default.createElement(j,{addressProps:{errorFns:n},confirmButtonProps:{onClick:t,loading:e||o}})},jC=h_;s();i();var oT=u(x());s();i();var Wa=u(x()),gr=u(E());var On=u(G());var __=()=>{let[o,{setTrue:t,setFalse:e}]=(0,On.useBoolean)(!1),n=(0,gr.useDispatch)(),r=k(),a=(0,gr.useSelector)(mn),c=(0,gr.useSelector)(Lt),m=q(),d=(0,On.usePrevious)(m),l=zm(),{coin:g}=T(),f=Li(),{coinId:A}=g,I=async()=>{let C=a?"0":m,_={coinId:A,address:l},y={fromAddr:l,value:C,toAddr:r,inputData:f};try{let F=await Rc(_,y);n(K(F)),n(R(!1))}catch{n(R(!0))}finally{e()}},{run:S}=(0,On.useDebounceFn)(I,{wait:500});return(0,Wa.useEffect)(()=>{c&&(t(),S())},[c]),(0,Wa.useEffect)(()=>{c&&m!==d||(t(),S())},[m,f,c]),o},QC=__;var y_=()=>{let o=QC();return oo(),oT.default.createElement(X,{confirmButtonProps:{loading:o}})},tT=y_;s();i();var iT=u(x()),aT=u(E());s();i();var Ar=u(E()),eT=u(uI());Le();var F_=()=>{let o=Lo(),{coin:t}=T(),e=h(),n=(0,Ar.useSelector)(mo),r=(0,Ar.useSelector)(ft),a=(0,Ar.useSelector)(mn),c=q(),m=(0,Ar.useSelector)(Nt),d=Fo({fromAddr:e,localType:zi,walletId:m});return Co(async()=>{if(!await _n())throw new Error("mpc error")},async()=>{let S=a?"0":c,C=await Kn(n),_=a?Me(C,c):"",y={coinId:t.coinId,address:e};return await Oc(y,{fromAddr:e,toAddr:n,value:S,inputData:_})},async(S={})=>{let{info:C={}}=S,{timestamp:_,expiration:y,ref_block_bytes:F,ref_block_hash:P,feelimit:L,contractAddress:B,asset:w}=C,D={fromAddress:e,toAddress:n,amount:c,timestamp:_,expiration:y,refBlockBytes:F,refBlockHash:P},O={};return t.baseCoinId===0?O={type:ie.TRANSFER,data:D}:a?O={type:ie.TOKEN_TRANSFER,data:{...D,feeLimit:L,contractAddress:B}}:O={type:ie.ASSET_TRANSFER,data:{...D,assetName:(0,eT.bufferToHex)(p.Buffer.from(w))}},await d({params:O})},async S=>{let C=await So(zi,S),_=await Kn(n),y=a?Me(_,c):"",F={signedTx:S,coinAmount:c,coinId:t.coinId,fromAdr:e,toAdr:n,serviceCharge:r,txHash:C,inputData:y};return await o(F)},S=>(ro({tx_id:S}),S))},nT=F_;s();i();var rT=u(x()),sT=u(E());function b_(o,t){return(0,rT.useCallback)(()=>o?{text:t,type:eo.COMMON_ERROR}:null,[o,t])}function Ga(){let o=Nu(),t=(0,sT.useSelector)(Am),e=b_(t.wrongPermission,t.msg);to({fns:[e,...o],override:!0})}function E_(){let o=nT(),t=async()=>{await o()},e=(0,aT.useSelector)(ue);return Ga(),iT.default.createElement(Q,{confirmButtonProps:{onSubmit:t},tipMessageProps:{blockAddressInfo:e}})}var cT=E_;var P_={match:o=>o===Br,pages:{AddressPage:jC,AmountPage:tT,ConfirmPage:cT}},mT=P_;s();i();Ao();s();i();var fT=u(x());s();i();var uT=u(G());ve();Ne();var k_=()=>{let{baseCoin:o}=T();return(0,uT.useMemoizedFn)(async t=>{let e={account:t,coinId:o.coinId},n;try{n=await ic(Yo.queryAccountExist,e)}catch(r){console.log(r)}return n?.data?.account?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})};function w_(){let o=Ut(),t=k_();return[o,t]}var dT=w_;var B_=()=>{let o=dT();return fT.default.createElement(j,{addressProps:{errorFns:{override:!0,fns:o},extraProps:{disableRequestDomain:!0}}})},lT=B_;s();i();var pT=u(x());function N_(){return oo(),pT.default.createElement(X,null)}var gT=N_;s();i();var Cr=u(x());H();s();i();var AT=u(E());Oo();var v_=o=>{let{coin:t,baseCoin:e}=T(),n=h(),r=(0,AT.useSelector)(mo),a=uo(),c=Lo();return Co(async()=>await en({coinId:t.coinId,address:n},{fromAddr:n,toAddr:r}),async A=>{let{info:I}=A,{chainid:S,compression:C,refBlockNumber:_,refBlockId:y,refBlockTimestamp:F,expireSeconds:P,precision:L,symbol:B,contract:w}=I,D={type:0,from:n,to:r,amount:a,memo:o,precision:L,symbol:B,contract:w,common:{chainId:S,compression:C,refBlockNumber:_,refBlockId:y,refBlockTimestamp:F,expireSeconds:P}};return await co().signTransaction(D,n,e.localType)},async A=>{let I={memo:o},S=await So(t.localType,A),C={signedTx:A,coinAmount:a,coinId:t.coinId,fromAdr:n,toAdr:r,serviceCharge:"0",extJson:JSON.stringify(I),txHash:S};return await c(C)},A=>(ro({tx_id:A}),A))},CT=v_;var TT=256;function L_(){let[o,t]=(0,Cr.useState)(""),e=CT(o),n=async()=>{await e()},r=a=>{let c=a.target.value;new TextEncoder().encode(c).length<=TT&&t(a.target.value)};return to(),Cr.default.createElement(Q,{slot:{bottom:Cr.default.createElement(Jt,{value:o,placeholder:b("extension_wallet_transaction_input_entermemo_max",{num:TT}),onChange:r})},confirmButtonProps:{onSubmit:n}})}var IT=L_;var D_={match:o=>o===pc,pages:{AddressPage:lT,AmountPage:gT,ConfirmPage:IT}},ST=D_;s();i();s();i();var Ri=u(x());s();i();var yT=u(x()),FT=u(G());var Oi=u(E());et();s();i();var xT=u(No());var hT=u(E());var _T=u(G());function M_(){let{coinId:o}=(0,xT.useParams)(),t=h(),e=(0,hT.useSelector)(mo);return(0,_T.useMemoizedFn)(async()=>(await tn({coinId:o,address:t},{fromAddr:t,toAddr:e,value:"0"}))?.data)}var Di=M_;s();i();po();function O_(){let o=jm();return(t,e,n)=>{let r=e||0,a=Jo(n,0)?yo(r,n):"0",c=o[t];return Qa(Mo(a,10**(c.decimals||0)),0)}}var Mi=O_;function R_(){let o=(0,Oi.useDispatch)(),[t,e]=(0,yT.useState)(!1),n=(0,Oi.useSelector)(rm),r=Di(),a=Lu(),c=Mi();return(0,FT.useMount)(()=>{e(!0),(async()=>{try{let l=(await r())?.info||{},g={};if(n!==-1)g=(l?.coinFeeList||[]).find(({coinId:A})=>A===n);else{let A=Xa(l?.coinFeeList||[],I=>a(I.coinId).currencyAmount||0);A&&(g=A.pop())}let f=c(g?.coinId,l?.methodFeeList?.transfer,g?.rate);o(ce(g?.coinId)),o(K(f)),o(Em(l))}finally{e(!1)}})()}),t}var bT=R_;function U_(){let o=bT();return oo(),Ri.default.createElement(X,{confirmButtonProps:{loading:o}})}function W_(){let{coin:o}=T();return Ri.default.createElement(bo,{fixed:!!o.vdecimalNum},Ri.default.createElement(U_,null))}var ET=W_;s();i();var Ke=u(x());var NT=u(G());s();i();var PT=u(E());Oo();Eo();Ao();function G_(){let o=Lo(),{coin:t}=T(),e=h(),n=(0,PT.useSelector)(mo),r=z(),a=de(),c=uo(),m=Di(),{coin:d}=ds(a,!1);return Co(m,async(f={})=>{let{info:A={}}=f,{chainId:I,accountId:S,nonce:C,tokenId:_,coinFeeList:y=[]}=A,F=y.find(({coinId:B})=>B===a)||{},P={type:ie.TRANSFER,accountId:parseInt(S,10),nonce:C,from:e,chainId:I,to:n,tokenId:parseInt(_,10),tokenSymbol:t.symbol,decimals:t.decimals,feeTokenId:parseInt(F.tokenId,10),feeTokenSymbol:d.symbol,feeDecimals:d.decimals,fee:r,amounts:c};return await co().signTransaction(P,e,cc)},async f=>{let{signature:A,tx:I}=f||{},{txHash:S,...C}=I||{},_={txSource:ut.NORMAL,signedTx:JSON.stringify({fastProcessing:null,signature:A,tx:C}),fromAdr:e,coinAmount:c,coinId:t.coinId,toAdr:n,serviceCharge:f?.tx?.fee,txHash:S,extJson:JSON.stringify({serviceChargeCoinId:a})};return await o(_)})}var kT=G_;s();i();var Ho=u(x()),wT=u(Bt());H();var Ui=u(G()),Wi=u(E());s();i();var Rn={"select-networkFee":"_select-networkFee_ct2da_1",selectNetworkFee:"_select-networkFee_ct2da_1","select-networkFee-content":"_select-networkFee-content_ct2da_4",selectNetworkFeeContent:"_select-networkFee-content_ct2da_4","select-networkFee-title":"_select-networkFee-title_ct2da_7",selectNetworkFeeTitle:"_select-networkFee-title_ct2da_7","select-networkFee-card-content":"_select-networkFee-card-content_ct2da_13",selectNetworkFeeCardContent:"_select-networkFee-card-content_ct2da_13","select-networkFee-card-content-disable":"_select-networkFee-card-content-disable_ct2da_16",selectNetworkFeeCardContentDisable:"_select-networkFee-card-content-disable_ct2da_16"};var V_=({coinId:o,feeCoinAmountInt:t,selectedCoinId:e,onSelect:n,setSupplyGas:r,...a})=>{let c=jo(o),m=c?.coinAmountInt,d=v.gte(m,t);return Ho.default.createElement(na.Card,{hovered:d,onClick:()=>{d&&n?.({coinId:o,feeCoinAmountInt:t})},selected:o===e},Ho.default.createElement(V.Space,{space:12,className:(0,wT.default)(Rn["select-networkFee-card-content"],{[Rn["select-networkFee-card-content-disable"]]:!d})},Ho.default.createElement(Qt,{size:Qt.SIZE.lg,src:c?.image,text:c?.text}),Ho.default.createElement(V.Space,{space:2,direction:V.DIRECTION.vertical,...a},Ho.default.createElement(Y.Text,{strong:!0},c?.symbol),Ho.default.createElement(Y.Text,{size:Y.SIZE.xs,type:Y.TYPE.secondary},d?b("developer_mode_send_text_balanceprice",{balance:De(m,{decimals:c?.decimals,useApproximate:!1})}):b("wallet_extension_placeorder_tooltips_insufficient",{token:c?.symbol})))),!d&&Ho.default.createElement(go,{category:go.CATEGORY.fill,type:go.TYPE.gray,size:go.SIZE.xxs,onClick:l=>{l?.stopPropagation(),r({supplyGasVisible:!0,supplyGasCoinId:o})}},b("extension_send_btn_fill_up_token",{token:c?.symbol})))},H_=({visible:o,onToggle:t})=>{let e=de(),n=(0,Wi.useDispatch)(),r=h(),a=Ct(),c=Mi(),[{supplyGasVisible:m,supplyGasCoinId:d},l]=(0,Ui.useSetState)({supplyGasVisible:!1,supplyGasCoinId:null}),g=(0,Wi.useSelector)(Cm),f=g?.coinFeeList||[],A=g?.methodFeeList?.transfer,I=(0,Ui.useCreation)(()=>f.map(({rate:_,coinId:y})=>{let F=c(y,A,_);return{coinId:y,feeCoinAmountInt:F}}),[f,A]),S=({coinId:_,feeCoinAmountInt:y})=>{t?.(),n(ce(_)),n(K(y))},C=({coinId:_,feeCoinAmountInt:y})=>Ho.default.createElement(V_,{coinId:_,selectedCoinId:e,feeCoinAmountInt:y,onSelect:S,setSupplyGas:l});return o?Ho.default.createElement(V.Portal,{component:V.Container,className:Rn["select-networkFee"]},Ho.default.createElement(Xm,{onBack:t,onClose:t,title:b("wallet_transfer_subtitle_network_fee")}),Ho.default.createElement(V.Box,{className:Rn["select-networkFee-content"]},Ho.default.createElement(Y.Text,{className:Rn["select-networkFee-title"]},b("wallet_extension_send_alert_choose_token")),Ho.default.createElement(na,{space:16,dataSource:I,renderItem:C})),Ho.default.createElement(du,{walletId:a,address:r,visible:m,closeCallback:()=>{l({supplyGasVisible:!1})},coinId:d,receiveOnly:!0})):null},BT=H_;function q_(){let[o,{toggle:t}]=(0,NT.useBoolean)(!1),e=kT(),n=async()=>{await e()};return to(),Ke.default.createElement(Ke.default.Fragment,null,Ke.default.createElement(Q,{networkFeeProps:{onClick:t,feeLevel:!1},confirmButtonProps:{onSubmit:n}}),Ke.default.createElement(BT,{visible:o,onToggle:t}))}function K_(){let{coin:o}=T();return Ke.default.createElement(bo,{fixed:!!o.vdecimalNum},Ke.default.createElement(q_,null))}var vT=K_;var J_={match:o=>Qc(o),pages:{AddressPage:j,AmountPage:ET,ConfirmPage:vT}},LT=J_;s();i();Ao();s();i();var Vi=u(x());s();i();var DT=u(x()),MT=u(G());var Gi=u(E());function Y_(){let o=(0,Gi.useDispatch)(),{coin:t}=T(),e=h(),n=(0,Gi.useSelector)(mo),r=rd(),[a,c]=(0,DT.useState)(!1);return(0,MT.useMount)(()=>{c(!0),(async()=>{let d={coinId:t.coinId,address:e},l={fromAddr:e,toAddr:n,value:"0"};try{let g=await r("Transfer",d,l);if(g){let{info:f,feeCoin:A,fee:I}=g;o(Dm({info:f,feeCoin:A})),o(ce(A.coinId)),o(K(I)),o(R(!1))}}catch{o(R(!0))}finally{c(!1)}})()}),a}var OT=Y_;s();i();var RT=u(x());H();po();function Va(){let{coin:o}=T();return(0,RT.useCallback)(async t=>{let{ZksyncWallet:e}=await qn(),n=Mo(t,10**o.decimals),r=await e.getCloseAmounts(n);return _r(r,n)?null:{key:"wallet_extenshion_max_amount_no_large_than",args:{amount:v.showFloorTruncation(yo(r,10**o.decimals),o.decimals,!1),symbol:o.symbol},type:eo.COMMON_ERROR}},[])}function z_(){let t=[Va()];oo(t)}var UT=z_;function Z_(){let o=OT();return UT(),Vi.default.createElement(X,{confirmButtonProps:{loading:o}})}function $_(){let{coin:o}=T();return Vi.default.createElement(bo,{fixed:!!o.vdecimalNum},Vi.default.createElement(Z_,null))}var WT=$_;s();i();var Hi=u(x());s();i();var Ha=u(E());Oo();Ao();Eo();function X_(){let o=Lo(),{coin:t}=T(),e=h(),n=(0,Ha.useSelector)(mo),r=z(),a=de(),c=q(),m=(0,Ha.useSelector)(Sm),d=async()=>{let{info:g,feeCoin:f}=m||{},{accountId:A,nonce:I}=g||{},S={type:ie.TRANSFER,from:e,to:n,accountId:parseInt(A,10),tokenId:parseInt(f?.tokenId,10),tokenSymbol:f?.originSymbol,amounts:c,fees:r,decimals:t.decimals,nonce:parseInt(I,10)};return await co().signTransaction(S,e,mc)},l=async g=>{if(g?.code)throw new Error(_s);let{signature:f,tx:A}=g||{},{txHash:I,...S}=A||{},C={txSource:ut.NORMAL,signedTx:JSON.stringify({signature:f,tx:S}),fromAdr:e,serviceCharge:A?.fee,toAdr:A?.to,coinAmount:c,coinId:t.coinId,txHash:I,extJson:JSON.stringify({serviceChargeCoinId:a})};return await o(C)};return async()=>{let g=await d();return l(g)}}var GT=X_;s();i();var VT=u(x());function j_(){let o=Va();return(0,VT.useCallback)(async t=>{let e=await o(t);return e?{...e,highlight:Oe.AMOUNT}:null},[o])}function Q_(){let t=[j_()];to(t)}var HT=Q_;function oy(){let o=GT(),t=async()=>o();return HT(),Hi.default.createElement(Q,{confirmButtonProps:{onSubmit:t}})}function ty(){let{coin:o}=T();return Hi.default.createElement(bo,{fixed:!!o.vdecimalNum},Hi.default.createElement(oy,null))}var qT=ty;var ey={match:o=>o===dc,pages:{AddressPage:j,AmountPage:WT,ConfirmPage:qT}},KT=ey;s();i();Ao();s();i();var zT=u(x());s();i();var JT=u(G());var ny=()=>{let{coin:o}=T();return(0,JT.useMemoizedFn)(async t=>{let e={address:t,chainId:o?.chainId},n=!1;try{let{status:r}=await mu(e);n=r===Pc.COMPLETED}catch{n=!1}return n?null:{key:"wallet_extension_transfer_input_error_add_unregistered",args:{}}})};function ry(){return[ny()]}var YT=ry;var sy=()=>{let o=YT();return zT.default.createElement(j,{addressProps:{errorFns:{override:!1,fns:o},extraProps:{disableRequestDomain:!0}}})},ZT=sy;s();i();var Tr=u(x());H();s();i();var $T=u(x()),XT=u(E());Ao();var iy=({coinId:o,address:t})=>{let e=(0,XT.useDispatch)(),[n,r]=te({coinId:o,address:t});return(0,$T.useEffect)(()=>{r.normal&&e(K(r.normal)),r.maxTransferAmount&&e(o===wr?To(r.maxTransferAmount):$o(r.maxTransferAmount))},[o,e,r.maxTransferAmount,r.normal]),[n,r]},qi=iy;s();i();var jT=u(x());H();po();var ay=o=>{let{coin:t}=T(),e=le(),n=vu(e,t?.decimals),r=Tn(),a=Uo();return(0,jT.useCallback)(c=>t?.baseCoinId===0&&Jo(c,a)&&Be(c,n)?{key:"wallet_extension_transfer_input_error_pi_minimum",args:{amount:r(v.div(o,10**t.decimals),t,{useApproximate:!1})},type:eo.BALANCE_INSUFFICIENT}:null,[n,o,a])},cy=o=>{let t=Ss(),e=xs(),n=ku(),r=ay(o);oo({fns:[t,r,e,n],override:!0})},QT=cy;function my(){let{coin:o}=T(),t=h(),[e,n]=qi({coinId:o?.coinId,address:t});return QT(n?.maxTransferAmount),Tr.default.createElement(X,{isGlobalLoading:e,totalAmountProps:{type:"amount",title:Tr.default.createElement(Tr.default.Fragment,null,b("extension_wallet_send_text_transfer_available"),Tr.default.createElement(Qt,{size:Qt.SIZE.xxs,style:{marginLeft:"4px"},tooltip:b("wallet_extension_transfer_input_error_pi_available_balance"),icon:"okx-wallet-plugin-information-circle"}))}})}var oI=my;s();i();var Ir=u(x());H();s();i();var tI=u(x());var uy="transfer",dy=(o,t)=>{let{coin:e}=T(),n=h(),r=so(),a=uo(),c=z(),m=k(),d=Fo({walletId:r,fromAddr:n,localType:e.localType}),l=ot({walletId:r,coinId:e.coinId,coinAmount:a,fromAddr:n,toAddr:m,networkFee:c,localType:e.localType});return(0,tI.useCallback)(async()=>{let g={memo:o,amount:a,source:n,fee:t?.normal,sequence:t?.nonce,type:uy,decimals:e?.decimals,toAddress:m,networkPassphrase:t?.networkPassphrase},f=await d({params:g}),A=await So(e?.localType,{tx:f,networkPassphrase:t?.networkPassphrase}),I=await l(f,{txHash:A});ro({tx_id:I})},[o,a,n,t?.normal,t?.nonce,t?.networkPassphrase,e?.decimals,e?.localType,m,d,l])},eI=dy;var nI=28;function fy(){let{coin:o}=T(),t=h(),[e,n]=(0,Ir.useState)(""),[r,a]=qi({coinId:o?.coinId,address:t}),c=eI(e,a),m=d=>{let l=d.target.value;new TextEncoder().encode(l).length<=nI&&n(d.target.value)};return to(),Ir.default.createElement(Q,{slot:{bottom:Ir.default.createElement(Jt,{value:e,placeholder:b("extension_wallet_transaction_input_entermemo_max",{num:nI}),onChange:m})},confirmButtonProps:{loading:r,onSubmit:c}})}var rI=fy;var ly={match:o=>o===wr,pages:{AddressPage:ZT,AmountPage:oI,ConfirmPage:rI}},sI=ly;var py=[gp,Sl,df,Gl,zp,bg,OA,mT,LT,KT,pC,JA,ST,tC,Dp,Mg,rA,GC,sI],iI=py;var gy=({coinId:o,protocolId:t,baseCoinId:e})=>{let n=iI.find(({match:l})=>l(e,o,t))||{},{Container:r=({children:l})=>qo.default.createElement(qo.default.Fragment,null,l),SubContainer:a=({children:l})=>qo.default.createElement(qo.default.Fragment,null,l)}=n,{AddressPage:c,AmountPage:m,ConfirmPage:d}=n.pages||{};return Ye(n)?null:qo.default.createElement(r,null,qo.default.createElement(Ee.Switch,null,qo.default.createElement(Ee.Route,{exact:!0,path:`${Zo}/:coinId?${Wr}`,component:c}),qo.default.createElement(a,null,qo.default.createElement(Ee.Route,{exact:!0,path:`${Zo}/:coinId?${sn}`,component:m}),qo.default.createElement(Ee.Route,{exact:!0,path:`${Zo}/:coinId?${an}`,component:d}))),qo.default.createElement(yd,null))},Ay=(0,qo.memo)(gy),Cy=()=>{let{coinId:o}=(0,Ee.useParams)(),{coin:t,baseCoin:e}=ds(o,!0);return qo.default.createElement(Ay,{coinId:t.coinId,baseCoinId:e.coinId,protocolId:t?.protocolId})},U7=Cy;export{U7 as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=SendPageContainer-QGJHUCPP.js.map
