import{d as tt,e as et,f as ot,g as nt,h as rt,i as it,j as st,k as lt}from"./chunk-66H5QE4F.js";import{a as pt}from"./chunk-SQ2BNI3O.js";import{a as at}from"./chunk-SQDIO2NL.js";import{b as L}from"./chunk-XYDICNP3.js";import{h as $,l as R}from"./chunk-2LCPVMSO.js";import{a as X}from"./chunk-V3IFYKWM.js";import{q as M}from"./chunk-I3CPAVOC.js";import{a as Lt}from"./chunk-ARWSGU73.js";import{o as vt}from"./chunk-5QMHGZLF.js";import{_ as V}from"./chunk-HPWCPLRR.js";import{c as s}from"./chunk-43VURGIT.js";import{D as O,H as ht,kb as Q,rc as Et}from"./chunk-TM67VPZU.js";import{A as y,G as K,N,c as J}from"./chunk-PUSMMCUD.js";import{R as H,z as i}from"./chunk-UWJLNJLY.js";import{L as Y,f as v,ra as wt}from"./chunk-XDY6V34Y.js";import{D as U,W as Z,c as bt}from"./chunk-JT3LNHPY.js";import{b as k}from"./chunk-JWYCKY2V.js";import{f as h,o as p,q as d}from"./chunk-6KXF36WM.js";p();d();var u=h(k());p();d();var B={root:"_root_1gj3g_1",tools:"_tools_1gj3g_1",mevWrap:"_mevWrap_1gj3g_9",txExplainWrap:"_txExplainWrap_1gj3g_12",data:"_data_1gj3g_15"};var At=({txTypeInfo:t,children:o,...n})=>{let{txExplain1:_={},baseInfo:a={}}=t,m;a?.title?.text&&(m={...a,title:a.title.text});let x=u.Children.toArray(o)?.filter(Boolean)?.length;return u.default.createElement(ot,{injectInfo:m,needChildrenPadding:x,...n},u.default.createElement(s.Box,{className:B.root},u.default.createElement(s.Box,{className:B.tools},_?.title?u.default.createElement(s.Box,{className:B.txExplainWrap},u.default.createElement(nt,{txExplain:_})):null),u.default.createElement(s.Box,{className:B.data},o)))},dt=At;p();d();var e=h(k()),W=h(vt());wt();H();ht();Et();p();d();var r=h(k()),_t=h(bt()),ct=h(Lt());H();p();d();var c={root:"_root_w4981_1",header:"_header_w4981_4",title:"_title_w4981_10",content:"_content_w4981_14",contractAddress:"_contractAddress_w4981_18",tabContent:"_tabContent_w4981_21",data:"_data_w4981_24",abi:"_abi_w4981_27",icon:"_icon_w4981_37",copyableText:"_copyableText_w4981_41"};var Bt=({children:t=null,advanced:o={},title:n=i("wallet_extension_transaction_tab_advanced"),tooltipZIndex:_})=>{let{data:a,contractList:m,methodName:f,methodParameter:x}=o,T=l=>{(0,ct.default)(l),K.success({title:i("wallet_receive_toast_address_copied")})},g=(0,r.useMemo)(()=>f&&x?JSON.stringify({[i("wallet_extension_transaction_tab_func")]:f,[i("wallet_extension_transaction_tab_params")]:x},null,2):"",[f,x]);return!a&&!t?null:r.default.createElement(J,{className:c.root,headerClassName:c.header,titleClass:c.title,contentClassName:c.content,customHeaderIcon:l=>r.default.createElement(Z,{className:(0,_t.default)(c.icon,"okds-arrow-chevron-down-md",{"okui-accordion-header-icon-expanded":l})}),title:n},m?.length?m.map(l=>r.default.createElement(s.Box,{className:c.contractAddress},r.default.createElement(L,{title:l.title,address:l.address}))):null,r.default.createElement(N.Underline,{size:U.xs,noLine:!0,noPadding:!0,paneSpacing:24},r.default.createElement(N.TabPane,{tab:i("wallet_dapp_connection_subtitle_data_label"),id:"wallet_dapp_connection_subtitle_data_label"},r.default.createElement(s.Box,{className:c.tabContent},t||r.default.createElement(y,{graspBaseDom:!0,title:i("wallet_receive_btn_copy_address"),type:y.TYPES.neutral,trigger:y.TRIGGER_TYPES.hover,zIndex:_},r.default.createElement(M.Text,{forceWrap:!0,onClick:()=>{T(a)},size:M.SIZE.sm,className:c.data},a)))),g?r.default.createElement(N.TabPane,{tab:i("wallet_extension_transaction_tab_abi"),id:"wallet_extension_transaction_tab_abi"},r.default.createElement(s.Box,{className:c.tabContent,onClick:()=>{T(g)}},r.default.createElement(y,{noWrapper:!0,graspBaseDom:!0,title:i("wallet_receive_btn_copy_address"),type:y.TYPES.neutral,trigger:y.TRIGGER_TYPES.hover,zIndex:_},r.default.createElement("pre",{className:c.abi},g)))):null))},ft=Bt;p();d();var P={root:"_root_aunqi_1",txTypeExtInfo:"_txTypeExtInfo_aunqi_6","section-wrap":"_section-wrap_aunqi_12",sectionWrap:"_section-wrap_aunqi_12"};var F={signMessage:"signMessage",signTransaction:"signTransaction"},Nt=({txType:t,preExecParams:o})=>{let n=o?.dappInfo,a={[F.signMessage]:{dappInfo:n,txTypeInfo:{baseInfo:{image:{light:"/cdn/assets/imgs/2411/32C073438B555887.png",dark:"/cdn/assets/imgs/2411/F0FFC2576F5F3139.png"},title:{text:i("wallet_dapp_conncetion_notify_signature_request")}}}},[F.signTransaction]:{txTypeInfo:{baseInfo:{image:{light:"/cdn/assets/imgs/2411/E917E86725EBEB35.png",dark:"/cdn/assets/imgs/2411/3B767A859A18470E.png"},title:{text:i("wallet_extension_transaction_page_title_unknown_transaction")},subTitle:n.host}}}}[t];return{defaultPreExecRet:{tipMessageInfo:{tipMessage:i("wallet_extension_transaction_error_general_check_network"),level:780},...a,canConfirm:!1},defaultTxTypeInfo:a}},Ct=({preExecRet:t,renderEditApproveAmount:o,setPreExecRet:n})=>{let _=(0,W.useMemoizedFn)((T,g)=>{n(l=>{let{approveInfoList:C}=l;return{...l,approveInfoList:C.map(b=>T===b.id?{...b,...g}:b)}})}),a=t.approveInfoList||[],m=t.txTypeInfo||{},f=t.dappInfo||{},{assetDiffList:x}=t||{};return e.default.createElement(dt,{txTypeInfo:m},a.length?e.default.createElement(it,{approveInfoList:a,renderEditApproveAmount:o,updateApproveInfo:_}):null,x?.length?e.default.createElement(et,{preExecRet:t}):null,f?.host?e.default.createElement(rt,{imageUrl:f.icon,text:f.host}):null)},St=({spender:t})=>t?e.default.createElement(L,{address:t.address,connectable:t.addressType!=="eoa",title:i($(t.approvalType)?"wallet_extension_approve_header_dapp_contract_address":"wallet_extension_permitapproval_text_approved")}):null,kt=({spender:t,slot:o})=>t?null:o.interactWith,Mt=({slot:t,preExecRet:o})=>t.advanced?t.advanced:e.default.createElement(ft,{tooltipZIndex:101,advanced:o?.txExtInfo||{}}),Pt=(t,o)=>{t?.txTypeInfo||(t.txTypeInfo=o.txTypeInfo,t.dappInfo=o.dappInfo)},Ft=async({popupInfoList:t,loading:o,secModalFn:n})=>{o&&t?.length&&await n(t).catch(v)},Wt=(0,e.memo)(({txType:t=F.signTransaction,preExecParams:o={},slot:n={},walletAccount:_={},handleCancel:a=v,buttonGroup:m,txState:f={},localType:x,networkFeeProps:T,renderEditApproveAmount:g=v,onUpdatePreExecInfo:l=v,chainHeaderTips:C=[]})=>{let{defaultPreExecRet:b,defaultTxTypeInfo:j}=Nt({txType:t,preExecParams:o}),[I,S]=(0,e.useState)({}),[E,D]=(0,e.useState)(!0),[G,z]=(0,e.useState)(!0),mt=pt({handleCancel:a}),xt=(0,W.useMemoizedFn)(async()=>{try{let w={};if(o.method===O.PERSONAL_SIGN)w={...j};else{o.forceLoading&&D(!0),z(!0),w=await V(o);let{approveInfoList:Tt,popupInfoList:gt}=w;Pt(w,j),Tt?.forEach((yt,It)=>{yt.id=It}),await Ft({popupInfoList:gt,loading:E,secModalFn:mt})}S(w)}catch{S(b)}finally{D(!1),z(!1)}});(0,e.useEffect)(()=>{l({...I,loading:E,silentLoading:G})},[I,E,l,G]),(0,e.useEffect)(()=>{Y(o.chainIndex)||xt()},[o]);let ut=lt({txState:f,walletAccount:_,preExecRet:I,loading:E,chainHeaderTips:C}),q=I.approveInfoList?.[0]?.spender;return e.default.createElement(s.Container,{className:P.root},E?e.default.createElement(st,{handleCancel:a}):e.default.createElement(e.default.Fragment,null,e.default.createElement(tt,{...ut}),n.top,e.default.createElement(Ct,{preExecRet:I,setPreExecRet:S,renderEditApproveAmount:g}),e.default.createElement(s.FlexBox,{className:P["section-wrap"],direction:s.DIRECTION.vertical},n.mev,T?e.default.createElement(at,{useTransition:!1,...T}):n.networkFeeEntry,e.default.createElement(St,{spender:q}),n.network,e.default.createElement(L,{walletId:_?.walletId,localType:x||Q,title:i("wallet_extension_network_address_title_walletused")}),e.default.createElement(kt,{spender:q,slot:n}),e.default.createElement(Mt,{slot:n,preExecRet:I})),e.default.createElement(X,{borderTop:!0,placeholder:!0,offsetBottom:0,style:{zIndex:205}},e.default.createElement(R,{buttonGroup:m}))))}),De=Wt;export{dt as a,ft as b,F as c,De as d};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-RJWOTEDA.js.map
