import{a as R,b as y,c as O}from"./chunk-SHGLC3KN.js";import"./chunk-YMOCY6LL.js";import"./chunk-2MJ3QYSD.js";import"./chunk-AKQ365VJ.js";import{a as _}from"./chunk-EFKEDCIX.js";import"./chunk-PTML5W4O.js";import"./chunk-YXB345S6.js";import{a as S}from"./chunk-QR4O7ZB4.js";import"./chunk-JCM7SRK2.js";import"./chunk-SZD6WTBQ.js";import"./chunk-ASR4HLU7.js";import"./chunk-ANIUN6US.js";import"./chunk-3DZ7WRLL.js";import"./chunk-DEOJU4Z3.js";import{a as H,b as M}from"./chunk-YOPEZ2F5.js";import"./chunk-6BXYJZHH.js";import"./chunk-CCEMKRO6.js";import"./chunk-2HSCH6R3.js";import"./chunk-CWNIM6RS.js";import"./chunk-NNAD25BL.js";import"./chunk-XV444F26.js";import{sa as K}from"./chunk-N2BCRNDB.js";import"./chunk-GCQ4H2BA.js";import"./chunk-JGEHAFTO.js";import{a as f}from"./chunk-UVFOW4HH.js";import"./chunk-LNOPECCQ.js";import"./chunk-CB7FOZNP.js";import"./chunk-43VURGIT.js";import{kb as u,rc as D}from"./chunk-TM67VPZU.js";import"./chunk-VW6OQNWT.js";import"./chunk-PUSMMCUD.js";import"./chunk-UWJLNJLY.js";import"./chunk-VRY2ADKE.js";import"./chunk-VWEB6W6G.js";import"./chunk-XDY6V34Y.js";import"./chunk-JT3LNHPY.js";import"./chunk-47UWF72W.js";import"./chunk-JWYCKY2V.js";import"./chunk-G2266BV2.js";import"./chunk-L4PAIYPH.js";import"./chunk-UT7LJPKF.js";import"./chunk-7U3DN5ZD.js";import"./chunk-324EPGNQ.js";import"./chunk-QYVQBXDG.js";import"./chunk-7D4PUIEN.js";import"./chunk-IWVM7XL6.js";import"./chunk-7QO4TZYQ.js";import"./chunk-FF4LY6PE.js";import"./chunk-76KCDJDG.js";import"./chunk-YDUDQP2P.js";import"./chunk-PGPFV4JQ.js";import"./chunk-MIBHDVGP.js";import"./chunk-7VFUX7IX.js";import"./chunk-XLF4LAH2.js";import"./chunk-ONKZ57T6.js";import"./chunk-ZC7Q7LCH.js";import{f as g,o as E,q as I}from"./chunk-6KXF36WM.js";E();I();var v=g(R()),P=g(_()),o=g(K());D();var w=v.default.HardwareWebSdk,T=class extends O{async signTransaction(l,e,p){return new Promise((r,n)=>{(async()=>{let{onekeyInfo:s,hdPathMap:t}=l,i;try{i=await this.initOneKey({onekeyInfo:s,onUiCancel(){n(new Error(f))}})}catch(m){return n(this.handleErrors(m))}e=S(e);let c=await H(e),d=t[u],{success:h,payload:a}=await w.evmSignTransaction(s?.connectId,i,{path:d,transaction:{...c.toJSON(),to:(0,o.bufferToHex)(c.to).toString(),chainId:e.chainId}});if(y.closeModal(),h){let m=await M(c,a);return r(p?m:{rawTxResult:m})}return n(this.handleErrors(a))})()})}async signPersonalMessage(l,e={}){return new Promise((p,r)=>{(async()=>{let{onekeyInfo:n,hdPathMap:s}=l,t;try{t=await this.initOneKey({onekeyInfo:n,onUiCancel(){r(new Error(f))}})}catch(a){return r(this.handleErrors(a))}let{data:i=""}=e||{},c=s[u],{success:d,payload:h}=await w.evmSignMessage(n?.connectId,t,{path:c,messageHex:(0,o.stripHexPrefix)(i)});if(y.closeModal(),d){let{signature:a=""}=h||{};return p((0,o.addHexPrefix)(a))}return r(this.handleErrors(h))})()})}async signTypedData(l,e={}){return new Promise((p,r)=>{(async()=>{let{onekeyInfo:n,hdPathMap:s}=l,t;try{t=await this.initOneKey({onekeyInfo:n,onUiCancel(){r(new Error(f))}})}catch(k){return r(this.handleErrors(k))}let i=s[u];if(!(e.version==="V4"))return y.closeModal(),r(new Error("OneKey: Only version 4 of typed data signing is supported"));let d=JSON.parse(e.data),{domain_separator_hash:h,message_hash:a}=(0,P.default)(d,!0),{success:m,payload:x}=await w.evmSignTypedData(n?.connectId,t,{path:i,data:d,metamask_v4_compat:!0,domainHash:h,messageHash:a});return y.closeModal(),m?p((0,o.addHexPrefix)(x?.signature)):r(this.handleErrors(x))})()})}},J=new T;export{J as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=ethAdapter-OMHQYTEO.js.map
