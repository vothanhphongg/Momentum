import{a as Ke,b as de,c as ue}from"./chunk-2MJ3QYSD.js";import{a as ce}from"./chunk-UT7LJPKF.js";import{a as Ge}from"./chunk-YDUDQP2P.js";import{n as Ve}from"./chunk-XLF4LAH2.js";import"./chunk-ONKZ57T6.js";import"./chunk-ZC7Q7LCH.js";import{c as l,o as c,q as d}from"./chunk-6KXF36WM.js";var M=l(g=>{"use strict";c();d();Object.defineProperty(g,"__esModule",{value:!0});g.decode=g.encode=g.unescape=g.escape=g.pad=void 0;var le=ce();function k(t){return`${t}${"=".repeat(4-(t.length%4||4))}`}g.pad=k;function he(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}g.escape=he;function fe(t){return k(t).replace(/-/g,"+").replace(/_/g,"/")}g.unescape=fe;function Qe(t){return he((0,le.fromByteArray)(new TextEncoder().encode(t)))}g.encode=Qe;function Xe(t){return new TextDecoder().decode((0,le.toByteArray)(k(fe(t))))}g.decode=Xe});var pe=l(S=>{"use strict";c();d();Object.defineProperty(S,"__esModule",{value:!0});S.hmac=S.HMAC=void 0;var x=Ke(),ye=de(),B=class extends ye.Hash{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,(0,x.hash)(e);let n=(0,ye.toBytes)(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,o=new Uint8Array(s);o.set(n.length>s?e.create().update(n).digest():n);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=e.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),o.fill(0)}update(e){return(0,x.exists)(this),this.iHash.update(e),this}digestInto(e){(0,x.exists)(this),(0,x.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:s,destroyed:o,blockLen:i,outputLen:y}=this;return e=e,e.finished=s,e.destroyed=o,e.blockLen=i,e.outputLen=y,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};S.HMAC=B;var Ye=(t,e,r)=>new B(t,e).update(r).digest();S.hmac=Ye;S.hmac.create=(t,e)=>new B(t,e)});var Se=l(j=>{"use strict";c();d();Object.defineProperty(j,"__esModule",{value:!0});j.joseToDer=j.derToJose=void 0;var _e=ce(),we=M();function ee(t){return(t/8|0)+(t%8===0?0:1)}var ze={ES256:ee(256),ES384:ee(384),ES512:ee(521)};function be(t){let e=ze[t];if(e)return e;throw new Error(`Unknown algorithm "${t}"`)}var L=128,ve=0,Ze=32,ke=16,er=2,Pe=ke|Ze|ve<<6,U=er|ve<<6;function Ee(t){if(t instanceof Uint8Array)return t;if(typeof t=="string")return(0,_e.toByteArray)((0,we.pad)(t));throw new TypeError("ECDSA signature must be a Base64 string or a Uint8Array")}function rr(t,e){let r=Ee(t),n=be(e),s=n+1,o=r.length,i=0;if(r[i++]!==Pe)throw new Error('Could not find expected "seq"');let y=r[i++];if(y===(L|1)&&(y=r[i++]),o-i<y)throw new Error(`"seq" specified length of "${y}", only "${o-i}" remaining`);if(r[i++]!==U)throw new Error('Could not find expected "int" for "r"');let h=r[i++];if(o-i-2<h)throw new Error(`"r" specified length of "${h}", only "${o-i-2}" available`);if(s<h)throw new Error(`"r" specified length of "${h}", max of "${s}" is acceptable`);let p=i;if(i+=h,r[i++]!==U)throw new Error('Could not find expected "int" for "s"');let a=r[i++];if(o-i!==a)throw new Error(`"s" specified length of "${a}", expected "${o-i}"`);if(s<a)throw new Error(`"s" specified length of "${a}", max of "${s}" is acceptable`);let u=i;if(i+=a,i!==o)throw new Error(`Expected to consume entire array, but "${o-i}" bytes remain`);let z=n-h,Z=n-a,H=new Uint8Array(z+h+Z+a);for(i=0;i<z;++i)H[i]=0;H.set(r.subarray(p+Math.max(-z,0),p+h),i),i=n;for(let Re=i;i<Re+Z;++i)H[i]=0;return H.set(r.subarray(u+Math.max(-Z,0),u+a),i),(0,we.escape)((0,_e.fromByteArray)(H))}j.derToJose=rr;function ge(t,e,r){let n=0;for(;e+n<r&&t[e+n]===0;)++n;return t[e+n]>=L&&--n,n}function tr(t,e){t=Ee(t);let r=be(e),n=t.length;if(n!==r*2)throw new TypeError(`"${e}" signatures must be "${r*2}" bytes, saw "${n}"`);let s=ge(t,0,r),o=ge(t,r,t.length),i=r-s,y=r-o,h=1+1+i+1+1+y,p=h<L,a=new Uint8Array((p?2:3)+h),u=0;return a[u++]=Pe,p?a[u++]=h:(a[u++]=L|1,a[u++]=h&255),a[u++]=U,a[u++]=i,s<0?(a[u++]=0,a.set(t.subarray(0,r),u),u+=r):(a.set(t.subarray(s,r),u),u+=r-s),a[u++]=U,a[u++]=y,o<0?(a[u++]=0,a.set(t.subarray(r),u)):a.set(t.subarray(r+o),u),a}j.joseToDer=tr});var I=l(T=>{"use strict";c();d();Object.defineProperty(T,"__esModule",{value:!0});T.InvalidTokenError=T.MissingParametersError=void 0;var re=class extends Error{constructor(e){super(),this.name="MissingParametersError",this.message=e||""}};T.MissingParametersError=re;var te=class extends Error{constructor(e){super(),this.name="InvalidTokenError",this.message=e||""}};T.InvalidTokenError=te});var Te=l(W=>{"use strict";c();d();Object.defineProperty(W,"__esModule",{value:!0});W.SECP256K1Client=void 0;var nr=pe(),sr=ue(),$=Ge(),qe=Se(),Oe=I(),je=de();$.utils.hmacSha256Sync=(t,...e)=>{let r=nr.hmac.create(sr.sha256,t);return e.forEach(n=>r.update(n)),r.digest()};var J=class{static derivePublicKey(e,r=!0){return e.length===66&&(e=e.slice(0,64)),e.length<64&&(e=e.padStart(64,"0")),(0,je.bytesToHex)($.getPublicKey(e,r))}static signHash(e,r,n="jose"){if(!e||!r)throw new Oe.MissingParametersError("a signing input hash and private key are all required");let s=$.signSync(e,r.slice(0,64),{der:!0,canonical:!1});if(n==="der")return(0,je.bytesToHex)(s);if(n==="jose")return(0,qe.derToJose)(s,"ES256");throw Error("Invalid signature format")}static loadSignature(e){return(0,qe.joseToDer)(e,"ES256")}static verifyHash(e,r,n){if(!e||!r||!n)throw new Oe.MissingParametersError("a signing input hash, der signature, and public key are all required");return $.verify(r,e,n,{strict:!1})}};W.SECP256K1Client=J;J.algorithmName="ES256K"});var F=l(C=>{"use strict";c();d();Object.defineProperty(C,"__esModule",{value:!0});C.cryptoClients=C.SECP256K1Client=void 0;var Ce=Te();Object.defineProperty(C,"SECP256K1Client",{enumerable:!0,get:function(){return Ce.SECP256K1Client}});var ir={ES256K:Ce.SECP256K1Client};C.cryptoClients=ir});var ne=l(P=>{"use strict";c();d();var or=P&&P.__awaiter||function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function y(a){try{p(n.next(a))}catch(u){i(u)}}function h(a){try{p(n.throw(a))}catch(u){i(u)}}function p(a){a.done?o(a.value):s(a.value).then(y,h)}p((n=n.apply(t,e||[])).next())})};Object.defineProperty(P,"__esModule",{value:!0});P.hashSha256Async=P.hashSha256=void 0;var ar=ue();function me(t){return(0,ar.sha256)(t)}P.hashSha256=me;function cr(t){return or(this,void 0,void 0,function*(){try{if(typeof crypto<"u"&&typeof crypto.subtle<"u"){let r=typeof t=="string"?new TextEncoder().encode(t):t,n=yield crypto.subtle.digest("SHA-256",r);return new Uint8Array(n)}else{let r=Ve();if(!r.createHash)throw new Error("`crypto` module does not contain `createHash`");return Promise.resolve(r.createHash("sha256").update(t).digest())}}catch(e){return console.log(e),console.log('Crypto lib not found. Neither the global `crypto.subtle` Web Crypto API, nor the or the Node.js `require("crypto").createHash` module is available. Falling back to JS implementation.'),Promise.resolve(me(t))}})}P.hashSha256Async=cr});var Me=l(E=>{"use strict";c();d();var dr=E&&E.__awaiter||function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function y(a){try{p(n.next(a))}catch(u){i(u)}}function h(a){try{p(n.throw(a))}catch(u){i(u)}}function p(a){a.done?o(a.value):s(a.value).then(y,h)}p((n=n.apply(t,e||[])).next())})};Object.defineProperty(E,"__esModule",{value:!0});E.TokenSigner=E.createUnsecuredToken=void 0;var se=M(),Ae=F(),ur=I(),He=ne();function ie(t,e){let r=[],n=se.encode(JSON.stringify(e));r.push(n);let s=se.encode(JSON.stringify(t));return r.push(s),r.join(".")}function lr(t){return ie(t,{typ:"JWT",alg:"none"})+"."}E.createUnsecuredToken=lr;var oe=class{constructor(e,r){if(!(e&&r))throw new ur.MissingParametersError("a signing algorithm and private key are required");if(typeof e!="string")throw new Error("signing algorithm parameter must be a string");if(e=e.toUpperCase(),!Ae.cryptoClients.hasOwnProperty(e))throw new Error("invalid signing algorithm");this.tokenType="JWT",this.cryptoClient=Ae.cryptoClients[e],this.rawPrivateKey=r}header(e={}){let r={typ:this.tokenType,alg:this.cryptoClient.algorithmName};return Object.assign({},r,e)}sign(e,r=!1,n={}){let s=this.header(n),o=ie(e,s),i=(0,He.hashSha256)(o);return this.createWithSignedHash(e,r,s,o,i)}signAsync(e,r=!1,n={}){return dr(this,void 0,void 0,function*(){let s=this.header(n),o=ie(e,s),i=yield(0,He.hashSha256Async)(o);return this.createWithSignedHash(e,r,s,o,i)})}createWithSignedHash(e,r,n,s,o){let i=this.cryptoClient.signHash(o,this.rawPrivateKey);return r?{header:[se.encode(JSON.stringify(n))],payload:JSON.stringify(e),signature:[i]}:[s,i].join(".")}};E.TokenSigner=oe});var Ie=l(V=>{"use strict";c();d();Object.defineProperty(V,"__esModule",{value:!0});V.TokenVerifier=void 0;var hr=M(),Be=F(),fr=I(),R=ne(),ae=class{constructor(e,r){if(!(e&&r))throw new fr.MissingParametersError("a signing algorithm and public key are required");if(typeof e!="string")throw"signing algorithm parameter must be a string";if(e=e.toUpperCase(),!Be.cryptoClients.hasOwnProperty(e))throw"invalid signing algorithm";this.tokenType="JWT",this.cryptoClient=Be.cryptoClients[e],this.rawPublicKey=r}verify(e){return typeof e=="string"?this.verifyCompact(e,!1):typeof e=="object"?this.verifyExpanded(e,!1):!1}verifyAsync(e){return typeof e=="string"?this.verifyCompact(e,!0):typeof e=="object"?this.verifyExpanded(e,!0):Promise.resolve(!1)}verifyCompact(e,r){let n=e.split("."),s=n[0]+"."+n[1],o=i=>{let y=this.cryptoClient.loadSignature(n[2]);return this.cryptoClient.verifyHash(i,y,this.rawPublicKey)};if(r)return(0,R.hashSha256Async)(s).then(i=>o(i));{let i=(0,R.hashSha256)(s);return o(i)}}verifyExpanded(e,r){let n=[e.header.join("."),hr.encode(e.payload)].join("."),s=!0,o=i=>(e.signature.map(y=>{let h=this.cryptoClient.loadSignature(y);this.cryptoClient.verifyHash(i,h,this.rawPublicKey)||(s=!1)}),s);if(r)return(0,R.hashSha256Async)(n).then(i=>o(i));{let i=(0,R.hashSha256)(n);return o(i)}}};V.TokenVerifier=ae});var Ne=l(K=>{"use strict";c();d();Object.defineProperty(K,"__esModule",{value:!0});K.decodeToken=void 0;var G=M();function yr(t){if(typeof t=="string"){let e=t.split("."),r=JSON.parse(G.decode(e[0])),n=JSON.parse(G.decode(e[1])),s=e[2];return{header:r,payload:n,signature:s}}else if(typeof t=="object"){if(typeof t.payload!="string")throw new Error("Expected token payload to be a base64 or json string");let e=t.payload;t.payload[0]!=="{"&&(e=G.decode(e));let r=[];return t.header.map(n=>{let s=JSON.parse(G.decode(n));r.push(s)}),{header:r,payload:JSON.parse(e),signature:t.signature}}}K.decodeToken=yr});var m=l(w=>{"use strict";c();d();var pr=w&&w.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),N=w&&w.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&pr(e,t,r)};Object.defineProperty(w,"__esModule",{value:!0});N(Me(),w);N(Ie(),w);N(Ne(),w);N(I(),w);N(F(),w)});var q=l(Q=>{"use strict";c();d();Object.defineProperty(Q,"__esModule",{value:!0});Q.getDefaultProvider=void 0;async function gr(){return window.BitcoinProvider}Q.getDefaultProvider=gr});var De=l(D=>{"use strict";c();d();Object.defineProperty(D,"__esModule",{value:!0});D.AddressPurposes=void 0;var _r;(function(t){t.PAYMENT="payment",t.ORDINALS="ordinals"})(_r=D.AddressPurposes||(D.AddressPurposes={}))});var xe=l(b=>{"use strict";c();d();var wr=b&&b.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),br=b&&b.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&wr(e,t,r)};Object.defineProperty(b,"__esModule",{value:!0});b.getAddress=void 0;var vr=m(),Pr=q(),Er=async t=>{let{getProvider:e=Pr.getDefaultProvider}=t,r=await e();if(!r)throw new Error("No Bitcoin wallet installed");let{purposes:n}=t.payload;if(!n)throw new Error("Address purposes are required");try{let s=(0,vr.createUnsecuredToken)(t.payload),o=await r.connect(s);t.onFinish?.(o)}catch(s){console.error("[Connect] Error during address request",s),t.onCancel?.()}};b.getAddress=Er;br(De(),b)});var Le=l(O=>{"use strict";c();d();Object.defineProperty(O,"__esModule",{value:!0});O.callWalletPopup=O.CallMethod=void 0;var Sr=m(),qr=q(),Or;(function(t){t.SIGN_TRANSACTION="signTransaction",t.GET_ADDRESS="getAddress"})(Or=O.CallMethod||(O.CallMethod={}));var jr=async t=>{let{getProvider:e=qr.getDefaultProvider}=t,r=await e();if(!r)throw new Error("No Bitcoin wallet installed");let{method:n}=t.payload;if(!n)throw new Error("A wallet method is required");let s=(0,Sr.createUnsecuredToken)(t.payload);try{let o=await r.call(s);t.onFinish?.(o)}catch(o){console.error("[Connect] Error during call request",o),t.onCancel?.()}};O.callWalletPopup=jr});var $e=l(Ue=>{"use strict";c();d();Object.defineProperty(Ue,"__esModule",{value:!0})});var Je=l(v=>{"use strict";c();d();var Tr=v&&v.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Cr=v&&v.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Tr(e,t,r)};Object.defineProperty(v,"__esModule",{value:!0});v.signMessage=void 0;var mr=m(),Ar=q(),Hr=async t=>{let{getProvider:e=Ar.getDefaultProvider}=t,r=await e();if(!r)throw new Error("No Bitcoin wallet installed");let{address:n,message:s}=t.payload;if(!n)throw new Error("An address is required to sign a message");if(!s)throw new Error("A message to be signed is required");try{let o=(0,mr.createUnsecuredToken)(t.payload),i=await r.signMessage(o);t.onFinish?.(i)}catch(o){console.error("[Connect] Error during sign message request",o),t.onCancel?.()}};v.signMessage=Hr;Cr($e(),v)});var We=l(X=>{"use strict";c();d();Object.defineProperty(X,"__esModule",{value:!0});X.sendBtcTransaction=void 0;var Mr=m(),Br=q(),Ir=async t=>{let{getProvider:e=Br.getDefaultProvider}=t,r=await e();if(!r)throw new Error("No Bitcoin wallet installed");let{recipients:n,senderAddress:s}=t.payload;if(!n||n.length===0)throw new Error("At least one recipient is required");if(!s)throw new Error("The sender address is required");try{let o=(0,Mr.createUnsecuredToken)(t.payload),i=await r.sendBtcTransaction(o);t.onFinish?.(i)}catch(o){console.error("[Connect] Error during send BTC transaction request",o),t.onCancel?.()}};X.sendBtcTransaction=Ir});var Fe=l(Y=>{"use strict";c();d();Object.defineProperty(Y,"__esModule",{value:!0});Y.signTransaction=void 0;var Nr=m(),Dr=q(),xr=async t=>{let{getProvider:e=Dr.getDefaultProvider}=t,r=await e();if(!r)throw new Error("No Bitcoin wallet installed");let{psbtBase64:n,inputsToSign:s}=t.payload;if(!n)throw new Error("A value for psbtBase64 representing the tx hash is required");if(!s)throw new Error("An array specifying the inputs to be signed by the wallet is required");try{let o=(0,Nr.createUnsecuredToken)(t.payload),i=await r.signTransaction(o);t.onFinish?.(i)}catch(o){console.error("[Connect] Error during sign transaction request",o),t.onCancel?.()}};Y.signTransaction=xr});var Ur=l(_=>{c();d();var Lr=_&&_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),A=_&&_.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Lr(e,t,r)};Object.defineProperty(_,"__esModule",{value:!0});A(xe(),_);A(Le(),_);A(q(),_);A(Je(),_);A(We(),_);A(Fe(),_)});export default Ur();

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=dist-QVZNATJ6.js.map
