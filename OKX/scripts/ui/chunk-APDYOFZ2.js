import{a as Er}from"./chunk-MFSCVDJN.js";import{a as z}from"./chunk-TQFMB6UY.js";import{a as Sr}from"./chunk-F6DRZBXE.js";import{a as Ar}from"./chunk-JAJGR5PD.js";import{a as Ir}from"./chunk-U7LFLL6J.js";import{b as dr,c as de,m as _r,n as xr,o as yr}from"./chunk-3CVTSTBR.js";import{a as rr}from"./chunk-KQDMYE3F.js";import{a as or}from"./chunk-PWLZXA4M.js";import{a as nr}from"./chunk-RYRQK4MH.js";import{a as er}from"./chunk-TOV4UWR3.js";import{a as ht,b as gr,d as dt}from"./chunk-HOU3VS5H.js";import{a as Tr}from"./chunk-SQDIO2NL.js";import{a as zt}from"./chunk-IP7VSGCS.js";import{a as ft,b as Cr,c as _e}from"./chunk-XYDICNP3.js";import{A as me,B as ue,F as ur,J as cr,K as pr,O as ce,P as lr,R as fr,T as pe,U as le,Z as fe,b as sr,c as ir,d as ar,e as Lt,f as R,g as se,i as vt,k as ie,l as mr,q as ae,v as Mt}from"./chunk-ALLM2Z34.js";import{D as tr,a as Ko,b as Jo,k as Qo,l as Y}from"./chunk-2LCPVMSO.js";import{f as jo}from"./chunk-6THUPAMO.js";import{a as qo}from"./chunk-OWWFH26C.js";import{d as Q,g as Xo,j as wt}from"./chunk-MNZIO3NP.js";import{c as Yo}from"./chunk-DTLEDHZZ.js";import{A as Ho,da as Wo}from"./chunk-KQIRXTC7.js";import{D as De,E as Oo,F as Po,G as wo,I as Lo,J as vo,L as Mo,M as ko,N as Do,O as Uo,P as Ro,Q as $o,b as Ao,f as So,j as Eo,k as ho,n as bo,q as Fo,t as No,x as Bo}from"./chunk-FOF22X4F.js";import{k as Zo}from"./chunk-G4AVWXHJ.js";import{a as re,g as Vo}from"./chunk-A57OTXBP.js";import{a as Qn,l as zo,m as Go}from"./chunk-IRMYAC6R.js";import{a as ne}from"./chunk-PTD7UCOR.js";import{b as Ue}from"./chunk-ETJEH7T4.js";import{a as lt}from"./chunk-V3IFYKWM.js";import{a as Co,f as To,fb as Io,ra as go}from"./chunk-YALUYHLV.js";import{d as xo,e as yo,q as S}from"./chunk-I3CPAVOC.js";import{o as pt}from"./chunk-5QMHGZLF.js";import{Gb as ee,Y as fo,ec as W,za as _o}from"./chunk-HPWCPLRR.js";import{a as oe}from"./chunk-ON6S2DB7.js";import{d as Kt,f as so}from"./chunk-DEOJU4Z3.js";import{L as po,Z as Qt,aa as b,ca as te,da as lo,f as w,ka as j,n as co}from"./chunk-N2BCRNDB.js";import{c as F}from"./chunk-43VURGIT.js";import{I as J,Ia as jt,J as Me,K as mt,N as Vt,Na as ao,O as to,P as ke,Rb as ct,Y as eo,ba as Zt,bd as uo,ea as St,ha as ut,hc as mo,mb as Wt,rc as Yt,rd as jn,ya as Jt,za as io}from"./chunk-TM67VPZU.js";import{B as ro,H as no,d as oo,o as qt,q as Et}from"./chunk-PUSMMCUD.js";import{R as k,o as At,z as f}from"./chunk-UWJLNJLY.js";import{L as Ht,ra as ve,s as Qe}from"./chunk-XDY6V34Y.js";import{c as Xt,ea as U}from"./chunk-JT3LNHPY.js";import{b as y}from"./chunk-JWYCKY2V.js";import{f as c,o as r,q as n}from"./chunk-6KXF36WM.js";r();n();var Te=c(y()),Br=c(W()),Or=c(pt());r();n();var xe=c(y());ut();var Re=(0,xe.createContext)({signInfo:null,currencyId:null,params:{walletId:null,inscriptions:[],from:"",to:"",netWorkCoinId:null,utxoType:1,txType:null,protocolId:null,mintType:Qt.parallel},feeData:{inscriptionOutput:null,revealTxFees:[],commitTxFee:"0",feeSelectedSat:{},canTransferAmount:"0"},lifecycle:{beforePostTx:null},onFeeDataChange:()=>{}});function tt(){return(0,xe.useContext)(Re)}function kt(){let{signInfo:t}=tt();return t}function ye(){let{currencyId:t}=tt();return t}function rt(){let{params:t}=tt();return t}function $e(){let{feeData:t}=tt();return t}function Ce(){let{onFeeDataChange:t}=tt();return t}function et(){let t=kt(),{inscriptions:e}=rt(),{inscriptionOutput:o}=$e(),i=o||t?.inscriptionOutput||"0";return{inscriptionOutput:i,inscriptionsCount:e.length,total:J(i,e.length)}}function bt(){let{feeData:t}=tt();return{fees:t.revealTxFees,totalFee:(t.revealTxFees||[]).reduce((e,o)=>mt(e,o),"0")}}function Ft(){let{feeData:t}=tt();return t.commitTxFee}function q(){let{feeData:{feeSelectedSat:t={}}}=tt(),{type:e}=t,o=kt(),i;return e===b.CUSTOM?i=t.satBytes:i=o?.[lo[e]],{...t,satBytes:i||o?.normal||0}}function hr(){let{feeData:t}=tt();return t.canTransferAmount}function br(){let{lifecycle:t}=tt();return t}r();n();var Fr=c(y());function ts(t,e){let o=Q(e),[,i]=er({coinId:e,address:t,chainId:o?.chainId},{pollingInterval:20*1e3});return(0,Fr.useMemo)(()=>i||{},[i])}var Nr=ts;function es({defaultFeeData:t,currencyId:e,params:o,lifecycle:i,children:s}){let{from:m,to:a,netWorkCoinId:u,...p}=o,d=(0,Br.useSelector)(ee),_=Nr(m,u),[x,C]=(0,Te.useState)(t||{inscriptionOutput:null,revealTxFees:[],commitTxFee:"0",feeSelectedSat:{satBytes:0,type:b.STANDARD},canTransferAmount:"0"}),N=(0,Or.useMemoizedFn)((T,I)=>{C(E=>({...E,[T]:I}))});return Te.default.createElement(Re.Provider,{value:{signInfo:_,currencyId:e??d.currencyId,params:{...p,netWorkCoinId:u,from:m,to:a||m},lifecycle:i,feeData:x,onFeeDataChange:N}},s)}var He=es;r();n();r();n();var v=c(y()),on=c(oe()),Fe=c(pt());k();r();n();var Nt=c(y()),We=c(Xt());r();n();var Dt={root:"_root_1mbnk_1","send-page-base-container":"_send-page-base-container_1mbnk_7",sendPageBaseContainer:"_send-page-base-container_1mbnk_7","send-page-base-container__header":"_send-page-base-container__header_1mbnk_13",sendPageBaseContainerHeader:"_send-page-base-container__header_1mbnk_13","send-page-base-container__wrapper":"_send-page-base-container__wrapper_1mbnk_16",sendPageBaseContainerWrapper:"_send-page-base-container__wrapper_1mbnk_16","send-page-base-container__inner-wrapper":"_send-page-base-container__inner-wrapper_1mbnk_17",sendPageBaseContainerInnerWrapper:"_send-page-base-container__inner-wrapper_1mbnk_17","send-page-base-container__content":"_send-page-base-container__content_1mbnk_25",sendPageBaseContainerContent:"_send-page-base-container__content_1mbnk_25","send-page-base-container__footer":"_send-page-base-container__footer_1mbnk_30",sendPageBaseContainerFooter:"_send-page-base-container__footer_1mbnk_30"};function os({className:t,loading:e,slot:o={},children:i,footerActions:s,contentClassName:m}){let{header:a,footer:u,top:p}=o;return Nt.default.createElement(F.Container,{loading:e,className:(0,We.default)(Dt.root,t)},Nt.default.createElement(F.Box,{className:Dt["send-page-base-container__header"]},a),Nt.default.createElement(F.Box,{className:Dt["send-page-base-container__wrapper"]},p,Nt.default.createElement(F.Box,{className:Dt["send-page-base-container__inner-wrapper"]},Nt.default.createElement(F.Box,{className:(0,We.default)(Dt["send-page-base-container__content"],m)},i),!!s?.length&&Nt.default.createElement(lt.FooterActions,{usePortal:!0,placeholder:!0,renderNative:!0,buttonGroup:s}),u)))}var ge=os;r();n();var ze=c(y());ve();r();n();var G=c(y());k();r();n();var Pr=c(y()),Ye=c(W());ut();var wr=(t,e)=>{let o=t.coinId,i=Zo(o),s=(0,Ye.useSelector)(ee),m=(0,Ye.useSelector)(({metamask:p})=>p.currencies),a=(0,Pr.useMemo)(()=>e&&m?.find(p=>p.currencyId===e)||s,[e]),u=J(i,a?.usdToThisRate);return nr(eo,p=>{let d=yo(p,{symbol:t.symbol}),_=xo(J(p,u),{useApproximate:!1,symbol:a.symbol});return`${d}(${_})`})};Yt();ut();var Lr=({bytes:t,value:e,signInfo:o={},coinId:i,currencyId:s,onChange:m,supportDecimal:a})=>{let u=rr(),{coin:p,baseCoin:d}=qo(i,!0),[_,x]=(0,G.useState)(e?.customSatBytes),C=wr(d,s),N=f("extension_wallet_transaction_text_minute");(0,G.useEffect)(()=>{!_&&o?.normal&&x(o?.normal)},[o]);let T=(0,G.useCallback)(P=>{x(P)},[]),I=(0,G.useCallback)(()=>{m?.({customSatBytes:_,type:b.CUSTOM,satBytes:_})},[_]),E=p.localType===Wt?f("wallet_extension_transfer_unit_sat_b"):"",O=(0,G.useMemo)(()=>{let{min:P,mempoolMin:L}=o,B=L||P||0;return Vt(_,B)?f("extension_btc_minmum_alert_fee_lowerthan",{feerate:B}):""},[_,o]);return(0,G.useMemo)(()=>[b.SLOW,b.STANDARD,b.FAST,b.CUSTOM].map(P=>{switch(P){case b.SLOW:return{data:{type:b.SLOW,satBytes:o.min,estimatedTime:`${St(o.maxCost)} ${N}`},unitPrice:`${o.min} ${E}`,totalPrice:C(J(o.min,t),s),type:f(te[b.SLOW]),typeKey:b.SLOW,estimatedTime:`${St(o.maxCost)} ${N}`};case b.STANDARD:return{data:{type:b.STANDARD,satBytes:o.normal,estimatedTime:`${St(o.normalCost)} ${N}`},unitPrice:`${o.normal} ${E}`,totalPrice:C(J(o.normal,t),s),type:f(te[b.STANDARD]),typeKey:b.STANDARD,estimatedTime:`${St(o.normalCost)} ${N}`};case b.FAST:return{data:{type:b.FAST,satBytes:o.max,estimatedTime:`${St(o.minCost)} ${N}`},unitPrice:`${o.max} ${E}`,totalPrice:C(J(o.max,t),s),type:f(te[b.FAST]),typeKey:b.FAST,estimatedTime:`${St(o.minCost)} ${N}`};default:return{unitPrice:`${o.max} ${E}`,totalPrice:C(J(_,t),s),estimatedTime:u(o,_),canConfirm:!O,onConfirm:I,components:()=>G.default.createElement(Et.Number,{enableMinus:!1,precision:a?1:0,error:O,errorType:Et.TIP_TYPE.always,onChange:T,value:_,size:Et.SIZE.sm,title:E,className:"custom-network-fee__satb"})}}}),[t,o,_,a])};var rs=({value:t,coinId:e,bytes:o,signInfo:i,onChange:s,currencyId:m,onClose:a,visible:u,supportDecimal:p})=>{let d=Lr({bytes:o,value:t,coinId:e,onChange:s,signInfo:i,currencyId:m,supportDecimal:p});return ze.default.createElement(or,{feeType:t?.type,feeDataList:d?.slice(0,3),onBack:a,visible:u,custom:Qe(d),onChange:({data:_})=>{s?.(_)}})},vr=ze.default.memo(rs);Yt();r();n();var nt=c(y());Yt();k();var kr=c(pt());r();n();var M=c(y());k();r();n();var Bt={"output-panel":"_output-panel_n2hmc_1",outputPanel:"_output-panel_n2hmc_1","output-panel__content":"_output-panel__content_n2hmc_4",outputPanelContent:"_output-panel__content_n2hmc_4","output-panel__button":"_output-panel__button_n2hmc_7",outputPanelButton:"_output-panel__button_n2hmc_7","output-panel__compare":"_output-panel__compare_n2hmc_10",outputPanelCompare:"_output-panel__compare_n2hmc_10","output-panel-slider__content":"_output-panel-slider__content_n2hmc_16",outputPanelSliderContent:"_output-panel-slider__content_n2hmc_16","output-tag":"_output-tag_n2hmc_19",outputTag:"_output-tag_n2hmc_19"};var Ie=330,Ae=1e4,ns=({coinId:t,visible:e,outputValue:o,currencyId:i,onClose:s,onChange:m})=>{let[a,u]=(0,M.useState)(String(o));(0,M.useEffect)(()=>{u(String(o))},[o]),(0,M.useEffect)(()=>{e&&u(String(o))},[o,e]);let p=wt(t,a,{currencyId:i,useApproximate:!1});return M.default.createElement(qt.Action,{windowStyle:{width:"100%",maxHeight:"none",overflow:"hidden"},visible:e,onClose:s,title:f("wallet_header_title_inscription_sats"),maskClosable:!0,noTopRadius:!1,zIndex:1e3,alignBottom:!0,noContentPadding:!0},M.default.createElement(F.Box,{className:Bt["output-panel__content"]},M.default.createElement(Et.Number,{precision:0,value:a,max:Ae,min:Ie,size:Et.SIZE.xl,onChange:d=>{u(d)},suffix:M.default.createElement(S.Text,{size:S.SIZE.sm},"sats")}),M.default.createElement(S.Text,{className:Bt["output-panel__compare"],type:S.TYPE.secondary,size:S.SIZE.sm},p),M.default.createElement(F.Space,{space:4,direction:F.DIRECTION.vertical},M.default.createElement(ro,{value:a,min:Ie,max:Ae,contentClassName:Bt["output-panel-slider__content"],onChange:d=>{u(String(d))}}),M.default.createElement(F.FlexBox,{justify:"space-between"},M.default.createElement(S.Text,{type:S.TYPE.secondary,size:S.SIZE.xs},`${Ie} sats`),M.default.createElement(S.Text,{type:S.TYPE.secondary,size:S.SIZE.xs},`${Ae} sats`)))),M.default.createElement(F.Box,{className:Bt["output-panel__button"]},M.default.createElement(U,{disabled:!a||!a?.trim(),category:U.CATEGORY.fill,type:U.TYPE.highlight,size:U.SIZE.lg,block:!0,onClick:()=>{m?.(Math.min(Math.max(a,Ie),Ae)),s?.()}},f("extension_transactions_btn_confirm"))))},Mr=ns;var ss=({txType:t,currencyId:e,inscriptionsCount:o,inscriptionOutput:i,coinId:s=ct,totalInscriptionCoinAmount:m,onInscriptionOutputChange:a})=>{let[u,{toggle:p}]=(0,kr.useBoolean)(!1),d=At.gt(m,0)?m:"0",_=wt(s,d,{currencyId:e,useApproximate:!0}),x=(0,nt.useMemo)(()=>co(t),[t]);return nt.default.createElement(nt.default.Fragment,null,nt.default.createElement(ft,{clickable:t===w.RUNES_ETCH?!1:void 0,onClick:()=>{At.gt(i,0)&&p()},title:f(x)},nt.default.createElement(F.FlexBox,{align:F.ALIGN.center},`${i} sats`,!!o&&o>1&&nt.default.createElement(S.Text,{className:Bt["output-tag"]},"x",o),_)),nt.default.createElement(Mr,{coinId:s,visible:u,currencyId:e,outputValue:i,onClose:p,onChange:a}))},Dr=ss;r();n();k();var Se=c(y()),is=({coinId:t,currencyId:e,totalCoinAmount:o})=>{let i=Q(t),s=wt(t,o,{currencyId:e,useApproximate:!0});return Se.default.createElement(ft,{title:f("extension_wallet_transaction_item_inscribe_totalfee")},Se.default.createElement(S.Text,{inherit:!0,strong:700},Se.default.createElement(S.DisplayAmount,{noStyle:!0,symbol:i?.symbol,decimals:i?.decimals},o),s))},Ur=is;r();n();var Wr=c(y()),Yr=c(oe()),zr=c(pt()),Gr=c(Qn());k();r();n();k();so();r();n();var Rr=c(y());ve();so();Yt();io();ao();function as({walletId:t,utxoType:e=1,coinId:o=ct}={}){let i=re();return(0,Rr.useMemo)(()=>async({from:s,coinAmount:m,serviceCharge:a,feeRate:u})=>{let p=await Kt().getRequestHeaders({walletId:t||i,needSign:!0,currency:"usd"}),d={address:s,coinAmount:m,serviceCharge:a,utxoType:e};Ht(u);let _={coinId:o,utxoRequests:[d]};try{let{data:x}=await jt(Jt.getBTCUTXO,_,{headers:p});return x?.[0]||{}}catch(x){return{error:!0,errorResp:x}}},[o,i,e,t])}var Ee=as;Yt();ut();r();n();var $r=c(y());function ms(t){let{inscriptionOutput:e}=et(),{satBytes:o}=q(),{walletId:i,from:s,to:m,inscriptions:a,txType:u,mintType:p}=rt(),d=xr(t),_=yr();return(0,$r.useCallback)(async x=>{let C={};return u===w.RUNES_ETCH?(C={input:x.map(({txHash:I,vout:E,coinAmount:O})=>({vOut:E,txId:I,amount:O})),address:s,feePerB:o,outValue:e,inscriptions:(a||[]).map(({body:I})=>JSON.parse(I))},await _({walletId:i,address:s,tx:C,txType:u,mintType:p})):(C={commitTxPrevOutputList:x.map(({txHash:T,vout:I,coinAmount:E})=>({vOut:I,txId:T,amount:E})),commitFeeRate:o,revealFeeRate:o,inscriptionDataList:(a||[]).map(({contentType:T,body:I})=>({contentType:T,body:I})),revealOutValue:e,changeAddress:s,toAddr:m},await d({walletId:i,address:s,tx:C,txType:u}))},[s,m,a,e,o])}var he=ms;function us(t=ct){let{walletId:e,from:o,to:i,utxoType:s,inscriptions:m,txType:a,protocolId:u,mintType:p}=rt(),d=kt(),_=ye(),x=_r({address:o,coinId:t,currencyId:_,txType:a,protocolId:u}),C=he(de.CONFIRM),N=Ee({walletId:e,utxoType:s,coinId:t}),{beforePostTx:T}=br(),{inscriptionOutput:I,total:E}=et(),{totalFee:O}=bt(),P=Ft(),{satBytes:L}=q(),B=async g=>{let{commitTx:A,revealTxs:h,commitAddrs:D,commitTxFee:Z,revealTxFees:ot}=await C(g.utxoList||[]),X=await Ko(Wt,A),it=await Jo(Wt,h),yt=[X,...it],Ct={signedTx:A,fromAdr:o,serviceCharge:Z,toAdr:i||o,itemId:"commitTx",txHash:X,txType:a,extJson:JSON.stringify({protocolId:u,broadcastType:1,nftIds:[]}),walletId:e},at=h.map((gt,It)=>({signedTx:gt,fromAdr:D?.[It]||o,serviceCharge:ot?.[It],toAdr:i||o,itemId:`revealTx${It}`,txHash:it[It],dependTx:p===Qt.serial?[yt[It]]:[X],txType:a,extJson:JSON.stringify({protocolId:u,broadcastType:1,nftIds:[]}),walletId:e})),Tt=!1;if(T&&(Tt=T(Ct,at)),Tt)return{commitParams:Ct,revealParams:at,commitTx:A,revealTxs:h,commitAddrs:D,commitTxFee:Z,revealTxFees:ot,feeRate:parseInt(L,10),size:parseInt(I,10)};let H=await Kt().getRequestHeaders({walletId:e,needSign:!0,currency:"usd"});return{txIds:await fo({txList:[Ct,...at]},{headers:H}),commitTx:A,revealTxs:h,commitAddrs:D,commitTxFee:Z,revealTxFees:ot,feeRate:parseInt(L,10),size:parseInt(I,10)}},K=async()=>{let g=await N({from:o,coinAmount:mt(E,O),serviceCharge:P,feeRate:L}),A=g.utxoList||[];return await x(A,()=>{}),await B(g)};return()=>new Promise((g,A)=>{if(typeof d?.txSizeLimit=="number"&&m.length>d.txSizeLimit){let h=qt.warn({alignBottom:!1,maskClosable:!1,title:f("wallet_header_dialog_header_reminder"),text:f("wallet_info_dialog_too_much_inscription"),confirmText:f("wallet_btn_dialog_btn_cancel"),cancelText:f("wallet_bot_dialog_btn_continue"),onCancel:async()=>{try{let D=await K();g(D)}catch(D){A(D)}h.destroy()},onConfirm:()=>{A(new Error(fe)),h.destroy()}})}else(async()=>{try{let h=await K();g(h)}catch(h){A(h)}})()})}var Hr=us;var cs=t=>t?.data?.msg||t?.msg||t?.data?.originalError?.msg||f("wallet_home_toast_network_error"),ps=(t,e)=>!e&&[j.BALANCE_INSUFFICIENT,j.FEE_BALANCE_INSUFFICIENT].includes(t),ls=({txId:t,coinId:e,walletId:o,feeError:i,address:s,onConfirm:m,onCancel:a,disabled:u,addressType:p,useTipMessageFillUp:d,onFillUp:_,netWorkCoinId:x,addressCheckLoading:C=!1},N)=>{let T=(0,Yr.useHistory)(),I=Hr(x),E=tr(o,a),O=(0,zr.useMemoizedFn)(async()=>{try{await E();let g=await I();m&&await m(g)}catch(g){if(!(g?.message===fe)){let h=cs(g);no.error({title:h})}}},[m]),{loading:P,onClick:L}=zt(O),{loading:B,onClick:K}=zt(a);return(0,Wr.useMemo)(()=>{let g=a?{loading:B,actionType:Y.ACTION_TYPE.CANCEL,onClick:K}:null,A={loading:P||C,disabled:u,actionType:Y.ACTION_TYPE.CONFIRM,onClick:L};return ps(N,i)&&(g=g||{actionType:Y.ACTION_TYPE.CANCEL,onClick:()=>{T.goBack()}},d?A={actionType:Y.ACTION_TYPE.CONFIRM,btnText:f("wallet_extension_mid_textbtn_manage_utxo"),onClick:async()=>{_&&await _();let h=Gr.default.stringify({addressType:p,coinId:e},{skipEmptyString:!0,skipNull:!0}),D=h?`?${h}`:"";T.push(Io+D)}}:A={txId:t,coinId:e,address:s,walletId:o,actionType:Y.ACTION_TYPE.FILL_UP}),[g,A]},[a,B,K,P,u,L,i,N,d,T,_,p,e,t,s,o])},Vr=ls;r();n();k();r();n();var Zr=c(y());ut();function Xr(){let{totalFee:t}=bt(),{satBytes:e}=q();return Zt(Me(t,e),0)}function qr(){let t=Ft(),{satBytes:e}=q();return Zt(Me(t,e),0)}function Kr(){let{totalFee:t}=bt(),e=Ft();return(0,Zr.useMemo)(()=>mt(t,e),[t,e])}r();n();r();n();var Ot=c(y());ut();function fs(t){let{disabled:e=!1}=t||{},{walletId:o,from:i,utxoType:s,netWorkCoinId:m}=rt(),[a,u]=(0,Ot.useState)(!0),[p,d]=(0,Ot.useState)(!0),[_,x]=(0,Ot.useState)(null),[C,N]=(0,Ot.useState)([]),T=Ee({walletId:o,utxoType:s,coinId:m}),I=he(de.CAL_FEE),{satBytes:E}=q(),{total:O}=et(),P=Ce(),{totalFee:L}=bt(),B=Ft();return(0,Ot.useEffect)(()=>{!e&&(async()=>{if(!to(O,0))try{d(!0);let g=await T({from:i,coinAmount:mt(O,L),serviceCharge:B,feeRate:E});if(!g?.utxoList?.length){x(z.BALANCE_NOT_ENOUGH);return}if(g.error){let D=g.errorResp.code,Z=z.COMMON_ERROR;[z.BALANCE_NOT_ENOUGH,z.PURE_UTXO_NOT_ENOUGH].includes(D)&&(Z=D),x(Z);return}P("canTransferAmount",g.canTransferAmount||"0"),x(null);let{commitTxFee:A,revealTxFees:h}=await I(g.utxoList);N(g.utxoList),P("commitTxFee",A),P("revealTxFees",h)}catch{x(z.COMMON_ERROR),P("commitTxFee","0"),P("revealTxFees",[])}finally{u(!1),d(!1)}})()},[i,E,O,L,B,I,e]),{isInitLoading:a,isLoading:p,error:_,utxoList:C}}var Jr=fs;function ds(t){let{disabled:e=!1}=t||{},o=Kr(),{total:i}=et(),s=hr(),m=$e(),{isInitLoading:a,isLoading:u,error:p,utxoList:d}=Jr({disabled:e});return{isInitLoading:a,isLoading:u,error:p,canTransferAmount:s,fee:o,inscriptionOutput:i,feeData:m,utxoList:d}}var be=ds;var _s=()=>{let{utxoList:t,fee:e,error:o,canTransferAmount:i,isLoading:s}=be(),m=kt(),a=qr(),u=Xr(),p=At.add(a,u),d=q(),_=Ce();return{bytes:p,signInfo:m,feeError:o,selectedSat:d,feeLoading:s,networkFee:e,canTransferAmount:i,utxoListCount:t?.length||0,onFeeDataChange:_}},jr=_s;r();n();var tn=c(y());k();r();n();var xs=[w.BRC20_DEPLOY,w.BRC20_MINT,w.BRC20_INSCRIBE,w.ORDINAL_NFT,w.ORDINAL_TEXT,w.EARN_BRC30_DEPLOY,w.EARN_BRC30_APPLY,w.EARN_BRC30_REDEEM,w.EARN_BRC30_CLAIM,w.BRC30_INSCRIBE,w.RUNES_ETCH];function Qr(t){return xs.indexOf(t)>-1}var ys=({txType:t,feeError:e,isHardware:o,isMpcWallet:i,utxoListCount:s,transferReminder:m,coin:a,addressCheckError:u=""})=>(0,tn.useMemo)(()=>Qr(t)?i&&t===w.RUNES_ETCH?{type:dt.TIP_TYPE.COMMON_ERROR,message:f("extension_defi_bot_alert_mpc_not_support")}:o?{type:dt.TIP_TYPE.COMMON_ERROR,message:f("wallet_extension_top_toast_dapp_comingsoon")}:e===z.COMMON_ERROR?{type:dt.TIP_TYPE.FEE_ERROR}:e===z.BALANCE_NOT_ENOUGH?{type:_e.FEE_BALANCE_INSUFFICIENT,message:f("extension_defi_errortip_not_enough_btc_icu",{chainName:a?.chainName})}:e===z.PURE_UTXO_NOT_ENOUGH?{type:_e.BALANCE_INSUFFICIENT,message:f("extension_defi_errortip_not_enough_pure_utxo")}:s>100?{type:_e.BALANCE_INSUFFICIENT}:u?{type:dt.TIP_TYPE.COMMON_ERROR,message:u}:{message:m}:{type:dt.TIP_TYPE.COMMON_ERROR,message:f("extension_defi_bot_alert_wallet_upgrade")},[t,e,o,i,s,m,u]),en=ys;r();n();var Ge={"retina-border-basic":"_retina-border-basic_1p86s_1",retinaBorderBasic:"_retina-border-basic_1p86s_1","free-tag":"_free-tag_1p86s_29",freeTag:"_free-tag_1p86s_29",actions:"_actions_1p86s_33"};function Cs({txId:t,headerProps:e={},slot:o={},confirmButtonProps:i={},netWorkCoinId:s=ct}){let{from:m,walletId:a,txType:u}=rt(),p=Go(a),d=zo(a),[_,{toggle:x}]=(0,Fe.useBoolean)(!1),C=ye(),T=Vo()[m],{bytes:I,signInfo:E,feeError:O,selectedSat:P,feeLoading:L,networkFee:B,canTransferAmount:K,utxoListCount:g,onFeeDataChange:A}=jr(),{title:h,...D}=e,{inscriptionOutput:Z,inscriptionsCount:ot,total:X}=et(),it=(0,v.useMemo)(()=>At.add(B,X),[B,X]),yt=Q(s),{showManageUTXO:Ct}=Er(yt||{},T,!0),at=Ct&&O!==z.PURE_UTXO_NOT_ENOUGH,Tt=(0,on.useHistory)(),{addressCheckLoading:H,addressCheckError:$t}=Sr({from:m,chainIndex:yt?.chainId||mo,handleCancel:i?.onCancel||(()=>{Tt.goBack()}),method:po.INSCRIBE}),{type:gt,message:It}=en({txType:u,feeError:O,feeLoading:L,utxoListCount:g,isHardware:p,isMpcWallet:d,canTransferAmount:K,networkFee:B,totalUsedCoinAmount:it,coin:yt,addressCheckError:$t}),Xn=Vr({txId:t,walletId:a,coinId:s,addressType:T,disabled:!!gt||!!O||!!L||p||g>100||!!$t,useTipMessageFillUp:at,netWorkCoinId:s,addressCheckLoading:H,...i},gt),je=Ir(a),qn=(0,Fe.useMemoizedFn)(Le=>{A("commitTxFee","0"),A("revealTxFees",[]),A("inscriptionOutput",Le)},[]),{top:Kn,footer:Jn}=o;return v.default.createElement(ge,{slot:{header:v.default.createElement(ne,{title:h||f("extension_wallet_header_maintitle_inscribe"),...D}),footer:Jn||v.default.createElement(lt,{placeholder:!0,offsetBottom:0},v.default.createElement("div",{className:Ge.actions},v.default.createElement(dt,{type:gt||oo.TYPE.warn,address:m,message:It,coinId:s,walletId:a,fillUpAble:at}),v.default.createElement(Y,{buttonGroup:Xn})))}},Kn,v.default.createElement(ht,null,v.default.createElement(ft,{title:f("wallet_info_title_inscribe_service_fee")},v.default.createElement(S.Text,{className:Ge["free-tag"]},f("wallet_info_tag_inscribe_free_tag"))),v.default.createElement(Tr,{coinId:s,loading:L,currencyId:C,networkFee:L&&B==="0"?void 0:B,estimateFailed:!L&&!Number(B),onClick:()=>{x?.(),je({trade:"brc20",all_confirmation:"network_fee"})}}),v.default.createElement(Dr,{txType:u,currencyId:C,inscriptionsCount:ot,inscriptionOutput:Z,totalInscriptionCoinAmount:X,onInscriptionOutputChange:qn,coinId:s})),v.default.createElement(ht,null,v.default.createElement(Ur,{coinId:s,currencyId:C,totalCoinAmount:it})),v.default.createElement(ht,{bordered:!1},v.default.createElement(Cr,{address:m,walletId:a,title:f("wallet_extension_network_address_title_walletused"),onCopyCallback:()=>{je({trade:"brc20",all_confirmation:"wallet_used_address"})}})),v.default.createElement(vr,{bytes:I,currencyId:C,value:P,coinId:s,onClose:x,signInfo:E,visible:_,onChange:Le=>{A("commitTxFee","0"),A("revealTxFees",[]),A("feeSelectedSat",Le)},supportDecimal:!0}))}var Ve=Cs;r();n();var xt=c(y());k();r();n();var $=c(y()),Rt=c(W()),On=c(Xt());ve();k();r();n();var nn=c(y()),sn=c(oe()),an=c(Xt());r();n();var rn={root:"_root_ryl3e_1"};function Ts({onBack:t,onClose:e,pageIndex:o,...i}){let s=(0,sn.useHistory)(),m=()=>{t&&t(),s.goBack()},a=()=>{e&&e(),s.go(-o)};return nn.default.createElement(ne,{className:(0,an.default)(rn.root,i.className),onClose:a,onBack:m,...i})}var mn=Ts;r();n();var un=c(oe()),Ze=c(W());var cn=c(pt());function gs(t){let e=(0,un.useHistory)(),o=(0,Ze.useSelector)(Ao),i=Lt(),{coin:s}=R(),m=(0,Ze.useSelector)(So),a=ar();(0,cn.useMount)(()=>{if(!!t){if(Yo(s))e.replace(o||Co);else if(!m){let u={pathname:`${To}/${i}${go}`};a&&(u.search=`?from=${a}`),e.replace(u)}}})}var pn=gs;r();n();var gn=c(y()),In=c(W());r();n();var Pt=c(y());k();r();n();var xn=c(y());r();n();var st=c(y()),fn=c(pt()),dn=c(Xt());k();r();n();var ln={root:"_root_26a1b_1"};var Is=({coin:t={},onVisible:e,receiveOnly:o,address:i,style:s,className:m})=>{let[a,{setTrue:u,setFalse:p}]=(0,fn.useBoolean)();(0,st.useEffect)(()=>{e&&e(a)},[a]);let d=t.symbol.length>12?`${t.symbol.slice(0,12)}...`:t.symbol;return st.default.createElement(st.default.Fragment,null,st.default.createElement("div",{className:(0,dn.default)(ln.root,m),onClick:u,style:s},f("wallet_extension_placeorder_textbtn_replenish",{token:d})),st.default.createElement(Qo,{address:i,visible:a,closeCallback:p,coinId:t.coinId,receiveOnly:o}))},_n=(0,st.memo)(Is);var yn=c(W());function As(t){let e=(0,yn.useDispatch)(),o=Mt();return xn.default.createElement(_n,{address:o,...t,onVisible:s=>{e(Uo(s))}})}var Xe=As;var Ss=()=>{let{coin:t}=R(),e=se();return i=>{let s="";return i.text?s=i.text:i.key&&(s=f(i?.key,i?.args)),i?.type===j.BALANCE_INSUFFICIENT?Pt.default.createElement(Pt.default.Fragment,null,s," ",Pt.default.createElement(Xe,{coin:t,receiveOnly:!0})):i?.type===j.FEE_BALANCE_INSUFFICIENT?Pt.default.createElement(Pt.default.Fragment,null,s," ",Pt.default.createElement(Xe,{coin:e})):s}},Cn=Ss;r();n();var Tn={root:"_root_g697e_1"};function Es({renderError:t}){let e=(0,In.useSelector)(Eo),o=Cn(),i=t||o;if(!e.key)return null;let s=i(e);return gn.default.createElement("div",{className:Tn.root},s)}var An=Es;r();n();var _t=c(y());k();r();n();var Ut={container:"_container_djh56_1",totalAmount:"_totalAmount_djh56_5","totalAmount-content":"_totalAmount-content_djh56_9",totalAmountContent:"_totalAmount-content_djh56_9","totalAmount-title":"_totalAmount-title_djh56_18",totalAmountTitle:"_totalAmount-title_djh56_18","totalAmount-amount":"_totalAmount-amount_djh56_25",totalAmountAmount:"_totalAmount-amount_djh56_25"};r();n();var hs=(t,e)=>{let{coin:o}=R(),i=sr(),s=fr(),m=pe(),a=le(),p={total:s,amount:m,available:a}[t];return`${i(e||p,o,{useApproximate:!1,zero:{decimals:!1}})} ${o.symbol}`},Sn=hs;function bs(t){t||(t=""),typeof t!="string"&&(t=t.toString());let e=t?.length;return e<=20?"15px":e<=22?"14px":e<=24?"13px":"12px"}function Fs({type:t="total",title:e,maxBtnText:o,maxAmount:i,hiddenMaxButton:s,onMax:m,slot:a={},...u}){let{coin:p}=R(),d=Sn(t,i),{bottom:_}=a;return _t.default.createElement(F.Box,{className:Ut.container},_t.default.createElement(F.FlexBox,{align:F.ALIGN.center,className:Ut.totalAmount,...u},_t.default.createElement(Ue,{size:Ue.SIZE.lg,src:p?.image,text:p?.symbol}),_t.default.createElement(F.Box,{className:Ut["totalAmount-content"]},_t.default.createElement(S.Text,{type:S.TYPE.secondary,size:S.SIZE.xs,className:Ut["totalAmount-title"]},e||f("wallet_extension_send_item_total_amount")),_t.default.createElement(S.Text,{ellipsis:{tooltip:!0},className:Ut["totalAmount-amount"],style:{fontSize:bs(d)}},d)),!s&&_t.default.createElement(U,{category:U.CATEGORY.fill,type:U.TYPE.gray,size:U.SIZE.xs,onClick:m},o||f("wallet_extension_send_text_max"))),_)}var En=Fs;r();n();ut();var Ns=()=>{let t=le();return Vt(t,0)&&(t="0"),t},hn=Ns;r();n();r();n();var Bs=()=>0,bn=Bs;var Fn=bn;r();n();var Nn=c(pt());k();var Os=({loading:t,disabled:e,onClick:o,...i})=>(0,Nn.useCreation)(()=>{let s=!e&&t;return[{onClick:o,disabled:e,size:U.SIZE.lg,loading:s,type:U.TYPE.highlight,category:U.CATEGORY.fill,btnText:f("wallet_extension_send_btn_continue"),...i}]},[e,t,o,i]),Ps=({disabled:t,onClick:e,...o})=>{let i=lr(),s=ce();return Os({...o,disabled:t||s,onClick:e||i})},Bn=Ps;r();n();var qe={content:"_content_11o8q_1",totalAmountWrap:"_totalAmountWrap_11o8q_7"};function ws({isGlobalLoading:t,renderError:e,headerProps:o={},confirmButtonProps:i={},inputProps:s={},totalAmountProps:m={},slot:a={},classes:u={},checkEmpty:p=!0,inputAmount:d,customMaxAmount:_,footerActions:x}){let C=(0,Rt.useDispatch)(),{content:N}=u,{header:T,bottom:I,footer:E}=a,O=(0,$.useRef)(),P=(0,Rt.useSelector)(No),L=Lt(),B=vt(),K=(0,Rt.useSelector)(ho),g=(0,Rt.useSelector)(Fo),A=ae(),h=mr(),D=hn(),Z=_||D,{amount:ot}=Ar(),X=(0,$.useRef)(!!B),it=H=>{C(Mo(H))},yt=()=>{C(De(Z)),it(!0)},Ct=m.onMax||yt;pn(p),(0,$.useEffect)(()=>{Ht(d)||O.current?.setInputAmount(d.toString()),Ht(ot)||O.current?.setInputAmount(ot)},[d,ot]);let at=Bn(i),Tt=Fn();return $.default.createElement(ge,{loading:t,footerActions:!t&&!E&&(x||at),slot:{header:T||$.default.createElement(mn,{title:f("wallet_extension_send_title_send"),pageIndex:2,...o}),footer:!t&&E}},$.default.createElement("div",{className:(0,On.default)(N,qe.content)},$.default.createElement(jo,{ref:O,...s,autoFocus:!P,coinId:L,maximumMode:h,maximumAmount:h?Z:null,initialValue:{value:[B||"0",K||"0"],mode:g,flatCurrencyId:A},onAmountChange:([H,$t],gt)=>{C(Po($t)),C(De(H)),gt&&(it(!1),X.current=!0)},onModeChnage:H=>{C(wo(H))},onFlatChange:H=>{H&&C(ko(H.currencyId))}}),X.current&&$.default.createElement(An,{renderError:e}),$.default.createElement(lt,{usePortal:!0,offsetBottom:m?.fixBottom?80-Tt:104-Tt,className:qe.totalAmountWrap},$.default.createElement(En,{...m,onMax:()=>{Ct(),X.current=!0}})),I))}var Pn=ws;r();n();var vn=c(y()),Mn=c(W());jn();r();n();var wn=c(y());function Ls(){let{coin:t}=R(),e=vt();return(0,wn.useMemo)(()=>[{body:JSON.stringify({p:"brc-20",op:"transfer",tick:t.symbol,amt:e})}],[t.symbol,e])}var Ln=Ls;function vs({walletId:t,txSource:e,children:o}){let i=Ln(),s=ae(),m=ie(),{coin:a}=R(),u=se(),p=Mt(),d=re(),_=w.BRC20_INSCRIBE,x=(0,Mn.useSelector)(Ho),C=(T,I)=>{T.coinAmount=m,T.coinId=I?u.coinId:a.coinId,T.txSource=e||uo.NORMAL},N=(T,I)=>{T&&C(T,!0),Array.isArray(I)&&I.forEach(E=>{C(E,!1)})};return vn.default.createElement(He,{defaultFeeData:x,currencyId:s,params:{walletId:t||d,from:p,inscriptions:i,utxoType:dr.INSCRIPTION_USE_NFT_UTXO,txType:_,protocolId:a?.protocolId,netWorkCoinId:a?.baseCoinId},lifecycle:{beforePostTx:N}},o)}var Ne=vs;r();n();var Gt=c(y());var kn=c(W());function Ms(){let t=(0,kn.useDispatch)(),{isInitLoading:e,error:o,fee:i,feeData:s,canTransferAmount:m}=be();return(0,Gt.useEffect)(()=>{t($o(m))},[m]),(0,Gt.useEffect)(()=>{t(Lo(i))},[i]),(0,Gt.useEffect)(()=>{t(Wo(s))},[s]),(0,Gt.useEffect)(()=>{t(vo(!!o))},[o]),e}var Be=Ms;r();n();var Dn=c(y());ut();var Un=c(W());function Ke(){let t=pe();return(0,Dn.useCallback)(e=>ke(e,t)?{key:"extension_wallet_send_text_insufficient_balance",args:{},type:j.COMMON_ERROR}:null,[t])}function ks(){let t=(0,Un.useDispatch)(),e=ur(),o=Ke(),i=[e,o],{runErrorFns:s}=ue(i);me(s,m=>{t(Oo(m))})}var Rn=ks;r();n();var $n=c(W()),Oe=c(y());ao();io();function Ds(){let t=(0,$n.useDispatch)(),e=Mt(),{coin:o}=R(),[i,s]=(0,Oe.useState)(!0);return(0,Oe.useEffect)(()=>{(async()=>{try{if(!o.coinId)return;let a=await jt(Jt.postPendingBalanceDetail,{address:e,coinId:o.coinId});a?.data&&t(Ro(a.data.availableWithoutSpending))}finally{s(!1)}})()},[e,o.coinId]),i}var Hn=Ds;function Us({amount:t,onCancel:e,onConfirm:o,slot:i,...s}){let m=ce(),a=Be(),u=Hn(),{loading:p,onClick:d}=zt(e),_=(0,xt.useMemo)(()=>{let x=null;return typeof e=="function"&&(x={loading:p,actionType:Y.ACTION_TYPE.CANCEL,onClick:d}),[x,{actionType:Y.ACTION_TYPE.CONFIRM,onClick:o,disabled:m,loading:a,btnText:f("wallet_extension_send_btn_continue")}]},[e,o,m,a,p,d]);return Rn(),xt.default.createElement(Pn,{...s,inputAmount:t,isGlobalLoading:u,slot:{...i||{},footer:xt.default.createElement(lt,{usePortal:!0,placeholder:!0,offsetBottom:0},xt.default.createElement(Y,{buttonGroup:_}))},checkEmpty:!1,headerProps:{title:f("extension_wallet_header_maintitle_inscribe"),...s.headerProps||{}},totalAmountProps:{...s?.totalAmountProps||{},title:f("extension_defi_bot_textarea_inscribe_balance"),type:"amount"},inputProps:{...s.inputProps||{},disabled:{input:!1,switch:!0}}})}function Rs({walletId:t,...e}){return xt.default.createElement(Ne,{walletId:t},xt.default.createElement(Us,{...e}))}var af=Rs;r();n();var V=c(y()),Vn=c(W());k();r();n();var Pe=c(y()),Yn=c(pt());k();r();n();var Wn={"preview-json":"_preview-json_xaani_1",previewJson:"_preview-json_xaani_1"};var $s=({coinId:t,amount:e})=>{let o=Q(t),{loading:i,data:s}=(0,Yn.useRequest)(async()=>{let m={op:"transfer",amount:e,tick:o.symbol};return(await _o(m))?.brcJson||""});return Pe.default.createElement(ft,{title:f("extension_wallet_transaction_item_inscribe_preview")},Pe.default.createElement(F.Spin,{loading:i},Pe.default.createElement(S.Text,{className:Wn["preview-json"]},s)))},zn=$s;r();n();var Je=c(y()),we=c(W());function Hs(t){let e=(0,we.useSelector)(bo);return(0,Je.useCallback)(()=>e?{key:"extension_wallet_btc_error_notif_insufficient_btc_icu",args:{chainName:t?.chainName},type:j.FEE_BALANCE_INSUFFICIENT}:null,[e,t])}function Ws(){let t=Ke();return(0,Je.useCallback)(e=>{let o=t(e);return o?{...o,highlight:cr.AMOUNT}:null},[t])}function Ys(t,e){let o=(0,we.useDispatch)(),i=Q(e),s=Hs(i),m=pr(),a=Ws(),u=[s,m,a],{runErrorFns:p}=ue(u);me(p,d=>{o(Do(d))},t)}var Gn=Ys;function zs({headerProps:t={},onCancel:e,onConfirm:o,walletId:i,addressCheckRet:s={}}){let m=(0,Vn.useDispatch)(),a=vt(),u=Lt(),[,p]=Xo(u),d=ie(),_=Be(),x=(0,V.useCallback)(async()=>{await m(Bo(!1))},[m]);return Gn(_,u),V.default.createElement(Ve,{addressCheckRet:s,walletId:i,slot:{top:V.default.createElement(V.default.Fragment,null,V.default.createElement(ht,null,V.default.createElement(gr,{summaryList:[{coinId:u,coinAmount:d}],title:f("extension_wallet_transaction_item_inscribe")})),V.default.createElement(ht,null,V.default.createElement(zn,{coinId:u,amount:a})))},headerProps:t,confirmButtonProps:{onCancel:e,onConfirm:o,onFillUp:x},netWorkCoinId:p?.coinId})}function Gs({txSource:t,walletId:e,...o}){return V.default.createElement(Ne,{txSource:t,walletId:e},V.default.createElement(zs,{walletId:e,...o}))}var Xf=Gs;r();n();var Zn=c(y());function Vs({children:t,...e}){return Zn.default.createElement(ir.Provider,{value:e},t)}var Qf=Vs;export{ge as a,mn as b,pn as c,Xe as d,Os as e,Pn as f,Ee as g,vr as h,rt as i,Ve as j,He as k,af as l,Xf as m,Qf as n};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-APDYOFZ2.js.map
