import"./chunk-O2YW3UOK.js";import{a as It}from"./chunk-WZ42NCZB.js";import{a as xt}from"./chunk-OIBIIFJS.js";import"./chunk-PESX4JIQ.js";import{a as yt}from"./chunk-224TCEMU.js";import{a as dt}from"./chunk-TTIQ7D3T.js";import{a as Q,b as X,d as $}from"./chunk-SRCBMK3B.js";import{a as J}from"./chunk-S7NLB5XS.js";import{a as _t}from"./chunk-3CTIGV4T.js";import"./chunk-UIZERJWY.js";import"./chunk-N4CUQAO7.js";import"./chunk-Q76QXAWY.js";import{a as ft}from"./chunk-ZV5BZTW2.js";import{d as lt,l as mt}from"./chunk-XKL64FTO.js";import"./chunk-Q4YTGP2G.js";import"./chunk-ITY22AD4.js";import"./chunk-B3JSNQIV.js";import{Ya as pt}from"./chunk-YALUYHLV.js";import"./chunk-ARWSGU73.js";import{o as Gt}from"./chunk-5QMHGZLF.js";import{ec as Rt,yb as ct}from"./chunk-HPWCPLRR.js";import"./chunk-TSTPZ3JM.js";import{a as Kt}from"./chunk-ON6S2DB7.js";import"./chunk-SZD6WTBQ.js";import"./chunk-ASR4HLU7.js";import"./chunk-ANIUN6US.js";import"./chunk-3DZ7WRLL.js";import{d as at,f as Wt}from"./chunk-DEOJU4Z3.js";import{ma as ut}from"./chunk-N2BCRNDB.js";import"./chunk-LNOPECCQ.js";import"./chunk-CB7FOZNP.js";import{c as m}from"./chunk-43VURGIT.js";import"./chunk-TM67VPZU.js";import"./chunk-VW6OQNWT.js";import"./chunk-PUSMMCUD.js";import{R as j,z as k}from"./chunk-UWJLNJLY.js";import"./chunk-VRY2ADKE.js";import"./chunk-5U7FO2PW.js";import"./chunk-PDUOSATP.js";import{la as Z,oa as st,ra as Dt}from"./chunk-XDY6V34Y.js";import"./chunk-YJFNO57I.js";import"./chunk-DZ6CTC22.js";import{$ as it,W as nt,c as Ot,ea as T}from"./chunk-JT3LNHPY.js";import"./chunk-47UWF72W.js";import{b as P}from"./chunk-JWYCKY2V.js";import"./chunk-G2266BV2.js";import"./chunk-L4PAIYPH.js";import"./chunk-UT7LJPKF.js";import"./chunk-AFZ6A2B3.js";import"./chunk-VVPY7ZA7.js";import"./chunk-KUW5VATV.js";import"./chunk-BNAVWOJ2.js";import"./chunk-IG2Q5ALZ.js";import"./chunk-WOMUNWBT.js";import"./chunk-7U3DN5ZD.js";import"./chunk-QYVQBXDG.js";import"./chunk-7D4PUIEN.js";import"./chunk-7QO4TZYQ.js";import"./chunk-FF4LY6PE.js";import"./chunk-76KCDJDG.js";import"./chunk-YDUDQP2P.js";import"./chunk-PGPFV4JQ.js";import"./chunk-MIBHDVGP.js";import"./chunk-7VFUX7IX.js";import"./chunk-XLF4LAH2.js";import"./chunk-ONKZ57T6.js";import"./chunk-ZC7Q7LCH.js";import{f as x,h as y,o as r,q as o}from"./chunk-6KXF36WM.js";r();o();var B=x(P());r();o();var F=x(P());var ht=x(Ot());r();o();r();o();var S={root:"_root_na3xe_1",icon:"_icon_na3xe_12",loading:"_loading_na3xe_16",finished:"_finished_na3xe_22",failed:"_failed_na3xe_25"};var gt=(e,t)=>()=>F.default.createElement(nt,{className:(0,ht.default)(e,S.icon,t)}),Ht=gt("okds-success-circle",S.finished),Mt=gt("okx-wallet-plugin-warning-circle",S.failed),zt=()=>F.default.createElement(it,{loaderClassName:S.loading}),Ut=()=>null,Vt={[0]:Ut,[1]:zt,[2]:Ht,[3]:Mt},wt=({status:e})=>{let t=Vt[e];return F.default.createElement(m.Box,{className:S.root},F.default.createElement(t,null))};r();o();var Tt=x(P());j();r();o();var kt={root:"_root_mrqdw_1"};var bt=({status:e,success:t=0,failed:s=0,duplicated:i=0})=>{let a={[0]:null,[1]:{key:"wallet_extension_private_key_title_importing_private_key",params:{}},[2]:{key:s>0||i>0?"wallet_extension_private_key_title_num_imports_successful":"wallet_extension_private_key_title_import_successful",params:{num:t}},[3]:{key:"wallet_extension_private_key_title_import_failed",params:{}}}[e],l=a?k(a.key,a.params):"";return l?Tt.default.createElement(m.Box,{className:kt.root},l):null};r();o();var O=x(P());j();r();o();var D={root:"_root_a49x9_1",item:"_item_a49x9_8",retry:"_retry_a49x9_15",divider:"_divider_a49x9_26"};function Yt({status:e,total:t=0,success:s=0,failed:i=0,duplicated:u=0}){let a={importing:{key:"wallet_extension_private_key_text_importing_num_entries",params:{num:s},retry:!1},success:{key:"wallet_extension_private_key_text_num_entries_imported",params:{num:s},retry:!1},duplicated:{key:"wallet_extension_private_key_duplicate_imports",params:{num:u},retry:!1},failed:{key:"wallet_extension_private_key_text_num_failed_entries",params:{num:i},retry:i>0}};return{items:{[0]:[],[1]:[a.importing],[2]:[s===t?a.success:void 0,u>0?a.duplicated:void 0,i>0?a.failed:void 0].filter(Boolean),[3]:[u>0?a.duplicated:void 0,i>0?a.failed:void 0].filter(Boolean)}[e]}}var vt=({status:e,total:t,success:s,failed:i,duplicated:u,onRetry:a})=>{let{items:l=[]}=Yt({status:e,total:t,success:s,failed:i,duplicated:u});return O.default.createElement(m.Box,{className:D.root},l.map((b,h)=>{let{key:g,params:_,retry:v}=b;return O.default.createElement(m.Box,{key:h,className:D.item},k(g,_),h===0&&l.length>1&&O.default.createElement(m.Box,{className:D.divider}),v&&O.default.createElement(m.Box,{onClick:a,className:D.retry},k("wallet_extension_private_key_btn_try_again")))}))};r();o();var L=x(P());j();r();o();var M={root:"_root_1ir3w_1",actions:"_actions_1ir3w_10",tip:"_tip_1ir3w_15"};var Nt=({status:e,onCancel:t,onComplete:s})=>{let i=e===1,u=e===0;return L.default.createElement(m.Box,{className:M.root},L.default.createElement(m.Box,{className:M.actions},i?L.default.createElement(T,{category:T.CATEGORY.outline,type:T.TYPE.primary,onClick:t,size:T.SIZE.xl,block:!0},k("wallet_extension_private_key_btn_stop_import")):!u&&L.default.createElement(T,{category:T.CATEGORY.fill,type:T.TYPE.highlight,size:T.SIZE.xl,onClick:s,block:!0},k("wallet_extension_private_key_btn_ok"))),i&&L.default.createElement(m.Box,{className:M.tip},k("wallet_extension_private_key_text_dont_close_page")))};r();o();var n=x(P()),z=x(Rt()),Bt=x(Kt()),Et=x(Gt());Dt();r();o();var I={uninitialized:0,initialized:1,waiting:2,paused:3,working:4,canceled:5,unknown:6},W=class{constructor(t){y(this,"status",I.uninitialized);y(this,"nextInfo",null);y(this,"cb",null);y(this,"args",[]);y(this,"next",(...t)=>{[I.waiting,I.canceled,I.paused].includes(this.status)||!this.cb||(t.length>0&&(this.args=t),this.nextInfo=this.generator(this.execute,...this.args),this.status=I.waiting,this.nextInfo.execute())});y(this,"execute",()=>{this.status=I.working,this.cb?.(this.next)});y(this,"cancel",()=>{this.status=I.canceled,this.nextInfo.cancel?.(),this.cb=void 0});y(this,"pause",()=>{this.status=I.paused,this.nextInfo.pause?.()});y(this,"start",(t,...s)=>{this.cb=t,s.length>0&&(this.args=s),this.next()});y(this,"continue",()=>{this.status=I.initialized,this.next()});this.generator=t,this.status=I.initialized,this.nextInfo=null,this.cb=null}};Wt();function qt(){let e=t=>({execute:t,cancel:()=>{},start:()=>{}});return new W(e)}var tt=e=>t=>t+e;function Zt(){let e=(0,z.useDispatch)(),{value:t}=Q(),{value:s}=X(),{value:i}=$(),u=t.filter(c=>c.value).map(c=>c.value),[a,l]=(0,n.useState)(0),b=(0,n.useRef)(u),h=(0,n.useRef)([]),g=(0,n.useRef)([]),_=(0,n.useRef)([]),v=(0,n.useRef)(!1),A=(0,n.useRef)(),[p]=(0,n.useState)(u.length),[w,C]=(0,n.useState)(0),[E,G]=(0,n.useState)(0),[N,R]=(0,n.useState)(0),d=(0,n.useRef)(0),U=p-w,et=c=>c>0,Lt=(0,z.useSelector)(ct),rt=(0,n.useRef)(Lt);(0,n.useEffect)(()=>{p<=0||(w===p&&l(2),(E===p||N===p||E+N===p)&&l(3))},[E,w,N,p]);let V=async()=>{if(_.current.length===0)return;let c=[..._.current];_.current=[];try{await at().createWalletsToServer(c,ut.PRIVATE_KEY)}catch{}},At=c=>{_.current.length>=10&&V(),c===d.current&&V()},ot=c=>{!et(c)||(l(1),A.current=qt(),A.current.start(async Ct=>{if(et(c)&&c>d.current){let K=b.current[d.current],Ft=lt({privateKey:K,baseChains:[s]},{noticeBackend:!1}),Y;try{if(v.current=!0,rt.current)Y=await e(Ft);else{let q=mt(i,{privateKey:K,baseChains:[s]},{noticeBackend:!1});Y=await e(q),await e(ft()),rt.current=!0}_.current.push(Y?.walletId),await J(200),C(tt(1)),h.current.push(K)}catch(q){q?.message===yt?R(tt(1)):g.current.push(K)}finally{v.current=!1,d.current=tt(1)(d.current),At(c),Ct()}}else l(2)}))};return{start:()=>{w>0||(d.current=0,ot(p))},cancel:async()=>{for(l(2),A.current?.cancel();v.current;)await J(100);V();let c=st(b.current,[...h.current,...g.current]);G(Z(c).length+g.current.length),b.current=Z(c),h.current=[],g.current=[]},retry:()=>{U>0&&(d.current=0,G(0),R(0),ot(U))},failed:E,success:w,total:p,duplicated:N,remain:U,status:a}}var Pt=()=>{let e=(0,Bt.useHistory)(),t=xt(),{value:s,setValue:i}=Q(),{value:u,setValue:a}=X(),{setValue:l}=$();(!s.filter(d=>d.value).map(d=>d.value).length||!u)&&e.replace(pt);let{remainAccountAmount:h}=_t(),g=(0,n.useRef)(!1),{start:_,cancel:v,retry:A,success:p,failed:w,total:C,duplicated:E,status:G}=Zt(),N=async()=>{i([{id:Date.now(),show:!1,value:"",error:!1}]),a(""),l(""),await dt()},R=async()=>{await N(),await t()};return(0,n.useEffect)(()=>{!g.current&&h>0&&p+w<C&&(_(),g.current=!0)},[w,h,_,p,C]),(0,Et.useUnmount)(async()=>{await N()}),{start:_,cancel:v,retry:A,complete:R,success:p,failed:w,total:C,duplicated:E,status:G}};r();o();var St={root:"_root_80chm_1"};var Fr=()=>{let{status:e,success:t,failed:s,total:i,duplicated:u,cancel:a,retry:l,complete:b}=Pt();return B.default.createElement(It,null,B.default.createElement(m.Box,{className:St.root},B.default.createElement(wt,{status:e}),B.default.createElement(bt,{status:e,success:t,failed:s,duplicated:u}),B.default.createElement(vt,{status:e,total:i,success:t,failed:s,duplicated:u,onRetry:l}),B.default.createElement(Nt,{status:e,onCancel:a,onComplete:b})))};export{Fr as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=Confirm-PYB747OV.js.map
