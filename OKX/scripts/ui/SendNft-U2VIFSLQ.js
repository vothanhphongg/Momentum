import{a as ln}from"./chunk-PJEPGOOI.js";import{a as sn}from"./chunk-BTPOS4L6.js";import{a as an}from"./chunk-LF7APX7V.js";import{a as Le,b as mn}from"./chunk-LXC7O5XO.js";import"./chunk-7RP5AG3D.js";import{a as cn}from"./chunk-DJ522E4U.js";import"./chunk-F6DRZBXE.js";import"./chunk-ZJVF5RSO.js";import{a as rn}from"./chunk-FEDG7HWP.js";import"./chunk-3CVTSTBR.js";import{a as Xo}from"./chunk-EVRKRU7I.js";import"./chunk-KQDMYE3F.js";import"./chunk-SQ2BNI3O.js";import"./chunk-PWLZXA4M.js";import"./chunk-BLGJS4OD.js";import"./chunk-IGYAABP7.js";import{a as Jo,d as pe}from"./chunk-RYRQK4MH.js";import{e as nn}from"./chunk-EHKSYXXT.js";import"./chunk-TOV4UWR3.js";import"./chunk-BDM6XPIF.js";import{a as qo}from"./chunk-MDL52WR7.js";import"./chunk-PSDESO5W.js";import"./chunk-VOOXQWRX.js";import"./chunk-HOU3VS5H.js";import"./chunk-SQDIO2NL.js";import{a as Mt,c as $o,d as yt,e as zo}from"./chunk-TISF4HQJ.js";import"./chunk-IP7VSGCS.js";import"./chunk-XYDICNP3.js";import"./chunk-ALLM2Z34.js";import"./chunk-QXPTHK7Q.js";import{B as Ko,a as de}from"./chunk-2LCPVMSO.js";import"./chunk-Q57GWOMY.js";import{a as jo,e as Qo,f as Ro,g as tn,i as en}from"./chunk-7C3BTQYU.js";import{r as Zo}from"./chunk-3XTUMVWB.js";import"./chunk-MGYCOFIC.js";import"./chunk-6THUPAMO.js";import"./chunk-FK5ARFJK.js";import"./chunk-6Y7SZIB7.js";import"./chunk-VVYJA72I.js";import{a as _e}from"./chunk-OWWFH26C.js";import{d as Yo,f as fe,g as Vo}from"./chunk-MNZIO3NP.js";import"./chunk-HEFTA5OH.js";import"./chunk-S7NLB5XS.js";import"./chunk-UUWJWUOY.js";import{a as on}from"./chunk-7CC6X6YX.js";import"./chunk-JAGKSBYF.js";import"./chunk-CR2CPF4X.js";import"./chunk-HKZGONPS.js";import"./chunk-IIAVVYHZ.js";import"./chunk-TSTKPLAO.js";import"./chunk-52XLG23J.js";import{a as kt}from"./chunk-MXWU6HV7.js";import"./chunk-EEFD5KZC.js";import"./chunk-73ZHJYCP.js";import"./chunk-3NSLXJYR.js";import"./chunk-ENPNPH37.js";import"./chunk-5QJIR6ZJ.js";import"./chunk-H6SNSZIS.js";import"./chunk-YWECPG37.js";import"./chunk-AXJECT36.js";import"./chunk-5BIOTNBS.js";import"./chunk-R5SMHBLJ.js";import"./chunk-IY4RYRL6.js";import"./chunk-4OAEJJK5.js";import"./chunk-34VLVCKN.js";import"./chunk-J4ZKBKEJ.js";import"./chunk-TFJRUJHH.js";import"./chunk-7NMUCCUG.js";import"./chunk-YF3DWJDS.js";import"./chunk-RH4ISAHA.js";import"./chunk-ECQND2NK.js";import"./chunk-W3L3YTJO.js";import"./chunk-M5NI6HPE.js";import"./chunk-YQHUKBMA.js";import"./chunk-VM2NMLPX.js";import"./chunk-YP7CHBKG.js";import"./chunk-FNXLAYUB.js";import"./chunk-PQK3LXXN.js";import"./chunk-FTRHGHDS.js";import"./chunk-XT3EOPTE.js";import"./chunk-A6Z53EN6.js";import"./chunk-LL63GZNI.js";import"./chunk-M7CL2K7X.js";import"./chunk-W2CTJYFJ.js";import"./chunk-XUKVTAH5.js";import"./chunk-5OJTPISL.js";import"./chunk-7UPVX2FL.js";import"./chunk-BSFXZ46S.js";import"./chunk-ZMCTBWUY.js";import"./chunk-UMGTYP2Z.js";import"./chunk-DTLEDHZZ.js";import"./chunk-5F6JALEN.js";import"./chunk-HWGRDY67.js";import"./chunk-V7MKKAGW.js";import"./chunk-SKMCCAGC.js";import"./chunk-LR7KSTP2.js";import"./chunk-QCP7SXMX.js";import"./chunk-W23ABSXX.js";import"./chunk-FOF22X4F.js";import"./chunk-P4EMG7RN.js";import"./chunk-BVDJNUOM.js";import"./chunk-7B5UI77E.js";import{e as Mo}from"./chunk-R6X7EOIE.js";import"./chunk-MKEYCSLA.js";import"./chunk-4EFZXPDV.js";import"./chunk-4KODREVA.js";import"./chunk-6UWGBJGT.js";import{j as ce}from"./chunk-G4AVWXHJ.js";import"./chunk-76CRIMII.js";import"./chunk-F7VSWGDW.js";import"./chunk-MKSCYWSV.js";import{oa as Po}from"./chunk-KLLSVAFY.js";import"./chunk-MBHGLWZJ.js";import"./chunk-QZO7W5WD.js";import"./chunk-AKE54ZCC.js";import{b as Ot,c as Lo,d as Go,e as De,f as O,g as F,h as it,i as mt,j as ie,k as Bo,l as Ft,m as me,n as Wo}from"./chunk-27LUWCHG.js";import"./chunk-EHZWM44P.js";import"./chunk-K6STDTUY.js";import{a as Uo}from"./chunk-A57OTXBP.js";import"./chunk-YJQGXXOQ.js";import"./chunk-HTLOGWI7.js";import"./chunk-6SEP5B7P.js";import"./chunk-FHKOH5E6.js";import"./chunk-NTQ2YVDA.js";import"./chunk-KKG4PJ6O.js";import{a as wt,c as Do}from"./chunk-EPWGNYZZ.js";import"./chunk-DZLXEJHX.js";import"./chunk-7SRLIN7D.js";import"./chunk-AW5NL3JM.js";import"./chunk-RI2WZ5PA.js";import"./chunk-YIAOHVF5.js";import"./chunk-KBS3PMLQ.js";import"./chunk-7GKX3YKG.js";import"./chunk-7HFBMBFB.js";import"./chunk-TJCPJQIM.js";import"./chunk-ZTAZ2272.js";import"./chunk-IRMYAC6R.js";import"./chunk-Q76QXAWY.js";import"./chunk-THSNJ5WU.js";import"./chunk-MRB2XFLQ.js";import"./chunk-65AJJVJY.js";import"./chunk-PDC447BO.js";import"./chunk-JI6FOZGR.js";import"./chunk-JCM7SRK2.js";import{k as St}from"./chunk-UBFC7TLG.js";import{a as Ho}from"./chunk-PTD7UCOR.js";import"./chunk-Q4YTGP2G.js";import"./chunk-ETJEH7T4.js";import"./chunk-LLZAOPDB.js";import{a as ct}from"./chunk-V3IFYKWM.js";import"./chunk-EWTTD4DL.js";import"./chunk-Y2TPPS4H.js";import"./chunk-ITY22AD4.js";import"./chunk-E2JYOUYE.js";import"./chunk-B3JSNQIV.js";import{a as Y,n as ae,o as se}from"./chunk-YALUYHLV.js";import{e as ko}from"./chunk-I3CPAVOC.js";import{a as kr}from"./chunk-ARWSGU73.js";import"./chunk-CZ2ZBAZV.js";import{o as st}from"./chunk-5QMHGZLF.js";import{Bb as bo,C as tt,Cb as Fo,Eb as At,F as ho,Gb as re,H as ne,S as To,V as vo,ba as Io,ca as Co,cb as Ee,ea as Ao,ec as E,ka as So,oa as ke,vb as at}from"./chunk-HPWCPLRR.js";import"./chunk-O6ZBO5JF.js";import"./chunk-TSTPZ3JM.js";import"./chunk-D2LKUI4F.js";import{a as lt}from"./chunk-ON6S2DB7.js";import"./chunk-SZD6WTBQ.js";import"./chunk-ASR4HLU7.js";import"./chunk-ANIUN6US.js";import"./chunk-3DZ7WRLL.js";import{d as Rt,f as no}from"./chunk-DEOJU4Z3.js";import"./chunk-PLIIQKFY.js";import"./chunk-6BXYJZHH.js";import"./chunk-CCEMKRO6.js";import{a as bt,b as et}from"./chunk-2HSCH6R3.js";import"./chunk-CWNIM6RS.js";import"./chunk-NNAD25BL.js";import"./chunk-XV444F26.js";import{aa as yo,ba as No,h as xo,q as go,v as wo,x as gt}from"./chunk-N2BCRNDB.js";import"./chunk-RTFE54S3.js";import"./chunk-GCQ4H2BA.js";import{k as Eo}from"./chunk-JGEHAFTO.js";import{a as le}from"./chunk-UVFOW4HH.js";import{g as Pt}from"./chunk-LNOPECCQ.js";import"./chunk-CB7FOZNP.js";import{c as Oo}from"./chunk-43VURGIT.js";import{Cc as ee,Fa as ao,Ga as so,I as rt,Ia as io,J as Jt,Jc as _o,K as qt,Lc as po,Na as mo,Nc as uo,O as Fe,Oc as Ct,P as qe,Q as Xe,Qc as R,Sb as co,Sc as oe,T as Qe,X as Gt,Z as Re,ba as to,bd as Z,fa as Xt,ha as X,ic as fo,qb as lo,rc as te,rd as Wt,ya as Bt,za as ro}from"./chunk-TM67VPZU.js";import"./chunk-VW6OQNWT.js";import{A as Pe,G as W,d as Qt,q as xt}from"./chunk-PUSMMCUD.js";import{R as H,o as jt,z as i}from"./chunk-UWJLNJLY.js";import"./chunk-VRY2ADKE.js";import"./chunk-VWEB6W6G.js";import"./chunk-5U7FO2PW.js";import"./chunk-B7EGZO4E.js";import"./chunk-PDUOSATP.js";import"./chunk-XDY6V34Y.js";import"./chunk-YJFNO57I.js";import"./chunk-DZ6CTC22.js";import{$ as oo,W as eo,c as Q,ea as v}from"./chunk-JT3LNHPY.js";import"./chunk-47UWF72W.js";import{b as S}from"./chunk-JWYCKY2V.js";import"./chunk-G2266BV2.js";import"./chunk-L4PAIYPH.js";import"./chunk-UT7LJPKF.js";import"./chunk-AFZ6A2B3.js";import"./chunk-VVPY7ZA7.js";import"./chunk-KUW5VATV.js";import"./chunk-BNAVWOJ2.js";import"./chunk-IG2Q5ALZ.js";import"./chunk-WOMUNWBT.js";import"./chunk-QNGB57GN.js";import"./chunk-NM2PDVBD.js";import"./chunk-F6PXOVYL.js";import"./chunk-324EPGNQ.js";import"./chunk-5GFHI4AK.js";import"./chunk-QYVQBXDG.js";import"./chunk-7D4PUIEN.js";import"./chunk-IWVM7XL6.js";import"./chunk-7QO4TZYQ.js";import"./chunk-FF4LY6PE.js";import"./chunk-76KCDJDG.js";import"./chunk-YDUDQP2P.js";import"./chunk-PGPFV4JQ.js";import"./chunk-MIBHDVGP.js";import"./chunk-7VFUX7IX.js";import"./chunk-XLF4LAH2.js";import"./chunk-ONKZ57T6.js";import"./chunk-ZC7Q7LCH.js";import{f as m,o as a,q as s}from"./chunk-6KXF36WM.js";a();s();var Ie=m(S()),Tt=m(lt()),yr=m(st());var Nr=m(E());a();s();var Yt=m(S()),vn=m(E()),In=m(lt()),Cn=m(st());H();a();s();var Ht=m(S()),fn=m(E());a();s();var Ut={"metax-send-nft-page":"_metax-send-nft-page_1fw24_1",metaxSendNftPage:"_metax-send-nft-page_1fw24_1","metax-send-nft-page-content":"_metax-send-nft-page-content_1fw24_9",metaxSendNftPageContent:"_metax-send-nft-page-content_1fw24_9","metax-send-nft-page-content-main":"_metax-send-nft-page-content-main_1fw24_17",metaxSendNftPageContentMain:"_metax-send-nft-page-content-main_1fw24_17"};var Er=({title:t="",children:e,onBack:o=null,onClose:n=null,nav:r=null,loading:l,pageName:f})=>{let c=(0,fn.useSelector)(F);return Ht.default.createElement(Oo.Container,{loading:l,className:`${Ut.metaxSendNftPage} main-container ${f==="confirmDetail"&&c?.chain==0?"metax-send-btc-page":""}`},!r&&Ht.default.createElement(Ho,{title:t,onClose:n,onBack:o,closeable:!!n,className:f==="confirmDetail"&&c?.chain==0?"metax-send-btc-page-nav":""}),r,Ht.default.createElement("div",{className:`${Ut.metaxSendNftPageContent} ${f==="confirmDetail"&&c?.chain==0?Ut.metaxSendBtcContent:""}`},c&&Ht.default.createElement("div",{className:Ut.metaxSendNftPageContentMain},e)))},ue=Er;a();s();var $=m(S()),xe=m(E()),Be=m(st());H();a();s();oe();var _n=async(t,e,o)=>{let n="",{coinId:r,baseCoinId:l}=o;return t?((r===Ct||l===Ct)&&!await Ro(t)||(ne({coinId:r})||ne({coinId:l}))&&!(await tn(t)).isValid||(r===R||l===R)&&!await Qo(t)||o.coinId!==Ct&&o.coinId!==R&&!ne(o)&&!en(t,{allowNonPrefixed:!1}))&&(n="wallet_manage_crypto_errortip_invalid_address_tips"):n="wallet_transfer_errortip_receive_address_empty",n},dn=({amount:t,balance:e,t:o})=>t==="0"?o("wallet_extension_nft_toast_input_amount_no0"):t?t>e?o("wallet_extension_nft_toast_input_amount_no_greater",{max_amount:e}):"":o("wallet_extension_nft_toast_input_transfer_amount");a();s();var G=m(S()),yn=m(lt()),Nn=m(Q());H();a();s();var Ge=m(S());var Dr=({disabled:t=!1,buttonText:e,nextJump:o=()=>{}})=>{let n=()=>{t||o&&o()};return Ge.default.createElement(ct.FooterActions,{usePortal:!0},Ge.default.createElement(v,{block:!0,category:v.CATEGORY.fill,type:v.TYPE.highlight,size:v.SIZE.lg,onClick:n,disabled:t},e))},pn=Dr;a();s();var M={"metax-send-nft-form--hidden":"_metax-send-nft-form--hidden_od7wm_1",metaxSendNftFormHidden:"_metax-send-nft-form--hidden_od7wm_1","metax-send-nft-form__alert":"_metax-send-nft-form__alert_od7wm_4",metaxSendNftFormAlert:"_metax-send-nft-form__alert_od7wm_4","metax-send-nft-form__row":"_metax-send-nft-form__row_od7wm_7",metaxSendNftFormRow:"_metax-send-nft-form__row_od7wm_7","metax-send-nft-form__row__max":"_metax-send-nft-form__row__max_od7wm_10",metaxSendNftFormRowMax:"_metax-send-nft-form__row__max_od7wm_10","metax-send-nft-form__row__tip":"_metax-send-nft-form__row__tip_od7wm_16",metaxSendNftFormRowTip:"_metax-send-nft-form__row__tip_od7wm_16","metax-send-nft-form__row__max-amount":"_metax-send-nft-form__row__max-amount_od7wm_23",metaxSendNftFormRowMaxAmount:"_metax-send-nft-form__row__max-amount_od7wm_23","metax-send-nft-form__row__btn-max":"_metax-send-nft-form__row__btn-max_od7wm_29",metaxSendNftFormRowBtnMax:"_metax-send-nft-form__row__btn-max_od7wm_29","metax-send-nft-form__row__content":"_metax-send-nft-form__row__content_od7wm_42",metaxSendNftFormRowContent:"_metax-send-nft-form__row__content_od7wm_42","metax-send-nft-form__row__content--pointer":"_metax-send-nft-form__row__content--pointer_od7wm_51",metaxSendNftFormRowContentPointer:"_metax-send-nft-form__row__content--pointer_od7wm_51","metax-send-nft-form__row__content__title":"_metax-send-nft-form__row__content__title_od7wm_55",metaxSendNftFormRowContentTitle:"_metax-send-nft-form__row__content__title_od7wm_55","metax-send-nft-form__row__content__center":"_metax-send-nft-form__row__content__center_od7wm_60",metaxSendNftFormRowContentCenter:"_metax-send-nft-form__row__content__center_od7wm_60","metax-send-nft-form__row__content__narrow":"_metax-send-nft-form__row__content__narrow_od7wm_70",metaxSendNftFormRowContentNarrow:"_metax-send-nft-form__row__content__narrow_od7wm_70","metax-send-nft-form__waring__tips":"_metax-send-nft-form__waring__tips_od7wm_75",metaxSendNftFormWaringTips:"_metax-send-nft-form__waring__tips_od7wm_75"};a();s();var un=m(S()),xn=m(E()),gn=m(st());te();ro();mo();var Lr=0,Gr=()=>{let{chain:t,tokenId:e,accountAddress:o,tokenStandard:n}=(0,xn.useSelector)(F),{loading:r,data:l,error:f}=(0,gn.useRequest)(async()=>{let _={chain:t,walletAddress:o,inscriptionIds:[e],tokenStandard:Do[n]},{data:d}=await io(Bt.postBtcNftStatus,_);return d?.assetStatusList||[]},{ready:t===Lr&&[wt.Ordinals,wt.ATOMICAL].includes(n)||t===fo&&[wt.FractalOrdinals].includes(n)}),c=(0,un.useMemo)(()=>[wt.ATOMICAL,wt.Ordinals,wt.FractalOrdinals].includes(n)&&l?.some(({unavailable:_})=>Number(_)===1)?1:0,[l,n]);return[r,c,f]},wn=Gr;var Br=({nftBalance:t,nftInfo:e,amount:o,toAddress:n="",toError:r,amountError:l,onAmountChange:f,onToAddressChange:c,showAmount:_,onLoadingChange:d,tipMessage:w})=>{let[p,T,N]=wn(),h=(0,yn.useHistory)(),k=()=>{h.replace(se)};(0,G.useEffect)(()=>{d?.(p)},[p]);let b=(0,G.useMemo)(()=>N?i("extension_wallet_header_alert_nft_check_error"):T===1?i("extension_wallet_header_alert_utxo_limit_arc"):null,[N,T]);return G.default.createElement("div",{className:(0,Nn.default)(M["metax-send-nft-form"])},(T||N)&&G.default.createElement(Qt,{closable:!1,type:N?Qt.TYPE.error:Qt.TYPE.warn,className:M["metax-send-nft-form__alert"],title:b}),G.default.createElement("div",{className:M["metax-send-nft-form__row"]},G.default.createElement(xt.TextArea,{className:M["metax-send-nft-form__address"],inputClassName:M["metax-send-nft-form__address-input"],placeholder:i("wallet_extension_transaction_placeholder_input_address",{},{useBr:!1}),label:i("wallet_transfer_subtitle_receive_address"),value:n,error:r?i(r):"",disabled:!!T||p,size:xt.SIZE.xl,errorType:xt.TIP_TYPE.always,onChange:c,tips:w||i("wallet_extension_nft_popup_toast_wrong_address_cannnot_retrieved"),autoResize:!0})),_&&G.default.createElement("div",{className:M["metax-send-nft-form__row"]},G.default.createElement(xt.Number,{className:"ethereum-send-form__amount",placeholder:"0",title:i("wallet_contract_interactiom_subtitle_amount"),size:xt.SIZE.xl,precision:0,enableMinus:!1,value:o,error:l||"",errorType:xt.TIP_TYPE.always,onChange:f}),G.default.createElement("div",{className:M["metax-send-nft-form__row__max"]},G.default.createElement("span",{className:M["metax-send-nft-form__row__max-amount"]},i("wallet_extension_nft_toast_owned"),":",t),G.default.createElement("span",{onClick:()=>{f(`${e.totalBalance||0}`)},className:M["metax-send-nft-form__row__btn-max"]},i("wallet_transfer_btn_max_balance_amount")))),G.default.createElement(pn,{nextJump:k,buttonText:i("wallet_transfer_btn_next"),disabled:!n||r||T||_&&(!o||l)}))},hn=Br;function Wr(t){let e=Yo(void 0,void 0,{key:t.nftInfo.baseCoinKey}),o=(0,xe.useSelector)(me),[n,r]=(0,$.useState)(null),[l,f]=(0,$.useState)(null),{run:c}=(0,Be.useDebounceFn)(async(N,h)=>{!e||(N.toLowerCase()===h.toLowerCase()&&f($.default.createElement("div",{className:M["metax-send-nft-form__waring"]},$.default.createElement("span",{className:M["metax-send-nft-form__waring__tips"]},i("wallet_extension_mid_textarea_same_address")))),r(await _n(N,h,e)))},{wait:200}),[_,d]=(0,$.useState)(null),{run:w}=(0,Be.useDebounceFn)((N,h)=>{d(dn({amount:N,balance:h,t:i}))},{wait:200}),p=(0,$.useCallback)(N=>{t.setToAddress(N.target.value),c(N.target.value,t.fromAddress)},[t.fromAddress,c]),T=(0,$.useCallback)(N=>{let h=N.replace(/\D.*$/g,"").replace(/^0*/,"").replace(/\D/g,"");t.setAmount(h),w(h,t.nftBalance)},[t.nftBalance,w]);return $.default.createElement(hn,{...t,toError:n,tipMessage:l,amountError:_,showAmount:o,onToAddressChange:p,onAmountChange:T})}function Or(t){return{amount:t.nftSend.amount,toAddress:t.nftSend.toAddress,fromAddress:t.nftSend.nftInfo?.accountAddress,nftInfo:t.nftSend.nftInfo,nftBalance:t.nftSend.nftInfo?.totalBalance}}function Mr(t){return{setToAddress:e=>t(Ot.setToAddress(e)),setAmount:e=>t(Ot.setAmount(e))}}var Tn=(0,xe.connect)(Or,Mr)(Wr);var Ur=()=>{let t=(0,vn.useDispatch)(),e=(0,In.useHistory)(),[o,{set:n}]=(0,Cn.useBoolean)(!1),r=(0,Yt.useCallback)(()=>{t(Ot.resetSend()),e.goBack()},[e]);return Yt.default.createElement(ue,{onBack:r,loading:o,title:i("wallet_home_btn_send")},Yt.default.createElement(Tn,{onLoadingChange:n}))},An=Ur;a();s();var Zt=m(S()),xr=m(E()),gr=m(lt());H();a();s();var zt=m(S()),pr=m(E());oe();te();a();s();var C=m(S()),Et=m(E()),Hn=m(lt()),Oe=m(Q());H();a();s();Wt();oe();ro();mo();X();no();var Hr=t=>{let e=at(t),r=(bo(t)?.account||{})[ee]||"";return{walletId:e,address:r}},Yr=async t=>{let e={coinId:R,address:t.address},o={fromAddr:t.fromAddress,toAddr:t.toAddress},{info:n={}}=await To(e,o),{sequenceNumber:r,chainId:l,expirationTimestampSecs:f,gasUnitPrice:c}=n;return{sequenceNumber:r,chainId:l,expirationTimestampSecs:f,gasUnitPrice:c,maxGasAmount:8e3}},Vr=t=>async e=>{let{signedTx:o,sequenceNumber:n,fromAddress:r,toAddress:l,gasUnitPrice:f,maxGasAmount:c,amount:_}=t,d={nonce:n},w=rt(f,c),p={signedTx:o,coinId:R,fromAdr:r,toAdr:l,serviceCharge:w,extJson:JSON.stringify(d),coinAmount:Qe(_),txSource:Z.NFT};return await e(an(p))},We=t=>async(e,o)=>{let n=o(),{address:r}=Hr(n),{type:l,maxGasAmount:f,gasUnitPrice:c,fromAddress:_,toAddress:d,receiver:w,sender:p,creator:T,collectionName:N,tokenName:h,version:k,amount:b}=t,x=await Yr({fromAddress:_,toAddress:d,address:r});f&&(x.maxGasAmount=f),c&&(x.gasUnitPrice=c);let A={};l===gt.OFFER_NFT||l===gt.OFFER_NFT_SIMULATE?(A.receiver=w,A.amount=b):A.sender=p;let B={type:l,base:x,data:{...A,creator:T,collectionName:N,tokenName:h,version:k}},D=await Rt().signTransaction(B,r,ee);return{base:x,signedTx:D}},Sn=t=>async e=>{let{fromAddress:o,toAddress:n,amount:r}=t,{base:l,signedTx:f}=await e(We(t)),c=await de(ee,f);return{txId:await e(Vr({...l,signedTx:f,fromAddress:o,toAddress:n,amount:r})),txHash:c}},bn=async(t={},e)=>{let o;try{o=await So(e)}catch(l){o=t.maxGasAmount||2e3,console.log(l)}let{gasUnitPrice:n}=t,r=rt(n,o);return{gasUnitPrice:n,maxGasAmount:o,fee:r}},Fn=t=>async e=>{let{base:o,signedTx:n}=await e(We({...t,type:gt.OFFER_NFT_SIMULATE}));return bn(o,n)},Pn=t=>async e=>{let{base:o,signedTx:n}=await e(We({...t,type:gt.CLAIM_NFT_SIMULATE}));return bn(o,n)},kn=t=>async e=>e(Sn({...t,type:gt.OFFER_NFT})),En=t=>async e=>e(Sn({...t,type:gt.CLAIM_NFT})),Dn=async(t,e,o,n)=>{let r=_o({coinId:n})||{},l=Bt.getAptosResourceType.replace("{rpcUrl}",r.rpcUrl),f=Bt.getAptosTable.replace("{rpcUrl}",r.rpcUrl),{data:{data:{token_data:{handle:c}}}}=await ao(l.replace("{creator}",t)),{data:_}=await so(f.replace("{handle}",c),{key_type:"0x3::token::TokenDataId",value_type:"0x3::token::TokenData",key:{creator:t,collection:e,name:o}});return _.largest_property_version};a();s();var Ln=m(E());X();var $r=(t,e)=>Jo((r,l)=>Jt(r,10**l.decimals),Xt)(t,e),ge=(t,e={})=>ko(t,{symbol:e?.symbol,decimals:e?.decimals}),we=(t,e={})=>{let o=(0,Ln.useSelector)(re),n=ce(e.coinId),r=$r(t,e);return pe({amount:r,rate:n,symbol:o.symbol},{useApproximate:!0})};X();a();s();var ft=m(S()),Gn=m(Q()),Bn=m(kr());H();a();s();var Vt={"metax-send-nft-confirm":"_metax-send-nft-confirm_1ihik_1",metaxSendNftConfirm:"_metax-send-nft-confirm_1ihik_1","metax-send-nft-confirm__label":"_metax-send-nft-confirm__label_1ihik_10",metaxSendNftConfirmLabel:"_metax-send-nft-confirm__label_1ihik_10","metax-send-nft-confirm__value":"_metax-send-nft-confirm__value_1ihik_14",metaxSendNftConfirmValue:"_metax-send-nft-confirm__value_1ihik_14","confirm-transaction--copy":"_confirm-transaction--copy_1ihik_19",confirmTransactionCopy:"_confirm-transaction--copy_1ihik_19"};var L=({label:t,value:e,valueDisplay:o,canCopy:n})=>{let r=(0,ft.useCallback)(()=>{(0,Bn.default)(e),W.success({title:i("wallet_transaction_history_toast_address_copied"),desc:e,duration:3,containerClassName:"address-copy-notification",showClose:!0,placement:W.DIRECTION.top})},[e]);return ft.default.createElement("div",{className:Vt["metax-send-nft-confirm"]},ft.default.createElement("div",{className:Vt["metax-send-nft-confirm__label"]},t),ft.default.createElement("div",{className:Vt["metax-send-nft-confirm__value"],onClick:n?r:void 0},ft.default.createElement(qo,{text:o,maxWidth:"215px"}),n&&ft.default.createElement("span",{className:(0,Gn.default)("okds-copy",Vt["confirm-transaction--copy"])})))};a();s();var u={"retina-border-basic":"_retina-border-basic_xpies_1",retinaBorderBasic:"_retina-border-basic_xpies_1","metax-send-nft-detail__base--container":"_metax-send-nft-detail__base--container_xpies_29",metaxSendNftDetailBaseContainer:"_metax-send-nft-detail__base--container_xpies_29","metax-send-nft-detail__name-container":"_metax-send-nft-detail__name-container_xpies_35",metaxSendNftDetailNameContainer:"_metax-send-nft-detail__name-container_xpies_35","metax-send-nft-detail__name":"_metax-send-nft-detail__name_xpies_35",metaxSendNftDetailName:"_metax-send-nft-detail__name_xpies_35","metax-send-nft-detail__hr":"_metax-send-nft-detail__hr_xpies_54",metaxSendNftDetailHr:"_metax-send-nft-detail__hr_xpies_54","metax-send-nft-detail__error":"_metax-send-nft-detail__error_xpies_89",metaxSendNftDetailError:"_metax-send-nft-detail__error_xpies_89","add-weight":"_add-weight_xpies_102",addWeight:"_add-weight_xpies_102","metax-send-nft-detail__icon":"_metax-send-nft-detail__icon_xpies_102",metaxSendNftDetailIcon:"_metax-send-nft-detail__icon_xpies_102","metax-send-nft-confirm":"_metax-send-nft-confirm_xpies_109",metaxSendNftConfirm:"_metax-send-nft-confirm_xpies_109","metax-send-nft-confirm__label":"_metax-send-nft-confirm__label_xpies_118",metaxSendNftConfirmLabel:"_metax-send-nft-confirm__label_xpies_118","metax-send-nft-confirm__value":"_metax-send-nft-confirm__value_xpies_122",metaxSendNftConfirmValue:"_metax-send-nft-confirm__value_xpies_122","metax-send-nft-confirm__value__content-wrapper":"_metax-send-nft-confirm__value__content-wrapper_xpies_127",metaxSendNftConfirmValueContentWrapper:"_metax-send-nft-confirm__value__content-wrapper_xpies_127","metax-send-nft-confirm__value__title":"_metax-send-nft-confirm__value__title_xpies_132",metaxSendNftConfirmValueTitle:"_metax-send-nft-confirm__value__title_xpies_132","metax-send-nft-confirm__value__content":"_metax-send-nft-confirm__value__content_xpies_127",metaxSendNftConfirmValueContent:"_metax-send-nft-confirm__value__content_xpies_127"};a();s();var Wn=m(S()),On=m(E()),Mn=m(st());var Un=(t,e)=>{let o=(0,On.useDispatch)(),[n,r]=(0,Wn.useState)({aptosFee:0,gasUnitPrice:"0",maxGasAmount:"0",loading:!1,version:0});return(0,Mn.useMount)(()=>{(async()=>{r({...n,loading:!0}),t.version=await Dn(t.creator,t.collectionName,t.tokenName,t.coinId);let{gasUnitPrice:f,maxGasAmount:c,fee:_}=e?await o(Pn(t)):await o(Fn(t));r({aptosFee:_,gasUnitPrice:f,maxGasAmount:c,loading:!1,version:t.version})})()}),n};var zr=()=>{let t=(0,Et.useDispatch)(),{creatorAddress:e,name:o,projectName:n,accountAddress:r,baseCoinId:l,image:f,chainName:c,claim:_}=(0,Et.useSelector)(F),d=(0,Hn.useHistory)(),{name:w,keyringName:p}=(0,Et.useSelector)(At),{toAddress:T,amount:N=1}=(0,Et.useSelector)(it),{baseCoin:h,coin:k}=_e(l,!0),b=_?{fromAddress:r,toAddress:T,sender:r,creator:e,collectionName:n,tokenName:o,amount:N,coinId:k?.coinId}:{fromAddress:r,toAddress:T,receiver:T,creator:e,collectionName:n,tokenName:o,amount:N,coinId:k?.coinId},{aptosFee:x,gasUnitPrice:A,maxGasAmount:B,loading:D,version:j}=Un(b,_),[ot,J]=(0,C.useState)(!1),dt=Zo(),Dt=ge(x,h),pt=qe(dt,Re(x)),V=we(x,h),q=Pt({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"});return C.default.createElement(C.default.Fragment,null,C.default.createElement("div",{className:u["metax-send-nft-detail"]},C.default.createElement("div",{className:u["metax-send-nft-detail__base--container"]},C.default.createElement(kt,{src:f,startStatus:!0,alt:"nft",backupImage:q,classnames:(0,Oe.default)(u.addWeight,u["metax-send-nft-detail__icon"])}),C.default.createElement("div",{className:u["metax-send-nft-detail__name-container"]},C.default.createElement("div",{className:u["metax-send-nft-detail__name"]},o))),C.default.createElement(L,{label:i("wallet_transfer_confirmation_subtitle_wallet"),valueDisplay:`${p} - ${w}`}),C.default.createElement(L,{label:i("wallet_transfer_subtitle_send_address"),value:r,valueDisplay:tt(r),canCopy:!0}),C.default.createElement(L,{label:i("wallet_transfer_subtitle_receive_address"),value:T,valueDisplay:tt(T),canCopy:!0}),C.default.createElement("div",{className:u["metax-send-nft-detail__hr"]}),C.default.createElement(L,{label:i("wallet_extension_nft_popup_text_network"),valueDisplay:c}),C.default.createElement("div",{className:(0,Oe.default)(u["metax-send-nft-confirm"])},C.default.createElement("div",{className:u["metax-send-nft-confirm__label"]},i("wallet_transfer_subtitle_network_fee")),C.default.createElement("div",{className:u["metax-send-nft-confirm__value"]},D?C.default.createElement(oo,null):C.default.createElement("div",{className:u["metax-send-nft-confirm__value__content-wrapper"]},C.default.createElement("div",{className:u["metax-send-nft-confirm__value__title"]},i("wallet_transfer_subtitle_trading_speed_average")," ",Dt),C.default.createElement("div",{className:u["metax-send-nft-confirm__value__content"]},V)))),!pt&&!D&&C.default.createElement("div",{className:u["metax-send-nft-detail__error"]},i("wallet_dapp_connection_errortip_insufficient_tip"))),C.default.createElement(ct.FooterActions,null,C.default.createElement(v,{category:v.CATEGORY.outline,type:v.TYPE.secondary,size:v.SIZE.lg,width:160,onClick:()=>{t(O()),pt?d.goBack():d.replace(Y)}},i("wallet_dapp_connection_btn_reject")),C.default.createElement(v,{category:v.CATEGORY.fill,type:v.TYPE.highlight,size:v.SIZE.lg,width:160,loading:ot,disabled:!pt||D,onClick:async()=>{try{J(!0),b.gasUnitPrice=A,b.maxGasAmount=B,b.version=j;let{txId:vt,txHash:It}=_?await t(En(b)):await t(kn(b));_?await ke(21,It,T):await ke(20,It,r),St({tx_id:vt}),t(O()),W.success({title:i("wallet_transfer_notif_transaction_submit")}),d.replace(Y)}catch{W.error({title:i("wallet_home_toast_network_error")})}finally{J(!1)}}},i("wallet_set_password_btn_confirm"))))},Yn=zr;a();s();var Vn=m(S()),ye=m(E());var $n=()=>{let{accountAddress:t,inscriptionIdProtocol:e,localType:o}=(0,ye.useSelector)(F),{toAddress:n}=(0,ye.useSelector)(it),r=(0,ye.useSelector)(at);return Vn.default.createElement(sn,{unapproved:{walletId:r,params:{transfer:{from:t,to:n,data:e}},localType:o}})};a();s();var I=m(S()),K=m(E()),rr=m(lt()),ar=m(Q());H();X();a();s();var Me=m(E());X();function zn(){let{baseCoinKey:t}=(0,Me.useSelector)(F),o=fe(void 0,void 0,{key:t})?.coinAmountInt,n=(0,Me.useSelector)(mt),{gasLimit:r,gasPrice:l,supportEip1559:f,maxFeePerGas:c,maxPriorityFeePerGas:_}=n;if(r==="0"||f&&(c==="0"||_==="0")||!f&&l==="0")return!1;let w=rt(`${(f?c:l)||0}`,`${r||0}`);return Xe(`${o||0}`,w)}a();s();var Ne=m(E());Wt();oe();X();function Zn(){let{contractAddress:t,accountAddress:e,baseCoinId:o,localType:n}=(0,Ne.useSelector)(F),{gasLimit:r,gasPrice:l,maxFeePerGas:f,maxPriorityFeePerGas:c,supportEip1559:_}=(0,Ne.useSelector)(Bo),d=(0,Ne.useSelector)(ie),w=Uo(),p=nn({walletId:w,fromAddr:e,coinId:o}),T=Ko({coinId:o,fromAddr:e,toAddr:t,localType:n});return{send:async({nonce:N,updateGasInfo:h,activityId:k})=>{let b=po(n)?.realChainIdHex,x={from:e,to:t,nonce:et(N),data:d,chainId:b,value:"0",gasLimit:et(r)};_?(x.type=go.FEE_MARKET,x.maxFeePerGas=et(f),x.maxPriorityFeePerGas=et(c)):x.gasPrice=et(l),h&&(x.maxFeePerGas?(x.maxFeePerGas=et(h.maxFeePerGas),x.maxPriorityFeePerGas=et(h.maxPriorityFeePerGas)):x.gasPrice=et(h.gasPrice));let B={...ho(x)};B.walletId=w,B.supportEip1559=_;let D=bt(_?x.maxFeePerGas:x.gasPrice),j=bt(x.gasLimit),ot={...x,value:bt(x.value),from:x.from,to:x.to,gas:j,gasPrice:D,priorityFee:bt(_?x.maxPriorityFeePerGas:0),nonce:bt(x.nonce),repeatTxType:xo.CONFIRMING,oldTxHash:""},J={coinId:o,coinAmount:0,fromAdr:x.from,toAdr:x.to,serviceCharge:rt(j,D),extJson:JSON.stringify(ot),txSource:Z.NFT,inputData:x.data?x.data:"",activityId:k},dt=await p(B);return{serverTxId:await T(dt,J)}}}}a();s();var P=m(S()),Nt=m(E()),er=m(lt()),Te=m(st()),or=m(Q());H();a();s();a();s();var jn=m(S()),Jn=m(Q());H();a();s();var Kn={root:"_root_1leh0_1"};function Zr({className:t,style:e}){return jn.default.createElement("div",{className:(0,Jn.default)(Kn.root,t),style:e},i("wallet_extension_freegas_notif_networkfee_rebate"))}var Ue=Zr;a();s();var Xn=m(S());a();s();var qn={text:"_text_1qgtl_1"};function Kr({status:t}){return t!==yt.ok?null:Xn.default.createElement(Ue,{className:qn.text})}var He=Kr;a();s();var Qn=m(S()),Rn=m(Q());a();s();var _t={"retina-border-basic":"_retina-border-basic_tetol_1",retinaBorderBasic:"_retina-border-basic_tetol_1",root:"_root_tetol_29",render:"_render_tetol_67",iconWrapper:"_iconWrapper_tetol_71",icon:"_icon_tetol_71",error:"_error_tetol_81"};function jr({className:t,children:e,error:o}){return Qn.default.createElement("div",{className:(0,Rn.default)(_t.root,t,{[_t.error]:o})},e)}var Ye=jr;a();s();H();var $t=m(S());var Ve=m(Q());function Jr({className:t,status:e,tip:o,activity:n}){if(e!==yt.error&&e!==yt.ok||!o)return null;let{gas:r,totalTimes:l}=n,{text:f,key:c,args:_,error:d}=o,w=f||i(c,_||{}),p;return c===Mt.availableTimesLimit?p=i("wallet_extension_freegas_tooltip_5refund_day",{num:l}):c===Mt.exceedGasLimit?p=i("wallet_extension_freegas_tooltip_under_10u",{num:r}):c===Mt.exceedTodayGasLimit?p=i("wallet_extension_freegas_tooltip_paused_rules"):c===Mt.walletAssetNotEnough&&(p=i("wallet_extension_freegas_notif_greater_than10",{num:l})),p&&(w=$t.default.createElement("div",{className:_t.iconWrapper},w,$t.default.createElement(Pe,{title:p,trigger:Pe.TRIGGER_TYPES.hover},$t.default.createElement(eo,{className:(0,Ve.default)("okx-wallet-plugin-information-circle",_t.icon,{[_t.error]:d})})))),$t.default.createElement(Ye,{className:(0,Ve.default)(_t.render,t),error:d},w)}var $e=Jr;a();s();var he=m(E());H();X();var tr=()=>{let t=(0,he.useSelector)(Ft),e=(0,he.useSelector)(mt),{baseCoin:o}=_e(t,!0),{networkFee:n}=e,r=(0,he.useSelector)(re),f=jo(Gt,w=>to(w,o.vdecimalNum),Xt),c=`${jt.thousandFormat(f(n))} ${o.symbol}`,_=ce(o.coinId),d=pe({amount:Gt(n),rate:_,symbol:r.symbol},{useApproximate:!0});return{gasFeeToETHDisplay:c,gasFeeToCurrencyDisplay:d}};a();s();var z={arrow:"_arrow_166pr_1",gasReturnTip:"_gasReturnTip_166pr_6","metax-send-nft-confirm":"_metax-send-nft-confirm_166pr_9",metaxSendNftConfirm:"_metax-send-nft-confirm_166pr_9","metax-send-nft-confirm__label":"_metax-send-nft-confirm__label_166pr_18",metaxSendNftConfirmLabel:"_metax-send-nft-confirm__label_166pr_18","metax-send-nft-confirm__value":"_metax-send-nft-confirm__value_166pr_22",metaxSendNftConfirmValue:"_metax-send-nft-confirm__value_166pr_22","metax-send-nft-confirm__value__content-wrapper":"_metax-send-nft-confirm__value__content-wrapper_166pr_27",metaxSendNftConfirmValueContentWrapper:"_metax-send-nft-confirm__value__content-wrapper_166pr_27","metax-send-nft-confirm__value__title":"_metax-send-nft-confirm__value__title_166pr_32",metaxSendNftConfirmValueTitle:"_metax-send-nft-confirm__value__title_166pr_32","metax-send-nft-confirm__value__content":"_metax-send-nft-confirm__value__content_166pr_27",metaxSendNftConfirmValueContent:"_metax-send-nft-confirm__value__content_166pr_27","metax-send-nft-confirm__value__narrow":"_metax-send-nft-confirm__value__narrow_166pr_41",metaxSendNftConfirmValueNarrow:"_metax-send-nft-confirm__value__narrow_166pr_41"};function qr(){let t=(0,Nt.useSelector)(mt),e=Le(),{status:o}=e,{gasType:n}=t,r=No[n],l=r?i(r):"",{gasFeeToETHDisplay:f,gasFeeToCurrencyDisplay:c}=tr();return o===yt.ok?P.default.createElement(P.default.Fragment,null,P.default.createElement(He,{status:o}),P.default.createElement("div",{className:z["metax-send-nft-confirm__value__content"]},l,"\xA0",f)):P.default.createElement(P.default.Fragment,null,P.default.createElement("div",{className:z["metax-send-nft-confirm__value__title"]},l,"\xA0",f),P.default.createElement("div",{className:z["metax-send-nft-confirm__value__content"]},c))}var nr=()=>{let t=(0,Nt.useDispatch)(),e=(0,er.useHistory)(),{accountAddress:o,contractAddress:n}=(0,Nt.useSelector)(F),r=(0,Nt.useSelector)(Ft),l=(0,Nt.useSelector)(ie),[f,{setTrue:c,setFalse:_}]=(0,Te.useBoolean)(!1),d=Le(),w=(0,Te.useMemoizedFn)(T=>{t(Lo(T))}),p=()=>{t(O()),e.push(Y)};return P.default.createElement(P.default.Fragment,null,P.default.createElement("div",{className:z["metax-send-nft-confirm"]},P.default.createElement("div",{className:z["metax-send-nft-confirm__label"]},i("wallet_transfer_subtitle_network_fee")),P.default.createElement("div",{className:z["metax-send-nft-confirm__value"],onClick:c},P.default.createElement("div",{className:z["metax-send-nft-confirm__value__content-wrapper"]},P.default.createElement(qr,null)),P.default.createElement("div",{className:z["metax-send-nft-confirm__value__narrow"]},P.default.createElement("span",{className:(0,or.default)("okds-arrow-chevron-right-centered-md",z.arrow)}))),P.default.createElement(Xo,{visible:f,coinId:r,address:o,inputData:l,tokenAddress:n,value:"0",onBack:_,onClose:p,onGasChange:w,gasReturn:d})),P.default.createElement($e,{className:z.gasReturnTip,activity:d.activity,status:d.status,tip:d.tip}))};var Xr=()=>{let t=(0,K.useDispatch)(),e=(0,K.useSelector)(Wo),{accountAddress:o,baseCoinId:n,image:r,name:l,chainName:f}=(0,K.useSelector)(F),c=zn(),_=(0,rr.useHistory)(),{name:d,keyringName:w}=(0,K.useSelector)(At),p=(0,K.useSelector)(mt),T=(0,K.useSelector)(Ft),[,N]=Vo(T),{toAddress:h,amount:k}=(0,K.useSelector)(it),b=(0,K.useSelector)(me),[x,A]=(0,I.useState)(!1),{send:B}=Zn(),D=zo({coinId:T,txType:$o.nft,fromAddress:o,toAddress:h,unavailable:p.gasType===yo.CUSTOM,fee:Gt(p.networkFee)}),j=D?.errorCode,ot=()=>{A(!0)},J=()=>{A(!1)},{gasPrice:dt}=p,pt={fetchParams:{coinId:T,from:o,to:h,amount:k,gasPrice:dt},userGasInfo:p,baseCoinAmountUse:"0"},V=(0,I.useMemo)(()=>b?jt.thousandFormat(k):"",[k,b]),q=(0,I.useCallback)(()=>{t(O()),c?_.goBack():_.replace(Y)},[c]),vt=(0,I.useCallback)(async Ce=>{if(!await on({callback:q}))return;let{nonce:Ae,updateGasInfo:Se}=Ce;try{let U=await B({nonce:Ae,updateGasInfo:Se,activityId:D.activityId}),{serverTxId:Lt}=U||{};St({tx_id:Lt}),W.success({title:i("wallet_transfer_notif_transaction_submit")}),t(O()),_.replace("/")}catch(U){let Lt=U?.data?.originalError?.code;cn(Lt)?(W.error({title:U?.data?.originalError.msg||i("wallet_home_toast_network_error")}),D.clear()):U.message!==le&&W.error({title:i("wallet_home_toast_network_error")})}},[n,o,B]);(0,I.useEffect)(()=>{j===0&&typeof N?.chainId<"u"&&Po({wallet_address:o,interactive_address:h,chain_id:N?.chainId,transaction_type:"send_nft"})},[j,N?.chainId]);let It=Pt({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"});return I.default.createElement(mn,{gasReturn:D},I.default.createElement("div",{className:u["metax-send-nft-detail"]},I.default.createElement("div",{className:u["metax-send-nft-detail__base--container"]},I.default.createElement(kt,{src:r,alt:"nft",startStatus:!0,backupImage:It,classnames:(0,ar.default)(u.addWeight,u["metax-send-nft-detail__icon"])}),I.default.createElement("div",{className:u["metax-send-nft-detail__name-container"]},I.default.createElement("div",{className:u["metax-send-nft-detail__name"]},l))),I.default.createElement(L,{label:i("wallet_transfer_confirmation_subtitle_wallet"),valueDisplay:`${w} - ${d}`}),I.default.createElement(L,{label:i("wallet_transfer_subtitle_send_address"),value:o,valueDisplay:tt(o),canCopy:!0}),I.default.createElement(L,{label:i("wallet_transfer_subtitle_receive_address"),value:h,valueDisplay:tt(h),canCopy:!0}),I.default.createElement("div",{className:u["metax-send-nft-detail__hr"]}),I.default.createElement(L,{label:i("wallet_extension_nft_popup_text_network"),valueDisplay:f}),I.default.createElement(nr,null),!e&&!c&&I.default.createElement("div",{className:u["metax-send-nft-detail__error"]},i("wallet_dapp_connection_errortip_insufficient_tip")),b&&I.default.createElement(L,{label:i("wallet_extension_transaction_module_input_label_amount"),valueDisplay:V})),I.default.createElement(ct.FooterActions,null,I.default.createElement(v,{category:v.CATEGORY.outline,type:v.TYPE.secondary,size:v.SIZE.lg,width:160,onClick:q},i("wallet_dapp_connection_btn_reject")),I.default.createElement(ln,{dataForCheck:pt,onClick:vt,beforeClick:ot,afterClick:J,btnProps:{loading:x,width:160,disabled:e||!c}},i("wallet_set_password_btn_confirm"))))},sr=Xr;a();s();var y=m(S()),ht=m(E()),fr=m(lt()),_r=m(st()),Ze=m(Q());H();a();s();Wt();te();a();s();no();Wt();var ir=t=>async(e,o)=>{let n=o(),r=at(n),l=t.walletId||r,c=Fo(n,l)?.serverWalletType,_=await Rt().getSignRequestHeaders({walletId:l}),d={txSource:Z.NORMAL,accountId:l,walletType:c,...t};return await vo(d,{headers:_})};var ze=({type:t,from:e,to:o,blockHash:n,coinAmount:r,mint:l,createAssociatedAddress:f,computeUnitPrice:c,computeUnitLimit:_,tokenStandard:d})=>{let w={type:t,payer:e,blockHash:n,from:e,to:o,amount:r,computeUnitPrice:c,computeUnitLimit:_},p;return t===wo.TRANSFER?p={...w}:p={...w,mint:l,createAssociatedAddress:f},d&&(p.tokenStandard=d),p},mr=({type:t,from:e,to:o,coinId:n,blockHash:r,coinAmount:l,mint:f=null,createAssociatedAddress:c,serviceCharge:_,computeUnitPrice:d,computeUnitLimit:w,txSource:p=Z.NORMAL,extJson:T=JSON.stringify({}),walletId:N,tokenStandard:h})=>async k=>{let b=ze({type:t,from:e,to:o,blockHash:r,coinAmount:l,mint:f,createAssociatedAddress:c,computeUnitPrice:d,computeUnitLimit:w,tokenStandard:h}),x=await k(Mo(b,e,N)),A=await de(lo,x);return await k(ir({signedTx:x,coinAmount:l,coinId:n,fromAdr:e,toAdr:o,serviceCharge:_,txSource:p,extJson:T,txHash:A}))};a();s();var ve=m(S()),lr=m(st());te();X();var cr=(t={},e=!1,o=!1)=>{let[n,r]=(0,ve.useState)({}),[l,f]=(0,ve.useState)(!0),[c,_]=(0,ve.useState)(!1),d=n.fee;return(0,lr.useMount)(()=>{(async()=>{try{let p=await Io(t);p?.fee&&r(p),f(!1)}catch{o&&(_(!0),f(!1))}})()}),e?{solanaFee:d,solanaFeeInfo:n,loading:l,error:c}:d};Wt();X();var Qr=()=>{let t=(0,ht.useDispatch)(),e=(0,ht.useSelector)(F),{tokenId:o,accountAddress:n,baseCoinId:r,image:l,name:f,chainName:c,extendProperty:_}=e,d=fe(r),{chainId:w}=d,{tokenStandard:p}=_||{},T=rn(),N=(0,fr.useHistory)(),h=(0,y.useRef)(!1),k=(0,y.useRef)(),{name:b,keyringName:x}=(0,ht.useSelector)(At),{toAddress:A}=(0,ht.useSelector)(it),[B,{setTrue:D,setFalse:j}]=(0,_r.useBoolean)(!0),[ot,J]=(0,y.useState)(""),[dt,Dt]=(0,y.useState)("0"),{loading:pt,solanaFeeInfo:V}=cr({coinId:r,address:A},!0),q=pt||B,{fee:vt,computeUnitPrice:It,feelimit:Ce}=V,{priorityFee:Ke,priorityGasPrice:Ae,priorityGasLimit:Se}=Ee(Ce,It,dt),U=qt(vt,Ke),Lt=we(U,d),hr=ge(U,d),Tr=(0,ht.useSelector)(at),[vr,je]=(0,y.useState)(!1),Ir=Pt({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"}),Kt=(0,y.useMemo)(()=>q?{msg:"",isEnough:!1}:ot?{msg:ot,isEnough:!0}:Fe(d.coinAmountInt,U)?{msg:i("wallet_dapp_connection_errortip_insufficient_tip"),isEnough:!1}:Fe(d.coinAmountInt,qt(U,V.selfRent))?{msg:i("walletextension_toast_text_reserve_rent_exempt",{number:Jt(V.selfRent,10**d.decimals)}),isEnough:!1}:{msg:"",isEnough:!0},[q,d.coinAmountInt,d.decimals,U,V.selfRent]),Je=()=>{let nt={from:n,to:A,coinId:r,serviceCharge:U,computeUnitPrice:Ae,computeUnitLimit:Se,txSource:Z.NFT,coinAmount:1,mint:o,createAssociatedAddress:!k.current,walletId:Tr,type:"tokenTransfer"};return p===4&&(nt.type="mplTransfer",nt.tokenStandard=4),nt};return(0,y.useEffect)(()=>{o&&A&&w&&V.recentBlockhash&&(D(),J(""),(async()=>{try{let ut=Je();ut.blockHash=V.recentBlockhash;let be=ze(ut),Cr=Ao({mint:o,address:A}),{SolWallet:Ar}=await Eo(),Sr=await new Ar().getSerializedTransaction({privateKey:"",data:be}),br=T({coinId:r,from:n,chainId:w,simulateTransactionParam:{transaction:Sr}}),[Fr,Pr]=await Promise.all([Cr,br]);k.current=Fr?.data?.legal,Dt(Pr.firstUnitLimit)}catch(ut){J(ut?.message||i("wallet_extension_alert_estimate_unavailable"))}finally{j()}})())},[o,n,A,w,V.recentBlockhash]),y.default.createElement(y.default.Fragment,null,y.default.createElement("div",{className:u["metax-send-nft-detail"]},y.default.createElement("div",{className:u["metax-send-nft-detail__base--container"]},y.default.createElement(kt,{src:l,startStatus:!0,alt:"",backupImage:Ir,classnames:(0,Ze.default)(u.addWeight,u["metax-send-nft-detail__icon"])}),y.default.createElement("div",{className:u["metax-send-nft-detail__name-container"]},y.default.createElement("div",{className:u["metax-send-nft-detail__name"]},f))),y.default.createElement(L,{label:i("wallet_transfer_confirmation_subtitle_wallet"),valueDisplay:`${x} - ${b}`}),y.default.createElement(L,{label:i("wallet_transfer_subtitle_send_address"),value:n,valueDisplay:tt(n),canCopy:!0}),y.default.createElement(L,{label:i("wallet_transfer_subtitle_receive_address"),value:A,valueDisplay:tt(A),canCopy:!0}),y.default.createElement("div",{className:u["metax-send-nft-detail__hr"]}),y.default.createElement(L,{label:i("wallet_extension_nft_popup_text_network"),valueDisplay:c}),y.default.createElement("div",{className:(0,Ze.default)(u["metax-send-nft-confirm"])},y.default.createElement("div",{className:u["metax-send-nft-confirm__label"]},i("wallet_transfer_subtitle_network_fee")),y.default.createElement("div",{className:u["metax-send-nft-confirm__value"]},y.default.createElement("div",{className:u["metax-send-nft-confirm__value__content-wrapper"]},y.default.createElement("div",{className:u["metax-send-nft-confirm__value__title"]},i("wallet_transfer_subtitle_trading_speed_average")," ",hr),y.default.createElement("div",{className:u["metax-send-nft-confirm__value__content"]},Lt)))),!q&&Kt.msg&&y.default.createElement("div",{className:u["metax-send-nft-detail__error"]},Kt.msg)),y.default.createElement(ct.FooterActions,null,y.default.createElement(v,{category:v.CATEGORY.outline,type:v.TYPE.secondary,size:v.SIZE.lg,width:160,onClick:()=>{t(O()),Kt.isEnough?N.goBack():N.replace(Y)}},i("wallet_dapp_connection_btn_reject")),y.default.createElement(v,{category:v.CATEGORY.fill,type:v.TYPE.highlight,size:v.SIZE.lg,width:160,loading:q||vr,disabled:Kt.msg,onClick:async()=>{if(!h.current){h.current=!0,je(!0);try{let nt=await Co({coinId:r,address:n},{fromAddr:n,toAddr:A}),ut=Je();ut.blockHash=nt;let be=await t(mr(ut));St({tx_id:be}),t(O()),W.success({title:i("wallet_transfer_notif_transaction_submit")}),N.replace(Y)}catch(nt){nt.message!==le&&W.error({title:i("wallet_home_toast_network_error")})}h.current=!1,je(!1)}}},i("wallet_set_password_btn_confirm"))))},dr=Qr;var Rr=()=>{let{baseCoinId:t}=(0,pr.useSelector)(F);switch(t){case uo:case co:return zt.default.createElement($n,null);case Ct:return zt.default.createElement(dr,null);case R:return zt.default.createElement(Yn,null);default:return zt.default.createElement(sr,null)}},ur=Rr;var ta=()=>{let t=(0,gr.useHistory)(),e=(0,xr.useDispatch)(),o=(0,Zt.useCallback)(()=>{e(De()),t.replace(ae)},[]);return Zt.default.createElement(ue,{pageName:"confirmDetail",title:t.location.state?.nftInfo.claim?i("extension_aptos_nft_title_receiveconfirm"):i("wallet_trade_maintitle_transaction_confirm"),onBack:()=>{if(t.location.state?.nftInfo.claim){e(O()),e(De()),t.goBack();return}o()}},Zt.default.createElement(ur,null))},wr=ta;var ea=()=>{let t=(0,Tt.useHistory)(),e=(0,Nr.useDispatch)();return(0,yr.useMount)(()=>{t.location.state?e(Go(t.location.state?.nftInfo)):t.replace(Y)}),Ie.default.createElement(Tt.Switch,null,Ie.default.createElement(Tt.Route,{exact:!0,path:ae,component:An}),Ie.default.createElement(Tt.Route,{exact:!0,path:se,component:wr}))},hf=ea;export{hf as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=SendNft-U2VIFSLQ.js.map
