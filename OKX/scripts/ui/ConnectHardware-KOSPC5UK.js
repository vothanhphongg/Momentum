import{a as fo,b as gr,c as xr}from"./chunk-7FJETTPZ.js";import"./chunk-H5FQUSH6.js";import{b as jt,f as $t}from"./chunk-K7CEH6LH.js";import"./chunk-SRCBMK3B.js";import"./chunk-4EEXXMXA.js";import"./chunk-KN7FYSHN.js";import"./chunk-AQOCVER4.js";import{a as yr}from"./chunk-MDL52WR7.js";import"./chunk-PSDESO5W.js";import"./chunk-VOOXQWRX.js";import{a as ur}from"./chunk-OWWFH26C.js";import"./chunk-MNZIO3NP.js";import"./chunk-S7NLB5XS.js";import{a as M}from"./chunk-UUWJWUOY.js";import{a as fr}from"./chunk-TSTKPLAO.js";import{a as _r}from"./chunk-52XLG23J.js";import{a as hr}from"./chunk-3USSVI5T.js";import{b as ar,c as Kt,d as nr,e as lr,f as ir,g as mr,h as _o}from"./chunk-QKB6RADR.js";import{b as Se,d as Ht}from"./chunk-DTLEDHZZ.js";import{c as Gt}from"./chunk-SHGLC3KN.js";import"./chunk-YMOCY6LL.js";import"./chunk-2MJ3QYSD.js";import"./chunk-AKQ365VJ.js";import{b as cr}from"./chunk-3KIOQDYC.js";import"./chunk-PTML5W4O.js";import"./chunk-YXB345S6.js";import"./chunk-QR4O7ZB4.js";import"./chunk-M35OA6FM.js";import"./chunk-FOMGS2C4.js";import{j as Dt}from"./chunk-J4ZNYN2W.js";import"./chunk-UIZERJWY.js";import"./chunk-N4CUQAO7.js";import"./chunk-X4AGSDQV.js";import{a as pr}from"./chunk-6UWGBJGT.js";import"./chunk-G4AVWXHJ.js";import"./chunk-76CRIMII.js";import{g as lt}from"./chunk-F7VSWGDW.js";import{g as Xo,na as Qo,t as St}from"./chunk-KLLSVAFY.js";import"./chunk-MBHGLWZJ.js";import"./chunk-QZO7W5WD.js";import"./chunk-A57OTXBP.js";import"./chunk-YJQGXXOQ.js";import"./chunk-HTLOGWI7.js";import"./chunk-6SEP5B7P.js";import"./chunk-FHKOH5E6.js";import"./chunk-NTQ2YVDA.js";import"./chunk-KKG4PJ6O.js";import"./chunk-7SRLIN7D.js";import"./chunk-AW5NL3JM.js";import"./chunk-RI2WZ5PA.js";import"./chunk-KBS3PMLQ.js";import"./chunk-7GKX3YKG.js";import"./chunk-7HFBMBFB.js";import"./chunk-TJCPJQIM.js";import"./chunk-ZTAZ2272.js";import{a as uo,b as dr,e as Ve,f as qt}from"./chunk-IRMYAC6R.js";import"./chunk-Q76QXAWY.js";import"./chunk-THSNJ5WU.js";import"./chunk-65AJJVJY.js";import{b as vt,d as Wt}from"./chunk-PDC447BO.js";import{d as Ut}from"./chunk-JCM7SRK2.js";import"./chunk-Y2TZQZGL.js";import"./chunk-4FBPDXIS.js";import"./chunk-ZV5BZTW2.js";import"./chunk-3NWEQ7OH.js";import"./chunk-YDPPVPLV.js";import"./chunk-GCXGJXXN.js";import"./chunk-U4JANCGD.js";import"./chunk-SNHC6HKE.js";import"./chunk-UBFC7TLG.js";import"./chunk-XKL64FTO.js";import{a as Y}from"./chunk-PTD7UCOR.js";import"./chunk-Q4YTGP2G.js";import{b as Ae}from"./chunk-ETJEH7T4.js";import"./chunk-LLZAOPDB.js";import"./chunk-V3IFYKWM.js";import"./chunk-EWTTD4DL.js";import"./chunk-Y2TPPS4H.js";import"./chunk-ITY22AD4.js";import"./chunk-E2JYOUYE.js";import"./chunk-B3JSNQIV.js";import{a as ee,fa as Jo,mb as Ot,p as bt,q as Ye,r as de,s as kt,t as Mt}from"./chunk-YALUYHLV.js";import{q as b}from"./chunk-I3CPAVOC.js";import"./chunk-ARWSGU73.js";import"./chunk-CZ2ZBAZV.js";import{o as ze}from"./chunk-5QMHGZLF.js";import{C as co,Tb as nt,Yb as Vo,ec as le,ub as Ct,wb as Nt,yb as At,zb as Yo}from"./chunk-HPWCPLRR.js";import"./chunk-O6ZBO5JF.js";import"./chunk-TSTPZ3JM.js";import"./chunk-D2LKUI4F.js";import{a as te}from"./chunk-ON6S2DB7.js";import{j as $e,p as po}from"./chunk-SZD6WTBQ.js";import"./chunk-ASR4HLU7.js";import"./chunk-ANIUN6US.js";import{m as Lt,n as It,r as zo}from"./chunk-3DZ7WRLL.js";import{d as mo,f as Ns}from"./chunk-DEOJU4Z3.js";import"./chunk-PLIIQKFY.js";import{a as Ne}from"./chunk-CCEMKRO6.js";import"./chunk-CWNIM6RS.js";import"./chunk-NNAD25BL.js";import{c as Zo}from"./chunk-XV444F26.js";import"./chunk-N2BCRNDB.js";import{c as Ft,d as Pt,f as sr,g as mt}from"./chunk-RTFE54S3.js";import"./chunk-GCQ4H2BA.js";import"./chunk-JGEHAFTO.js";import{c as w,d as oe,e as R,g as Ro,h as er,j as tr,k as or,n as rr}from"./chunk-UVFOW4HH.js";import{g as it}from"./chunk-LNOPECCQ.js";import"./chunk-CB7FOZNP.js";import{c as t}from"./chunk-43VURGIT.js";import{H as Is,P as wt,Sc as qo,Uc as jo,Yc as at,_c as $o,ha as Fo,ka as Po,kb as Q,mb as je,qa as Cs,qb as Et,rc as Ce,sb as Bt,sc as st,t as Wo,uc as Go}from"./chunk-TM67VPZU.js";import"./chunk-VW6OQNWT.js";import{A as Ko,E as Ho,H as D,L as ne,e as rt,g as Ie,o as qe,r as Uo,x as Tt}from"./chunk-PUSMMCUD.js";import{R as S,o as vo,z as i}from"./chunk-UWJLNJLY.js";import"./chunk-VRY2ADKE.js";import"./chunk-VWEB6W6G.js";import"./chunk-5U7FO2PW.js";import"./chunk-PDUOSATP.js";import{H as io,X as Do,Z as xt,f as gt,o as Oo,ra as Be}from"./chunk-XDY6V34Y.js";import"./chunk-YJFNO57I.js";import"./chunk-DZ6CTC22.js";import{$ as Ge,W as ae,c as Le,ea as I}from"./chunk-JT3LNHPY.js";import"./chunk-47UWF72W.js";import{b as E}from"./chunk-JWYCKY2V.js";import"./chunk-G2266BV2.js";import"./chunk-L4PAIYPH.js";import"./chunk-UT7LJPKF.js";import"./chunk-AFZ6A2B3.js";import"./chunk-VVPY7ZA7.js";import"./chunk-KUW5VATV.js";import"./chunk-BNAVWOJ2.js";import"./chunk-IG2Q5ALZ.js";import"./chunk-WOMUNWBT.js";import"./chunk-TP2YHJLZ.js";import"./chunk-7U3DN5ZD.js";import"./chunk-F6PXOVYL.js";import"./chunk-324EPGNQ.js";import"./chunk-5GFHI4AK.js";import"./chunk-QYVQBXDG.js";import"./chunk-7D4PUIEN.js";import"./chunk-IWVM7XL6.js";import"./chunk-7QO4TZYQ.js";import"./chunk-FF4LY6PE.js";import"./chunk-76KCDJDG.js";import"./chunk-YDUDQP2P.js";import"./chunk-PGPFV4JQ.js";import"./chunk-MIBHDVGP.js";import"./chunk-7VFUX7IX.js";import"./chunk-XLF4LAH2.js";import"./chunk-ONKZ57T6.js";import"./chunk-ZC7Q7LCH.js";import{f as c,o as s,q as a}from"./chunk-6KXF36WM.js";s();a();var pe=c(E());var se=c(te());s();a();S();var Tr=c(le());var Er=c(te());var g=c(E());s();a();var be=c(E()),yo=c(Le());S();s();a();var ye={root:"_root_14nif_1",closeWrap:"_closeWrap_14nif_5",closeIcon:"_closeIcon_14nif_13",closeText:"_closeText_14nif_17",stepWrap:"_stepWrap_14nif_23",stepItem:"_stepItem_14nif_30",active:"_active_14nif_37"};var As=e=>{let{currentStep:o,handleClose:r}=e;return be.default.createElement(t.Box,{className:ye.root},be.default.createElement(t.Box,{className:ye.closeWrap},be.default.createElement(ae,{onClick:r,className:(0,yo.default)("okx-wallet-plugin-close",ye.closeIcon)}),o!==3?be.default.createElement(t.Box,{onClick:r,className:ye.closeText},i("wallet_extension_top_textbtn_skip")):null),be.default.createElement(t.Box,{className:ye.stepWrap},Array(4).fill(" ").map((n,l)=>be.default.createElement(t.Box,{key:l,className:(0,yo.default)(ye.stepItem,{[ye.active]:o===l})}))))},ct=As;s();a();var ho=c(E());s();a();var wr={root:"_root_1wb1e_1"};var Ss=({handleNext:e})=>ho.default.createElement(t.FlexBox,{className:wr.root,align:t.ALIGN.center,justify:t.ALIGN.center,onClick:e},ho.default.createElement(ae,{className:"okds-arrow-pointer-right-sm"})),zt=Ss;s();a();var W={root:"_root_15mve_1",wrap:"_wrap_15mve_9",title:"_title_15mve_13",titleColorfulGreen:"_titleColorfulGreen_15mve_22",titleColorfulYellow:"_titleColorfulYellow_15mve_25",desc:"_desc_15mve_28",firstScreenImg:"_firstScreenImg_15mve_36",secondAndFourthScreenImg:"_secondAndFourthScreenImg_15mve_42",thirdScreenImg:"_thirdScreenImg_15mve_45",footerWrap:"_footerWrap_15mve_48"};var bs=e=>{let{handleNext:o,handleClose:r}=e,n=it({light:"/cdn/assets/imgs/245/AB118B1F7E00FCCF.png",dark:"/cdn/assets/imgs/245/46D15BEDF89AD94E.png"});return g.default.createElement(g.default.Fragment,null,g.default.createElement(ct,{currentStep:0,handleClose:r}),g.default.createElement(t.Box,{className:W.wrap},g.default.createElement(t.Box,{className:W.title},g.default.createElement("span",null,i("wallet_extension_top_title_added_seed_phrase1",{seedPhrase:i("wallet_extension_top_title_added_seed_phrase2")}))),g.default.createElement(b.Text,{className:W.desc},i("wallet_extension_top_maintitle_added_seed_phrase")),g.default.createElement(rt,{className:W.firstScreenImg,src:n})),g.default.createElement(zt,{handleNext:o}))},ks=e=>{let{handleNext:o,handleClose:r}=e,n=it({light:"/cdn/assets/imgs/245/4A7B68AABB586801.png",dark:"/cdn/assets/imgs/245/46C68B7C7B93F25B.png"});return g.default.createElement(g.default.Fragment,null,g.default.createElement(ct,{currentStep:1,handleClose:r}),g.default.createElement(t.Box,{className:W.wrap},g.default.createElement(t.Box,{className:W.title},i("wallet_extension_top_title_unlock_hardware")),g.default.createElement(b.Text,{className:W.desc},i("wallet_extension_top_subtitle_confirm_unlock")),g.default.createElement(rt,{src:n,className:W.secondAndFourthScreenImg})),g.default.createElement(zt,{handleNext:o}))},Ms=e=>{let{handleNext:o,handleClose:r}=e,n=it({light:"/cdn/assets/imgs/245/21F0D08062856488.png",dark:"/cdn/assets/imgs/245/D8A2A5141B0A6F22.png"});return g.default.createElement(g.default.Fragment,null,g.default.createElement(ct,{currentStep:2,handleClose:r}),g.default.createElement(t.Box,{className:W.wrap},g.default.createElement(t.Box,{className:W.title},i("wallet_extension_top_title_usb_connected")),g.default.createElement(b.Text,{className:W.desc},i("wallet_extension_top_subtitle_after_connected")),g.default.createElement(rt,{src:n,className:W.thirdScreenImg})),g.default.createElement(zt,{handleNext:o}))},Os=e=>{let{handleClose:o}=e,r=it({light:"/cdn/assets/imgs/245/21F0D08062856488.png",dark:"/cdn/assets/imgs/245/D8A2A5141B0A6F22.png"});return g.default.createElement(g.default.Fragment,null,g.default.createElement(ct,{currentStep:3,handleClose:o}),g.default.createElement(t.Box,{className:W.wrap},g.default.createElement(t.Box,{className:W.title},i("wallet_extension_top_title_asset_allocation1",{app:i("wallet_extension_top_title_asset_allocation2")})),g.default.createElement(b.Text,{className:W.desc},i("wallet_extension_top_subtitle_turnon_ledger")),g.default.createElement(rt,{src:r,className:W.secondAndFourthScreenImg})),g.default.createElement(t.Box,{className:W.footerWrap},g.default.createElement(I,{category:I.CATEGORY.fill,type:I.TYPE.highlight,size:I.SIZE.lg,className:"wallet-management__button",onClick:o},i("wallet_extension_footer_btn_connect1"))))},Ds=[bs,ks,Ms,Os],vs=()=>{let e=(0,Tr.useDispatch)(),o=(0,Er.useHistory)(),[r,n]=(0,g.useState)(0),l=Ds[r],m=(0,g.useCallback)(()=>{n(d=>++d)},[]),p=(0,g.useCallback)(()=>{o.replace(Ye)},[o]);return(0,g.useEffect)(()=>{e(vt("isLedgerImported",!0))},[e]),g.default.createElement(t.Container,{className:W.root},g.default.createElement(l,{handleNext:m,handleClose:p}))},Br=vs;s();a();var re=c(E());S();qo();s();a();var pt=c(E()),Yt=c(le()),xo=c(te()),go=c(uo());S();Ce();var Lr=(e=!1)=>{let o=M(),r=(0,xo.useHistory)(),n=o.get("type"),l=o.get("walletId"),m=(0,Yt.useSelector)(Yo),p=[];if(n==="addChain")if(m[l]){let{account:d}=m[l];p=Object.keys(d)}else e&&(D.error(i("wallet_extension_top_error_parameters")),r.replace(ee));return p},Ir=()=>{let e=Lr(!0),o=(0,Yt.useSelector)(nt);return(0,pt.useMemo)(()=>xr.map(({chain:r,...n})=>({chain:r,config:n,allChains:o.filter(l=>l.baseChain===r),imported:e.includes(r)})),[e,o])},Cr=()=>{let e=Lr(),o=(0,Yt.useSelector)(nt);return(0,pt.useMemo)(()=>[je,Bt].map(n=>{let l=o.find(m=>m.baseChain===n);return{imported:e.includes(n),...l}}),[e,o])},Nr=e=>{let o=(0,xo.useHistory)(),r=M(),n=r.get("type"),l=r.get("walletId");return(0,pt.useCallback)(async()=>{let m=await mt.hasConnectedLedger(),p=!1;if(m||(p=(await mt.requestLedgerDevice()).length===0),p){[R.addAccount,R.addChain].includes(n)&&o.goBack();return}let d=`${de}/${w.ledger}?${go.default.stringify({baseChain:e})}`;n&&l&&(d+=`&${go.default.stringify({type:n,walletId:l})}`),o.push(d)},[o,n,l,e])};s();a();var dt={root:"_root_f8vjo_1",chainList:"_chainList_f8vjo_6",footerWrap:"_footerWrap_f8vjo_10"};var Ws=[st,Go],Fs=()=>{let e=M(),o=e.get("type"),r=e.get("hideBack"),[n,l]=(0,re.useState)(""),m=Ir(),p=Cr(),d=Nr(n),y=m?.filter(({chain:_})=>Ws.includes(_))||[];return re.default.createElement(t.FlexBox,{className:dt.root,align:t.ALIGN.unset,direction:t.DIRECTION.vertical},re.default.createElement(Y,{closeable:!1,backable:!r,className:dt.navigator,title:i("wallet_extension_top_maintitle_select_network")}),re.default.createElement(t.Box,{className:dt.chainList},y.map(({chain:_,config:h,allChains:f,imported:x})=>{let{titleKey:T,networkCountKey:B,importLedgerConfig:{supportNetworksKey:A}}=h;return re.default.createElement(fo,{imported:x,selected:_===n,handleClick:()=>{x||l(_)}},re.default.createElement(gr,{titleKey:T,networkCountKey:B,descriptionKey:A,chainsList:f,imported:x,hideRightIcon:!0}))}),p.map(_=>re.default.createElement(fo,{imported:_.imported,key:_.chainName,selected:_.baseChain===n,handleClick:()=>{_.imported||l(_.baseChain)},..._}))),re.default.createElement(t.Box,{className:dt.footerWrap},re.default.createElement(I,{category:I.CATEGORY.fill,type:I.TYPE.highlight,size:I.SIZE.lg,onClick:d,className:"wallet-management__button",disabled:!n},o==="addChain"?i("wallet_extension_footer_btn_add_network"):i("wallet_addwallet_btn_conncet_hardware_wallet"))))},Ar=Fs;s();a();var X=c(E()),ft=c(te());S();s();a();var J=c(E());Be();s();a();var Z={"retina-border-basic":"_retina-border-basic_1f1rt_1",retinaBorderBasic:"_retina-border-basic_1f1rt_1",root:"_root_1f1rt_29",header:"_header_1f1rt_38",back:"_back_1f1rt_75",close:"_close_1f1rt_76",title:"_title_1f1rt_80",content:"_content_1f1rt_84",selectorTitle:"_selectorTitle_1f1rt_87",selector:"_selector_1f1rt_87",item:"_item_1f1rt_97",lock:"_lock_1f1rt_101",button:"_button_1f1rt_106"};var Ps=({handleClick:e=gt,visible:o=!0})=>o?J.default.createElement(t.Box,{className:Z.root,onClick:e},J.default.createElement(t.FlexBox,{justify:"space-between",className:Z.header},J.default.createElement(ne.Input,{active:!0,className:Z.back}),J.default.createElement(ne.Input,{active:!0,className:Z.title}),J.default.createElement(ne.Input,{active:!0,className:Z.close})),J.default.createElement(t.Box,{className:Z.content},J.default.createElement(ne.Input,{active:!0,className:Z.selectorTitle}),J.default.createElement(ne.Input,{active:!0,className:Z.selector}),J.default.createElement(ne.Input,{active:!0,className:Z.selectorTitle}),J.default.createElement(ne.Input,{active:!0,className:Z.item}),J.default.createElement(ne.Input,{active:!0,className:Z.lock})),J.default.createElement(ne.Input,{active:!0,className:Z.button})):null,he=Ps;s();a();var ce=c(E());var Ur=c(ze());S();Ce();s();a();var N=c(E()),Sr=c(le()),wo=c(Le());Be();S();s();a();var _t=c(E());S();s();a();var Vt={root:"_root_v9tdu_1",importedRoot:"_importedRoot_v9tdu_9",tag:"_tag_v9tdu_13"};var j="SELECTED",F="IMPORTED",Us=({selectType:e})=>e===F?_t.default.createElement(t.FlexBox,{className:Vt.importedRoot,align:t.ALIGN.center},_t.default.createElement(t.Box,{className:Vt.tag},i("wallet_extension_card_label_added"))):_t.default.createElement(t.FlexBox,{className:Vt.root,align:t.ALIGN.center},_t.default.createElement(Uo,{checked:e===j,circle:!0})),ie=Us;Ce();Fo();s();a();var Xt=({account:e,selected:o,selectedAddressesInTargetIdentity:r=[],baseChain:n})=>{let l=m=>m.some(p=>(Ht(p)&&(p=p?.address),Ne(p,e.address,{localType:n})));return l(r)?F:l(o)?j:""};s();a();var H={"retina-border-basic":"_retina-border-basic_t9fhu_1",retinaBorderBasic:"_retina-border-basic_t9fhu_1",root:"_root_t9fhu_29",SELECTED:"_SELECTED_t9fhu_37",selected:"_SELECTED_t9fhu_37",IMPORTED:"_IMPORTED_t9fhu_40",imported:"_IMPORTED_t9fhu_40",main:"_main_t9fhu_43",address:"_address_t9fhu_46",asset:"_asset_t9fhu_52",dontHaveAsset:"_dontHaveAsset_t9fhu_53",assetArrow:"_assetArrow_t9fhu_64",assetModal:"_assetModal_t9fhu_72",assetList:"_assetList_t9fhu_72",chainImage:"_chainImage_t9fhu_116",chainName:"_chainName_t9fhu_121",coinAmountDisplay:"_coinAmountDisplay_t9fhu_126",coinAmountDisplayText:"_coinAmountDisplayText_t9fhu_131",commonFooter:"_commonFooter_t9fhu_137"};var To=({account:e,onSelect:o,selectType:r})=>{let[n,l]=(0,N.useState)(!1),m=(0,Sr.useSelector)(nt),p=_r(),d=m.filter(f=>f.baseChain===Q),{assetList:y=[]}=e,_=(0,N.useMemo)(()=>d.map(f=>{let{coinId:x}=f,T=Oo(f),B=y.find(O=>O.coinId===x);T.coinAmount=B?.coinAmount||"0";let A=p[x];return A&&(T.decimals=A.decimals,T.symbol=A.symbol),T}).sort((f,x)=>x.coinAmount-f.coinAmount),[d,y,p]),{address:h}=e;return N.default.createElement(N.default.Fragment,null,N.default.createElement(t.FlexBox,{align:t.ALIGN.center,className:(0,wo.default)(H.root,{[H.SELECTED]:r===j,[H.IMPORTED]:r===F}),key:h,onClick:()=>{r!==F&&o(e)}},N.default.createElement(t.Box,{className:H.main},N.default.createElement(t.Box,{className:H.address},e.address),e.hasAsset?N.default.createElement(t.Box,{className:H.asset,onClick:f=>{f.stopPropagation(),l(!0)}},N.default.createElement("span",null,i("wallet_extension_card_btn_view_assets")),N.default.createElement(ae,{className:(0,wo.default)("okds-arrow-chevron-right-centered-md",H.assetArrow)})):N.default.createElement(t.Box,{className:H.dontHaveAsset},N.default.createElement("span",null,i("wallet_extension_card_btn_noearnings_yet")))),N.default.createElement(ie,{selectType:r})),N.default.createElement(qe.Action,{onClose:()=>{l(!1)},className:H.assetModal,visible:n,hideCloseBtn:!0,alignBottom:!0,whiteboard:!0,title:null},N.default.createElement(t.Box,{className:H.assetList},_.map(f=>N.default.createElement(t.FlexBox,{align:t.ALIGN.center,className:H.asset},N.default.createElement(Ho,{className:H.chainImage,src:f.image||Zo}),N.default.createElement(t.Box,{className:H.chainName},N.default.createElement(yr,{maxWidth:"192px",text:f.chainName})),N.default.createElement(t.Box,{className:H.coinAmountDisplay},N.default.createElement(b.DisplayAmount,{className:H.coinAmountDisplayText,mode:b.CRYPTO,symbol:f.symbol,decimals:f.decimals,ellipsis:{tooltip:!0}},f?.coinAmount))))),N.default.createElement(t.Box,{className:H.commonFooter},N.default.createElement(I,{category:I.CATEGORY.fill,type:I.TYPE.highlight,size:I.SIZE.lg,onClick:()=>l(!1),block:!0},i("wallet_extension_footer_btn_same_device_ok")))))};To.pickAssetAccounts=e=>{let o=[];return Se(e)&&e.forEach(r=>{let{assetList:n=[]}=r||{};Se(n)&&n.some(l=>wt(l?.coinAmount,0))&&(r.hasAsset=!0,o.push(r))}),o};To.getSelectType=Xt;var br=To;s();a();var ge=c(E()),kr=c(Le());S();$o();s();a();var _e={root:"_root_f2f0f_1",SELECTED:"_SELECTED_f2f0f_8",selected:"_SELECTED_f2f0f_8",IMPORTED:"_IMPORTED_f2f0f_11",imported:"_IMPORTED_f2f0f_11",addressBox:"_addressBox_f2f0f_14",block:"_block_f2f0f_18",tag:"_tag_f2f0f_29",assets:"_assets_f2f0f_40",address:"_address_f2f0f_14"};var Eo=({account:e,onSelect:o,selectType:r,baseCoin:n})=>ge.default.createElement(t.FlexBox,{align:t.ALIGN.center,className:(0,kr.default)(_e.root,{[_e.SELECTED]:r===j,[_e.IMPORTED]:r===F}),onClick:()=>{r!==F&&o(e)}},ge.default.createElement(t.Box,{className:_e.addressBox},at.map(l=>ge.default.createElement(t.Box,{className:_e.block},ge.default.createElement(t.Box,{className:_e.tag},i(jo[l])),ge.default.createElement(b.DisplayAmount,{className:_e.assets,mode:b.CRYPTO,symbol:n.symbol,decimals:n.decimals,ellipsis:{tooltip:!0}},e[l]?.coinAmount),ge.default.createElement(t.Box,{className:_e.address},e[l]?.address)))),ge.default.createElement(ie,{selectType:r}));Eo.pickAssetAccounts=e=>{let o=[];return Se(e)&&e.forEach(r=>{r?.hasAsset&&o.push(r)}),o};Eo.getSelectType=({account:e,selected:o,selectedAddressesInTargetIdentity:r,baseChain:n})=>{let l=m=>m.some(p=>{Ht(p)&&(p=p?.address);let d=!1;return at.forEach(y=>{Ne(e?.[y]?.address,p,{localType:n})&&(d=!0)}),d});return l(r)?F:l(o)?j:""};var Mr=Eo;s();a();var Xe=c(E()),Or=c(Le());Fo();s();a();var ke={root:"_root_h2by8_1",SELECTED:"_SELECTED_h2by8_9",selected:"_SELECTED_h2by8_9",IMPORTED:"_IMPORTED_h2by8_12",imported:"_IMPORTED_h2by8_12",main:"_main_h2by8_15",asset:"_asset_h2by8_19",address:"_address_h2by8_26"};var Bo=({account:e,onSelect:o,selectType:r,baseCoin:n})=>{let{symbol:l,decimals:m}=n,{address:p}=e,d=e?.coinAmount;return Xe.default.createElement(t.FlexBox,{align:t.ALIGN.center,className:(0,Or.default)(ke.root,{[ke.SELECTED]:r===j,[ke.IMPORTED]:r===F}),key:p,onClick:()=>{r!==F&&o(e)}},Xe.default.createElement(t.Box,{className:ke.main},Xe.default.createElement(b.DisplayAmount,{className:ke.asset,mode:b.CRYPTO,symbol:l,decimals:m,ellipsis:{tooltip:!0}},d),Xe.default.createElement(t.Box,{className:ke.address},e.address)),Xe.default.createElement(ie,{selectType:r}))};Bo.pickAssetAccounts=e=>{let o=[];return Se(e)&&e.forEach(r=>{wt(r?.coinAmount,0)&&o.push(r)}),o};Bo.getSelectType=Xt;var Lo=Bo;s();a();var Me=c(E()),Dr=c(te());S();s();a();var Io={title:"_title_1nhzx_1",selector:"_selector_1nhzx_7"};var Ks=({basePath:e,setBasePath:o})=>{let{hardware:r}=(0,Dr.useParams)(),l=M().get("baseChain"),m=(0,Me.useMemo)(()=>rr?.[r]?.[l],[l,r]);return m?Me.default.createElement(Me.default.Fragment,null,Me.default.createElement(b.Text,{className:Io.title},i("wallet_addwallet_subtitle_hardware_wallet_select_a_hd_path")),Me.default.createElement(Tt,{value:e,className:Io.selector,type:Tt.TYPE.input,options:m,onChange:({value:p})=>{o(p)},align:Tt.DIRECTION.right})):null},vr=Ks;s();a();var Qe=c(E());S();s();a();var Co={showAll:"_showAll_dqqdk_1",showAllText:"_showAllText_dqqdk_11"};var Hs=({hasAssetAccounts:e,renderList:o,handleUnFold:r})=>Qe.default.createElement(Qe.default.Fragment,null,o(e),Qe.default.createElement(t.Box,{className:Co.showAll,onClick:r},Qe.default.createElement("span",{className:Co.showAllText},i("wallet_extension_top_dropdown_show_assets")),Qe.default.createElement(ae,{className:"okds-arrow-chevron-down-md"}))),Wr=Hs;s();a();S();var me=c(E()),Qt=c(ze());s();a();var No={loadMore:"_loadMore_15zyi_1",loadMoreText:"_loadMoreText_15zyi_9"};var Fr=8,Gs=({renderList:e,scrollWrapRef:o,fetchAddress:r,firstPageAccounts:n})=>{let l=(0,me.useRef)(),[m,p]=(0,me.useState)(Fr),d=()=>{clearInterval(l.current),p(Fr),l.current=setInterval(()=>{p(f=>Math.max(f-1,0))},1e3)};(0,Qt.useUnmount)(()=>{clearInterval(l.current)});let{data:y,noMore:_}=(0,Qt.useInfiniteScroll)(async f=>{d();let x=f?.pageNo||1,T=await r(x);return x===1&&(T=[...n,...T]),{list:T,pageNo:x+1}},{target:o,isNoMore:f=>f?.list?.length>=1e3}),h=y?.list||n;return me.default.createElement(me.default.Fragment,null,e(h),_?null:me.default.createElement(t.Box,{className:No.loadMore},me.default.createElement(Ge,null),me.default.createElement("span",{className:No.loadMoreText},m>0?i("wallet_extension_footer_loading_est_loading",{value:m}):i("wallet_extension_footer_loading_wait_amoment"))))},Pr=Gs;s();a();var Zt={root:"_root_yoqwy_1",title:"_title_yoqwy_7",icon:"_icon_yoqwy_13"};var Ao={[Q]:br,[je]:Mr,[Et]:Lo,[Bt]:Lo},qs=({baseChain:e,fetchAddress:o,basePath:r,setBasePath:n,firstPageAccounts:l,coinId:m,selected:p,selectedAddressesInTargetIdentity:d,...y})=>{let _=(0,ce.useRef)(),h=Ao[e],f=h.pickAssetAccounts(l),x=f.length,[T,{setFalse:B}]=(0,Ur.useBoolean)(!!(x&&x!==l.length)),{baseCoin:A}=ur(m,!0),O=K=>K.map(L=>{let v=h.getSelectType({account:L,selected:p,selectedAddressesInTargetIdentity:d,baseChain:e});return ce.default.createElement(h,{account:L,baseCoin:A,selectType:v,...y})});return ce.default.createElement(t.FlexBox,{ref:_,className:Zt.root,align:t.ALIGN.unset,direction:t.DIRECTION.vertical},ce.default.createElement(vr,{basePath:r,setBasePath:n}),ce.default.createElement(b.Text,{className:Zt.title},i("wallet_extension_top_title_select"),e===Q?ce.default.createElement(Ae,{className:Zt.icon,icon:"okx-wallet-plugin-information-circle",tooltip:{title:i("wallet_extension_toast_tooltip_try_switch"),placement:Ko.DIRECTION.bottom},size:Ae.SIZE.xs}):null),T?ce.default.createElement(Wr,{renderList:O,handleUnFold:B,hasAssetAccounts:f}):ce.default.createElement(Pr,{renderList:O,fetchAddress:o,scrollWrapRef:_,firstPageAccounts:l}))},Kr=qs;s();a();var Je=c(E()),Ze=c(le()),ut=c(te());S();po();Cs();Is();zo();Ce();$o();var Hr=()=>{let e=M(),{hardware:o}=(0,ut.useParams)(),r=e.get("baseChain"),[n,l]=(0,Je.useState)(()=>o===w.ledger?r===Et?or:er:tr);return[n,l]},Gr=()=>{let e=[],o=M(),r=o.get("walletId"),n=o.get("baseChain");return((0,Ze.useSelector)(Nt).find(d=>(d.walletIdentities||[]).some(_=>_.walletId===r))?.walletIdentities||[]).forEach(d=>{let y=d?.account?.[n];y&&e.push(y)}),e},qr=()=>{let e=M(),o=e.get("type"),r=e.get("baseChain"),n=qt()?.length,[l,m]=(0,Je.useState)([]);return[l,d=>{m(y=>o===R.addChain?[d]:y.some(_=>Ne(_.address,d.address,{localType:r}))?y.filter(_=>!Ne(_.address,d.address,{localType:r})):n+y.length>=1e3?(D.error({title:i("wallet_extension_hardware_wallet_notif_max_account",{num:1e3})}),y):[...y,d])}]},jr=e=>{let[o,r]=(0,Je.useState)(!1),{hardware:n}=(0,ut.useParams)(),l=M(),m=l.get("type"),p=l.get("baseChain"),d=l.get("walletId"),y=(0,ut.useHistory)(),_=(0,Ze.useDispatch)(),h=(0,Ze.useSelector)(At),f=(0,Ze.useSelector)(Ct),x=(0,Je.useMemo)(()=>e.map(B=>{let A={};return A.path=B.path,A.address=B.address,p===je&&at.forEach(O=>{let{address:K,path:L,publicKey:v}=B[O];A[O]={address:K,path:L,publicKey:v}}),A}),[e,p]);return[o,async()=>{try{let B={accounts:x,hardware:n,baseChain:p,walletId:d,type:m},A=Ro[w.ledger],O=await sr()||{};if(O?.productName&&(A=`${oe[w.ledger]} ${O.productName}`),B.ledgerInfo={productName:A},!h){_(Dt(B)),y.push(`${Ot}?from=${$t.HARDWARE}`);return}if(!f){D.error({title:i("wallet_extension_hardware_wallet_notif_please_unlock")});return}St({hardwarewallet_brand:n,device_name:A}),r(!0),await _(jt(B)),await $e(_);let K=ee;[R.addAccount,R.addChain].includes(m)&&(K=`${Jo}?from=seedVerify`);let L=Po()===Wo;if(m===R.addChain&&L){_(lt()),y.go(-2);return}if(m===R.addAccount&&L){_(lt()),y.go(-2);return}L?y.replace(K):globalThis.platform.openExtensionInPopup(K),r(!1)}catch(B){r(!1),B.message===It&&D.error(i("extension_wallet_addwallet_toast_wallets_added",{amount:1e3})),B.message===Lt&&D.error(i("wallet_home_toast_network_error"))}},_]};s();a();var Jt={wrap:"_wrap_jx54d_1",root:"_root_jx54d_6",footerWrap:"_footerWrap_jx54d_10",accountList:"_accountList_jx54d_15",account:"_account_jx54d_15",accountLeft:"_accountLeft_jx54d_28",address:"_address_jx54d_31",path:"_path_jx54d_38",assets:"_assets_jx54d_44",accountRight:"_accountRight_jx54d_49"};var js=()=>{let{hardware:e}=(0,ft.useParams)(),o=M(),r=o.get("hideBack"),n=o.get("baseChain"),l=Gr(),[m,p]=Hr(),[d,y]=qr(),_=fr({baseChain:n})||[],{coinId:h}=_?.[0]||{},f=(0,ft.useHistory)(),[x,T]=(0,X.useState)([]),B=async Te=>{if(!e)return[];try{return await pr({hardware:e,page:Te,basePath:m,baseChain:n,coinId:h})}catch(Ue){switch(Ue.name){case"LockedDeviceError":Pt.openModal(Ft.lockedDevice,{baseChain:n,onButtonClick:()=>{window.location.reload()},onCloseBtnClick:()=>{f.goBack()}});break;case"InvalidStateError":case"TransportStatusError":Pt.openModal(Ft.wrongAppToGetAddress,{baseChain:n,onButtonClick:()=>{window.location.reload()},onCloseBtnClick:()=>{f.goBack()}});break;case"TransportError":break;default:Pt.openModal(Ft.connectError,{onButtonClick:async()=>{if(Ue.name==="TransportOpenUserCancelled"&&(await mt.requestLedgerDevice()).length){K();return}window.location.reload()},onCloseBtnClick:()=>{f.goBack()}});break}throw Ue}},[A,O]=(0,X.useState)(!0),K=async()=>{O(!0);let Te=await B(0);T(Te),O(!1)};(0,X.useEffect)(()=>{h&&K()},[m,h]);let[L,v]=jr(d);return X.default.createElement(t.Box,{className:Jt.wrap},A?X.default.createElement(he,null):X.default.createElement(t.FlexBox,{className:Jt.root,align:t.ALIGN.unset,direction:t.DIRECTION.vertical},X.default.createElement(Y,{closeable:!1,backable:!r,title:i("wallet_extension_top_maintitle_select_address")}),X.default.createElement(Kr,{basePath:m,setBasePath:p,firstPageAccounts:x,selected:d,selectedAddressesInTargetIdentity:l,baseChain:n,onSelect:y,coinId:h,fetchAddress:B}),X.default.createElement(t.Box,{className:Jt.footerWrap},X.default.createElement(I,{category:I.CATEGORY.fill,type:I.TYPE.highlight,size:I.SIZE.lg,className:"wallet-management__button",disabled:!d.length,loading:L,onClick:v},d.length?i("wallet_extension_footer_btn_connecting",{value:d.length}):i("wallet_extension_footer_btn_connect")))))},$r=e=>{let o=(0,ft.useHistory)(),n=M().get("baseChain");return Object.keys(Ao).includes(n)?X.default.createElement(js,{...e}):(D.error(i("wallet_extension_top_error_parameters")),o.replace(ee),null)};s();a();var yt=c(E());S();s();a();var zr=c(uo()),Yr=c(le()),Vr=c(te()),Rt=c(E());Ce();var Xr=()=>{let e=(0,Vr.useHistory)(),{isLedgerImported:o}=(0,Yr.useSelector)(Wt),r=(0,Rt.useMemo)(()=>({[w.ledger](){o?e.push(Ye):e.push(kt)},[w.trezor](){e.push(`${de}/${w.trezor}?${zr.default.stringify({baseChain:Q})}`)},[w.onekey](){e.push(Mt)},[w.keystone](){e.push(`${de}/${w.keystone}`)}}),[o,e]);return(0,Rt.useCallback)(({brand:l})=>{Xo({hardwarewallet_brand:l}),Qo(),r[l]()},[r])};s();a();var So=c(Le());S();var ue=c(E());s();a();var Oe={root:"_root_r4apb_1",recommend:"_recommend_r4apb_21",brandInfo:"_brandInfo_r4apb_24",icon:"_icon_r4apb_29",name:"_name_r4apb_34",arrow:"_arrow_r4apb_39"};var $s=e=>{let{icon:o,wallet:r,onClick:n}=e,l=(0,ue.useCallback)(()=>{n(r)},[r,n]);return ue.default.createElement(t.Box,{onClick:l,className:Oe.root},ue.default.createElement(t.Box,{className:Oe.brandInfo},ue.default.createElement(Ae,{className:(0,So.default)(o,Oe.icon)}),ue.default.createElement(t.Box,{className:Oe.name},r.name),r.recommend?ue.default.createElement(Ie,{className:Oe.recommend,type:Ie.TYPE.rect,color:Ie.COLOR.green},i("wallet_onekey_tag_new")):null),ue.default.createElement(Ae,{size:Ae.SIZE.xs,className:(0,So.default)("okds-arrow-chevron-right-centered-md",Oe.arrow)}))},eo=$s;s();a();var to={root:"_root_gtfj8_1",navigator:"_navigator_gtfj8_4",wrap:"_wrap_gtfj8_7"};var zs=[{name:oe[w.keystone],icon:"okx-wallet-plugin-keystone",brand:w.keystone,recommend:!0},dr()?{name:oe[w.ledger],icon:"okx-wallet-plugin-ledger",brand:w.ledger,recommend:!1}:null,{name:oe[w.onekey],icon:"okx-wallet-plugin-onekey",brand:w.onekey,recommend:!1},{name:oe[w.trezor],icon:"okx-wallet-plugin-trezor",brand:w.trezor,recommend:!1}].filter(Boolean),Ys=()=>{let e=Xr();return yt.default.createElement(t.Container,{className:to.root},yt.default.createElement(Y,{closeable:!1,backable:!1,bordered:!1,className:to.navigator,title:i("wallet_addwallet_maintitle_connect_hareware_wallet")}),yt.default.createElement(t.Box,{className:to.wrap},zs.map(o=>yt.default.createElement(eo,{wallet:o,icon:o.icon,onClick:e}))))},Qr=Ys;s();a();Be();var as=c(ze());S();var ns=c(te());var U=c(E()),ro=c(le());Ce();s();a();var xe=c(E()),Zr=c(Le());Be();S();s();a();var De={root:"_root_gwbd5_1",SELECTED:"_SELECTED_gwbd5_10",selected:"_SELECTED_gwbd5_10",IMPORTED:"_IMPORTED_gwbd5_13",imported:"_IMPORTED_gwbd5_13",selector:"_selector_gwbd5_16",main:"_main_gwbd5_19",name:"_name_gwbd5_23",assets:"_assets_gwbd5_29"};var Vs=e=>{let{account:o,children:r,setSelected:n,selectType:l,badgeSlot:m=null}=e,p=qt()?.length;return xe.default.createElement(t.Box,{className:(0,Zr.default)(De.root,De[l]),onClick:()=>{l!==F&&n(d=>l===j?d.filter(y=>y.index!==o.index):p+d.length>=1e3?(D.error({title:i("wallet_extension_hardware_wallet_notif_max_account",{num:1e3})}),d):[...d,o])}},xe.default.createElement(t.FlexBox,{className:De.selector,align:t.ALIGN.center},xe.default.createElement(t.FlexBox,{justify:t.ALIGN.center,direction:t.DIRECTION.vertical,className:De.main},xe.default.createElement(t.FlexBox,{align:t.ALIGN.center},xe.default.createElement(t.Box,{className:De.name},i("wallet_extension_card_title_account",{value:`${Do(`${o.index+1}`,2,"0")}`})),m),!!o.balance&&xe.default.createElement(b.DisplayAmount,{ellipsis:!0,symbol:"$",mode:b.LEGAL,useApproximate:!1,className:De.assets},o.balance)),xe.default.createElement(ie,{selectType:l})),r)},Re=Vs;Ns();po();s();a();var Jr=c(E());qo();var Xs=(e,o)=>{let r=e.index;return r!==void 0&&r===o.index},Qs=(e,o)=>{let r=o?.[st]?.address;return!!r&&e?.account?.[st]===r},Zs=(e,o)=>(0,Jr.useCallback)(r=>{let n=e.some(m=>m.index===r.index);return o.some(m=>Xs(m,r)||Qs(m,r))?F:n?j:""},[e,o]),et=Zs;s();a();var bo=c(Le());S();var k=c(E());Ce();s();a();var P={root:"_root_7hr89_1",tip:"_tip_7hr89_8",icon:"_icon_7hr89_13",info:"_info_7hr89_19",desc:"_desc_7hr89_23",entry:"_entry_7hr89_28",dialogRoot:"_dialogRoot_7hr89_34",title:"_title_7hr89_37",listWrap:"_listWrap_7hr89_42",pathItem:"_pathItem_7hr89_42",recommendItem:"_recommendItem_7hr89_51",SELECTED:"_SELECTED_7hr89_54",selected:"_SELECTED_7hr89_54",recommend:"_recommend_7hr89_51",detail:"_detail_7hr89_69",path:"_path_7hr89_42",address:"_address_7hr89_80",balance:"_balance_7hr89_88"};var Rr=(0,k.memo)(({account:e,selectType:o,updateAddressType:r})=>{let{mainnet:n,addressType:l,addressTypeUpdated:m}=e,p=l[Q],[d,y]=(0,k.useState)(!1),h=Object.values(n).filter(({balance:T})=>vo.gt(T,0)),f=T=>{y(!1),r(e,T,Q)},x=(0,k.useMemo)(()=>o===F||m?i("wallet_extension_hardware_wallet_notif_current_address",{network:"EVM",address:co(n[p].address)}):i("wallet_extension_card_alert_default_option",{network:"EVM",address:co(n[p].address)}),[m,o,p,n]);return h.length<=1||h.length===2&&h[0].address===h[1].address?null:k.default.createElement(t.Box,{className:P.root,onClick:T=>{T.stopPropagation()}},k.default.createElement(t.FlexBox,{className:P.tip},k.default.createElement(ae,{className:(0,bo.default)("okx-wallet-plugin-information-circle",P.icon)}),k.default.createElement(t.Box,{className:P.info},k.default.createElement(t.Box,{className:P.desc},x),k.default.createElement(t.Box,{className:P.entry,onClick:()=>{y(!0)}},i("wallet_extension_card_textbtn_change_network",{network:"EVM"})))),k.default.createElement(qe.Action,{noContentPadding:!0,visible:d,alignBottom:!0,onClose:()=>{y(!1)}},k.default.createElement(t.Box,{className:P.dialogRoot},k.default.createElement(t.Box,{className:P.title},i("wallet_extension_top_title_change_evm",{network:"EVM"})),k.default.createElement(t.Box,{className:P.listWrap},Kt(e.index).map(T=>{let B=p===T.type;return k.default.createElement(t.FlexBox,{className:(0,bo.default)(P.pathItem,{[P.recommendItem]:T.recommend,[P.SELECTED]:B}),onClick:()=>{B||f(T.type)},align:t.ALIGN.center},!!T.recommend&&k.default.createElement(t.Box,{className:P.recommend},i("wallet_extension_top_tag_recommended")),k.default.createElement(t.Box,{className:P.detail},k.default.createElement(t.Box,{className:P.path},T.pathName),k.default.createElement(t.Box,{className:P.address},n[T.type].address),k.default.createElement(b.DisplayAmount,{ellipsis:!0,symbol:"$",mode:b.LEGAL,useApproximate:!1,className:P.balance},n[T.type].balance)),k.default.createElement(ie,{selectType:B?j:""}))})))))});s();a();var oo=c(E()),ht=c(le()),es=c(te());S();po();zo();var Js=(e,o)=>{let r={[w.onekey](){let{onekeyInfo:n}=o,l=n?.deviceType;return l?`${e}_${l}`:e},[w.keystone](){let{keystoneInfo:n}=o;return n?.device||e},[w.trezor](){return oe[w.trezor]}};return r[e]?r[e]():"unknown"},Rs=({hardware:e,selected:o,walletId:r,walletInfo:n={}})=>{let[l,m]=(0,oo.useState)(!1),p=(0,es.useHistory)(),d=(0,ht.useDispatch)(),y=M(),_=(0,ht.useSelector)(At),h=(0,ht.useSelector)(Ct),f=(0,oo.useCallback)(async()=>{try{let x={hardware:e,walletId:r,accounts:o,...n};if(r&&(x.type=R.addAccount),!_){d(Dt(x)),p.push(`${Ot}?from=${$t.HARDWARE}`);return}if(!h){D.error({title:i("wallet_extension_hardware_wallet_notif_please_unlock")});return}m(!0),St({hardwarewallet_brand:e,device_name:Js(e,n)}),await d(jt(x)),await $e(d),m(!1),R.addAccount===y.get("type")?(D.success({title:i("wallet_addacount_toast_account_created")}),d(lt()),e===w.trezor?globalThis.platform.openExtensionInPopup(ee):p.go(-1)):globalThis.platform.openExtensionInPopup(ee)}catch(x){m(!1),x.message===It&&D.error(i("extension_wallet_addwallet_toast_wallets_added",{amount:1e3})),x.message===Lt&&D.error(i("wallet_home_toast_network_error"))}},[y,p,o,e,r,d,n,h,_]);return[l,f]},tt=Rs;s();a();Be();var ts=c(le()),we=c(E());var ea=e=>{let r=M().get("walletId"),n=(0,ts.useSelector)(Nt),[l,m]=(0,we.useState)(()=>r?n.find(h=>(h.walletIdentities||[]).some(x=>x.walletId===r))||{}:{});(0,we.useEffect)(()=>{if(e&&io(l)){let h=n.find(f=>f.masterFingerprint===e);h&&!io(h)&&m(h)}},[n,e,l]);let[p,d]=(0,we.useState)([]);(0,we.useEffect)(()=>{let h=l?.walletIdentities||[];d(h)},[l]);let[y,_]=(0,we.useState)(r);return(0,we.useEffect)(()=>{let h=p?.[0];_(h?.walletId||"")},[p]),{targetKeyringIdentity:l,targetWalletIdentities:p,targetWalletId:y}},os=ea;s();a();var ve=c(E());Be();S();var ta=e=>{let o=(0,ve.useRef)(),r=(0,ve.useRef)(),[n,l]=(0,ve.useState)("");return(0,ve.useEffect)(()=>{if(!(o.current&&r.current))return gt;let m=new IntersectionObserver(([p])=>{p.isIntersecting?l(""):l(i("wallet_extension_top_title_select_account"))},{root:o.current});return m.observe(r.current),()=>{m.disconnect()}},[e]),{title:n,wrapRef:o,titleRef:r}},rs=ta;s();a();var ko=c(E());S();s();a();var ss={root:"_root_14fge_1"};var oa=({selected:e,isSubmiting:o,handleSubmit:r})=>ko.default.createElement(t.Box,{className:ss.root},ko.default.createElement(I,{block:!0,loading:o,category:I.CATEGORY.fill,type:I.TYPE.highlight,size:I.SIZE.lg,disabled:!e.length,onClick:r},e.length?i("wallet_extension_footer_btn_connecting",{value:e.length}):i("wallet_extension_footer_btn_connect"))),ot=oa;s();a();var We={wrap:"_wrap_i44ji_1",root:"_root_i44ji_6",navigator:"_navigator_i44ji_11",title:"_title_i44ji_20",desc:"_desc_i44ji_26"};var ls=()=>{let e=(0,ns.useHistory)(),[o,r]=(0,U.useState)(""),n=(0,ro.useSelector)(Vo),l=n[o]||{},{targetKeyringIdentity:m,targetWalletIdentities:p,targetWalletId:d}=os(o),[y,_]=(0,U.useState)([]),h=(0,ro.useDispatch)(),f=(0,U.useCallback)(async C=>{await mo().setScanedKeyStone(C),await $e(h)},[h]),{hasDangerKeystoneScaned:x}=hr(),T=(0,U.useCallback)(async C=>{r(C.masterFingerprint);let $=await ir(C),z=await ar($);await f({...C,accountsWithBalance:z});let{device:Ee,deviceVersion:Ke}=C;Ee===nr&&(!Ke||lr(Ke,"1.0.4")===-1)&&(x||(h(vt("hasDangerKeystoneScaned",!0)),_o.showUpdateModal()))},[f]),B=C=>{let $=n[C];T($)},A=async()=>{let C=await _o.openModal(mr.getAccounts,{onBackBtnClick(){e.goBack()}}),$=n[C.masterFingerprint];$&&(C.accountsWithBalance=$.accountsWithBalance),T(C)};(0,as.useMount)(()=>{m?.masterFingerprint?B(m?.masterFingerprint):A()});let O=l?.accountsWithBalance,{title:K,wrapRef:L,titleRef:v}=rs(O),Te=et(y,p),[Ue,Mo]=tt({walletInfo:{keystoneInfo:xt(l,["device","deviceId","masterFingerprint"])},selected:y,walletId:d,hardware:w.keystone}),Ts=async(C,$,z=Q)=>{let Ee=p.find(He=>He.index===C.index);Ee&&await mo().updateWalletAddress(Ee.walletId,{[z]:$});let{accountsWithBalance:Ke}=l,Bs=Ke.map(He=>{if(C.index===He.index){let{addressType:Ls}=He;return{...He,addressType:{...Ls,[z]:$},addressTypeUpdated:!0}}return He});f({...l,accountsWithBalance:Bs})},Es=((C={})=>$=>{let z=$?.addressType?.[Q];if(C[z])return C[z];let Ee=Kt(0).find(Ke=>Ke.type===z)?.pathName||"";return Ee?C[z]=Ee.split("|")?.[0]?.trim():C[z]="",C[z]})();return U.default.createElement(t.Box,{className:We.wrap},O?.length?U.default.createElement(t.FlexBox,{className:We.root,align:t.ALIGN.unset,direction:t.DIRECTION.vertical},U.default.createElement(Y,{closeable:!1,bordered:!1,title:K,className:We.navigator}),U.default.createElement(t.FlexBox,{direction:t.DIRECTION.vertical,className:We.wrap,ref:L},U.default.createElement(t.Box,{className:We.title,ref:v},i("wallet_extension_top_title_select_account")),U.default.createElement(t.Box,{className:We.desc},i("extension_wallet_hardware_wallet_text_multi_net")),O.map(C=>{let $=Te(C),z=Es(C);return U.default.createElement(Re,{account:C,selectType:$,setSelected:_,badgeSlot:z?U.default.createElement(Ie,{type:Ie.TYPE.rect},z):null},U.default.createElement(Rr,{account:C,selectType:$,updateAddressType:Ts}))})),U.default.createElement(ot,{selected:y,isSubmiting:Ue,handleSubmit:Mo})):U.default.createElement(he,null))};s();a();Be();S();var cs=c(le());var ps=c(te());var ds=c(ze()),G=c(E());s();a();var so=(e,o)=>`${e}${o}`,is=(e,o)=>!!(e?.connectId&&e.connectId===o.connectId&&e.firstEvmAddress===o.firstEvmAddress);s();a();var ao=c(E());var ms=e=>{let o=Ve(),r=(0,ao.useMemo)(()=>o?.find(m=>{if(Ut(m.initialType)){let{firstEvmAddress:p,connectId:d}=m?.onekeyInfo||{};return so(d,p)===e}return!1})||{},[o,e]),n=(0,ao.useMemo)(()=>r.walletIdentities||[],[r]),l=(0,ao.useMemo)(()=>n.length?n[0].walletId:"",[n]);return{targetKeyringIdentity:r,targetWalletIdentities:n,targetWalletId:l}};s();a();var Fe={wrap:"_wrap_19eua_1",root:"_root_19eua_6",list:"_list_19eua_10",desc:"_desc_19eua_16",loadMore:"_loadMore_19eua_22"};var ra=new Gt,sa=()=>{let e=M(),o=e.get("connectId"),r=e.get("firstEvmAddress"),n=so(o,r),{connectedOnekey:l}=(0,cs.useSelector)(Wt),m=l?.[n],p=(0,G.useRef)(),{data:d,noMore:y}=(0,ds.useInfiniteScroll)(async L=>{if(!m)return{list:[]};let v=L?.pageNo??0;return{list:await ra.getAccounts({page:v,onekeyInfo:m}),pageNo:v+1}},{target:p,isNoMore:L=>L?.list?.length>=1e3}),_=d?.list||m?.accountsWithBalance||[],[h,f]=(0,G.useState)([]),{targetWalletIdentities:x,targetWalletId:T}=ms(n),B=et(h,x),[A,O]=tt({walletInfo:{onekeyInfo:xt(m,["connectId","deviceId","deviceType","firstEvmAddress"])},selected:h,walletId:T,hardware:w.onekey}),K=(0,ps.useHistory)();return(0,G.useEffect)(()=>{m||(D.error(i("wallet_extension_top_error_parameters")),K.replace(ee))},[m,K,n]),G.default.createElement(t.Box,{className:Fe.wrap},G.default.createElement(t.FlexBox,{direction:t.DIRECTION.vertical,className:Fe.root},G.default.createElement(Y,{bordered:!1,closeable:!1,className:Fe.navigator,title:i("wallet_extension_onekey_title_import_account")}),G.default.createElement(t.Box,{ref:p,className:Fe.list},G.default.createElement(t.Box,{className:Fe.desc},i("extension_wallet_hardware_wallet_text_multi_net")),_?.map(L=>{let v=B(L);return G.default.createElement(Re,{account:L,selectType:v,setSelected:f})}),y?null:G.default.createElement(t.Box,{className:Fe.loadMore},G.default.createElement(Ge,null))),G.default.createElement(ot,{selected:h,isSubmiting:A,handleSubmit:O})),G.default.createElement(he,{visible:!_?.length}))},_s=sa;s();a();S();var us=c(ze());var fs=c(te()),q=c(E());s();a();var Pe={wrap:"_wrap_174i9_1",root:"_root_174i9_6",list:"_list_174i9_10",desc:"_desc_174i9_16",loadMore:"_loadMore_174i9_22"};var aa=new cr,na=()=>{let o=M().get("walletId"),[r,n]=(0,q.useState)(!1),l=async L=>{let v=L?.nextPage||0;return{list:await aa.getAccounts({page:v}),nextPage:v+1}},m=(0,q.useRef)(),{data:p,loading:d,noMore:y}=(0,us.useInfiniteScroll)(l,{target:m,isNoMore:L=>L?.list?.length>=1e3,onError:()=>{n(!0)}}),_=Ve(),[h,f]=(0,q.useState)([]),x=_?.find(({walletIdentities:L})=>L.some(v=>v.walletId===o)),{walletIdentities:T=[]}=x||{},B=et(h,T),[A,O]=tt({selected:h,walletId:o,hardware:w.trezor}),K=(0,fs.useHistory)();return q.default.createElement(t.Box,{className:Pe.wrap},q.default.createElement(t.FlexBox,{direction:t.DIRECTION.vertical,className:Pe.root},q.default.createElement(Y,{bordered:!1,closeable:!1,className:Pe.navigator,title:i("wallet_extension_onekey_title_import_account")}),q.default.createElement(t.Box,{ref:m,className:Pe.list},q.default.createElement(t.Box,{className:Pe.desc},i("extensions_hardware_support_text_evm_only",{brand:oe[w.trezor]})),p?.list?.map(L=>{let v=B(L);return q.default.createElement(Re,{account:L,selectType:v,setSelected:f})}),y?null:q.default.createElement(t.Box,{className:Pe.loadMore},q.default.createElement(Ge,null))),q.default.createElement(ot,{selected:h,isSubmiting:A,handleSubmit:O})),q.default.createElement(qe.Prompt,{btnFull:!0,visible:r,infoType:!1,alignBottom:!1,hideCloseBtn:!!o,title:i("wallet_add_wallet_maintitle_hardware_wallet_conncet_failed"),text:i("wallet_add_wallet_modal_hardware_wallet_conncet_failed_tip"),onConfirm:()=>{window.location.reload()},confirmBtnProps:{type:I.TYPE.highlight,size:I.SIZE.lg},confirmText:i("wallet_manage_wallet_btn_reconncet_hardware_wallet"),onClose:()=>{K.goBack()}}),q.default.createElement(he,{visible:d||r}))},ys=na;s();a();var gs=c(uo());S();var xs=c(le());var lo=c(ze()),fe=c(E());s();a();var no={root:"_root_pxrbs_1",navigator:"_navigator_pxrbs_4",list:"_list_pxrbs_7"};var hs=new Gt,la=({history:e})=>{let[o,r]=(0,fe.useState)([]),n=(0,fe.useRef)(),l=async()=>{try{let _=await hs.searchDevices();_.length?(r(_),n.current=null):n.current=setTimeout(()=>{l()},3e3)}catch{e.goBack()}};(0,lo.useMount)(l),(0,lo.useUnmount)(()=>{n.current&&clearTimeout(n.current)});let m=Ve(),p=(_,h)=>m.some(f=>{if(Ut(f.initialType)){let{onekeyInfo:x}=f;return is(x,{connectId:_,firstEvmAddress:h})}return!1}),d=(0,xs.useDispatch)(),y=async({connectId:_,deviceId:h,deviceType:f})=>{try{let x=await hs.getFirstEvmAddress({dispatch:d,connectId:_,deviceId:h,deviceType:f});if(p(_,x)){D.error({title:i("wallet_extension_hardware_wallet_notif_hardware_already")});return}e.push(`${de}/${w.onekey}?${gs.default.stringify({firstEvmAddress:x,connectId:_})}`)}catch(x){console.log(x)}};return fe.default.createElement(t.Container,{className:no.root,loading:o.length?!1:{loadingText:i("wallet_onekey_text_searching_for_equipment")}},fe.default.createElement(Y,{stickyStyle:{zIndex:3},className:no.navigator,closeable:!1,bordered:!1,title:i("wallet_onekey_title_connect_device")}),fe.default.createElement(t.Box,{className:no.list},o.map(_=>fe.default.createElement(eo,{wallet:_,onClick:y,icon:"okx-wallet-plugin-equipment"}))))},ws=la;var ia={[w.keystone]:ls,[w.ledger]:$r,[w.onekey]:_s,[w.trezor]:ys},ma=()=>pe.default.createElement(se.Switch,null,pe.default.createElement(se.Route,{path:bt,component:Qr,exact:!0}),pe.default.createElement(se.Route,{path:kt,component:Br,exact:!0}),pe.default.createElement(se.Route,{path:Ye,component:Ar,exact:!0}),pe.default.createElement(se.Route,{path:Mt,component:ws,exact:!0}),pe.default.createElement(se.Route,{path:`${de}/:hardware`,render:e=>{let o=e?.match?.params?.hardware,r=ia[o];return r?pe.default.createElement(r,null):pe.default.createElement(se.Redirect,{to:bt})},exact:!0}),pe.default.createElement(se.Redirect,{to:bt})),Yu=ma;export{Yu as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=ConnectHardware-KOSPC5UK.js.map
