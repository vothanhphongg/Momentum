LavaPack.loadBundle([[10,{"@metamask/assets-controllers":1361},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AssetsContractControllerInit=void 0;var n=e("@metamask/assets-controllers");r.AssetsContractControllerInit=({controllerMessenger:e,getGlobalChainId:t})=>({controller:new n.AssetsContractController({messenger:e,chainId:t()}),memStateKey:null})}}},{package:"$root$",file:"app/scripts/controller-init/assets/assets-contract-controller-init.ts"}],[100,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.FIXTURES_NETWORKS=void 0;r.FIXTURES_NETWORKS={providerConfig:{chainId:"0xaa36a7",rpcPrefs:{blockExplorerUrl:"https://sepolia.etherscan.io"},ticker:"SepoliaETH",type:"sepolia"},networkConfigurations:{networkConfigurationId:{chainId:"0xaa36a7",nickname:"Sepolia",rpcPrefs:{},rpcUrl:"https://sepolia.infura.io/v3/",ticker:"SepoliaETH",networkConfigurationId:"networkConfigurationId"},optimism:{chainId:"0xa",id:"optimism",nickname:"OP Mainnet",rpcPrefs:{blockExplorerUrl:"https://optimistic.etherscan.io/",imageUrl:"./images/optimism.svg"},rpcUrl:"https://optimism-mainnet.infura.io/v3/",ticker:"ETH"},base:{chainId:"0x2105",id:"base",nickname:"Base Mainnet",rpcPrefs:{blockExplorerUrl:"https://basescan.org",imageUrl:"./images/base.svg"},rpcUrl:"https://mainnet.base.org",ticker:"ETH"},polygon:{chainId:"0x89",id:"polygon",nickname:"Polygon Mainnet",rpcPrefs:{blockExplorerUrl:"https://polygonscan.com/",imageUrl:"./images/matic-token.svg"},rpcUrl:"https://polygon-mainnet.infura.io/v3/",ticker:"MATIC"},binance:{chainId:"0x38",id:"binance",nickname:"BNB Chain",rpcPrefs:{blockExplorerUrl:"https://bscscan.com/",imageUrl:"./images/bnb.svg"},rpcUrl:"https://bsc-dataseed.binance.org/",ticker:"BNB"},gnosis:{id:"gnosis",rpcUrl:"https://rpc.gnosischain.com",chainId:"0x64",ticker:"XDAI",nickname:"Gnosis",rpcPrefs:{blockExplorerUrl:"https://gnosisscan.io",imageUrl:"./images/gnosis.svg"}},arbitrum:{id:"arbitrum",rpcUrl:"https://arbitrum-mainnet.infura.io/v3/",chainId:"0xa4b1",ticker:"ETH",nickname:"Arbitrum One",rpcPrefs:{blockExplorerUrl:"https://explorer.arbitrum.io",imageUrl:"./images/arbitrum.svg"}},avalanche:{id:"avalanche",rpcUrl:"https://avalanche-mainnet.infura.io/v3/",chainId:"0xa86a",ticker:"AVAX",nickname:"Avalanche Network C-Chain",rpcPrefs:{blockExplorerUrl:"https://snowtrace.io/",imageUrl:"./images/avax-token.svg"}},celo:{id:"celo",rpcUrl:"https://celo-mainnet.infura.io/v3/",chainId:"0xa4ec",ticker:"CELO",nickname:"Celo Mainnet",rpcPrefs:{blockExplorerUrl:"https://celoscan.io",imageUrl:"./images/celo.svg"}},zkSync:{id:"zkSync",rpcUrl:"https://mainnet.era.zksync.io",chainId:"0x144",ticker:"ETH",nickname:"zkSync Era Mainnet",rpcPrefs:{blockExplorerUrl:"https://explorer.zksync.io/",imageUrl:"./images/zk-sync.svg"}},localhost:{id:"localhost",rpcUrl:"http://localhost:8545",chainId:"0x539",ticker:"ETH",nickname:"Localhost 8545",rpcPrefs:{blockExplorerUrl:"",imageUrl:""}}}}}}},{package:"$root$",file:"app/scripts/fixtures/with-networks.js"}],[101,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.FIXTURES_PREFERENCES=void 0;r.FIXTURES_PREFERENCES={preferences:{hideZeroBalanceTokens:!1,showExtensionInFullSizeView:!1,showFiatInTestnets:!0,showTestNetworks:!0,smartTransactionsOptInStatus:!0,useNativeCurrencyAsPrimaryCurrency:!0,petnamesEnabled:!0,featureNotificationsEnabled:!0,showTokenAutodetectModal:!1,showNftAutodetectModal:!1,showConfirmationAdvancedDetails:!1,privacyMode:!1},featureFlags:{sendHexData:!0},firstTimeFlowType:"import",completedOnboarding:!0,currentLocale:"en",knownMethodData:{},use4ByteResolution:!0,participateInMetaMetrics:!0,dataCollectionForMarketing:!0,useNftDetection:!0,usePhishDetect:!0,useTokenDetection:!0,useCurrencyRateCheck:!0,useMultiAccountBalanceChecker:!0,theme:"light",useExternalNameSources:!0,useTransactionSimulations:!0,enableMV3TimestampSave:!0,useExternalServices:!0,isProfileSyncingEnabled:!0,isAccountSyncingEnabled:!0}}}},{package:"$root$",file:"app/scripts/fixtures/with-preferences.js"}],[102,{uuid:5682},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.withUnreadNotifications=void 0;var n=e("uuid");r.withUnreadNotifications=(e,t)=>{const r=[];for(let i=0;i<t;i++){const t=(0,n.v4)(),i=(0,n.v4)(),s=`0x${(0,n.v4)().replace(/-/gu,"").padEnd(64,"0")}`,o={address:e,block_number:59796924,block_timestamp:"1721922504",chain_id:1,created_at:(new Date).toISOString(),data:{to:e,from:e,kind:"eth_received",amount:{eth:"0.000100000000000000",usd:"0.27"},network_fee:{gas_price:"30000000078",native_token_price_in_usd:"0.497927"}},id:t,trigger_id:i,tx_hash:s,unread:!0,type:"eth_received",createdAt:(new Date).toISOString(),isRead:!1};r.push(o)}return{isFeatureAnnouncementsEnabled:!0,isMetamaskNotificationsFeatureSeen:!0,isNotificationServicesEnabled:!0,metamaskNotificationsReadList:[],metamaskNotificationsList:r}}}}},{package:"$root$",file:"app/scripts/fixtures/with-unread-notifications.js"}],[103,{"@metamask/name-controller":2174},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChangeType=r.AbstractPetnamesBridge=void 0;var n=e("@metamask/name-controller");function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t,r){o(e,t),t.set(e,r)}function o(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function a(e,t){return e.get(u(e,t))}function c(e,t,r){return e.set(u(e,t),r),r}function u(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}let l=r.ChangeType=function(e){return e.ADDED="ADDED",e.UPDATED="UPDATED",e.DELETED="DELETED",e}({});var d=function(e){return e.SOURCE_TO_PETNAMES="Source->Petnames",e.PETNAMES_TO_SOURCE="Petnames->Source",e}(d||{});function f({type:e,variation:t,value:r}){return`${e}/${t}/${e===n.NameType.ETHEREUM_ADDRESS?r.toLowerCase():r}`}var p=new WeakMap,h=new WeakMap,m=new WeakMap,g=new WeakSet;function y(e){if(a(m,this)===e)throw new Error(`Attempted to synchronize recursively in same direction: ${e}`);if(null!==a(m,this))return;c(m,this,e);const[t,r]="Source->Petnames"===e?[this.getSourceEntries(),u(g,this,b).call(this)]:[u(g,this,b).call(this),this.getSourceEntries()],n=u(g,this,E).call(this,r,t);u(g,this,T).call(this,n),c(m,this,null)}function b(){const{names:e}=a(h,this).state,t=[];for(const r of Object.values(n.NameType))for(const n of Object.keys(e[r]))for(const i of Object.keys(e[r][n])){const{name:s,sourceId:o,origin:a}=e[r][n][i];if(!s)continue;const c={value:n,type:r,name:s,variation:i,sourceId:o??undefined,origin:a??undefined};this.shouldSyncPetname(c)&&t.push(c)}return t}function w(e,t){e===l.DELETED?(delete t.sourceId,delete t.origin,a(h,this).setName({...t,name:null})):a(h,this).setName(t)}function E(e,t){const r=[],n=[],i=[],s=new Map(e.map((e=>[f(e),e]))),o=new Map(t.map((e=>[f(e),e])));return o.forEach(((e,t)=>{const i=s.get(t);i?e.name!==i.name&&n.push(e):r.push(e)})),s.forEach(((e,t)=>{o.has(t)||i.push(e)})),{[l.ADDED]:r,[l.UPDATED]:n,[l.DELETED]:i}}function T(e){const t=a(m,this)===d.SOURCE_TO_PETNAMES?u(g,this,w).bind(this):this.updateSourceEntry.bind(this);for(const r of Object.values(l))for(const n of e[r])t(r,n)}r.AbstractPetnamesBridge=class{constructor({isTwoWay:e,nameController:t,messenger:r}){var n,a;o(n=this,a=g),a.add(n),s(this,p,void 0),s(this,h,void 0),s(this,m,null),i(this,"messenger",void 0),c(p,this,e),c(h,this,t),this.messenger=r}init(){a(p,this)&&this.messenger.subscribe("NameController:stateChange",(()=>u(g,this,y).call(this,d.PETNAMES_TO_SOURCE))),this.onSourceChange((()=>u(g,this,y).call(this,d.SOURCE_TO_PETNAMES)))}updateSourceEntry(e,t){throw new Error("updateSourceEntry must be overridden for two-way bridges")}shouldSyncPetname(e){return!0}}}}},{package:"$root$",file:"app/scripts/lib/AbstractPetnamesBridge.ts"}],[104,{"./AbstractPetnamesBridge":103,"@metamask/name-controller":2174},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AccountIdentitiesPetnamesBridge=void 0;var n=e("@metamask/name-controller"),i=e("./AbstractPetnamesBridge");class s extends i.AbstractPetnamesBridge{constructor({nameController:e,messenger:t}){super({isTwoWay:!1,nameController:e,messenger:t})}getSourceEntries(){return this.messenger.call("AccountsController:listAccounts").map((e=>({value:e.address,type:n.NameType.ETHEREUM_ADDRESS,name:e.metadata.name,sourceId:undefined,variation:n.FALLBACK_VARIATION,origin:n.NameOrigin.ACCOUNT_IDENTITY})))}onSourceChange(e){this.messenger.subscribe("AccountsController:stateChange",e)}shouldSyncPetname(e){return e.origin===n.NameOrigin.ACCOUNT_IDENTITY}}r.AccountIdentitiesPetnamesBridge=s}}},{package:"$root$",file:"app/scripts/lib/AccountIdentitiesPetnamesBridge.ts"}],[105,{"./AbstractPetnamesBridge":103,"@metamask/name-controller":2174,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AddressBookPetnamesBridge=void 0;var n=e("@metamask/name-controller"),i=e("@metamask/utils"),s=e("./AbstractPetnamesBridge");function o(e,t,r){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,r)}function a(e,t){return e.get(c(e,t))}function c(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var u=new WeakMap;class l extends s.AbstractPetnamesBridge{constructor({addressBookController:e,nameController:t,messenger:r}){var n,i,s;super({isTwoWay:!0,nameController:t,messenger:r}),o(this,u,void 0),i=this,s=e,(n=u).set(c(n,i),s)}getSourceEntries(){const e=[],{state:t}=a(u,this);for(const r of Object.keys(t.addressBook)){if(!(0,i.isStrictHexString)(r))continue;const s=t.addressBook[r];for(const i of Object.keys(s)){const s=t.addressBook[r][i],o=r.toLowerCase(),{name:a,isEns:c}=s;null!=a&&a.length&&null!=i&&i.length&&e.push({value:i,name:a,variation:o,type:n.NameType.ETHEREUM_ADDRESS,sourceId:c?"ens":undefined,origin:n.NameOrigin.ADDRESS_BOOK})}}return e}updateSourceEntry(e,t){e===s.ChangeType.DELETED?a(u,this).delete(t.variation,t.value):a(u,this).set(t.value,t.name,t.variation)}onSourceChange(e){this.messenger.subscribe("AddressBookController:stateChange",e)}}r.AddressBookPetnamesBridge=l}}},{package:"$root$",file:"app/scripts/lib/AddressBookPetnamesBridge.ts"}],[106,{"@metamask/base-controller":1378,"@metamask/obs-store":2321},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/obs-store"),i=e("@metamask/base-controller");function s(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var c=new WeakSet;class u extends n.ObservableStore{constructor({config:e,controllerMessenger:t,state:r,persist:n}){super(r),s(this,c),o(this,"config",{}),this.persist=n,this.controllerMessenger=t,e&&this.updateStructure(e)}updateStructure(e){this.config=e,this.removeAllListeners();const t={};for(const n of Object.keys(e)){var r;if(!e[n])throw new Error(`Undefined '${n}'`);const s=e[n];s.subscribe?e[n].subscribe((e=>{a(c,this,l).call(this,n,e)})):this.controllerMessenger.subscribe(`${s.name}:stateChange`,(t=>{let r=t;this.persist&&(r=(0,i.getPersistentState)(t,e[n].metadata)),a(c,this,l).call(this,n,r)}));const o=s.state??(null===(r=s.getState)||void 0===r?void 0:r.call(s));t[n]=this.persist&&e[n].metadata?(0,i.getPersistentState)(o,e[n].metadata):o}this.updateState(t)}getFlatState(){if(!this.config)return{};let e={};for(const t of Object.keys(this.config)){const r=this.config[t],n=r.getState?r.getState():r.state;e={...e,...n}}return e}}function l(e,t){const r=this.getState()[e];this.updateState({[e]:t}),this.emit("stateChange",{oldState:r,newState:t,controllerKey:e})}r.default=u}}},{package:"$root$",file:"app/scripts/lib/ComposableObservableStore.js"}],[107,{"./state-utils":178,"@metamask/utils":2967,uuid:5682},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PatchStore=void 0;var n=e("@metamask/utils"),i=e("uuid"),s=e("./state-utils");function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const a=(0,n.createProjectLogger)("patch-store");r.PatchStore=class{constructor(e){o(this,"id",void 0),o(this,"observableStore",void 0),o(this,"pendingPatches",new Map),o(this,"listener",void 0),this.id=(0,i.v4)(),this.observableStore=e,this.listener=this._onStateChange.bind(this),this.observableStore.on("stateChange",this.listener),a("Created",this.id)}flushPendingPatches(){const e=[...this.pendingPatches.values()];this.pendingPatches.clear();for(const t of e)a("Flushed",t.path.join("."),this.id,t);return e}destroy(){this.observableStore.removeListener("stateChange",this.listener),a("Destroyed",this.id)}_onStateChange({oldState:e,newState:t}){const r=(0,s.sanitizeUIState)(t),n=this._generatePatches(e,r),i=Boolean(t.vault);if(i&&n.push({op:"replace",path:["isInitialized"],value:i}),n.length)for(const e of n){const t=e.path.join(".");this.pendingPatches.set(t,e),a("Updated",t,this.id,e)}}_generatePatches(e,t){return Object.keys(t).map((r=>{const n=e[r],i=t[r];return n===i?null:{op:"replace",path:[r],value:i}})).filter(Boolean)}}}}},{package:"$root$",file:"app/scripts/lib/PatchStore.ts"}],[108,{"@metamask/name-controller":2174,"@metamask/snaps-utils":2853,loglevel:4879},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SnapsNameProvider=void 0;var n,i=e("@metamask/name-controller"),s=e("@metamask/snaps-utils"),o=(n=e("loglevel"))&&n.__esModule?n:{default:n};function a(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function c(e,t){return e.get(u(e,t))}function u(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var l=new WeakMap,d=new WeakSet;function f(){const e=c(l,this).call("PermissionController:getState").subjects;return c(l,this).call("SnapController:getAll").filter((({id:t})=>{var r;return null===(r=e[t])||void 0===r?void 0:r.permissions["endowment:name-lookup"]}))}async function p(e,t){const{variation:r,value:n}=t,i=e.id,a={chainId:`eip155:${parseInt(r,16)}`,address:n};let u,d;try{const t=await c(l,this).call("SnapController:handleRequest",{snapId:e.id,origin:"metamask",handler:s.HandlerType.OnNameLookup,request:{jsonrpc:"2.0",method:" ",params:a}}),r=null==t?void 0:t.resolvedDomains;u=r?[...new Set(r.map((e=>e.resolvedDomain)))]:[]}catch(t){o.default.error("Snap name provider request failed",{snapId:e.id,request:a,error:t}),d=t}return{sourceId:i,result:{proposedNames:u,error:d}}}r.SnapsNameProvider=class{constructor({messenger:e}){var t,r,n;!function(e,t){a(e,t),t.add(e)}(this,d),function(e,t,r){a(e,t),t.set(e,r)}(this,l,void 0),r=this,n=e,(t=l).set(u(t,r),n)}getMetadata(){const e=u(d,this,f).call(this);return{sourceIds:{[i.NameType.ETHEREUM_ADDRESS]:e.map((e=>e.id))},sourceLabels:e.reduce(((e,t)=>{const r=c(l,this).call("SnapController:get",t.id),n=null==r?void 0:r.manifest.proposedName;return{...e,[t.id]:n||t.id}}),{})}}async getProposedNames(e){const t=u(d,this,f).call(this);return{results:(await Promise.all(t.map((t=>u(d,this,p).call(this,t,e))))).reduce(((e,t)=>{const{sourceId:r,result:n}=t;return{...e,[r]:n}}),{})}}}}}},{package:"$root$",file:"app/scripts/lib/SnapsNameProvider.ts"}],[109,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.WeakRefObjectMap=void 0;class i{constructor(){n(this,"map",void 0),this.map=new Map}set(e,t){const r={};for(const e in t){if(!Object.prototype.hasOwnProperty.call(t,e))continue;const n=t[e];if("object"!=typeof n||null===n)throw new Error(`Property ${String(e)} is not an object and cannot be weakly referenced.`);r[e]=new WeakRef(n)}return this.map.set(e,r),this}get(e){const t=this.map.get(e);if(!t)return undefined;const r={};for(const n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;const i=t[n].deref();if(i===undefined)return this.map.delete(e),undefined;r[n]=i}return r}has(e){return this.get(e)!==undefined}delete(e){return this.get(e)!==undefined&&this.map.delete(e)}clear(){this.map.clear()}get size(){return this.map.size}entries(){const e=[];return this.map.forEach(((t,r)=>{const n=this.get(r);n!==undefined&&e.push([r,n])})),e.values()}keys(){return this.map.keys()}values(){const e=[];return this.map.forEach(((t,r)=>{const n=this.get(r);n!==undefined&&e.push(n)})),e.values()}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return"WeakRefObjectMap"}forEach(e,t){this.map.forEach(((r,n)=>{const i=this.get(n);i!==undefined&&(t?e.call(t,i,n,this):e(i,n,this))}))}}r.WeakRefObjectMap=i}}},{package:"$root$",file:"app/scripts/lib/WeakRefObjectMap.ts"}],[11,{"./assets-contract-controller-init":10,"./nft-controller-init":12,"./nft-detection-controller-init":13,"./token-rates-controller-init":14},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"AssetsContractControllerInit",{enumerable:!0,get:function(){return o.AssetsContractControllerInit}}),Object.defineProperty(r,"NftControllerInit",{enumerable:!0,get:function(){return i.NftControllerInit}}),Object.defineProperty(r,"NftDetectionControllerInit",{enumerable:!0,get:function(){return s.NftDetectionControllerInit}}),Object.defineProperty(r,"TokenRatesControllerInit",{enumerable:!0,get:function(){return n.TokenRatesControllerInit}});var n=e("./token-rates-controller-init"),i=e("./nft-controller-init"),s=e("./nft-detection-controller-init"),o=e("./assets-contract-controller-init")}}},{package:"$root$",file:"app/scripts/controller-init/assets/index.ts"}],[110,{"../../../../shared/constants/app":5738,"@metamask/controller-utils":1471,"@metamask/rpc-errors":2526,"@metamask/snaps-rpc-methods":2696,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.rejectAllApprovals=function({approvalController:e,deleteInterface:t}){const r=e.state.pendingApprovals,n=Object.values(r);for(const r of n)u({approvalController:e,approvalRequest:r,deleteInterface:t})},r.rejectOriginApprovals=function({approvalController:e,deleteInterface:t,origin:r}){const n=e.state.pendingApprovals,i=Object.values(n).filter((e=>e.origin===r));for(const r of i)u({approvalController:e,approvalRequest:r,deleteInterface:t})};var n=e("@metamask/controller-utils"),i=e("@metamask/snaps-rpc-methods"),s=e("@metamask/rpc-errors"),o=e("@metamask/utils"),a=e("../../../../shared/constants/app");const c=(0,o.createProjectLogger)("approval-utils");function u({approvalController:e,approvalRequest:t,deleteInterface:r}){var o;const{id:u,type:l,origin:d}=t,f=null===(o=t.requestData)||void 0===o?void 0:o.id;switch(l){case n.ApprovalType.SnapDialogAlert:case n.ApprovalType.SnapDialogPrompt:case i.DIALOG_APPROVAL_TYPES.default:c("Rejecting snap dialog",{id:u,interfaceId:f,origin:d,type:l}),e.accept(u,null),null==r||r(f);break;case n.ApprovalType.SnapDialogConfirmation:c("Rejecting snap confirmation",{id:u,interfaceId:f,origin:d,type:l}),e.accept(u,!1),null==r||r(f);break;case a.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountCreation:case a.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountRemoval:case a.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.showSnapAccountRedirect:c("Rejecting snap account confirmation",{id:u,origin:d,type:l}),e.accept(u,!1);break;default:c("Rejecting pending approval",{id:u,origin:d,type:l}),e.reject(u,s.providerErrors.userRejectedRequest({data:{cause:"rejectAllApprovals"}}))}}}}},{package:"$root$",file:"app/scripts/lib/approval/utils.ts"}],[111,{"../../../shared/modules/string-utils":5827},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("../../../shared/modules/string-utils");r.default=class{constructor(e={}){const{preferencesController:t,addressBookController:r,accountsController:n,networkController:i,trackMetaMetricsEvent:s}=e;this.preferencesController=t,this.accountsController=n,this.addressBookController=r,this.networkController=i,this._trackMetaMetricsEvent=s}async restoreUserData(e){const t=this.preferencesController.state,{preferences:r,addressBook:n,network:i,internalAccounts:s}=JSON.parse(e);r&&(r.identities=t.identities,r.lostIdentities=t.lostIdentities,r.selectedAddress=t.selectedAddress,this.preferencesController.update(r)),n&&this.addressBookController.update(n,!0),i&&this.networkController.loadBackup(i),s&&this.accountsController.loadBackup(s),(r||n||i||s)&&this._trackMetaMetricsEvent({event:"User Data Imported",category:"Backup"})}async backupUserData(){const e={preferences:{...this.preferencesController.state},internalAccounts:{internalAccounts:this.accountsController.state.internalAccounts},addressBook:{...this.addressBookController.state},network:{networkConfigurationsByChainId:this.networkController.state.networkConfigurationsByChainId}};delete e.preferences.identities,delete e.preferences.lostIdentities,delete e.preferences.selectedAddress;const t=JSON.stringify(e),r=new Date,i=e=>(0,n.prependZero)(e,2);return{fileName:`MetaMaskUserData.${r.getFullYear()}_${i(r.getMonth()+1)}_${i(r.getDay())}_${i(r.getHours())}_${i(r.getMinutes())}_${i(r.getDay())}.json`,data:t}}}}}},{package:"$root$",file:"app/scripts/lib/backup.js"}],[112,{"../../../shared/constants/time":5765,loglevel:4879,"readable-stream":5296},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.THREE_MINUTES=void 0,r.default=function(){const e=c();return new i.Transform({transform(t,r,n){const i=t.id===undefined,o=e.add(t.id);i||o?n(null,t):(s.default.debug(`RPC request with id "${t.id}" already seen.`),n())},objectMode:!0})};var n,i=e("readable-stream"),s=(n=e("loglevel"))&&n.__esModule?n:{default:n},o=e("../../../shared/constants/time");const a=r.THREE_MINUTES=3*o.MINUTE,c=()=>{const e=new Map;return setInterval((()=>{const t=Date.now()-a;for(const[r,n]of e.entries()){if(!(n<=t))break;e.delete(r)}}),a),{add:t=>!e.has(t)&&(e.set(t,Date.now()),!0)}}}}},{package:"$root$",file:"app/scripts/lib/createDupeReqFilterStream.ts"}],[113,{"../../../shared/constants/permissions":5756,"../controllers/permissions":83,"@metamask/keyring-api":1983},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({messenger:e}){return function(t,r,i,s){const a=e.call("AccountsController:getSelectedAccount");if((0,n.isEvmAccountType)(a.type))return i();if(o.includes(t.method))return s(new Error(`Non-EVM account cannot request this method: ${t.method}`));if("wallet_requestPermissions"===t.method&&null!=t&&t.params&&Array.isArray(t.params)&&t.params.length>0&&t.params[0]){const e=Object.keys(t.params[0]);if(o.some((t=>e.includes(t))))return s(new Error(`Non-EVM account cannot request this method: ${e.toString()}`))}return i()}};var n=e("@metamask/keyring-api"),i=e("../../../shared/constants/permissions"),s=e("../controllers/permissions");const o=[...Object.values(i.RestrictedEthMethods),...s.unrestrictedEthSigningMethods]}}},{package:"$root$",file:"app/scripts/lib/createEvmMethodsToNonEvmAccountReqFilterMiddleware.ts"}],[114,{loglevel:4879},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r,n){n((n=>{r.error&&i.default.debug("Error in RPC response:\n",r),t.isMetamaskInternal||(i.default.info(`RPC (${e.origin}): ${t.method} -> ${r.error?"error":"success"}`),n())}))}};var n,i=(n=e("loglevel"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"app/scripts/lib/createLoggerMiddleware.js"}],[115,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({mainFrameOrigin:e}){return function(t,r,n){t.mainFrameOrigin=e,n()}}}}},{package:"$root$",file:"app/scripts/lib/createMainFrameOriginMiddleware.ts"}],[116,{"./stream-utils":183,"@metamask/rpc-errors":2526},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/rpc-errors"),i=e("./stream-utils");r.default=(e,t)=>async r=>{if(!(0,i.isStreamWritable)(t))return;if(!e[r.method])return void t.write({jsonrpc:"2.0",error:n.rpcErrors.methodNotFound({message:`${r.method} not found`}),id:r.id});let s,o;try{s=await e[r.method](...r.params)}catch(e){o=e}(0,i.isStreamWritable)(t)?o?t.write({jsonrpc:"2.0",error:(0,n.serializeError)(o,{shouldIncludeStack:!0}),id:r.id}):t.write({jsonrpc:"2.0",result:s,id:r.id}):o&&console.error(o)}}}},{package:"$root$",file:"app/scripts/lib/createMetaRPCHandler.js"}],[117,{"./middleware/pending":135,"@metamask/eth-json-rpc-middleware":1576,"@metamask/json-rpc-engine":1933},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({version:e,getAccounts:t,getCallsStatus:r,getCapabilities:o,processTransaction:a,processTypedMessage:c,processTypedMessageV3:u,processTypedMessageV4:l,processPersonalMessage:d,processDecryptMessage:f,processEncryptionPublicKey:p,processSendCalls:h,getPendingNonce:m,getPendingTransactionByHash:g}){return(0,n.mergeMiddleware)([(0,n.createScaffoldMiddleware)({eth_syncing:!1,web3_clientVersion:`MetaMask/v${e}`}),(0,i.createWalletMiddleware)({getAccounts:t,getCallsStatus:r,getCapabilities:o,processTransaction:a,processTypedMessage:c,processTypedMessageV3:u,processTypedMessageV4:l,processPersonalMessage:d,processDecryptMessage:f,processEncryptionPublicKey:p,processSendCalls:h}),(0,s.createPendingNonceMiddleware)({getPendingNonce:m}),(0,s.createPendingTxMiddleware)({getPendingTransactionByHash:g})])};var n=e("@metamask/json-rpc-engine"),i=e("@metamask/eth-json-rpc-middleware"),s=e("./middleware/pending")}}},{package:"$root$",file:"app/scripts/lib/createMetamaskMiddleware.js"}],[118,{loglevel:4879,"webextension-polyfill":5715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({location:e,registerOnboarding:t}){return async function(r,s,o,a){try{if("wallet_registerOnboarding"!==r.method)return void o();r.tabId&&r.tabId!==i.default.tabs.TAB_ID_NONE?await t(e,r.tabId):n.default.debug(`'wallet_registerOnboarding' message from ${e} ignored due to missing tabId`),s.result=!0,a()}catch(e){a(e)}}};var n=s(e("loglevel")),i=s(e("webextension-polyfill"));function s(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"app/scripts/lib/createOnboardingMiddleware.js"}],[119,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r,n){t.origin=e.origin,n()}}}}},{package:"$root$",file:"app/scripts/lib/createOriginMiddleware.js"}],[12,{"../../../../shared/constants/metametrics":5749,"@metamask/assets-controllers":1361,"@metamask/bridge-controller":1384},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NftControllerInit=void 0;var n=e("@metamask/assets-controllers"),i=e("@metamask/bridge-controller"),s=e("../../../../shared/constants/metametrics");r.NftControllerInit=({controllerMessenger:e,persistedState:t,getGlobalChainId:r,trackEvent:o})=>({controller:new n.NftController({state:t.NftController,messenger:e,chainId:r(),onNftAdded:({address:e,symbol:t,tokenId:r,standard:n,source:a})=>o({event:s.MetaMetricsEventName.NftAdded,category:s.MetaMetricsEventCategory.Wallet,sensitiveProperties:{token_contract_address:e,token_symbol:t??null,token_id:r,token_standard:n,asset_type:i.AssetType.NFT,source:a}})})})}}},{package:"$root$",file:"app/scripts/controller-init/assets/nft-controller-init.ts"}],[120,{"../../../shared/constants/app":5738,"@metamask/rpc-errors":2526},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SPAM_FILTER_ACTIVATED_ERROR=r.REJECTION_THRESHOLD_IN_MS=r.NUMBER_OF_REJECTIONS_THRESHOLD=r.BLOCKING_THRESHOLD_IN_MS=r.BLOCKABLE_METHODS=void 0,r.default=function({getThrottledOriginState:e,updateThrottledOriginState:t}){return function(r,n,i,f){const{method:p,origin:h}=r;if(!c.has(p)||u.includes(h))return void i();!function(e){if(!e)return!1;const t=Date.now(),{rejections:r,lastRejection:n}=e,i=t-n<=a;return r>=s&&i}(e(h))?i((r=>{if("error"in n&&n.error&&d(n.error)){var i;const s=null===(i=n.error)||void 0===i?void 0:i.data;if("rejectAllApprovals"===(null==s?void 0:s.cause))return void r();const a=e(h)||{rejections:0,lastRejection:0},c=Date.now(),u=c-a.lastRejection<o?a.rejections+1:1;t(h,{rejections:u,lastRejection:c})}else{const r=e(h);Boolean(r)&&t(h,{rejections:0,lastRejection:0})}r()})):f(l)}};var n=e("@metamask/rpc-errors"),i=e("../../../shared/constants/app");const s=r.NUMBER_OF_REJECTIONS_THRESHOLD=3,o=r.REJECTION_THRESHOLD_IN_MS=3e4,a=r.BLOCKING_THRESHOLD_IN_MS=6e4,c=r.BLOCKABLE_METHODS=new Set([i.MESSAGE_TYPE.ETH_SEND_TRANSACTION,i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA,i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V1,i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3,i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4,i.MESSAGE_TYPE.PERSONAL_SIGN,i.MESSAGE_TYPE.WATCH_ASSET,i.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN,i.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN]),u=["http://127.0.0.1:8080","http://127.0.0.1:8081","http://127.0.0.1:8082","http://localhost:8080","http://localhost:8081","http://localhost:8082"],l=r.SPAM_FILTER_ACTIVATED_ERROR=n.providerErrors.unauthorized("Request blocked due to spam filter."),d=e=>e.code===n.errorCodes.provider.userRejectedRequest}}},{package:"$root$",file:"app/scripts/lib/createOriginThrottlingMiddleware.ts"}],[121,{"../../../shared/constants/app":5738,"../../../shared/constants/metametrics":5749,"../../../shared/constants/security-provider":5759,"../../../shared/constants/signatures":5760,"../../../shared/constants/transaction":5767,"../../../shared/lib/confirmation.utils":5779,"../../../shared/lib/snaps/snaps":5791,"../../../shared/modules/error":5809,"../../../shared/modules/transaction.utils":5829,"../../../ui/helpers/utils/metrics":6857,"./snap-keyring/metrics":173,"@metamask/controller-utils":1471,"@metamask/rpc-errors":2526,"ethereumjs-util":4343},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({rateLimitTimeout:e=3e5,rateLimitSamplePercent:t=.001,globalRateLimitTimeout:r=3e5,globalRateLimitMaxAmount:S=10,getAccountType:P,getDeviceModel:I,getHardwareTypeForMetric:C,snapAndHardwareMessenger:M,appStateController:j,metaMetricsController:x,getHDEntropyIndex:N}){return async function(B,O,R){const{origin:D,method:L,params:U}=B,H=function(e){return[o.MESSAGE_TYPE.WALLET_CREATE_SESSION,o.MESSAGE_TYPE.WALLET_INVOKE_METHOD].includes(e)}(L),$=H?a.MetaMetricsRequestedThrough.MultichainApi:a.MetaMetricsRequestedThrough.EthereumProvider,F=H?a.MetaMetricsEventCategory.MultichainApi:a.MetaMetricsEventCategory.InpageProvider;let K,G=L;var W;L===o.MESSAGE_TYPE.WALLET_INVOKE_METHOD&&(G=null==U||null===(W=U.request)||void 0===W?void 0:W.method,K=null==U?void 0:U.scope);const V=w[G];let q;switch(V){case y.TIMEOUT:q=void 0!==_[G];break;case y.NON_RATE_LIMITED:q=!1;break;case y.BLOCKED:q=!0;break;default:case y.RANDOM_SAMPLE:q=Math.random()>=t}const z=S>0&&A>=S,Y=!0===x.state.participateInMetaMetrics,J=T[G],X={api_source:$};let Q;K&&(X.chain_id_caip=K);const Z=(0,m.isSnapPreinstalled)(D),ee=D!==o.ORIGIN_METAMASK&&!Z&&!q&&!z&&!0===Y;if(ee){var te;const t=J?J.REQUESTED:a.MetaMetricsEventName.ProviderMethodCalled;if(t===a.MetaMetricsEventName.SignatureRequested){var re,ne,ie,se,oe;let e;var ae,ce;if(X.signature_type=G,X.hd_entropy_index=N(),(0,s.isValidAddress)(null==B||null===(re=B.params)||void 0===re?void 0:re[1]))e=null==B||null===(ae=B.params)||void 0===ae?void 0:ae[0];else e=null==B||null===(ce=B.params)||void 0===ce?void 0:ce[1];null!==(ne=B.securityAlertResponse)&&void 0!==ne&&ne.providerRequestsCount&&Object.keys(B.securityAlertResponse.providerRequestsCount).forEach((e=>{X[`ppom_${e}_count`]=B.securityAlertResponse.providerRequestsCount[e]})),X.security_alert_response=(null===(ie=B.securityAlertResponse)||void 0===ie?void 0:ie.result_type)??u.BlockaidResultType.NotApplicable,X.security_alert_reason=(null===(se=B.securityAlertResponse)||void 0===se?void 0:se.reason)??u.BlockaidReason.notApplicable,null!==(oe=B.securityAlertResponse)&&void 0!==oe&&oe.description&&(X.security_alert_description=B.securityAlertResponse.description),(0,h.shouldUseRedesignForSignatures)({approvalType:E[G]})&&(X.ui_customizations=[...X.ui_customizations||[],a.MetaMetricsEventUiCustomization.RedesignedConfirmation]);const t=await(0,g.getSnapAndHardwareInfoForMetrics)(P,I,C,M);Object.assign(X,t);try{if(G===o.MESSAGE_TYPE.PERSONAL_SIGN){const{isSIWEMessage:t}=(0,n.detectSIWE)({data:e});t&&(X.ui_customizations=[...X.ui_customizations||[],a.MetaMetricsEventUiCustomization.Siwe])}else if(G===o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4){const t=(0,c.parseTypedDataMessage)(e);Q={},X.eip712_primary_type=t.primaryType,Q.eip712_verifyingContract=t.domain.verifyingContract,Q.eip712_domain_version=t.domain.version,Q.eip712_domain_name=t.domain.name,l.PRIMARY_TYPES_PERMIT.includes(t.primaryType)?X.ui_customizations=[...X.ui_customizations||[],a.MetaMetricsEventUiCustomization.Permit]:l.PRIMARY_TYPES_ORDER.includes(t.primaryType)&&(X.ui_customizations=[...X.ui_customizations||[],a.MetaMetricsEventUiCustomization.Order])}}catch(e){console.warn(`createRPCMethodTrackingMiddleware: Errored - ${e}`)}}else X.method=G;const i=k[G];if(i&&(X.params=i(U)),null===(te=v[G])||void 0===te||te.call(v,B,undefined,b.REQUESTED,X),t===a.MetaMetricsEventName.SignatureRequested){!function(e,t,r,n){e.createEventFragment({category:n,initialEvent:a.MetaMetricsEventName.SignatureRequested,successEvent:a.MetaMetricsEventName.SignatureApproved,failureEvent:a.MetaMetricsEventName.SignatureRejected,uniqueIdentifier:(0,p.generateSignatureUniqueId)(t.id),persist:!0,referrer:{url:t.origin},...r})}(x,B,{properties:X,sensitiveProperties:Q},F)}else x.trackEvent({event:t,category:F,referrer:{url:D},properties:X});V===y.TIMEOUT&&(_[G]=setTimeout((()=>{delete _[G]}),e)),A+=1,setTimeout((()=>{A-=1}),r)}R((async e=>{var t,r,n,s;if(!1===ee||void 0===J)return e();const o=null===(t=O.error)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.location;let c,u;const l=(0,f.getErrorMessage)(O.error);if((null===(r=O.error)||void 0===r?void 0:r.code)===i.errorCodes.provider.userRejectedRequest?(c=J.REJECTED,u=b.REJECTED):(null===(n=O.error)||void 0===n?void 0:n.code)===i.errorCodes.rpc.internal&&[l,O.error.message].includes("Request rejected by user or snap.")?(c=J.REJECTED,u=b.REJECTED,X.status=l):(c=J.APPROVED,u=b.APPROVED),!c)return e();null===(s=v[G])||void 0===s||s.call(v,B,O,u,X);let h={};if(d.SIGNING_METHODS.includes(G)){var m;const e=j.getSignatureSecurityAlertResponse(null===(m=B.securityAlertResponse)||void 0===m?void 0:m.securityAlertId);h=(0,p.getBlockaidMetricsProps)({securityAlertResponse:e})}const g={...X,...h,location:o};if(c===a.MetaMetricsEventName.SignatureRejected||c===a.MetaMetricsEventName.SignatureApproved){const e={abandoned:c===J.REJECTED},t={properties:{...g,hd_entropy_index:N()},sensitiveProperties:Q};!function(e,t,r,n){const i=(0,p.generateSignatureUniqueId)(t.id);e.updateEventFragment(i,n),e.finalizeEventFragment(i,r)}(x,B,e,t)}else x.trackEvent({event:c,category:F,referrer:{url:D},properties:g});return e()}))}};var n=e("@metamask/controller-utils"),i=e("@metamask/rpc-errors"),s=e("ethereumjs-util"),o=e("../../../shared/constants/app"),a=e("../../../shared/constants/metametrics"),c=e("../../../shared/modules/transaction.utils"),u=e("../../../shared/constants/security-provider"),l=e("../../../shared/constants/signatures"),d=e("../../../shared/constants/transaction"),f=e("../../../shared/modules/error"),p=e("../../../ui/helpers/utils/metrics"),h=e("../../../shared/lib/confirmation.utils"),m=e("../../../shared/lib/snaps/snaps"),g=e("./snap-keyring/metrics");const y={TIMEOUT:"timeout",BLOCKED:"blocked",NON_RATE_LIMITED:"non_rate_limited",RANDOM_SAMPLE:"random_sample"},b={REQUESTED:"REQUESTED",APPROVED:"APPROVED",REJECTED:"REJECTED"},w={[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:y.NON_RATE_LIMITED,[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:y.NON_RATE_LIMITED,[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:y.NON_RATE_LIMITED,[o.MESSAGE_TYPE.PERSONAL_SIGN]:y.NON_RATE_LIMITED,[o.MESSAGE_TYPE.ETH_DECRYPT]:y.NON_RATE_LIMITED,[o.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY]:y.NON_RATE_LIMITED,[o.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN]:y.NON_RATE_LIMITED,[o.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN]:y.NON_RATE_LIMITED,[o.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS]:y.TIMEOUT,[o.MESSAGE_TYPE.WALLET_REQUEST_PERMISSIONS]:y.TIMEOUT,[o.MESSAGE_TYPE.WALLET_CREATE_SESSION]:y.NON_RATE_LIMITED,[o.MESSAGE_TYPE.SEND_METADATA]:y.BLOCKED,[o.MESSAGE_TYPE.ETH_CHAIN_ID]:y.BLOCKED,[o.MESSAGE_TYPE.ETH_ACCOUNTS]:y.BLOCKED,[o.MESSAGE_TYPE.LOG_WEB3_SHIM_USAGE]:y.BLOCKED,[o.MESSAGE_TYPE.GET_PROVIDER_STATE]:y.BLOCKED,[o.MESSAGE_TYPE.WALLET_GET_CALLS_STATUS]:y.NON_RATE_LIMITED,[o.MESSAGE_TYPE.WALLET_GET_CAPABILITIES]:y.NON_RATE_LIMITED,[o.MESSAGE_TYPE.WALLET_SEND_CALLS]:y.NON_RATE_LIMITED},E={[o.MESSAGE_TYPE.PERSONAL_SIGN]:n.ApprovalType.PersonalSign,[o.MESSAGE_TYPE.SIGN]:n.ApprovalType.SignTransaction,[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:n.ApprovalType.EthSignTypedData,[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V1]:n.ApprovalType.EthSignTypedData,[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:n.ApprovalType.EthSignTypedData,[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:n.ApprovalType.EthSignTypedData},T={[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:{APPROVED:a.MetaMetricsEventName.SignatureApproved,REJECTED:a.MetaMetricsEventName.SignatureRejected,REQUESTED:a.MetaMetricsEventName.SignatureRequested},[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:{APPROVED:a.MetaMetricsEventName.SignatureApproved,REJECTED:a.MetaMetricsEventName.SignatureRejected,REQUESTED:a.MetaMetricsEventName.SignatureRequested},[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:{APPROVED:a.MetaMetricsEventName.SignatureApproved,REJECTED:a.MetaMetricsEventName.SignatureRejected,REQUESTED:a.MetaMetricsEventName.SignatureRequested},[o.MESSAGE_TYPE.PERSONAL_SIGN]:{APPROVED:a.MetaMetricsEventName.SignatureApproved,REJECTED:a.MetaMetricsEventName.SignatureRejected,REQUESTED:a.MetaMetricsEventName.SignatureRequested},[o.MESSAGE_TYPE.ETH_DECRYPT]:{APPROVED:a.MetaMetricsEventName.DecryptionApproved,REJECTED:a.MetaMetricsEventName.DecryptionRejected,REQUESTED:a.MetaMetricsEventName.DecryptionRequested},[o.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY]:{APPROVED:a.MetaMetricsEventName.EncryptionPublicKeyApproved,REJECTED:a.MetaMetricsEventName.EncryptionPublicKeyRejected,REQUESTED:a.MetaMetricsEventName.EncryptionPublicKeyRequested},[o.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS]:{APPROVED:a.MetaMetricsEventName.PermissionsApproved,REJECTED:a.MetaMetricsEventName.PermissionsRejected,REQUESTED:a.MetaMetricsEventName.PermissionsRequested},[o.MESSAGE_TYPE.WALLET_REQUEST_PERMISSIONS]:{APPROVED:a.MetaMetricsEventName.PermissionsApproved,REJECTED:a.MetaMetricsEventName.PermissionsRejected,REQUESTED:a.MetaMetricsEventName.PermissionsRequested},[o.MESSAGE_TYPE.WALLET_CREATE_SESSION]:{APPROVED:a.MetaMetricsEventName.PermissionsApproved,REJECTED:a.MetaMetricsEventName.PermissionsRejected,REQUESTED:a.MetaMetricsEventName.PermissionsRequested},[o.MESSAGE_TYPE.WALLET_GET_CALLS_STATUS]:{REQUESTED:a.MetaMetricsEventName.Wallet5792Called},[o.MESSAGE_TYPE.WALLET_GET_CAPABILITIES]:{REQUESTED:a.MetaMetricsEventName.Wallet5792Called},[o.MESSAGE_TYPE.WALLET_SEND_CALLS]:{REQUESTED:a.MetaMetricsEventName.Wallet5792Called}},k={[o.MESSAGE_TYPE.WATCH_ASSET]:({type:e})=>({type:e}),[o.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN]:([{chainId:e}])=>({chainId:e}),[o.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN]:([{chainId:e}])=>({chainId:e})},v={[o.MESSAGE_TYPE.WALLET_SEND_CALLS]:function(e,t,r,n){var i;if(r!==b.REQUESTED)return;const{params:s}=e,o=null==s||null===(i=s[0])||void 0===i||null===(i=i.calls)||void 0===i?void 0:i.length;o&&(n.batch_transaction_count=o)},[o.MESSAGE_TYPE.WALLET_CREATE_SESSION]:function(e,t,r,n){if(r===b.REQUESTED){const{params:t}=e,r=(null==t?void 0:t.requiredScopes)||{},i=(null==t?void 0:t.optionalScopes)||{},s=new Set;for(const e of Object.keys(r))s.add(e);for(const e of Object.keys(i))s.add(e);n.chain_id_list=Array.from(s)}else if(r===b.APPROVED){const{result:e}=t,r=Object.keys((null==e?void 0:e.sessionScopes)||{});n.chain_id_list=r}}},_={};let A=0}}},{package:"$root$",file:"app/scripts/lib/createRPCMethodTrackingMiddleware.js"}],[122,{"promise-to-callback":5031,"readable-stream":5296},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){return new o(e,t)};var n,i=e("readable-stream"),s=(n=e("promise-to-callback"))&&n.__esModule?n:{default:n};class o extends i.Writable{constructor(e,t){super({objectMode:!0,...t}),this._asyncWriteFn=e}_write(e,t,r){(0,s.default)(this._asyncWriteFn(e,t))(r)}}}}},{package:"$root$",file:"app/scripts/lib/createStreamSink.js"}],[123,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r,n){t.tabId=e.tabId,n()}}}}},{package:"$root$",file:"app/scripts/lib/createTabIdMiddleware.js"}],[124,{"../../../shared/constants/app":5738,"../../../shared/lib/trace":5796},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){return async function(e,t,r){const{id:n,method:a}=e,c=s[a];c&&(e.traceContext=await(0,i.trace)({name:c,id:n,tags:o[a]}),await(0,i.trace)({name:i.TraceName.Middleware,id:n,parentContext:e.traceContext})),r()}};var n=e("../../../shared/constants/app"),i=e("../../../shared/lib/trace");const s={[n.MESSAGE_TYPE.ETH_SEND_TRANSACTION]:i.TraceName.Transaction,[n.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:i.TraceName.Signature,[n.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V1]:i.TraceName.Signature,[n.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:i.TraceName.Signature,[n.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:i.TraceName.Signature,[n.MESSAGE_TYPE.PERSONAL_SIGN]:i.TraceName.Signature},o={[n.MESSAGE_TYPE.ETH_SEND_TRANSACTION]:{source:"dapp"}}}}},{package:"$root$",file:"app/scripts/lib/createTracingMiddleware.ts"}],[125,{"@metamask/browser-passworder":1421},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.encryptorFactory=void 0;var n=e("@metamask/browser-passworder");const i=e=>async(t,r,i,s)=>(0,n.encrypt)(t,r,i,s,{algorithm:"PBKDF2",params:{iterations:e}}),s=e=>async(t,r,i)=>(0,n.encryptWithDetail)(t,r,i,{algorithm:"PBKDF2",params:{iterations:e}}),o=e=>async(t,r,i,s)=>(0,n.keyFromPassword)(t,r,i,s??{algorithm:"PBKDF2",params:{iterations:e}}),a=e=>t=>(0,n.isVaultUpdated)(t,{algorithm:"PBKDF2",params:{iterations:e}});r.encryptorFactory=e=>({encrypt:i(e),encryptWithKey:n.encryptWithKey,encryptWithDetail:s(e),decrypt:n.decrypt,decryptWithKey:n.decryptWithKey,decryptWithDetail:n.decryptWithDetail,keyFromPassword:o(e),isVaultUpdated:a(e),importKey:n.importKey,exportKey:n.exportKey,generateSalt:n.generateSalt})}}},{package:"$root$",file:"app/scripts/lib/encryptor-factory.ts"}],[126,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=[{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"resolver",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"label",type:"bytes32"},{name:"owner",type:"address"}],name:"setSubnodeOwner",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"ttl",type:"uint64"}],name:"setTTL",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"ttl",outputs:[{name:"",type:"uint64"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"resolver",type:"address"}],name:"setResolver",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"owner",type:"address"}],name:"setOwner",outputs:[],payable:!1,type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"owner",type:"address"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!0,name:"label",type:"bytes32"},{indexed:!1,name:"owner",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"resolver",type:"address"}],name:"NewResolver",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"ttl",type:"uint64"}],name:"NewTTL",type:"event"}]}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/contracts/registry.js"}],[127,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=[{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes32"}],name:"setContent",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"content",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"key",type:"string"},{name:"value",type:"string"}],name:"setText",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"},{name:"contentTypes",type:"uint256"}],name:"ABI",outputs:[{name:"contentType",type:"uint256"},{name:"data",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"setPubkey",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes"}],name:"setContenthash",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"addr",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"},{name:"key",type:"string"}],name:"text",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"contentType",type:"uint256"},{name:"data",type:"bytes"}],name:"setABI",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"name",type:"string"}],name:"setName",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"contenthash",outputs:[{name:"",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"pubkey",outputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"addr",type:"address"}],name:"setAddr",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{name:"ensAddr",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"a",type:"address"}],name:"AddrChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"name",type:"string"}],name:"NameChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!0,name:"contentType",type:"uint256"}],name:"ABIChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"x",type:"bytes32"},{indexed:!1,name:"y",type:"bytes32"}],name:"PubkeyChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"indexedKey",type:"string"},{indexed:!1,name:"key",type:"string"}],name:"TextChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"hash",type:"bytes"}],name:"ContenthashChanged",type:"event"}]}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/contracts/resolver.js"}],[128,{"./contracts/registry":126,"./contracts/resolver":127,"@ensdomains/content-hash":436,"@ethersproject/contracts":526,"@ethersproject/providers":564,"eth-ens-namehash":4291},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=async function({provider:e,name:t}){const r=n.default.hash(t),u=Number.parseInt(await e.request({method:"net_version"}),10),d=function(e){switch(e){case 1:case 3:case 4:case 5:case 6:return"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";default:return null}}(u);if(!d)throw new Error(`EnsIpfsResolver - no known ens-ipfs registry for chainId "${u}"`);const f=new s.Web3Provider(e),p=new o.Contract(d,a.default,f),h=await p.resolver(r);if(l(h))throw new Error(`EnsIpfsResolver - no resolver found for name "${t}"`);const m=new o.Contract(h,c.default,f),g=await m.supportsInterface("0xbc1c58d1"),y=await m.supportsInterface("0xd8389dc5");if(g){const e=(await m.contenthash(r))[0];let t=i.default.decode(e);const n=i.default.getCodec(e);return"ipfs-ns"!==n&&"ipns-ns"!==n||(t=i.default.helpers.cidV0ToV1Base32(t)),{type:n,hash:t}}if(y){const e=(await m.content(r))[0];if(l(e))throw new Error(`EnsIpfsResolver - no content ID found for name "${t}"`);return{type:"swarm-ns",hash:e.slice(2)}}throw new Error(`EnsIpfsResolver - the resolver for name "${t}" is not standard, it should either supports contenthash() or content()`)};var n=u(e("eth-ens-namehash")),i=u(e("@ensdomains/content-hash")),s=e("@ethersproject/providers"),o=e("@ethersproject/contracts"),a=u(e("./contracts/registry")),c=u(e("./contracts/resolver"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){return[undefined,null,"0x","0x0","0x0000000000000000000000000000000000000000000000000000000000000000"].includes(e)}}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/resolver.js"}],[129,{"../../../../shared/modules/fetch-with-timeout":5811,"./resolver":128,"base32-encode":3967,"base64-js":3968,"webextension-polyfill":5715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({provider:e,getCurrentChainId:t,getIpfsGateway:r,getUseAddressBarEnsResolution:o}){const c=l.map((e=>`*://*.${e}/*`));return s.default.webRequest.onErrorOccurred.addListener(d,{urls:c,types:["main_frame"]}),{remove(){s.default.webRequest.onErrorOccurred.removeListener(d)}};async function d(c){const{tabId:d,url:f}=c;if(-1===d||"0x1"!==t())return;const{hostname:p,pathname:h,search:m,hash:g}=new URL(f),y=p.split("."),b=y[y.length-1];l.includes(b)&&async function({tabId:t,name:c,pathname:l,search:d,fragment:f}){const p=r(),h=o(),m=`https://app.ens.domains/name/${c}`;h&&p&&await s.default.tabs.update(t,{url:"loading.html"});let g=m;0;try{const{type:t,hash:r}=await(0,a.default)({provider:e,name:c});if("ipfs-ns"===t||"ipns-ns"===t){if(""===p)return void(g=null);const e=`https://${r}.${t.slice(0,4)}.${p}${l}${d||""}${f||""}`;try{200===(await u(e,{method:"HEAD"})).status&&(g=e)}catch(e){console.warn(e)}}else if("swarm-ns"===t)g=`https://swarm-gateways.net/bzz:/${r}${l}${d||""}${f||""}`;else if("onion"===t||"onion3"===t)g=`http://${r}.onion${l}${d||""}${f||""}`;else if("zeronet"===t)g=`http://127.0.0.1:43110/${r}${l}${d||""}${f||""}`;else if("skynet-ns"===t){const e=r.padEnd(r.length+4-r.length%4,"="),t=i.default.toByteArray(e),s={padding:!1};g=`https://${(0,n.default)(t,"RFC4648-HEX",s).toLowerCase()}.siasky.net${l}${d||""}${f||""}`}}catch(e){console.warn(e)}finally{g&&(h||!h&&g!==m)&&await s.default.tabs.update(t,{url:g})}}({tabId:d,name:p,pathname:h,search:m,fragment:g})}};var n=c(e("base32-encode")),i=c(e("base64-js")),s=c(e("webextension-polyfill")),o=c(e("../../../../shared/modules/fetch-with-timeout")),a=c(e("./resolver"));function c(e){return e&&e.__esModule?e:{default:e}}const u=(0,o.default)(),l=["eth"]}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/setup.js"}],[13,{"@metamask/assets-controllers":1361},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NftDetectionControllerInit=void 0;var n=e("@metamask/assets-controllers");r.NftDetectionControllerInit=e=>{const{controllerMessenger:t,getController:r}=e,i=()=>r("NftController");return{controller:new n.NftDetectionController({messenger:t,addNft:(...e)=>i().addNft(...e),getNftState:()=>i().state,disabled:!r("PreferencesController").state.useNftDetection})}}}}},{package:"$root$",file:"app/scripts/controller-init/assets/nft-detection-controller-init.ts"}],[1312,{"./utils.cjs":1314,"@metamask/base-controller":1378,"@metamask/eth-snap-keyring":1781,"@metamask/keyring-api":1983,"@metamask/keyring-controller":1990,"@metamask/keyring-utils":2057,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,o,a,c,u,l,d,f,p,h,m,g,y,b,w,E,T=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.AccountsController=r.EMPTY_ACCOUNT=void 0;const k=e("@metamask/base-controller"),v=e("@metamask/eth-snap-keyring"),_=e("@metamask/keyring-api"),A=e("@metamask/keyring-controller"),S=e("@metamask/keyring-utils"),P=e("@metamask/utils"),I=e("./utils.cjs"),C="AccountsController",M={internalAccounts:{persist:!0,anonymous:!1}},j={internalAccounts:{accounts:{},selectedAccount:""}};r.EMPTY_ACCOUNT={id:"",address:"",options:{},methods:[],type:_.EthAccountType.Eoa,scopes:[_.EthScope.Eoa],metadata:{name:"",keyring:{type:""},importTime:0}};class x extends k.BaseController{constructor({messenger:e,state:t}){super({messenger:e,name:C,metadata:M,state:{...j,...t}}),n.add(this),T(this,n,"m",w).call(this),T(this,n,"m",E).call(this)}getAccount(e){return this.state.internalAccounts.accounts[e]}listAccounts(){return Object.values(this.state.internalAccounts.accounts).filter((e=>(0,_.isEvmAccountType)(e.type)))}listMultichainAccounts(e){const t=Object.values(this.state.internalAccounts.accounts);if(!e)return t;if(!(0,P.isCaipChainId)(e))throw new Error(`Invalid CAIP-2 chain ID: ${String(e)}`);return t.filter((t=>(0,S.isScopeEqualToAny)(e,t.scopes)))}getAccountExpect(e){const t=this.getAccount(e);if(t===undefined)throw new Error(`Account Id "${e}" not found`);return t}getSelectedAccount(){const{internalAccounts:{selectedAccount:e}}=this.state;if(""===e)return r.EMPTY_ACCOUNT;const t=this.getAccountExpect(e);if((0,_.isEvmAccountType)(t.type))return t;const i=this.listAccounts();if(!i.length)throw new Error("No EVM accounts");return T(this,n,"m",h).call(this,i)}getSelectedMultichainAccount(e){const{internalAccounts:{selectedAccount:t}}=this.state;if(""===t)return r.EMPTY_ACCOUNT;if(!e)return this.getAccountExpect(t);const i=this.listMultichainAccounts(e);return T(this,n,"m",h).call(this,i)}getAccountByAddress(e){return this.listMultichainAccounts().find((t=>t.address.toLowerCase()===e.toLowerCase()))}setSelectedAccount(e){const t=this.getAccountExpect(e);T(this,n,"m",d).call(this,(e=>{const{internalAccounts:r}=e;r.accounts[t.id].metadata.lastSelected=Date.now(),r.selectedAccount=t.id}))}setAccountName(e,t){this.updateAccountMetadata(e,{name:t,nameLastUpdatedAt:Date.now()})}setAccountNameAndSelectAccount(e,t){const r=this.getAccountExpect(e);T(this,n,"m",i).call(this,r,t);const s={...r,metadata:{...r.metadata,name:t,nameLastUpdatedAt:Date.now(),lastSelected:T(this,n,"m",m).call(this)}};T(this,n,"m",d).call(this,(e=>{e.internalAccounts.accounts[r.id]=s,e.internalAccounts.selectedAccount=r.id})),this.messagingSystem.publish("AccountsController:accountRenamed",s)}updateAccountMetadata(e,t){const r=this.getAccountExpect(e);t.name&&T(this,n,"m",i).call(this,r,t.name);const s={...r,metadata:{...r.metadata,...t}};T(this,n,"m",d).call(this,(t=>{t.internalAccounts.accounts[e]=s})),t.name&&this.messagingSystem.publish("AccountsController:accountRenamed",s)}async updateAccounts(){const e=await T(this,n,"m",a).call(this),t=await T(this,n,"m",c).call(this),r=new Map,i=this.state.internalAccounts.accounts,s=[...t,...e].reduce(((e,t)=>{const s=(0,I.keyringTypeToName)(t.metadata.keyring.type),o=r.get(s)??0;o?r.set(s,o+1):r.set(s,1);const a=i[t.id];return e[t.id]={...t,metadata:{...t.metadata,name:T(this,n,"m",b).call(this,a?.id,"name")??`${s} ${o+1}`,importTime:T(this,n,"m",b).call(this,a?.id,"importTime")??Date.now(),lastSelected:T(this,n,"m",b).call(this,a?.id,"lastSelected")??0}},e}),{});T(this,n,"m",d).call(this,(e=>{e.internalAccounts.accounts=s}))}loadBackup(e){e.internalAccounts&&this.update((t=>{t.internalAccounts=e.internalAccounts}))}getNextAvailableAccountName(e=A.KeyringTypes.hd,t){const r=(0,I.keyringTypeToName)(e),i=T(this,n,"m",p).call(this,e,t),s=i.reduce(((e,t)=>{const n=new RegExp(`${r} ([0-9]+)$`,"u").exec(t.metadata.name);if(n){const t=parseInt(n[1],10);return Math.max(e,t)}return e}),0),o=Math.max(i.length+1,s+1);return`${r} ${o}`}}r.AccountsController=x,n=new WeakSet,i=function(e,t){if(this.listMultichainAccounts().find((r=>r.metadata.name===t&&r.id!==e.id)))throw new Error("Account name already exists")},s=function(e,t){return{id:(0,I.getUUIDFromAddressOfNormalAccount)(e),address:e,options:{},methods:[_.EthMethod.PersonalSign,_.EthMethod.Sign,_.EthMethod.SignTransaction,_.EthMethod.SignTypedDataV1,_.EthMethod.SignTypedDataV3,_.EthMethod.SignTypedDataV4],scopes:[_.EthScope.Eoa],type:_.EthAccountType.Eoa,metadata:{name:"",importTime:Date.now(),keyring:{type:t}}}},o=function(){const[e]=this.messagingSystem.call("KeyringController:getKeyringsByType",v.SnapKeyring.type);return e},a=async function(){const e=T(this,n,"m",o).call(this);return e?e.listAccounts():[]},c=async function(){const e=[],{keyrings:t}=this.messagingSystem.call("KeyringController:getState");for(const r of t){const t=r.type;if((0,I.isNormalKeyringType)(t))for(const[i,s]of r.accounts.entries()){const o=(0,I.getUUIDFromAddressOfNormalAccount)(s);let a={};(0,I.isHdKeyringType)(r.type)&&(a={entropySource:r.metadata.id,derivationPath:(0,I.getDerivationPathForIndex)(i)});const c=T(this,n,"m",b).call(this,o,"nameLastUpdatedAt");e.push({id:o,address:s,options:a,methods:[_.EthMethod.PersonalSign,_.EthMethod.Sign,_.EthMethod.SignTransaction,_.EthMethod.SignTypedDataV1,_.EthMethod.SignTypedDataV3,_.EthMethod.SignTypedDataV4],scopes:[_.EthScope.Eoa],type:_.EthAccountType.Eoa,metadata:{name:T(this,n,"m",b).call(this,o,"name")??"",...c&&{nameLastUpdatedAt:c},importTime:T(this,n,"m",b).call(this,o,"importTime")??Date.now(),lastSelected:T(this,n,"m",b).call(this,o,"lastSelected")??0,keyring:{type:t}}})}}return e},u=function(e,...t){this.messagingSystem.publish(e,...t)},l=function({isUnlocked:e,keyrings:t}){if(!e||0===t.length)return;const r={snap:{previous:{},added:[],updated:[],removed:[]},normal:{previous:{},added:[],updated:[],removed:[]}},i=e=>e===A.KeyringTypes.snap?r.snap:r.normal;for(const e of this.listMultichainAccounts()){const t=e.address.toLowerCase();i(e.metadata.keyring.type).previous[t]=e}const s=new Set;for(const e of t){const t=i(e.type);for(const r of e.accounts){const n=r.toLowerCase(),i=t.previous[n];i?t.updated.push(i):t.added.push({address:n,type:e.type}),s.add(n)}}for(const e of[r.snap,r.normal])for(const[t,r]of Object.entries(e.previous))s.has(t)||e.removed.push(r);const o={removed:[],added:[]};T(this,n,"m",d).call(this,(e=>{const{internalAccounts:t}=e;for(const e of[r.snap,r.normal]){for(const r of e.removed)delete t.accounts[r.id],o.removed.push(r.id);for(const r of e.added){const e=T(this,n,"m",g).call(this,r.address,r.type);if(e){const r=Object.values(t.accounts),i=this.getNextAvailableAccountName(e.metadata.keyring.type,r),s=0===r.length?T(this,n,"m",m).call(this):0;t.accounts[e.id]={...e,metadata:{...e.metadata,name:i,importTime:Date.now(),lastSelected:s}},o.added.push(t.accounts[e.id])}}}}));for(const e of o.removed)this.messagingSystem.publish("AccountsController:accountRemoved",e);for(const e of o.added)this.messagingSystem.publish("AccountsController:accountAdded",e)},d=function(e){const t=this.state.internalAccounts.selectedAccount;this.update((r=>{e(r);const{internalAccounts:i}=r;if(!i.accounts[t]){const e=Object.values(i.accounts),t=T(this,n,"m",h).call(this,e);t?(i.selectedAccount=t.id,i.accounts[t.id].metadata.lastSelected=T(this,n,"m",m).call(this)):i.selectedAccount=""}}));const{selectedAccount:r}=this.state.internalAccounts;if(r&&r!==t){const e=this.getSelectedMultichainAccount();e&&((0,_.isEvmAccountType)(e.type)&&this.messagingSystem.publish("AccountsController:selectedEvmAccountChange",e),this.messagingSystem.publish("AccountsController:selectedAccountChange",e))}},f=function(e){const{snaps:t}=e,r=[];for(const e of this.listMultichainAccounts())if(e.metadata.snap){const n=t[e.metadata.snap.id],i=n.enabled&&!n.blocked;e.metadata.snap.enabled!==i&&r.push({id:e.id,enabled:i})}r.length>0&&this.update((e=>{for(const{id:t,enabled:n}of r){const r=e.internalAccounts.accounts[t];r.metadata.snap&&(r.metadata.snap.enabled=n)}}))},p=function(e,t){return(t??this.listMultichainAccounts()).filter((t=>e===A.KeyringTypes.hd||e===A.KeyringTypes.simple?t.metadata.keyring.type===A.KeyringTypes.hd||t.metadata.keyring.type===A.KeyringTypes.simple:t.metadata.keyring.type===e))},h=function(e){const[t]=e.sort(((e,t)=>(t.metadata.lastSelected??0)-(e.metadata.lastSelected??0)));return t},m=function(){return Date.now()},g=function(e,t){if(t===A.KeyringTypes.snap){const t=T(this,n,"m",o).call(this);return t?t.getAccountByAddress(e):undefined}return T(this,n,"m",s).call(this,e,t)},y=function(e){let t;if((0,P.isCaipChainId)(e)){const r=this.getSelectedMultichainAccount(e);t=r.id}else{const e=this.getSelectedAccount();t=e.id}this.update((e=>{e.internalAccounts.accounts[t].metadata.lastSelected=Date.now(),e.internalAccounts.selectedAccount=t}))},b=function(e,t,r){const n=r??this.getAccount(e);return n?n.metadata[t]:undefined},w=function(){this.messagingSystem.subscribe("SnapController:stateChange",(e=>T(this,n,"m",f).call(this,e))),this.messagingSystem.subscribe("KeyringController:stateChange",(e=>T(this,n,"m",l).call(this,e))),this.messagingSystem.subscribe("SnapKeyring:accountAssetListUpdated",(e=>T(this,n,"m",u).call(this,"AccountsController:accountAssetListUpdated",e))),this.messagingSystem.subscribe("SnapKeyring:accountBalancesUpdated",(e=>T(this,n,"m",u).call(this,"AccountsController:accountBalancesUpdated",e))),this.messagingSystem.subscribe("SnapKeyring:accountTransactionsUpdated",(e=>T(this,n,"m",u).call(this,"AccountsController:accountTransactionsUpdated",e))),this.messagingSystem.subscribe("MultichainNetworkController:networkDidChange",(e=>T(this,n,"m",y).call(this,e)))},E=function(){this.messagingSystem.registerActionHandler(`${C}:setSelectedAccount`,this.setSelectedAccount.bind(this)),this.messagingSystem.registerActionHandler(`${C}:listAccounts`,this.listAccounts.bind(this)),this.messagingSystem.registerActionHandler(`${C}:listMultichainAccounts`,this.listMultichainAccounts.bind(this)),this.messagingSystem.registerActionHandler(`${C}:setAccountName`,this.setAccountName.bind(this)),this.messagingSystem.registerActionHandler(`${C}:setAccountNameAndSelectAccount`,this.setAccountNameAndSelectAccount.bind(this)),this.messagingSystem.registerActionHandler(`${C}:updateAccounts`,this.updateAccounts.bind(this)),this.messagingSystem.registerActionHandler(`${C}:getSelectedAccount`,this.getSelectedAccount.bind(this)),this.messagingSystem.registerActionHandler(`${C}:getSelectedMultichainAccount`,this.getSelectedMultichainAccount.bind(this)),this.messagingSystem.registerActionHandler(`${C}:getAccountByAddress`,this.getAccountByAddress.bind(this)),this.messagingSystem.registerActionHandler(`${C}:getNextAvailableAccountName`,this.getNextAvailableAccountName.bind(this)),this.messagingSystem.registerActionHandler("AccountsController:getAccount",this.getAccount.bind(this)),this.messagingSystem.registerActionHandler("AccountsController:updateAccountMetadata",this.updateAccountMetadata.bind(this))}}}},{package:"@metamask/accounts-controller",file:"node_modules/@metamask/accounts-controller/dist/AccountsController.cjs"}],[1313,{"./AccountsController.cjs":1312,"./utils.cjs":1314},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isNormalKeyringType=r.getUUIDFromAddressOfNormalAccount=r.getUUIDOptionsFromAddressOfNormalAccount=r.keyringTypeToName=r.AccountsController=r.EMPTY_ACCOUNT=void 0;var n=e("./AccountsController.cjs");Object.defineProperty(r,"EMPTY_ACCOUNT",{enumerable:!0,get:function(){return n.EMPTY_ACCOUNT}}),Object.defineProperty(r,"AccountsController",{enumerable:!0,get:function(){return n.AccountsController}});var i=e("./utils.cjs");Object.defineProperty(r,"keyringTypeToName",{enumerable:!0,get:function(){return i.keyringTypeToName}}),Object.defineProperty(r,"getUUIDOptionsFromAddressOfNormalAccount",{enumerable:!0,get:function(){return i.getUUIDOptionsFromAddressOfNormalAccount}}),Object.defineProperty(r,"getUUIDFromAddressOfNormalAccount",{enumerable:!0,get:function(){return i.getUUIDFromAddressOfNormalAccount}}),Object.defineProperty(r,"isNormalKeyringType",{enumerable:!0,get:function(){return i.isNormalKeyringType}})}}},{package:"@metamask/accounts-controller",file:"node_modules/@metamask/accounts-controller/dist/index.cjs"}],[1314,{"@metamask/keyring-controller":1990,"@metamask/utils":2967,"ethereum-cryptography/sha256":4334,uuid:5682},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getDerivationPathForIndex=r.isHdKeyringType=r.isNormalKeyringType=r.getUUIDFromAddressOfNormalAccount=r.getUUIDOptionsFromAddressOfNormalAccount=r.keyringTypeToName=void 0;const n=e("@metamask/keyring-controller"),i=e("@metamask/utils"),s=e("ethereum-cryptography/sha256"),o=e("uuid");function a(e){return{random:(0,s.sha256)((0,i.hexToBytes)(e)).slice(0,16)}}r.keyringTypeToName=function(e){switch(e){case n.KeyringTypes.simple:case n.KeyringTypes.hd:return"Account";case n.KeyringTypes.trezor:return"Trezor";case n.KeyringTypes.oneKey:return"OneKey";case n.KeyringTypes.ledger:return"Ledger";case n.KeyringTypes.lattice:return"Lattice";case n.KeyringTypes.qr:return"QR";case n.KeyringTypes.snap:return"Snap Account";default:throw new Error(`Unknown keyring ${e}`)}},r.getUUIDOptionsFromAddressOfNormalAccount=a,r.getUUIDFromAddressOfNormalAccount=function(e){return(0,o.v4)(a(e))},r.isNormalKeyringType=function(e){return e!==n.KeyringTypes.snap},r.isHdKeyringType=function(e){return e===n.KeyringTypes.hd},r.getDerivationPathForIndex=function(e){return`m/44'/60'/0'/0/${e}`}}}},{package:"@metamask/accounts-controller",file:"node_modules/@metamask/accounts-controller/dist/utils.cjs"}],[1315,{"@metamask/base-controller":1378,"@metamask/controller-utils":1319},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AddressBookController=r.getDefaultAddressBookControllerState=r.controllerName=r.AddressType=void 0;const n=e("@metamask/base-controller"),i=e("@metamask/controller-utils");var s;!function(e){e.externallyOwnedAccounts="EXTERNALLY_OWNED_ACCOUNTS",e.contractAccounts="CONTRACT_ACCOUNTS",e.nonAccounts="NON_ACCOUNTS"}(s||(r.AddressType=s={})),r.controllerName="AddressBookController";const o={addressBook:{persist:!0,anonymous:!1}};r.getDefaultAddressBookControllerState=()=>({addressBook:{}});class a extends n.BaseController{constructor({messenger:e,state:t}){const n={...(0,r.getDefaultAddressBookControllerState)(),...t};super({messenger:e,metadata:o,name:r.controllerName,state:n})}clear(){this.update((e=>{e.addressBook={}}))}delete(e,t){return t=(0,i.toChecksumHexAddress)(t),!!([e,t].every((e=>(0,i.isSafeDynamicKey)(e)))&&(0,i.isValidHexAddress)(t)&&this.state.addressBook[e]&&this.state.addressBook[e][t])&&(this.update((r=>{delete r.addressBook[e][t],0===Object.keys(r.addressBook[e]).length&&delete r.addressBook[e]})),!0)}set(e,t,r=(0,i.toHex)(1),n="",s){if(e=(0,i.toChecksumHexAddress)(e),!(0,i.isValidHexAddress)(e))return!1;const o={address:e,chainId:r,isEns:!1,memo:n,name:t,addressType:s},a=(0,i.normalizeEnsName)(t);return a&&(o.name=a,o.isEns=!0),this.update((t=>{t.addressBook={...this.state.addressBook,[r]:{...this.state.addressBook[r],[e]:o}}})),!0}}r.AddressBookController=a,r.default=a}}},{package:"@metamask/address-book-controller",file:"node_modules/@metamask/address-book-controller/dist/AddressBookController.cjs"}],[1316,{"./AddressBookController.cjs":1315},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AddressBookController=r.getDefaultAddressBookControllerState=void 0;var n=e("./AddressBookController.cjs");Object.defineProperty(r,"getDefaultAddressBookControllerState",{enumerable:!0,get:function(){return n.getDefaultAddressBookControllerState}}),Object.defineProperty(r,"AddressBookController",{enumerable:!0,get:function(){return n.AddressBookController}})}}},{package:"@metamask/address-book-controller",file:"node_modules/@metamask/address-book-controller/dist/index.cjs"}],[1317,{"./types.cjs":1322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=r.ApprovalType=r.ORIGIN_METAMASK=r.NFT_API_TIMEOUT=r.NFT_API_VERSION=r.NFT_API_BASE_URL=r.OPENSEA_PROXY_URL=r.BUILT_IN_NETWORKS=r.BUILT_IN_CUSTOM_NETWORKS_RPC=r.TESTNET_TICKER_SYMBOLS=r.ASSET_TYPES=r.GWEI=r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=r.ERC1155_METADATA_URI_INTERFACE_ID=r.ERC1155_INTERFACE_ID=r.ERC721_ENUMERABLE_INTERFACE_ID=r.ERC721_METADATA_INTERFACE_ID=r.ERC721_INTERFACE_ID=r.ERC20=r.ERC1155=r.ERC721=r.MAX_SAFE_CHAIN_ID=r.GANACHE_CHAIN_ID=r.IPFS_DEFAULT_GATEWAY_URL=r.FALL_BACK_VS_CURRENCY=r.RPC=void 0;const n=e("./types.cjs");var i;r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH",LINEA_SEPOLIA:"LineaETH",MEGAETH_TESTNET:"MegaETH"},r.BUILT_IN_CUSTOM_NETWORKS_RPC={MEGAETH_TESTNET:"https://carrot.megaeth.com/rpc","megaeth-testnet":"https://carrot.megaeth.com/rpc","monad-testnet":"https://testnet-rpc.monad.xyz"},r.BUILT_IN_NETWORKS={[n.NetworkType.goerli]:{chainId:n.ChainId.goerli,ticker:n.NetworksTicker.goerli,rpcPrefs:{blockExplorerUrl:n.BlockExplorerUrl.goerli}},[n.NetworkType.sepolia]:{chainId:n.ChainId.sepolia,ticker:n.NetworksTicker.sepolia,rpcPrefs:{blockExplorerUrl:n.BlockExplorerUrl.sepolia}},[n.NetworkType.mainnet]:{chainId:n.ChainId.mainnet,ticker:n.NetworksTicker.mainnet,rpcPrefs:{blockExplorerUrl:n.BlockExplorerUrl.mainnet}},[n.NetworkType["linea-goerli"]]:{chainId:n.ChainId["linea-goerli"],ticker:n.NetworksTicker["linea-goerli"],rpcPrefs:{blockExplorerUrl:n.BlockExplorerUrl["linea-goerli"]}},[n.NetworkType["linea-sepolia"]]:{chainId:n.ChainId["linea-sepolia"],ticker:n.NetworksTicker["linea-sepolia"],rpcPrefs:{blockExplorerUrl:n.BlockExplorerUrl["linea-sepolia"]}},[n.NetworkType["linea-mainnet"]]:{chainId:n.ChainId["linea-mainnet"],ticker:n.NetworksTicker["linea-mainnet"],rpcPrefs:{blockExplorerUrl:n.BlockExplorerUrl["linea-mainnet"]}},[n.NetworkType["megaeth-testnet"]]:{chainId:n.ChainId["megaeth-testnet"],ticker:n.NetworksTicker["megaeth-testnet"],rpcPrefs:{blockExplorerUrl:n.BlockExplorerUrl["megaeth-testnet"]}},[n.NetworkType["monad-testnet"]]:{chainId:n.ChainId["monad-testnet"],ticker:n.NetworksTicker["monad-testnet"],rpcPrefs:{blockExplorerUrl:n.BlockExplorerUrl["monad-testnet"]}},[n.NetworkType.rpc]:{chainId:undefined,blockExplorerUrl:undefined,ticker:undefined,rpcPrefs:undefined}},r.OPENSEA_PROXY_URL="https://proxy.api.cx.metamask.io/opensea/v1/api/v2",r.NFT_API_BASE_URL="https://nft.api.cx.metamask.io",r.NFT_API_VERSION="1",r.NFT_API_TIMEOUT=15e3,r.ORIGIN_METAMASK="metamask",function(e){e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SnapDialogDefault="snap_dialog",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset"}(i||(r.ApprovalType=i={})),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP={[n.ChainId.goerli]:n.BuiltInNetworkName.Goerli,[n.ChainId.sepolia]:n.BuiltInNetworkName.Sepolia,[n.ChainId.mainnet]:n.BuiltInNetworkName.Mainnet,[n.ChainId["linea-goerli"]]:n.BuiltInNetworkName.LineaGoerli,[n.ChainId["linea-sepolia"]]:n.BuiltInNetworkName.LineaSepolia,[n.ChainId["linea-mainnet"]]:n.BuiltInNetworkName.LineaMainnet,[n.ChainId.aurora]:n.BuiltInNetworkName.Aurora}}}},{package:"@metamask/address-book-controller>@metamask/controller-utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/dist/constants.cjs"}],[1318,{cockatiel:4140},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createServicePolicy=r.DEFAULT_DEGRADED_THRESHOLD=r.DEFAULT_CIRCUIT_BREAK_DURATION=r.DEFAULT_MAX_CONSECUTIVE_FAILURES=r.DEFAULT_MAX_RETRIES=r.handleWhen=r.handleAll=r.ExponentialBackoff=r.ConstantBackoff=r.CircuitState=r.BrokenCircuitError=void 0;const n=e("cockatiel");Object.defineProperty(r,"BrokenCircuitError",{enumerable:!0,get:function(){return n.BrokenCircuitError}}),Object.defineProperty(r,"CircuitState",{enumerable:!0,get:function(){return n.CircuitState}}),Object.defineProperty(r,"ExponentialBackoff",{enumerable:!0,get:function(){return n.ExponentialBackoff}}),Object.defineProperty(r,"ConstantBackoff",{enumerable:!0,get:function(){return n.ConstantBackoff}}),Object.defineProperty(r,"handleAll",{enumerable:!0,get:function(){return n.handleAll}}),Object.defineProperty(r,"handleWhen",{enumerable:!0,get:function(){return n.handleWhen}}),r.DEFAULT_MAX_RETRIES=3,r.DEFAULT_MAX_CONSECUTIVE_FAILURES=3*(1+r.DEFAULT_MAX_RETRIES),r.DEFAULT_CIRCUIT_BREAK_DURATION=18e5,r.DEFAULT_DEGRADED_THRESHOLD=5e3,r.createServicePolicy=function(e={}){const{maxRetries:t=r.DEFAULT_MAX_RETRIES,retryFilterPolicy:i=n.handleAll,maxConsecutiveFailures:s=r.DEFAULT_MAX_CONSECUTIVE_FAILURES,circuitBreakDuration:o=r.DEFAULT_CIRCUIT_BREAK_DURATION,degradedThreshold:a=r.DEFAULT_DEGRADED_THRESHOLD,backoff:c=new n.ExponentialBackoff}=e,u=(0,n.retry)(i,{maxAttempts:t,backoff:c}),l=u.onRetry.bind(u),d=(0,n.circuitBreaker)(n.handleAll,{halfOpenAfter:o,breaker:new n.ConsecutiveBreaker(s)}),f=d.onBreak.bind(d),p=new n.EventEmitter;u.onGiveUp((()=>{d.state===n.CircuitState.Closed&&p.emit()})),u.onSuccess((({duration:e})=>{d.state===n.CircuitState.Closed&&e>a&&p.emit()}));const h=p.addListener;return{...(0,n.wrap)(u,d),circuitBreakerPolicy:d,retryPolicy:u,onBreak:f,onDegraded:h,onRetry:l}}}}},{package:"@metamask/address-book-controller>@metamask/controller-utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/dist/create-service-policy.cjs"}],[1319,{"./constants.cjs":1317,"./create-service-policy.cjs":1318,"./siwe.cjs":1321,"./types.cjs":1322,"./util.cjs":1323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.isEqualCaseInsensitive=r.weiHexToGweiDec=r.toHex=r.toChecksumHexAddress=r.timeoutFetch=r.successfulFetch=r.safelyExecuteWithTimeout=r.safelyExecute=r.query=r.normalizeEnsName=r.isValidHexAddress=r.isValidJson=r.isSmartContractCode=r.isSafeDynamicKey=r.isSafeChainId=r.isPlainObject=r.isNonEmptyArray=r.hexToText=r.hexToBN=r.handleFetch=r.gweiDecToWEIBN=r.getBuyURL=r.fromHex=r.fractionBN=r.fetchWithErrorHandling=r.convertHexToDecimal=r.BNToHex=r.handleWhen=r.handleAll=r.createServicePolicy=r.ExponentialBackoff=r.DEFAULT_MAX_RETRIES=r.DEFAULT_MAX_CONSECUTIVE_FAILURES=r.DEFAULT_DEGRADED_THRESHOLD=r.DEFAULT_CIRCUIT_BREAK_DURATION=r.ConstantBackoff=r.CircuitState=r.BrokenCircuitError=void 0;var s=e("./create-service-policy.cjs");Object.defineProperty(r,"BrokenCircuitError",{enumerable:!0,get:function(){return s.BrokenCircuitError}}),Object.defineProperty(r,"CircuitState",{enumerable:!0,get:function(){return s.CircuitState}}),Object.defineProperty(r,"ConstantBackoff",{enumerable:!0,get:function(){return s.ConstantBackoff}}),Object.defineProperty(r,"DEFAULT_CIRCUIT_BREAK_DURATION",{enumerable:!0,get:function(){return s.DEFAULT_CIRCUIT_BREAK_DURATION}}),Object.defineProperty(r,"DEFAULT_DEGRADED_THRESHOLD",{enumerable:!0,get:function(){return s.DEFAULT_DEGRADED_THRESHOLD}}),Object.defineProperty(r,"DEFAULT_MAX_CONSECUTIVE_FAILURES",{enumerable:!0,get:function(){return s.DEFAULT_MAX_CONSECUTIVE_FAILURES}}),Object.defineProperty(r,"DEFAULT_MAX_RETRIES",{enumerable:!0,get:function(){return s.DEFAULT_MAX_RETRIES}}),Object.defineProperty(r,"ExponentialBackoff",{enumerable:!0,get:function(){return s.ExponentialBackoff}}),Object.defineProperty(r,"createServicePolicy",{enumerable:!0,get:function(){return s.createServicePolicy}}),Object.defineProperty(r,"handleAll",{enumerable:!0,get:function(){return s.handleAll}}),Object.defineProperty(r,"handleWhen",{enumerable:!0,get:function(){return s.handleWhen}}),i(e("./constants.cjs"),r);var o=e("./util.cjs");Object.defineProperty(r,"BNToHex",{enumerable:!0,get:function(){return o.BNToHex}}),Object.defineProperty(r,"convertHexToDecimal",{enumerable:!0,get:function(){return o.convertHexToDecimal}}),Object.defineProperty(r,"fetchWithErrorHandling",{enumerable:!0,get:function(){return o.fetchWithErrorHandling}}),Object.defineProperty(r,"fractionBN",{enumerable:!0,get:function(){return o.fractionBN}}),Object.defineProperty(r,"fromHex",{enumerable:!0,get:function(){return o.fromHex}}),Object.defineProperty(r,"getBuyURL",{enumerable:!0,get:function(){return o.getBuyURL}}),Object.defineProperty(r,"gweiDecToWEIBN",{enumerable:!0,get:function(){return o.gweiDecToWEIBN}}),Object.defineProperty(r,"handleFetch",{enumerable:!0,get:function(){return o.handleFetch}}),Object.defineProperty(r,"hexToBN",{enumerable:!0,get:function(){return o.hexToBN}}),Object.defineProperty(r,"hexToText",{enumerable:!0,get:function(){return o.hexToText}}),Object.defineProperty(r,"isNonEmptyArray",{enumerable:!0,get:function(){return o.isNonEmptyArray}}),Object.defineProperty(r,"isPlainObject",{enumerable:!0,get:function(){return o.isPlainObject}}),Object.defineProperty(r,"isSafeChainId",{enumerable:!0,get:function(){return o.isSafeChainId}}),Object.defineProperty(r,"isSafeDynamicKey",{enumerable:!0,get:function(){return o.isSafeDynamicKey}}),Object.defineProperty(r,"isSmartContractCode",{enumerable:!0,get:function(){return o.isSmartContractCode}}),Object.defineProperty(r,"isValidJson",{enumerable:!0,get:function(){return o.isValidJson}}),Object.defineProperty(r,"isValidHexAddress",{enumerable:!0,get:function(){return o.isValidHexAddress}}),Object.defineProperty(r,"normalizeEnsName",{enumerable:!0,get:function(){return o.normalizeEnsName}}),Object.defineProperty(r,"query",{enumerable:!0,get:function(){return o.query}}),Object.defineProperty(r,"safelyExecute",{enumerable:!0,get:function(){return o.safelyExecute}}),Object.defineProperty(r,"safelyExecuteWithTimeout",{enumerable:!0,get:function(){return o.safelyExecuteWithTimeout}}),Object.defineProperty(r,"successfulFetch",{enumerable:!0,get:function(){return o.successfulFetch}}),Object.defineProperty(r,"timeoutFetch",{enumerable:!0,get:function(){return o.timeoutFetch}}),Object.defineProperty(r,"toChecksumHexAddress",{enumerable:!0,get:function(){return o.toChecksumHexAddress}}),Object.defineProperty(r,"toHex",{enumerable:!0,get:function(){return o.toHex}}),Object.defineProperty(r,"weiHexToGweiDec",{enumerable:!0,get:function(){return o.weiHexToGweiDec}}),Object.defineProperty(r,"isEqualCaseInsensitive",{enumerable:!0,get:function(){return o.isEqualCaseInsensitive}}),i(e("./types.cjs"),r),i(e("./siwe.cjs"),r)}}},{package:"@metamask/address-book-controller>@metamask/controller-utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/dist/index.cjs"}],[132,{lodash:4871},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return i((0,n.cloneDeep)(e),(e=>null===e?"null":typeof e))};var n=e("lodash");function i(e={},t){return Object.entries(e).forEach((([r,n])=>{e[r]="object"==typeof n&&null!==n?i(n,t):t(n)})),e}}}},{package:"$root$",file:"app/scripts/lib/getObjStructure.js"}],[1320,{"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("controller-utils")}}},{package:"@metamask/address-book-controller>@metamask/controller-utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/dist/logger.cjs"}],[1321,{"./logger.cjs":1320,"@metamask/utils":2967,"@spruceid/siwe-parser":3240,buffer:4079},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.detectSIWE=r.isValidSIWEOrigin=r.parseDomainParts=void 0;const n=e("@metamask/utils"),i=e("@spruceid/siwe-parser"),s=e("./logger.cjs"),o=(0,s.createModuleLogger)(s.projectLogger,"detect-siwe");function a(e){try{const i="string"!=typeof(r=e)?r:(0,n.remove0x)(r),s=t.from(i,"hex");return 32===s.length?e:s.toString("utf8")}catch(t){return o(t),e}var r}const c={"http:":"80","https:":"443"};r.parseDomainParts=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.isValidSIWEOrigin=e=>{try{const{origin:t,siwe:n}=e;if(!t||!n?.parsedMessage?.domain)return!1;const i=new URL(t),s=(0,r.parseDomainParts)(n.parsedMessage.domain,i.protocol);return 0===s.hostname.localeCompare(i.hostname,undefined,{sensitivity:"accent"})&&(""!==s.port&&s.port!==i.port?""===i.port&&s.port===c[i.protocol]:""===s.username||s.username===i.username)}catch(e){return o(e),!1}};r.detectSIWE=e=>{try{const{data:t}=e,r=a(t);return{isSIWEMessage:!0,parsedMessage:new i.ParsedMessage(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/address-book-controller>@metamask/controller-utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/dist/siwe.cjs"}],[1322,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i;Object.defineProperty(r,"__esModule",{value:!0}),r.NetworkNickname=r.BlockExplorerUrl=r.NetworksTicker=r.ChainId=r.BuiltInNetworkName=r.isInfuraNetworkType=r.isNetworkType=r.NetworkType=r.CustomNetworkType=r.InfuraNetworkType=void 0,r.InfuraNetworkType={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-sepolia":"linea-sepolia","linea-mainnet":"linea-mainnet"},r.CustomNetworkType={"megaeth-testnet":"megaeth-testnet","monad-testnet":"monad-testnet"},r.NetworkType={...r.InfuraNetworkType,...r.CustomNetworkType,rpc:"rpc"},r.isNetworkType=function(e){return Object.values(r.NetworkType).includes(e)},r.isInfuraNetworkType=function(e){return Object.keys(r.InfuraNetworkType).includes(e)},function(e){e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaSepolia="linea-sepolia",e.LineaMainnet="linea-mainnet",e.Aurora="aurora",e.MegaETHTestnet="megaeth-testnet",e.MonadTestnet="monad-testnet"}(n||(r.BuiltInNetworkName=n={})),r.ChainId={[n.Mainnet]:"0x1",[n.Goerli]:"0x5",[n.Sepolia]:"0xaa36a7",[n.Aurora]:"0x4e454152",[n.LineaGoerli]:"0xe704",[n.LineaSepolia]:"0xe705",[n.LineaMainnet]:"0xe708",[n.MegaETHTestnet]:"0x18c6",[n.MonadTestnet]:"0x279f"},function(e){e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-sepolia"]="LineaETH",e["linea-mainnet"]="ETH",e["megaeth-testnet"]="MegaETH",e["monad-testnet"]="MON",e.rpc=""}(i||(r.NetworksTicker=i={})),r.BlockExplorerUrl={[n.Mainnet]:"https://etherscan.io",[n.Goerli]:"https://goerli.etherscan.io",[n.Sepolia]:"https://sepolia.etherscan.io",[n.LineaGoerli]:"https://goerli.lineascan.build",[n.LineaSepolia]:"https://sepolia.lineascan.build",[n.LineaMainnet]:"https://lineascan.build",[n.MegaETHTestnet]:"https://megaexplorer.xyz",[n.MonadTestnet]:"https://testnet.monadexplorer.com"},r.NetworkNickname={[n.Mainnet]:"Ethereum Mainnet",[n.Goerli]:"Goerli",[n.Sepolia]:"Sepolia",[n.LineaGoerli]:"Linea Goerli",[n.LineaSepolia]:"Linea Sepolia",[n.LineaMainnet]:"Linea",[n.MegaETHTestnet]:"Mega Testnet",[n.MonadTestnet]:"Monad Testnet"}}}},{package:"@metamask/address-book-controller>@metamask/controller-utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/dist/types.cjs"}],[1323,{"./constants.cjs":1317,"@ethereumjs/util":476,"@metamask/ethjs-unit":1911,"@metamask/utils":2967,"bn.js":4018,buffer:4079,"eth-ens-namehash":4291,"fast-deep-equal":4444},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isEqualCaseInsensitive=r.isValidJson=r.isNonEmptyArray=r.isPlainObject=r.convertHexToDecimal=r.query=r.normalizeEnsName=r.timeoutFetch=r.fetchWithErrorHandling=r.handleFetch=r.successfulFetch=r.isSmartContractCode=r.isValidHexAddress=r.toChecksumHexAddress=r.safelyExecuteWithTimeout=r.safelyExecute=r.toHex=r.fromHex=r.hexToText=r.hexToBN=r.getBuyURL=r.weiHexToGweiDec=r.gweiDecToWEIBN=r.fractionBN=r.BNToHex=r.isSafeChainId=r.isSafeDynamicKey=r.PROTOTYPE_POLLUTION_BLOCKLIST=void 0;const i=e("@ethereumjs/util"),s=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),a=n(e("bn.js")),c=n(e("eth-ens-namehash")),u=n(e("fast-deep-equal")),l=e("./constants.cjs"),d=new Error("timeout");function f(e){return e?new a.default((0,o.remove0x)(e),16):new a.default(0)}async function p(e,t){const r=await fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${String(e)}'`);return r}async function h(e,t){const r=await p(e,t);return await r.json()}r.PROTOTYPE_POLLUTION_BLOCKLIST=["__proto__","constructor","prototype"],r.isSafeDynamicKey=function(e){return"string"==typeof e&&!r.PROTOTYPE_POLLUTION_BLOCKLIST.some((t=>e===t))},r.isSafeChainId=function(e){if(!(0,o.isHexString)(e))return!1;const t=Number.parseInt(e,(0,o.isStrictHexString)(e)?16:10);return Number.isSafeInteger(t)&&t>0&&t<=l.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return(0,o.add0x)(e.toString(16))},r.fractionBN=function(e,t,r){const n=new a.default(t),i=new a.default(r);return e.mul(n).div(i)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new a.default(0);const t=e.toString().split("."),r=t[0]||"0";let n=t[1]||"";if(!n)return(0,s.toWei)(r,"gwei");if(n.length<=9)return(0,s.toWei)(`${r}.${n}`,"gwei");const i=n.slice(9)[0];n=n.slice(0,9);let o=(0,s.toWei)(`${r}.${n}`,"gwei");return Number(i)>=5&&(o=o.add(new a.default(1))),o},r.weiHexToGweiDec=function(e){const t=new a.default((0,o.remove0x)(e),16);return(0,s.fromWei)(t,"gwei")},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return undefined}},r.hexToBN=f,r.hexToText=function(e){try{const r=(0,o.remove0x)(e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return a.default.isBN(e)?e:new a.default(f(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&(0,o.isStrictHexString)(e)?e:`0x${a.default.isBN(e)||"bigint"==typeof e?e.toString(16):new a.default(e.toString(),10).toString(16)}`},r.safelyExecute=async function(e,t=!1){try{return await e()}catch(e){return t&&console.error(e),undefined}},r.safelyExecuteWithTimeout=async function(e,t=!1,r=500){try{return await Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))])}catch(e){return t&&console.error(e),undefined}},r.toChecksumHexAddress=function(e){if("string"!=typeof e)return e;const t=(0,o.add0x)(e);return(0,o.isHexString)(t)?(0,i.toChecksumAddress)(t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?(0,o.add0x)(e):e;return!!(0,o.isStrictHexString)(r)&&(0,i.isValidAddress)(r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=p,r.handleFetch=h,r.fetchWithErrorHandling=async function({url:e,options:t,timeout:r,errorCodesToCatch:n}){let i;try{i=r?Promise.race([await h(e,t),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))]):await h(e,t)}catch(e){!function(e,t=[]){if(!e)return;if(!(e instanceof Error))throw e;if(!t.some((t=>e.message.includes(`Fetch failed with status '${t}'`)))&&!e.message.includes("Failed to fetch")&&e!==d)throw e;console.error(e)}(e,n)}return i},r.timeoutFetch=async function(e,t,r=500){return Promise.race([p(e,t),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))])},r.normalizeEnsName=function(e){if("."===e)return e;if(e&&"string"==typeof e)try{const t=c.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((n,i)=>{const s=(e,t)=>{e?i(e):n(t)};t in e&&"function"==typeof e[t]?e[t](...r,s):e.sendAsync({method:t,params:r},s)}))};r.convertHexToDecimal=(e="0x0")=>(0,o.isStrictHexString)(e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return(0,u.default)(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}},r.isEqualCaseInsensitive=function(e,t){return"string"==typeof e&&"string"==typeof t&&e.toLowerCase()===t.toLowerCase()}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/address-book-controller>@metamask/controller-utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/dist/util.cjs"}],[1324,{"@metamask/base-controller":1378},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.AnnouncementController=void 0;const o=e("@metamask/base-controller"),a={announcements:{}},c={announcements:{persist:!0,anonymous:!0}};class u extends o.BaseController{constructor({messenger:e,state:t,allAnnouncements:r}){const o={...a,...t};super({messenger:e,metadata:c,name:"AnnouncementController",state:o}),n.add(this),s(this,n,"m",i).call(this,r)}resetViewed(){this.update((({announcements:e})=>{for(const t of Object.values(e))t.isShown=!1}))}updateViewed(e){this.update((({announcements:t})=>{for(const r of Object.keys(e).map(Number))t[r].isShown=e[r]}))}}r.AnnouncementController=u,n=new WeakSet,i=function(e){this.update((t=>{Object.values(e).forEach((e=>{t.announcements[e.id]=t.announcements[e.id]??{...e,isShown:!1}}))}))}}}},{package:"@metamask/announcement-controller",file:"node_modules/@metamask/announcement-controller/dist/AnnouncementController.cjs"}],[1325,{"./AnnouncementController.cjs":1324},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AnnouncementController=void 0;var n=e("./AnnouncementController.cjs");Object.defineProperty(r,"AnnouncementController",{enumerable:!0,get:function(){return n.AnnouncementController}})}}},{package:"@metamask/announcement-controller",file:"node_modules/@metamask/announcement-controller/dist/index.cjs"}],[133,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hardwareKeyringBuilderFactory=function(e,t){const r=()=>new e({bridge:new t});return r.type=e.type,r}}}},{package:"$root$",file:"app/scripts/lib/hardware-keyring-builder-factory.ts"}],[135,{"../util":198,"@metamask/json-rpc-engine":1933},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createPendingNonceMiddleware=function({getPendingNonce:e}){return(0,n.createAsyncMiddleware)((async(t,r,n)=>{const{method:i,params:s}=t;if("eth_getTransactionCount"!==i)return void n();const[o,a]=s;"pending"===a?r.result=await e(o,t.networkClientId):n()}))},r.createPendingTxMiddleware=function({getPendingTransactionByHash:e}){return(0,n.createAsyncMiddleware)((async(t,r,n)=>{const{method:s,params:o}=t;if("eth_getTransactionByHash"!==s)return void n();const[a]=o,c=e(a);c?r.result=(0,i.formatTxMetaForRpcResult)(c):n()}))};var n=e("@metamask/json-rpc-engine"),i=e("../util")}}},{package:"$root$",file:"app/scripts/lib/middleware/pending.js"}],[136,{events:4415,loglevel:4879},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=s(e("events")),i=s(e("loglevel"));function s(e){return e&&e.__esModule?e:{default:e}}class o extends n.default{constructor(e={}){super();const t=e.migrations||[];this.migrations=t.sort(((e,t)=>e.version-t.version));const r=this.migrations.slice(-1)[0];this.defaultVersion=e.defaultVersion||r&&r.version||0}async migrateData(e=this.generateInitialState()){const t=this.migrations.filter((function(t){return t.version>e.meta.version}));for(const r of t)try{i.default.info(`Running migration ${r.version}...`);const t=await r.migrate(e);if(!t.data)throw new Error("Migrator - migration returned empty data");if(t.version!==undefined&&t.meta.version!==r.version)throw new Error("Migrator - Migration did not update version number correctly");e=t,i.default.info(`Migration ${r.version} complete`)}catch(t){const n=t.message;return t.message=`MetaMask Migration Error #${r.version}: ${n}`,this.emit("error",t),e}return e}generateInitialState(e){return{meta:{version:this.defaultVersion},data:e}}}r.default=o}}},{package:"$root$",file:"app/scripts/lib/migrator/index.js"}],[138,{"../../../shared/constants/notifications":5753,"../platforms/extension":383,"@metamask/safe-event-emitter":2528},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.NOTIFICATION_MANAGER_EVENTS=void 0;var n=o(e("@metamask/safe-event-emitter")),i=o(e("../platforms/extension")),s=e("../../../shared/constants/notifications");function o(e){return e&&e.__esModule?e:{default:e}}const a=r.NOTIFICATION_MANAGER_EVENTS={POPUP_CLOSED:"onPopupClosed"};class c extends n.default{constructor(){super(),this.platform=new i.default,this.platform.addOnRemovedListener(this._onWindowClosed.bind(this))}markAsAutomaticallyClosed(){this._popupAutomaticallyClosed=!0}async showPopup(e,t){this._popupId=t,this._setCurrentPopupId=e;const r=await this._getPopup(t);if(r)await this.platform.focusWindow(r.id);else{let e=0,t=0;try{const r=await this.platform.getLastFocusedWindow();t=r.top,e=Math.max(r.left+(r.width-s.NOTIFICATION_WIDTH),0)}catch(r){const{screenX:n,screenY:i,outerWidth:o}=window;t=Math.max(i,0),e=Math.max(n+(o-s.NOTIFICATION_WIDTH),0)}const r=await this.platform.openWindow({url:"notification.html",type:"popup",width:s.NOTIFICATION_WIDTH,height:s.NOTIFICATION_HEIGHT,left:e,top:t});r.left!==e&&"fullscreen"!==r.state&&await this.platform.updateWindowPosition(r.id,e,t),this._setCurrentPopupId(r.id),this._popupId=r.id}}_onWindowClosed(e){e===this._popupId&&(this._setCurrentPopupId(undefined),this._popupId=undefined,this.emit(a.POPUP_CLOSED,{automaticallyClosed:this._popupAutomaticallyClosed}),this._popupAutomaticallyClosed=undefined)}async _getPopup(){const e=await this.platform.getAllWindows();return this._getPopupIn(e)}_getPopupIn(e){return e?e.find((e=>e&&"popup"===e.type&&e.id===this._popupId)):null}}r.default=c}}},{package:"$root$",file:"app/scripts/lib/notification-manager.js"}],[139,{"../../../../shared/constants/offscreen-communication":5754,"eth-lattice-keyring":4292},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.LatticeKeyringOffscreen=void 0;var n,i=(n=e("eth-lattice-keyring"))&&n.__esModule?n:{default:n},s=e("../../../../shared/constants/offscreen-communication");class o extends i.default{constructor(e={}){super(e)}async _getCreds(){try{const e=this.appName?this.appName:"Unknown",t=`${s.KnownOrigins.lattice}?keyring=${e}&forceLogin=true`;return await new Promise(((e,r)=>{chrome.runtime.sendMessage({target:s.OffscreenCommunicationTarget.latticeOffscreen,params:{url:t}},(t=>{t.error&&r(t.error),e(t.result)}))}))}catch(e){throw new Error(e)}}}r.LatticeKeyringOffscreen=o,function(e,t,r){(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(o,"type",void 0),o.type=i.default.type}}},{package:"$root$",file:"app/scripts/lib/offscreen-bridge/lattice-offscreen-keyring.ts"}],[14,{"@metamask/assets-controllers":1361},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TokenRatesControllerInit=void 0;var n=e("@metamask/assets-controllers");r.TokenRatesControllerInit=e=>{var t;const{controllerMessenger:r,getController:i,persistedState:s}=e;return{controller:new n.TokenRatesController({messenger:r,state:s.TokenRatesController,tokenPricesService:new n.CodefiTokenPricesServiceV2,disabled:!(null!==(t=i("PreferencesController").state)&&void 0!==t&&t.useCurrencyRateCheck)})}}}}},{package:"$root$",file:"app/scripts/controller-init/assets/token-rates-controller-init.ts"}],[140,{"../../../../shared/constants/offscreen-communication":5754},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerOffscreenBridge=void 0;var n=e("../../../../shared/constants/offscreen-communication");function i(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function s(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var a=new WeakSet;async function c(e,{timeout:t}={}){return new Promise(((r,i)=>{let s;t&&(s=setTimeout((()=>{i(new Error("Ledger iframe timeout"))}),t)),chrome.runtime.sendMessage({...e,target:n.OffscreenCommunicationTarget.ledgerOffscreen},(e=>{var t;(clearTimeout(s),null!=e&&e.success)?r(e.payload||e.success):i(new Error((null==e||null===(t=e.payload)||void 0===t?void 0:t.error)||"Unknown Ledger error"))}))}))}r.LedgerOffscreenBridge=class{constructor(){i(this,a),s(this,"isDeviceConnected",!1)}init(){return chrome.runtime.onMessage.addListener((e=>{e.target===n.OffscreenCommunicationTarget.extension&&e.event===n.OffscreenCommunicationEvents.ledgerDeviceConnect&&(this.isDeviceConnected=!0)})),Promise.resolve()}destroy(){return Promise.resolve()}getOptions(){return Promise.resolve({})}setOptions(){return Promise.resolve()}attemptMakeApp(){return o(a,this,c).call(this,{action:n.LedgerAction.makeApp},{timeout:4e3})}updateTransportMethod(e){return o(a,this,c).call(this,{action:n.LedgerAction.updateTransport,params:{transportType:e}},{timeout:4e3})}getPublicKey(e){return o(a,this,c).call(this,{action:n.LedgerAction.getPublicKey,params:e})}deviceSignTransaction(e){return o(a,this,c).call(this,{action:n.LedgerAction.signTransaction,params:e})}deviceSignMessage(e){return o(a,this,c).call(this,{action:n.LedgerAction.signPersonalMessage,params:e})}deviceSignTypedData(e){return o(a,this,c).call(this,{action:n.LedgerAction.signTypedData,params:e})}}}}},{package:"$root$",file:"app/scripts/lib/offscreen-bridge/ledger-offscreen-bridge.ts"}],[141,{"../../../../shared/constants/offscreen-communication":5754},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TrezorOffscreenBridge=void 0;var n=e("../../../../shared/constants/offscreen-communication");function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.TrezorOffscreenBridge=class{constructor(){i(this,"model",void 0),i(this,"minorVersion",void 0)}init(e){return chrome.runtime.onMessage.addListener((e=>{e.target===n.OffscreenCommunicationTarget.extension&&e.event===n.OffscreenCommunicationEvents.trezorDeviceConnect&&(this.model=e.payload.model,this.minorVersion=e.payload.minorVersion)})),new Promise((t=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.trezorOffscreen,action:n.TrezorAction.init,params:e},(()=>{t()}))}))}dispose(){return new Promise((e=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.trezorOffscreen,action:n.TrezorAction.dispose},(()=>{e()}))}))}getPublicKey(e){return new Promise((t=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.trezorOffscreen,action:n.TrezorAction.getPublicKey,params:e},(e=>{t(e)}))}))}ethereumSignTransaction(e){return new Promise((t=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.trezorOffscreen,action:n.TrezorAction.signTransaction,params:e},(e=>{t(e)}))}))}ethereumSignMessage(e){return new Promise((t=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.trezorOffscreen,action:n.TrezorAction.signMessage,params:e},(e=>{t(e)}))}))}ethereumSignTypedData(e){return new Promise((t=>{chrome.runtime.sendMessage({target:n.OffscreenCommunicationTarget.trezorOffscreen,action:n.TrezorAction.signTypedData,params:e},(e=>{t(e)}))}))}}}}},{package:"$root$",file:"app/scripts/lib/offscreen-bridge/trezor-offscreen-bridge.ts"}],[142,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.IndexedDBPPOMStorage=void 0;const s=async(e,t,r)=>{const n=await crypto.subtle.digest("SHA-256",t);if(Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")!==r)throw new Error(`Checksum mismatch for key ${e}`)};var o=new WeakSet;function a(e){return new Promise(((t,r)=>{const n=indexedDB.open(this.storeName,this.dbVersion);n.onerror=e=>{var t;r(new Error(`Failed to open database ${this.storeName}: ${null===(t=e.target)||void 0===t?void 0:t.error}`))},n.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(this.storeName)||t.createObjectStore(this.storeName,{keyPath:["name","chainId"]})},n.onsuccess=r=>{const n=r.target.result.transaction([this.storeName],e).objectStore(this.storeName);t(n)}}))}r.IndexedDBPPOMStorage=class{constructor(e,t){n(this,o),i(this,"storeName",void 0),i(this,"dbVersion",void 0),this.storeName=e,this.dbVersion=t}async objectStoreAction(e,t,r="readonly"){return new Promise(((n,i)=>{(function(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")})(o,this,a).call(this,r).then((r=>{const s=r[e](t);s.onsuccess=async e=>{n(e)},s.onerror=t=>{var r;i(new Error(`Error in indexDB operation ${e}: ${null===(r=t.target)||void 0===r?void 0:r.error}`))}})).catch((e=>{i(e)}))}))}async read(e,t){var r;const n=null===(r=(await this.objectStoreAction("get",[e.name,e.chainId])).target)||void 0===r||null===(r=r.result)||void 0===r?void 0:r.data;return await s(e,n,t),n}async write(e,t,r){await s(e,t,r),await this.objectStoreAction("put",{...e,data:t},"readwrite")}async delete(e){await this.objectStoreAction("delete",[e.name,e.chainId],"readwrite")}async dir(){var e;return null===(e=(await this.objectStoreAction("getAllKeys")).target)||void 0===e?void 0:e.result.map((([e,t])=>({name:e,chainId:t})))}}}}},{package:"$root$",file:"app/scripts/lib/ppom/indexed-db-backend.ts"}],[143,{"../../../../shared/constants/app":5738,"../../../../shared/constants/security-provider":5759,"../../../../shared/constants/transaction":5767,"../../../../shared/lib/trace":5796,"../../../../shared/modules/selectors/networks":5824,"./ppom-util":144,"@metamask/controller-utils":1471},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createPPOMMiddleware=function(e,t,r,d,f,p){return async(h,m,g)=>{try{const{securityAlertsEnabled:m}=t.state,{chainId:g}=(0,o.getProviderConfig)({metamask:r.state})??{};if(!g)return;if(!m||!l.includes(h.method))return;const y=h.params[0];if("string"==typeof y){const{isSIWEMessage:e}=(0,n.detectSIWE)({data:y});if(e)return}else if(h.method===i.MESSAGE_TYPE.ETH_SEND_TRANSACTION){const{to:e}=y??{},t=f.listAccounts();if(t.some((({address:t})=>(null==t?void 0:t.toLowerCase())===(null==e?void 0:e.toLowerCase()))))return}const b=(0,u.generateSecurityAlertId)();(0,a.trace)({name:a.TraceName.PPOMValidation,parentContext:h.traceContext},(()=>(0,u.validateRequestWithPPOM)({ppomController:e,request:h,securityAlertId:b,chainId:g,updateSecurityAlertResponse:p})));const w={...c.LOADING_SECURITY_ALERT_RESPONSE,securityAlertId:b};s.SIGNING_METHODS.includes(h.method)&&d.addSignatureSecurityAlertResponse(w),h.securityAlertResponse=w}catch(e){h.securityAlertResponse=(0,u.handlePPOMError)(e,"Error createPPOMMiddleware: ")}finally{g()}}};var n=e("@metamask/controller-utils"),i=e("../../../../shared/constants/app"),s=e("../../../../shared/constants/transaction"),o=e("../../../../shared/modules/selectors/networks"),a=e("../../../../shared/lib/trace"),c=e("../../../../shared/constants/security-provider"),u=e("./ppom-util");const l=Object.freeze(["eth_sendRawTransaction","eth_sendTransaction",...s.SIGNING_METHODS])}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom-middleware.ts"}],[144,{"../../../../shared/constants/app":5738,"../../../../shared/constants/security-provider":5759,"../../../../shared/constants/transaction":5767,"../../../../shared/modules/transaction.utils":5829,"../../../../shared/modules/typed-signature":5830,"./security-alerts-api":146,"@metamask/transaction-controller":2909,"@metamask/utils":2967,lodash:4871,uuid:5682},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.generateSecurityAlertId=function(){return(0,s.v4)()},r.handlePPOMError=g,r.updateSecurityAlertResponse=async function({appStateController:e,messenger:t,method:r,securityAlertId:n,securityAlertResponse:i,signatureController:s,transactionController:o}){if(c.SIGNING_METHODS.includes(r)){const r=await async function(e,t,r){const n=e=>Object.values(e.signatureRequests).find((e=>{var r;return(null===(r=e.securityAlertResponse)||void 0===r?void 0:r.securityAlertId)===t}));return new Promise((i=>{const s=n(e.state);if(s)return void i(s);const o=e=>{const t=n(e);t&&(p("Found signature request",t),r.unsubscribe("SignatureController:stateChange",o),i(t))};p("Waiting for signature request",t),r.subscribe("SignatureController:stateChange",o)}))}(s,n,t);return e.addSignatureSecurityAlertResponse({...i,securityAlertId:n}),r}const a=await async function(e,t,r){const n=e=>{var r;return(null===(r=e.securityAlertResponse)||void 0===r?void 0:r.securityAlertId)===t};return new Promise((i=>{const s=e.state.transactions.find(n);if(s)return void i(s);const o=e=>{n(e)&&(p("Found transaction metadata",e),r.unsubscribe("TransactionController:unapprovedTransactionAdded",o),i(e))};p("Waiting for transaction metadata",t),r.subscribe("TransactionController:unapprovedTransactionAdded",o)}))}(o,n,t);return o.updateSecurityAlertResponse(a.id,{...i,securityAlertId:n}),a},r.validateRequestWithPPOM=async function({ppomController:e,request:t,securityAlertId:r,chainId:i,updateSecurityAlertResponse:s}){try{const c=function(e,t){let r=(0,o.cloneDeep)(e);r=function(e){if(e.method!==d.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3&&e.method!==d.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4)return e;if(!Array.isArray(e.params)||!e.params[1])return e;const t=(0,l.parseTypedDataMessage)(e.params[1].toString()),r=(0,u.sanitizeMessageRecursively)(t.message,t.types,t.primaryType);return{...e,params:[e.params[0],JSON.stringify({...t,message:r})]}}(r),r=function(e,t){if(e.method!==d.MESSAGE_TYPE.ETH_SEND_TRANSACTION)return e;if(!Array.isArray(e.params)||!e.params[0])return e;const r=e.params[0];r.gas=t.txParams.gas,r.gasPrice=t.txParams.maxFeePerGas??t.txParams.gasPrice,delete r.gasLimit,delete r.maxFeePerGas,delete r.maxPriorityFeePerGas,delete r.type;const i=(0,n.normalizeTransactionParams)(r);return p("Normalized transaction params",i),{...e,params:[i]}}(r,t);const{delegationMock:i,id:s,jsonrpc:a,method:c,origin:f,params:h}=r;return{delegationMock:i,id:s,jsonrpc:a,method:c,origin:f,params:h}}(t,await s(t.method,r,a.LOADING_SECURITY_ALERT_RESPONSE));p("Normalized request",c);const h=(0,f.isSecurityAlertsAPIEnabled)()?await async function(e,t,r){try{return{...await(0,f.validateWithSecurityAlertsAPI)(t,r),source:a.SecurityAlertSource.API}}catch(n){return g(n,"Error validating request with security alerts API"),await y(e,r,t)}}(e,i,c):await y(e,c,i);await s(t.method,r,h)}catch(e){p("Error",e),await s(t.method,r,g(e,"Error validating JSON RPC using PPOM: "))}};var n=e("@metamask/transaction-controller"),i=e("@metamask/utils"),s=e("uuid"),o=e("lodash"),a=e("../../../../shared/constants/security-provider"),c=e("../../../../shared/constants/transaction"),u=e("../../../../shared/modules/typed-signature"),l=e("../../../../shared/modules/transaction.utils"),d=e("../../../../shared/constants/app"),f=e("./security-alerts-api");const p=(0,i.createProjectLogger)("ppom-util"),{sentry:h}=global,m={result_type:a.BlockaidResultType.Errored,reason:a.BlockaidReason.errored};function g(e,t,r=a.SecurityAlertSource.API){const n=function(e){if("object"==typeof e||"string"==typeof e)return e;return JSON.stringify(e)}(e),i=function(e){if(e instanceof Error)return`${e.name}: ${e.message}`;return JSON.stringify(e)}(e);return r===a.SecurityAlertSource.Local&&(null==h||h.captureException(e)),console.error(t,n),{...m,description:i,source:r}}async function y(e,t,r){try{return{...await e.usePPOM((e=>e.validateJsonRpc(t)),r),source:a.SecurityAlertSource.Local}}catch(e){return g(e,"Error validating request with PPOM controller",a.SecurityAlertSource.Local)}}}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom-util.ts"}],[145,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.PPOM=void 0,r.initSync=function(e){if(n!==undefined)return n;const t=S();e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e));const r=new WebAssembly.Instance(e,t);return P(r,e)},r.main=function(){n.main()};const i="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&i.decode();let s=null;function o(){return null!==s&&0!==s.byteLength||(s=new Uint8Array(n.memory.buffer)),s}function a(e,t){return e>>>=0,i.decode(o().subarray(e,e+t))}const c=new Array(128).fill(undefined);c.push(undefined,null,!0,!1);let u=c.length;function l(e){u===c.length&&c.push(c.length+1);const t=u;return u=c[t],c[t]=e,t}function d(e){return c[e]}function f(e){const t=d(e);return function(e){e<132||(c[e]=u,u=e)}(e),t}let p=0;const h="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},m="function"==typeof h.encodeInto?function(e,t){return h.encodeInto(e,t)}:function(e,t){const r=h.encode(e);return t.set(r),{read:e.length,written:r.length}};function g(e,t,r){if(r===undefined){const r=h.encode(e),n=t(r.length,1)>>>0;return o().subarray(n,n+r.length).set(r),p=r.length,n}let n=e.length,i=t(n,1)>>>0;const s=o();let a=0;for(;a<n;a++){const t=e.charCodeAt(a);if(t>127)break;s[i+a]=t}if(a!==n){0!==a&&(e=e.slice(a)),i=r(i,n,n=a+3*e.length,1)>>>0;const t=o().subarray(i+a,i+n);a+=m(e,t).written}return p=a,i}let y=null;function b(){return null!==y&&0!==y.byteLength||(y=new Int32Array(n.memory.buffer)),y}function w(e){const t=typeof e;if("number"==t||"boolean"==t||null==e)return`${e}`;if("string"==t)return`"${e}"`;if("symbol"==t){const t=e.description;return null==t?"Symbol":`Symbol(${t})`}if("function"==t){const t=e.name;return"string"==typeof t&&t.length>0?`Function(${t})`:"Function"}if(Array.isArray(e)){const t=e.length;let r="[";t>0&&(r+=w(e[0]));for(let n=1;n<t;n++)r+=", "+w(e[n]);return r+="]",r}const r=/\[object ([^\]]+)\]/.exec(toString.call(e));let n;if(!(r.length>1))return toString.call(e);if(n=r[1],"Object"==n)try{return"Object("+JSON.stringify(e)+")"}catch(e){return"Object"}return e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:n}function E(e,t,r){n.wasm_bindgen__convert__closures__invoke1_mut(e,t,l(r))}function T(e,t){n._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__destroy(e,t)}let k=null;function v(e,t){const r=t(4*e.length,4)>>>0,i=(null!==k&&0!==k.byteLength||(k=new Uint32Array(n.memory.buffer)),k);for(let t=0;t<e.length;t++)i[r/4+t]=l(e[t]);return p=e.length,r}function _(e,t){try{return e.apply(this,t)}catch(e){n.__wbindgen_exn_store(l(e))}}class A{static __wrap(e){e>>>=0;const t=Object.create(A.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();n.__wbg_ppom_free(e)}static new(e,t){const r=v(t,n.__wbindgen_malloc),i=p;return f(n.ppom_new(l(e),r,i))}validateJsonRpc(e){return f(n.ppom_validateJsonRpc(this.__wbg_ptr,l(e)))}static version(){return f(n.ppom_version())}}function S(){const e={wbg:{}};return e.wbg.__wbg_buffer_085ec1f694018c4f=function(e){return l(d(e).buffer)},e.wbg.__wbg_call_01734de55d61e11d=function(){return _((function(e,t,r){return l(d(e).call(d(t),d(r)))}),arguments)},e.wbg.__wbg_call_4c92f6aec1e1d6e6=function(){return _((function(e,t,r,n){return l(d(e).call(d(t),d(r),d(n)))}),arguments)},e.wbg.__wbg_from_d7c216d4616bb368=function(e){return l(Array.from(d(e)))},e.wbg.__wbg_get_44be0491f933a435=function(e,t){return l(d(e)[t>>>0])},e.wbg.__wbg_length_72e2208bbc0efc61=function(e){return d(e).length},e.wbg.__wbg_length_d813e535247d427e=function(e){return d(e).length},e.wbg.__wbg_length_fff51ee6522a1a18=function(e){return d(e).length},e.wbg.__wbg_new_43f1b47c28813cbd=function(e,t){try{var r={a:e,b:t};const i=new Promise(((e,t)=>{const i=r.a;r.a=0;try{return function(e,t,r,i){n.wasm_bindgen__convert__closures__invoke2_mut(e,t,l(r),l(i))}(i,r.b,e,t)}finally{r.a=i}}));return l(i)}finally{r.a=r.b=0}},e.wbg.__wbg_new_8125e318e6245eed=function(e){return l(new Uint8Array(d(e)))},e.wbg.__wbg_parse_670c19d4e984792e=function(){return _((function(e,t){return l(JSON.parse(a(e,t)))}),arguments)},e.wbg.__wbg_ppom_new=function(e){return l(A.__wrap(e))},e.wbg.__wbg_resolve_53698b95aaf7fcf8=function(e){return l(Promise.resolve(d(e)))},e.wbg.__wbg_set_5cf90238115182c3=function(e,t,r){d(e).set(d(t),r>>>0)},e.wbg.__wbg_stringify_e25465938f3f611f=function(){return _((function(e){return l(JSON.stringify(d(e)))}),arguments)},e.wbg.__wbg_then_b2267541e2a73865=function(e,t,r){return l(d(e).then(d(t),d(r)))},e.wbg.__wbg_then_f7e06ee3c11698eb=function(e,t){return l(d(e).then(d(t)))},e.wbg.__wbindgen_cb_drop=function(e){const t=f(e).original;if(1==t.cnt--)return t.a=0,!0;return!1},e.wbg.__wbindgen_closure_wrapper_wasm_bindgen__closure__Closure_T___wrap__breaks_if_inlined=function(e,t,r){const n=function(e,t,r,n){const i={a:e,b:t,cnt:1},s=(...e)=>{i.cnt++;const t=i.a;i.a=0;try{return n(t,i.b,...e)}finally{0==--i.cnt?r(t,i.b):i.a=t}};return s.original=i,s}(e,t,T,E);return l(n)},e.wbg.__wbindgen_debug_string=function(e,t){const r=g(w(d(t)),n.__wbindgen_malloc,n.__wbindgen_realloc),i=p;b()[e/4+1]=i,b()[e/4+0]=r},e.wbg.__wbindgen_error_new=function(e,t){return l(new Error(a(e,t)))},e.wbg.__wbindgen_is_undefined=function(e){return d(e)===undefined},e.wbg.__wbindgen_memory=function(){return l(n.memory)},e.wbg.__wbindgen_object_drop_ref=function(e){f(e)},e.wbg.__wbindgen_string_get=function(e,t){const r=d(t),i="string"==typeof r?r:undefined;var s,o=(s=i)===undefined||null===s?0:g(i,n.__wbindgen_malloc,n.__wbindgen_realloc),a=p;b()[e/4+1]=a,b()[e/4+0]=o},e.wbg.__wbindgen_string_new=function(e,t){return l(a(e,t))},e.wbg.__wbindgen_throw=function(e,t){throw new Error(a(e,t))},e}function P(e,t){return n=e.exports,I.__wbindgen_wasm_module=t,y=null,k=null,s=null,n.__wbindgen_start(),n}async function I(e){if(n!==undefined)return n;const t=S();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:i}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const r=await e.arrayBuffer();return await WebAssembly.instantiate(r,t)}{const r=await WebAssembly.instantiate(e,t);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}}(await e,t);return P(r,i)}r.PPOM=A;r.default=I}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom.js"}],[146,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isSecurityAlertsAPIEnabled=function(){const e="true";return"true"===e.toString()},r.validateWithSecurityAlertsAPI=async function(e,t){return async function(e,t){const r=function(e){const t="https://security-alerts.api.cx.metamask.io";if(!t)throw new Error("Security alerts API URL is not set");return`${t}/${e}`}(e),n=await fetch(r,t);if(!n.ok)throw new Error(`Security alerts API request failed with status: ${n.status}`);return await n.json()}(`${n}/${e}`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})};const n="validate"}}},{package:"$root$",file:"app/scripts/lib/ppom/security-alerts-api.ts"}],[147,{"./handlers":153,"./handlers/wallet-getPermissions":160,"./handlers/wallet-requestPermissions":161,"./handlers/wallet-revokePermissions":162,"@metamask/rpc-errors":2526,"@metamask/snaps-rpc-methods":2696,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createMultichainMethodMiddleware=r.createEthAccountsMethodMiddleware=r.createEip1193MethodMiddleware=void 0,r.makeMethodMiddlewareMaker=l;var n=e("@metamask/rpc-errors"),i=e("@metamask/snaps-rpc-methods"),s=e("@metamask/utils"),o=e("./handlers"),a=e("./handlers/wallet-getPermissions"),c=e("./handlers/wallet-requestPermissions"),u=e("./handlers/wallet-revokePermissions");r.createEip1193MethodMiddleware=l([...o.handlers,...o.eip1193OnlyHandlers,a.getPermissionsHandler,c.requestPermissionsHandler,u.revokePermissionsHandler]),r.createEthAccountsMethodMiddleware=l([o.ethAccountsHandler]),r.createMultichainMethodMiddleware=l(o.handlers);function l(e){const t=e.reduce(((e,t)=>{for(const r of t.methodNames)e[r]=t;return e}),{}),r=new Set(e.flatMap((({hookNames:e})=>Object.getOwnPropertyNames(e))));return e=>{!function(e,t){const r=[];if(t.forEach((t=>{(0,s.hasProperty)(e,t)||r.push(t)})),r.length>0)throw new Error(`Missing expected hooks:\n\n${r.join("\n")}\n`);const n=Object.getOwnPropertyNames(e).filter((e=>!t.has(e)));if(n.length>0)throw new Error(`Received unexpected hooks:\n\n${n.join("\n")}\n`)}(e,r);return async(r,s,o,a)=>{const c=t[r.method];if(c){const{implementation:t,hookNames:u}=c;try{return await t(r,s,o,a,(0,i.selectHooks)(e,u))}catch(e){return a(e instanceof Error?e:n.rpcErrors.internal({data:e}))}}return o()}}}}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/createMethodMiddleware.js"}],[148,{"../../../../shared/constants/network":5752,"@metamask/rpc-errors":2526},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createUnsupportedMethodMiddleware=function(e=i.UNSUPPORTED_RPC_METHODS){return async function(t,r,i,s){return e.has(t.method)?s(n.rpcErrors.methodNotSupported()):i()}};var n=e("@metamask/rpc-errors"),i=e("../../../../shared/constants/network")}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/createUnsupportedMethodMiddleware.ts"}],[149,{"../../../../../shared/constants/app":5738,"./ethereum-chain-utils":151,"@metamask/controller-utils":1471,"@metamask/network-controller":2193,"@metamask/rpc-errors":2526,lodash:4871,"uri-js":5656},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(e("uri-js")),i=e("@metamask/controller-utils"),s=e("@metamask/network-controller"),o=e("@metamask/rpc-errors"),a=e("lodash"),c=e("../../../../../shared/constants/app"),u=e("./ethereum-chain-utils");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}const d={methodNames:[c.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN],implementation:async function(e,t,r,c,{addNetwork:l,updateNetwork:d,getNetworkConfigurationByChainId:f,setActiveNetwork:p,requestUserApproval:h,getCurrentChainIdForDomain:m,getCaveat:g,requestPermittedChainsPermissionIncrementalForOrigin:y,rejectApprovalRequestsForOrigin:b}){let w;try{w=(0,u.validateAddEthereumChainParams)(e.params[0])}catch(e){return c(e)}const{chainId:E,chainName:T,firstValidBlockExplorerUrl:k,firstValidRPCUrl:v,ticker:_}=w,{origin:A}=e,S=m(A),P=f(E);if(P&&P.chainId===E&&P.nativeCurrency!==_)return c(o.rpcErrors.invalidParams({message:`nativeCurrency.symbol does not match currency symbol for a network the user already has added with the same chainId. Received:\n${_}`}));let I=P,C=null==P?void 0:P.rpcEndpoints.findIndex((({url:e})=>n.equal(e,v))),M=k?null==P?void 0:P.blockExplorerUrls.findIndex((e=>n.equal(e,k))):undefined;const j=!P||C!==P.defaultRpcEndpointIndex||k&&M!==P.defaultBlockExplorerUrlIndex;if(j)try{if(await h({origin:A,type:i.ApprovalType.AddEthereumChain,requestData:{chainId:E,rpcPrefs:{blockExplorerUrl:k},chainName:T,rpcUrl:v,ticker:_}}),P){const e=(0,a.cloneDeep)(P);-1===C&&(e.rpcEndpoints=[...e.rpcEndpoints,{url:v,type:s.RpcEndpointType.Custom,name:T}],C=e.rpcEndpoints.length-1),e.defaultRpcEndpointIndex=C,k&&(-1===M&&(e.blockExplorerUrls=[...e.blockExplorerUrls,k],M=e.blockExplorerUrls.length-1),e.defaultBlockExplorerUrlIndex=M),I=await d(e.chainId,e,S===E?{replacementSelectedRpcEndpointIndex:e.defaultRpcEndpointIndex}:undefined)}else I=await l({blockExplorerUrls:k?[k]:[],defaultBlockExplorerUrlIndex:k?0:undefined,chainId:E,defaultRpcEndpointIndex:0,name:T,nativeCurrency:_,rpcEndpoints:[{url:v,name:T,type:s.RpcEndpointType.Custom}]})}catch(e){return c(e)}const{networkClientId:x}=I.rpcEndpoints[I.defaultRpcEndpointIndex];return(0,u.switchChain)(t,c,E,x,{isAddFlow:!0,autoApprove:j,setActiveNetwork:p,getCaveat:g,requestPermittedChainsPermissionIncrementalForOrigin:y,rejectApprovalRequestsForOrigin:b})},hookNames:{addNetwork:!0,updateNetwork:!0,getNetworkConfigurationByChainId:!0,setActiveNetwork:!0,requestUserApproval:!0,getCurrentChainIdForDomain:!0,getCaveat:!0,requestPermittedChainsPermissionIncrementalForOrigin:!0,rejectApprovalRequestsForOrigin:!0}};r.default=d}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/add-ethereum-chain.js"}],[1499,{"@ethersproject/providers":564,"@metamask/base-controller":1378,"@metamask/controller-utils":1503,"@metamask/utils":2967,"punycode/punycode.js":5093},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,o,a,c=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},u=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.EnsController=r.DEFAULT_ENS_NETWORK_MAP=void 0;const l=e("@ethersproject/providers"),d=e("@metamask/base-controller"),f=e("@metamask/controller-utils"),p=e("@metamask/utils"),h=e("punycode/punycode.js"),m=(0,p.createProjectLogger)("ens-controller");r.DEFAULT_ENS_NETWORK_MAP={1:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",3:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",4:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",5:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",17e3:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",11155111:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"};const g={ensEntries:{persist:!0,anonymous:!1},ensResolutionsByAddress:{persist:!0,anonymous:!1}},y={ensEntries:{},ensResolutionsByAddress:{}};class b extends d.BaseController{constructor({registriesByChainId:e=r.DEFAULT_ENS_NETWORK_MAP,messenger:t,state:a={},onNetworkDidChange:u}){super({name:"EnsController",metadata:g,messenger:t,state:{...y,ensEntries:Object.fromEntries(Object.entries(e).map((([e,t])=>[(0,f.toHex)(e),{".":{address:t,chainId:(0,f.toHex)(e),ensName:"."}}]))),...a}}),n.add(this),i.set(this,null),c(this,n,"m",s).call(this,e),u&&u((({selectedNetworkClientId:t})=>{this.resetState(),c(this,n,"m",o).call(this,t,e)}))}resetState(){this.update((e=>{e.ensResolutionsByAddress={}}))}clear(){this.update((e=>{e.ensEntries={}}))}delete(e,t){const r=(0,f.normalizeEnsName)(t);return!!((0,f.isSafeDynamicKey)(e)&&r&&this.state.ensEntries[e]&&this.state.ensEntries[e][r])&&(this.update((t=>{delete t.ensEntries[e][r],0===Object.keys(t.ensEntries[e]).length&&delete t.ensEntries[e]})),!0)}get(e,t){const r=(0,f.normalizeEnsName)(t);return r&&this.state.ensEntries[e]&&this.state.ensEntries[e][r]||null}set(e,t,r){if(!Number.isInteger(Number.parseInt(e,10))||!t||"string"!=typeof t||r&&!(0,f.isValidHexAddress)(r))throw new Error(`Invalid ENS entry: { chainId:${e}, ensName:${t}, address:${r}}`);const n=(0,f.normalizeEnsName)(t);if(!n)throw new Error(`Invalid ENS name: ${t}`);const i=r?(0,f.toChecksumHexAddress)(r):null,s=this.state.ensEntries[e];return(!s?.[n]||s[n].address!==i)&&(this.update((t=>{t.ensEntries={...this.state.ensEntries,[e]:{...this.state.ensEntries[e],[n]:{address:i,chainId:e,ensName:n}}}})),!0)}async reverseResolveAddress(e){if(!c(this,i,"f"))return undefined;const t=(0,f.toChecksumHexAddress)(e);if(this.state.ensResolutionsByAddress[t])return this.state.ensResolutionsByAddress[t];let r,n;try{r=await c(this,i,"f").lookupAddress(t)}catch(e){return m(e),undefined}if(!r)return undefined;try{n=await c(this,i,"f").resolveName(r)}catch(e){return m(e),undefined}return n?"0x0000000000000000000000000000000000000000"===n||"0x"===n||(0,f.toChecksumHexAddress)(n)!==t?undefined:(this.update((e=>{e.ensResolutionsByAddress[t]=(0,h.toASCII)(r)})),r):undefined}}r.EnsController=b,i=new WeakMap,n=new WeakSet,s=function(e){const{selectedNetworkClientId:t}=this.messagingSystem.call("NetworkController:getState");c(this,n,"m",o).call(this,t,e)},o=function(e,t){const{configuration:{chainId:r},provider:s}=this.messagingSystem.call("NetworkController:getNetworkClientById",e);t&&t[parseInt(r,16)]&&c(this,n,"m",a).call(this,r)?u(this,i,new l.Web3Provider(s,{chainId:(0,f.convertHexToDecimal)(r),name:f.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP[r],ensAddress:t[parseInt(r,16)]}),"f"):u(this,i,null,"f")},a=function(e){return Boolean(this.state.ensEntries[e])},r.default=b}}},{package:"@metamask/ens-controller",file:"node_modules/@metamask/ens-controller/dist/EnsController.cjs"}],[15,{"../../lib/ppom/indexed-db-backend":142,"../../lib/ppom/ppom":145,"@metamask/ppom-validator":2369},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMControllerInit=void 0;var n=e("@metamask/ppom-validator"),i=e("../../lib/ppom/indexed-db-backend"),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var a=i?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(e("../../lib/ppom/ppom"));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}r.PPOMControllerInit=e=>{const{controllerMessenger:t,initMessenger:r,getController:o,getGlobalChainId:a,getProvider:c,persistedState:u}=e;return{controller:new n.PPOMController({messenger:t,storageBackend:new i.IndexedDBPPOMStorage("PPOMDB",1),provider:c(),ppomProvider:{PPOM:s.PPOM,ppomInit:()=>s.default("./ppom_bg.wasm")},state:u.PPOMController,chainId:a(),securityAlertsEnabled:o("PreferencesController").state.securityAlertsEnabled,onPreferencesChange:r.subscribe.bind(r,"PreferencesController:stateChange"),cdnBaseUrl:"static.cx.metamask.io/api/v1/confirmations/ppom",blockaidPublicKey:"066ad3e8af5583385e312c156d238055215d5f25247c1e91055afa756cb98a88"})}}}}},{package:"$root$",file:"app/scripts/controller-init/confirmations/ppom-controller-init.ts"}],[150,{"../../../../../shared/constants/app":5738},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;const n={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.ETH_ACCOUNTS],implementation:async function(e,t,r,n,{getAccounts:i}){return t.result=i(),n()},hookNames:{getAccounts:!0}};r.default=n}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/eth-accounts.ts"}],[1500,{"./EnsController.cjs":1499},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./EnsController.cjs"),r)}}},{package:"@metamask/ens-controller",file:"node_modules/@metamask/ens-controller/dist/index.cjs"}],[1501,{"./types.cjs":1506},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=r.ApprovalType=r.ORIGIN_METAMASK=r.NFT_API_TIMEOUT=r.NFT_API_VERSION=r.NFT_API_BASE_URL=r.OPENSEA_PROXY_URL=r.BUILT_IN_NETWORKS=r.BUILT_IN_CUSTOM_NETWORKS_RPC=r.TESTNET_TICKER_SYMBOLS=r.ASSET_TYPES=r.GWEI=r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=r.ERC1155_METADATA_URI_INTERFACE_ID=r.ERC1155_INTERFACE_ID=r.ERC721_ENUMERABLE_INTERFACE_ID=r.ERC721_METADATA_INTERFACE_ID=r.ERC721_INTERFACE_ID=r.ERC20=r.ERC1155=r.ERC721=r.MAX_SAFE_CHAIN_ID=r.GANACHE_CHAIN_ID=r.IPFS_DEFAULT_GATEWAY_URL=r.FALL_BACK_VS_CURRENCY=r.RPC=void 0;const n=e("./types.cjs");var i;r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH",LINEA_SEPOLIA:"LineaETH",MEGAETH_TESTNET:"MegaETH"},r.BUILT_IN_CUSTOM_NETWORKS_RPC={MEGAETH_TESTNET:"https://carrot.megaeth.com/rpc","megaeth-testnet":"https://carrot.megaeth.com/rpc","monad-testnet":"https://testnet-rpc.monad.xyz"},r.BUILT_IN_NETWORKS={[n.NetworkType.goerli]:{chainId:n.ChainId.goerli,ticker:n.NetworksTicker.goerli,rpcPrefs:{blockExplorerUrl:n.BlockExplorerUrl.goerli}},[n.NetworkType.sepolia]:{chainId:n.ChainId.sepolia,ticker:n.NetworksTicker.sepolia,rpcPrefs:{blockExplorerUrl:n.BlockExplorerUrl.sepolia}},[n.NetworkType.mainnet]:{chainId:n.ChainId.mainnet,ticker:n.NetworksTicker.mainnet,rpcPrefs:{blockExplorerUrl:n.BlockExplorerUrl.mainnet}},[n.NetworkType["linea-goerli"]]:{chainId:n.ChainId["linea-goerli"],ticker:n.NetworksTicker["linea-goerli"],rpcPrefs:{blockExplorerUrl:n.BlockExplorerUrl["linea-goerli"]}},[n.NetworkType["linea-sepolia"]]:{chainId:n.ChainId["linea-sepolia"],ticker:n.NetworksTicker["linea-sepolia"],rpcPrefs:{blockExplorerUrl:n.BlockExplorerUrl["linea-sepolia"]}},[n.NetworkType["linea-mainnet"]]:{chainId:n.ChainId["linea-mainnet"],ticker:n.NetworksTicker["linea-mainnet"],rpcPrefs:{blockExplorerUrl:n.BlockExplorerUrl["linea-mainnet"]}},[n.NetworkType["megaeth-testnet"]]:{chainId:n.ChainId["megaeth-testnet"],ticker:n.NetworksTicker["megaeth-testnet"],rpcPrefs:{blockExplorerUrl:n.BlockExplorerUrl["megaeth-testnet"]}},[n.NetworkType["monad-testnet"]]:{chainId:n.ChainId["monad-testnet"],ticker:n.NetworksTicker["monad-testnet"],rpcPrefs:{blockExplorerUrl:n.BlockExplorerUrl["monad-testnet"]}},[n.NetworkType.rpc]:{chainId:undefined,blockExplorerUrl:undefined,ticker:undefined,rpcPrefs:undefined}},r.OPENSEA_PROXY_URL="https://proxy.api.cx.metamask.io/opensea/v1/api/v2",r.NFT_API_BASE_URL="https://nft.api.cx.metamask.io",r.NFT_API_VERSION="1",r.NFT_API_TIMEOUT=15e3,r.ORIGIN_METAMASK="metamask",function(e){e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SnapDialogDefault="snap_dialog",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset"}(i||(r.ApprovalType=i={})),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP={[n.ChainId.goerli]:n.BuiltInNetworkName.Goerli,[n.ChainId.sepolia]:n.BuiltInNetworkName.Sepolia,[n.ChainId.mainnet]:n.BuiltInNetworkName.Mainnet,[n.ChainId["linea-goerli"]]:n.BuiltInNetworkName.LineaGoerli,[n.ChainId["linea-sepolia"]]:n.BuiltInNetworkName.LineaSepolia,[n.ChainId["linea-mainnet"]]:n.BuiltInNetworkName.LineaMainnet,[n.ChainId.aurora]:n.BuiltInNetworkName.Aurora}}}},{package:"@metamask/ens-controller>@metamask/controller-utils",file:"node_modules/@metamask/ens-controller/node_modules/@metamask/controller-utils/dist/constants.cjs"}],[1502,{cockatiel:4140},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createServicePolicy=r.DEFAULT_DEGRADED_THRESHOLD=r.DEFAULT_CIRCUIT_BREAK_DURATION=r.DEFAULT_MAX_CONSECUTIVE_FAILURES=r.DEFAULT_MAX_RETRIES=r.handleWhen=r.handleAll=r.ExponentialBackoff=r.ConstantBackoff=r.CircuitState=r.BrokenCircuitError=void 0;const n=e("cockatiel");Object.defineProperty(r,"BrokenCircuitError",{enumerable:!0,get:function(){return n.BrokenCircuitError}}),Object.defineProperty(r,"CircuitState",{enumerable:!0,get:function(){return n.CircuitState}}),Object.defineProperty(r,"ExponentialBackoff",{enumerable:!0,get:function(){return n.ExponentialBackoff}}),Object.defineProperty(r,"ConstantBackoff",{enumerable:!0,get:function(){return n.ConstantBackoff}}),Object.defineProperty(r,"handleAll",{enumerable:!0,get:function(){return n.handleAll}}),Object.defineProperty(r,"handleWhen",{enumerable:!0,get:function(){return n.handleWhen}}),r.DEFAULT_MAX_RETRIES=3,r.DEFAULT_MAX_CONSECUTIVE_FAILURES=3*(1+r.DEFAULT_MAX_RETRIES),r.DEFAULT_CIRCUIT_BREAK_DURATION=18e5,r.DEFAULT_DEGRADED_THRESHOLD=5e3,r.createServicePolicy=function(e={}){const{maxRetries:t=r.DEFAULT_MAX_RETRIES,retryFilterPolicy:i=n.handleAll,maxConsecutiveFailures:s=r.DEFAULT_MAX_CONSECUTIVE_FAILURES,circuitBreakDuration:o=r.DEFAULT_CIRCUIT_BREAK_DURATION,degradedThreshold:a=r.DEFAULT_DEGRADED_THRESHOLD,backoff:c=new n.ExponentialBackoff}=e,u=(0,n.retry)(i,{maxAttempts:t,backoff:c}),l=u.onRetry.bind(u),d=(0,n.circuitBreaker)(n.handleAll,{halfOpenAfter:o,breaker:new n.ConsecutiveBreaker(s)}),f=d.onBreak.bind(d),p=new n.EventEmitter;u.onGiveUp((()=>{d.state===n.CircuitState.Closed&&p.emit()})),u.onSuccess((({duration:e})=>{d.state===n.CircuitState.Closed&&e>a&&p.emit()}));const h=p.addListener;return{...(0,n.wrap)(u,d),circuitBreakerPolicy:d,retryPolicy:u,onBreak:f,onDegraded:h,onRetry:l}}}}},{package:"@metamask/ens-controller>@metamask/controller-utils",file:"node_modules/@metamask/ens-controller/node_modules/@metamask/controller-utils/dist/create-service-policy.cjs"}],[1503,{"./constants.cjs":1501,"./create-service-policy.cjs":1502,"./siwe.cjs":1505,"./types.cjs":1506,"./util.cjs":1507},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.isEqualCaseInsensitive=r.weiHexToGweiDec=r.toHex=r.toChecksumHexAddress=r.timeoutFetch=r.successfulFetch=r.safelyExecuteWithTimeout=r.safelyExecute=r.query=r.normalizeEnsName=r.isValidHexAddress=r.isValidJson=r.isSmartContractCode=r.isSafeDynamicKey=r.isSafeChainId=r.isPlainObject=r.isNonEmptyArray=r.hexToText=r.hexToBN=r.handleFetch=r.gweiDecToWEIBN=r.getBuyURL=r.fromHex=r.fractionBN=r.fetchWithErrorHandling=r.convertHexToDecimal=r.BNToHex=r.handleWhen=r.handleAll=r.createServicePolicy=r.ExponentialBackoff=r.DEFAULT_MAX_RETRIES=r.DEFAULT_MAX_CONSECUTIVE_FAILURES=r.DEFAULT_DEGRADED_THRESHOLD=r.DEFAULT_CIRCUIT_BREAK_DURATION=r.ConstantBackoff=r.CircuitState=r.BrokenCircuitError=void 0;var s=e("./create-service-policy.cjs");Object.defineProperty(r,"BrokenCircuitError",{enumerable:!0,get:function(){return s.BrokenCircuitError}}),Object.defineProperty(r,"CircuitState",{enumerable:!0,get:function(){return s.CircuitState}}),Object.defineProperty(r,"ConstantBackoff",{enumerable:!0,get:function(){return s.ConstantBackoff}}),Object.defineProperty(r,"DEFAULT_CIRCUIT_BREAK_DURATION",{enumerable:!0,get:function(){return s.DEFAULT_CIRCUIT_BREAK_DURATION}}),Object.defineProperty(r,"DEFAULT_DEGRADED_THRESHOLD",{enumerable:!0,get:function(){return s.DEFAULT_DEGRADED_THRESHOLD}}),Object.defineProperty(r,"DEFAULT_MAX_CONSECUTIVE_FAILURES",{enumerable:!0,get:function(){return s.DEFAULT_MAX_CONSECUTIVE_FAILURES}}),Object.defineProperty(r,"DEFAULT_MAX_RETRIES",{enumerable:!0,get:function(){return s.DEFAULT_MAX_RETRIES}}),Object.defineProperty(r,"ExponentialBackoff",{enumerable:!0,get:function(){return s.ExponentialBackoff}}),Object.defineProperty(r,"createServicePolicy",{enumerable:!0,get:function(){return s.createServicePolicy}}),Object.defineProperty(r,"handleAll",{enumerable:!0,get:function(){return s.handleAll}}),Object.defineProperty(r,"handleWhen",{enumerable:!0,get:function(){return s.handleWhen}}),i(e("./constants.cjs"),r);var o=e("./util.cjs");Object.defineProperty(r,"BNToHex",{enumerable:!0,get:function(){return o.BNToHex}}),Object.defineProperty(r,"convertHexToDecimal",{enumerable:!0,get:function(){return o.convertHexToDecimal}}),Object.defineProperty(r,"fetchWithErrorHandling",{enumerable:!0,get:function(){return o.fetchWithErrorHandling}}),Object.defineProperty(r,"fractionBN",{enumerable:!0,get:function(){return o.fractionBN}}),Object.defineProperty(r,"fromHex",{enumerable:!0,get:function(){return o.fromHex}}),Object.defineProperty(r,"getBuyURL",{enumerable:!0,get:function(){return o.getBuyURL}}),Object.defineProperty(r,"gweiDecToWEIBN",{enumerable:!0,get:function(){return o.gweiDecToWEIBN}}),Object.defineProperty(r,"handleFetch",{enumerable:!0,get:function(){return o.handleFetch}}),Object.defineProperty(r,"hexToBN",{enumerable:!0,get:function(){return o.hexToBN}}),Object.defineProperty(r,"hexToText",{enumerable:!0,get:function(){return o.hexToText}}),Object.defineProperty(r,"isNonEmptyArray",{enumerable:!0,get:function(){return o.isNonEmptyArray}}),Object.defineProperty(r,"isPlainObject",{enumerable:!0,get:function(){return o.isPlainObject}}),Object.defineProperty(r,"isSafeChainId",{enumerable:!0,get:function(){return o.isSafeChainId}}),Object.defineProperty(r,"isSafeDynamicKey",{enumerable:!0,get:function(){return o.isSafeDynamicKey}}),Object.defineProperty(r,"isSmartContractCode",{enumerable:!0,get:function(){return o.isSmartContractCode}}),Object.defineProperty(r,"isValidJson",{enumerable:!0,get:function(){return o.isValidJson}}),Object.defineProperty(r,"isValidHexAddress",{enumerable:!0,get:function(){return o.isValidHexAddress}}),Object.defineProperty(r,"normalizeEnsName",{enumerable:!0,get:function(){return o.normalizeEnsName}}),Object.defineProperty(r,"query",{enumerable:!0,get:function(){return o.query}}),Object.defineProperty(r,"safelyExecute",{enumerable:!0,get:function(){return o.safelyExecute}}),Object.defineProperty(r,"safelyExecuteWithTimeout",{enumerable:!0,get:function(){return o.safelyExecuteWithTimeout}}),Object.defineProperty(r,"successfulFetch",{enumerable:!0,get:function(){return o.successfulFetch}}),Object.defineProperty(r,"timeoutFetch",{enumerable:!0,get:function(){return o.timeoutFetch}}),Object.defineProperty(r,"toChecksumHexAddress",{enumerable:!0,get:function(){return o.toChecksumHexAddress}}),Object.defineProperty(r,"toHex",{enumerable:!0,get:function(){return o.toHex}}),Object.defineProperty(r,"weiHexToGweiDec",{enumerable:!0,get:function(){return o.weiHexToGweiDec}}),Object.defineProperty(r,"isEqualCaseInsensitive",{enumerable:!0,get:function(){return o.isEqualCaseInsensitive}}),i(e("./types.cjs"),r),i(e("./siwe.cjs"),r)}}},{package:"@metamask/ens-controller>@metamask/controller-utils",file:"node_modules/@metamask/ens-controller/node_modules/@metamask/controller-utils/dist/index.cjs"}],[1504,{"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("controller-utils")}}},{package:"@metamask/ens-controller>@metamask/controller-utils",file:"node_modules/@metamask/ens-controller/node_modules/@metamask/controller-utils/dist/logger.cjs"}],[1505,{"./logger.cjs":1504,"@metamask/utils":2967,"@spruceid/siwe-parser":3240,buffer:4079},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.detectSIWE=r.isValidSIWEOrigin=r.parseDomainParts=void 0;const n=e("@metamask/utils"),i=e("@spruceid/siwe-parser"),s=e("./logger.cjs"),o=(0,s.createModuleLogger)(s.projectLogger,"detect-siwe");function a(e){try{const i="string"!=typeof(r=e)?r:(0,n.remove0x)(r),s=t.from(i,"hex");return 32===s.length?e:s.toString("utf8")}catch(t){return o(t),e}var r}const c={"http:":"80","https:":"443"};r.parseDomainParts=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.isValidSIWEOrigin=e=>{try{const{origin:t,siwe:n}=e;if(!t||!n?.parsedMessage?.domain)return!1;const i=new URL(t),s=(0,r.parseDomainParts)(n.parsedMessage.domain,i.protocol);return 0===s.hostname.localeCompare(i.hostname,undefined,{sensitivity:"accent"})&&(""!==s.port&&s.port!==i.port?""===i.port&&s.port===c[i.protocol]:""===s.username||s.username===i.username)}catch(e){return o(e),!1}};r.detectSIWE=e=>{try{const{data:t}=e,r=a(t);return{isSIWEMessage:!0,parsedMessage:new i.ParsedMessage(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/ens-controller>@metamask/controller-utils",file:"node_modules/@metamask/ens-controller/node_modules/@metamask/controller-utils/dist/siwe.cjs"}],[1506,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i;Object.defineProperty(r,"__esModule",{value:!0}),r.NetworkNickname=r.BlockExplorerUrl=r.NetworksTicker=r.ChainId=r.BuiltInNetworkName=r.isInfuraNetworkType=r.isNetworkType=r.NetworkType=r.CustomNetworkType=r.InfuraNetworkType=void 0,r.InfuraNetworkType={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-sepolia":"linea-sepolia","linea-mainnet":"linea-mainnet"},r.CustomNetworkType={"megaeth-testnet":"megaeth-testnet","monad-testnet":"monad-testnet"},r.NetworkType={...r.InfuraNetworkType,...r.CustomNetworkType,rpc:"rpc"},r.isNetworkType=function(e){return Object.values(r.NetworkType).includes(e)},r.isInfuraNetworkType=function(e){return Object.keys(r.InfuraNetworkType).includes(e)},function(e){e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaSepolia="linea-sepolia",e.LineaMainnet="linea-mainnet",e.Aurora="aurora",e.MegaETHTestnet="megaeth-testnet",e.MonadTestnet="monad-testnet"}(n||(r.BuiltInNetworkName=n={})),r.ChainId={[n.Mainnet]:"0x1",[n.Goerli]:"0x5",[n.Sepolia]:"0xaa36a7",[n.Aurora]:"0x4e454152",[n.LineaGoerli]:"0xe704",[n.LineaSepolia]:"0xe705",[n.LineaMainnet]:"0xe708",[n.MegaETHTestnet]:"0x18c6",[n.MonadTestnet]:"0x279f"},function(e){e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-sepolia"]="LineaETH",e["linea-mainnet"]="ETH",e["megaeth-testnet"]="MegaETH",e["monad-testnet"]="MON",e.rpc=""}(i||(r.NetworksTicker=i={})),r.BlockExplorerUrl={[n.Mainnet]:"https://etherscan.io",[n.Goerli]:"https://goerli.etherscan.io",[n.Sepolia]:"https://sepolia.etherscan.io",[n.LineaGoerli]:"https://goerli.lineascan.build",[n.LineaSepolia]:"https://sepolia.lineascan.build",[n.LineaMainnet]:"https://lineascan.build",[n.MegaETHTestnet]:"https://megaexplorer.xyz",[n.MonadTestnet]:"https://testnet.monadexplorer.com"},r.NetworkNickname={[n.Mainnet]:"Ethereum Mainnet",[n.Goerli]:"Goerli",[n.Sepolia]:"Sepolia",[n.LineaGoerli]:"Linea Goerli",[n.LineaSepolia]:"Linea Sepolia",[n.LineaMainnet]:"Linea",[n.MegaETHTestnet]:"Mega Testnet",[n.MonadTestnet]:"Monad Testnet"}}}},{package:"@metamask/ens-controller>@metamask/controller-utils",file:"node_modules/@metamask/ens-controller/node_modules/@metamask/controller-utils/dist/types.cjs"}],[1507,{"./constants.cjs":1501,"@ethereumjs/util":476,"@metamask/ethjs-unit":1911,"@metamask/utils":2967,"bn.js":4018,buffer:4079,"eth-ens-namehash":4291,"fast-deep-equal":4444},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isEqualCaseInsensitive=r.isValidJson=r.isNonEmptyArray=r.isPlainObject=r.convertHexToDecimal=r.query=r.normalizeEnsName=r.timeoutFetch=r.fetchWithErrorHandling=r.handleFetch=r.successfulFetch=r.isSmartContractCode=r.isValidHexAddress=r.toChecksumHexAddress=r.safelyExecuteWithTimeout=r.safelyExecute=r.toHex=r.fromHex=r.hexToText=r.hexToBN=r.getBuyURL=r.weiHexToGweiDec=r.gweiDecToWEIBN=r.fractionBN=r.BNToHex=r.isSafeChainId=r.isSafeDynamicKey=r.PROTOTYPE_POLLUTION_BLOCKLIST=void 0;const i=e("@ethereumjs/util"),s=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),a=n(e("bn.js")),c=n(e("eth-ens-namehash")),u=n(e("fast-deep-equal")),l=e("./constants.cjs"),d=new Error("timeout");function f(e){return e?new a.default((0,o.remove0x)(e),16):new a.default(0)}async function p(e,t){const r=await fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${String(e)}'`);return r}async function h(e,t){const r=await p(e,t);return await r.json()}r.PROTOTYPE_POLLUTION_BLOCKLIST=["__proto__","constructor","prototype"],r.isSafeDynamicKey=function(e){return"string"==typeof e&&!r.PROTOTYPE_POLLUTION_BLOCKLIST.some((t=>e===t))},r.isSafeChainId=function(e){if(!(0,o.isHexString)(e))return!1;const t=Number.parseInt(e,(0,o.isStrictHexString)(e)?16:10);return Number.isSafeInteger(t)&&t>0&&t<=l.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return(0,o.add0x)(e.toString(16))},r.fractionBN=function(e,t,r){const n=new a.default(t),i=new a.default(r);return e.mul(n).div(i)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new a.default(0);const t=e.toString().split("."),r=t[0]||"0";let n=t[1]||"";if(!n)return(0,s.toWei)(r,"gwei");if(n.length<=9)return(0,s.toWei)(`${r}.${n}`,"gwei");const i=n.slice(9)[0];n=n.slice(0,9);let o=(0,s.toWei)(`${r}.${n}`,"gwei");return Number(i)>=5&&(o=o.add(new a.default(1))),o},r.weiHexToGweiDec=function(e){const t=new a.default((0,o.remove0x)(e),16);return(0,s.fromWei)(t,"gwei")},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return undefined}},r.hexToBN=f,r.hexToText=function(e){try{const r=(0,o.remove0x)(e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return a.default.isBN(e)?e:new a.default(f(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&(0,o.isStrictHexString)(e)?e:`0x${a.default.isBN(e)||"bigint"==typeof e?e.toString(16):new a.default(e.toString(),10).toString(16)}`},r.safelyExecute=async function(e,t=!1){try{return await e()}catch(e){return t&&console.error(e),undefined}},r.safelyExecuteWithTimeout=async function(e,t=!1,r=500){try{return await Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))])}catch(e){return t&&console.error(e),undefined}},r.toChecksumHexAddress=function(e){if("string"!=typeof e)return e;const t=(0,o.add0x)(e);return(0,o.isHexString)(t)?(0,i.toChecksumAddress)(t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?(0,o.add0x)(e):e;return!!(0,o.isStrictHexString)(r)&&(0,i.isValidAddress)(r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=p,r.handleFetch=h,r.fetchWithErrorHandling=async function({url:e,options:t,timeout:r,errorCodesToCatch:n}){let i;try{i=r?Promise.race([await h(e,t),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))]):await h(e,t)}catch(e){!function(e,t=[]){if(!e)return;if(!(e instanceof Error))throw e;if(!t.some((t=>e.message.includes(`Fetch failed with status '${t}'`)))&&!e.message.includes("Failed to fetch")&&e!==d)throw e;console.error(e)}(e,n)}return i},r.timeoutFetch=async function(e,t,r=500){return Promise.race([p(e,t),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))])},r.normalizeEnsName=function(e){if("."===e)return e;if(e&&"string"==typeof e)try{const t=c.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((n,i)=>{const s=(e,t)=>{e?i(e):n(t)};t in e&&"function"==typeof e[t]?e[t](...r,s):e.sendAsync({method:t,params:r},s)}))};r.convertHexToDecimal=(e="0x0")=>(0,o.isStrictHexString)(e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return(0,u.default)(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}},r.isEqualCaseInsensitive=function(e,t){return"string"==typeof e&&"string"==typeof t&&e.toLowerCase()===t.toLowerCase()}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/ens-controller>@metamask/controller-utils",file:"node_modules/@metamask/ens-controller/node_modules/@metamask/controller-utils/dist/util.cjs"}],[151,{"../../../../../shared/constants/app":5738,"../../../../../shared/modules/network.utils":5817,"../../util":198,"@metamask/chain-agnostic-permission":1447,"@metamask/controller-utils":1471,"@metamask/rpc-errors":2526},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.switchChain=async function(e,t,r,i,{origin:o,isAddFlow:a,isSwitchFlow:c,autoApprove:u,setActiveNetwork:l,getCaveat:d,requestPermittedChainsPermissionIncrementalForOrigin:f,setTokenNetworkFilter:p,rejectApprovalRequestsForOrigin:h,requestUserApproval:m,hasApprovalRequestsForOrigin:g,toNetworkConfiguration:y,fromNetworkConfiguration:b}){try{const w=d({target:s.Caip25EndowmentPermissionName,caveatType:s.Caip25CaveatType});if(w){if((0,s.getPermittedEthChainIds)(w.value).includes(r))null!=g&&g()&&!a&&await m({origin:o,type:n.ApprovalType.SwitchEthereumChain,requestData:{toNetworkConfiguration:y,fromNetworkConfiguration:b}});else{let e;c&&(e={isSwitchEthereumChain:!0}),await f({chainId:r,autoApprove:u,metadata:e})}}else await f({chainId:r,autoApprove:u});return null==h||h(),await l(i),p(r),e.result=null,t()}catch(e){return t(e)}},r.validateAddEthereumChainParams=function(e){if(!e||"object"!=typeof e)throw i.rpcErrors.invalidParams({message:`Expected single, object parameter. Received:\n${JSON.stringify(e)}`});const{chainId:t,chainName:r,blockExplorerUrls:n,nativeCurrency:s,rpcUrls:o,...l}=e,d=Object.keys(l).filter((e=>!["iconUrls"].includes(e)));if(d.length>0)throw i.rpcErrors.invalidParams({message:`Received unexpected keys on object parameter. Unsupported keys:\n${d}`});const f=u(t);if(!o||!Array.isArray(o)||0===o.length)throw i.rpcErrors.invalidParams({message:`Expected an array with at least one valid string HTTPS url 'rpcUrls', Received:\n${o}`});const p=e=>{const t=(0,c.getValidUrl)(e);return null!==t&&("localhost"===t.hostname||"127.0.0.1"===t.hostname||"https:"===t.protocol)},h=o.find((e=>p(e))),m=Array.isArray(n)?n.find((e=>p(e))):null;if(!h)throw i.rpcErrors.invalidParams({message:`Expected an array with at least one valid string HTTPS url 'rpcUrls', Received:\n${o}`});if("string"!=typeof r||!r)throw i.rpcErrors.invalidParams({message:`Expected non-empty string 'chainName'. Received:\n${r}`});const g=r.length>100?r.substring(0,100):r;if(null!==s){if("object"!=typeof s||Array.isArray(s))throw i.rpcErrors.invalidParams({message:`Expected null or object 'nativeCurrency'. Received:\n${s}`});if(18!==s.decimals)throw i.rpcErrors.invalidParams({message:`Expected the number 18 for 'nativeCurrency.decimals' when 'nativeCurrency' is provided. Received: ${s.decimals}`});if(!s.symbol||"string"!=typeof s.symbol)throw i.rpcErrors.invalidParams({message:`Expected a string 'nativeCurrency.symbol'. Received: ${s.symbol}`})}const y=(null==s?void 0:s.symbol)||a.UNKNOWN_TICKER_SYMBOL;if(y!==a.UNKNOWN_TICKER_SYMBOL&&("string"!=typeof y||y.length<1||y.length>6))throw i.rpcErrors.invalidParams({message:`Expected 1-6 character string 'nativeCurrency.symbol'. Received:\n${y}`});return{chainId:f,chainName:g,firstValidBlockExplorerUrl:m,firstValidRPCUrl:h,ticker:y}},r.validateChainId=u,r.validateSwitchEthereumChainParams=function(e){var t;if(null===(t=e.params)||void 0===t||!t[0]||"object"!=typeof e.params[0])throw i.rpcErrors.invalidParams({message:`Expected single, object parameter. Received:\n${JSON.stringify(e.params)}`});const{chainId:r,...n}=e.params[0];if(Object.keys(n).length>0)throw i.rpcErrors.invalidParams({message:`Received unexpected keys on object parameter. Unsupported keys:\n${Object.keys(n)}`});return u(r)};var n=e("@metamask/controller-utils"),i=e("@metamask/rpc-errors"),s=e("@metamask/chain-agnostic-permission"),o=e("../../../../../shared/modules/network.utils"),a=e("../../../../../shared/constants/app"),c=e("../../util");function u(e){const t="string"==typeof e?e.toLowerCase():null;if(!(0,o.isPrefixedFormattedHexString)(t))throw i.rpcErrors.invalidParams({message:`Expected 0x-prefixed, unpadded, non-zero hexadecimal string 'chainId'. Received:\n${e}`});if(!(0,o.isSafeChainId)(parseInt(e,16)))throw i.rpcErrors.invalidParams({message:`Invalid chain ID "${t}": numerical value greater than max safe value. Received:\n${e}`});return t}}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/ethereum-chain-utils.js"}],[152,{"../../../../../shared/constants/app":5738},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;const n={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.GET_PROVIDER_STATE],implementation:async function(e,t,r,n,{getProviderState:i}){return t.result={...await i(e.origin)},n()},hookNames:{getProviderState:!0}};r.default=n}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/get-provider-state.ts"}],[153,{"./add-ethereum-chain":149,"./eth-accounts":150,"./get-provider-state":152,"./log-web3-shim-usage":154,"./request-accounts":155,"./send-metadata":156,"./switch-ethereum-chain":157,"./watch-asset":163},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.handlers=r.ethAccountsHandler=r.eip1193OnlyHandlers=void 0;var n=d(e("./add-ethereum-chain")),i=d(e("./eth-accounts")),s=d(e("./get-provider-state")),o=d(e("./log-web3-shim-usage")),a=d(e("./request-accounts")),c=d(e("./send-metadata")),u=d(e("./switch-ethereum-chain")),l=d(e("./watch-asset"));function d(e){return e&&e.__esModule?e:{default:e}}r.handlers=[n.default,s.default,o.default,c.default,l.default],r.eip1193OnlyHandlers=[u.default,i.default,a.default],r.ethAccountsHandler=i.default}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/index.ts"}],[154,{"../../../../../shared/constants/app":5738},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;const n={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.LOG_WEB3_SHIM_USAGE],implementation:function(e,t,r,n,{getWeb3ShimUsageState:i,setWeb3ShimUsageRecorded:s}){const{origin:o}=e;i(o)===undefined&&s(o);return t.result=!0,n()},hookNames:{getWeb3ShimUsageState:!0,setWeb3ShimUsageRecorded:!0}};r.default=n}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/log-web3-shim-usage.ts"}],[155,{"../../../../../shared/constants/app":5738,"../../../../../shared/constants/metametrics":5749,"../../util":198,"@metamask/rpc-errors":2526},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/rpc-errors"),i=e("../../../../../shared/constants/app"),s=e("../../../../../shared/constants/metametrics"),o=e("../../util");const a={methodNames:[i.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS],implementation:async function(e,t,r,a,{getAccounts:u,getUnlockPromise:l,sendMetrics:d,metamaskState:f,getCaip25PermissionFromLegacyPermissionsForOrigin:p,requestPermissionsForOrigin:h}){const{origin:m}=e;if(c.has(m))return t.error=n.rpcErrors.resourceUnavailable(`Already processing ${i.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS}. Please wait.`),a();let g=u({ignoreLock:!0});if(g.length>0){try{c.add(m),await l(!0),t.result=g,a()}catch(e){a(e)}finally{c.delete(m)}return undefined}try{const e=p();await h(e)}catch(e){return a(e)}if(g=u({ignoreLock:!0}),(0,o.shouldEmitDappViewedEvent)(f.metaMetricsId)){const e=!Object.keys(f.permissionHistory).includes(m);d({event:s.MetaMetricsEventName.DappViewed,category:s.MetaMetricsEventCategory.InpageProvider,referrer:{url:m},properties:{is_first_visit:e,number_of_accounts:Object.keys(f.accounts).length,number_of_accounts_connected:g.length}},{excludeMetaMetricsId:!0})}return t.result=g,a()},hookNames:{getAccounts:!0,getUnlockPromise:!0,sendMetrics:!0,metamaskState:!0,getCaip25PermissionFromLegacyPermissionsForOrigin:!0,requestPermissionsForOrigin:!0}};r.default=a;const c=new Set}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/request-accounts.js"}],[1557,{"./base-filter":1558},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("./base-filter");t.exports=class extends n{constructor(){super(),this.allResults=[]}async update(){throw new Error("BaseFilterWithHistory - no update method specified")}addResults(e){this.allResults=this.allResults.concat(e),super.addResults(e)}addInitialResults(e){this.allResults=this.allResults.concat(e),super.addInitialResults(e)}getAllResults(){return this.allResults}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/base-filter-history.js"}],[1558,{"@metamask/safe-event-emitter":2528},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("@metamask/safe-event-emitter").default;t.exports=class extends n{constructor(){super(),this.updates=[]}async initialize(){}async update(){throw new Error("BaseFilter - no update method specified")}addResults(e){this.updates=this.updates.concat(e),e.forEach((e=>this.emit("update",e)))}addInitialResults(e){}getChangesAndClear(){const e=this.updates;return this.updates=[],e}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/base-filter.js"}],[1559,{"./base-filter":1558,"./getBlocksForRange":1560,"./hexUtils":1561},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("./base-filter"),i=e("./getBlocksForRange"),{incrementHexInt:s}=e("./hexUtils");t.exports=class extends n{constructor({provider:e,params:t}){super(),this.type="block",this.provider=e}async update({oldBlock:e,newBlock:t}){const r=t,n=s(e),o=(await i({provider:this.provider,fromBlock:n,toBlock:r})).map((e=>e.hash));this.addResults(o)}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/block-filter.js"}],[156,{"../../../../../shared/constants/app":5738,"@metamask/rpc-errors":2526},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/rpc-errors");const i={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.SEND_METADATA],implementation:function(e,t,r,i,{addSubjectMetadata:s,subjectType:o}){const{origin:a,params:c}=e;if(!c||"object"!=typeof c||Array.isArray(c))return i(n.rpcErrors.invalidParams({data:c}));{const{icon:e=null,name:t=null,...r}=c;s({...r,iconUrl:e,name:t,subjectType:o,origin:a})}return t.result=!0,i()},hookNames:{addSubjectMetadata:!0,subjectType:!0}};r.default=i}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/send-metadata.js"}],[1560,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return e===undefined||null===e?e:Number.parseInt(e,16)}function i(e){if(e===undefined||null===e)return e;return"0x"+e.toString(16)}t.exports=async function({provider:e,fromBlock:t,toBlock:r}){t||(t=r);const s=n(t),o=n(r),a=Array(o-s+1).fill().map(((e,t)=>s+t)).map(i);let c=await Promise.all(a.map((t=>async function(e,t,r){for(let n=0;n<3;n++)try{return e.request({id:1,jsonrpc:"2.0",method:t,params:r})}catch(e){console.error(`provider.request failed: ${e.stack||e.message||e}`)}return null}(e,"eth_getBlockByNumber",[t,!1]))));return c=c.filter((e=>null!==e)),c}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/getBlocksForRange.js"}],[1561,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return e.sort(((e,t)=>"latest"===e||"earliest"===t?1:"latest"===t||"earliest"===e?-1:i(e)-i(t)))}function i(e){return e===undefined||null===e?e:Number.parseInt(e,16)}function s(e){if(e===undefined||null===e)return e;let t=e.toString(16);return t.length%2&&(t="0"+t),"0x"+t}function o(){return Math.floor(16*Math.random()).toString(16)}t.exports={minBlockRef:function(...e){return n(e)[0]},maxBlockRef:function(...e){const t=n(e);return t[t.length-1]},sortBlockRefs:n,bnToHex:function(e){return"0x"+e.toString(16)},blockRefIsNumber:function(e){return e&&!["earliest","latest","pending"].includes(e)},hexToInt:i,incrementHexInt:function(e){if(e===undefined||null===e)return e;return s(i(e)+1)},intToHex:s,unsafeRandomBytes:function(e){let t="0x";for(let r=0;r<e;r++)t+=o(),t+=o();return t}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/hexUtils.js"}],[1562,{"./block-filter.js":1559,"./hexUtils":1561,"./log-filter.js":1563,"./tx-filter.js":1565,"@metamask/json-rpc-engine":1933,"async-mutex":3905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("async-mutex").Mutex,{createAsyncMiddleware:i,createScaffoldMiddleware:s}=e("@metamask/json-rpc-engine"),o=e("./log-filter.js"),a=e("./block-filter.js"),c=e("./tx-filter.js"),{intToHex:u,hexToInt:l}=e("./hexUtils");function d(e){return f((async(...t)=>{const r=await e(...t);return u(r.id)}))}function f(e){return i((async(t,r)=>{const n=await e.apply(null,t.params);r.result=n}))}function p(e,t){const r=[];for(let t in e)r.push(e[t]);return r}t.exports=function({blockTracker:e,provider:t}){let r=0,i={};const h=new n,m=function({mutex:e}){return t=>async(r,n,i,s)=>{(await e.acquire())(),t(r,n,i,s)}}({mutex:h}),g=s({eth_newFilter:m(d(b)),eth_newBlockFilter:m(d(w)),eth_newPendingTransactionFilter:m(d(E)),eth_uninstallFilter:m(f(v)),eth_getFilterChanges:m(f(T)),eth_getFilterLogs:m(f(k))}),y=async({oldBlock:e,newBlock:t})=>{if(0===i.length)return;const r=await h.acquire();try{await Promise.all(p(i).map((async r=>{try{await r.update({oldBlock:e,newBlock:t})}catch(e){console.error(e)}})))}catch(e){console.error(e)}r()};return g.newLogFilter=b,g.newBlockFilter=w,g.newPendingTransactionFilter=E,g.uninstallFilter=v,g.getFilterChanges=T,g.getFilterLogs=k,g.destroy=()=>{!async function(){const e=p(i).length;i={},A({prevFilterCount:e,newFilterCount:0})}()},g;async function b(e){const r=new o({provider:t,params:e});await _(r);return r}async function w(){const e=new a({provider:t});await _(e);return e}async function E(){const e=new c({provider:t});await _(e);return e}async function T(e){const t=l(e),r=i[t];if(!r)throw new Error(`No filter for index "${t}"`);return r.getChangesAndClear()}async function k(e){const t=l(e),r=i[t];if(!r)throw new Error(`No filter for index "${t}"`);let n=[];return"log"===r.type&&(n=r.getAllResults()),n}async function v(e){const t=l(e),r=i[t],n=Boolean(r);return n&&await async function(e){const t=p(i).length;delete i[e];const r=p(i).length;A({prevFilterCount:t,newFilterCount:r})}(t),n}async function _(t){const n=p(i).length,s=await e.getLatestBlock();await t.initialize({currentBlock:s}),r++,i[r]=t,t.id=r,t.idHex=u(r);return A({prevFilterCount:n,newFilterCount:p(i).length}),r}function A({prevFilterCount:t,newFilterCount:r}){0===t&&r>0?e.on("sync",y):t>0&&0===r&&e.removeListener("sync",y)}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/index.js"}],[1563,{"./base-filter-history":1557,"./hexUtils":1561,"@metamask/eth-query":1687,pify:5023},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("@metamask/eth-query"),i=e("pify"),s=e("./base-filter-history"),{bnToHex:o,hexToInt:a,incrementHexInt:c,minBlockRef:u,blockRefIsNumber:l}=e("./hexUtils");t.exports=class extends s{constructor({provider:e,params:t}){super(),this.type="log",this.ethQuery=new n(e),this.params=Object.assign({fromBlock:"latest",toBlock:"latest",address:undefined,topics:[]},t),this.params.address&&(Array.isArray(this.params.address)||(this.params.address=[this.params.address]),this.params.address=this.params.address.map((e=>e.toLowerCase())))}async initialize({currentBlock:e}){let t=this.params.fromBlock;["latest","pending"].includes(t)&&(t=e),"earliest"===t&&(t="0x0"),this.params.fromBlock=t;const r=u(this.params.toBlock,e),n=Object.assign({},this.params,{toBlock:r}),i=await this._fetchLogs(n);this.addInitialResults(i)}async update({oldBlock:e,newBlock:t}){const r=t;let n;n=e?c(e):t;const i=Object.assign({},this.params,{fromBlock:n,toBlock:r}),s=(await this._fetchLogs(i)).filter((e=>this.matchLog(e)));this.addResults(s)}async _fetchLogs(e){return await i((t=>this.ethQuery.getLogs(e,t)))()}matchLog(e){if(a(this.params.fromBlock)>=a(e.blockNumber))return!1;if(l(this.params.toBlock)&&a(this.params.toBlock)<=a(e.blockNumber))return!1;const t=e.address&&e.address.toLowerCase();if(this.params.address&&t&&!this.params.address.includes(t))return!1;return this.params.topics.every(((t,r)=>{let n=e.topics[r];if(!n)return!1;n=n.toLowerCase();let i=Array.isArray(t)?t:[t];if(i.includes(null))return!0;i=i.map((e=>e.toLowerCase()));return i.includes(n)}))}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/log-filter.js"}],[1564,{"./getBlocksForRange.js":1560,"./hexUtils.js":1561,"./index.js":1562,"@metamask/json-rpc-engine":1933,"@metamask/safe-event-emitter":2528},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("@metamask/safe-event-emitter").default,{createAsyncMiddleware:i,createScaffoldMiddleware:s}=e("@metamask/json-rpc-engine"),o=e("./index.js"),{unsafeRandomBytes:a,incrementHexInt:c}=e("./hexUtils.js"),u=e("./getBlocksForRange.js");function l(e){return null===e||e===undefined?null:{hash:e.hash,parentHash:e.parentHash,sha3Uncles:e.sha3Uncles,miner:e.miner,stateRoot:e.stateRoot,transactionsRoot:e.transactionsRoot,receiptsRoot:e.receiptsRoot,logsBloom:e.logsBloom,difficulty:e.difficulty,number:e.number,gasLimit:e.gasLimit,gasUsed:e.gasUsed,nonce:e.nonce,mixHash:e.mixHash,timestamp:e.timestamp,extraData:e.extraData}}t.exports=function({blockTracker:e,provider:t}){const r={},d=o({blockTracker:e,provider:t});let f=!1;const p=new n,h=s({eth_subscribe:i((async function(n,i){if(f)throw new Error("SubscriptionManager - attempting to use after destroying");const s=n.params[0],o=a(16);let p;switch(s){case"newHeads":p=h({subId:o});break;case"logs":const e=n.params[1];p=g({subId:o,filter:await d.newLogFilter(e)});break;default:throw new Error(`SubscriptionManager - unsupported subscription type "${s}"`)}return r[o]=p,void(i.result=o);function h({subId:r}){const n={type:s,destroy:async()=>{e.removeListener("sync",n.update)},update:async({oldBlock:e,newBlock:n})=>{const i=n,s=c(e);(await u({provider:t,fromBlock:s,toBlock:i})).map(l).filter((e=>null!==e)).forEach((e=>{m(r,e)}))}};return e.on("sync",n.update),n}function g({subId:e,filter:t}){t.on("update",(t=>m(e,t)));return{type:s,destroy:async()=>await d.uninstallFilter(t.idHex)}}})),eth_unsubscribe:i((async function(e,t){if(f)throw new Error("SubscriptionManager - attempting to use after destroying");const n=e.params[0],i=r[n];if(!i)return void(t.result=!1);delete r[n],await i.destroy(),t.result=!0}))});return h.destroy=function(){p.removeAllListeners();for(const e in r)r[e].destroy(),delete r[e];f=!0},{events:p,middleware:h};function m(e,t){p.emit("notification",{jsonrpc:"2.0",method:"eth_subscription",params:{subscription:e,result:t}})}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/subscriptionManager.js"}],[1565,{"./base-filter":1558,"./getBlocksForRange":1560,"./hexUtils":1561},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("./base-filter"),i=e("./getBlocksForRange"),{incrementHexInt:s}=e("./hexUtils");t.exports=class extends n{constructor({provider:e}){super(),this.type="tx",this.provider=e}async update({oldBlock:e}){const t=e,r=s(e),n=await i({provider:this.provider,fromBlock:r,toBlock:t}),o=[];for(const e of n)o.push(...e.transactions);this.addResults(o)}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/tx-filter.js"}],[157,{"../../../../../shared/constants/app":5738,"./ethereum-chain-utils":151,"@metamask/rpc-errors":2526},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/rpc-errors"),i=e("../../../../../shared/constants/app"),s=e("./ethereum-chain-utils");const o={methodNames:[i.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN],implementation:async function(e,t,r,o,{getNetworkConfigurationByChainId:a,setActiveNetwork:c,requestUserApproval:u,getCaveat:l,getCurrentChainIdForDomain:d,requestPermittedChainsPermissionIncrementalForOrigin:f,rejectApprovalRequestsForOrigin:p,setTokenNetworkFilter:h,hasApprovalRequestsForOrigin:m}){let g;try{g=(0,s.validateSwitchEthereumChainParams)(e)}catch(e){return o(e)}const{origin:y}=e,b=d(y);if(b===g)return t.result=null,o();const w=a(g),E=null==w?void 0:w.rpcEndpoints[w.defaultRpcEndpointIndex].networkClientId;if(!E)return o(n.providerErrors.custom({code:4902,message:`Unrecognized chain ID "${g}". Try adding the chain using ${i.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN} first.`}));const T=a(b),k=a(g);return(0,s.switchChain)(t,o,g,E,{origin:y,isSwitchFlow:!0,setActiveNetwork:c,getCaveat:l,requestPermittedChainsPermissionIncrementalForOrigin:f,rejectApprovalRequestsForOrigin:p,setTokenNetworkFilter:h,requestUserApproval:u,hasApprovalRequestsForOrigin:m,toNetworkConfiguration:k,fromNetworkConfiguration:T})},hookNames:{getNetworkConfigurationByChainId:!0,setActiveNetwork:!0,requestUserApproval:!0,getCaveat:!0,getCurrentChainIdForDomain:!0,requestPermittedChainsPermissionIncrementalForOrigin:!0,rejectApprovalRequestsForOrigin:!0,setTokenNetworkFilter:!0,hasApprovalRequestsForOrigin:!0}};r.default=o}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/switch-ethereum-chain.js"}],[1571,{"./logging-utils":1578,"./utils/cache":1584,"@metamask/json-rpc-engine":1933},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockCacheMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),i=e("./logging-utils"),s=e("./utils/cache"),o=(0,i.createModuleLogger)(i.projectLogger,"block-cache"),a=[undefined,null,"<nil>"];class c{constructor(){this.cache={}}getBlockCache(e){const t=Number.parseInt(e,16);let r=this.cache[t];if(!r){const e={};this.cache[t]=e,r=e}return r}async get(e,t){const r=this.getBlockCache(t),n=(0,s.cacheIdentifierForRequest)(e,!0);return n?r[n]:undefined}async set(e,t,r){if(!this.canCacheResult(e,r))return;const n=(0,s.cacheIdentifierForRequest)(e,!0);if(!n)return;this.getBlockCache(t)[n]=r}canCacheRequest(e){if(!(0,s.canCache)(e.method))return!1;return"pending"!==(0,s.blockTagForRequest)(e)}canCacheResult(e,t){return!a.includes(t)&&!(e.method&&["eth_getTransactionByHash","eth_getTransactionReceipt"].includes(e.method)&&(!t||!t.blockHash||"0x0000000000000000000000000000000000000000000000000000000000000000"===t.blockHash))}clearBefore(e){const t=Number.parseInt(e,16);Object.keys(this.cache).map(Number).filter((e=>e<t)).forEach((e=>delete this.cache[e]))}}r.createBlockCacheMiddleware=function({blockTracker:e}={}){if(!e)throw new Error("createBlockCacheMiddleware - No PollingBlockTracker specified");const t=new c,r={[s.CacheStrategy.Permanent]:t,[s.CacheStrategy.Block]:t,[s.CacheStrategy.Fork]:t,[s.CacheStrategy.Never]:undefined};return(0,n.createAsyncMiddleware)((async(n,i,a)=>{if(n.skipCache)return a();const c=(0,s.cacheTypeForMethod)(n.method),u=r[c];if(!u)return a();if(!u.canCacheRequest(n))return a();const l=(0,s.blockTagForRequest)(n),d=l&&"string"==typeof l?l:"latest";let f;if(o("blockTag = %o, req = %o",d,n),"earliest"===d)f="0x00";else if("latest"===d){o("Fetching latest block number to determine cache key");const r=await e.getLatestBlock();o("Clearing values stored under block numbers before %o",r),t.clearBefore(r),f=r}else f=d;const p=await u.get(n,f);return p===undefined?(o("No cache stored under block number %o, carrying request forward",f),await a(),o("Populating cache with",i),await u.set(n,f,i.result)):(o("Cache hit, reusing cache result stored under block number %o",f),i.result=p),undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-cache.js"}],[1572,{"./utils/cache":1584,"@metamask/json-rpc-engine":1933},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockRefRewriteMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),i=e("./utils/cache");r.createBlockRefRewriteMiddleware=function({blockTracker:e}={}){if(!e)throw Error('BlockRefRewriteMiddleware - mandatory "blockTracker" option is missing.');return(0,n.createAsyncMiddleware)((async(t,r,n)=>{const s=(0,i.blockTagParamIndex)(t.method);if(s===undefined)return n();if("latest"!==(Array.isArray(t.params)&&t.params[s]?t.params[s]:"latest"))return n();const o=await e.getLatestBlock();return Array.isArray(t.params)&&(t.params[s]=o),n()}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-ref-rewrite.js"}],[1573,{"./logging-utils":1578,"./utils/cache":1584,"@metamask/json-rpc-engine":1933,"klona/full":4723},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockRefMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),i=e("klona/full"),s=e("./logging-utils"),o=e("./utils/cache"),a=(0,s.createModuleLogger)(s.projectLogger,"block-ref");r.createBlockRefMiddleware=function({provider:e,blockTracker:t}={}){if(!e)throw Error('BlockRefMiddleware - mandatory "provider" option is missing.');if(!t)throw Error('BlockRefMiddleware - mandatory "blockTracker" option is missing.');return(0,n.createAsyncMiddleware)((async(r,n,s)=>{var c;const u=(0,o.blockTagParamIndex)(r.method);if(u===undefined)return s();if("latest"!==(Array.isArray(r.params)&&null!==(c=r.params[u])&&void 0!==c?c:"latest"))return a('blockRef is not "latest", carrying request forward'),s();const l=await t.getLatestBlock();a(`blockRef is "latest", setting param ${u} to latest block ${l}`);const d=(0,i.klona)(r);return Array.isArray(d.params)&&(d.params[u]=l),a("Performing another request %o",d),n.result=await e.request(d),undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-ref.js"}],[1574,{"./logging-utils":1578,"@metamask/json-rpc-engine":1933},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockTrackerInspectorMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),i=e("./logging-utils"),s=(0,i.createModuleLogger)(i.projectLogger,"block-tracker-inspector"),o=["eth_getTransactionByHash","eth_getTransactionReceipt"];function a(e){const{result:t}=e;return t&&"object"==typeof t&&(r=t,n="blockNumber",Object.hasOwnProperty.call(r,n))&&"string"==typeof t.blockNumber?t.blockNumber:undefined;var r,n}r.createBlockTrackerInspectorMiddleware=function({blockTracker:e}){return(0,n.createAsyncMiddleware)((async(t,r,n)=>{if(!o.includes(t.method))return n();await n();const i=a(r);if(!i)return undefined;s("res.result.blockNumber exists, proceeding. res = %o",r);return Number.parseInt(i,16)>Number.parseInt(e.getCurrentBlock(),16)&&(s("blockNumber from response is greater than current block number, refreshing current block number"),await e.checkForLatestBlock()),undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-tracker-inspector.js"}],[1575,{"./utils/timeout":1588,"@metamask/json-rpc-engine":1933,"@metamask/rpc-errors":2526},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createFetchConfigFromReq=r.createFetchMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),i=e("@metamask/rpc-errors"),s=e("./utils/timeout"),o=["Gateway timeout","ETIMEDOUT","failed to parse response body","Failed to fetch"];function a(e){switch(e.status){case 405:throw i.rpcErrors.methodNotFound();case 418:throw i.rpcErrors.internal({message:"Request is being rate limited."});case 503:case 504:throw function(){let e="Gateway timeout. The request took too long to process. ";return e+="This can happen when querying logs over too wide a block range.",i.rpcErrors.internal({message:e})}()}}function c(e,t){if(200!==e.status)throw i.rpcErrors.internal({message:`Non-200 status code: '${e.status}'`,data:t});if(t.error)throw i.rpcErrors.internal({data:t.error});return t.result}function u({btoa:e,req:t,rpcUrl:r,originHttpHeaderKey:n}){const i=new URL(r),s=function(e){let t="";t+=e.protocol,t+=`//${e.hostname}`,e.port&&(t+=`:${e.port}`);return t+=`${e.pathname}`,t+=`${e.search}`,t}(i),o={id:t.id,jsonrpc:t.jsonrpc,method:t.method,params:t.params},a=t.origin,c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)};if(i.username&&i.password){const t=e(`${i.username}:${i.password}`);c.headers.Authorization=`Basic ${t}`}return n&&a&&(c.headers[n]=a),{fetchUrl:s,fetchParams:c}}r.createFetchMiddleware=function(e){return"rpcService"in e?function({rpcService:e,options:t={}}){return(0,n.createAsyncMiddleware)((async(r,n)=>{const s="originHttpHeaderKey"in t&&t.originHttpHeaderKey!==undefined&&r.origin!==undefined?{[t.originHttpHeaderKey]:r.origin}:{},o=await e.request({id:r.id,jsonrpc:r.jsonrpc,method:r.method,params:r.params},{headers:s});if("error"in o)throw i.rpcErrors.internal({data:o.error});n.result=o.result}))}(e):function({btoa:e,fetch:t,rpcUrl:r,originHttpHeaderKey:i}){return(0,n.createAsyncMiddleware)((async(n,l,d)=>{const{fetchUrl:f,fetchParams:p}=u({btoa:e,req:n,rpcUrl:r,originHttpHeaderKey:i}),h=5,m=1e3;for(let e=0;e<h;e++){try{const e=await t(f,p);a(e);const r=await e.text();let n;try{n=JSON.parse(r)}catch(e){throw new Error(`FetchMiddleware - failed to parse response body: "${r}"`)}const i=c(e,n);return void(l.result=i)}catch(e){const t=e.toString();if(!o.some((e=>t.includes(e))))throw e}await(0,s.timeout)(m)}}))}(e)},r.createFetchConfigFromReq=u}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/fetch.js"}],[1576,{"./block-cache":1571,"./block-ref":1573,"./block-ref-rewrite":1572,"./block-tracker-inspector":1574,"./fetch":1575,"./inflight-cache":1577,"./methods/wallet-get-calls-status":1579,"./providerAsMiddleware":1582,"./retryOnEmpty":1583,"./wallet":1590},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.GetCallsStatusCode=void 0,i(e("./block-cache"),r),i(e("./block-ref-rewrite"),r),i(e("./block-ref"),r),i(e("./block-tracker-inspector"),r),i(e("./fetch"),r),i(e("./inflight-cache"),r);var s=e("./methods/wallet-get-calls-status");Object.defineProperty(r,"GetCallsStatusCode",{enumerable:!0,get:function(){return s.GetCallsStatusCode}}),i(e("./providerAsMiddleware"),r),i(e("./retryOnEmpty"),r),i(e("./wallet"),r)}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/index.js"}],[1577,{"./logging-utils":1578,"./utils/cache":1584,"@metamask/json-rpc-engine":1933,"klona/full":4723},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createInflightCacheMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),i=e("klona/full"),s=e("./logging-utils"),o=e("./utils/cache"),a=(0,s.createModuleLogger)(s.projectLogger,"inflight-cache");r.createInflightCacheMiddleware=function(){const e={};return(0,n.createAsyncMiddleware)((async(t,r,n)=>{if(t.skipCache)return n();const s=(0,o.cacheIdentifierForRequest)(t);if(!s)return a("Request is not cacheable, proceeding. req = %o",t),n();let c=e[s];return c?(a("Running %i handler(s) for request %o",c.length,t),await async function(e,t){const{resolve:r,promise:n}=function(){let e;const t=new Promise((t=>{e=t}));return{resolve:e,promise:t}}();return t.push((t=>{e.result=(0,i.klona)(t.result),e.error=(0,i.klona)(t.error),r()})),n}(r,c),undefined):(c=[],e[s]=c,a("Carrying original request forward %o",t),await n(),delete e[s],a("Running %i collected handler(s) for request %o",c.length,t),function(e,t){setTimeout((()=>{t.forEach((t=>{try{t(e)}catch(e){console.error(e)}}))}))}(r,c),undefined)}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/inflight-cache.js"}],[1578,{"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("eth-json-rpc-middleware")}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/logging-utils.js"}],[1579,{"../utils/validation":1589,"@metamask/rpc-errors":2526,"@metamask/superstruct":2875,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.walletGetCallsStatus=r.GetCallsStatusCode=void 0;const n=e("@metamask/rpc-errors"),i=e("@metamask/superstruct"),s=e("@metamask/utils"),o=e("../utils/validation"),a=(0,i.tuple)([s.StrictHexStruct]);!function(e){e[e.PENDING=100]="PENDING",e[e.CONFIRMED=200]="CONFIRMED",e[e.FAILED_OFFCHAIN=400]="FAILED_OFFCHAIN",e[e.REVERTED=500]="REVERTED",e[e.REVERTED_PARTIAL=600]="REVERTED_PARTIAL"}(r.GetCallsStatusCode||(r.GetCallsStatusCode={})),r.walletGetCallsStatus=async function(e,t,{getCallsStatus:r}){if(!r)throw n.rpcErrors.methodNotSupported();(0,o.validateParams)(e.params,a);const i=e.params[0];t.result=await r(i,e)}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/methods/wallet-get-calls-status.js"}],[158,{"../../../../../../shared/constants/app":5738,"../../../../../../shared/constants/metametrics":5749,"../../../../../../shared/lib/multichain/chain-agnostic-permission-utils/caip-accounts":5787,"../../../../../../shared/lib/multichain/chain-agnostic-permission-utils/caip-chainids":5788,"../../../../../../shared/lib/multichain/chain-agnostic-permission-utils/misc-utils":5789,"../../../../../../shared/modules/string-utils":5827,"../../../util":198,"@metamask/chain-agnostic-permission":1447,"@metamask/multichain-transactions-controller":2131,"@metamask/permission-controller":2328,"@metamask/rpc-errors":2526,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.walletCreateSession=void 0;var n=e("@metamask/rpc-errors"),i=e("@metamask/chain-agnostic-permission"),s=e("@metamask/permission-controller"),o=e("@metamask/utils"),a=e("@metamask/multichain-transactions-controller"),c=e("../../../../../../shared/constants/metametrics"),u=e("../../../util"),l=e("../../../../../../shared/constants/app"),d=e("../../../../../../shared/modules/string-utils"),f=e("../../../../../../shared/lib/multichain/chain-agnostic-permission-utils/caip-chainids"),p=e("../../../../../../shared/lib/multichain/chain-agnostic-permission-utils/caip-accounts"),h=e("../../../../../../shared/lib/multichain/chain-agnostic-permission-utils/misc-utils");r.walletCreateSession={methodNames:[l.MESSAGE_TYPE.WALLET_CREATE_SESSION],implementation:async function(e,t,r,l,m){const{origin:g}=e;if(!(0,o.isPlainObject)(e.params))return l((0,s.invalidParams)({data:{request:e}}));const{requiredScopes:y,optionalScopes:b,sessionProperties:w}=e.params;if(w&&0===Object.keys(w).length)return l(new n.JsonRpcError(5302,"Invalid sessionProperties requested"));const E=Object.fromEntries(Object.entries(w??{}).filter((([e])=>(0,h.isKnownSessionPropertyValue)(e))));try{var T;const{normalizedRequiredScopes:e,normalizedOptionalScopes:r}=(0,i.validateAndNormalizeScopes)(y||{},b||{}),s=(0,i.getSupportedScopeObjects)(e,{getNonEvmSupportedMethods:m.getNonEvmSupportedMethods}),w=(0,i.getSupportedScopeObjects)(r,{getNonEvmSupportedMethods:m.getNonEvmSupportedMethods}),k=e=>{try{return m.findNetworkClientIdByChainId(e),!0}catch(e){return!1}},v=(0,h.isNamespaceInScopesObject)(s,o.KnownCaipNamespace.Solana)||(0,h.isNamespaceInScopesObject)(w,o.KnownCaipNamespace.Solana);let _=!1;if(v){_=0===(await m.getNonEvmAccountAddresses(a.MultichainNetwork.Solana)).length}const{supportedScopes:A}=(0,i.bucketScopes)(s,{isEvmChainIdSupported:k,isEvmChainIdSupportable:()=>!1,getNonEvmSupportedMethods:m.getNonEvmSupportedMethods,isNonEvmScopeSupported:m.isNonEvmScopeSupported}),{supportedScopes:S}=(0,i.bucketScopes)(w,{isEvmChainIdSupported:k,isEvmChainIdSupportable:()=>!1,getNonEvmSupportedMethods:m.getNonEvmSupportedMethods,isNonEvmScopeSupported:m.isNonEvmScopeSupported}),P=(0,p.getCaipAccountIdsFromScopesObjects)([A,S]),I=(0,f.getAllScopesFromScopesObjects)([A,S]),C=m.listAccounts().map((e=>e.address)),M=P.filter((e=>{const{address:t,chain:{namespace:r},chainId:n}=(0,o.parseCaipAccountId)(e);return r===o.KnownCaipNamespace.Eip155?C.some((e=>(0,d.isEqualCaseInsensitive)(t,e))):m.getNonEvmAccountAddresses(n).some((t=>e===t))})),j={requiredScopes:(0,i.getInternalScopesObject)(A),optionalScopes:(0,i.getInternalScopesObject)(S),isMultichainOrigin:!0,sessionProperties:E},x=(0,i.setPermittedAccounts)(j,M);if(0===I.length){if(!_)return l(new n.JsonRpcError(5100,"Requested scopes are not supported"));x.optionalScopes[o.KnownCaipNamespace.Wallet]={accounts:[]}}const[N]=await m.requestPermissionsForOrigin({[i.Caip25EndowmentPermissionName]:{caveats:[{type:i.Caip25CaveatType,value:x}]}},{metadata:{promptToCreateSolanaAccount:_}}),B=N[i.Caip25EndowmentPermissionName],O=null==B||null===(T=B.caveats)||void 0===T||null===(T=T.find((e=>e.type===i.Caip25CaveatType)))||void 0===T?void 0:T.value;if(!O)throw n.rpcErrors.internal();const R=(0,i.getSessionScopes)(O,{getNonEvmSupportedMethods:m.getNonEvmSupportedMethods}),{sessionProperties:D={}}=O;if((0,u.shouldEmitDappViewedEvent)(m.metamaskState.metaMetricsId)){const e=!Object.keys(m.metamaskState.permissionHistory).includes(g),t=(0,i.getEthAccounts)(O);m.sendMetrics({event:c.MetaMetricsEventName.DappViewed,category:c.MetaMetricsEventCategory.InpageProvider,referrer:{url:g},properties:{is_first_visit:e,number_of_accounts:Object.keys(m.metamaskState.accounts).length,number_of_accounts_connected:t.length}},{excludeMetaMetricsId:!0})}return t.result={sessionScopes:R,sessionProperties:D},l()}catch(e){return l(e)}},hookNames:{findNetworkClientIdByChainId:!0,listAccounts:!0,requestPermissionsForOrigin:!0,sendMetrics:!0,metamaskState:!0,getNonEvmSupportedMethods:!0,isNonEvmScopeSupported:!0,getNonEvmAccountAddresses:!0}}}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/wallet-createSession/handler.ts"}],[1580,{"../utils/validation":1589,"@metamask/rpc-errors":2526,"@metamask/superstruct":2875,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.walletGetCapabilities=void 0;const n=e("@metamask/rpc-errors"),i=e("@metamask/superstruct"),s=e("@metamask/utils"),o=e("../utils/validation"),a=(0,i.tuple)([s.HexChecksumAddressStruct,(0,i.optional)((0,i.array)(s.StrictHexStruct))]);r.walletGetCapabilities=async function(e,t,{getAccounts:r,getCapabilities:i}){if(!i)throw n.rpcErrors.methodNotSupported();(0,o.validateParams)(e.params,a);const s=e.params[0],c=e.params[1];await(0,o.validateAndNormalizeKeyholder)(s,e,{getAccounts:r});const u=await i(s,c,e);t.result=u}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/methods/wallet-get-capabilities.js"}],[1581,{"../utils/validation":1589,"@metamask/rpc-errors":2526,"@metamask/superstruct":2875,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.walletSendCalls=void 0;const n=e("@metamask/rpc-errors"),i=e("@metamask/superstruct"),s=e("@metamask/utils"),o=e("../utils/validation"),a=(0,i.record)((0,i.string)(),(0,i.type)({optional:(0,i.optional)((0,i.boolean)())})),c=(0,i.tuple)([(0,i.object)({version:(0,i.nonempty)((0,i.string)()),id:(0,i.optional)(s.StrictHexStruct),from:(0,i.optional)(s.HexChecksumAddressStruct),chainId:s.StrictHexStruct,atomicRequired:(0,i.boolean)(),calls:(0,i.array)((0,i.object)({to:(0,i.optional)(s.HexChecksumAddressStruct),data:(0,i.optional)(s.StrictHexStruct),value:(0,i.optional)(s.StrictHexStruct),capabilities:(0,i.optional)(a)})),capabilities:(0,i.optional)(a)})]);r.walletSendCalls=async function(e,t,{getAccounts:r,processSendCalls:i}){if(!i)throw n.rpcErrors.methodNotSupported();(0,o.validateParams)(e.params,c);const s=e.params[0],a=s.from?await(0,o.validateAndNormalizeKeyholder)(s.from,e,{getAccounts:r}):undefined,u=Object.assign(Object.assign({},s),{from:a});t.result=await i(u,e)}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/methods/wallet-send-calls.js"}],[1582,{"@metamask/json-rpc-engine":1933},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ethersProviderAsMiddleware=r.providerAsMiddleware=void 0;const n=e("@metamask/json-rpc-engine");r.providerAsMiddleware=function(e){return(0,n.createAsyncMiddleware)((async(t,r)=>{r.result=await e.request(t)}))},r.ethersProviderAsMiddleware=function(e){return(t,r,n,i)=>{e.send(t,((e,t)=>e?i(e):(Object.assign(r,t),i())))}}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/providerAsMiddleware.js"}],[1583,{"./logging-utils":1578,"./utils/cache":1584,"./utils/error":1586,"./utils/timeout":1588,"@metamask/json-rpc-engine":1933,"klona/full":4723},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createRetryOnEmptyMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),i=e("klona/full"),s=e("./logging-utils"),o=e("./utils/cache"),a=e("./utils/error"),c=e("./utils/timeout"),u=(0,s.createModuleLogger)(s.projectLogger,"retry-on-empty"),l=[undefined,null,"<nil>"];r.createRetryOnEmptyMiddleware=function({provider:e,blockTracker:t}={}){if(!e)throw Error('RetryOnEmptyMiddleware - mandatory "provider" option is missing.');if(!t)throw Error('RetryOnEmptyMiddleware - mandatory "blockTracker" option is missing.');return(0,n.createAsyncMiddleware)((async(r,n,s)=>{const d=(0,o.blockTagParamIndex)(r.method);if(d===undefined)return s();let f=Array.isArray(r.params)&&r.params[d]?r.params[d]:undefined;if(f===undefined&&(f="latest"),["latest","pending"].includes(f))return s();const p=Number.parseInt(f.slice(2),16);if(Number.isNaN(p))return s();const h=await t.getLatestBlock(),m=Number.parseInt(h.slice(2),16);if(p>m)return u("Requested block number %o is higher than latest block number %o, falling through to original request",p,m),s();u("Requested block number %o is not higher than latest block number %o, trying request until non-empty response is received",p,m);const g=(0,i.klona)(r),y=await async function(e,t){for(let r=0;r<e;r++)try{return await t()}catch(e){if((0,a.isExecutionRevertedError)(e))throw e;u("(call %i) Request failed, waiting 1s to retry again...",r+1),await(0,c.timeout)(1e3)}throw u("Retries exhausted"),new Error("RetryOnEmptyMiddleware - retries exhausted")}(10,(async()=>{u("Performing request %o",g);const t=await e.request(g);u("Result is %o",t);if(l.includes(t))throw new Error(`RetryOnEmptyMiddleware - empty result "${JSON.stringify(t)}" for request "${JSON.stringify(g)}"`);return t}));return u("Copying result %o",y),n.result=y,undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/retryOnEmpty.js"}],[1584,{"safe-stable-stringify":5538},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.cacheTypeForMethod=r.blockTagParamIndex=r.blockTagForRequest=r.canCache=r.cacheIdentifierForRequest=r.CacheStrategy=void 0;const n=(0,e("safe-stable-stringify").configure)({bigint:!1,circularValue:Error});var i;function s(e){return a(e)!==i.Never}function o(e){switch(e){case"eth_getStorageAt":return 2;case"eth_getBalance":case"eth_getCode":case"eth_getTransactionCount":case"eth_call":return 1;case"eth_getBlockByNumber":return 0;default:return undefined}}function a(e){switch(e){case"web3_clientVersion":case"web3_sha3":case"eth_protocolVersion":case"eth_getBlockTransactionCountByHash":case"eth_getUncleCountByBlockHash":case"eth_getCode":case"eth_getBlockByHash":case"eth_getTransactionByHash":case"eth_getTransactionByBlockHashAndIndex":case"eth_getTransactionReceipt":case"eth_getUncleByBlockHashAndIndex":case"eth_getCompilers":case"eth_compileLLL":case"eth_compileSolidity":case"eth_compileSerpent":case"shh_version":case"test_permaCache":return i.Permanent;case"eth_getBlockByNumber":case"eth_getBlockTransactionCountByNumber":case"eth_getUncleCountByBlockNumber":case"eth_getTransactionByBlockNumberAndIndex":case"eth_getUncleByBlockNumberAndIndex":case"test_forkCache":return i.Fork;case"eth_gasPrice":case"eth_blockNumber":case"eth_getBalance":case"eth_getStorageAt":case"eth_getTransactionCount":case"eth_call":case"eth_estimateGas":case"eth_getFilterLogs":case"eth_getLogs":case"test_blockCache":return i.Block;default:return i.Never}}!function(e){e.Block="block",e.Fork="fork",e.Never="never",e.Permanent="perma"}(i=r.CacheStrategy||(r.CacheStrategy={})),r.cacheIdentifierForRequest=function(e,t){var r;const i=t?function(e){if(!e.params)return[];const t=o(e.method);if(t===undefined||!Array.isArray(e.params)||t>=e.params.length)return e.params;if("eth_getBlockByNumber"===e.method)return e.params.slice(1);return e.params.slice(0,t)}(e):null!==(r=e.params)&&void 0!==r?r:[];return s(e.method)?`${e.method}:${n(i)}`:null},r.canCache=s,r.blockTagForRequest=function(e){if(!e.params)return undefined;const t=o(e.method);return t===undefined||!Array.isArray(e.params)||t>=e.params.length?undefined:e.params[t]},r.blockTagParamIndex=o,r.cacheTypeForMethod=a}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/cache.js"}],[1585,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.stripArrayTypeIfPresent=void 0;r.stripArrayTypeIfPresent=e=>(null==e?void 0:e.match(/\S\[\d*\]$/u))?e.replace(/\[\d*\]$/gu,"").trim():e}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/common.js"}],[1586,{"@metamask/rpc-errors":2526,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isExecutionRevertedError=void 0;const n=e("@metamask/rpc-errors"),i=e("@metamask/utils");r.isExecutionRevertedError=function(e){return(0,i.isJsonRpcError)(e)&&e.code===n.errorCodes.rpc.invalidInput&&"execution reverted"===e.message}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/error.js"}],[1587,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return"string"!=typeof e?e:JSON.parse(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.parseTypedMessage=r.normalizeTypedMessage=void 0,r.normalizeTypedMessage=function(e){var t;let r;try{r=n(e)}catch(t){return e}const{verifyingContract:i}=null!==(t=r.domain)&&void 0!==t?t:{};return i?(r.domain.verifyingContract=function(e){if(e.startsWith("0X"))return`0x${e.slice(2)}`;return e}(i),JSON.stringify(r)):e},r.parseTypedMessage=n}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/normalize.js"}],[1588,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeout=void 0,r.timeout=async function(e){return new Promise((t=>setTimeout(t,e)))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/timeout.js"}],[1589,{"@metamask/rpc-errors":2526,"@metamask/superstruct":2875},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.resemblesAddress=r.validateParams=r.validateAndNormalizeKeyholder=void 0;const n=e("@metamask/rpc-errors"),i=e("@metamask/superstruct");function s(e){return 42===e.length}r.validateAndNormalizeKeyholder=async function(e,t,{getAccounts:r}){if("string"==typeof e&&e.length>0&&s(e)){const i=(await r(t)).map((e=>e.toLowerCase())),s=e.toLowerCase();if(i.includes(s))return s;throw n.providerErrors.unauthorized()}throw n.rpcErrors.invalidParams({message:"Invalid parameters: must provide an Ethereum address."})},r.validateParams=function(e,t){const[r]=(0,i.validate)(e,t);if(r)throw n.rpcErrors.invalidParams(function(e,t){return`${t}\n\n${e.failures().map((e=>`${e.path.join(" > ")}${e.path.length?" - ":""}${e.message}`)).join("\n")}`}(r,"Invalid params"))},r.resemblesAddress=s}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/validation.js"}],[159,{"./handler":158},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./handler");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}}))}))}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/wallet-createSession/index.ts"}],[1590,{"./methods/wallet-get-calls-status":1579,"./methods/wallet-get-capabilities":1580,"./methods/wallet-send-calls":1581,"./utils/common":1585,"./utils/normalize":1587,"./utils/validation":1589,"@metamask/eth-sig-util":1627,"@metamask/json-rpc-engine":1933,"@metamask/rpc-errors":2526,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.createWalletMiddleware=void 0;const o=s(e("@metamask/eth-sig-util")),a=e("@metamask/json-rpc-engine"),c=e("@metamask/rpc-errors"),u=e("@metamask/utils"),l=e("./methods/wallet-get-calls-status"),d=e("./methods/wallet-get-capabilities"),f=e("./methods/wallet-send-calls"),p=e("./utils/common"),h=e("./utils/normalize"),m=e("./utils/validation");function g(e){const{primaryType:t,types:r}=(0,h.parseTypedMessage)(e);if(!r)throw c.rpcErrors.invalidInput();if(!r[(0,p.stripArrayTypeIfPresent)(t)])throw c.rpcErrors.invalidInput()}function y(e){const{domain:{verifyingContract:t}={}}=(0,h.parseTypedMessage)(e);if(t&&"cosmos"!==t&&!(0,u.isValidHexAddress)(t))throw c.rpcErrors.invalidInput()}r.createWalletMiddleware=function({getAccounts:e,getCallsStatus:t,getCapabilities:r,processDecryptMessage:n,processEncryptionPublicKey:i,processPersonalMessage:s,processTransaction:u,processSignTransaction:p,processTypedMessage:b,processTypedMessageV3:w,processTypedMessageV4:E,processSendCalls:T}){if(!e)throw new Error("opts.getAccounts is required");return(0,a.createScaffoldMiddleware)({eth_accounts:(0,a.createAsyncMiddleware)((async function(t,r){r.result=await e(t)})),eth_coinbase:(0,a.createAsyncMiddleware)((async function(t,r){const n=await e(t);r.result=n[0]||null})),eth_sendTransaction:(0,a.createAsyncMiddleware)((async function(e,t){if(!u)throw c.rpcErrors.methodNotSupported();if(!(e.params&&Array.isArray(e.params)&&e.params.length>=1))throw c.rpcErrors.invalidInput();const r=e.params[0],n=Object.assign(Object.assign({},r),{from:await k((null==r?void 0:r.from)||"",e)});t.result=await u(n,e)})),eth_signTransaction:(0,a.createAsyncMiddleware)((async function(e,t){if(!p)throw c.rpcErrors.methodNotSupported();if(!(e.params&&Array.isArray(e.params)&&e.params.length>=1))throw c.rpcErrors.invalidInput();const r=e.params[0],n=Object.assign(Object.assign({},r),{from:await k((null==r?void 0:r.from)||"",e)});t.result=await p(n,e)})),eth_signTypedData:(0,a.createAsyncMiddleware)((async function(e,t){if(!b)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=r[0],i=await k(r[1],e),s=r[2]||{},o=Object.assign(Object.assign({},s),{from:i,data:n,signatureMethod:"eth_signTypedData",version:"V1"});t.result=await b(o,e,"V1")})),eth_signTypedData_v3:(0,a.createAsyncMiddleware)((async function(e,t){if(!w)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=await k(r[0],e),i=(0,h.normalizeTypedMessage)(r[1]);g(i),y(i);const s={data:i,from:n,version:"V3",signatureMethod:"eth_signTypedData_v3"};t.result=await w(s,e,"V3")})),eth_signTypedData_v4:(0,a.createAsyncMiddleware)((async function(e,t){if(!E)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=await k(r[0],e),i=(0,h.normalizeTypedMessage)(r[1]);g(i),y(i);const s={data:i,from:n,version:"V4",signatureMethod:"eth_signTypedData_v4"};t.result=await E(s,e,"V4")})),personal_sign:(0,a.createAsyncMiddleware)((async function(e,t){if(!s)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=r[0],i=r[1],o=r[2]||{};let a,u;if((0,m.resemblesAddress)(n)&&!(0,m.resemblesAddress)(i)){let e="The eth_personalSign method requires params ordered ";e+="[message, address]. This was previously handled incorrectly, ",e+="and has been corrected automatically. ",e+="Please switch this param order for smooth behavior in the future.",t.warning=e,a=n,u=i}else u=n,a=i;a=await k(a,e);const l=Object.assign(Object.assign({},o),{from:a,data:u,signatureMethod:"personal_sign"});t.result=await s(l,e)})),eth_getEncryptionPublicKey:(0,a.createAsyncMiddleware)((async function(e,t){if(!i)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=1))throw c.rpcErrors.invalidInput();const r=e.params,n=await k(r[0],e);t.result=await i(n,e)})),eth_decrypt:(0,a.createAsyncMiddleware)((async function(e,t){if(!n)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=1))throw c.rpcErrors.invalidInput();const r=e.params,i=r[0],s=await k(r[1],e),o=r[2]||{},a=Object.assign(Object.assign({},o),{from:s,data:i});t.result=await n(a,e)})),personal_ecRecover:(0,a.createAsyncMiddleware)((async function(e,t){if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=r[0],i=r[1],s=o.recoverPersonalSignature({data:n,signature:i});t.result=s})),wallet_getCapabilities:(0,a.createAsyncMiddleware)((async(t,n)=>(0,d.walletGetCapabilities)(t,n,{getAccounts:e,getCapabilities:r}))),wallet_sendCalls:(0,a.createAsyncMiddleware)((async(t,r)=>(0,f.walletSendCalls)(t,r,{getAccounts:e,processSendCalls:T}))),wallet_getCallsStatus:(0,a.createAsyncMiddleware)((async(e,r)=>(0,l.walletGetCallsStatus)(e,r,{getCallsStatus:t})))});async function k(t,r){return(0,m.validateAndNormalizeKeyholder)(t,r,{getAccounts:e})}}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/wallet.js"}],[1591,{"./bytes":1594,"./constants":1595,"./helpers":1597,"./internal":1599,"@ethereumjs/rlp":448,buffer:4079,"ethereum-cryptography/keccak":4312,"ethereum-cryptography/secp256k1":4333,"ethereum-cryptography/utils":4335},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.accountBodyToRLP=r.accountBodyToSlim=r.accountBodyFromSlim=r.isZeroAddress=r.zeroAddress=r.importPublic=r.privateToAddress=r.privateToPublic=r.publicToAddress=r.pubToAddress=r.isValidPublic=r.isValidPrivate=r.generateAddress2=r.generateAddress=r.isValidChecksumAddress=r.toChecksumAddress=r.isValidAddress=r.Account=void 0;const n=e("@ethereumjs/rlp"),i=e("ethereum-cryptography/keccak"),s=e("ethereum-cryptography/secp256k1"),o=e("ethereum-cryptography/utils"),a=e("./bytes"),c=e("./constants"),u=e("./helpers"),l=e("./internal"),d=BigInt(0);class f{constructor(e=d,t=d,r=c.KECCAK256_RLP,n=c.KECCAK256_NULL){this.nonce=e,this.balance=t,this.storageRoot=r,this.codeHash=n,this._validate()}static fromAccountData(e){const{nonce:t,balance:r,storageRoot:n,codeHash:i}=e;return new f(t!==undefined?(0,a.bufferToBigInt)((0,a.toBuffer)(t)):undefined,r!==undefined?(0,a.bufferToBigInt)((0,a.toBuffer)(r)):undefined,n!==undefined?(0,a.toBuffer)(n):undefined,i!==undefined?(0,a.toBuffer)(i):undefined)}static fromRlpSerializedAccount(e){const t=(0,a.arrToBufArr)(n.RLP.decode(Uint8Array.from(e)));if(!Array.isArray(t))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(t)}static fromValuesArray(e){const[t,r,n,i]=e;return new f((0,a.bufferToBigInt)(t),(0,a.bufferToBigInt)(r),n,i)}_validate(){if(this.nonce<d)throw new Error("nonce must be greater than zero");if(this.balance<d)throw new Error("balance must be greater than zero");if(32!==this.storageRoot.length)throw new Error("storageRoot must have a length of 32");if(32!==this.codeHash.length)throw new Error("codeHash must have a length of 32")}raw(){return[(0,a.bigIntToUnpaddedBuffer)(this.nonce),(0,a.bigIntToUnpaddedBuffer)(this.balance),this.storageRoot,this.codeHash]}serialize(){return t.from(n.RLP.encode((0,a.bufArrToArr)(this.raw())))}isContract(){return!this.codeHash.equals(c.KECCAK256_NULL)}isEmpty(){return this.balance===d&&this.nonce===d&&this.codeHash.equals(c.KECCAK256_NULL)}}r.Account=f;r.isValidAddress=function(e){try{(0,u.assertIsString)(e)}catch(e){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};r.toChecksumAddress=function(e,r){(0,u.assertIsHexString)(e);const n=(0,l.stripHexPrefix)(e).toLowerCase();let s="";if(r!==undefined){s=(0,a.bufferToBigInt)((0,a.toBuffer)(r)).toString()+"0x"}const c=t.from(s+n,"utf8"),d=(0,o.bytesToHex)((0,i.keccak256)(c));let f="0x";for(let e=0;e<n.length;e++)parseInt(d[e],16)>=8?f+=n[e].toUpperCase():f+=n[e];return f};r.isValidChecksumAddress=function(e,t){return(0,r.isValidAddress)(e)&&(0,r.toChecksumAddress)(e,t)===e};r.generateAddress=function(e,r){return(0,u.assertIsBuffer)(e),(0,u.assertIsBuffer)(r),(0,a.bufferToBigInt)(r)===BigInt(0)?t.from((0,i.keccak256)(n.RLP.encode((0,a.bufArrToArr)([e,null])))).slice(-20):t.from((0,i.keccak256)(n.RLP.encode((0,a.bufArrToArr)([e,r])))).slice(-20)};r.generateAddress2=function(e,r,n){if((0,u.assertIsBuffer)(e),(0,u.assertIsBuffer)(r),(0,u.assertIsBuffer)(n),20!==e.length)throw new Error("Expected from to be of length 20");if(32!==r.length)throw new Error("Expected salt to be of length 32");const s=(0,i.keccak256)(t.concat([t.from("ff","hex"),e,r,(0,i.keccak256)(n)]));return(0,a.toBuffer)(s).slice(-20)};r.isValidPrivate=function(e){return s.secp256k1.utils.isValidPrivateKey(e)};r.isValidPublic=function(e,r=!1){if((0,u.assertIsBuffer)(e),64===e.length)try{return s.secp256k1.ProjectivePoint.fromHex(t.concat([t.from([4]),e])),!0}catch(e){return!1}if(!r)return!1;try{return s.secp256k1.ProjectivePoint.fromHex(e),!0}catch(e){return!1}};r.pubToAddress=function(e,r=!1){if((0,u.assertIsBuffer)(e),r&&64!==e.length&&(e=t.from(s.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),64!==e.length)throw new Error("Expected pubKey to be of length 64");return t.from((0,i.keccak256)(e)).slice(-20)},r.publicToAddress=r.pubToAddress;r.privateToPublic=function(e){return(0,u.assertIsBuffer)(e),t.from(s.secp256k1.ProjectivePoint.fromPrivateKey(e).toRawBytes(!1).slice(1))};r.privateToAddress=function(e){return(0,r.publicToAddress)((0,r.privateToPublic)(e))};r.importPublic=function(e){return(0,u.assertIsBuffer)(e),64!==e.length&&(e=t.from(s.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),e};r.zeroAddress=function(){const e=(0,a.zeros)(20);return(0,a.bufferToHex)(e)};function p(e){const[t,r,n,i]=e;return[t,r,0===(0,a.arrToBufArr)(n).length?c.KECCAK256_RLP:n,0===(0,a.arrToBufArr)(i).length?c.KECCAK256_NULL:i]}r.isZeroAddress=function(e){try{(0,u.assertIsString)(e)}catch(e){return!1}return(0,r.zeroAddress)()===e},r.accountBodyFromSlim=p;const h=new Uint8Array(0);r.accountBodyToSlim=function(e){const[t,r,n,i]=e;return[t,r,(0,a.arrToBufArr)(n).equals(c.KECCAK256_RLP)?h:n,(0,a.arrToBufArr)(i).equals(c.KECCAK256_NULL)?h:i]},r.accountBodyToRLP=function(e,t=!0){const r=t?p(e):e;return(0,a.arrToBufArr)(n.RLP.encode(r))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/account.js"}],[1592,{"./account":1591,"./bytes":1594,buffer:4079},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Address=void 0;const n=e("./account"),i=e("./bytes");class s{constructor(e){if(20!==e.length)throw new Error("Invalid address length");this.buf=e}static zero(){return new s((0,i.zeros)(20))}static fromString(e){if(!(0,n.isValidAddress)(e))throw new Error("Invalid address");return new s((0,i.toBuffer)(e))}static fromPublicKey(e){if(!t.isBuffer(e))throw new Error("Public key should be Buffer");const r=(0,n.pubToAddress)(e);return new s(r)}static fromPrivateKey(e){if(!t.isBuffer(e))throw new Error("Private key should be Buffer");const r=(0,n.privateToAddress)(e);return new s(r)}static generate(e,t){if("bigint"!=typeof t)throw new Error("Expected nonce to be a bigint");return new s((0,n.generateAddress)(e.buf,(0,i.bigIntToBuffer)(t)))}static generate2(e,r,i){if(!t.isBuffer(r))throw new Error("Expected salt to be a Buffer");if(!t.isBuffer(i))throw new Error("Expected initCode to be a Buffer");return new s((0,n.generateAddress2)(e.buf,r,i))}equals(e){return this.buf.equals(e.buf)}isZero(){return this.equals(s.zero())}isPrecompileOrSystemAddress(){const e=(0,i.bufferToBigInt)(this.buf),t=BigInt(0),r=BigInt("0xffff");return e>=t&&e<=r}toString(){return"0x"+this.buf.toString("hex")}toBuffer(){return t.from(this.buf)}}r.Address=s}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/address.js"}],[1593,{events:4415},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AsyncEventEmitter=void 0;const n=e("events");class i extends n.EventEmitter{emit(e,...t){let[r,n]=t;const i=this;let s=i._events[e]??[];return n===undefined&&"function"==typeof r&&(n=r,r=undefined),"newListener"!==e&&"removeListener"!==e||(r={event:r,fn:n},n=undefined),s=Array.isArray(s)?s:[s],async function(e,t,r){let n;for await(const i of t)try{i.length<2?i.call(e,r):await new Promise(((t,n)=>{i.call(e,r,(e=>{e?n(e):t()}))}))}catch(e){n=e}if(n)throw n}(i,s.slice(),r).then(n).catch(n),i.listenerCount(e)>0}once(e,t){const r=this;let n;if("function"!=typeof t)throw new TypeError("listener must be a function");return n=t.length>=2?function(i,s){r.removeListener(e,n),t(i,s)}:function(i){r.removeListener(e,n),t(i,n)},r.on(e,n),r}first(e,t){let r=this._events[e]??[];if("function"!=typeof t)throw new TypeError("listener must be a function");return Array.isArray(r)||(this._events[e]=r=[r]),r.unshift(t),this}before(e,t,r){return this.beforeOrAfter(e,t,r)}after(e,t,r){return this.beforeOrAfter(e,t,r,"after")}beforeOrAfter(e,t,r,n){let i,s,o=this._events[e]??[];const a="after"===n?1:0;if("function"!=typeof r)throw new TypeError("listener must be a function");if("function"!=typeof t)throw new TypeError("target must be a function");for(Array.isArray(o)||(this._events[e]=o=[o]),s=o.length,i=o.length;i--;)if(o[i]===t){s=i+a;break}return o.splice(s,0,r),this}on(e,t){return super.on(e,t)}addListener(e,t){return super.addListener(e,t)}prependListener(e,t){return super.prependListener(e,t)}prependOnceListener(e,t){return super.prependOnceListener(e,t)}removeAllListeners(e){return super.removeAllListeners(e)}removeListener(e,t){return super.removeListener(e,t)}eventNames(){return super.eventNames()}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(e){return super.setMaxListeners(e)}}r.AsyncEventEmitter=i}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/asyncEventEmitter.js"}],[1594,{"./helpers":1597,"./internal":1599,buffer:4079},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.intToUnpaddedBuffer=r.bigIntToUnpaddedBuffer=r.bigIntToHex=r.bufArrToArr=r.arrToBufArr=r.validateNoLeadingZeroes=r.baToJSON=r.toUtf8=r.short=r.addHexPrefix=r.toUnsigned=r.fromSigned=r.bufferToInt=r.bigIntToBuffer=r.bufferToBigInt=r.bufferToHex=r.toBuffer=r.unpadHexString=r.unpadArray=r.unpadBuffer=r.setLengthRight=r.setLengthLeft=r.zeros=r.intToBuffer=r.intToHex=void 0;const n=e("./helpers"),i=e("./internal");r.intToHex=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};r.intToBuffer=function(e){const n=(0,r.intToHex)(e);return t.from((0,i.padToEven)(n.slice(2)),"hex")};r.zeros=function(e){return t.allocUnsafe(e).fill(0)};const s=function(e,t,n){const i=(0,r.zeros)(t);return n?e.length<t?(e.copy(i),i):e.slice(0,t):e.length<t?(e.copy(i,t-e.length),i):e.slice(-t)};r.setLengthLeft=function(e,t){return(0,n.assertIsBuffer)(e),s(e,t,!1)};r.setLengthRight=function(e,t){return(0,n.assertIsBuffer)(e),s(e,t,!0)};const o=function(e){let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e};r.unpadBuffer=function(e){return(0,n.assertIsBuffer)(e),o(e)};r.unpadArray=function(e){return(0,n.assertIsArray)(e),o(e)};r.unpadHexString=function(e){return(0,n.assertIsHexString)(e),e=(0,i.stripHexPrefix)(e),"0x"+o(e)};r.toBuffer=function(e){if(null===e||e===undefined)return t.allocUnsafe(0);if(t.isBuffer(e))return t.from(e);if(Array.isArray(e)||e instanceof Uint8Array)return t.from(e);if("string"==typeof e){if(!(0,i.isHexString)(e))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${e}`);return t.from((0,i.padToEven)((0,i.stripHexPrefix)(e)),"hex")}if("number"==typeof e)return(0,r.intToBuffer)(e);if("bigint"==typeof e){if(e<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${e}`);let r=e.toString(16);return r.length%2&&(r="0"+r),t.from(r,"hex")}if(e.toArray)return t.from(e.toArray());if(e.toBuffer)return t.from(e.toBuffer());throw new Error("invalid type")};function a(e){const t=(0,r.bufferToHex)(e);return"0x"===t?BigInt(0):BigInt(t)}function c(e){return(0,r.toBuffer)("0x"+e.toString(16))}r.bufferToHex=function(e){return"0x"+(e=(0,r.toBuffer)(e)).toString("hex")},r.bufferToBigInt=a,r.bigIntToBuffer=c;r.bufferToInt=function(e){const t=Number(a(e));if(!Number.isSafeInteger(t))throw new Error("Number exceeds 53 bits");return t};r.fromSigned=function(e){return BigInt.asIntN(256,a(e))};r.toUnsigned=function(e){return c(BigInt.asUintN(256,e))};r.addHexPrefix=function(e){return"string"!=typeof e||(0,i.isHexPrefixed)(e)?e:"0x"+e},r.short=function(e,r=50){const n=t.isBuffer(e)?e.toString("hex"):e;return n.length<=r?n:n.slice(0,r)+""};r.toUtf8=function(e){if((e=(0,i.stripHexPrefix)(e)).length%2!=0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return t.from(e.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")};r.baToJSON=function(e){if(t.isBuffer(e))return`0x${e.toString("hex")}`;if(e instanceof Array){const t=[];for(let n=0;n<e.length;n++)t.push((0,r.baToJSON)(e[n]));return t}};r.validateNoLeadingZeroes=function(e){for(const[t,r]of Object.entries(e))if(r!==undefined&&r.length>0&&0===r[0])throw new Error(`${t} cannot have leading zeroes, received: ${r.toString("hex")}`)},r.arrToBufArr=function e(r){return Array.isArray(r)?r.map((t=>e(t))):t.from(r)},r.bufArrToArr=function e(t){return Array.isArray(t)?t.map((t=>e(t))):Uint8Array.from(t??[])};r.bigIntToHex=e=>"0x"+e.toString(16),r.bigIntToUnpaddedBuffer=function(e){return(0,r.unpadBuffer)(c(e))},r.intToUnpaddedBuffer=function(e){return(0,r.unpadBuffer)((0,r.intToBuffer)(e))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/bytes.js"}],[1595,{buffer:4079,"ethereum-cryptography/secp256k1":4333},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MAX_WITHDRAWALS_PER_PAYLOAD=r.RLP_EMPTY_STRING=r.KECCAK256_RLP=r.KECCAK256_RLP_S=r.KECCAK256_RLP_ARRAY=r.KECCAK256_RLP_ARRAY_S=r.KECCAK256_NULL=r.KECCAK256_NULL_S=r.TWO_POW256=r.SECP256K1_ORDER_DIV_2=r.SECP256K1_ORDER=r.MAX_INTEGER_BIGINT=r.MAX_INTEGER=r.MAX_UINT64=void 0;const n=e("buffer"),i=e("ethereum-cryptography/secp256k1");r.MAX_UINT64=BigInt("0xffffffffffffffff"),r.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),r.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),r.SECP256K1_ORDER=i.secp256k1.CURVE.n,r.SECP256K1_ORDER_DIV_2=i.secp256k1.CURVE.n/BigInt(2),r.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),r.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.KECCAK256_NULL=n.Buffer.from(r.KECCAK256_NULL_S,"hex"),r.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.KECCAK256_RLP_ARRAY=n.Buffer.from(r.KECCAK256_RLP_ARRAY_S,"hex"),r.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.KECCAK256_RLP=n.Buffer.from(r.KECCAK256_RLP_S,"hex"),r.RLP_EMPTY_STRING=n.Buffer.from([128]),r.MAX_WITHDRAWALS_PER_PAYLOAD=16}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/constants.js"}],[1596,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.compactBytesToNibbles=r.bytesToNibbles=r.nibblesToCompactBytes=r.nibblesToBytes=r.hasTerminator=void 0;r.hasTerminator=e=>e.length>0&&16===e[e.length-1];r.nibblesToBytes=(e,t)=>{for(let r=0,n=0;n<e.length;r+=1,n+=2)t[r]=e[n]<<4|e[n+1]};r.nibblesToCompactBytes=e=>{let t=0;(0,r.hasTerminator)(e)&&(t=1,e=e.subarray(0,e.length-1));const n=new Uint8Array(e.length/2+1);return n[0]=t<<5,1&~e.length||(n[0]|=16,n[0]|=e[0],e=e.subarray(1)),(0,r.nibblesToBytes)(e,n.subarray(1)),n};r.bytesToNibbles=e=>{const t=2*e.length+1,r=new Uint8Array(t);for(let t=0;t<e.length;t++){const n=e[t];r[2*t]=n/16,r[2*t+1]=n%16}return r[t-1]=16,r};r.compactBytesToNibbles=e=>{if(0===e.length)return e;let t=(0,r.bytesToNibbles)(e);t[0]<2&&(t=t.subarray(0,t.length-1));const n=2-(1&t[0]);return t.subarray(n)}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/encoding.js"}],[1597,{"../../../../../../is-buffer/index.js":4673,"./internal":1599},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.assertIsString=r.assertIsArray=r.assertIsBuffer=r.assertIsHexString=void 0;const n=e("./internal");r.assertIsHexString=function(e){if(!(0,n.isHexString)(e)){throw new Error(`This method only supports 0x-prefixed hex strings but input was: ${e}`)}};r.assertIsBuffer=function(e){if(!t.isBuffer(e)){throw new Error(`This method only supports Buffer but input was: ${e}`)}};r.assertIsArray=function(e){if(!Array.isArray(e)){throw new Error(`This method only supports number arrays but input was: ${e}`)}};r.assertIsString=function(e){if("string"!=typeof e){throw new Error(`This method only supports strings but input was: ${e}`)}}}).call(this)}).call(this,{isBuffer:e("../../../../../../is-buffer/index.js")})}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/helpers.js"}],[1598,{"./account":1591,"./address":1592,"./asyncEventEmitter":1593,"./bytes":1594,"./constants":1595,"./encoding":1596,"./internal":1599,"./lock":1600,"./provider":1601,"./signature":1602,"./types":1603,"./units":1604,"./withdrawal":1605},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.toAscii=r.stripHexPrefix=r.padToEven=r.isHexString=r.isHexPrefixed=r.getKeys=r.getBinarySize=r.fromUtf8=r.fromAscii=r.arrayContainsArray=void 0,i(e("./constants"),r),i(e("./units"),r),i(e("./account"),r),i(e("./address"),r),i(e("./withdrawal"),r),i(e("./signature"),r),i(e("./bytes"),r),i(e("./types"),r),i(e("./encoding"),r),i(e("./asyncEventEmitter"),r);var s=e("./internal");Object.defineProperty(r,"arrayContainsArray",{enumerable:!0,get:function(){return s.arrayContainsArray}}),Object.defineProperty(r,"fromAscii",{enumerable:!0,get:function(){return s.fromAscii}}),Object.defineProperty(r,"fromUtf8",{enumerable:!0,get:function(){return s.fromUtf8}}),Object.defineProperty(r,"getBinarySize",{enumerable:!0,get:function(){return s.getBinarySize}}),Object.defineProperty(r,"getKeys",{enumerable:!0,get:function(){return s.getKeys}}),Object.defineProperty(r,"isHexPrefixed",{enumerable:!0,get:function(){return s.isHexPrefixed}}),Object.defineProperty(r,"isHexString",{enumerable:!0,get:function(){return s.isHexString}}),Object.defineProperty(r,"padToEven",{enumerable:!0,get:function(){return s.padToEven}}),Object.defineProperty(r,"stripHexPrefix",{enumerable:!0,get:function(){return s.stripHexPrefix}}),Object.defineProperty(r,"toAscii",{enumerable:!0,get:function(){return s.toAscii}}),i(e("./lock"),r),i(e("./provider"),r)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/index.js"}],[1599,{buffer:4079},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){function t(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return"0"===e[0]&&"x"===e[1]}Object.defineProperty(r,"__esModule",{value:!0}),r.isHexString=r.getKeys=r.fromAscii=r.fromUtf8=r.toAscii=r.arrayContainsArray=r.getBinarySize=r.padToEven=r.stripHexPrefix=r.isHexPrefixed=void 0,r.isHexPrefixed=t;function n(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}r.stripHexPrefix=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return t(e)?e.slice(2):e},r.padToEven=n,r.getBinarySize=function(t){if("string"!=typeof t)throw new Error("[getBinarySize] method requires input type 'string', received "+typeof t);return e.byteLength(t,"utf8")},r.arrayContainsArray=function(e,t,r){if(!0!==Array.isArray(e))throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(!0!==Array.isArray(t))throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[!0===r?"some":"every"]((t=>e.indexOf(t)>=0))},r.toAscii=function(e){let t="",r=0;const n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){const n=parseInt(e.substr(r,2),16);t+=String.fromCharCode(n)}return t},r.fromUtf8=function(t){return`0x${n(e.from(t,"utf8").toString("hex")).replace(/^0+|0+$/g,"")}`},r.fromAscii=function(e){let t="";for(let r=0;r<e.length;r++){const n=e.charCodeAt(r).toString(16);t+=n.length<2?`0${n}`:n}return`0x${t}`},r.getKeys=function(e,t,r){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got "+typeof e);if("string"!=typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got "+typeof e);const n=[];for(let i=0;i<e.length;i++){let s=e[i][t];if(!0!==r||s){if("string"!=typeof s)throw new Error("invalid abi - expected type 'string', received "+typeof s)}else s="";n.push(s)}return n},r.isHexString=function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&!(void 0!==t&&t>0&&e.length!==2+2*t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/internal.js"}],[16,{"../../../../shared/lib/trace":5796,"../../../../shared/modules/selectors":5823,"../../lib/transaction/hooks/delegation-7702-publish":192,"../../lib/transaction/metrics":193,"../../lib/transaction/smart-transactions":194,"../../lib/transaction/util":196,"@metamask/smart-transactions-controller/dist/types":2609,"@metamask/transaction-controller":2909},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TransactionControllerInit=void 0;var n=e("@metamask/transaction-controller"),i=e("@metamask/smart-transactions-controller/dist/types"),s=e("../../../../shared/modules/selectors"),o=e("../../lib/transaction/smart-transactions"),a=e("../../lib/transaction/util"),c=e("../../../../shared/lib/trace"),u=e("../../lib/transaction/metrics"),l=e("../../lib/transaction/hooks/delegation-7702-publish");function d(e,t){const r=f(e);return{isSmartTransaction:(0,s.getIsSmartTransaction)(r,t),featureFlags:(0,s.getFeatureFlagsByChainId)(r,t),isHardwareWalletAccount:(0,s.isHardwareWallet)(r)}}function f(e){return{metamask:e}}r.TransactionControllerInit=e=>{const{controllerMessenger:t,initMessenger:r,getFlatState:p,getGlobalChainId:h,getPermittedAccounts:m,getTransactionMetricsRequest:g,updateAccountBalanceForTransactionNetwork:y,persistedState:b}=e,{gasFeeController:w,keyringController:E,networkController:T,onboardingController:k,preferencesController:v,smartTransactionsController:_}=function(e){return{gasFeeController:()=>e.getController("GasFeeController"),keyringController:()=>e.getController("KeyringController"),networkController:()=>e.getController("NetworkController"),onboardingController:()=>e.getController("OnboardingController"),preferencesController:()=>e.getController("PreferencesController"),smartTransactionsController:()=>e.getController("SmartTransactionsController"),transactionUpdateController:()=>e.getController("TransactionUpdateController"),institutionalSnapController:()=>e.getController("InstitutionalSnapController")}}(e),A=new n.TransactionController({getCurrentNetworkEIP1559Compatibility:()=>r.call("NetworkController:getEIP1559Compatibility"),getCurrentAccountEIP1559Compatibility:async()=>!0,getExternalPendingTransactions:e=>function(e,t){return e.getTransactions({addressFrom:t,status:i.SmartTransactionStatuses.PENDING})}(_(),e),getGasFeeEstimates:(...e)=>w().fetchGasFeeEstimates(...e),getNetworkClientRegistry:(...e)=>T().getNetworkClientRegistry(...e),getNetworkState:()=>T().state,getPermittedAccounts:m,getSavedGasFees:()=>{const e=h();return v().state.advancedGasFee[e]},incomingTransactions:{etherscanApiKeysByChainId:{[n.CHAIN_IDS.MAINNET]:"HF4132KPUFK3EA3AUYSAVWB9D1QSTIZWHJ",[n.CHAIN_IDS.SEPOLIA]:"HF4132KPUFK3EA3AUYSAVWB9D1QSTIZWHJ"},includeTokenTransfers:!1,isEnabled:()=>v().state.useExternalServices&&k().state.completedOnboarding,queryEntireHistory:!1,updateTransactions:!1},isAutomaticGasFeeUpdateEnabled:()=>!0,isFirstTimeInteractionEnabled:()=>v().state.securityAlertsEnabled,isSimulationEnabled:()=>v().state.useTransactionSimulations,messenger:t,pendingTransactions:{isResubmitEnabled:()=>{const e=f(p());return!((0,s.getSmartTransactionsPreferenceEnabled)(e)&&(0,s.getChainSupportsSmartTransactions)(e))}},publicKeyEIP7702:"0x3c7a1cCCe462e96D186B8ca9a1BCB2010C3dABa3",testGasFeeFlows:Boolean(!1),trace:c.trace,hooks:{beforePublish:e=>r.call("InstitutionalSnapController:publishHook",e),beforeCheckPendingTransactions:e=>r.call("InstitutionalSnapController:beforeCheckPendingTransactionHook",e),publish:(e,t)=>async function({flatState:e,initMessenger:t,signedTx:r,smartTransactionsController:n,transactionController:i,transactionMeta:s}){const a=await async function(e,t,r,n,i,s){const{isSmartTransaction:a,featureFlags:c,isHardwareWalletAccount:u}=d(n,i.chainId);if(!a)return{transactionHash:undefined};return await(0,o.submitSmartTransactionHook)({transactionMeta:i,signedTransactionInHex:s,transactionController:e,smartTransactionsController:t,controllerMessenger:r,isSmartTransaction:a,isHardwareWallet:u,featureFlags:c})}(i,n,t,e,s,r);if(null!=a&&a.transactionHash)return a;const c=new l.Delegation7702PublishHook({isAtomicBatchSupported:i.isAtomicBatchSupported.bind(i),messenger:t}).getHook();return await c(s,r)}({flatState:p(),initMessenger:r,signedTx:t,smartTransactionsController:_(),transactionController:A,transactionMeta:e}),publishBatch:async e=>await function({transactionController:e,smartTransactionsController:t,hookControllerMessenger:r,flatState:n,transactions:i}){const s=i[i.length-1],c=(0,a.getTransactionById)(s.id??"",e);if(!c)throw new Error(`publishBatchSmartTransactionHook: Could not find transaction with id ${s.id}`);const{isSmartTransaction:u,featureFlags:l,isHardwareWalletAccount:f}=d(n,c.chainId);if(!u)throw new Error("publishBatchSmartTransactionHook: Smart Transaction is required for batch submissions");return(0,o.submitBatchSmartTransactionHook)({transactions:i,transactionController:e,smartTransactionsController:t,controllerMessenger:r,isSmartTransaction:u,isHardwareWallet:f,featureFlags:l,transactionMeta:c})}({transactionController:A,smartTransactionsController:_(),hookControllerMessenger:r,flatState:p(),transactions:e.transactions})},sign:(...e)=>E().signTransaction(...e),state:b.TransactionController});!function(e,t,r){const n=t();e.subscribe("TransactionController:unapprovedTransactionAdded",r),e.subscribe("TransactionController:transactionConfirmed",r),e.subscribe("TransactionController:postTransactionBalanceUpdated",u.handlePostTransactionBalanceUpdate.bind(null,n)),e.subscribe("TransactionController:unapprovedTransactionAdded",(e=>(0,u.handleTransactionAdded)(n,{transactionMeta:e}))),e.subscribe("TransactionController:transactionApproved",u.handleTransactionApproved.bind(null,n)),e.subscribe("TransactionController:transactionDropped",u.handleTransactionDropped.bind(null,n)),e.subscribe("TransactionController:transactionConfirmed",u.handleTransactionConfirmed.bind(null,n)),e.subscribe("TransactionController:transactionFailed",u.handleTransactionFailed.bind(null,n)),e.subscribe("TransactionController:transactionNewSwap",(({transactionMeta:t})=>e.call("SwapsController:setTradeTxId",t.id))),e.subscribe("TransactionController:transactionNewSwapApproval",(({transactionMeta:t})=>e.call("SwapsController:setApproveTxId",t.id))),e.subscribe("TransactionController:transactionRejected",u.handleTransactionRejected.bind(null,n)),e.subscribe("TransactionController:transactionSubmitted",u.handleTransactionSubmitted.bind(null,n))}(r,g,y);const S=function(e){return{abortTransactionSigning:e.abortTransactionSigning.bind(e),getLayer1GasFee:e.getLayer1GasFee.bind(e),getTransactions:e.getTransactions.bind(e),isAtomicBatchSupported:e.isAtomicBatchSupported.bind(e),updateAtomicBatchData:e.updateAtomicBatchData.bind(e),updateBatchTransactions:e.updateBatchTransactions.bind(e),updateEditableParams:e.updateEditableParams.bind(e),updatePreviousGasParams:e.updatePreviousGasParams.bind(e),updateSelectedGasFeeToken:e.updateSelectedGasFeeToken.bind(e),updateTransactionGasFees:e.updateTransactionGasFees.bind(e),updateTransactionSendFlowHistory:e.updateTransactionSendFlowHistory.bind(e)}}(A);return{controller:A,api:S,memStateKey:"TxController"}}}}},{package:"$root$",file:"app/scripts/controller-init/confirmations/transaction-controller-init.ts"}],[160,{"../../../../../shared/constants/permissions":5756,"../../../controllers/permissions":83,"@metamask/chain-agnostic-permission":1447,"@metamask/permission-controller":2328},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPermissionsHandler=void 0;var n=e("@metamask/permission-controller"),i=e("@metamask/chain-agnostic-permission"),s=e("../../../controllers/permissions"),o=e("../../../../../shared/constants/permissions");r.getPermissionsHandler={methodNames:[n.MethodNames.GetPermissions],implementation:async function(e,t,r,n,{getPermissionsForOrigin:a,getAccounts:c}){var u;const l={...a()},d=l[i.Caip25EndowmentPermissionName],f=null==d||null===(u=d.caveats)||void 0===u||null===(u=u.find((({type:e})=>e===i.Caip25CaveatType)))||void 0===u?void 0:u.value;if(delete l[i.Caip25EndowmentPermissionName],f){const e=c({ignoreLock:!0});e.length>0&&(l[o.RestrictedMethods.eth_accounts]={...d,parentCapability:o.RestrictedMethods.eth_accounts,caveats:[{type:o.CaveatTypes.restrictReturnedAccounts,value:e}]});const t=(0,i.getPermittedEthChainIds)(f);t.length>0&&(l[s.PermissionNames.permittedChains]={...d,parentCapability:s.PermissionNames.permittedChains,caveats:[{type:o.CaveatTypes.restrictNetworkSwitching,value:t}]})}return t.result=Object.values(l),n()},hookNames:{getPermissionsForOrigin:!0,getAccounts:!0}}}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/wallet-getPermissions.ts"}],[1600,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Lock=void 0;r.Lock=class{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise((e=>this.promiseResolverQueue.push(e)))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(1===this.permits&&this.promiseResolverQueue.length>0){this.permits-=1;const e=this.promiseResolverQueue.shift();e&&e(!0)}}}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/lock.js"}],[1601,{"micro-ftch":4927},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getProvider=r.fetchFromProvider=void 0;const n=e("micro-ftch");r.fetchFromProvider=async(e,t)=>(await(0,n.default)(e,{headers:{"content-type":"application/json"},type:"json",data:{method:t.method,params:t.params,jsonrpc:"2.0",id:1}})).result;r.getProvider=e=>{if("string"==typeof e)return e;if(e?.connection?.url!==undefined)return e.connection.url;throw new Error("Must provide valid provider URL or Web3Provider")}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/provider.js"}],[1602,{"./bytes":1594,"./constants":1595,"./helpers":1597,buffer:4079,"ethereum-cryptography/keccak":4312,"ethereum-cryptography/secp256k1":4333},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.hashPersonalMessage=r.isValidSignature=r.fromRpcSig=r.toCompactSig=r.toRpcSig=r.ecrecover=r.ecsign=void 0;const n=e("ethereum-cryptography/keccak"),i=e("ethereum-cryptography/secp256k1"),s=e("./bytes"),o=e("./constants"),a=e("./helpers");function c(e,t){return e===BigInt(0)||e===BigInt(1)?e:t===undefined?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}function u(e){return e===BigInt(0)||e===BigInt(1)}r.ecsign=function(e,r,n){const s=i.secp256k1.sign(e,r),o=s.toCompactRawBytes();return{r:t.from(o.slice(0,32)),s:t.from(o.slice(32,64)),v:n===undefined?BigInt(s.recovery+27):BigInt(s.recovery+35)+BigInt(n)*BigInt(2)}};r.ecrecover=function(e,r,n,o,a){const l=t.concat([(0,s.setLengthLeft)(n,32),(0,s.setLengthLeft)(o,32)],64),d=c(r,a);if(!u(d))throw new Error("Invalid signature v value");const f=i.secp256k1.Signature.fromCompact(l).addRecoveryBit(Number(d)).recoverPublicKey(e);return t.from(f.toRawBytes(!1).slice(1))};r.toRpcSig=function(e,r,n,i){if(!u(c(e,i)))throw new Error("Invalid signature v value");return(0,s.bufferToHex)(t.concat([(0,s.setLengthLeft)(r,32),(0,s.setLengthLeft)(n,32),(0,s.toBuffer)(e)]))};r.toCompactSig=function(e,r,n,i){if(!u(c(e,i)))throw new Error("Invalid signature v value");let o=n;return(e>BigInt(28)&&e%BigInt(2)===BigInt(1)||e===BigInt(1)||e===BigInt(28))&&(o=t.from(n),o[0]|=128),(0,s.bufferToHex)(t.concat([(0,s.setLengthLeft)(r,32),(0,s.setLengthLeft)(o,32)]))};r.fromRpcSig=function(e){const t=(0,s.toBuffer)(e);let r,n,i;if(t.length>=65)r=t.slice(0,32),n=t.slice(32,64),i=(0,s.bufferToBigInt)(t.slice(64));else{if(64!==t.length)throw new Error("Invalid signature length");r=t.slice(0,32),n=t.slice(32,64),i=BigInt((0,s.bufferToInt)(t.slice(32,33))>>7),n[0]&=127}return i<27&&(i+=BigInt(27)),{v:i,r:r,s:n}};r.isValidSignature=function(e,t,r,n=!0,i){if(32!==t.length||32!==r.length)return!1;if(!u(c(e,i)))return!1;const a=(0,s.bufferToBigInt)(t),l=(0,s.bufferToBigInt)(r);return!(a===BigInt(0)||a>=o.SECP256K1_ORDER||l===BigInt(0)||l>=o.SECP256K1_ORDER)&&!(n&&l>=o.SECP256K1_ORDER_DIV_2)};r.hashPersonalMessage=function(e){(0,a.assertIsBuffer)(e);const r=t.from(`Ethereum Signed Message:\n${e.length}`,"utf-8");return t.from((0,n.keccak256)(t.concat([r,e])))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/signature.js"}],[1603,{"./bytes":1594,"./internal":1599},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toType=r.TypeOutput=void 0;const n=e("./bytes"),i=e("./internal");var s;!function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Buffer=2]="Buffer",e[e.PrefixedHexString=3]="PrefixedHexString"}(s=r.TypeOutput||(r.TypeOutput={})),r.toType=function(e,t){if(null===e)return null;if(e===undefined)return undefined;if("string"==typeof e&&!(0,i.isHexString)(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const r=(0,n.toBuffer)(e);switch(t){case s.Buffer:return r;case s.BigInt:return(0,n.bufferToBigInt)(r);case s.Number:{const e=(0,n.bufferToBigInt)(r);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case s.PrefixedHexString:return(0,n.bufferToHex)(r);default:throw new Error("unknown outputType")}}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/types.js"}],[1604,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.GWEI_TO_WEI=void 0,r.GWEI_TO_WEI=BigInt(1e9)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/units.js"}],[1605,{"./address":1592,"./bytes":1594,"./types":1603,buffer:4079},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Withdrawal=void 0;const n=e("./address"),i=e("./bytes"),s=e("./types");class o{constructor(e,t,r,n){this.index=e,this.validatorIndex=t,this.address=r,this.amount=n}static fromWithdrawalData(e){const{index:t,validatorIndex:r,address:i,amount:a}=e,c=(0,s.toType)(t,s.TypeOutput.BigInt),u=(0,s.toType)(r,s.TypeOutput.BigInt),l=new n.Address((0,s.toType)(i,s.TypeOutput.Buffer)),d=(0,s.toType)(a,s.TypeOutput.BigInt);return new o(c,u,l,d)}static fromValuesArray(e){if(4!==e.length)throw Error(`Invalid withdrawalArray length expected=4 actual=${e.length}`);const[t,r,n,i]=e;return o.fromWithdrawalData({index:t,validatorIndex:r,address:n,amount:i})}static toBufferArray(e){const{index:r,validatorIndex:i,address:o,amount:a}=e,c=(0,s.toType)(r,s.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,s.toType)(r,s.TypeOutput.Buffer),u=(0,s.toType)(i,s.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,s.toType)(i,s.TypeOutput.Buffer);let l;l=o instanceof n.Address?o.buf:(0,s.toType)(o,s.TypeOutput.Buffer);return[c,u,l,(0,s.toType)(a,s.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,s.toType)(a,s.TypeOutput.Buffer)]}raw(){return o.toBufferArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.buf,amount:this.amount}}toJSON(){return{index:(0,i.bigIntToHex)(this.index),validatorIndex:(0,i.bigIntToHex)(this.validatorIndex),address:"0x"+this.address.buf.toString("hex"),amount:(0,i.bigIntToHex)(this.amount)}}}r.Withdrawal=o}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@ethereumjs/util/dist/withdrawal.js"}],[1606,{"./errors":1607,"./packer":1610,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.decodeSingle=r.decode=r.encodePacked=r.encodeSingle=r.encode=void 0;const n=e("@metamask/utils"),i=e("./errors"),s=e("./packer");r.encode=(e,t,r,n)=>{try{return(0,s.pack)({types:e,values:t,packed:r,tight:n})}catch(e){if(e instanceof i.ParserError)throw new i.ParserError(`Unable to encode value: ${e.message}`,e);throw new i.ParserError(`An unexpected error occurred: ${(0,i.getErrorMessage)(e)}`,e)}};r.encodeSingle=(e,t)=>(0,r.encode)([e],[t]);r.encodePacked=(e,t,n)=>(0,r.encode)(e,t,!0,n);r.decode=(e,t)=>{const r=(0,n.createBytes)(t);try{return(0,s.unpack)(e,r)}catch(e){if(e instanceof i.ParserError)throw new i.ParserError(`Unable to decode value: ${e.message}`,e);throw new i.ParserError(`An unexpected error occurred: ${(0,i.getErrorMessage)(e)}`,e)}};r.decodeSingle=(e,t)=>{const s=(0,r.decode)([e],t);return(0,n.assert)(1===s.length,new i.ParserError("Decoded value array has unexpected length.")),s[0]}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/abi.js"}],[1607,{"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ParserError=r.getErrorStack=r.getErrorMessage=void 0;const n=e("@metamask/utils");r.getErrorMessage=e=>"string"==typeof e?e:e instanceof Error||(0,n.isObject)(e)&&(0,n.hasProperty)(e,"message")&&"string"==typeof e.message?e.message:"Unknown error.";r.getErrorStack=e=>e instanceof Error?e.stack:undefined;class i extends Error{constructor(e,t){super(e),this.name="ParserError";const n=(0,r.getErrorStack)(t);n&&(this.stack=n)}}r.ParserError=i}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/errors.js"}],[1608,{"./abi":1606,"./errors":1607,"./types":1623},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./abi"),r),i(e("./errors"),r),i(e("./types"),r)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/index.js"}],[1609,{"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.iterate=void 0;const n=e("@metamask/utils");r.iterate=function*(e,t=32){for(let r=0;r<e.length;r+=t){const i=e=>{(0,n.assert)(e>=0,"Cannot skip a negative number of bytes."),(0,n.assert)(e%t==0,"Length must be a multiple of the size."),r+=e},s=e.subarray(r);yield{skip:i,value:s}}return{skip:()=>undefined,value:new Uint8Array}}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/iterator.js"}],[161,{"../../../../../shared/constants/permissions":5756,"../../../controllers/permissions":83,"@metamask/chain-agnostic-permission":1447,"@metamask/controller-utils":1471,"@metamask/permission-controller":2328,lodash:4871},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.requestPermissionsHandler=void 0;var n=e("lodash"),i=e("@metamask/controller-utils"),s=e("@metamask/permission-controller"),o=e("@metamask/chain-agnostic-permission"),a=e("../../../../../shared/constants/permissions"),c=e("../../../controllers/permissions");r.requestPermissionsHandler={methodNames:[s.MethodNames.RequestPermissions],implementation:async function(e,t,r,u,{getAccounts:l,requestPermissionsForOrigin:d,getCaip25PermissionFromLegacyPermissionsForOrigin:f}){const{params:p}=e;if(!Array.isArray(p)||!(0,i.isPlainObject)(p[0]))return u((0,s.invalidParams)({data:{request:e}}));let[h]=p;delete h[o.Caip25EndowmentPermissionName];const m=(0,n.pick)(h,[a.RestrictedMethods.eth_accounts,c.PermissionNames.permittedChains]);delete h[a.RestrictedMethods.eth_accounts],delete h[c.PermissionNames.permittedChains];const g=Object.keys(m).length>0;if(g){const e=f(m);h={...h,...e}}let y={};const[b]=await d(h);if(y={...b},g){var w;const e=y[o.Caip25EndowmentPermissionName];if(!e)throw new Error(`could not find ${o.Caip25EndowmentPermissionName} permission.`);const t=null===(w=e.caveats)||void 0===w||null===(w=w.find((({type:e})=>e===o.Caip25CaveatType)))||void 0===w?void 0:w.value;if(!t)throw new Error(`could not find ${o.Caip25CaveatType} in granted ${o.Caip25EndowmentPermissionName} permission.`);delete y[o.Caip25EndowmentPermissionName];const r=l();y[a.RestrictedMethods.eth_accounts]={...e,parentCapability:a.RestrictedMethods.eth_accounts,caveats:[{type:a.CaveatTypes.restrictReturnedAccounts,value:r}]};const n=(0,o.getPermittedEthChainIds)(t);n.length>0&&(y[c.PermissionNames.permittedChains]={...e,parentCapability:c.PermissionNames.permittedChains,caveats:[{type:a.CaveatTypes.restrictNetworkSwitching,value:n}]})}return t.result=Object.values(y).filter((e=>e!==undefined)),u()},hookNames:{getAccounts:!0,requestPermissionsForOrigin:!0,getCaip25PermissionFromLegacyPermissionsForOrigin:!0}}}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/wallet-requestPermissions.ts"}],[1610,{"./errors":1607,"./iterator":1609,"./parsers":1617,"./utils":1625,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.unpack=r.pack=r.isDynamicParser=r.getParser=void 0;const n=e("@metamask/utils"),i=e("./errors"),s=e("./iterator"),o=e("./parsers"),a=e("./utils");r.getParser=e=>{const t={address:o.address,array:o.array,bool:o.bool,bytes:o.bytes,fixedBytes:o.fixedBytes,function:o.fn,number:o.number,string:o.string,tuple:o.tuple},r=t[e];if(r)return r;const n=Object.values(t).find((t=>t.isType(e)));if(n)return n;throw new i.ParserError(`The type "${e}" is not supported.`)};r.isDynamicParser=(e,t)=>{const{isDynamic:r}=e;return"function"==typeof r?r(t):r};r.pack=({types:e,values:t,packed:s=!1,tight:o=!1,arrayPacked:c=!1,byteArray:u=new Uint8Array})=>{(0,n.assert)(e.length===t.length,new i.ParserError(`The number of types (${e.length}) does not match the number of values (${t.length}).`));const{staticBuffer:l,dynamicBuffer:d,pointers:f}=e.reduce((({staticBuffer:e,dynamicBuffer:i,pointers:a},u,l)=>{const d=(0,r.getParser)(u),f=t[l];if(s||c||!(0,r.isDynamicParser)(d,u))return{staticBuffer:d.encode({buffer:e,value:f,type:u,packed:s,tight:o}),dynamicBuffer:i,pointers:a};return{staticBuffer:(0,n.concatBytes)([e,new Uint8Array(32)]),dynamicBuffer:d.encode({buffer:i,value:f,type:u,packed:s,tight:o}),pointers:[...a,{position:e.length,pointer:i.length}]}}),{staticBuffer:new Uint8Array,dynamicBuffer:new Uint8Array,pointers:[]});(0,n.assert)(!s&&!c||0===d.length,new i.ParserError("Invalid pack state."));const p=l.length,h=f.reduce(((e,{pointer:t,position:r})=>{const i=(0,a.padStart)((0,n.numberToBytes)(p+t));return(0,a.set)(e,i,r)}),l);return(0,n.concatBytes)([u,h,d])};r.unpack=(e,t)=>{const o=(0,s.iterate)(t);return e.map((e=>{const{value:{value:s,skip:a},done:c}=o.next();(0,n.assert)(!c,new i.ParserError(`The encoded value is invalid for the provided types. Reached end of buffer while attempting to parse "${e}".`));const u=(0,r.getParser)(e);if((0,r.isDynamicParser)(u,e)){const r=(0,n.bytesToNumber)(s.subarray(0,32)),i=t.subarray(r);return u.decode({type:e,value:i,skip:a})}return u.decode({type:e,value:s,skip:a})}))}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/packer.js"}],[1611,{"../errors":1607,"../utils":1625,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.address=r.getAddress=void 0;const n=e("@metamask/utils"),i=e("../errors"),s=e("../utils");r.getAddress=e=>{const t=(0,n.createBytes)(e);return(0,n.assert)(t.length<=20,new i.ParserError(`Invalid address value. Expected address to be 20 bytes long, but received ${t.length} bytes.`)),(0,s.padStart)(t,20)},r.address={isDynamic:!1,isType:e=>"address"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:i}){const o=(0,r.getAddress)(t);if(i)return(0,n.concatBytes)([e,o]);const a=(0,s.padStart)(o);return(0,n.concatBytes)([e,a])},decode:({value:e})=>(0,n.add0x)((0,n.bytesToHex)(e.slice(12,32)))}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/parsers/address.js"}],[1612,{"../errors":1607,"../packer":1610,"../utils":1625,"./fixed-bytes":1615,"./tuple":1621,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.array=r.getTupleType=r.getArrayType=r.isArrayType=void 0;const n=e("@metamask/utils"),i=e("../errors"),s=e("../packer"),o=e("../utils"),a=e("./fixed-bytes"),c=e("./tuple"),u=/^(?<type>.*)\[(?<length>\d*?)\]$/u;r.isArrayType=e=>u.test(e);r.getArrayType=e=>{const t=e.match(u);return(0,n.assert)(t?.groups?.type,new i.ParserError(`Invalid array type. Expected an array type, but received "${e}".`)),[t.groups.type,t.groups.length?parseInt(t.groups.length,10):undefined]};r.getTupleType=(e,t)=>`(${new Array(t).fill(e).join(",")})`,r.array={isDynamic(e){const[t,n]=(0,r.getArrayType)(e);return n===undefined||(0,s.isDynamicParser)((0,s.getParser)(t),t)},isType:e=>(0,r.isArrayType)(e),getByteLength(e){(0,n.assert)((0,r.isArrayType)(e),new i.ParserError(`Expected an array type, but received "${e}".`));const[t,o]=(0,r.getArrayType)(e);return(0,s.isDynamicParser)(this,e)||o===undefined?32:c.tuple.getByteLength((0,r.getTupleType)(t,o))},encode({type:e,buffer:t,value:u,packed:l,tight:d}){const[f,p]=(0,r.getArrayType)(e);if((0,n.assert)(!l||!(0,r.isArrayType)(f),new i.ParserError("Cannot pack nested arrays.")),l&&(0,s.isDynamicParser)((0,s.getParser)(f),f))return(0,s.pack)({types:new Array(u.length).fill(f),values:u,byteArray:t,packed:l,arrayPacked:!0,tight:d});if(p)return(0,n.assert)(p===u.length,new i.ParserError(`Array length does not match type length. Expected a length of ${p}, but received ${u.length}.`)),c.tuple.encode({type:(0,r.getTupleType)(f,p),buffer:t,value:u,packed:a.fixedBytes.isType(f)&&d,tight:d});if(l)return(0,s.pack)({types:new Array(u.length).fill(f),values:u,byteArray:t,packed:a.fixedBytes.isType(f)&&d,arrayPacked:!0,tight:d});const h=(0,o.padStart)((0,n.numberToBytes)(u.length));return(0,s.pack)({types:new Array(u.length).fill(f),values:u,byteArray:(0,n.concatBytes)([t,h]),packed:l,tight:d})},decode({type:e,value:t,...o}){const[a,u]=(0,r.getArrayType)(e);if(u){const e=c.tuple.decode({type:(0,r.getTupleType)(a,u),value:t,...o});return(0,n.assert)(e.length===u,new i.ParserError(`Array length does not match type length. Expected a length of ${u}, but received ${e.length}.`)),e}const l=(0,n.bytesToNumber)(t.subarray(0,32));return(0,s.unpack)(new Array(l).fill(a),t.subarray(32))}}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/parsers/array.js"}],[1613,{"../errors":1607,"./number":1618,"@metamask/superstruct":2875,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.bool=r.getBooleanValue=void 0;const n=e("@metamask/superstruct"),i=e("@metamask/utils"),s=e("../errors"),o=e("./number"),a=(0,n.coerce)((0,n.boolean)(),(0,n.union)([(0,n.literal)("true"),(0,n.literal)("false")]),(e=>"true"===e));r.getBooleanValue=e=>{try{return(0,n.create)(e,a)?BigInt(1):BigInt(0)}catch{throw new s.ParserError(`Invalid boolean value. Expected a boolean literal, or the string "true" or "false", but received "${e}".`)}},r.bool={isDynamic:!1,isType:e=>"bool"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:n,tight:s}){const a=(0,r.getBooleanValue)(t);return n?(0,i.concatBytes)([e,(0,i.bigIntToBytes)(a)]):o.number.encode({type:"uint256",buffer:e,value:a,packed:n,tight:s})},decode:e=>o.number.decode({...e,type:"uint256"})===BigInt(1)}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/parsers/bool.js"}],[1614,{"../utils":1625,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.bytes=void 0;const n=e("@metamask/utils"),i=e("../utils");r.bytes={isDynamic:!0,isType:e=>"bytes"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:r}){const s=(0,n.createBytes)(t);if(r)return(0,n.concatBytes)([e,s]);const o=32*Math.ceil(s.byteLength/32);return(0,n.concatBytes)([e,(0,i.padStart)((0,n.numberToBytes)(s.byteLength)),(0,i.padEnd)(s,o)])},decode({value:e}){const t=e.subarray(0,32),r=(0,n.bytesToNumber)(t);return e.slice(32,32+r)}}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/parsers/bytes.js"}],[1615,{"../errors":1607,"../utils":1625,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.fixedBytes=r.getByteLength=void 0;const n=e("@metamask/utils"),i=e("../errors"),s=e("../utils"),o=/^bytes([0-9]{1,2})$/u;r.getByteLength=e=>{const t=e.match(o)?.[1];(0,n.assert)(t,`Invalid byte length. Expected a number between 1 and 32, but received "${e}".`);const r=Number(t);return(0,n.assert)(r>0&&r<=32,new i.ParserError(`Invalid byte length. Expected a number between 1 and 32, but received "${e}".`)),r},r.fixedBytes={isDynamic:!1,isType:e=>o.test(e),getByteLength:()=>32,encode({type:e,buffer:t,value:o,packed:a}){const c=(0,r.getByteLength)(e),u=(0,n.createBytes)(o);return(0,n.assert)(u.length<=c,new i.ParserError(`Expected a value of length ${c}, but received a value of length ${u.length}.`)),a?(0,n.concatBytes)([t,(0,s.padEnd)(u,c)]):(0,n.concatBytes)([t,(0,s.padEnd)(u)])},decode({type:e,value:t}){const n=(0,r.getByteLength)(e);return t.slice(0,n)}}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/parsers/fixed-bytes.js"}],[1616,{"../errors":1607,"./fixed-bytes":1615,"@metamask/superstruct":2875,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.fn=r.getFunction=void 0;const n=e("@metamask/superstruct"),i=e("@metamask/utils"),s=e("../errors"),o=e("./fixed-bytes"),a=(0,n.coerce)((0,n.object)({address:i.StrictHexStruct,selector:i.StrictHexStruct}),(0,n.union)([i.StrictHexStruct,(0,n.instance)(Uint8Array)]),(e=>{const t=(0,i.createBytes)(e);return(0,i.assert)(24===t.length,new s.ParserError(`Invalid Solidity function. Expected function to be 24 bytes long, but received ${t.length} bytes.`)),{address:(0,i.bytesToHex)(t.subarray(0,20)),selector:(0,i.bytesToHex)(t.subarray(20,24))}}));r.getFunction=e=>{const t=(0,n.create)(e,a);return(0,i.concatBytes)([(0,i.hexToBytes)(t.address),(0,i.hexToBytes)(t.selector)])},r.fn={isDynamic:!1,isType:e=>"function"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:n,tight:i}){const s=(0,r.getFunction)(t);return o.fixedBytes.encode({type:"bytes24",buffer:e,value:s,packed:n,tight:i})},decode:({value:e})=>({address:(0,i.bytesToHex)(e.slice(0,20)),selector:(0,i.bytesToHex)(e.slice(20,24))})}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/parsers/function.js"}],[1617,{"./address":1611,"./array":1612,"./bool":1613,"./bytes":1614,"./fixed-bytes":1615,"./function":1616,"./number":1618,"./parser":1619,"./string":1620,"./tuple":1621},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./address"),r),i(e("./array"),r),i(e("./bool"),r),i(e("./bytes"),r),i(e("./fixed-bytes"),r),i(e("./function"),r),i(e("./number"),r),i(e("./parser"),r),i(e("./string"),r),i(e("./tuple"),r)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/parsers/index.js"}],[1618,{"../errors":1607,"../utils":1625,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.number=r.getBigInt=r.assertNumberLength=r.getLength=r.isSigned=void 0;const n=e("@metamask/utils"),i=e("../errors"),s=e("../utils"),o=/^u?int(?<length>[0-9]*)?$/u;r.isSigned=e=>!e.startsWith("u");r.getLength=e=>{if("int"===e||"uint"===e)return 256;const t=e.match(o);(0,n.assert)(t?.groups?.length,new i.ParserError(`Invalid number type. Expected a number type, but received "${e}".`));const r=parseInt(t.groups.length,10);return(0,n.assert)(r>=8&&r<=256,new i.ParserError(`Invalid number length. Expected a number between 8 and 256, but received "${e}".`)),(0,n.assert)(r%8==0,new i.ParserError(`Invalid number length. Expected a multiple of 8, but received "${e}".`)),r};r.assertNumberLength=(e,t)=>{const s=(0,r.getLength)(t),o=BigInt(2)**BigInt(s-((0,r.isSigned)(t)?1:0))-BigInt(1);(0,r.isSigned)(t)?(0,n.assert)(e>=-(o+BigInt(1))&&e<=o,new i.ParserError(`Number "${e}" is out of range for type "${t}".`)):(0,n.assert)(e<=o,new i.ParserError(`Number "${e}" is out of range for type "${t}".`))};r.getBigInt=e=>{try{return(0,n.createBigInt)(e)}catch{throw new i.ParserError(`Invalid number. Expected a valid number value, but received "${e}".`)}},r.number={isDynamic:!1,isType:e=>o.test(e),getByteLength:()=>32,encode({type:e,buffer:t,value:i,packed:o}){const a=(0,r.getBigInt)(i);if((0,r.assertNumberLength)(a,e),(0,r.isSigned)(e)){if(o){const i=(0,r.getLength)(e)/8;return(0,n.concatBytes)([t,(0,n.signedBigIntToBytes)(a,i)])}return(0,n.concatBytes)([t,(0,s.padStart)((0,n.signedBigIntToBytes)(a,32))])}if(o){const i=(0,r.getLength)(e)/8;return(0,n.concatBytes)([t,(0,s.padStart)((0,n.bigIntToBytes)(a),i)])}return(0,n.concatBytes)([t,(0,s.padStart)((0,n.bigIntToBytes)(a))])},decode({type:e,value:t}){const i=t.subarray(0,32);if((0,r.isSigned)(e)){const t=(0,n.bytesToSignedBigInt)(i);return(0,r.assertNumberLength)(t,e),t}const s=(0,n.bytesToBigInt)(i);return(0,r.assertNumberLength)(s,e),s}}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/parsers/number.js"}],[1619,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/parsers/parser.js"}],[162,{"../../../../../shared/constants/permissions":5756,"../../../controllers/permissions":83,"@metamask/chain-agnostic-permission":1447,"@metamask/permission-controller":2328,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.revokePermissionsHandler=void 0;var n=e("@metamask/permission-controller"),i=e("@metamask/utils"),s=e("@metamask/chain-agnostic-permission"),o=e("../../../../../shared/constants/permissions"),a=e("../../../controllers/permissions");r.revokePermissionsHandler={methodNames:[n.MethodNames.RevokePermissions],implementation:function(e,t,r,c,{revokePermissionsForOrigin:u,rejectApprovalRequestsForOrigin:l}){const{params:d}=e,f=null==d?void 0:d[0];if(!f)return c((0,n.invalidParams)({data:{request:e}}));const p=Object.keys(f).filter((e=>e!==s.Caip25EndowmentPermissionName));if(!(0,i.isNonEmptyArray)(p))return c((0,n.invalidParams)({data:{request:e}}));const h=[o.RestrictedMethods.eth_accounts,a.PermissionNames.permittedChains],m=p.filter((e=>!h.includes(e)));m.length!==p.length&&m.push(s.Caip25EndowmentPermissionName);return u(m),l(),t.result=null,c()},hookNames:{revokePermissionsForOrigin:!0,rejectApprovalRequestsForOrigin:!0,updateCaveat:!0}}}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/wallet-revokePermissions.ts"}],[1620,{"./bytes":1614,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.string=void 0;const n=e("@metamask/utils"),i=e("./bytes");r.string={isDynamic:!0,isType:e=>"string"===e,getByteLength:()=>32,encode:({buffer:e,value:t,packed:r,tight:s})=>i.bytes.encode({type:"bytes",buffer:e,value:(0,n.stringToBytes)(t),packed:r,tight:s}),decode:e=>(0,n.bytesToString)(i.bytes.decode(e))}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/parsers/string.js"}],[1621,{"../errors":1607,"../packer":1610,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.tuple=r.getTupleElements=void 0;const n=e("@metamask/utils"),i=e("../errors"),s=e("../packer"),o=/^\((.+)\)$/u;r.getTupleElements=e=>{(0,n.assert)(e.startsWith("(")&&e.endsWith(")"),new i.ParserError(`Invalid tuple type. Expected tuple type, but received "${e}".`));const t=[];let r="",s=0;for(let n=1;n<e.length-1;n++){const i=e[n];","===i&&0===s?(t.push(r.trim()),r=""):(r+=i,"("===i?s+=1:")"===i&&(s-=1))}return r.trim()&&t.push(r.trim()),t},r.tuple={isDynamic:e=>(0,r.getTupleElements)(e).some((e=>{const t=(0,s.getParser)(e);return(0,s.isDynamicParser)(t,e)})),isType:e=>(e=>o.test(e))(e),getByteLength(e){if((0,s.isDynamicParser)(this,e))return 32;return(0,r.getTupleElements)(e).reduce(((e,t)=>e+(0,s.getParser)(t).getByteLength(t)),0)},encode({type:e,buffer:t,value:n,packed:i,tight:o}){const a=(0,r.getTupleElements)(e);return(0,s.pack)({types:a,values:n,byteArray:t,packed:i,tight:o})},decode({type:e,value:t,skip:n}){const i=(0,r.getTupleElements)(e);return n(this.getByteLength(e)-32),(0,s.unpack)(i,t)}}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/parsers/tuple.js"}],[1622,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/types/abi.js"}],[1623,{"./abi":1622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./abi"),r)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/types/index.js"}],[1624,{"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.padEnd=r.padStart=r.set=void 0;const n=e("@metamask/utils");r.set=(e,t,r)=>(0,n.concatBytes)([e.subarray(0,r),t,e.subarray(r+t.length)]);r.padStart=(e,t=32)=>{const r=new Uint8Array(Math.max(t-e.length,0)).fill(0);return(0,n.concatBytes)([r,e])};r.padEnd=(e,t=32)=>{const r=new Uint8Array(Math.max(t-e.length,0)).fill(0);return(0,n.concatBytes)([e,r])}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/utils/buffer.js"}],[1625,{"./buffer":1624},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./buffer"),r)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/abi-utils/dist/utils/index.js"}],[1626,{"./utils":1631,"@scure/base":1632,buffer:4079,tweetnacl:5638},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.getEncryptionPublicKey=r.decryptSafely=r.decrypt=r.encryptSafely=r.encrypt=void 0;const o=e("@scure/base"),a=s(e("tweetnacl")),c=e("./utils");function u({publicKey:e,data:t,version:r}){if((0,c.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,c.isNullish)(t))throw new Error("Missing data parameter");if((0,c.isNullish)(r))throw new Error("Missing version parameter");if("x25519-xsalsa20-poly1305"===r){if("string"!=typeof t)throw new Error("Message data must be given as a string");const r=a.box.keyPair();let n;try{n=o.base64.decode(e)}catch(e){throw new Error("Bad public key")}const i=o.utf8.decode(t),s=a.randomBytes(a.box.nonceLength),c=a.box(i,s,n,r.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:o.base64.encode(s),ephemPublicKey:o.base64.encode(r.publicKey),ciphertext:o.base64.encode(c)}}throw new Error("Encryption type/version not supported")}function l({encryptedData:e,privateKey:r}){if((0,c.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,c.isNullish)(r))throw new Error("Missing privateKey parameter");if("x25519-xsalsa20-poly1305"===e.version){const n=t.from(r,"hex"),i=a.box.keyPair.fromSecretKey(n).secretKey,s=o.base64.decode(e.nonce),c=o.base64.decode(e.ciphertext),u=o.base64.decode(e.ephemPublicKey),l=a.box.open(c,s,u,i);try{if(!l)throw new Error;const e=o.utf8.encode(l);if(!e)throw new Error;return e}catch(e){if(e&&"string"==typeof e.message&&e.message.length)throw new Error(`Decryption failed: ${e.message}`);throw new Error("Decryption failed.")}}throw new Error("Encryption type/version not supported.")}r.encrypt=u,r.encryptSafely=function({publicKey:e,data:r,version:n}){if((0,c.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,c.isNullish)(r))throw new Error("Missing data parameter");if((0,c.isNullish)(n))throw new Error("Missing version parameter");if("object"==typeof r&&r&&"toJSON"in r)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");const i={data:r,padding:""},s=t.byteLength(JSON.stringify(i),"utf-8")%2048;let o=0;return s>0&&(o=2048-s-16),i.padding="0".repeat(o),u({publicKey:e,data:JSON.stringify(i),version:n})},r.decrypt=l,r.decryptSafely=function({encryptedData:e,privateKey:t}){if((0,c.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,c.isNullish)(t))throw new Error("Missing privateKey parameter");return JSON.parse(l({encryptedData:e,privateKey:t})).data},r.getEncryptionPublicKey=function(e){const r=t.from(e,"hex"),n=a.box.keyPair.fromSecretKey(r).publicKey;return o.base64.encode(n)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/eth-sig-util/dist/encryption.js"}],[1627,{"./encryption":1626,"./personal-sign":1628,"./sign-eip7702-authorization":1629,"./sign-typed-data":1630,"./utils":1631},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.normalize=r.concatSig=void 0,i(e("./personal-sign"),r),i(e("./sign-typed-data"),r),i(e("./encryption"),r),i(e("./sign-eip7702-authorization"),r);var s=e("./utils");Object.defineProperty(r,"concatSig",{enumerable:!0,get:function(){return s.concatSig}}),Object.defineProperty(r,"normalize",{enumerable:!0,get:function(){return s.normalize}})}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/eth-sig-util/dist/index.js"}],[1628,{"./utils":1631,"@ethereumjs/util":1598},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.extractPublicKey=r.recoverPersonalSignature=r.personalSign=void 0;const n=e("@ethereumjs/util"),i=e("./utils");function s(e,t){const r=(0,n.hashPersonalMessage)((0,i.legacyToBuffer)(e));return(0,i.recoverPublicKey)(r,t)}r.personalSign=function({privateKey:e,data:t}){if((0,i.isNullish)(t))throw new Error("Missing data parameter");if((0,i.isNullish)(e))throw new Error("Missing privateKey parameter");const r=(0,i.legacyToBuffer)(t),s=(0,n.hashPersonalMessage)(r),o=(0,n.ecsign)(s,e);return(0,i.concatSig)((0,n.toBuffer)(o.v),o.r,o.s)},r.recoverPersonalSignature=function({data:e,signature:t}){if((0,i.isNullish)(e))throw new Error("Missing data parameter");if((0,i.isNullish)(t))throw new Error("Missing signature parameter");const r=s(e,t),o=(0,n.publicToAddress)(r);return(0,n.bufferToHex)(o)},r.extractPublicKey=function({data:e,signature:t}){if((0,i.isNullish)(e))throw new Error("Missing data parameter");if((0,i.isNullish)(t))throw new Error("Missing signature parameter");return`0x${s(e,t).toString("hex")}`}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/eth-sig-util/dist/personal-sign.js"}],[1629,{"./utils":1631,"@ethereumjs/rlp":448,"@ethereumjs/util":1598,"@metamask/utils":2967,buffer:4079,"ethereum-cryptography/keccak":4312},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.hashEIP7702Authorization=r.recoverEIP7702Authorization=r.signEIP7702Authorization=void 0;const n=e("@ethereumjs/rlp"),i=e("@ethereumjs/util"),s=e("@metamask/utils"),o=e("ethereum-cryptography/keccak"),a=e("./utils");function c(e){u(e);const r=(0,n.encode)(e),i=t.concat([t.from("05","hex"),r]);return t.from((0,o.keccak256)(i))}function u(e){if((0,a.isNullish)(e))throw new Error("Missing authorization parameter");const[t,r,n]=e;if((0,a.isNullish)(t))throw new Error("Missing chainId parameter");if((0,a.isNullish)(r))throw new Error("Missing contractAddress parameter");if((0,a.isNullish)(n))throw new Error("Missing nonce parameter")}r.signEIP7702Authorization=function({privateKey:e,authorization:t}){if(u(t),(0,a.isNullish)(e))throw new Error("Missing privateKey parameter");const r=c(t),{r:n,s:s,v:o}=(0,i.ecsign)(r,e),l=(0,i.toBuffer)(o);return(0,a.concatSig)(l,n,s)},r.recoverEIP7702Authorization=function({signature:e,authorization:t}){if(u(t),(0,a.isNullish)(e))throw new Error("Missing signature parameter");const r=c(t),n=(0,a.recoverPublicKey)(r,e),o=(0,i.publicToAddress)(n);return(0,s.bytesToHex)(o)},r.hashEIP7702Authorization=c}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/eth-sig-util/dist/sign-eip7702-authorization.js"}],[163,{"../../../../../shared/constants/app":5738,"@metamask/controller-utils":1471,"@metamask/rpc-errors":2526},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/controller-utils"),i=e("@metamask/rpc-errors"),s=e("../../../../../shared/constants/app");const o={methodNames:[s.MESSAGE_TYPE.WATCH_ASSET,s.MESSAGE_TYPE.WATCH_ASSET_LEGACY],implementation:async function(e,t,r,s,{handleWatchAssetRequest:o}){try{const{params:{options:r,type:a},origin:c,networkClientId:u}=e,{tokenId:l}=r;return[n.ERC721,n.ERC1155].includes(a)&&l!==undefined&&"string"!=typeof l?s(i.rpcErrors.invalidParams({message:`Expected parameter 'tokenId' to be type 'string'. Received type '${typeof l}'`})):(await o({asset:r,type:a,origin:c,networkClientId:u}),t.result=!0,s())}catch(e){return s(e)}},hookNames:{handleWatchAssetRequest:!0}};r.default=o}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/watch-asset.js"}],[1630,{"./utils":1631,"@ethereumjs/util":1598,"@metamask/abi-utils":1608,"@metamask/abi-utils/dist/parsers":1617,"@metamask/abi-utils/dist/utils":1625,"@metamask/utils":2967,"ethereum-cryptography/keccak":4312},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.recoverTypedSignature=r.signTypedData=r.typedSignatureHash=r.TypedDataUtils=r.TYPED_MESSAGE_SCHEMA=r.SignTypedDataVersion=void 0;const n=e("@ethereumjs/util"),i=e("@metamask/abi-utils"),s=e("@metamask/abi-utils/dist/parsers"),o=e("@metamask/abi-utils/dist/utils"),a=e("@metamask/utils"),c=e("ethereum-cryptography/keccak"),u=e("./utils");var l;function d(e,t){if(!Object.keys(l).includes(e))throw new Error(`Invalid version: '${e}'`);if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}function f(e,t){(0,a.assert)(null!==t,`Unable to encode value: Invalid number. Expected a valid number value, but received "${t}".`);const r=BigInt(t),n=(0,s.getLength)(e),i=BigInt(2)**BigInt(n)-BigInt(1);return(0,a.assert)(r>=-i&&r<=i,`Unable to encode value: Number "${t}" is out of range for type "${e}".`),r}function p(e){let t=BigInt(0);for(let r=0;r<e.length;r++){const n=BigInt(e.charCodeAt(r)-48);t*=BigInt(10),t+=n>=49?n-BigInt(49)+BigInt(10):n>=17?n-BigInt(17)+BigInt(10):n}return(0,o.padStart)((0,a.bigIntToBytes)(t),20)}function h(e,t,r,s,u){if(d(u,[l.V3,l.V4]),e[r]!==undefined)return["bytes32",u===l.V4&&null==s?"0x0000000000000000000000000000000000000000000000000000000000000000":(0,n.arrToBufArr)((0,c.keccak256)(m(r,s,e,u)))];if("function"===r)throw new Error('Unsupported or invalid type: "function"');if(s===undefined)throw new Error(`missing value for field ${t} of type ${r}`);if("address"===r){if("number"==typeof s)return["address",(0,o.padStart)((0,a.numberToBytes)(s),20)];if((0,a.isStrictHexString)(s))return["address",(0,a.add0x)(s)];if("string"==typeof s)return["address",p(s).subarray(0,20)]}if("bool"===r)return["bool",Boolean(s)];if("bytes"===r)return"number"==typeof s?s=(0,a.numberToBytes)(s):(0,a.isStrictHexString)(s)||"0x"===s?s=(0,a.hexToBytes)(s):"string"==typeof s&&(s=(0,a.stringToBytes)(s)),["bytes32",(0,n.arrToBufArr)((0,c.keccak256)(s))];if(r.startsWith("bytes")&&"bytes"!==r&&!r.includes("["))return"number"==typeof s?s<0?["bytes32",new Uint8Array(32)]:["bytes32",(0,a.bigIntToBytes)(BigInt(s))]:(0,a.isStrictHexString)(s)?["bytes32",(0,a.hexToBytes)(s)]:["bytes32",s];if(r.startsWith("int")&&!r.includes("[")){const e=f(r,s);return e>=BigInt(0)?["uint256",e]:["int256",e]}if("string"===r)return s="number"==typeof s?(0,a.numberToBytes)(s):(0,a.stringToBytes)(null!=s?s:""),["bytes32",(0,n.arrToBufArr)((0,c.keccak256)(s))];if(r.endsWith("]")){if(u===l.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");const o=r.slice(0,r.lastIndexOf("[")),a=s.map((r=>h(e,t,o,r,u)));return["bytes32",(0,n.arrToBufArr)((0,c.keccak256)((0,i.encode)(a.map((([e])=>e)),a.map((([,e])=>e)))))]}return[r,s]}function m(e,t,r,s){d(s,[l.V3,l.V4]);const o=["bytes32"],a=[w(e,r)];for(const n of r[e]){if(s===l.V3&&t[n.name]===undefined)continue;const[e,i]=h(r,n.name,n.type,t[n.name],s);o.push(e),a.push(i)}return(0,n.arrToBufArr)((0,i.encode)(o,a))}function g(e,t){let r="";const n=y(e,t);n.delete(e);const i=[e,...Array.from(n).sort()];for(const e of i){if(!t[e])throw new Error(`No type definition specified: ${e}`);r+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`}return r}function y(e,t,r=new Set){if("string"!=typeof e)throw new Error(`Invalid findTypeDependencies input ${JSON.stringify(e)}`);const n=e.match(/^\w*/u);if([e]=n,r.has(e)||t[e]===undefined)return r;r.add(e);for(const n of t[e])y(n.type,t,r);return r}function b(e,t,r,i){d(i,[l.V3,l.V4]);const s=m(e,t,r,i),o=(0,c.keccak256)(s);return(0,n.arrToBufArr)(o)}function w(e,t){const r=(0,a.stringToBytes)(g(e,t));return(0,n.arrToBufArr)((0,c.keccak256)(r))}function E(e){const t={};for(const n in r.TYPED_MESSAGE_SCHEMA.properties)e[n]&&(t[n]=e[n]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}function T(e,t){d(t,[l.V3,l.V4]);const r=E(e),{domain:n}=r;return b("EIP712Domain",n,{EIP712Domain:r.types.EIP712Domain},t)}function k(e,t){if((0,s.isArrayType)(e)&&Array.isArray(t)){const[r]=(0,s.getArrayType)(e);return t.map((e=>k(r,e)))}if("address"===e){if((0,a.isStrictHexString)(t))return(0,o.padStart)((0,a.hexToBytes)(t).subarray(0,20),20);if(t instanceof Uint8Array)return(0,o.padStart)(t.subarray(0,20),20)}if("bool"===e)return Boolean(t);if(e.startsWith("bytes")&&"bytes"!==e){const r=(0,s.getByteLength)(e);if("number"==typeof t)return t<0?new Uint8Array:(0,a.numberToBytes)(t).subarray(0,r);if((0,a.isStrictHexString)(t))return(0,a.hexToBytes)(t).subarray(0,r);if(t instanceof Uint8Array)return t.subarray(0,r)}if(e.startsWith("uint")&&"number"==typeof t)return Math.abs(t);if(e.startsWith("int")&&"number"==typeof t){const r=(0,s.getLength)(e);return BigInt.asIntN(r,BigInt(t))}return t}function v(e,t){return t.map((t=>{if("string"==typeof t||"number"==typeof t||"bigint"==typeof t){const r=f(e,t);if(r>=BigInt(0))return(0,o.padStart)((0,a.bigIntToBytes)(r),32);const n=(0,s.getLength)(e),i=BigInt.asIntN(n,r);return(0,a.signedBigIntToBytes)(i,32)}return t}))}function _(e){const t=new Error("Expect argument to be non-empty array");if("object"!=typeof e||!("length"in e)||!e.length)throw t;const r=e.map((({name:e,type:t,value:r})=>{if("address[]"===t)return{name:e,type:"bytes32[]",value:(n=r,n.map((e=>"number"==typeof e?(0,o.padStart)((0,a.numberToBytes)(e),32):(0,a.isStrictHexString)(e)?(0,o.padStart)((0,a.hexToBytes)(e).subarray(0,32),32):e instanceof Uint8Array?(0,o.padStart)(e.subarray(0,32),32):e)))};var n;if(t.startsWith("int")&&(0,s.isArrayType)(t)){const[n,i]=(0,s.getArrayType)(t);return{name:e,type:`bytes32[${null!=i?i:""}]`,value:v(n,r)}}return{name:e,type:t,value:k(t,r)}})),l=r.map((e=>"bytes"!==e.type?e.value:(0,u.legacyToBuffer)(e.value))),d=r.map((e=>{if("function"===e.type)throw new Error('Unsupported or invalid type: "function"');return e.type})),f=e.map((e=>{if(!e.name)throw t;return`${e.type} ${e.name}`}));return(0,n.arrToBufArr)((0,c.keccak256)((0,i.encodePacked)(["bytes32","bytes32"],[(0,c.keccak256)((0,i.encodePacked)(["string[]"],[f],!0)),(0,c.keccak256)((0,i.encodePacked)(d,l,!0))])))}!function(e){e.V1="V1",e.V3="V3",e.V4="V4"}(l=r.SignTypedDataVersion||(r.SignTypedDataVersion={})),r.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},r.TypedDataUtils={encodeData:m,encodeType:g,findTypeDependencies:y,hashStruct:b,hashType:w,sanitizeData:E,eip712Hash:function(e,t){d(t,[l.V3,l.V4]);const r=E(e),i=[(0,a.hexToBytes)("1901")];return i.push(T(e,t)),"EIP712Domain"!==r.primaryType&&i.push(b(r.primaryType,r.message,r.types,t)),(0,n.arrToBufArr)((0,c.keccak256)((0,a.concatBytes)(i)))},eip712DomainHash:T},r.typedSignatureHash=function(e){const t=_(e);return(0,a.bytesToHex)(t)},r.signTypedData=function({privateKey:e,data:t,version:i}){if(d(i),(0,u.isNullish)(t))throw new Error("Missing data parameter");if((0,u.isNullish)(e))throw new Error("Missing private key parameter");const s=i===l.V1?_(t):r.TypedDataUtils.eip712Hash(t,i),o=(0,n.ecsign)(s,e);return(0,u.concatSig)((0,n.arrToBufArr)((0,a.bigIntToBytes)(o.v)),o.r,o.s)},r.recoverTypedSignature=function({data:e,signature:t,version:i}){if(d(i),(0,u.isNullish)(e))throw new Error("Missing data parameter");if((0,u.isNullish)(t))throw new Error("Missing signature parameter");const s=i===l.V1?_(e):r.TypedDataUtils.eip712Hash(e,i),o=(0,u.recoverPublicKey)(s,t),c=(0,n.publicToAddress)(o);return(0,a.bytesToHex)(c)}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/eth-sig-util/dist/sign-typed-data.js"}],[1631,{"@ethereumjs/util":1598,"@metamask/utils":2967,buffer:4079},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.normalize=r.recoverPublicKey=r.concatSig=r.legacyToBuffer=r.isNullish=r.padWithZeroes=void 0;const n=e("@ethereumjs/util"),i=e("@metamask/utils");function s(e,t){if(""!==e&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}function o(e){return null===e||e===undefined}r.padWithZeroes=s,r.isNullish=o,r.legacyToBuffer=function(e){return"string"!=typeof e||(0,n.isHexString)(e)?(0,n.toBuffer)(e):t.from(e)},r.concatSig=function(e,t,r){const o=(0,n.fromSigned)(t),a=(0,n.fromSigned)(r),c=(0,n.bufferToInt)(e),u=s((0,n.toUnsigned)(o).toString("hex"),64),l=s((0,n.toUnsigned)(a).toString("hex"),64),d=(0,i.remove0x)((0,i.numberToHex)(c));return(0,i.add0x)(u.concat(l,d))},r.recoverPublicKey=function(e,t){const r=(0,n.fromRpcSig)(t);return(0,n.ecrecover)(e,r.v,r.r,r.s)},r.normalize=function(e){if(o(e))return undefined;if("number"==typeof e){if(e<0)return"0x";const t=(0,i.numberToBytes)(e);e=(0,i.bytesToHex)(t)}if("string"!=typeof e){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return(0,i.add0x)(e.toLowerCase())}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/eth-sig-util/dist/utils.js"}],[1632,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function i(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function s(...e){const t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map((e=>e.encode)).reduceRight(r,t),decode:e.map((e=>e.decode)).reduce(r,t)}}function o(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(n(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const r=e.indexOf(t);if(-1===r)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}}function a(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function c(e,t="="){if(n(e),"string"!=typeof t)throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;r.length*e%8;)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let n=r.length;if(n*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if(!((n-1)*e%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function u(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function l(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let i=0;const s=[],o=Array.from(e);for(o.forEach((e=>{if(n(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,n=!0;for(let s=i;s<o.length;s++){const a=o[s],c=t*e+a;if(!Number.isSafeInteger(c)||t*e/t!==e||c-a!=t*e)throw new Error("convertRadix: carry overflow");e=c%r;const u=Math.floor(c/r);if(o[s]=u,!Number.isSafeInteger(u)||u*r+e!==c)throw new Error("convertRadix: carry overflow");n&&(u?n=!1:i=s)}if(s.push(e),n)break}for(let t=0;t<e.length-1&&0===e[t];t++)s.push(0);return s.reverse()}
/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(r,"__esModule",{value:!0}),r.bytes=r.stringToBytes=r.str=r.bytesToString=r.hex=r.utf8=r.bech32m=r.bech32=r.base58check=r.createBase58check=r.base58xmr=r.base58xrp=r.base58flickr=r.base58=r.base64urlnopad=r.base64url=r.base64nopad=r.base64=r.base32crockford=r.base32hexnopad=r.base32hex=r.base32nopad=r.base32=r.base16=r.utils=void 0,r.assertNumber=n;const d=(e,t)=>t?d(t,e%t):e,f=(e,t)=>e+(t-d(e,t));function p(e,t,r,i){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(f(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${f(t,r)}`);let s=0,o=0;const a=2**r-1,c=[];for(const i of e){if(n(i),i>=2**t)throw new Error(`convertRadix2: invalid data word=${i} from=${t}`);if(s=s<<t|i,o+t>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=r;o-=r)c.push((s>>o-r&a)>>>0);s&=2**o-1}if(s=s<<r-o&a,!i&&o>=t)throw new Error("Excess padding");if(!i&&s)throw new Error(`Non-zero padding: ${s}`);return i&&o>0&&c.push(s>>>0),c}function h(e){return n(e),{encode:t=>{if(!i(t))throw new Error("radix.encode input should be Uint8Array");return l(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(l(t,e,256))}}}function m(e,t=!1){if(n(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(f(8,e)>32||f(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!i(r))throw new Error("radix2.encode input should be Uint8Array");return p(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(p(r,e,8,t))}}}function g(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(e){}}}function y(e,t){if(n(e),"function"!=typeof t)throw new Error("checksum fn should be function");return{encode(r){if(!i(r))throw new Error("checksum.encode: input should be Uint8Array");const n=t(r).slice(0,e),s=new Uint8Array(r.length+e);return s.set(r),s.set(n,r.length),s},decode(r){if(!i(r))throw new Error("checksum.decode: input should be Uint8Array");const n=r.slice(0,-e),s=t(n).slice(0,e),o=r.slice(-e);for(let t=0;t<e;t++)if(s[t]!==o[t])throw new Error("Invalid checksum");return n}}}r.utils={alphabet:o,chain:s,checksum:y,convertRadix:l,convertRadix2:p,radix:h,radix2:m,join:a,padding:c},r.base16=s(m(4),o("0123456789ABCDEF"),a("")),r.base32=s(m(5),o("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),c(5),a("")),r.base32nopad=s(m(5),o("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),a("")),r.base32hex=s(m(5),o("0123456789ABCDEFGHIJKLMNOPQRSTUV"),c(5),a("")),r.base32hexnopad=s(m(5),o("0123456789ABCDEFGHIJKLMNOPQRSTUV"),a("")),r.base32crockford=s(m(5),o("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),a(""),u((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),r.base64=s(m(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),c(6),a("")),r.base64nopad=s(m(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),a("")),r.base64url=s(m(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),c(6),a("")),r.base64urlnopad=s(m(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),a(""));const b=e=>s(h(58),o(e),a(""));r.base58=b("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),r.base58flickr=b("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),r.base58xrp=b("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const w=[0,2,3,5,6,7,9,10,11];r.base58xmr={encode(e){let t="";for(let n=0;n<e.length;n+=8){const i=e.subarray(n,n+8);t+=r.base58.encode(i).padStart(w[i.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const i=e.slice(n,n+11),s=w.indexOf(i.length),o=r.base58.decode(i);for(let e=0;e<o.length-s;e++)if(0!==o[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(o.slice(o.length-s)))}return Uint8Array.from(t)}};r.createBase58check=e=>s(y(4,(t=>e(e(t)))),r.base58),r.base58check=r.createBase58check;const E=s(o("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),a("")),T=[996825010,642813549,513874426,1027748829,705979059];function k(e){const t=e>>25;let r=(33554431&e)<<5;for(let e=0;e<T.length;e++)1==(t>>e&1)&&(r^=T[e]);return r}function v(e,t,r=1){const n=e.length;let i=1;for(let t=0;t<n;t++){const r=e.charCodeAt(t);if(r<33||r>126)throw new Error(`Invalid prefix (${e})`);i=k(i)^r>>5}i=k(i);for(let t=0;t<n;t++)i=k(i)^31&e.charCodeAt(t);for(let e of t)i=k(i)^e;for(let e=0;e<6;e++)i=k(i);return i^=r,E.encode(p([i%2**30],30,5,!1))}function _(e){const t="bech32"===e?1:734539939,r=m(5),n=r.decode,i=r.encode,s=g(n);function o(e,r,n=90){if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(r instanceof Uint8Array&&(r=Array.from(r)),!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof r);if(0===e.length)throw new TypeError(`Invalid prefix length ${e.length}`);const i=e.length+7+r.length;if(!1!==n&&i>n)throw new TypeError(`Length ${i} exceeds limit ${n}`);const s=e.toLowerCase(),o=v(s,r,t);return`${s}1${E.encode(r)}${o}`}function a(e,r=90){if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==r&&e.length>r)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${r})`);const n=e.toLowerCase();if(e!==n&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=n.lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const s=n.slice(0,i),o=n.slice(i+1);if(o.length<6)throw new Error("Data must be at least 6 characters long");const a=E.decode(o).slice(0,-6),c=v(s,a,t);if(!o.endsWith(c))throw new Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:s,words:a}}return{encode:o,decode:a,encodeFromBytes:function(e,t){return o(e,i(t))},decodeToBytes:function(e){const{prefix:t,words:r}=a(e,!1);return{prefix:t,words:r,bytes:n(r)}},decodeUnsafe:g(a),fromWords:n,fromWordsUnsafe:s,toWords:i}}r.bech32=_("bech32"),r.bech32m=_("bech32m"),r.utf8={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},r.hex=s(m(4),o("0123456789abcdef"),a(""),u((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})));const A={utf8:r.utf8,hex:r.hex,base16:r.base16,base32:r.base32,base64:r.base64,base64url:r.base64url,base58:r.base58,base58xmr:r.base58xmr},S="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr";r.bytesToString=(e,t)=>{if("string"!=typeof e||!A.hasOwnProperty(e))throw new TypeError(S);if(!i(t))throw new TypeError("bytesToString() expects Uint8Array");return A[e].encode(t)},r.str=r.bytesToString;r.stringToBytes=(e,t)=>{if(!A.hasOwnProperty(e))throw new TypeError(S);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return A[e].decode(t)},r.bytes=r.stringToBytes}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/eth-sig-util>@scure/base",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@scure/base/lib/index.js"}],[1637,{"./ledger-hw-app.cjs":1638,"./ledger-iframe-bridge.cjs":1639,"./ledger-keyring.cjs":1640,"./ledger-mobile-bridge.cjs":1641,"./ledger-transport-middleware.cjs":1642},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./ledger-keyring.cjs"),r),i(e("./ledger-iframe-bridge.cjs"),r),i(e("./ledger-mobile-bridge.cjs"),r),i(e("./ledger-transport-middleware.cjs"),r),i(e("./ledger-hw-app.cjs"),r)}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/index.cjs"}],[1638,{"@ledgerhq/hw-app-eth":830,buffer:4079},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.MetaMaskLedgerHwAppEth=void 0;const i=n(e("@ledgerhq/hw-app-eth")),s=e("buffer");class o extends i.default{constructor(){super(...arguments),this.mainAppName="BOLOS",this.ethAppName="Ethereum",this.transportEncoding="ascii"}async openEthApp(){await this.transport.send(224,216,0,0,s.Buffer.from(this.ethAppName,this.transportEncoding))}async closeApps(){await this.transport.send(176,167,0,0)}async getAppNameAndVersion(){const e=await this.transport.send(176,1,0,0);if(1!==e[0])throw new Error("Incorrect format return from getAppNameAndVersion.");let t=1;const r=e[t]??0;t+=1;const n=e.slice(t,t+=r).toString(this.transportEncoding),i=e[t]??0;t+=1;return{appName:n,version:e.slice(t,t+=i).toString(this.transportEncoding)}}}r.MetaMaskLedgerHwAppEth=o}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-hw-app.cjs"}],[1639,{"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,o,a,c,u,l,d,f=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},p=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerIframeBridge=r.IFrameMessageAction=void 0;const h=e("@metamask/utils");var m;!function(e){e.LedgerIsIframeReady="ledger-is-iframe-ready",e.LedgerConnectionChange="ledger-connection-change",e.LedgerUnlock="ledger-unlock",e.LedgerMakeApp="ledger-make-app",e.LedgerUpdateTransport="ledger-update-transport",e.LedgerSignTransaction="ledger-sign-transaction",e.LedgerSignPersonalMessage="ledger-sign-personal-message",e.LedgerSignTypedData="ledger-sign-typed-data"}(m||(r.IFrameMessageAction=m={}));r.LedgerIframeBridge=class{constructor(e={bridgeUrl:"https://metamask.github.io/eth-ledger-bridge-keyring"}){n.add(this),this.iframeLoaded=!1,i.set(this,void 0),this.isDeviceConnected=!1,this.currentMessageId=0,s.set(this,new Map),f(this,n,"m",d).call(this,e),p(this,i,{bridgeUrl:e?.bridgeUrl},"f")}async init(){await f(this,n,"m",a).call(this,f(this,i,"f").bridgeUrl),this.eventListener=f(this,n,"m",u).bind(this,f(this,i,"f").bridgeUrl),window.addEventListener("message",this.eventListener)}async destroy(){this.eventListener&&window.removeEventListener("message",this.eventListener)}async getOptions(){return f(this,i,"f")}async setOptions(e){f(this,n,"m",d).call(this,e),f(this,i,"f")?.bridgeUrl!==e.bridgeUrl&&(f(this,i,"f").bridgeUrl=e.bridgeUrl,await this.destroy(),await this.init())}async attemptMakeApp(){const e=await f(this,n,"m",l).call(this,{action:m.LedgerMakeApp},{timeout:4e3});if("success"in e&&e.success)return!0;throw"error"in e?e.error:new Error("Unknown error occurred")}async updateTransportMethod(e){if(!this.iframeLoaded)throw new Error("The iframe is not loaded yet");const t=await f(this,n,"m",l).call(this,{action:m.LedgerUpdateTransport,params:{transportType:e}},{timeout:4e3});if("success"in t&&t.success)return!0;throw new Error("Ledger transport could not be updated")}async getPublicKey(e){return f(this,n,"m",o).call(this,m.LedgerUnlock,e)}async deviceSignTransaction(e){return f(this,n,"m",o).call(this,m.LedgerSignTransaction,e)}async deviceSignMessage(e){return f(this,n,"m",o).call(this,m.LedgerSignPersonalMessage,e)}async deviceSignTypedData(e){return f(this,n,"m",o).call(this,m.LedgerSignTypedData,e)}},i=new WeakMap,s=new WeakMap,n=new WeakSet,o=async function(...[e,t]){const r=await f(this,n,"m",l).call(this,{action:e,params:t});if("payload"in r&&r.payload){if("success"in r&&r.success)return r.payload;if("error"in r.payload)throw r.payload.error}throw new Error("Unknown error occurred")},a=async function(e){return new Promise((t=>{this.iframe=document.createElement("iframe"),this.iframe.src=e,this.iframe.allow="hid 'src'",this.iframe.onload=async()=>{this.iframeLoaded=!0,t()},document.head.appendChild(this.iframe)}))},c=function(e){const t=e.split("/");return t.splice(-1,1),t.join("/")},u=function(e,t){const{origin:r,data:i}=t;if(r===f(this,n,"m",c).call(this,e)&&i){const e=f(this,s,"f").get(i.messageId);e?(e.resolve(i),f(this,s,"f").delete(i.messageId)):i.action===m.LedgerConnectionChange&&(this.isDeviceConnected=i.payload.connected)}},l=async function(e,{timeout:t}={}){this.currentMessageId+=1;const r={...e,messageId:this.currentMessageId,target:"LEDGER-IFRAME"},n=(0,h.createDeferredPromise)();if(f(this,s,"f").set(this.currentMessageId,n),!this.iframeLoaded||!this.iframe?.contentWindow)throw new Error("The iframe is not loaded yet");return t&&setTimeout((()=>{f(this,s,"f").has(r.messageId)&&(f(this,s,"f").delete(r.messageId),n.reject(new Error("Ledger iframe message timeout")))}),t),this.iframe.contentWindow.postMessage(r,"*"),n.promise},d=function(e){if("string"!=typeof e.bridgeUrl||0===e.bridgeUrl.length)throw new Error("bridgeURL is not a valid URL")}}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-iframe-bridge.cjs"}],[164,{"./createMethodMiddleware":147,"./createUnsupportedMethodMiddleware":148},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./createMethodMiddleware");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}}))}));var i=e("./createUnsupportedMethodMiddleware");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===i[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}}))}))}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/index.js"}],[1640,{"@ethereumjs/rlp":1643,"@ethereumjs/tx":461,"@ethereumjs/util":476,"@metamask/eth-sig-util":1665,"@metamask/utils":2967,buffer:4079,hdkey:4648},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,o,a,c,u,l,d,f,p,h,m,g,y=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},b=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerKeyring=void 0;const w=e("@ethereumjs/rlp"),E=e("@ethereumjs/tx"),T=e("@ethereumjs/util"),k=e("@metamask/eth-sig-util"),v=e("@metamask/utils"),_=e("buffer"),A=b(e("hdkey")),S="m",P=`${S}/44'/60'/0'`,I="Ledger Hardware";var C;!function(e){e.Ropsten="https://api-ropsten.etherscan.io",e.Kovan="https://api-kovan.etherscan.io",e.Rinkeby="https://api-rinkeby.etherscan.io",e.Mainnet="https://api.etherscan.io"}(C||(C={}));class M{constructor({bridge:e}){if(n.add(this),this.deviceId="",this.type=I,this.page=0,this.perPage=5,this.unlockedAccount=0,this.accounts=[],this.accountDetails={},this.hdk=new A.default,this.hdPath=P,this.paths={},this.network=C.Mainnet,this.implementFullBIP44=!1,!e)throw new Error("Bridge is a required dependency for the keyring");this.bridge=e}async init(){return this.bridge.init()}async destroy(){return this.bridge.destroy()}async serialize(){return{hdPath:this.hdPath,accounts:this.accounts.slice(),deviceId:this.deviceId,accountDetails:this.accountDetails,implementFullBIP44:!1}}async deserialize(e){this.hdPath=e.hdPath??P,this.accounts=e.accounts??[],this.deviceId=e.deviceId??"",this.accountDetails=e.accountDetails??{},e.accountDetails||y(this,n,"m",i).call(this,e),this.implementFullBIP44=e.implementFullBIP44??!1;const t=new Set(Object.keys(this.accountDetails));return this.accounts=this.accounts.filter((e=>t.has(y(this,n,"m",g).call(this,e)))),Promise.resolve()}setDeviceId(e){this.deviceId=e}getDeviceId(){return this.deviceId}isUnlocked(){return Boolean(this.hdk.publicKey)}isConnected(){return this.bridge.isDeviceConnected}setAccountToUnlock(e){this.unlockedAccount=e}setHdPath(e){this.hdPath!==e&&(this.hdk=new A.default),this.hdPath=e}async unlock(e,t=!0){if(this.isUnlocked()&&!e)return y(this,n,"m",g).call(this,(0,v.bytesToHex)((0,T.publicToAddress)(this.hdk.publicKey,!0)));const r=e?y(this,n,"m",p).call(this,e):this.hdPath;let i;try{i=await this.bridge.getPublicKey({hdPath:r})}catch(e){throw e instanceof Error?e:new Error("Ledger Ethereum app closed. Open it to unlock.")}return t&&i.chainCode&&(this.hdk.publicKey=_.Buffer.from(i.publicKey,"hex"),this.hdk.chainCode=_.Buffer.from(i.chainCode,"hex")),(0,v.add0x)(i.address)}async addAccounts(e){return new Promise(((t,r)=>{this.unlock().then((async r=>{const i=this.unlockedAccount,s=i+e,o=[];for(let e=i;e<s;e++){const t=y(this,n,"m",d).call(this,e);let r;r=y(this,n,"m",f).call(this)?await this.unlock(t):y(this,n,"m",u).call(this,S,e),this.accountDetails[y(this,n,"m",g).call(this,r)]={bip44:y(this,n,"m",f).call(this),hdPath:t},this.accounts.includes(r)||(this.accounts=[...this.accounts,r],o.push(r)),this.page=0}t(o)})).catch(r)}))}getName(){return I}async getFirstPage(){return this.page=0,y(this,n,"m",o).call(this,1)}async getNextPage(){return y(this,n,"m",o).call(this,1)}async getPreviousPage(){return y(this,n,"m",o).call(this,-1)}async getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){const t=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()));if(t.length===this.accounts.length)throw new Error(`Address ${e} not found in this keyring`);this.accounts=t,delete this.accountDetails[y(this,n,"m",g).call(this,e)]}async attemptMakeApp(){return this.bridge.attemptMakeApp()}async updateTransportMethod(e){return this.bridge.updateTransportMethod(e)}async signTransaction(e,t){let r;if(function(e){return"getChainId"in e&&"function"==typeof e.getChainId}(t))return t.v=t.getChainId(),t.r="0x00",t.s="0x00",r=t.serialize().toString("hex"),y(this,n,"m",s).call(this,e,r,(e=>(t.v=_.Buffer.from(e.v,"hex"),t.r=_.Buffer.from(e.r,"hex"),t.s=_.Buffer.from(e.s,"hex"),t)));const i=t.getMessageToSign();return r=Array.isArray(i)?_.Buffer.from(w.RLP.encode(i)).toString("hex"):(0,v.bytesToHex)(i),y(this,n,"m",s).call(this,e,r,(e=>{const r=t.toJSON();return r.type=t.type,r.v=(0,v.add0x)(e.v),r.r=(0,v.add0x)(e.r),r.s=(0,v.add0x)(e.s),E.TransactionFactory.fromTxData(r,{common:t.common,freeze:Object.isFrozen(t)})}))}async signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,t){const r=await this.unlockAccountByAddress(e);if(!r)throw new Error("Ledger: Unknown error while signing message");let i;try{i=await this.bridge.deviceSignMessage({hdPath:r,message:(0,v.remove0x)(t)})}catch(e){throw e instanceof Error?e:new Error("Ledger: Unknown error while signing message")}let s=parseInt(String(i.v),10).toString(16);s.length<2&&(s=`0${s}`);const o=`0x${i.r}${i.s}${s}`,a=(0,k.recoverPersonalSignature)({data:t,signature:o});if(y(this,n,"m",g).call(this,a)!==y(this,n,"m",g).call(this,e))throw new Error("Ledger: The signature doesnt match the right address");return o}async unlockAccountByAddress(e){const t=y(this,n,"m",g).call(this,e),r=this.accountDetails[t];if(!r)throw new Error(`Ledger: Account for address '${t}' not found`);const{hdPath:i}=r;if((await this.unlock(i,!1)).toLowerCase()!==e.toLowerCase())throw new Error(`Ledger: Account ${e} does not belong to the connected device`);return i}async signTypedData(e,t,r){const{version:i}=r??{};if(!("V4"===i))throw new Error("Ledger: Only version 4 of typed data signing is supported");const{domain:s,types:o,primaryType:a,message:c}=k.TypedDataUtils.sanitizeData(t),u=await this.unlockAccountByAddress(e);if(!u)throw new Error("Ledger: Unknown error while signing message");let l;try{l=await this.bridge.deviceSignTypedData({hdPath:u,message:{domain:{name:s.name,chainId:s.chainId,version:s.version,verifyingContract:s.verifyingContract,salt:s.salt instanceof ArrayBuffer?_.Buffer.from(s.salt).toString("hex"):s.salt},types:o,primaryType:a.toString(),message:c}})}catch(e){throw e instanceof Error?e:new Error("Ledger: Unknown error while signing message")}let d=parseInt(String(l.v),10).toString(16);d.length<2&&(d=`0${d}`);const f=`0x${l.r}${l.s}${d}`,p=(0,k.recoverTypedSignature)({data:t,signature:f,version:k.SignTypedDataVersion.V4});if(y(this,n,"m",g).call(this,p)!==y(this,n,"m",g).call(this,e))throw new Error("Ledger: The signature doesnt match the right address");return f}forgetDevice(){this.deviceId="",this.accounts=[],this.page=0,this.unlockedAccount=0,this.paths={},this.accountDetails={},this.hdk=new A.default}}r.LedgerKeyring=M,n=new WeakSet,i=function(e){if(y(this,n,"m",f).call(this)&&e.accountIndexes)for(const[t,r]of Object.entries(e.accountIndexes))this.accountDetails[t]={bip44:!0,hdPath:y(this,n,"m",d).call(this,r)};const t=new Set(Object.keys(this.accountDetails));y(this,n,"m",f).call(this)||this.accounts.forEach((e=>{const r=y(this,n,"m",g).call(this,e);t.has(r)||(this.accountDetails[r]={bip44:!1,hdPath:y(this,n,"m",l).call(this,e)})}))},s=async function(e,t,r){const n=await this.unlockAccountByAddress(e);if(!n)throw new Error("Ledger: hdPath is empty while signing transaction");let i;try{i=await this.bridge.deviceSignTransaction({tx:(0,v.remove0x)(t),hdPath:n})}catch(e){throw e instanceof Error?e:new Error("Ledger: Unknown error while signing transaction")}const s=r(i);if(s.verifySignature())return s;throw new Error("Ledger: The transaction signature is not valid")},o=async function(e){this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,r=t+this.perPage;let i;return await this.unlock(),i=y(this,n,"m",f).call(this)?await y(this,n,"m",a).call(this,t,r):y(this,n,"m",c).call(this,t,r),i},a=async function(e,t){const r=[];for(let i=e;i<t;i++){const e=y(this,n,"m",d).call(this,i),t=await this.unlock(e),s=!this.implementFullBIP44||await y(this,n,"m",h).call(this,t);if(r.push({address:t,balance:null,index:i}),!s)break}return r},c=function(e,t){const r=[];for(let i=e;i<t;i++){const e=y(this,n,"m",u).call(this,S,i);r.push({address:e,balance:null,index:i}),this.paths[y(this,n,"m",g).call(this,e)]=i}return r},u=function(e,t){const r=this.hdk.derive(`${e}/${t}`),i=(0,v.bytesToHex)((0,T.publicToAddress)(r.publicKey,!0));return y(this,n,"m",g).call(this,i)},l=function(e){const t=y(this,n,"m",g).call(this,e);let r=this.paths[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===y(this,n,"m",u).call(this,S,e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return y(this,n,"m",d).call(this,r)},d=function(e){return y(this,n,"m",f).call(this)?`m/44'/60'/${e}'/0/0`:`${this.hdPath}/${e}`},f=function(){return"m/44'/60'/0'/0/0"===this.hdPath},p=function(e){return e.toString().replace("m/","")},h=async function(e){const t=y(this,n,"m",m).call(this),r=await window.fetch(`${t}/api?module=account&action=txlist&address=${e}&tag=latest&page=1&offset=1`),i=await r.json();return"0"!==i.status&&i.result.length>0},m=function(){return this.network},g=function(e){return(0,v.getChecksumAddress)((0,v.add0x)(e))},M.type=I}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-keyring.cjs"}],[1641,{"./ledger-hw-app.cjs":1638},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,o,a,c=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},u=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerMobileBridge=void 0;e("./ledger-hw-app.cjs");r.LedgerMobileBridge=class{constructor(e,t={}){n.add(this),i.set(this,void 0),s.set(this,void 0),this.isDeviceConnected=!1,c(this,s,t,"f"),c(this,i,e,"f")}async init(){return Promise.resolve()}async destroy(){try{await u(this,n,"m",o).call(this).dispose()}catch(e){console.error(e)}this.isDeviceConnected=!1}async deviceSignMessage({hdPath:e,message:t}){return u(this,n,"m",a).call(this).signPersonalMessage(e,t)}async deviceSignTypedData({hdPath:e,message:t}){return u(this,n,"m",a).call(this).signEIP712Message(e,t)}async deviceSignTransaction({tx:e,hdPath:t}){return u(this,n,"m",a).call(this).clearSignTransaction(t,e,{externalPlugins:!0,erc20:!0,nft:!0})}async getPublicKey({hdPath:e}){return await u(this,n,"m",a).call(this).getAddress(e,!1,!0)}async getOptions(){return u(this,s,"f")}async setOptions(e){c(this,s,e,"f")}async updateTransportMethod(e){if(!e.deviceModel)throw new Error("Property `deviceModel` is not defined in `transport`.");if(!e.deviceModel.id)throw new Error("Property `deviceModel.id` is not defined in `transport`.");return u(this,n,"m",o).call(this).setTransport(e),this.isDeviceConnected=!0,Promise.resolve(!0)}async attemptMakeApp(){throw new Error("Method not supported.")}async openEthApp(){await u(this,n,"m",a).call(this).openEthApp()}async closeApps(){await u(this,n,"m",a).call(this).closeApps()}async getAppNameAndVersion(){return u(this,n,"m",a).call(this).getAppNameAndVersion()}},i=new WeakMap,s=new WeakMap,n=new WeakSet,o=function(){if(u(this,i,"f"))return u(this,i,"f");throw new Error("Instance `transportMiddleware` is not initialized.")},a=function(){return u(this,n,"m",o).call(this).getEthApp()}}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-mobile-bridge.cjs"}],[1642,{"./ledger-hw-app.cjs":1638},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},s=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerTransportMiddleware=void 0;const o=e("./ledger-hw-app.cjs");r.LedgerTransportMiddleware=class{constructor(){this.mainAppName="BOLOS",this.ethAppName="Ethereum",this.transportEncoding="ascii",n.set(this,void 0)}async dispose(){const e=this.getTransport();await e.close()}setTransport(e){i(this,n,e,"f")}getTransport(){if(!s(this,n,"f"))throw new Error("Instance `transport` is not initialized.");return s(this,n,"f")}getEthApp(){return new o.MetaMaskLedgerHwAppEth(this.getTransport())}},n=new WeakMap}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-transport-middleware.cjs"}],[1643,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(Array.isArray(e)){const t=[];let r=0;for(let i=0;i<e.length;i++){const s=n(e[i]);t.push(s),r+=s.length}return p(o(r,192),...t)}const t=y(e);return 1===t.length&&t[0]<128?t:p(o(t.length,128),t)}function i(e,t,r){if(r>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,r)}function s(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return d(l(e))}function o(e,t){if(e<56)return Uint8Array.from([e+t]);const r=m(e),n=m(t+55+r.length/2);return Uint8Array.from(f(n+r))}function a(e,t=!1){if(null==e||0===e.length)return Uint8Array.from([]);const r=c(y(e));if(t)return{data:r.data,remainder:r.remainder.slice()};if(0!==r.remainder.length)throw new Error("invalid RLP: remainder must be zero");return r.data}function c(e){let t,r,n,o,a;const u=[],l=e[0];if(l<=127)return{data:e.slice(0,1),remainder:e.subarray(1)};if(l<=183){if(t=l-127,n=128===l?Uint8Array.from([]):i(e,1,t),2===t&&n[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:n,remainder:e.subarray(t)}}if(l<=191){if(r=l-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=s(i(e,1,r)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return n=i(e,r,t+r),{data:n,remainder:e.subarray(t+r)}}if(l<=247){for(t=l-191,o=i(e,1,t);o.length;)a=c(o),u.push(a.data),o=a.remainder;return{data:u,remainder:e.subarray(t)}}{if(r=l-246,t=s(i(e,1,r)),t<56)throw new Error("invalid RLP: encoded list too short");const n=r+t;if(n>e.length)throw new Error("invalid RLP: total length is larger than the data");for(o=i(e,r,n);o.length;)a=c(o),u.push(a.data),o=a.remainder;return{data:u,remainder:e.subarray(n)}}}Object.defineProperty(r,"__esModule",{value:!0}),r.RLP=r.utils=r.decode=r.encode=void 0,r.encode=n,r.decode=a;const u=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function l(e){let t="";for(let r=0;r<e.length;r++)t+=u[e[r]];return t}function d(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function f(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r;t[r]=d(e.slice(n,n+2))}return t}function p(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}function h(e){return(new TextEncoder).encode(e)}function m(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function g(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function y(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return g(e)?f((t="string"!=typeof(r=e)?r:g(r)?r.slice(2):r).length%2?`0${t}`:t):h(e);var t,r;if("number"==typeof e||"bigint"==typeof e)return e?f(m(e)):Uint8Array.from([]);if(null===e||e===undefined)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}r.utils={bytesToHex:l,concatBytes:p,hexToBytes:f,utf8ToBytes:h},r.RLP={encode:n,decode:a}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ethereumjs/rlp",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@ethereumjs/rlp/dist/cjs/index.js"}],[1644,{"./errors":1645,"./packer":1648,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.decodeSingle=r.decode=r.encodePacked=r.encodeSingle=r.encode=void 0;const n=e("@metamask/utils"),i=e("./errors"),s=e("./packer");r.encode=(e,t,r,n)=>{try{return(0,s.pack)({types:e,values:t,packed:r,tight:n})}catch(e){if(e instanceof i.ParserError)throw new i.ParserError(`Unable to encode value: ${e.message}`,e);throw new i.ParserError(`An unexpected error occurred: ${(0,i.getErrorMessage)(e)}`,e)}};r.encodeSingle=(e,t)=>(0,r.encode)([e],[t]);r.encodePacked=(e,t,n)=>(0,r.encode)(e,t,!0,n);r.decode=(e,t)=>{const r=(0,n.createBytes)(t);try{return(0,s.unpack)(e,r)}catch(e){if(e instanceof i.ParserError)throw new i.ParserError(`Unable to decode value: ${e.message}`,e);throw new i.ParserError(`An unexpected error occurred: ${(0,i.getErrorMessage)(e)}`,e)}};r.decodeSingle=(e,t)=>{const s=(0,r.decode)([e],t);return(0,n.assert)(1===s.length,new i.ParserError("Decoded value array has unexpected length.")),s[0]}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/abi.js"}],[1645,{"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ParserError=r.getErrorStack=r.getErrorMessage=void 0;const n=e("@metamask/utils");r.getErrorMessage=e=>"string"==typeof e?e:e instanceof Error||(0,n.isObject)(e)&&(0,n.hasProperty)(e,"message")&&"string"==typeof e.message?e.message:"Unknown error.";r.getErrorStack=e=>e instanceof Error?e.stack:undefined;class i extends Error{constructor(e,t){super(e),this.name="ParserError";const n=(0,r.getErrorStack)(t);n&&(this.stack=n)}}r.ParserError=i}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/errors.js"}],[1646,{"./abi":1644,"./errors":1645,"./types":1661},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./abi"),r),i(e("./errors"),r),i(e("./types"),r)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/index.js"}],[1647,{"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.iterate=void 0;const n=e("@metamask/utils");r.iterate=function*(e,t=32){for(let r=0;r<e.length;r+=t){const i=e=>{(0,n.assert)(e>=0,"Cannot skip a negative number of bytes."),(0,n.assert)(e%t==0,"Length must be a multiple of the size."),r+=e},s=e.subarray(r);yield{skip:i,value:s}}return{skip:()=>undefined,value:new Uint8Array}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/iterator.js"}],[1648,{"./errors":1645,"./iterator":1647,"./parsers":1655,"./utils":1663,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.unpack=r.pack=r.isDynamicParser=r.getParser=void 0;const n=e("@metamask/utils"),i=e("./errors"),s=e("./iterator"),o=e("./parsers"),a=e("./utils");r.getParser=e=>{const t={address:o.address,array:o.array,bool:o.bool,bytes:o.bytes,fixedBytes:o.fixedBytes,function:o.fn,number:o.number,string:o.string,tuple:o.tuple},r=t[e];if(r)return r;const n=Object.values(t).find((t=>t.isType(e)));if(n)return n;throw new i.ParserError(`The type "${e}" is not supported.`)};r.isDynamicParser=(e,t)=>{const{isDynamic:r}=e;return"function"==typeof r?r(t):r};r.pack=({types:e,values:t,packed:s=!1,tight:o=!1,arrayPacked:c=!1,byteArray:u=new Uint8Array})=>{(0,n.assert)(e.length===t.length,new i.ParserError(`The number of types (${e.length}) does not match the number of values (${t.length}).`));const{staticBuffer:l,dynamicBuffer:d,pointers:f}=e.reduce((({staticBuffer:e,dynamicBuffer:i,pointers:a},u,l)=>{const d=(0,r.getParser)(u),f=t[l];if(s||c||!(0,r.isDynamicParser)(d,u))return{staticBuffer:d.encode({buffer:e,value:f,type:u,packed:s,tight:o}),dynamicBuffer:i,pointers:a};return{staticBuffer:(0,n.concatBytes)([e,new Uint8Array(32)]),dynamicBuffer:d.encode({buffer:i,value:f,type:u,packed:s,tight:o}),pointers:[...a,{position:e.length,pointer:i.length}]}}),{staticBuffer:new Uint8Array,dynamicBuffer:new Uint8Array,pointers:[]});(0,n.assert)(!s&&!c||0===d.length,new i.ParserError("Invalid pack state."));const p=l.length,h=f.reduce(((e,{pointer:t,position:r})=>{const i=(0,a.padStart)((0,n.numberToBytes)(p+t));return(0,a.set)(e,i,r)}),l);return(0,n.concatBytes)([u,h,d])};r.unpack=(e,t)=>{const o=(0,s.iterate)(t);return e.map((e=>{const{value:{value:s,skip:a},done:c}=o.next();(0,n.assert)(!c,new i.ParserError(`The encoded value is invalid for the provided types. Reached end of buffer while attempting to parse "${e}".`));const u=(0,r.getParser)(e);if((0,r.isDynamicParser)(u,e)){const r=(0,n.bytesToNumber)(s.subarray(0,32)),i=t.subarray(r);return u.decode({type:e,value:i,skip:a})}return u.decode({type:e,value:s,skip:a})}))}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/packer.js"}],[1649,{"../errors":1645,"../utils":1663,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.address=r.getAddress=void 0;const n=e("@metamask/utils"),i=e("../errors"),s=e("../utils");r.getAddress=e=>{const t=(0,n.createBytes)(e);return(0,n.assert)(t.length<=20,new i.ParserError(`Invalid address value. Expected address to be 20 bytes long, but received ${t.length} bytes.`)),(0,s.padStart)(t,20)},r.address={isDynamic:!1,isType:e=>"address"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:i}){const o=(0,r.getAddress)(t);if(i)return(0,n.concatBytes)([e,o]);const a=(0,s.padStart)(o);return(0,n.concatBytes)([e,a])},decode:({value:e})=>(0,n.add0x)((0,n.bytesToHex)(e.slice(12,32)))}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/address.js"}],[165,{"../util":198,"@segment/loosely-validate-event":3037,buffer:4079,"is-retry-allowed":4684,lodash:4871,"remove-trailing-slash":5305,timers:4081},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t,n){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=u(e("remove-trailing-slash")),s=u(e("@segment/loosely-validate-event")),o=e("lodash"),a=u(e("is-retry-allowed")),c=e("../util");function u(e){return e&&e.__esModule?e:{default:e}}const l=()=>({});r.default=class{constructor(e,t={}){this.writeKey=e,this.host=(0,i.default)(t.host||"https://api.segment.io"),this.flushInterval=t.flushInterval||1e4,this.flushAt=t.flushAt||Math.max(t.flushAt,1)||20,this.queue=[],this.path="/v1/batch",this.maxQueueSize=460800,this.flushed=!1,this.retryCount=3,Object.defineProperty(this,"enable",{configurable:!1,writable:!1,enumerable:!0,value:!0})}_validate(e,t){(0,s.default)(e,t)}_message(e,t,r){return this._validate(t,e),this.enqueue(e,t,r),this}identify(e,t){return this._message("identify",e,t)}track(e,t){return this._message("track",e,t)}page(e,t){return this._message("page",e,t)}enqueue(e,t,r=l){if(!this.enable)return void n(r);const i={...t,type:e};if(i.context={...i.context,library:{name:"analytics-node"}},i.timestamp||(i.timestamp=new Date),i.messageId||(i.messageId=(0,c.generateRandomId)()),i.anonymousId&&!(0,o.isString)(i.anonymousId)&&(i.anonymousId=JSON.stringify(i.anonymousId)),i.userId&&!(0,o.isString)(i.userId)&&(i.userId=JSON.stringify(i.userId)),this.queue.push({message:i,callback:r}),!this.flushed)return this.flushed=!0,void this.flush();const s=this.queue.length>=this.flushAt,a=this.queue.reduce(((e,t)=>e+JSON.stringify(t).length),0)>=this.maxQueueSize;(s||a)&&this.flush(),this.flushInterval&&!this.timer&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))}flush(e=l){if(!this.enable)return n(e),Promise.resolve();if(this.timer&&(clearTimeout(this.timer),this.timer=null),!this.queue.length)return n(e),Promise.resolve();const r=this.queue.splice(0,this.flushAt),i=r.map((e=>e.callback)),s={batch:r.map((e=>e.message)),timestamp:new Date,sentAt:new Date},o={Authorization:`Basic ${t.from(this.writeKey,"utf8").toString("base64")}`};return this._sendRequest(`${this.host}${this.path}`,{method:"POST",body:JSON.stringify(s),headers:o},(t=>{n((()=>{i.forEach((e=>e(t,s))),e(t,s)}))}),0)}_retryRequest(e,t,r,n){const i=100*Math.pow(2,n);setTimeout((()=>{this._sendRequest(e,t,r,n+1)}),i)}async _sendRequest(e,t,r,n){return fetch(e,t).then((async i=>{if(i.ok)r();else if(this._isErrorRetryable({response:i})&&n<=this.retryCount)this._retryRequest(e,t,r,n);else{const e=new Error(i.statusText);r(e)}})).catch((i=>{this._isErrorRetryable(i)&&n<=this.retryCount?this._retryRequest(e,t,r,n):r(i)}))}_isErrorRetryable(e){return!!function(e){return!e.response&&Boolean(e.code)&&"ECONNABORTED"!==e.code&&(0,a.default)(e)}(e)||!!e.response&&(e.response.status>=500&&e.response.status<=599||429===e.response.status)}}}).call(this)}).call(this,e("buffer").Buffer,e("timers").setImmediate)}}},{package:"$root$",file:"app/scripts/lib/segment/analytics.js"}],[1650,{"../errors":1645,"../packer":1648,"../utils":1663,"./fixed-bytes":1653,"./tuple":1659,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.array=r.getTupleType=r.getArrayType=r.isArrayType=void 0;const n=e("@metamask/utils"),i=e("../errors"),s=e("../packer"),o=e("../utils"),a=e("./fixed-bytes"),c=e("./tuple"),u=/^(?<type>.*)\[(?<length>\d*?)\]$/u;r.isArrayType=e=>u.test(e);r.getArrayType=e=>{const t=e.match(u);return(0,n.assert)(t?.groups?.type,new i.ParserError(`Invalid array type. Expected an array type, but received "${e}".`)),[t.groups.type,t.groups.length?parseInt(t.groups.length,10):undefined]};r.getTupleType=(e,t)=>`(${new Array(t).fill(e).join(",")})`,r.array={isDynamic(e){const[t,n]=(0,r.getArrayType)(e);return n===undefined||(0,s.isDynamicParser)((0,s.getParser)(t),t)},isType:e=>(0,r.isArrayType)(e),getByteLength(e){(0,n.assert)((0,r.isArrayType)(e),new i.ParserError(`Expected an array type, but received "${e}".`));const[t,o]=(0,r.getArrayType)(e);return(0,s.isDynamicParser)(this,e)||o===undefined?32:c.tuple.getByteLength((0,r.getTupleType)(t,o))},encode({type:e,buffer:t,value:u,packed:l,tight:d}){const[f,p]=(0,r.getArrayType)(e);if((0,n.assert)(!l||!(0,r.isArrayType)(f),new i.ParserError("Cannot pack nested arrays.")),l&&(0,s.isDynamicParser)((0,s.getParser)(f),f))return(0,s.pack)({types:new Array(u.length).fill(f),values:u,byteArray:t,packed:l,arrayPacked:!0,tight:d});if(p)return(0,n.assert)(p===u.length,new i.ParserError(`Array length does not match type length. Expected a length of ${p}, but received ${u.length}.`)),c.tuple.encode({type:(0,r.getTupleType)(f,p),buffer:t,value:u,packed:a.fixedBytes.isType(f)&&d,tight:d});if(l)return(0,s.pack)({types:new Array(u.length).fill(f),values:u,byteArray:t,packed:a.fixedBytes.isType(f)&&d,arrayPacked:!0,tight:d});const h=(0,o.padStart)((0,n.numberToBytes)(u.length));return(0,s.pack)({types:new Array(u.length).fill(f),values:u,byteArray:(0,n.concatBytes)([t,h]),packed:l,tight:d})},decode({type:e,value:t,...o}){const[a,u]=(0,r.getArrayType)(e);if(u){const e=c.tuple.decode({type:(0,r.getTupleType)(a,u),value:t,...o});return(0,n.assert)(e.length===u,new i.ParserError(`Array length does not match type length. Expected a length of ${u}, but received ${e.length}.`)),e}const l=(0,n.bytesToNumber)(t.subarray(0,32));return(0,s.unpack)(new Array(l).fill(a),t.subarray(32))}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/array.js"}],[1651,{"../errors":1645,"./number":1656,"@metamask/superstruct":2875,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.bool=r.getBooleanValue=void 0;const n=e("@metamask/superstruct"),i=e("@metamask/utils"),s=e("../errors"),o=e("./number"),a=(0,n.coerce)((0,n.boolean)(),(0,n.union)([(0,n.literal)("true"),(0,n.literal)("false")]),(e=>"true"===e));r.getBooleanValue=e=>{try{return(0,n.create)(e,a)?BigInt(1):BigInt(0)}catch{throw new s.ParserError(`Invalid boolean value. Expected a boolean literal, or the string "true" or "false", but received "${e}".`)}},r.bool={isDynamic:!1,isType:e=>"bool"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:n,tight:s}){const a=(0,r.getBooleanValue)(t);return n?(0,i.concatBytes)([e,(0,i.bigIntToBytes)(a)]):o.number.encode({type:"uint256",buffer:e,value:a,packed:n,tight:s})},decode:e=>o.number.decode({...e,type:"uint256"})===BigInt(1)}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/bool.js"}],[1652,{"../utils":1663,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.bytes=void 0;const n=e("@metamask/utils"),i=e("../utils");r.bytes={isDynamic:!0,isType:e=>"bytes"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:r}){const s=(0,n.createBytes)(t);if(r)return(0,n.concatBytes)([e,s]);const o=32*Math.ceil(s.byteLength/32);return(0,n.concatBytes)([e,(0,i.padStart)((0,n.numberToBytes)(s.byteLength)),(0,i.padEnd)(s,o)])},decode({value:e}){const t=e.subarray(0,32),r=(0,n.bytesToNumber)(t);return e.slice(32,32+r)}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/bytes.js"}],[1653,{"../errors":1645,"../utils":1663,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.fixedBytes=r.getByteLength=void 0;const n=e("@metamask/utils"),i=e("../errors"),s=e("../utils"),o=/^bytes([0-9]{1,2})$/u;r.getByteLength=e=>{const t=e.match(o)?.[1];(0,n.assert)(t,`Invalid byte length. Expected a number between 1 and 32, but received "${e}".`);const r=Number(t);return(0,n.assert)(r>0&&r<=32,new i.ParserError(`Invalid byte length. Expected a number between 1 and 32, but received "${e}".`)),r},r.fixedBytes={isDynamic:!1,isType:e=>o.test(e),getByteLength:()=>32,encode({type:e,buffer:t,value:o,packed:a}){const c=(0,r.getByteLength)(e),u=(0,n.createBytes)(o);return(0,n.assert)(u.length<=c,new i.ParserError(`Expected a value of length ${c}, but received a value of length ${u.length}.`)),a?(0,n.concatBytes)([t,(0,s.padEnd)(u,c)]):(0,n.concatBytes)([t,(0,s.padEnd)(u)])},decode({type:e,value:t}){const n=(0,r.getByteLength)(e);return t.slice(0,n)}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/fixed-bytes.js"}],[1654,{"../errors":1645,"./fixed-bytes":1653,"@metamask/superstruct":2875,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.fn=r.getFunction=void 0;const n=e("@metamask/superstruct"),i=e("@metamask/utils"),s=e("../errors"),o=e("./fixed-bytes"),a=(0,n.coerce)((0,n.object)({address:i.StrictHexStruct,selector:i.StrictHexStruct}),(0,n.union)([i.StrictHexStruct,(0,n.instance)(Uint8Array)]),(e=>{const t=(0,i.createBytes)(e);return(0,i.assert)(24===t.length,new s.ParserError(`Invalid Solidity function. Expected function to be 24 bytes long, but received ${t.length} bytes.`)),{address:(0,i.bytesToHex)(t.subarray(0,20)),selector:(0,i.bytesToHex)(t.subarray(20,24))}}));r.getFunction=e=>{const t=(0,n.create)(e,a);return(0,i.concatBytes)([(0,i.hexToBytes)(t.address),(0,i.hexToBytes)(t.selector)])},r.fn={isDynamic:!1,isType:e=>"function"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:n,tight:i}){const s=(0,r.getFunction)(t);return o.fixedBytes.encode({type:"bytes24",buffer:e,value:s,packed:n,tight:i})},decode:({value:e})=>({address:(0,i.bytesToHex)(e.slice(0,20)),selector:(0,i.bytesToHex)(e.slice(20,24))})}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/function.js"}],[1655,{"./address":1649,"./array":1650,"./bool":1651,"./bytes":1652,"./fixed-bytes":1653,"./function":1654,"./number":1656,"./parser":1657,"./string":1658,"./tuple":1659},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./address"),r),i(e("./array"),r),i(e("./bool"),r),i(e("./bytes"),r),i(e("./fixed-bytes"),r),i(e("./function"),r),i(e("./number"),r),i(e("./parser"),r),i(e("./string"),r),i(e("./tuple"),r)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/index.js"}],[1656,{"../errors":1645,"../utils":1663,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.number=r.getBigInt=r.assertNumberLength=r.getLength=r.isSigned=void 0;const n=e("@metamask/utils"),i=e("../errors"),s=e("../utils"),o=/^u?int(?<length>[0-9]*)?$/u;r.isSigned=e=>!e.startsWith("u");r.getLength=e=>{if("int"===e||"uint"===e)return 256;const t=e.match(o);(0,n.assert)(t?.groups?.length,new i.ParserError(`Invalid number type. Expected a number type, but received "${e}".`));const r=parseInt(t.groups.length,10);return(0,n.assert)(r>=8&&r<=256,new i.ParserError(`Invalid number length. Expected a number between 8 and 256, but received "${e}".`)),(0,n.assert)(r%8==0,new i.ParserError(`Invalid number length. Expected a multiple of 8, but received "${e}".`)),r};r.assertNumberLength=(e,t)=>{const s=(0,r.getLength)(t),o=BigInt(2)**BigInt(s-((0,r.isSigned)(t)?1:0))-BigInt(1);(0,r.isSigned)(t)?(0,n.assert)(e>=-(o+BigInt(1))&&e<=o,new i.ParserError(`Number "${e}" is out of range for type "${t}".`)):(0,n.assert)(e<=o,new i.ParserError(`Number "${e}" is out of range for type "${t}".`))};r.getBigInt=e=>{try{return(0,n.createBigInt)(e)}catch{throw new i.ParserError(`Invalid number. Expected a valid number value, but received "${e}".`)}},r.number={isDynamic:!1,isType:e=>o.test(e),getByteLength:()=>32,encode({type:e,buffer:t,value:i,packed:o}){const a=(0,r.getBigInt)(i);if((0,r.assertNumberLength)(a,e),(0,r.isSigned)(e)){if(o){const i=(0,r.getLength)(e)/8;return(0,n.concatBytes)([t,(0,n.signedBigIntToBytes)(a,i)])}return(0,n.concatBytes)([t,(0,s.padStart)((0,n.signedBigIntToBytes)(a,32))])}if(o){const i=(0,r.getLength)(e)/8;return(0,n.concatBytes)([t,(0,s.padStart)((0,n.bigIntToBytes)(a),i)])}return(0,n.concatBytes)([t,(0,s.padStart)((0,n.bigIntToBytes)(a))])},decode({type:e,value:t}){const i=t.subarray(0,32);if((0,r.isSigned)(e)){const t=(0,n.bytesToSignedBigInt)(i);return(0,r.assertNumberLength)(t,e),t}const s=(0,n.bytesToBigInt)(i);return(0,r.assertNumberLength)(s,e),s}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/number.js"}],[1657,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/parser.js"}],[1658,{"./bytes":1652,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.string=void 0;const n=e("@metamask/utils"),i=e("./bytes");r.string={isDynamic:!0,isType:e=>"string"===e,getByteLength:()=>32,encode:({buffer:e,value:t,packed:r,tight:s})=>i.bytes.encode({type:"bytes",buffer:e,value:(0,n.stringToBytes)(t),packed:r,tight:s}),decode:e=>(0,n.bytesToString)(i.bytes.decode(e))}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/string.js"}],[1659,{"../errors":1645,"../packer":1648,"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.tuple=r.getTupleElements=void 0;const n=e("@metamask/utils"),i=e("../errors"),s=e("../packer"),o=/^\((.+)\)$/u;r.getTupleElements=e=>{(0,n.assert)(e.startsWith("(")&&e.endsWith(")"),new i.ParserError(`Invalid tuple type. Expected tuple type, but received "${e}".`));const t=[];let r="",s=0;for(let n=1;n<e.length-1;n++){const i=e[n];","===i&&0===s?(t.push(r.trim()),r=""):(r+=i,"("===i?s+=1:")"===i&&(s-=1))}return r.trim()&&t.push(r.trim()),t},r.tuple={isDynamic:e=>(0,r.getTupleElements)(e).some((e=>{const t=(0,s.getParser)(e);return(0,s.isDynamicParser)(t,e)})),isType:e=>(e=>o.test(e))(e),getByteLength(e){if((0,s.isDynamicParser)(this,e))return 32;return(0,r.getTupleElements)(e).reduce(((e,t)=>e+(0,s.getParser)(t).getByteLength(t)),0)},encode({type:e,buffer:t,value:n,packed:i,tight:o}){const a=(0,r.getTupleElements)(e);return(0,s.pack)({types:a,values:n,byteArray:t,packed:i,tight:o})},decode({type:e,value:t,skip:n}){const i=(0,r.getTupleElements)(e);return n(this.getByteLength(e)-32),(0,s.unpack)(i,t)}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/tuple.js"}],[166,{"../../../../shared/constants/time":5765,"./analytics":165},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.segment=r.createSegmentMock=void 0;var n,i=e("../../../../shared/constants/time"),s=(n=e("./analytics"))&&n.__esModule?n:{default:n};const o="XdGJ17zKf3NjBPCDQ2UDjJjkx6FYBMGP",a=undefined,c=5*i.SECOND,u=(e=a)=>{const t={queue:[],flush(){t.queue.forEach((([e,t])=>{t()})),t.queue=[]},track(r,n=(()=>undefined)){t.queue.push([r,n]),t.queue.length>=e&&t.flush()},page(){},identify(){}};return t};r.createSegmentMock=u;r.segment=o?new s.default(o,{host:null,flushAt:a,flushInterval:c}):u(a)}}},{package:"$root$",file:"app/scripts/lib/segment/index.js"}],[1660,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/types/abi.js"}],[1661,{"./abi":1660},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./abi"),r)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/types/index.js"}],[1662,{"@metamask/utils":2967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.padEnd=r.padStart=r.set=void 0;const n=e("@metamask/utils");r.set=(e,t,r)=>(0,n.concatBytes)([e.subarray(0,r),t,e.subarray(r+t.length)]);r.padStart=(e,t=32)=>{const r=new Uint8Array(Math.max(t-e.length,0)).fill(0);return(0,n.concatBytes)([r,e])};r.padEnd=(e,t=32)=>{const r=new Uint8Array(Math.max(t-e.length,0)).fill(0);return(0,n.concatBytes)([e,r])}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/utils/buffer.js"}],[1663,{"./buffer":1662},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./buffer"),r)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/utils/index.js"}],[1664,{"./utils":1669,"@scure/base":1686,buffer:4079,tweetnacl:5638},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.getEncryptionPublicKey=r.decryptSafely=r.decrypt=r.encryptSafely=r.encrypt=void 0;const o=e("@scure/base"),a=s(e("tweetnacl")),c=e("./utils");function u({publicKey:e,data:t,version:r}){if((0,c.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,c.isNullish)(t))throw new Error("Missing data parameter");if((0,c.isNullish)(r))throw new Error("Missing version parameter");if("x25519-xsalsa20-poly1305"===r){if("string"!=typeof t)throw new Error("Message data must be given as a string");const r=a.box.keyPair();let n;try{n=o.base64.decode(e)}catch(e){throw new Error("Bad public key")}const i=o.utf8.decode(t),s=a.randomBytes(a.box.nonceLength),c=a.box(i,s,n,r.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:o.base64.encode(s),ephemPublicKey:o.base64.encode(r.publicKey),ciphertext:o.base64.encode(c)}}throw new Error("Encryption type/version not supported")}function l({encryptedData:e,privateKey:r}){if((0,c.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,c.isNullish)(r))throw new Error("Missing privateKey parameter");if("x25519-xsalsa20-poly1305"===e.version){const n=t.from(r,"hex"),i=a.box.keyPair.fromSecretKey(n).secretKey,s=o.base64.decode(e.nonce),c=o.base64.decode(e.ciphertext),u=o.base64.decode(e.ephemPublicKey),l=a.box.open(c,s,u,i);try{if(!l)throw new Error;const e=o.utf8.encode(l);if(!e)throw new Error;return e}catch(e){if(e&&"string"==typeof e.message&&e.message.length)throw new Error(`Decryption failed: ${e.message}`);throw new Error("Decryption failed.")}}throw new Error("Encryption type/version not supported.")}r.encrypt=u,r.encryptSafely=function({publicKey:e,data:r,version:n}){if((0,c.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,c.isNullish)(r))throw new Error("Missing data parameter");if((0,c.isNullish)(n))throw new Error("Missing version parameter");if("object"==typeof r&&r&&"toJSON"in r)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");const i={data:r,padding:""},s=t.byteLength(JSON.stringify(i),"utf-8")%2048;let o=0;return s>0&&(o=2048-s-16),i.padding="0".repeat(o),u({publicKey:e,data:JSON.stringify(i),version:n})},r.decrypt=l,r.decryptSafely=function({encryptedData:e,privateKey:t}){if((0,c.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,c.isNullish)(t))throw new Error("Missing privateKey parameter");return JSON.parse(l({encryptedData:e,privateKey:t})).data},r.getEncryptionPublicKey=function(e){const r=t.from(e,"hex"),n=a.box.keyPair.fromSecretKey(r).publicKey;return o.base64.encode(n)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/dist/encryption.js"}],[1665,{"./encryption":1664,"./personal-sign":1666,"./sign-eip7702-authorization":1667,"./sign-typed-data":1668,"./utils":1669},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.normalize=r.concatSig=void 0,i(e("./personal-sign"),r),i(e("./sign-typed-data"),r),i(e("./encryption"),r),i(e("./sign-eip7702-authorization"),r);var s=e("./utils");Object.defineProperty(r,"concatSig",{enumerable:!0,get:function(){return s.concatSig}}),Object.defineProperty(r,"normalize",{enumerable:!0,get:function(){return s.normalize}})}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/dist/index.js"}],[1666,{"./utils":1669,"@ethereumjs/util":1678},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.extractPublicKey=r.recoverPersonalSignature=r.personalSign=void 0;const n=e("@ethereumjs/util"),i=e("./utils");function s(e,t){const r=(0,n.hashPersonalMessage)((0,i.legacyToBuffer)(e));return(0,i.recoverPublicKey)(r,t)}r.personalSign=function({privateKey:e,data:t}){if((0,i.isNullish)(t))throw new Error("Missing data parameter");if((0,i.isNullish)(e))throw new Error("Missing privateKey parameter");const r=(0,i.legacyToBuffer)(t),s=(0,n.hashPersonalMessage)(r),o=(0,n.ecsign)(s,e);return(0,i.concatSig)((0,n.toBuffer)(o.v),o.r,o.s)},r.recoverPersonalSignature=function({data:e,signature:t}){if((0,i.isNullish)(e))throw new Error("Missing data parameter");if((0,i.isNullish)(t))throw new Error("Missing signature parameter");const r=s(e,t),o=(0,n.publicToAddress)(r);return(0,n.bufferToHex)(o)},r.extractPublicKey=function({data:e,signature:t}){if((0,i.isNullish)(e))throw new Error("Missing data parameter");if((0,i.isNullish)(t))throw new Error("Missing signature parameter");return`0x${s(e,t).toString("hex")}`}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/dist/personal-sign.js"}],[1667,{"./utils":1669,"@ethereumjs/rlp":1670,"@ethereumjs/util":1678,"@metamask/utils":2967,buffer:4079,"ethereum-cryptography/keccak":4312},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.hashEIP7702Authorization=r.recoverEIP7702Authorization=r.signEIP7702Authorization=void 0;const n=e("@ethereumjs/rlp"),i=e("@ethereumjs/util"),s=e("@metamask/utils"),o=e("ethereum-cryptography/keccak"),a=e("./utils");function c(e){u(e);const r=(0,n.encode)(e),i=t.concat([t.from("05","hex"),r]);return t.from((0,o.keccak256)(i))}function u(e){if((0,a.isNullish)(e))throw new Error("Missing authorization parameter");const[t,r,n]=e;if((0,a.isNullish)(t))throw new Error("Missing chainId parameter");if((0,a.isNullish)(r))throw new Error("Missing contractAddress parameter");if((0,a.isNullish)(n))throw new Error("Missing nonce parameter")}r.signEIP7702Authorization=function({privateKey:e,authorization:t}){if(u(t),(0,a.isNullish)(e))throw new Error("Missing privateKey parameter");const r=c(t),{r:n,s:s,v:o}=(0,i.ecsign)(r,e),l=(0,i.toBuffer)(o);return(0,a.concatSig)(l,n,s)},r.recoverEIP7702Authorization=function({signature:e,authorization:t}){if(u(t),(0,a.isNullish)(e))throw new Error("Missing signature parameter");const r=c(t),n=(0,a.recoverPublicKey)(r,e),o=(0,i.publicToAddress)(n);return(0,s.bytesToHex)(o)},r.hashEIP7702Authorization=c}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/dist/sign-eip7702-authorization.js"}],[1668,{"./utils":1669,"@ethereumjs/util":1678,"@metamask/abi-utils":1646,"@metamask/abi-utils/dist/parsers":1655,"@metamask/abi-utils/dist/utils":1663,"@metamask/utils":2967,"ethereum-cryptography/keccak":4312},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.recoverTypedSignature=r.signTypedData=r.typedSignatureHash=r.TypedDataUtils=r.TYPED_MESSAGE_SCHEMA=r.SignTypedDataVersion=void 0;const n=e("@ethereumjs/util"),i=e("@metamask/abi-utils"),s=e("@metamask/abi-utils/dist/parsers"),o=e("@metamask/abi-utils/dist/utils"),a=e("@metamask/utils"),c=e("ethereum-cryptography/keccak"),u=e("./utils");var l;function d(e,t){if(!Object.keys(l).includes(e))throw new Error(`Invalid version: '${e}'`);if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}function f(e,t){(0,a.assert)(null!==t,`Unable to encode value: Invalid number. Expected a valid number value, but received "${t}".`);const r=BigInt(t),n=(0,s.getLength)(e),i=BigInt(2)**BigInt(n)-BigInt(1);return(0,a.assert)(r>=-i&&r<=i,`Unable to encode value: Number "${t}" is out of range for type "${e}".`),r}function p(e){let t=BigInt(0);for(let r=0;r<e.length;r++){const n=BigInt(e.charCodeAt(r)-48);t*=BigInt(10),t+=n>=49?n-BigInt(49)+BigInt(10):n>=17?n-BigInt(17)+BigInt(10):n}return(0,o.padStart)((0,a.bigIntToBytes)(t),20)}function h(e,t,r,s,u){if(d(u,[l.V3,l.V4]),e[r]!==undefined)return["bytes32",u===l.V4&&null==s?"0x0000000000000000000000000000000000000000000000000000000000000000":(0,n.arrToBufArr)((0,c.keccak256)(m(r,s,e,u)))];if("function"===r)throw new Error('Unsupported or invalid type: "function"');if(s===undefined)throw new Error(`missing value for field ${t} of type ${r}`);if("address"===r){if("number"==typeof s)return["address",(0,o.padStart)((0,a.numberToBytes)(s),20)];if((0,a.isStrictHexString)(s))return["address",(0,a.add0x)(s)];if("string"==typeof s)return["address",p(s).subarray(0,20)]}if("bool"===r)return["bool",Boolean(s)];if("bytes"===r)return"number"==typeof s?s=(0,a.numberToBytes)(s):(0,a.isStrictHexString)(s)||"0x"===s?s=(0,a.hexToBytes)(s):"string"==typeof s&&(s=(0,a.stringToBytes)(s)),["bytes32",(0,n.arrToBufArr)((0,c.keccak256)(s))];if(r.startsWith("bytes")&&"bytes"!==r&&!r.includes("["))return"number"==typeof s?s<0?["bytes32",new Uint8Array(32)]:["bytes32",(0,a.bigIntToBytes)(BigInt(s))]:(0,a.isStrictHexString)(s)?["bytes32",(0,a.hexToBytes)(s)]:["bytes32",s];if(r.startsWith("int")&&!r.includes("[")){const e=f(r,s);return e>=BigInt(0)?["uint256",e]:["int256",e]}if("string"===r)return s="number"==typeof s?(0,a.numberToBytes)(s):(0,a.stringToBytes)(null!=s?s:""),["bytes32",(0,n.arrToBufArr)((0,c.keccak256)(s))];if(r.endsWith("]")){if(u===l.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");const o=r.slice(0,r.lastIndexOf("[")),a=s.map((r=>h(e,t,o,r,u)));return["bytes32",(0,n.arrToBufArr)((0,c.keccak256)((0,i.encode)(a.map((([e])=>e)),a.map((([,e])=>e)))))]}return[r,s]}function m(e,t,r,s){d(s,[l.V3,l.V4]);const o=["bytes32"],a=[w(e,r)];for(const n of r[e]){if(s===l.V3&&t[n.name]===undefined)continue;const[e,i]=h(r,n.name,n.type,t[n.name],s);o.push(e),a.push(i)}return(0,n.arrToBufArr)((0,i.encode)(o,a))}function g(e,t){let r="";const n=y(e,t);n.delete(e);const i=[e,...Array.from(n).sort()];for(const e of i){if(!t[e])throw new Error(`No type definition specified: ${e}`);r+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`}return r}function y(e,t,r=new Set){if("string"!=typeof e)throw new Error(`Invalid findTypeDependencies input ${JSON.stringify(e)}`);const n=e.match(/^\w*/u);if([e]=n,r.has(e)||t[e]===undefined)return r;r.add(e);for(const n of t[e])y(n.type,t,r);return r}function b(e,t,r,i){d(i,[l.V3,l.V4]);const s=m(e,t,r,i),o=(0,c.keccak256)(s);return(0,n.arrToBufArr)(o)}function w(e,t){const r=(0,a.stringToBytes)(g(e,t));return(0,n.arrToBufArr)((0,c.keccak256)(r))}function E(e){const t={};for(const n in r.TYPED_MESSAGE_SCHEMA.properties)e[n]&&(t[n]=e[n]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}function T(e,t){d(t,[l.V3,l.V4]);const r=E(e),{domain:n}=r;return b("EIP712Domain",n,{EIP712Domain:r.types.EIP712Domain},t)}function k(e,t){if((0,s.isArrayType)(e)&&Array.isArray(t)){const[r]=(0,s.getArrayType)(e);return t.map((e=>k(r,e)))}if("address"===e){if((0,a.isStrictHexString)(t))return(0,o.padStart)((0,a.hexToBytes)(t).subarray(0,20),20);if(t instanceof Uint8Array)return(0,o.padStart)(t.subarray(0,20),20)}if("bool"===e)return Boolean(t);if(e.startsWith("bytes")&&"bytes"!==e){const r=(0,s.getByteLength)(e);if("number"==typeof t)return t<0?new Uint8Array:(0,a.numberToBytes)(t).subarray(0,r);if((0,a.isStrictHexString)(t))return(0,a.hexToBytes)(t).subarray(0,r);if(t instanceof Uint8Array)return t.subarray(0,r)}if(e.startsWith("uint")&&"number"==typeof t)return Math.abs(t);if(e.startsWith("int")&&"number"==typeof t){const r=(0,s.getLength)(e);return BigInt.asIntN(r,BigInt(t))}return t}function v(e,t){return t.map((t=>{if("string"==typeof t||"number"==typeof t||"bigint"==typeof t){const r=f(e,t);if(r>=BigInt(0))return(0,o.padStart)((0,a.bigIntToBytes)(r),32);const n=(0,s.getLength)(e),i=BigInt.asIntN(n,r);return(0,a.signedBigIntToBytes)(i,32)}return t}))}function _(e){const t=new Error("Expect argument to be non-empty array");if("object"!=typeof e||!("length"in e)||!e.length)throw t;const r=e.map((({name:e,type:t,value:r})=>{if("address[]"===t)return{name:e,type:"bytes32[]",value:(n=r,n.map((e=>"number"==typeof e?(0,o.padStart)((0,a.numberToBytes)(e),32):(0,a.isStrictHexString)(e)?(0,o.padStart)((0,a.hexToBytes)(e).subarray(0,32),32):e instanceof Uint8Array?(0,o.padStart)(e.subarray(0,32),32):e)))};var n;if(t.startsWith("int")&&(0,s.isArrayType)(t)){const[n,i]=(0,s.getArrayType)(t);return{name:e,type:`bytes32[${null!=i?i:""}]`,value:v(n,r)}}return{name:e,type:t,value:k(t,r)}})),l=r.map((e=>"bytes"!==e.type?e.value:(0,u.legacyToBuffer)(e.value))),d=r.map((e=>{if("function"===e.type)throw new Error('Unsupported or invalid type: "function"');return e.type})),f=e.map((e=>{if(!e.name)throw t;return`${e.type} ${e.name}`}));return(0,n.arrToBufArr)((0,c.keccak256)((0,i.encodePacked)(["bytes32","bytes32"],[(0,c.keccak256)((0,i.encodePacked)(["string[]"],[f],!0)),(0,c.keccak256)((0,i.encodePacked)(d,l,!0))])))}!function(e){e.V1="V1",e.V3="V3",e.V4="V4"}(l=r.SignTypedDataVersion||(r.SignTypedDataVersion={})),r.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},r.TypedDataUtils={encodeData:m,encodeType:g,findTypeDependencies:y,hashStruct:b,hashType:w,sanitizeData:E,eip712Hash:function(e,t){d(t,[l.V3,l.V4]);const r=E(e),i=[(0,a.hexToBytes)("1901")];return i.push(T(e,t)),"EIP712Domain"!==r.primaryType&&i.push(b(r.primaryType,r.message,r.types,t)),(0,n.arrToBufArr)((0,c.keccak256)((0,a.concatBytes)(i)))},eip712DomainHash:T},r.typedSignatureHash=function(e){const t=_(e);return(0,a.bytesToHex)(t)},r.signTypedData=function({privateKey:e,data:t,version:i}){if(d(i),(0,u.isNullish)(t))throw new Error("Missing data parameter");if((0,u.isNullish)(e))throw new Error("Missing private key parameter");const s=i===l.V1?_(t):r.TypedDataUtils.eip712Hash(t,i),o=(0,n.ecsign)(s,e);return(0,u.concatSig)((0,n.arrToBufArr)((0,a.bigIntToBytes)(o.v)),o.r,o.s)},r.recoverTypedSignature=function({data:e,signature:t,version:i}){if(d(i),(0,u.isNullish)(e))throw new Error("Missing data parameter");if((0,u.isNullish)(t))throw new Error("Missing signature parameter");const s=i===l.V1?_(e):r.TypedDataUtils.eip712Hash(e,i),o=(0,u.recoverPublicKey)(s,t),c=(0,n.publicToAddress)(o);return(0,a.bytesToHex)(c)}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/dist/sign-typed-data.js"}],[1669,{"@ethereumjs/util":1678,"@metamask/utils":2967,buffer:4079},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.normalize=r.recoverPublicKey=r.concatSig=r.legacyToBuffer=r.isNullish=r.padWithZeroes=void 0;const n=e("@ethereumjs/util"),i=e("@metamask/utils");function s(e,t){if(""!==e&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}function o(e){return null===e||e===undefined}r.padWithZeroes=s,r.isNullish=o,r.legacyToBuffer=function(e){return"string"!=typeof e||(0,n.isHexString)(e)?(0,n.toBuffer)(e):t.from(e)},r.concatSig=function(e,t,r){const o=(0,n.fromSigned)(t),a=(0,n.fromSigned)(r),c=(0,n.bufferToInt)(e),u=s((0,n.toUnsigned)(o).toString("hex"),64),l=s((0,n.toUnsigned)(a).toString("hex"),64),d=(0,i.remove0x)((0,i.numberToHex)(c));return(0,i.add0x)(u.concat(l,d))},r.recoverPublicKey=function(e,t){const r=(0,n.fromRpcSig)(t);return(0,n.ecrecover)(e,r.v,r.r,r.s)},r.normalize=function(e){if(o(e))return undefined;if("number"==typeof e){if(e<0)return"0x";const t=(0,i.numberToBytes)(e);e=(0,i.bytesToHex)(t)}if("string"!=typeof e){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return(0,i.add0x)(e.toLowerCase())}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/dist/utils.js"}],[1670,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(Array.isArray(e)){const t=[];let r=0;for(let i=0;i<e.length;i++){const s=n(e[i]);t.push(s),r+=s.length}return p(o(r,192),...t)}const t=y(e);return 1===t.length&&t[0]<128?t:p(o(t.length,128),t)}function i(e,t,r){if(r>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,r)}function s(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return d(l(e))}function o(e,t){if(e<56)return Uint8Array.from([e+t]);const r=m(e),n=m(t+55+r.length/2);return Uint8Array.from(f(n+r))}function a(e,t=!1){if(null==e||0===e.length)return Uint8Array.from([]);const r=c(y(e));if(t)return r;if(0!==r.remainder.length)throw new Error("invalid RLP: remainder must be zero");return r.data}function c(e){let t,r,n,o,a;const u=[],l=e[0];if(l<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(l<=183){if(t=l-127,n=128===l?Uint8Array.from([]):i(e,1,t),2===t&&n[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:n,remainder:e.slice(t)}}if(l<=191){if(r=l-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=s(i(e,1,r)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return n=i(e,r,t+r),{data:n,remainder:e.slice(t+r)}}if(l<=247){for(t=l-191,o=i(e,1,t);o.length;)a=c(o),u.push(a.data),o=a.remainder;return{data:u,remainder:e.slice(t)}}{if(r=l-246,t=s(i(e,1,r)),t<56)throw new Error("invalid RLP: encoded list too short");const n=r+t;if(n>e.length)throw new Error("invalid RLP: total length is larger than the data");for(o=i(e,r,n);o.length;)a=c(o),u.push(a.data),o=a.remainder;return{data:u,remainder:e.slice(n)}}}Object.defineProperty(r,"__esModule",{value:!0}),r.RLP=r.utils=r.decode=r.encode=void 0,r.encode=n,r.decode=a;const u=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function l(e){let t="";for(let r=0;r<e.length;r++)t+=u[e[r]];return t}function d(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function f(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r;t[r]=d(e.slice(n,n+2))}return t}function p(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}function h(e){return(new TextEncoder).encode(e)}function m(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function g(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function y(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return g(e)?f((t="string"!=typeof(r=e)?r:g(r)?r.slice(2):r).length%2?`0${t}`:t):h(e);var t,r;if("number"==typeof e||"bigint"==typeof e)return e?f(m(e)):Uint8Array.from([]);if(null===e||e===undefined)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}r.utils={bytesToHex:l,concatBytes:p,hexToBytes:f,utf8ToBytes:h},r.RLP={encode:n,decode:a}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/rlp",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/rlp/dist/index.js"}],[1671,{"./bytes":1674,"./constants":1675,"./helpers":1677,"./internal":1679,"@ethereumjs/rlp":1670,buffer:4079,"ethereum-cryptography/keccak":4312,"ethereum-cryptography/secp256k1":4333,"ethereum-cryptography/utils":4335},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.accountBodyToRLP=r.accountBodyToSlim=r.accountBodyFromSlim=r.isZeroAddress=r.zeroAddress=r.importPublic=r.privateToAddress=r.privateToPublic=r.publicToAddress=r.pubToAddress=r.isValidPublic=r.isValidPrivate=r.generateAddress2=r.generateAddress=r.isValidChecksumAddress=r.toChecksumAddress=r.isValidAddress=r.Account=void 0;const n=e("@ethereumjs/rlp"),i=e("ethereum-cryptography/keccak"),s=e("ethereum-cryptography/secp256k1"),o=e("ethereum-cryptography/utils"),a=e("./bytes"),c=e("./constants"),u=e("./helpers"),l=e("./internal"),d=BigInt(0);class f{constructor(e=d,t=d,r=c.KECCAK256_RLP,n=c.KECCAK256_NULL){this.nonce=e,this.balance=t,this.storageRoot=r,this.codeHash=n,this._validate()}static fromAccountData(e){const{nonce:t,balance:r,storageRoot:n,codeHash:i}=e;return new f(t!==undefined?(0,a.bufferToBigInt)((0,a.toBuffer)(t)):undefined,r!==undefined?(0,a.bufferToBigInt)((0,a.toBuffer)(r)):undefined,n!==undefined?(0,a.toBuffer)(n):undefined,i!==undefined?(0,a.toBuffer)(i):undefined)}static fromRlpSerializedAccount(e){const t=(0,a.arrToBufArr)(n.RLP.decode(Uint8Array.from(e)));if(!Array.isArray(t))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(t)}static fromValuesArray(e){const[t,r,n,i]=e;return new f((0,a.bufferToBigInt)(t),(0,a.bufferToBigInt)(r),n,i)}_validate(){if(this.nonce<d)throw new Error("nonce must be greater than zero");if(this.balance<d)throw new Error("balance must be greater than zero");if(32!==this.storageRoot.length)throw new Error("storageRoot must have a length of 32");if(32!==this.codeHash.length)throw new Error("codeHash must have a length of 32")}raw(){return[(0,a.bigIntToUnpaddedBuffer)(this.nonce),(0,a.bigIntToUnpaddedBuffer)(this.balance),this.storageRoot,this.codeHash]}serialize(){return t.from(n.RLP.encode((0,a.bufArrToArr)(this.raw())))}isContract(){return!this.codeHash.equals(c.KECCAK256_NULL)}isEmpty(){return this.balance===d&&this.nonce===d&&this.codeHash.equals(c.KECCAK256_NULL)}}r.Account=f;r.isValidAddress=function(e){try{(0,u.assertIsString)(e)}catch(e){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};r.toChecksumAddress=function(e,r){(0,u.assertIsHexString)(e);const n=(0,l.stripHexPrefix)(e).toLowerCase();let s="";if(r!==undefined){s=(0,a.bufferToBigInt)((0,a.toBuffer)(r)).toString()+"0x"}const c=t.from(s+n,"utf8"),d=(0,o.bytesToHex)((0,i.keccak256)(c));let f="0x";for(let e=0;e<n.length;e++)parseInt(d[e],16)>=8?f+=n[e].toUpperCase():f+=n[e];return f};r.isValidChecksumAddress=function(e,t){return(0,r.isValidAddress)(e)&&(0,r.toChecksumAddress)(e,t)===e};r.generateAddress=function(e,r){return(0,u.assertIsBuffer)(e),(0,u.assertIsBuffer)(r),(0,a.bufferToBigInt)(r)===BigInt(0)?t.from((0,i.keccak256)(n.RLP.encode((0,a.bufArrToArr)([e,null])))).slice(-20):t.from((0,i.keccak256)(n.RLP.encode((0,a.bufArrToArr)([e,r])))).slice(-20)};r.generateAddress2=function(e,r,n){if((0,u.assertIsBuffer)(e),(0,u.assertIsBuffer)(r),(0,u.assertIsBuffer)(n),20!==e.length)throw new Error("Expected from to be of length 20");if(32!==r.length)throw new Error("Expected salt to be of length 32");const s=(0,i.keccak256)(t.concat([t.from("ff","hex"),e,r,(0,i.keccak256)(n)]));return(0,a.toBuffer)(s).slice(-20)};r.isValidPrivate=function(e){return s.secp256k1.utils.isValidPrivateKey(e)};r.isValidPublic=function(e,r=!1){if((0,u.assertIsBuffer)(e),64===e.length)try{return s.secp256k1.ProjectivePoint.fromHex(t.concat([t.from([4]),e])),!0}catch(e){return!1}if(!r)return!1;try{return s.secp256k1.ProjectivePoint.fromHex(e),!0}catch(e){return!1}};r.pubToAddress=function(e,r=!1){if((0,u.assertIsBuffer)(e),r&&64!==e.length&&(e=t.from(s.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),64!==e.length)throw new Error("Expected pubKey to be of length 64");return t.from((0,i.keccak256)(e)).slice(-20)},r.publicToAddress=r.pubToAddress;r.privateToPublic=function(e){return(0,u.assertIsBuffer)(e),t.from(s.secp256k1.ProjectivePoint.fromPrivateKey(e).toRawBytes(!1).slice(1))};r.privateToAddress=function(e){return(0,r.publicToAddress)((0,r.privateToPublic)(e))};r.importPublic=function(e){return(0,u.assertIsBuffer)(e),64!==e.length&&(e=t.from(s.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),e};r.zeroAddress=function(){const e=(0,a.zeros)(20);return(0,a.bufferToHex)(e)};function p(e){const[t,r,n,i]=e;return[t,r,0===(0,a.arrToBufArr)(n).length?c.KECCAK256_RLP:n,0===(0,a.arrToBufArr)(i).length?c.KECCAK256_NULL:i]}r.isZeroAddress=function(e){try{(0,u.assertIsString)(e)}catch(e){return!1}return(0,r.zeroAddress)()===e},r.accountBodyFromSlim=p;const h=new Uint8Array(0);r.accountBodyToSlim=function(e){const[t,r,n,i]=e;return[t,r,(0,a.arrToBufArr)(n).equals(c.KECCAK256_RLP)?h:n,(0,a.arrToBufArr)(i).equals(c.KECCAK256_NULL)?h:i]},r.accountBodyToRLP=function(e,t=!0){const r=t?p(e):e;return(0,a.arrToBufArr)(n.RLP.encode(r))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/account.js"}],[1672,{"./account":1671,"./bytes":1674,buffer:4079},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Address=void 0;const n=e("./account"),i=e("./bytes");class s{constructor(e){if(20!==e.length)throw new Error("Invalid address length");this.buf=e}static zero(){return new s((0,i.zeros)(20))}static fromString(e){if(!(0,n.isValidAddress)(e))throw new Error("Invalid address");return new s((0,i.toBuffer)(e))}static fromPublicKey(e){if(!t.isBuffer(e))throw new Error("Public key should be Buffer");const r=(0,n.pubToAddress)(e);return new s(r)}static fromPrivateKey(e){if(!t.isBuffer(e))throw new Error("Private key should be Buffer");const r=(0,n.privateToAddress)(e);return new s(r)}static generate(e,t){if("bigint"!=typeof t)throw new Error("Expected nonce to be a bigint");return new s((0,n.generateAddress)(e.buf,(0,i.bigIntToBuffer)(t)))}static generate2(e,r,i){if(!t.isBuffer(r))throw new Error("Expected salt to be a Buffer");if(!t.isBuffer(i))throw new Error("Expected initCode to be a Buffer");return new s((0,n.generateAddress2)(e.buf,r,i))}equals(e){return this.buf.equals(e.buf)}isZero(){return this.equals(s.zero())}isPrecompileOrSystemAddress(){const e=(0,i.bufferToBigInt)(this.buf),t=BigInt(0),r=BigInt("0xffff");return e>=t&&e<=r}toString(){return"0x"+this.buf.toString("hex")}toBuffer(){return t.from(this.buf)}}r.Address=s}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/address.js"}],[1673,{events:4415},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AsyncEventEmitter=void 0;const n=e("events");class i extends n.EventEmitter{emit(e,...t){let[r,n]=t;const i=this;let s=i._events[e]??[];return n===undefined&&"function"==typeof r&&(n=r,r=undefined),"newListener"!==e&&"removeListener"!==e||(r={event:r,fn:n},n=undefined),s=Array.isArray(s)?s:[s],async function(e,t,r){let n;for await(const i of t)try{i.length<2?i.call(e,r):await new Promise(((t,n)=>{i.call(e,r,(e=>{e?n(e):t()}))}))}catch(e){n=e}if(n)throw n}(i,s.slice(),r).then(n).catch(n),i.listenerCount(e)>0}once(e,t){const r=this;let n;if("function"!=typeof t)throw new TypeError("listener must be a function");return n=t.length>=2?function(i,s){r.removeListener(e,n),t(i,s)}:function(i){r.removeListener(e,n),t(i,n)},r.on(e,n),r}first(e,t){let r=this._events[e]??[];if("function"!=typeof t)throw new TypeError("listener must be a function");return Array.isArray(r)||(this._events[e]=r=[r]),r.unshift(t),this}before(e,t,r){return this.beforeOrAfter(e,t,r)}after(e,t,r){return this.beforeOrAfter(e,t,r,"after")}beforeOrAfter(e,t,r,n){let i,s,o=this._events[e]??[];const a="after"===n?1:0;if("function"!=typeof r)throw new TypeError("listener must be a function");if("function"!=typeof t)throw new TypeError("target must be a function");for(Array.isArray(o)||(this._events[e]=o=[o]),s=o.length,i=o.length;i--;)if(o[i]===t){s=i+a;break}return o.splice(s,0,r),this}on(e,t){return super.on(e,t)}addListener(e,t){return super.addListener(e,t)}prependListener(e,t){return super.prependListener(e,t)}prependOnceListener(e,t){return super.prependOnceListener(e,t)}removeAllListeners(e){return super.removeAllListeners(e)}removeListener(e,t){return super.removeListener(e,t)}eventNames(){return super.eventNames()}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(e){return super.setMaxListeners(e)}}r.AsyncEventEmitter=i}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/asyncEventEmitter.js"}],[1674,{"./helpers":1677,"./internal":1679,buffer:4079},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.intToUnpaddedBuffer=r.bigIntToUnpaddedBuffer=r.bigIntToHex=r.bufArrToArr=r.arrToBufArr=r.validateNoLeadingZeroes=r.baToJSON=r.toUtf8=r.short=r.addHexPrefix=r.toUnsigned=r.fromSigned=r.bufferToInt=r.bigIntToBuffer=r.bufferToBigInt=r.bufferToHex=r.toBuffer=r.unpadHexString=r.unpadArray=r.unpadBuffer=r.setLengthRight=r.setLengthLeft=r.zeros=r.intToBuffer=r.intToHex=void 0;const n=e("./helpers"),i=e("./internal");r.intToHex=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};r.intToBuffer=function(e){const n=(0,r.intToHex)(e);return t.from((0,i.padToEven)(n.slice(2)),"hex")};r.zeros=function(e){return t.allocUnsafe(e).fill(0)};const s=function(e,t,n){const i=(0,r.zeros)(t);return n?e.length<t?(e.copy(i),i):e.slice(0,t):e.length<t?(e.copy(i,t-e.length),i):e.slice(-t)};r.setLengthLeft=function(e,t){return(0,n.assertIsBuffer)(e),s(e,t,!1)};r.setLengthRight=function(e,t){return(0,n.assertIsBuffer)(e),s(e,t,!0)};const o=function(e){let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e};r.unpadBuffer=function(e){return(0,n.assertIsBuffer)(e),o(e)};r.unpadArray=function(e){return(0,n.assertIsArray)(e),o(e)};r.unpadHexString=function(e){return(0,n.assertIsHexString)(e),e=(0,i.stripHexPrefix)(e),"0x"+o(e)};r.toBuffer=function(e){if(null===e||e===undefined)return t.allocUnsafe(0);if(t.isBuffer(e))return t.from(e);if(Array.isArray(e)||e instanceof Uint8Array)return t.from(e);if("string"==typeof e){if(!(0,i.isHexString)(e))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${e}`);return t.from((0,i.padToEven)((0,i.stripHexPrefix)(e)),"hex")}if("number"==typeof e)return(0,r.intToBuffer)(e);if("bigint"==typeof e){if(e<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${e}`);let r=e.toString(16);return r.length%2&&(r="0"+r),t.from(r,"hex")}if(e.toArray)return t.from(e.toArray());if(e.toBuffer)return t.from(e.toBuffer());throw new Error("invalid type")};function a(e){const t=(0,r.bufferToHex)(e);return"0x"===t?BigInt(0):BigInt(t)}function c(e){return(0,r.toBuffer)("0x"+e.toString(16))}r.bufferToHex=function(e){return"0x"+(e=(0,r.toBuffer)(e)).toString("hex")},r.bufferToBigInt=a,r.bigIntToBuffer=c;r.bufferToInt=function(e){const t=Number(a(e));if(!Number.isSafeInteger(t))throw new Error("Number exceeds 53 bits");return t};r.fromSigned=function(e){return BigInt.asIntN(256,a(e))};r.toUnsigned=function(e){return c(BigInt.asUintN(256,e))};r.addHexPrefix=function(e){return"string"!=typeof e||(0,i.isHexPrefixed)(e)?e:"0x"+e},r.short=function(e,r=50){const n=t.isBuffer(e)?e.toString("hex"):e;return n.length<=r?n:n.slice(0,r)+""};r.toUtf8=function(e){if((e=(0,i.stripHexPrefix)(e)).length%2!=0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return t.from(e.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")};r.baToJSON=function(e){if(t.isBuffer(e))return`0x${e.toString("hex")}`;if(e instanceof Array){const t=[];for(let n=0;n<e.length;n++)t.push((0,r.baToJSON)(e[n]));return t}};r.validateNoLeadingZeroes=function(e){for(const[t,r]of Object.entries(e))if(r!==undefined&&r.length>0&&0===r[0])throw new Error(`${t} cannot have leading zeroes, received: ${r.toString("hex")}`)},r.arrToBufArr=function e(r){return Array.isArray(r)?r.map((t=>e(t))):t.from(r)},r.bufArrToArr=function e(t){return Array.isArray(t)?t.map((t=>e(t))):Uint8Array.from(t??[])};r.bigIntToHex=e=>"0x"+e.toString(16),r.bigIntToUnpaddedBuffer=function(e){return(0,r.unpadBuffer)(c(e))},r.intToUnpaddedBuffer=function(e){return(0,r.unpadBuffer)((0,r.intToBuffer)(e))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/bytes.js"}],[1675,{buffer:4079,"ethereum-cryptography/secp256k1":4333},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MAX_WITHDRAWALS_PER_PAYLOAD=r.RLP_EMPTY_STRING=r.KECCAK256_RLP=r.KECCAK256_RLP_S=r.KECCAK256_RLP_ARRAY=r.KECCAK256_RLP_ARRAY_S=r.KECCAK256_NULL=r.KECCAK256_NULL_S=r.TWO_POW256=r.SECP256K1_ORDER_DIV_2=r.SECP256K1_ORDER=r.MAX_INTEGER_BIGINT=r.MAX_INTEGER=r.MAX_UINT64=void 0;const n=e("buffer"),i=e("ethereum-cryptography/secp256k1");r.MAX_UINT64=BigInt("0xffffffffffffffff"),r.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),r.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),r.SECP256K1_ORDER=i.secp256k1.CURVE.n,r.SECP256K1_ORDER_DIV_2=i.secp256k1.CURVE.n/BigInt(2),r.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),r.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.KECCAK256_NULL=n.Buffer.from(r.KECCAK256_NULL_S,"hex"),r.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.KECCAK256_RLP_ARRAY=n.Buffer.from(r.KECCAK256_RLP_ARRAY_S,"hex"),r.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.KECCAK256_RLP=n.Buffer.from(r.KECCAK256_RLP_S,"hex"),r.RLP_EMPTY_STRING=n.Buffer.from([128]),r.MAX_WITHDRAWALS_PER_PAYLOAD=16}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/constants.js"}],[1676,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.compactBytesToNibbles=r.bytesToNibbles=r.nibblesToCompactBytes=r.nibblesToBytes=r.hasTerminator=void 0;r.hasTerminator=e=>e.length>0&&16===e[e.length-1];r.nibblesToBytes=(e,t)=>{for(let r=0,n=0;n<e.length;r+=1,n+=2)t[r]=e[n]<<4|e[n+1]};r.nibblesToCompactBytes=e=>{let t=0;(0,r.hasTerminator)(e)&&(t=1,e=e.subarray(0,e.length-1));const n=new Uint8Array(e.length/2+1);return n[0]=t<<5,1&~e.length||(n[0]|=16,n[0]|=e[0],e=e.subarray(1)),(0,r.nibblesToBytes)(e,n.subarray(1)),n};r.bytesToNibbles=e=>{const t=2*e.length+1,r=new Uint8Array(t);for(let t=0;t<e.length;t++){const n=e[t];r[2*t]=n/16,r[2*t+1]=n%16}return r[t-1]=16,r};r.compactBytesToNibbles=e=>{if(0===e.length)return e;let t=(0,r.bytesToNibbles)(e);t[0]<2&&(t=t.subarray(0,t.length-1));const n=2-(1&t[0]);return t.subarray(n)}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/encoding.js"}],[1677,{"../../../../../../../../../is-buffer/index.js":4673,"./internal":1679},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.assertIsString=r.assertIsArray=r.assertIsBuffer=r.assertIsHexString=void 0;const n=e("./internal");r.assertIsHexString=function(e){if(!(0,n.isHexString)(e)){throw new Error(`This method only supports 0x-prefixed hex strings but input was: ${e}`)}};r.assertIsBuffer=function(e){if(!t.isBuffer(e)){throw new Error(`This method only supports Buffer but input was: ${e}`)}};r.assertIsArray=function(e){if(!Array.isArray(e)){throw new Error(`This method only supports number arrays but input was: ${e}`)}};r.assertIsString=function(e){if("string"!=typeof e){throw new Error(`This method only supports strings but input was: ${e}`)}}}).call(this)}).call(this,{isBuffer:e("../../../../../../../../../is-buffer/index.js")})}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/helpers.js"}],[1678,{"./account":1671,"./address":1672,"./asyncEventEmitter":1673,"./bytes":1674,"./constants":1675,"./encoding":1676,"./internal":1679,"./lock":1680,"./provider":1681,"./signature":1682,"./types":1683,"./units":1684,"./withdrawal":1685},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.toAscii=r.stripHexPrefix=r.padToEven=r.isHexString=r.isHexPrefixed=r.getKeys=r.getBinarySize=r.fromUtf8=r.fromAscii=r.arrayContainsArray=void 0,i(e("./constants"),r),i(e("./units"),r),i(e("./account"),r),i(e("./address"),r),i(e("./withdrawal"),r),i(e("./signature"),r),i(e("./bytes"),r),i(e("./types"),r),i(e("./encoding"),r),i(e("./asyncEventEmitter"),r);var s=e("./internal");Object.defineProperty(r,"arrayContainsArray",{enumerable:!0,get:function(){return s.arrayContainsArray}}),Object.defineProperty(r,"fromAscii",{enumerable:!0,get:function(){return s.fromAscii}}),Object.defineProperty(r,"fromUtf8",{enumerable:!0,get:function(){return s.fromUtf8}}),Object.defineProperty(r,"getBinarySize",{enumerable:!0,get:function(){return s.getBinarySize}}),Object.defineProperty(r,"getKeys",{enumerable:!0,get:function(){return s.getKeys}}),Object.defineProperty(r,"isHexPrefixed",{enumerable:!0,get:function(){return s.isHexPrefixed}}),Object.defineProperty(r,"isHexString",{enumerable:!0,get:function(){return s.isHexString}}),Object.defineProperty(r,"padToEven",{enumerable:!0,get:function(){return s.padToEven}}),Object.defineProperty(r,"stripHexPrefix",{enumerable:!0,get:function(){return s.stripHexPrefix}}),Object.defineProperty(r,"toAscii",{enumerable:!0,get:function(){return s.toAscii}}),i(e("./lock"),r),i(e("./provider"),r)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/index.js"}],[1679,{buffer:4079},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){function t(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return"0"===e[0]&&"x"===e[1]}Object.defineProperty(r,"__esModule",{value:!0}),r.isHexString=r.getKeys=r.fromAscii=r.fromUtf8=r.toAscii=r.arrayContainsArray=r.getBinarySize=r.padToEven=r.stripHexPrefix=r.isHexPrefixed=void 0,r.isHexPrefixed=t;function n(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}r.stripHexPrefix=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return t(e)?e.slice(2):e},r.padToEven=n,r.getBinarySize=function(t){if("string"!=typeof t)throw new Error("[getBinarySize] method requires input type 'string', received "+typeof t);return e.byteLength(t,"utf8")},r.arrayContainsArray=function(e,t,r){if(!0!==Array.isArray(e))throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(!0!==Array.isArray(t))throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[!0===r?"some":"every"]((t=>e.indexOf(t)>=0))},r.toAscii=function(e){let t="",r=0;const n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){const n=parseInt(e.substr(r,2),16);t+=String.fromCharCode(n)}return t},r.fromUtf8=function(t){return`0x${n(e.from(t,"utf8").toString("hex")).replace(/^0+|0+$/g,"")}`},r.fromAscii=function(e){let t="";for(let r=0;r<e.length;r++){const n=e.charCodeAt(r).toString(16);t+=n.length<2?`0${n}`:n}return`0x${t}`},r.getKeys=function(e,t,r){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got "+typeof e);if("string"!=typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got "+typeof e);const n=[];for(let i=0;i<e.length;i++){let s=e[i][t];if(!0!==r||s){if("string"!=typeof s)throw new Error("invalid abi - expected type 'string', received "+typeof s)}else s="";n.push(s)}return n},r.isHexString=function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&!(void 0!==t&&t>0&&e.length!==2+2*t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/internal.js"}],[1680,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Lock=void 0;r.Lock=class{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise((e=>this.promiseResolverQueue.push(e)))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(1===this.permits&&this.promiseResolverQueue.length>0){this.permits-=1;const e=this.promiseResolverQueue.shift();e&&e(!0)}}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/lock.js"}],[1681,{"micro-ftch":4927},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getProvider=r.fetchFromProvider=void 0;const n=e("micro-ftch");r.fetchFromProvider=async(e,t)=>(await(0,n.default)(e,{headers:{"content-type":"application/json"},type:"json",data:{method:t.method,params:t.params,jsonrpc:"2.0",id:1}})).result;r.getProvider=e=>{if("string"==typeof e)return e;if(e?.connection?.url!==undefined)return e.connection.url;throw new Error("Must provide valid provider URL or Web3Provider")}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/provider.js"}],[1682,{"./bytes":1674,"./constants":1675,"./helpers":1677,buffer:4079,"ethereum-cryptography/keccak":4312,"ethereum-cryptography/secp256k1":4333},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.hashPersonalMessage=r.isValidSignature=r.fromRpcSig=r.toCompactSig=r.toRpcSig=r.ecrecover=r.ecsign=void 0;const n=e("ethereum-cryptography/keccak"),i=e("ethereum-cryptography/secp256k1"),s=e("./bytes"),o=e("./constants"),a=e("./helpers");function c(e,t){return e===BigInt(0)||e===BigInt(1)?e:t===undefined?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}function u(e){return e===BigInt(0)||e===BigInt(1)}r.ecsign=function(e,r,n){const s=i.secp256k1.sign(e,r),o=s.toCompactRawBytes();return{r:t.from(o.slice(0,32)),s:t.from(o.slice(32,64)),v:n===undefined?BigInt(s.recovery+27):BigInt(s.recovery+35)+BigInt(n)*BigInt(2)}};r.ecrecover=function(e,r,n,o,a){const l=t.concat([(0,s.setLengthLeft)(n,32),(0,s.setLengthLeft)(o,32)],64),d=c(r,a);if(!u(d))throw new Error("Invalid signature v value");const f=i.secp256k1.Signature.fromCompact(l).addRecoveryBit(Number(d)).recoverPublicKey(e);return t.from(f.toRawBytes(!1).slice(1))};r.toRpcSig=function(e,r,n,i){if(!u(c(e,i)))throw new Error("Invalid signature v value");return(0,s.bufferToHex)(t.concat([(0,s.setLengthLeft)(r,32),(0,s.setLengthLeft)(n,32),(0,s.toBuffer)(e)]))};r.toCompactSig=function(e,r,n,i){if(!u(c(e,i)))throw new Error("Invalid signature v value");let o=n;return(e>BigInt(28)&&e%BigInt(2)===BigInt(1)||e===BigInt(1)||e===BigInt(28))&&(o=t.from(n),o[0]|=128),(0,s.bufferToHex)(t.concat([(0,s.setLengthLeft)(r,32),(0,s.setLengthLeft)(o,32)]))};r.fromRpcSig=function(e){const t=(0,s.toBuffer)(e);let r,n,i;if(t.length>=65)r=t.slice(0,32),n=t.slice(32,64),i=(0,s.bufferToBigInt)(t.slice(64));else{if(64!==t.length)throw new Error("Invalid signature length");r=t.slice(0,32),n=t.slice(32,64),i=BigInt((0,s.bufferToInt)(t.slice(32,33))>>7),n[0]&=127}return i<27&&(i+=BigInt(27)),{v:i,r:r,s:n}};r.isValidSignature=function(e,t,r,n=!0,i){if(32!==t.length||32!==r.length)return!1;if(!u(c(e,i)))return!1;const a=(0,s.bufferToBigInt)(t),l=(0,s.bufferToBigInt)(r);return!(a===BigInt(0)||a>=o.SECP256K1_ORDER||l===BigInt(0)||l>=o.SECP256K1_ORDER)&&!(n&&l>=o.SECP256K1_ORDER_DIV_2)};r.hashPersonalMessage=function(e){(0,a.assertIsBuffer)(e);const r=t.from(`Ethereum Signed Message:\n${e.length}`,"utf-8");return t.from((0,n.keccak256)(t.concat([r,e])))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/signature.js"}],[1683,{"./bytes":1674,"./internal":1679},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toType=r.TypeOutput=void 0;const n=e("./bytes"),i=e("./internal");var s;!function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Buffer=2]="Buffer",e[e.PrefixedHexString=3]="PrefixedHexString"}(s=r.TypeOutput||(r.TypeOutput={})),r.toType=function(e,t){if(null===e)return null;if(e===undefined)return undefined;if("string"==typeof e&&!(0,i.isHexString)(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const r=(0,n.toBuffer)(e);switch(t){case s.Buffer:return r;case s.BigInt:return(0,n.bufferToBigInt)(r);case s.Number:{const e=(0,n.bufferToBigInt)(r);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case s.PrefixedHexString:return(0,n.bufferToHex)(r);default:throw new Error("unknown outputType")}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/types.js"}],[1684,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.GWEI_TO_WEI=void 0,r.GWEI_TO_WEI=BigInt(1e9)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/units.js"}],[1685,{"./address":1672,"./bytes":1674,"./types":1683,buffer:4079},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Withdrawal=void 0;const n=e("./address"),i=e("./bytes"),s=e("./types");class o{constructor(e,t,r,n){this.index=e,this.validatorIndex=t,this.address=r,this.amount=n}static fromWithdrawalData(e){const{index:t,validatorIndex:r,address:i,amount:a}=e,c=(0,s.toType)(t,s.TypeOutput.BigInt),u=(0,s.toType)(r,s.TypeOutput.BigInt),l=new n.Address((0,s.toType)(i,s.TypeOutput.Buffer)),d=(0,s.toType)(a,s.TypeOutput.BigInt);return new o(c,u,l,d)}static fromValuesArray(e){if(4!==e.length)throw Error(`Invalid withdrawalArray length expected=4 actual=${e.length}`);const[t,r,n,i]=e;return o.fromWithdrawalData({index:t,validatorIndex:r,address:n,amount:i})}static toBufferArray(e){const{index:r,validatorIndex:i,address:o,amount:a}=e,c=(0,s.toType)(r,s.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,s.toType)(r,s.TypeOutput.Buffer),u=(0,s.toType)(i,s.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,s.toType)(i,s.TypeOutput.Buffer);let l;l=o instanceof n.Address?o.buf:(0,s.toType)(o,s.TypeOutput.Buffer);return[c,u,l,(0,s.toType)(a,s.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,s.toType)(a,s.TypeOutput.Buffer)]}raw(){return o.toBufferArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.buf,amount:this.amount}}toJSON(){return{index:(0,i.bigIntToHex)(this.index),validatorIndex:(0,i.bigIntToHex)(this.validatorIndex),address:"0x"+this.address.buf.toString("hex"),amount:(0,i.bigIntToHex)(this.amount)}}}r.Withdrawal=o}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/util/dist/withdrawal.js"}],[1686,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function i(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function s(...e){const t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map((e=>e.encode)).reduceRight(r,t),decode:e.map((e=>e.decode)).reduce(r,t)}}function o(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(n(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const r=e.indexOf(t);if(-1===r)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}}function a(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function c(e,t="="){if(n(e),"string"!=typeof t)throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;r.length*e%8;)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let n=r.length;if(n*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if(!((n-1)*e%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function u(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function l(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let i=0;const s=[],o=Array.from(e);for(o.forEach((e=>{if(n(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,n=!0;for(let s=i;s<o.length;s++){const a=o[s],c=t*e+a;if(!Number.isSafeInteger(c)||t*e/t!==e||c-a!=t*e)throw new Error("convertRadix: carry overflow");e=c%r;const u=Math.floor(c/r);if(o[s]=u,!Number.isSafeInteger(u)||u*r+e!==c)throw new Error("convertRadix: carry overflow");n&&(u?n=!1:i=s)}if(s.push(e),n)break}for(let t=0;t<e.length-1&&0===e[t];t++)s.push(0);return s.reverse()}
/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(r,"__esModule",{value:!0}),r.bytes=r.stringToBytes=r.str=r.bytesToString=r.hex=r.utf8=r.bech32m=r.bech32=r.base58check=r.createBase58check=r.base58xmr=r.base58xrp=r.base58flickr=r.base58=r.base64urlnopad=r.base64url=r.base64nopad=r.base64=r.base32crockford=r.base32hexnopad=r.base32hex=r.base32nopad=r.base32=r.base16=r.utils=void 0,r.assertNumber=n;const d=(e,t)=>t?d(t,e%t):e,f=(e,t)=>e+(t-d(e,t));function p(e,t,r,i){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(f(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${f(t,r)}`);let s=0,o=0;const a=2**r-1,c=[];for(const i of e){if(n(i),i>=2**t)throw new Error(`convertRadix2: invalid data word=${i} from=${t}`);if(s=s<<t|i,o+t>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=r;o-=r)c.push((s>>o-r&a)>>>0);s&=2**o-1}if(s=s<<r-o&a,!i&&o>=t)throw new Error("Excess padding");if(!i&&s)throw new Error(`Non-zero padding: ${s}`);return i&&o>0&&c.push(s>>>0),c}function h(e){return n(e),{encode:t=>{if(!i(t))throw new Error("radix.encode input should be Uint8Array");return l(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(l(t,e,256))}}}function m(e,t=!1){if(n(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(f(8,e)>32||f(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!i(r))throw new Error("radix2.encode input should be Uint8Array");return p(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(p(r,e,8,t))}}}function g(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(e){}}}function y(e,t){if(n(e),"function"!=typeof t)throw new Error("checksum fn should be function");return{encode(r){if(!i(r))throw new Error("checksum.encode: input should be Uint8Array");const n=t(r).slice(0,e),s=new Uint8Array(r.length+e);return s.set(r),s.set(n,r.length),s},decode(r){if(!i(r))throw new Error("checksum.decode: input should be Uint8Array");const n=r.slice(0,-e),s=t(n).slice(0,e),o=r.slice(-e);for(let t=0;t<e;t++)if(s[t]!==o[t])throw new Error("Invalid checksum");return n}}}r.utils={alphabet:o,chain:s,checksum:y,convertRadix:l,convertRadix2:p,radix:h,radix2:m,join:a,padding:c},r.base16=s(m(4),o("0123456789ABCDEF"),a("")),r.base32=s(m(5),o("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),c(5),a("")),r.base32nopad=s(m(5),o("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),a("")),r.base32hex=s(m(5),o("0123456789ABCDEFGHIJKLMNOPQRSTUV"),c(5),a("")),r.base32hexnopad=s(m(5),o("0123456789ABCDEFGHIJKLMNOPQRSTUV"),a("")),r.base32crockford=s(m(5),o("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),a(""),u((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),r.base64=s(m(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),c(6),a("")),r.base64nopad=s(m(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),a("")),r.base64url=s(m(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),c(6),a("")),r.base64urlnopad=s(m(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),a(""));const b=e=>s(h(58),o(e),a(""));r.base58=b("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),r.base58flickr=b("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),r.base58xrp=b("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const w=[0,2,3,5,6,7,9,10,11];r.base58xmr={encode(e){let t="";for(let n=0;n<e.length;n+=8){const i=e.subarray(n,n+8);t+=r.base58.encode(i).padStart(w[i.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const i=e.slice(n,n+11),s=w.indexOf(i.length),o=r.base58.decode(i);for(let e=0;e<o.length-s;e++)if(0!==o[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(o.slice(o.length-s)))}return Uint8Array.from(t)}};r.createBase58check=e=>s(y(4,(t=>e(e(t)))),r.base58),r.base58check=r.createBase58check;const E=s(o("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),a("")),T=[996825010,642813549,513874426,1027748829,705979059];function k(e){const t=e>>25;let r=(33554431&e)<<5;for(let e=0;e<T.length;e++)1==(t>>e&1)&&(r^=T[e]);return r}function v(e,t,r=1){const n=e.length;let i=1;for(let t=0;t<n;t++){const r=e.charCodeAt(t);if(r<33||r>126)throw new Error(`Invalid prefix (${e})`);i=k(i)^r>>5}i=k(i);for(let t=0;t<n;t++)i=k(i)^31&e.charCodeAt(t);for(let e of t)i=k(i)^e;for(let e=0;e<6;e++)i=k(i);return i^=r,E.encode(p([i%2**30],30,5,!1))}function _(e){const t="bech32"===e?1:734539939,r=m(5),n=r.decode,i=r.encode,s=g(n);function o(e,r,n=90){if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(r instanceof Uint8Array&&(r=Array.from(r)),!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof r);if(0===e.length)throw new TypeError(`Invalid prefix length ${e.length}`);const i=e.length+7+r.length;if(!1!==n&&i>n)throw new TypeError(`Length ${i} exceeds limit ${n}`);const s=e.toLowerCase(),o=v(s,r,t);return`${s}1${E.encode(r)}${o}`}function a(e,r=90){if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==r&&e.length>r)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${r})`);const n=e.toLowerCase();if(e!==n&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=n.lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const s=n.slice(0,i),o=n.slice(i+1);if(o.length<6)throw new Error("Data must be at least 6 characters long");const a=E.decode(o).slice(0,-6),c=v(s,a,t);if(!o.endsWith(c))throw new Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:s,words:a}}return{encode:o,decode:a,encodeFromBytes:function(e,t){return o(e,i(t))},decodeToBytes:function(e){const{prefix:t,words:r}=a(e,!1);return{prefix:t,words:r,bytes:n(r)}},decodeUnsafe:g(a),fromWords:n,fromWordsUnsafe:s,toWords:i}}r.bech32=_("bech32"),r.bech32m=_("bech32m"),r.utf8={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},r.hex=s(m(4),o("0123456789abcdef"),a(""),u((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})));const A={utf8:r.utf8,hex:r.hex,base16:r.base16,base32:r.base32,base64:r.base64,base64url:r.base64url,base58:r.base58,base58xmr:r.base58xmr},S="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr";r.bytesToString=(e,t)=>{if("string"!=typeof e||!A.hasOwnProperty(e))throw new TypeError(S);if(!i(t))throw new TypeError("bytesToString() expects Uint8Array");return A[e].encode(t)},r.str=r.bytesToString;r.stringToBytes=(e,t)=>{if(!A.hasOwnProperty(e))throw new TypeError(S);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return A[e].decode(t)},r.bytes=r.stringToBytes}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@scure/base",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@scure/base/lib/index.js"}],[17,{"@metamask/profile-sync-controller/auth":2419,"@metamask/profile-sync-controller/sdk":2448},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AuthenticationControllerInit=void 0;var n=e("@metamask/profile-sync-controller/auth"),i=e("@metamask/profile-sync-controller/sdk");r.AuthenticationControllerInit=({controllerMessenger:e,persistedState:t,getMetaMetricsId:r})=>({controller:new n.Controller({messenger:e,state:t.AuthenticationController,metametrics:{getMetaMetricsId:r,agent:i.Platform.EXTENSION}})})}}},{package:"$root$",file:"app/scripts/controller-init/identity/authentication-controller-init.ts"}],[170,{"../../../../shared/lib/trace":5796},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.addPersonalMessage=async function({signatureParams:e,signatureController:t}){return i(e,t,"newUnsignedPersonalMessage")},r.addTypedMessage=async function({signatureParams:e,signatureController:t}){return i(e,t,"newUnsignedTypedMessage")};var n=e("../../../../shared/lib/trace");async function i(e,t,r){const[,i]=e,{id:s}=i,o=null==s?void 0:s.toString();(0,n.endTrace)({name:n.TraceName.Middleware,id:o});const a=await t[r](...e);return(0,n.endTrace)({name:n.TraceName.Signature,id:o}),a}}}},{package:"$root$",file:"app/scripts/lib/signature/util.ts"}],[171,{"./snap-keyring":174,"./utils":175},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getAccountsBySnapId",{enumerable:!0,get:function(){return i.getAccountsBySnapId}}),Object.defineProperty(r,"snapKeyringBuilder",{enumerable:!0,get:function(){return n.snapKeyringBuilder}});var n=e("./snap-keyring"),i=e("./utils")}}},{package:"$root$",file:"app/scripts/lib/snap-keyring/index.ts"}],[172,{"@metamask/keyring-api":1983,"@metamask/permission-controller":2328},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isProtocolAllowed=l,r.keyringSnapPermissionsBuilder=function(e,t){return()=>{if("metamask"===t)return o;if(s.includes(t))return c;const r=e.getSubjectMetadata(t);return(null==r?void 0:r.subjectType)===i.SubjectType.Website&&l(t)?a:[]}};var n=e("@metamask/keyring-api"),i=e("@metamask/permission-controller");const s=["https://portfolio.metamask.io"],o=[n.KeyringRpcMethod.ListAccounts,n.KeyringRpcMethod.GetAccount,n.KeyringRpcMethod.FilterAccountChains,n.KeyringRpcMethod.DeleteAccount,n.KeyringRpcMethod.ListRequests,n.KeyringRpcMethod.GetRequest,n.KeyringRpcMethod.SubmitRequest,n.KeyringRpcMethod.RejectRequest],a=[n.KeyringRpcMethod.ListAccounts,n.KeyringRpcMethod.GetAccount,n.KeyringRpcMethod.CreateAccount,n.KeyringRpcMethod.FilterAccountChains,n.KeyringRpcMethod.UpdateAccount,n.KeyringRpcMethod.DeleteAccount,n.KeyringRpcMethod.ExportAccount,n.KeyringRpcMethod.ListRequests,n.KeyringRpcMethod.GetRequest,n.KeyringRpcMethod.ApproveRequest,n.KeyringRpcMethod.RejectRequest],c=[n.KeyringRpcMethod.ListAccounts,n.KeyringRpcMethod.GetAccount,n.KeyringRpcMethod.GetAccountBalances,n.KeyringRpcMethod.SubmitRequest],u=["https:"];function l(e){try{const t=new URL(e);return u.includes(t.protocol)}catch(e){return!1}}}}},{package:"$root$",file:"app/scripts/lib/snap-keyring/keyring-snaps-permissions.ts"}],[173,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getSnapAndHardwareInfoForMetrics=async function(e,t,r,n){var i,s,o;if(!n)return{};const a=n.call("AccountsController:getSelectedAccount"),c=a.address;let u;var l;null!==(i=a.metadata.snap)&&void 0!==i&&i.id&&(u=n.call("SnapController:get",null===(l=a.metadata.snap)||void 0===l?void 0:l.id));return{account_type:await e(c),device_model:await t(c),account_hardware_type:await r(c),account_snap_type:null===(s=u)||void 0===s?void 0:s.id,account_snap_version:null===(o=u)||void 0===o?void 0:o.version}}}}},{package:"$root$",file:"app/scripts/lib/snap-keyring/metrics.ts"}],[174,{"../../../../shared/constants/app":5738,"../../../../shared/constants/metametrics":5749,"../../../../shared/lib/accounts":5772,"../../../../shared/lib/accounts/snaps":5774,"../../../../shared/lib/snaps/snaps":5791,"../../../../ui/components/component-library/icon":6348,"../../translate":385,"./utils/isBlockedUrl":176,"./utils/showResult":177,"@metamask/eth-snap-keyring":1781,"@metamask/snaps-utils":2853,"webextension-polyfill":5715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.showAccountCreationDialog=T,r.showAccountNameSuggestionDialog=k,r.snapKeyringBuilder=function(e,t){const r=()=>new i.SnapKeyring(e,new I(e,t));return r.type=i.SnapKeyring.type,r};var n,i=e("@metamask/eth-snap-keyring"),s=(n=e("webextension-polyfill"))&&n.__esModule?n:{default:n},o=e("@metamask/snaps-utils"),a=e("../../../../shared/constants/metametrics"),c=e("../../../../shared/constants/app"),u=e("../../translate"),l=e("../../../../ui/components/component-library/icon"),d=e("../../../../shared/lib/accounts"),f=e("../../../../shared/lib/snaps/snaps"),p=e("../../../../shared/lib/accounts/snaps"),h=e("./utils/isBlockedUrl"),m=e("./utils/showResult");function g(e,t,r){y(e,t),t.set(e,r)}function y(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function b(e,t){return e.get(E(e,t))}function w(e,t,r){return e.set(E(e,t),r),r}function E(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}async function T(e,t){try{return Boolean(await t.call("ApprovalController:addRequest",{origin:e,type:c.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountCreation},!0))}catch(e){throw new Error(`Error occurred while showing account creation dialog.\n${e}`)}}async function k(e,t,r){try{return await t.call("ApprovalController:addRequest",{origin:e,type:c.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.showNameSnapAccount,requestData:{snapSuggestedAccountName:r}},!0)}catch(e){throw new Error(`Error occurred while showing name account dialog.\n${e}`)}}var v=new WeakMap,_=new WeakMap,A=new WeakMap,S=new WeakMap,P=new WeakSet;class I{constructor(e,{trackEvent:t,persistKeyringHelper:r,removeAccountHelper:n}){!function(e,t){y(e,t),t.add(e)}(this,P),g(this,v,void 0),g(this,_,void 0),g(this,A,void 0),g(this,S,void 0),w(v,this,e),w(_,this,t),w(A,this,r),w(S,this,n)}async addressExists(e){return(await b(v,this).call("KeyringController:getAccounts")).includes(e.toLowerCase())}async redirectUser(e,t,r){if(t.length>0||r.length>0){const n=await(0,h.isBlockedUrl)(t,(async()=>await b(v,this).call("PhishingController:maybeUpdateState")),(e=>b(v,this).call("PhishingController:testOrigin",e))),i=await b(v,this).call("ApprovalController:addRequest",{origin:e,requestData:{url:t,message:r,isBlockedUrl:n},type:c.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.showSnapAccountRedirect},!0);Boolean(i)&&t.length>0?s.default.tabs.create({url:t}):console.log("User refused snap account redirection to:",t)}else console.log("Error occurred when redirecting snap account. url or message must be defined")}async saveState(){await b(A,this).call(this)}async addAccount(e,t,r,n,s="",{displayConfirmation:a,displayAccountNameSuggestion:c,setSelectedAccount:u}=(0,i.getDefaultInternalOptions)()){(0,o.assertIsValidSnapId)(t);const l=(0,f.isSnapPreinstalled)(t)&&!a,d=(0,f.isSnapPreinstalled)(t)&&!c,p=(0,f.isSnapPreinstalled)(t)&&!u,{accountName:h}=await E(P,this,x).call(this,{snapId:t,skipConfirmationDialog:l,skipAccountNameSuggestionDialog:d,accountNameSuggestion:s,handleUserInput:r});E(P,this,N).call(this,{address:e,snapId:t,skipConfirmationDialog:l,skipSetSelectedAccountStep:p,accountName:h,onceSaved:n,defaultAccountNameChosen:Boolean(s)&&h===s})}async removeAccount(e,t,r){(0,o.assertIsValidSnapId)(t);const n=(0,p.getSnapName)(t,b(v,this)),{id:i}=b(v,this).call("ApprovalController:startFlow"),s="https://support.metamask.io/managing-my-wallet/accounts-and-addresses/how-to-remove-an-account-from-your-metamask-wallet/",d=e=>{b(_,this).call(this,{event:e,category:a.MetaMetricsEventCategory.Accounts,properties:{account_type:a.MetaMetricsEventAccountType.Snap,snap_id:t,snap_name:n}})};let f=!1;try{if(f=Boolean(await b(v,this).call("ApprovalController:addRequest",{origin:t,type:c.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountRemoval,requestData:{publicAddress:e}},!0)),!f)throw await r(f),new Error("User denied account removal");try{await b(S,this).call(this,e),await r(f),await b(A,this).call(this),d(a.MetaMetricsEventName.RemoveSnapAccountSuccessViewed),await(0,m.showError)(b(v,this),t,{icon:l.IconName.UserCircleRemove,title:(0,u.t)("snapAccountRemoved")},{message:(0,u.t)("snapAccountRemovedDescription"),learnMoreLink:s}),d(a.MetaMetricsEventName.RemoveSnapAccountSuccessClicked)}catch(e){const r=e.message;throw await(0,m.showError)(b(v,this),t,{icon:l.IconName.UserCircleRemove,title:(0,u.t)("snapAccountRemovalFailed")},{message:(0,u.t)("snapAccountRemovalFailedDescription",n),learnMoreLink:s,error:r}),d(a.MetaMetricsEventName.AccountRemoveFailed),new Error(`Error occurred while removing snap account: ${r}`)}}finally{f&&d(a.MetaMetricsEventName.AccountRemoved),b(v,this).call("ApprovalController:endFlow",{id:i})}}}async function C(e){const{id:t}=b(v,this).call("ApprovalController:startFlow");try{return await e(t)}finally{b(v,this).call("ApprovalController:endFlow",{id:t})}}async function M(e,t){const{success:r,name:n}=await k(e,b(v,this),t);return{success:r,accountName:n}}async function j(e){const t=await b(v,this).call("AccountsController:listMultichainAccounts");return{success:!0,accountName:(0,d.getUniqueAccountName)(t,e)}}async function x({snapId:e,skipConfirmationDialog:t,skipAccountNameSuggestionDialog:r,handleUserInput:n,accountNameSuggestion:i}){return await E(P,this,C).call(this,(async s=>{{const r=t||await T(e,b(v,this));if(!r)throw await n(r),new Error("User denied account creation")}{const{success:t,accountName:s}=r?await E(P,this,j).call(this,i):await E(P,this,M).call(this,e,i);if(await n(t),!t)throw new Error("User denied account creation");return{accountName:s}}}))}async function N({address:e,snapId:t,skipConfirmationDialog:r,skipSetSelectedAccountStep:n,accountName:i,onceSaved:s,defaultAccountNameChosen:o}){const c="https://support.metamask.io/managing-my-wallet/accounts-and-addresses/how-to-add-accounts-in-your-wallet/",d=(0,p.getSnapName)(t,b(v,this)),f=e=>{b(_,this).call(this,{event:e,category:a.MetaMetricsEventCategory.Accounts,properties:{account_type:a.MetaMetricsEventAccountType.Snap,snap_id:t,snap_name:d,...e===a.MetaMetricsEventName.AccountAdded&&{is_suggested_name:o}}})};await E(P,this,C).call(this,(async o=>{try{const o=await s;n||b(v,this).call("AccountsController:setSelectedAccount",o),i&&b(v,this).call("AccountsController:setAccountName",o,i),r||(f(a.MetaMetricsEventName.AddSnapAccountSuccessViewed),await(0,m.showSuccess)(b(v,this),t,{icon:l.IconName.UserCircleAdd,title:(0,u.t)("snapAccountCreated")},{message:(0,u.t)("snapAccountCreatedDescription"),address:e,learnMoreLink:c}),f(a.MetaMetricsEventName.AddSnapAccountSuccessClicked)),f(a.MetaMetricsEventName.AccountAdded)}catch(e){const r=e.message;await(0,m.showError)(b(v,this),t,{icon:l.IconName.UserCircleAdd,title:(0,u.t)("snapAccountCreationFailed")},{message:(0,u.t)("snapAccountCreationFailedDescription",d),learnMoreLink:c,error:r}),console.error("Error occurred while creating snap account:",r)}}))}}}},{package:"$root$",file:"app/scripts/lib/snap-keyring/snap-keyring.ts"}],[175,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getAccountsBySnapId=void 0;r.getAccountsBySnapId=async(e,t)=>{const r=await e();return await r.getAccountsBySnapId(t)}}}},{package:"$root$",file:"app/scripts/lib/snap-keyring/utils.ts"}],[176,{"../keyring-snaps-permissions":172},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isBlockedUrl=void 0;var n=e("../keyring-snaps-permissions");r.isBlockedUrl=async(e,t,r)=>{try{return!(0,n.isProtocolAllowed)(e)||(await t(),r(e).result)}catch(e){return console.error("Invalid URL passed into snap-keyring:",e),!1}}}}},{package:"$root$",file:"app/scripts/lib/snap-keyring/utils/isBlockedUrl.ts"}],[177,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.showSuccess=r.showError=void 0;const n=e=>({name:"SnapAuthorshipHeader",key:"snapHeader",properties:{snapId:e}});r.showError=(e,t,r,i)=>e.call("ApprovalController:showError",{header:[n(t)],title:r.title,icon:r.icon,error:{key:"snapAccountErrorMessage",name:"SnapAccountErrorMessage",properties:i}});r.showSuccess=(e,t,r,i)=>e.call("ApprovalController:showSuccess",{header:[n(t)],title:r.title,icon:r.icon,message:{key:"snapAccountSuccessMessage",name:"SnapAccountSuccessMessage",properties:i}})}}},{package:"$root$",file:"app/scripts/lib/snap-keyring/utils/showResult.ts"}],[1775,{"./util.cjs":1787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CaseInsensitiveMap=void 0;const n=e("./util.cjs");class i extends Map{static fromObject(e){return new i(Object.entries(e))}toObject(){return Object.fromEntries(this.entries())}get(e){return super.get(e.toLowerCase())}getOrThrow(e,t="Key"){return this.get(e)??(0,n.throwError)(`${t} '${e}' not found`)}has(e){return super.has(e.toLowerCase())}set(e,t){return super.set(e.toLowerCase(),t)}delete(e){return super.delete(e.toLowerCase())}}r.CaseInsensitiveMap=i}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/CaseInsensitiveMap.cjs"}],[1776,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DeferredPromise=void 0;r.DeferredPromise=class{constructor(){if(this.resolve=undefined,this.reject=undefined,this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),!this.resolve||!this.reject)throw new Error("Promise constructor failed")}}}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/DeferredPromise.cjs"}]],[],{});